import{p as be,r as fe,v as ke,w as J,x as me,q as n,y as _e,i as he,f as Z,z as P,j as c,b as ge,t as Q,e as l,g as U,h as xe,A as we,B as ye,C as w,D as b,E as o,u as s,F as y,s as Ee,G as V,H as X,I as Y}from"./index-ClHKVJxt.js";var Se=Z(`<div class="web-search-menu svelte-e7nk0k" id="webSearchMenu" role="dialog" tabindex="-1"><div class="web-search-fields svelte-e7nk0k"><label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Engine</span> <select class="select-control svelte-e7nk0k"><option class="svelte-e7nk0k">Auto</option><option class="svelte-e7nk0k">Native</option><option class="svelte-e7nk0k">Exa</option></select></label> <label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Context</span> <select class="select-control svelte-e7nk0k"><option class="svelte-e7nk0k">Default</option><option class="svelte-e7nk0k">Low</option><option class="svelte-e7nk0k">Medium</option><option class="svelte-e7nk0k">High</option></select></label> <label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Max results</span> <input class="input-control svelte-e7nk0k" type="number" min="1" max="25" step="1" inputmode="numeric" pattern="\\\\d*"/></label> <label class="prompt svelte-e7nk0k"><span class="svelte-e7nk0k">Search prompt</span> <textarea class="textarea-control svelte-e7nk0k" rows="5" placeholder="Default: A web search was conducted on {today's_date}. Incorporate the following web search results into your response. IMPORTANT: Cite them using markdown links named using the domain of the source."></textarea></label></div></div>`),Me=Z('<div class="web-search svelte-e7nk0k" role="group" aria-label="Web search settings"><button type="button" class="btn btn-ghost btn-small web-search-summary svelte-e7nk0k" aria-haspopup="true" aria-controls="webSearchMenu"><span class="svelte-e7nk0k">Web search</span> <span class="status svelte-e7nk0k"> </span></button> <!></div>');function De(ee,te){be(te,!1);const e=()=>me(u,"$webSearch",ae),[ae,ne]=we(),u=ye;let r=w(!1),k=null,T=w(!1),m=w(null),E=w(null),S=w(null);function f(){k&&(clearTimeout(k),k=null)}function R(a=!1){f(),!(!a&&!u.current.enabled)&&(b(r,!0),queueMicrotask(()=>{n(m)?.querySelector('select, input, textarea, button, [href], [tabindex]:not([tabindex="-1"])')?.focus()}))}function W(){f(),k=setTimeout(()=>{n(r)&&(b(r,!1),k=null)},250)}function _(){f(),n(r)&&(b(r,!1),n(E)?.focus())}function q(){u.current.enabled&&R()}function se(){u.current.enabled?(u.setEnabled(!1),_()):(u.setEnabled(!0),R(!0))}function le(a){const t=a.currentTarget.value;u.update({engine:t==="native"||t==="exa"?t:null})}function oe(a){const t=a.currentTarget.value;u.update({contextSize:t==="low"||t==="medium"||t==="high"?t:null})}function I(a){const t=a.currentTarget;if(t.value===""){u.update({maxResults:null});return}let i=Math.trunc(Number(t.value));Number.isFinite(i)&&(i<1&&(i=1),i>25&&(i=25),u.update({maxResults:i}))}function re(a){const t=a.currentTarget.value;u.update({searchPrompt:t})}function ue(a){const t=a.relatedTarget;n(S)&&t&&n(S).contains(t)||_()}function N(a){if(a.key==="Escape"){a.preventDefault(),_();return}if(a.key==="Tab"&&n(r)){const t=Array.from(n(m)?.querySelectorAll('select, input, textarea, button, [href], [tabindex]:not([tabindex="-1"])')??[]).filter(x=>!x.hasAttribute("disabled"));if(t.length===0)return;const i=t[0],g=t[t.length-1],v=document.activeElement;a.shiftKey&&v===i?(a.preventDefault(),g.focus()):!a.shiftKey&&v===g&&(a.preventDefault(),i.focus())}}function F(a){if(!n(r))return;const t=a.target;n(m)?.contains(t)||n(E)?.contains(t)||_()}fe(()=>{document.addEventListener("pointerdown",F)}),ke(()=>{f(),document.removeEventListener("pointerdown",F)}),J(()=>e(),()=>{b(T,e().enabled)}),J(()=>(e(),n(T)),()=>{!e().enabled&&n(T)&&_()}),_e(),he();var h=Me(),d=c(h),D=o(c(d),2),ie=c(D);P(d,a=>b(E,a),()=>n(E));var ce=o(d,2);{var ve=a=>{var t=Se(),i=c(t),g=c(i),v=o(c(g),2),x=c(v);x.value=x.__value="";var A=o(x);A.value=A.__value="native";var K=o(A);K.value=K.__value="exa";var L;V(v);var B=o(g,2),p=o(c(B),2),C=c(p);C.value=C.__value="";var $=o(C);$.value=$.__value="low";var z=o($);z.value=z.__value="medium";var H=o(z);H.value=H.__value="high";var j;V(p);var G=o(B,2),M=o(c(G),2),de=o(G,2),O=o(c(de),2);P(t,pe=>b(m,pe),()=>n(m)),Q(()=>{v.disabled=(e(),s(()=>!e().enabled)),L!==(L=(e(),s(()=>e().engine??"")))&&(v.value=(v.__value=(e(),s(()=>e().engine??"")))??"",X(v,(e(),s(()=>e().engine??"")))),p.disabled=(e(),s(()=>!e().enabled)),j!==(j=(e(),s(()=>e().contextSize??"")))&&(p.value=(p.__value=(e(),s(()=>e().contextSize??"")))??"",X(p,(e(),s(()=>e().contextSize??"")))),Y(M,(e(),s(()=>e().maxResults??""))),M.disabled=(e(),s(()=>!e().enabled)),Y(O,(e(),s(()=>e().searchPrompt??""))),O.disabled=(e(),s(()=>!e().enabled))}),l("change",v,le),l("change",p,oe),l("change",M,I),l("blur",M,I),l("input",O,re),l("mouseenter",t,f),l("mouseleave",t,W),l("focusin",t,f),l("focusout",t,ue),l("keydown",t,N),U(a,t)};ge(ce,a=>{n(r),e(),s(()=>n(r)&&e().enabled)&&a(ve)})}P(h,a=>b(S,a),()=>n(S)),Q(()=>{y(h,"data-enabled",(e(),s(()=>e().enabled))),y(h,"data-open",n(r)),y(d,"aria-expanded",(e(),n(r),s(()=>e().enabled&&n(r)))),y(D,"data-enabled",(e(),s(()=>e().enabled))),y(D,"aria-label",(e(),s(()=>e().enabled?"Web search on":"Web search off"))),Ee(ie,(e(),s(()=>e().enabled?"On":"Off")))}),l("click",d,se),l("mouseenter",d,q),l("focus",d,q),l("mouseleave",d,W),l("keydown",d,N),U(ee,h),xe(),ne()}export{De as default};
