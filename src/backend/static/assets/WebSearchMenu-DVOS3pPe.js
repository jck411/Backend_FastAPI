import{p as xe,a as ye,r as Se,v as Ee,w as pe,x as Me,q as o,y as Te,i as De,f as B,b as ee,z as ae,t as F,g as H,h as Ae,A as Ce,B as ze,C as K,D as S,j as i,E as f,u as n,n as Pe,m as de,F as s,G as Re,e as r,s as Ie,H as J,I as Q,J as U}from"./index-DioqefSF.js";var Ne=B(`<details class="pwa-web-search-details svelte-e7nk0k"><summary class="svelte-e7nk0k">Search settings</summary> <div class="web-search-fields svelte-e7nk0k"><label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Engine</span> <select class="select-control svelte-e7nk0k"><option class="svelte-e7nk0k">Auto</option><option class="svelte-e7nk0k">Native</option><option class="svelte-e7nk0k">Exa</option></select></label> <label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Context</span> <select class="select-control svelte-e7nk0k"><option class="svelte-e7nk0k">Default</option><option class="svelte-e7nk0k">Low</option><option class="svelte-e7nk0k">Medium</option><option class="svelte-e7nk0k">High</option></select></label> <label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Max results</span> <input class="input-control svelte-e7nk0k" type="number" min="1" max="25" step="1" inputmode="numeric" pattern="\\\\d*"/></label> <label class="prompt svelte-e7nk0k"><span class="svelte-e7nk0k">Search prompt</span> <textarea class="textarea-control svelte-e7nk0k" rows="3" placeholder="Default: A web search was conducted on {today's_date}. Incorporate the following web search results into your response. IMPORTANT: Cite them using markdown links named using the domain of the source."></textarea></label></div></details>`),Oe=B('<div class="pwa-web-search-row svelte-e7nk0k"><span class="pwa-label svelte-e7nk0k">Web Search</span> <button type="button"><span class="pwa-toggle-knob svelte-e7nk0k"></span></button></div> <!>',1),We=B(`<div class="web-search-menu svelte-e7nk0k" id="webSearchMenu" role="dialog" tabindex="-1"><div class="web-search-fields svelte-e7nk0k"><label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Engine</span> <select class="select-control svelte-e7nk0k"><option class="svelte-e7nk0k">Auto</option><option class="svelte-e7nk0k">Native</option><option class="svelte-e7nk0k">Exa</option></select></label> <label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Context</span> <select class="select-control svelte-e7nk0k"><option class="svelte-e7nk0k">Default</option><option class="svelte-e7nk0k">Low</option><option class="svelte-e7nk0k">Medium</option><option class="svelte-e7nk0k">High</option></select></label> <label class="svelte-e7nk0k"><span class="svelte-e7nk0k">Max results</span> <input class="input-control svelte-e7nk0k" type="number" min="1" max="25" step="1" inputmode="numeric" pattern="\\\\d*"/></label> <label class="prompt svelte-e7nk0k"><span class="svelte-e7nk0k">Search prompt</span> <textarea class="textarea-control svelte-e7nk0k" rows="5" placeholder="Default: A web search was conducted on {today's_date}. Incorporate the following web search results into your response. IMPORTANT: Cite them using markdown links named using the domain of the source."></textarea></label></div></div>`),qe=B('<button type="button" class="btn btn-ghost btn-small web-search-summary svelte-e7nk0k" aria-haspopup="true" aria-controls="webSearchMenu"><span class="svelte-e7nk0k">Web search</span> <span class="status svelte-e7nk0k"> </span></button> <!>',1),Le=B('<div class="web-search svelte-e7nk0k" role="group" aria-label="Web search settings"><!></div>');function He(be,te){xe(te,!1);const e=()=>Me(v,"$webSearch",ke),[ke,_e]=Ce();let D=ye(te,"pwaMode",8,!1);const v=ze;let p=K(!1),A=null,V=K(!1),C=K(null),$=K(null),j=K(null);function E(){A&&(clearTimeout(A),A=null)}function ne(t=!1){E(),!(!t&&!v.current.enabled)&&(S(p,!0),queueMicrotask(()=>{o(C)?.querySelector('select, input, textarea, button, [href], [tabindex]:not([tabindex="-1"])')?.focus()}))}function se(){E(),A=setTimeout(()=>{o(p)&&(S(p,!1),A=null)},250)}function z(){E(),o(p)&&(S(p,!1),o($)?.focus())}function le(){v.current.enabled&&ne()}function oe(){if(D()){v.setEnabled(!v.current.enabled);return}v.current.enabled?(v.setEnabled(!1),z()):(v.setEnabled(!0),ne(!0))}function re(t){const a=t.currentTarget.value;v.update({engine:a==="native"||a==="exa"?a:null})}function ie(t){const a=t.currentTarget.value;v.update({contextSize:a==="low"||a==="medium"||a==="high"?a:null})}function G(t){const a=t.currentTarget;if(a.value===""){v.update({maxResults:null});return}let l=Math.trunc(Number(a.value));Number.isFinite(l)&&(l<1&&(l=1),l>25&&(l=25),v.update({maxResults:l}))}function ce(t){const a=t.currentTarget.value;v.update({searchPrompt:a})}function fe(t){const a=t.relatedTarget;o(j)&&a&&o(j).contains(a)||z()}function ue(t){if(t.key==="Escape"){t.preventDefault(),z();return}if(t.key==="Tab"&&o(p)){const a=Array.from(o(C)?.querySelectorAll('select, input, textarea, button, [href], [tabindex]:not([tabindex="-1"])')??[]).filter(P=>!P.hasAttribute("disabled"));if(a.length===0)return;const l=a[0],d=a[a.length-1],m=document.activeElement;t.shiftKey&&m===l?(t.preventDefault(),d.focus()):!t.shiftKey&&m===d&&(t.preventDefault(),l.focus())}}function ve(t){if(!o(p))return;const a=t.target;o(C)?.contains(a)||o($)?.contains(a)||z()}Se(()=>{document.addEventListener("pointerdown",ve)}),Ee(()=>{E(),document.removeEventListener("pointerdown",ve)}),pe(()=>e(),()=>{S(V,e().enabled)}),pe(()=>(e(),o(V)),()=>{!e().enabled&&o(V)&&z()}),Te(),De();var M=Le(),me=i(M);{var he=t=>{var a=Oe(),l=de(a),d=s(i(l),2);let m;var P=s(l,2);{var X=b=>{var k=Ne(),Y=s(i(k),2),R=i(Y),c=s(i(R),2),h=i(c);h.value=h.__value="";var g=s(h);g.value=g.__value="native";var I=s(g);I.value=I.__value="exa";var N;J(c);var O=s(R,2),u=s(i(O),2),w=i(u);w.value=w.__value="";var x=s(w);x.value=x.__value="low";var y=s(x);y.value=y.__value="medium";var W=s(y);W.value=W.__value="high";var q;J(u);var L=s(O,2),_=s(i(L),2),Z=s(L,2),T=s(i(Z),2);F(()=>{N!==(N=(e(),n(()=>e().engine??"")))&&(c.value=(c.__value=(e(),n(()=>e().engine??"")))??"",Q(c,(e(),n(()=>e().engine??"")))),q!==(q=(e(),n(()=>e().contextSize??"")))&&(u.value=(u.__value=(e(),n(()=>e().contextSize??"")))??"",Q(u,(e(),n(()=>e().contextSize??"")))),U(_,(e(),n(()=>e().maxResults??""))),U(T,(e(),n(()=>e().searchPrompt??"")))}),r("change",c,re),r("change",u,ie),r("change",_,G),r("blur",_,G),r("input",T,ce),H(b,k)};ee(P,b=>{e(),n(()=>e().enabled)&&b(X)})}F(b=>{m=Re(d,1,"pwa-toggle svelte-e7nk0k",null,m,b),f(d,"aria-pressed",(e(),n(()=>e().enabled))),f(d,"aria-label",(e(),n(()=>e().enabled?"Turn off web search":"Turn on web search")))},[()=>({on:e().enabled})]),r("click",d,oe),H(t,a)},ge=t=>{var a=qe(),l=de(a),d=s(i(l),2),m=i(d);ae(l,b=>S($,b),()=>o($));var P=s(l,2);{var X=b=>{var k=We(),Y=i(k),R=i(Y),c=s(i(R),2),h=i(c);h.value=h.__value="";var g=s(h);g.value=g.__value="native";var I=s(g);I.value=I.__value="exa";var N;J(c);var O=s(R,2),u=s(i(O),2),w=i(u);w.value=w.__value="";var x=s(w);x.value=x.__value="low";var y=s(x);y.value=y.__value="medium";var W=s(y);W.value=W.__value="high";var q;J(u);var L=s(O,2),_=s(i(L),2),Z=s(L,2),T=s(i(Z),2);ae(k,we=>S(C,we),()=>o(C)),F(()=>{c.disabled=(e(),n(()=>!e().enabled)),N!==(N=(e(),n(()=>e().engine??"")))&&(c.value=(c.__value=(e(),n(()=>e().engine??"")))??"",Q(c,(e(),n(()=>e().engine??"")))),u.disabled=(e(),n(()=>!e().enabled)),q!==(q=(e(),n(()=>e().contextSize??"")))&&(u.value=(u.__value=(e(),n(()=>e().contextSize??"")))??"",Q(u,(e(),n(()=>e().contextSize??"")))),U(_,(e(),n(()=>e().maxResults??""))),_.disabled=(e(),n(()=>!e().enabled)),U(T,(e(),n(()=>e().searchPrompt??""))),T.disabled=(e(),n(()=>!e().enabled))}),r("change",c,re),r("change",u,ie),r("change",_,G),r("blur",_,G),r("input",T,ce),r("mouseenter",k,E),r("mouseleave",k,se),r("focusin",k,E),r("focusout",k,fe),r("keydown",k,ue),H(b,k)};ee(P,b=>{o(p),e(),n(()=>o(p)&&e().enabled)&&b(X)})}F(()=>{f(l,"aria-expanded",(e(),o(p),n(()=>e().enabled&&o(p)))),f(d,"data-enabled",(e(),n(()=>e().enabled))),f(d,"aria-label",(e(),n(()=>e().enabled?"Web search on":"Web search off"))),Ie(m,(e(),n(()=>e().enabled?"On":"Off")))}),r("click",l,oe),r("mouseenter",l,le),r("focus",l,le),r("mouseleave",l,se),r("keydown",l,ue),H(t,a)};ee(me,t=>{D()?t(he):t(ge,!1)})}ae(M,t=>S(j,t),()=>o(j)),F(()=>{f(M,"data-enabled",(e(),n(()=>e().enabled))),f(M,"data-open",(Pe(D()),e(),o(p),n(()=>D()?e().enabled:o(p)))),f(M,"data-pwa",D())}),H(be,M),Ae(),_e()}export{He as default};
