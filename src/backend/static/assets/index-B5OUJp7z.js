const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModelPicker-BYQ2bCr3.js","assets/ModelPicker-Cn_xB6on.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const lc=!1;var qs=Array.isArray,cf=Array.prototype.indexOf,di=Array.from,ko=Object.defineProperty,Br=Object.getOwnPropertyDescriptor,cc=Object.getOwnPropertyDescriptors,df=Object.prototype,ff=Array.prototype,fi=Object.getPrototypeOf,Wi=Object.isExtensible;function fs(e){return typeof e=="function"}const ra=()=>{};function pf(e){return e()}function Ns(e){for(var t=0;t<e.length;t++)e[t]()}function vf(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}function hf(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const er=2,pi=4,Oo=8,as=16,qr=32,Ea=64,vi=128,or=256,So=512,Pn=1024,ir=2048,Hr=4096,_r=8192,Ca=16384,hi=32768,ss=65536,Vi=1<<17,mf=1<<18,os=1<<19,dc=1<<20,ju=1<<21,mi=1<<22,ha=1<<23,Mr=Symbol("$state"),fc=Symbol("legacy props"),gf=Symbol(""),gi=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function $o(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function _f(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function bf(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xf(e){throw new Error("https://svelte.dev/e/effect_orphan")}function wf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function kf(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Sf(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ef(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Cf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Af(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Tf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ro=1,zo=2,pc=4,Df=8,Mf=16,Ff=1,Pf=2,vc=4,If=8,Lf=16,Nf=1,Of=2,Cn=Symbol(),$f="http://www.w3.org/1999/xhtml",Rf="http://www.w3.org/2000/svg",zf="@attach";function Bf(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Uf(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let jf=!1;function hc(e){return e===this.v}function _i(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function mc(e){return!_i(e,this.v)}let us=!1,qf=!1;function Hf(){us=!0}let Kt=null;function Xa(e){Kt=e}function Nt(e,t=!1,n){Kt={p:Kt,c:null,e:null,s:e,x:null,l:us&&!t?{s:null,u:null,$:[]}:null}}function Ot(e){var t=Kt,n=t.e;if(n!==null){t.e=null;for(var r of n)Pc(r)}return e!==void 0&&(t.x=e),Kt=t.p,e??{}}function Hs(){return!us||Kt!==null&&Kt.l===null}let ea=[],Eo=[];function gc(){var e=ea;ea=[],Ns(e)}function Wf(){var e=Eo;Eo=[],Ns(e)}function Vf(){return ea.length>0||Eo.length>0}function Aa(e){if(ea.length===0&&!Ts){var t=ea;queueMicrotask(()=>{t===ea&&gc()})}ea.push(e)}function Gf(){ea.length>0&&gc(),Eo.length>0&&Wf()}const Zf=new WeakMap;function _c(e){var t=ht;if(t===null)return St.f|=ha,e;if((t.f&hi)===0){if((t.f&vi)===0)throw!t.parent&&e instanceof Error&&bc(e),e;t.b.error(e)}else Qa(e,t)}function Qa(e,t){for(;t!==null;){if((t.f&vi)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&bc(e),e}function bc(e){const t=Zf.get(e);t&&(ko(e,"message",{value:t.message}),ko(e,"stack",{value:t.stack}))}const su=new Set;let Qt=null,ho=null,qu=new Set,xa=[],Bo=null,Hu=!1,Ts=!1;class Ur{current=new Map;#s=new Map;#t=new Set;#f=0;#o=null;#c=!1;#a=[];#n=[];#e=[];#r=[];#u=[];#d=[];#l=[];skipped_effects=new Set;process(t){xa=[],ho=null;for(const a of t)this.#p(a);if(this.#a.length===0&&this.#f===0){this.#v();var n=this.#e,r=this.#r;this.#e=[],this.#r=[],this.#u=[],ho=Qt,Qt=null,Gi(n),Gi(r),Qt===null?Qt=this:su.delete(this),this.#o?.resolve()}else this.#i(this.#e),this.#i(this.#r),this.#i(this.#u);for(const a of this.#a)ga(a);for(const a of this.#n)ga(a);this.#a=[],this.#n=[]}#p(t){t.f^=Pn;for(var n=t.first;n!==null;){var r=n.f,a=(r&(qr|Ea))!==0,o=a&&(r&Pn)!==0,u=o||(r&_r)!==0||this.skipped_effects.has(n);if(!u&&n.fn!==null){if(a)n.f^=Pn;else if((r&pi)!==0)this.#r.push(n);else if((r&Pn)===0)if((r&mi)!==0){var i=n.b?.is_pending()?this.#n:this.#a;i.push(n)}else Gs(n)&&((n.f&as)!==0&&this.#u.push(n),ga(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#i(t){for(const n of t)((n.f&ir)!==0?this.#d:this.#l).push(n),Wn(n,Pn);t.length=0}capture(t,n){this.#s.has(t)||this.#s.set(t,n),this.current.set(t,t.v)}activate(){Qt=this}deactivate(){Qt=null,ho=null;for(const t of qu)if(qu.delete(t),t(),Qt!==null)break}neuter(){this.#c=!0}flush(){xa.length>0?yc():this.#v(),Qt===this&&(this.#f===0&&su.delete(this),this.deactivate())}#v(){if(!this.#c)for(const t of this.#t)t();this.#t.clear()}increment(){this.#f+=1}decrement(){if(this.#f-=1,this.#f===0){for(const t of this.#d)Wn(t,ir),es(t);for(const t of this.#l)Wn(t,Hr),es(t);this.#e=[],this.#r=[],this.flush()}else this.deactivate()}add_callback(t){this.#t.add(t)}settled(){return(this.#o??=vf()).promise}static ensure(){if(Qt===null){const t=Qt=new Ur;su.add(Qt),Ts||Ur.enqueue(()=>{Qt===t&&t.flush()})}return Qt}static enqueue(t){Aa(t)}}function Kf(e){var t=Ts;Ts=!0;try{for(var n;;){if(Gf(),xa.length===0&&!Vf()&&(Qt?.flush(),xa.length===0))return Bo=null,n;yc()}}finally{Ts=t}}function yc(){var e=Ya;Hu=!0;try{var t=0;for(Ji(!0);xa.length>0;){var n=Ur.ensure();if(t++>1e3){var r,a;Yf()}n.process(xa),aa.clear()}}finally{Hu=!1,Ji(e),Bo=null}}function Yf(){try{wf()}catch(e){Qa(e,Bo)}}let fa=null;function Gi(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ca|_r))===0&&Gs(r)&&(fa=[],ga(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Oc(r):r.fn=null),fa?.length>0)){aa.clear();for(const a of fa)ga(a);fa=[]}}fa=null}}function es(e){for(var t=Bo=e;t.parent!==null;){t=t.parent;var n=t.f;if(Hu&&t===ht&&(n&as)!==0)return;if((n&(Ea|qr))!==0){if((n&Pn)===0)return;t.f^=Pn}}xa.push(t)}function Jf(e){let t=0,n=oa(0),r;return()=>{f0()&&(s(n),is(()=>(t===0&&(r=p(()=>e(()=>Ds(n)))),t+=1,()=>{Aa(()=>{t-=1,t===0&&(r?.(),r=void 0,Ds(n))})})))}}var Xf=ss|os|vi;function Qf(e,t,n){new e0(e,t,n)}class e0{parent;#s=!1;#t;#f=null;#o;#c;#a;#n=null;#e=null;#r=null;#u=null;#d=0;#l=0;#p=!1;#i=null;#v=()=>{this.#i&&wa(this.#i,this.#d)};#_=Jf(()=>(this.#i=oa(this.#d),()=>{this.#i=null}));constructor(t,n,r){this.#t=t,this.#o=n,this.#c=r,this.parent=ht.b,this.#s=!!this.#o.pending,this.#a=Ta(()=>{ht.b=this;{try{this.#n=jn(()=>r(this.#t))}catch(a){this.error(a)}this.#l>0?this.#m():this.#s=!1}},Xf)}#b(){try{this.#n=jn(()=>this.#c(this.#t))}catch(t){this.error(t)}this.#s=!1}#y(){const t=this.#o.pending;t&&(this.#e=jn(()=>t(this.#t)),Ur.enqueue(()=>{this.#n=this.#h(()=>(Ur.ensure(),jn(()=>this.#c(this.#t)))),this.#l>0?this.#m():(sa(this.#e,()=>{this.#e=null}),this.#s=!1)}))}is_pending(){return this.#s||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#o.pending}#h(t){var n=ht,r=St,a=Kt;lr(this.#a),Yn(this.#a),Xa(this.#a.ctx);try{return t()}catch(o){return _c(o),null}finally{lr(n),Yn(r),Xa(a)}}#m(){const t=this.#o.pending;this.#n!==null&&(this.#u=document.createDocumentFragment(),t0(this.#n,this.#u)),this.#e===null&&(this.#e=jn(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#l+=t,this.#l===0&&(this.#s=!1,this.#e&&sa(this.#e,()=>{this.#e=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(t){this.#g(t),this.#d+=t,qu.add(this.#v)}get_effect_pending(){return this.#_(),s(this.#i)}error(t){var n=this.#o.onerror;let r=this.#o.failed;if(this.#p||!n&&!r)throw t;this.#n&&(Rn(this.#n),this.#n=null),this.#e&&(Rn(this.#e),this.#e=null),this.#r&&(Rn(this.#r),this.#r=null);var a=!1,o=!1;const u=()=>{if(a){Uf();return}a=!0,o&&Tf(),Ur.ensure(),this.#d=0,this.#r!==null&&sa(this.#r,()=>{this.#r=null}),this.#s=this.has_pending_snippet(),this.#n=this.#h(()=>(this.#p=!1,jn(()=>this.#c(this.#t)))),this.#l>0?this.#m():this.#s=!1};var i=St;try{Yn(null),o=!0,n?.(t,u),o=!1}catch(l){Qa(l,this.#a&&this.#a.parent)}finally{Yn(i)}r&&Aa(()=>{this.#r=this.#h(()=>{this.#p=!0;try{return jn(()=>{r(this.#t,()=>t,()=>u)})}catch(l){return Qa(l,this.#a.parent),null}finally{this.#p=!1}})})}}function t0(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:Vs(n);t.append(n),n=a}}function xc(e,t,n){const r=Hs()?Ws:Gt;if(t.length===0){n(e.map(r));return}var a=Qt,o=ht,u=n0();Promise.all(t.map(i=>r0(i))).then(i=>{a?.activate(),u();try{n([...e.map(r),...i])}catch(l){(o.f&Ca)===0&&Qa(l,o)}a?.deactivate(),wc()}).catch(i=>{Qa(i,o)})}function n0(){var e=ht,t=St,n=Kt,r=Qt;return function(){lr(e),Yn(t),Xa(n),r?.activate()}}function wc(){lr(null),Yn(null),Xa(null)}function Ws(e){var t=er|ir,n=St!==null&&(St.f&er)!==0?St:null;return ht===null||n!==null&&(n.f&or)!==0?t|=or:ht.f|=os,{ctx:Kt,deps:null,effects:null,equals:hc,f:t,fn:e,reactions:null,rv:0,v:Cn,wv:0,parent:n??ht,ac:null}}function r0(e,t){let n=ht;n===null&&_f();var r=n.b,a=void 0,o=oa(Cn),u=null,i=!St;return h0(()=>{try{var l=e();u&&Promise.resolve(l).catch(()=>{})}catch(h){l=Promise.reject(h)}var c=()=>l;a=u?.then(c,c)??Promise.resolve(l),u=a;var f=Qt,d=r.is_pending();i&&(r.update_pending_count(1),d||f.increment());const m=(h,g=void 0)=>{u=null,d||f.activate(),g?g!==gi&&(o.f|=ha,wa(o,g)):((o.f&ha)!==0&&(o.f^=ha),wa(o,h)),i&&(r.update_pending_count(-1),d||f.decrement()),wc()};if(a.then(m,h=>m(null,h||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(l=>{function c(f){function d(){f===a?l(o):c(a)}f.then(d,d)}c(a)})}function a0(e){const t=Ws(e);return zc(t),t}function Gt(e){const t=Ws(e);return t.equals=mc,t}function kc(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Rn(t[n])}}function s0(e){for(var t=e.parent;t!==null;){if((t.f&er)===0)return t;t=t.parent}return null}function bi(e){var t,n=ht;lr(s0(e));try{kc(e),t=qc(e)}finally{lr(n)}return t}function Sc(e){var t=bi(e);if(e.equals(t)||(e.v=t,e.wv=Uc()),!Da){var n=(ta||(e.f&or)!==0)&&e.deps!==null?Hr:Pn;Wn(e,n)}}const aa=new Map;function oa(e,t){var n={f:0,v:e,reactions:null,equals:hc,rv:0,wv:0};return n}function Kr(e,t){const n=oa(e);return zc(n),n}function $(e,t=!1,n=!0){const r=oa(e);return t||(r.equals=mc),us&&n&&Kt!==null&&Kt.l!==null&&(Kt.l.s??=[]).push(r),r}function Ec(e,t){return _(e,p(()=>s(e))),t}function _(e,t,n=!1){St!==null&&(!mr||(St.f&Vi)!==0)&&Hs()&&(St.f&(er|as|mi|Vi))!==0&&!jr?.includes(e)&&Af();let r=n?Va(t):t;return wa(e,r)}function wa(e,t){if(!e.equals(t)){var n=e.v;Da?aa.set(e,t):aa.set(e,n),e.v=t;var r=Ur.ensure();r.capture(e,n),(e.f&er)!==0&&((e.f&ir)!==0&&bi(e),Wn(e,(e.f&or)===0?Pn:Hr)),e.wv=Uc(),Cc(e,ir),Hs()&&ht!==null&&(ht.f&Pn)!==0&&(ht.f&(qr|Ea))===0&&(rr===null?_0([e]):rr.push(e))}return t}function Zi(e,t=1){var n=s(e),r=t===1?n++:n--;return _(e,n),r}function Ds(e){_(e,e.v+1)}function Cc(e,t){var n=e.reactions;if(n!==null)for(var r=Hs(),a=n.length,o=0;o<a;o++){var u=n[o],i=u.f;if(!(!r&&u===ht)){var l=(i&ir)===0;l&&Wn(u,t),(i&er)!==0?Cc(u,Hr):l&&((i&as)!==0&&fa!==null&&fa.push(u),es(u))}}}function Va(e){if(typeof e!="object"||e===null||Mr in e)return e;const t=fi(e);if(t!==df&&t!==ff)return e;var n=new Map,r=qs(e),a=Kr(0),o=ma,u=i=>{if(ma===o)return i();var l=St,c=ma;Yn(null),Qi(o);var f=i();return Yn(l),Qi(c),f};return r&&n.set("length",Kr(e.length)),new Proxy(e,{defineProperty(i,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ef();var f=n.get(l);return f===void 0?f=u(()=>{var d=Kr(c.value);return n.set(l,d),d}):_(f,c.value,!0),!0},deleteProperty(i,l){var c=n.get(l);if(c===void 0){if(l in i){const f=u(()=>Kr(Cn));n.set(l,f),Ds(a)}}else _(c,Cn),Ds(a);return!0},get(i,l,c){if(l===Mr)return e;var f=n.get(l),d=l in i;if(f===void 0&&(!d||Br(i,l)?.writable)&&(f=u(()=>{var h=Va(d?i[l]:Cn),g=Kr(h);return g}),n.set(l,f)),f!==void 0){var m=s(f);return m===Cn?void 0:m}return Reflect.get(i,l,c)},getOwnPropertyDescriptor(i,l){var c=Reflect.getOwnPropertyDescriptor(i,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=s(f))}else if(c===void 0){var d=n.get(l),m=d?.v;if(d!==void 0&&m!==Cn)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return c},has(i,l){if(l===Mr)return!0;var c=n.get(l),f=c!==void 0&&c.v!==Cn||Reflect.has(i,l);if(c!==void 0||ht!==null&&(!f||Br(i,l)?.writable)){c===void 0&&(c=u(()=>{var m=f?Va(i[l]):Cn,h=Kr(m);return h}),n.set(l,c));var d=s(c);if(d===Cn)return!1}return f},set(i,l,c,f){var d=n.get(l),m=l in i;if(r&&l==="length")for(var h=c;h<d.v;h+=1){var g=n.get(h+"");g!==void 0?_(g,Cn):h in i&&(g=u(()=>Kr(Cn)),n.set(h+"",g))}if(d===void 0)(!m||Br(i,l)?.writable)&&(d=u(()=>Kr(void 0)),_(d,Va(c)),n.set(l,d));else{m=d.v!==Cn;var T=u(()=>Va(c));_(d,T)}var A=Reflect.getOwnPropertyDescriptor(i,l);if(A?.set&&A.set.call(f,c),!m){if(r&&typeof l=="string"){var w=n.get("length"),E=Number(l);Number.isInteger(E)&&E>=w.v&&_(w,E+1)}Ds(a)}return!0},ownKeys(i){s(a);var l=Reflect.ownKeys(i).filter(d=>{var m=n.get(d);return m===void 0||m.v!==Cn});for(var[c,f]of n)f.v!==Cn&&!(c in i)&&l.push(c);return l},setPrototypeOf(){Cf()}})}function Ki(e){try{if(e!==null&&typeof e=="object"&&Mr in e)return e[Mr]}catch{}return e}function o0(e,t){return Object.is(Ki(e),Ki(t))}var Os,Ac,Tc,Dc;function u0(){if(Os===void 0){Os=window,Ac=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Tc=Br(t,"firstChild").get,Dc=Br(t,"nextSibling").get,Wi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Wi(n)&&(n.__t=void 0)}}function ia(e=""){return document.createTextNode(e)}function Cr(e){return Tc.call(e)}function Vs(e){return Dc.call(e)}function v(e,t){return Cr(e)}function de(e,t=!1){{var n=Cr(e);return n instanceof Comment&&n.data===""?Vs(n):n}}function b(e,t=1,n=!1){let r=e;for(;t--;)r=Vs(r);return r}function i0(e){e.textContent=""}function yi(){return!1}function l0(e,t){if(t){const n=document.body;e.autofocus=!0,Aa(()=>{document.activeElement===n&&e.focus()})}}let Yi=!1;function c0(){Yi||(Yi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Uo(e){var t=St,n=ht;Yn(null),lr(null);try{return e()}finally{Yn(t),lr(n)}}function Mc(e,t,n,r=n){e.addEventListener(t,()=>Uo(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),c0()}function Fc(e){ht===null&&St===null&&xf(),St!==null&&(St.f&or)!==0&&ht===null&&yf(),Da&&bf()}function d0(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Fr(e,t,n,r=!0){var a=ht;a!==null&&(a.f&_r)!==0&&(e|=_r);var o={ctx:Kt,deps:null,nodes_start:null,nodes_end:null,f:e|ir,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ga(o),o.f|=hi}catch(l){throw Rn(o),l}else t!==null&&es(o);if(r){var u=o;if(n&&u.deps===null&&u.teardown===null&&u.nodes_start===null&&u.first===u.last&&(u.f&os)===0&&(u=u.first),u!==null&&(u.parent=a,a!==null&&d0(u,a),St!==null&&(St.f&er)!==0&&(e&Ea)===0)){var i=St;(i.effects??=[]).push(u)}}return o}function f0(){return St!==null&&!mr}function jo(e){const t=Fr(Oo,null,!1);return Wn(t,Pn),t.teardown=e,t}function Wu(e){Fc();var t=ht.f,n=!St&&(t&qr)!==0&&(t&hi)===0;if(n){var r=Kt;(r.e??=[]).push(e)}else return Pc(e)}function Pc(e){return Fr(pi|dc,e,!1)}function p0(e){return Fc(),Fr(Oo|dc,e,!0)}function v0(e){Ur.ensure();const t=Fr(Ea|os,e,!0);return(n={})=>new Promise(r=>{n.outro?sa(t,()=>{Rn(t),r(void 0)}):(Rn(t),r(void 0))})}function ur(e){return Fr(pi,e,!1)}function xe(e,t){var n=Kt,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=is(()=>{e(),!r.ran&&(r.ran=!0,p(t))})}function fn(){var e=Kt;is(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Pn)!==0&&Wn(n,Hr),Gs(n)&&ga(n),t.ran=!1}})}function h0(e){return Fr(mi|os,e,!0)}function is(e,t=0){return Fr(Oo|t,e,!0)}function B(e,t=[],n=[]){xc(t,n,r=>{Fr(Oo,()=>e(...r.map(s)),!0)})}function Ta(e,t=0){var n=Fr(as|t,e,!0);return n}function jn(e,t=!0){return Fr(qr|os,e,!0,t)}function Ic(e){var t=e.teardown;if(t!==null){const n=Da,r=St;Xi(!0),Yn(null);try{t.call(null)}finally{Xi(n),Yn(r)}}}function Lc(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Uo(()=>{a.abort(gi)});var r=n.next;(n.f&Ea)!==0?n.parent=null:Rn(n,t),n=r}}function m0(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&qr)===0&&Rn(t),t=n}}function Rn(e,t=!0){var n=!1;(t||(e.f&mf)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Nc(e.nodes_start,e.nodes_end),n=!0),Lc(e,t&&!n),Co(e,0),Wn(e,Ca);var r=e.transitions;if(r!==null)for(const o of r)o.stop();Ic(e);var a=e.parent;a!==null&&a.first!==null&&Oc(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Nc(e,t){for(;e!==null;){var n=e===t?null:Vs(e);e.remove(),e=n}}function Oc(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function sa(e,t){var n=[];xi(e,n,!0),$c(n,()=>{Rn(e),t&&t()})}function $c(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function xi(e,t,n){if((e.f&_r)===0){if(e.f^=_r,e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&t.push(u);for(var r=e.first;r!==null;){var a=r.next,o=(r.f&ss)!==0||(r.f&qr)!==0;xi(r,t,o?n:!1),r=a}}}function qo(e){Rc(e,!0)}function Rc(e,t){if((e.f&_r)!==0){e.f^=_r,(e.f&Pn)===0&&(Wn(e,ir),es(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&ss)!==0||(n.f&qr)!==0;Rc(n,a?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Ha=null;function g0(e){var t=Ha;try{if(Ha=new Set,p(e),t!==null)for(var n of Ha)t.add(n);return Ha}finally{Ha=t}}function ix(e){for(var t of g0(e))wa(t,t.v)}let Ya=!1;function Ji(e){Ya=e}let Da=!1;function Xi(e){Da=e}let St=null,mr=!1;function Yn(e){St=e}let ht=null;function lr(e){ht=e}let jr=null;function zc(e){St!==null&&(jr===null?jr=[e]:jr.push(e))}let Un=null,Qn=0,rr=null;function _0(e){rr=e}let Bc=1,$s=0,ma=$s;function Qi(e){ma=e}let ta=!1;function Uc(){return++Bc}function Gs(e){var t=e.f;if((t&ir)!==0)return!0;if((t&Hr)!==0){var n=e.deps,r=(t&or)!==0;if(n!==null){var a,o,u=(t&So)!==0,i=r&&ht!==null&&!ta,l=n.length;if((u||i)&&(ht===null||(ht.f&Ca)===0)){var c=e,f=c.parent;for(a=0;a<l;a++)o=n[a],(u||!o?.reactions?.includes(c))&&(o.reactions??=[]).push(c);u&&(c.f^=So),i&&f!==null&&(f.f&or)===0&&(c.f^=or)}for(a=0;a<l;a++)if(o=n[a],Gs(o)&&Sc(o),o.wv>e.wv)return!0}(!r||ht!==null&&!ta)&&Wn(e,Pn)}return!1}function jc(e,t,n=!0){var r=e.reactions;if(r!==null&&!jr?.includes(e))for(var a=0;a<r.length;a++){var o=r[a];(o.f&er)!==0?jc(o,t,!1):t===o&&(n?Wn(o,ir):(o.f&Pn)!==0&&Wn(o,Hr),es(o))}}function qc(e){var t=Un,n=Qn,r=rr,a=St,o=ta,u=jr,i=Kt,l=mr,c=ma,f=e.f;Un=null,Qn=0,rr=null,ta=(f&or)!==0&&(mr||!Ya||St===null),St=(f&(qr|Ea))===0?e:null,jr=null,Xa(e.ctx),mr=!1,ma=++$s,e.ac!==null&&(Uo(()=>{e.ac.abort(gi)}),e.ac=null);try{e.f|=ju;var d=e.fn,m=d(),h=e.deps;if(Un!==null){var g;if(Co(e,Qn),h!==null&&Qn>0)for(h.length=Qn+Un.length,g=0;g<Un.length;g++)h[Qn+g]=Un[g];else e.deps=h=Un;if(!ta||(f&er)!==0&&e.reactions!==null)for(g=Qn;g<h.length;g++)(h[g].reactions??=[]).push(e)}else h!==null&&Qn<h.length&&(Co(e,Qn),h.length=Qn);if(Hs()&&rr!==null&&!mr&&h!==null&&(e.f&(er|Hr|ir))===0)for(g=0;g<rr.length;g++)jc(rr[g],e);return a!==null&&a!==e&&($s++,rr!==null&&(r===null?r=rr:r.push(...rr))),(e.f&ha)!==0&&(e.f^=ha),m}catch(T){return _c(T)}finally{e.f^=ju,Un=t,Qn=n,rr=r,St=a,ta=o,jr=u,Xa(i),mr=l,ma=c}}function b0(e,t){let n=t.reactions;if(n!==null){var r=cf.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&er)!==0&&(Un===null||!Un.includes(t))&&(Wn(t,Hr),(t.f&(or|So))===0&&(t.f^=So),kc(t),Co(t,0))}function Co(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)b0(e,n[r])}function ga(e){var t=e.f;if((t&Ca)===0){Wn(e,Pn);var n=ht,r=Ya;ht=e,Ya=!0;try{(t&as)!==0?m0(e):Lc(e),Ic(e);var a=qc(e);e.teardown=typeof a=="function"?a:null,e.wv=Bc;var o;lc&&qf&&(e.f&ir)!==0&&e.deps}finally{Ya=r,ht=n}}}async function Hc(){await Promise.resolve(),Kf()}function s(e){var t=e.f,n=(t&er)!==0;if(Ha?.add(e),St!==null&&!mr){var r=ht!==null&&(ht.f&Ca)!==0;if(!r&&!jr?.includes(e)){var a=St.deps;if((St.f&ju)!==0)e.rv<$s&&(e.rv=$s,Un===null&&a!==null&&a[Qn]===e?Qn++:Un===null?Un=[e]:(!ta||!Un.includes(e))&&Un.push(e));else{(St.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[St]:o.includes(St)||o.push(St)}}}else if(n&&e.deps===null&&e.effects===null){var u=e,i=u.parent;i!==null&&(i.f&or)===0&&(u.f^=or)}if(Da){if(aa.has(e))return aa.get(e);if(n){u=e;var l=u.v;return((u.f&Pn)===0&&u.reactions!==null||Wc(u))&&(l=bi(u)),aa.set(u,l),l}}else n&&(u=e,Gs(u)&&Sc(u));if((e.f&ha)!==0)throw e.v;return e.v}function Wc(e){if(e.v===Cn)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(aa.has(t)||(t.f&er)!==0&&Wc(t))return!0;return!1}function p(e){var t=mr;try{return mr=!0,e()}finally{mr=t}}const y0=-7169;function Wn(e,t){e.f=e.f&y0|t}function z(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Mr in e)Vu(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Mr in n&&Vu(n)}}}function Vu(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Vu(e[r],t)}catch{}const n=fi(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=cc(n);for(let a in r){const o=r[a].get;if(o)try{o.call(e)}catch{}}}}}function x0(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const w0=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function k0(e){return w0.includes(e)}const S0={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function E0(e){return e=e.toLowerCase(),S0[e]??e}const C0=["touchstart","touchmove"];function A0(e){return C0.includes(e)}const Vc=new Set,Gu=new Set;function Gc(e,t,n,r={}){function a(o){if(r.capture||Es.call(t,o),!o.cancelBubble)return Uo(()=>n?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Aa(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function N(e,t,n,r,a){var o={capture:r,passive:a},u=Gc(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&jo(()=>{t.removeEventListener(e,u,o)})}function T0(e){for(var t=0;t<e.length;t++)Vc.add(e[t]);for(var n of Gu)n(e)}let el=null;function Es(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],o=a[0]||e.target;el=e;var u=0,i=el===e&&e.__root;if(i){var l=a.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=a.indexOf(t);if(c===-1)return;l<=c&&(u=l)}if(o=a[u]||e.target,o!==t){ko(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=St,d=ht;Yn(null),lr(null);try{for(var m,h=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var T=o["__"+r];if(T!=null&&(!o.disabled||e.target===o))if(qs(T)){var[A,...w]=T;A.apply(o,[e,...w])}else T.call(o,e)}catch(E){m?h.push(E):m=E}if(e.cancelBubble||g===t||g===null)break;o=g}if(m){for(let E of h)queueMicrotask(()=>{throw E});throw m}}finally{e.__root=t,delete e.currentTarget,Yn(f),lr(d)}}}function wi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ka(e,t){var n=ht;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function M(e,t){var n=(t&Nf)!==0,r=(t&Of)!==0,a,o=!e.startsWith("<!>");return()=>{a===void 0&&(a=wi(o?e:"<!>"+e),n||(a=Cr(a)));var u=r||Ac?document.importNode(a,!0):a.cloneNode(!0);if(n){var i=Cr(u),l=u.lastChild;ka(i,l)}else ka(u,u);return u}}function D0(e,t,n="svg"){var r=!e.startsWith("<!>"),a=`<${n}>${r?e:"<!>"+e}</${n}>`,o;return()=>{if(!o){var u=wi(a),i=Cr(u);o=Cr(i)}var l=o.cloneNode(!0);return ka(l,l),l}}function Ma(e,t){return D0(e,t,"svg")}function nn(e=""){{var t=ia(e+"");return ka(t,t),t}}function Ae(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ia();return e.append(t,n),ka(t,n),e}function y(e,t){e!==null&&e.before(t)}function W(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function M0(e,t){return F0(e,t)}const Ia=new Map;function F0(e,{target:t,anchor:n,props:r={},events:a,context:o,intro:u=!0}){u0();var i=new Set,l=d=>{for(var m=0;m<d.length;m++){var h=d[m];if(!i.has(h)){i.add(h);var g=A0(h);t.addEventListener(h,Es,{passive:g});var T=Ia.get(h);T===void 0?(document.addEventListener(h,Es,{passive:g}),Ia.set(h,1)):Ia.set(h,T+1)}}};l(di(Vc)),Gu.add(l);var c=void 0,f=v0(()=>{var d=n??t.appendChild(ia());return Qf(d,{pending:()=>{}},m=>{if(o){Nt({});var h=Kt;h.c=o}a&&(r.$$events=a),c=e(m,r)||{},o&&Ot()}),()=>{for(var m of i){t.removeEventListener(m,Es);var h=Ia.get(m);--h===0?(document.removeEventListener(m,Es),Ia.delete(m)):Ia.set(m,h)}Gu.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return P0.set(c,f),c}let P0=new WeakMap;function I(e,t,n=!1){var r=e,a=null,o=null,u=Cn,i=n?ss:0,l=!1;const c=(h,g=!0)=>{l=!0,m(g,h)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var h=u?a:o,g=u?o:a;h&&qo(h),g&&sa(g,()=>{u?o=null:a=null})}const m=(h,g)=>{if(u!==(u=h)){var T=yi(),A=r;if(T&&(f=document.createDocumentFragment(),f.append(A=ia())),u?a??=g&&jn(()=>g(A)):o??=g&&jn(()=>g(A)),T){var w=Qt,E=u?a:o,C=u?o:a;E&&w.skipped_effects.delete(E),C&&w.skipped_effects.add(C),w.add_callback(d)}else d()}};Ta(()=>{l=!1,t(c),l||m(null,null)},i)}function Jn(e,t){return t}function I0(e,t,n){for(var r=e.items,a=[],o=t.length,u=0;u<o;u++)xi(t[u].e,a,!0);var i=o>0&&a.length===0&&n!==null;if(i){var l=n.parentNode;i0(l),l.append(n),r.clear(),Er(e,t[0].prev,t[o-1].next)}$c(a,()=>{for(var c=0;c<o;c++){var f=t[c];i||(r.delete(f.k),Er(e,f.prev,f.next)),Rn(f.e,!i)}})}function Lt(e,t,n,r,a,o=null){var u=e,i={flags:t,items:new Map,first:null},l=(t&pc)!==0;if(l){var c=e;u=c.appendChild(ia())}var f=null,d=!1,m=new Map,h=Gt(()=>{var w=n();return qs(w)?w:w==null?[]:di(w)}),g,T;function A(){L0(T,g,i,m,u,a,t,r,n),o!==null&&(g.length===0?f?qo(f):f=jn(()=>o(u)):f!==null&&sa(f,()=>{f=null}))}Ta(()=>{T??=ht,g=s(h);var w=g.length;if(!(d&&w===0)){d=w===0;var E,C,k,S;if(yi()){var x=new Set,F=Qt;for(C=0;C<w;C+=1){k=g[C],S=r(k,C);var q=i.items.get(S)??m.get(S);q?(t&(Ro|zo))!==0&&Zc(q,k,C,t):(E=Kc(null,i,null,null,k,S,C,a,t,n,!0),m.set(S,E)),x.add(S)}for(const[H,P]of i.items)x.has(H)||F.skipped_effects.add(P.e);F.add_callback(A)}else A();s(h)}})}function L0(e,t,n,r,a,o,u,i,l){var c=(u&Df)!==0,f=(u&(Ro|zo))!==0,d=t.length,m=n.items,h=n.first,g=h,T,A=null,w,E=[],C=[],k,S,x,F;if(c)for(F=0;F<d;F+=1)k=t[F],S=i(k,F),x=m.get(S),x!==void 0&&(x.a?.measure(),(w??=new Set).add(x));for(F=0;F<d;F+=1){if(k=t[F],S=i(k,F),x=m.get(S),x===void 0){var q=r.get(S);if(q!==void 0){r.delete(S),m.set(S,q);var H=A?A.next:g;Er(n,A,q),Er(n,q,H),ou(q,H,a),A=q}else{var P=g?g.e.nodes_start:a;A=Kc(P,n,A,A===null?n.first:A.next,k,S,F,o,u,l)}m.set(S,A),E=[],C=[],g=A.next;continue}if(f&&Zc(x,k,F,u),(x.e.f&_r)!==0&&(qo(x.e),c&&(x.a?.unfix(),(w??=new Set).delete(x))),x!==g){if(T!==void 0&&T.has(x)){if(E.length<C.length){var L=C[0],K;A=L.prev;var G=E[0],ce=E[E.length-1];for(K=0;K<E.length;K+=1)ou(E[K],L,a);for(K=0;K<C.length;K+=1)T.delete(C[K]);Er(n,G.prev,ce.next),Er(n,A,G),Er(n,ce,L),g=L,A=ce,F-=1,E=[],C=[]}else T.delete(x),ou(x,g,a),Er(n,x.prev,x.next),Er(n,x,A===null?n.first:A.next),Er(n,A,x),A=x;continue}for(E=[],C=[];g!==null&&g.k!==S;)(g.e.f&_r)===0&&(T??=new Set).add(g),C.push(g),g=g.next;if(g===null)continue;x=g}E.push(x),A=x,g=x.next}if(g!==null||T!==void 0){for(var O=T===void 0?[]:di(T);g!==null;)(g.e.f&_r)===0&&O.push(g),g=g.next;var ae=O.length;if(ae>0){var oe=(u&pc)!==0&&d===0?a:null;if(c){for(F=0;F<ae;F+=1)O[F].a?.measure();for(F=0;F<ae;F+=1)O[F].a?.fix()}I0(n,O,oe)}}c&&Aa(()=>{if(w!==void 0)for(x of w)x.a?.apply()}),e.first=n.first&&n.first.e,e.last=A&&A.e;for(var se of r.values())Rn(se.e);r.clear()}function Zc(e,t,n,r){(r&Ro)!==0&&wa(e.v,t),(r&zo)!==0?wa(e.i,n):e.i=n}function Kc(e,t,n,r,a,o,u,i,l,c,f){var d=(l&Ro)!==0,m=(l&Mf)===0,h=d?m?$(a,!1,!1):oa(a):a,g=(l&zo)===0?u:oa(u),T={i:g,v:h,k:o,a:null,e:null,prev:n,next:r};try{if(e===null){var A=document.createDocumentFragment();A.append(e=ia())}return T.e=jn(()=>i(e,h,g,c),jf),T.e.prev=n&&n.e,T.e.next=r&&r.e,n===null?f||(t.first=T):(n.next=T,n.e.next=T.e),r!==null&&(r.prev=T,r.e.prev=T.e),T}finally{}}function ou(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var u=Vs(o);a.before(o),o=u}}function Er(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Zu(e,t,n=!1,r=!1,a=!1){var o=e,u="";B(()=>{var i=ht;if(u!==(u=t()??"")&&(i.nodes_start!==null&&(Nc(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),u!=="")){var l=u+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var c=wi(l);if((n||r)&&(c=Cr(c)),ka(Cr(c),c.lastChild),n||r)for(;Cr(c);)o.before(Cr(c));else o.before(c)}})}function $n(e,t,n,r,a){var o=t.$$slots?.[n],u=!1;o===!0&&(o=t[n==="default"?"children":n],u=!0),o===void 0||o(e,u?()=>r:r)}function N0(e,t,n){var r=e,a,o,u=null,i=null;function l(){o&&(sa(o),o=null),u&&(u.lastChild.remove(),r.before(u),u=null),o=i,i=null}Ta(()=>{if(a!==(a=t())){var c=yi();if(a){var f=r;c&&(u=document.createDocumentFragment(),u.append(f=ia()),o&&Qt.skipped_effects.add(o)),i=jn(()=>n(f,a))}c?Qt.add_callback(l):l()}},ss)}function O0(e,t,n,r,a,o){var u,i,l=null,c=e,f;Ta(()=>{const d=t()||null;var m=Rf;d!==u&&(f&&(d===null?sa(f,()=>{f=null,i=null}):d===i?qo(f):Rn(f)),d&&d!==i&&(f=jn(()=>{if(l=document.createElementNS(m,d),ka(l,l),r){var h=l.appendChild(ia());r(l,h)}ht.nodes_end=l,c.before(l)})),u=d,u&&(i=u))},ss)}function Sa(e,t,n){ur(()=>{var r=p(()=>t(e,n?.())||{});if(n&&r?.update){var a=!1,o={};is(()=>{var u=n();z(u),a&&_i(o,u)&&(o=u,r.update(u))}),a=!0}if(r?.destroy)return()=>r.destroy()})}function $0(e,t){var n=void 0,r;Ta(()=>{n!==(n=t())&&(r&&(Rn(r),r=null),n&&(r=jn(()=>{ur(()=>n(e))})))})}function Yc(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Yc(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function R0(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Yc(e))&&(r&&(r+=" "),r+=t);return r}function mo(e){return typeof e=="object"?R0(e):e??""}const tl=[...` 	
\r\fÂ \v\uFEFF`];function z0(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var o=a.length,u=0;(u=r.indexOf(a,u))>=0;){var i=u+o;(u===0||tl.includes(r[u-1]))&&(i===r.length||tl.includes(r[i]))?r=(u===0?"":r.substring(0,u))+r.substring(i+1):u=i}}return r===""?null:r}function nl(e,t=!1){var n=t?" !important;":";",r="";for(var a in e){var o=e[a];o!=null&&o!==""&&(r+=" "+a+": "+o+n)}return r}function uu(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function B0(e,t){if(t){var n="",r,a;if(Array.isArray(t)?(r=t[0],a=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,u=0,i=!1,l=[];r&&l.push(...Object.keys(r).map(uu)),a&&l.push(...Object.keys(a).map(uu));var c=0,f=-1;const T=e.length;for(var d=0;d<T;d++){var m=e[d];if(i?m==="/"&&e[d-1]==="*"&&(i=!1):o?o===m&&(o=!1):m==="/"&&e[d+1]==="*"?i=!0:m==='"'||m==="'"?o=m:m==="("?u++:m===")"&&u--,!i&&o===!1&&u===0){if(m===":"&&f===-1)f=d;else if(m===";"||d===T-1){if(f!==-1){var h=uu(e.substring(c,f).trim());if(!l.includes(h)){m!==";"&&d++;var g=e.substring(c,d).trim();n+=" "+g+";"}}c=d+1,f=-1}}}}return r&&(n+=nl(r)),a&&(n+=nl(a,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function At(e,t,n,r,a,o){var u=e.__className;if(u!==n||u===void 0){var i=z0(n,r,o);i==null?e.removeAttribute("class"):t?e.className=i:e.setAttribute("class",i),e.__className=n}else if(o&&a!==o)for(var l in o){var c=!!o[l];(a==null||c!==!!a[l])&&e.classList.toggle(l,c)}return o}function iu(e,t={},n,r){for(var a in n){var o=n[a];t[a]!==o&&(n[a]==null?e.style.removeProperty(a):e.style.setProperty(a,o,r))}}function An(e,t,n,r){var a=e.__style;if(a!==t){var o=B0(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(iu(e,n?.[0],r[0]),iu(e,n?.[1],r[1],"important")):iu(e,n,r));return r}function xn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!qs(t))return Bf();for(var r of e.options)r.selected=t.includes(Ms(r));return}for(r of e.options){var a=Ms(r);if(o0(a,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function In(e){var t=new MutationObserver(()=>{xn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),jo(()=>{t.disconnect()})}function lx(e,t,n=t){var r=!0;Mc(e,"change",a=>{var o=a?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(o),Ms);else{var i=e.querySelector(o)??e.querySelector("option:not([disabled])");u=i&&Ms(i)}n(u)}),ur(()=>{var a=t();if(xn(e,a,r),r&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=Ms(o),n(a))}e.__value=a,r=!1}),In(e)}function Ms(e){return"__value"in e?e.__value:e.value}const ps=Symbol("class"),vs=Symbol("style"),Jc=Symbol("is custom element"),Xc=Symbol("is html");function It(e,t){var n=Ho(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Kn(e,t){var n=Ho(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function U0(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ie(e,t,n,r){var a=Ho(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[gf]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Qc(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function j0(e,t,n,r,a=!1,o=!1){var u=Ho(e),i=u[Jc],l=!u[Xc],c=t||{},f=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=mo(n.class):n[ps]&&(n.class=null),n[vs]&&(n.style??=null);var m=Qc(e);for(const C in n){let k=n[C];if(f&&C==="value"&&k==null){e.value=e.__value="",c[C]=k;continue}if(C==="class"){var h=e.namespaceURI==="http://www.w3.org/1999/xhtml";At(e,h,k,r,t?.[ps],n[ps]),c[C]=k,c[ps]=n[ps];continue}if(C==="style"){An(e,k,t?.[vs],n[vs]),c[C]=k,c[vs]=n[vs];continue}var g=c[C];if(!(k===g&&!(k===void 0&&e.hasAttribute(C)))){c[C]=k;var T=C[0]+C[1];if(T!=="$$")if(T==="on"){const S={},x="$$"+C;let F=C.slice(2);var A=k0(F);if(x0(F)&&(F=F.slice(0,-7),S.capture=!0),!A&&g){if(k!=null)continue;e.removeEventListener(F,c[x],S),c[x]=null}if(k!=null)if(A)e[`__${F}`]=k,T0([F]);else{let q=function(H){c[C].call(this,H)};c[x]=Gc(F,e,q,S)}else A&&(e[`__${F}`]=void 0)}else if(C==="style")ie(e,C,k);else if(C==="autofocus")l0(e,!!k);else if(!i&&(C==="__value"||C==="value"&&k!=null))e.value=e.__value=k;else if(C==="selected"&&f)U0(e,k);else{var w=C;l||(w=E0(w));var E=w==="defaultValue"||w==="defaultChecked";if(k==null&&!i&&!E)if(u[C]=null,w==="value"||w==="checked"){let S=e;const x=t===void 0;if(w==="value"){let F=S.defaultValue;S.removeAttribute(w),S.defaultValue=F,S.value=S.__value=x?F:null}else{let F=S.defaultChecked;S.removeAttribute(w),S.defaultChecked=F,S.checked=x?F:!1}}else e.removeAttribute(C);else E||m.includes(w)&&(i||typeof k!="string")?(e[w]=k,w in u&&(u[w]=Cn)):typeof k!="function"&&ie(e,w,k)}}}return c}function rl(e,t,n=[],r=[],a,o=!1,u=!1){xc(n,r,i=>{var l=void 0,c={},f=e.nodeName==="SELECT",d=!1;if(Ta(()=>{var h=t(...i.map(s)),g=j0(e,l,h,a,o,u);d&&f&&"value"in h&&xn(e,h.value);for(let A of Object.getOwnPropertySymbols(c))h[A]||Rn(c[A]);for(let A of Object.getOwnPropertySymbols(h)){var T=h[A];A.description===zf&&(!l||T!==l[A])&&(c[A]&&Rn(c[A]),c[A]=jn(()=>$0(e,()=>T))),g[A]=T}l=g}),f){var m=e;ur(()=>{xn(m,l.value,!0),In(m)})}d=!0})}function Ho(e){return e.__attributes??={[Jc]:e.nodeName.includes("-"),[Xc]:e.namespaceURI===$f}}var al=new Map;function Qc(e){var t=e.getAttribute("is")||e.nodeName,n=al.get(t);if(n)return n;al.set(t,n=[]);for(var r,a=e,o=Element.prototype;o!==a;){r=cc(a);for(var u in r)r[u].set&&n.push(u);a=fi(a)}return n}function sr(e,t,n=t){var r=new WeakSet;Mc(e,"input",async a=>{var o=a?e.defaultValue:e.value;if(o=lu(e)?cu(o):o,n(o),Qt!==null&&r.add(Qt),await Hc(),o!==(o=t())){var u=e.selectionStart,i=e.selectionEnd;e.value=o??"",i!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(i,e.value.length))}}),p(t)==null&&e.value&&(n(lu(e)?cu(e.value):e.value),Qt!==null&&r.add(Qt)),is(()=>{var a=t();if(e===document.activeElement){var o=ho??Qt;if(r.has(o))return}lu(e)&&a===cu(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function lu(e){var t=e.type;return t==="number"||t==="range"}function cu(e){return e===""?null:+e}function q0(e,t,n){var r=Br(e,t);r&&r.set&&(e[t]=n,jo(()=>{e[t]=null}))}function sl(e,t){return e===t||e?.[Mr]===t}function qn(e={},t,n,r){return ur(()=>{var a,o;return is(()=>{a=o,o=[],p(()=>{e!==n(...o)&&(t(e,...o),a&&sl(n(...a),e)&&t(null,...a))})}),()=>{Aa(()=>{o&&sl(n(...o),e)&&t(null,...o)})}}),e}function du(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function ed(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}function Ut(e=!1){const t=Kt,n=t.l.u;if(!n)return;let r=()=>z(t.s);if(e){let a=0,o={};const u=Ws(()=>{let i=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],i=!0);return i&&a++,a});r=()=>s(u)}n.b.length&&p0(()=>{ol(t,r),Ns(n.b)}),Wu(()=>{const a=p(()=>n.m.map(pf));return()=>{for(const o of a)typeof o=="function"&&o()}}),n.a.length&&Wu(()=>{ol(t,r),Ns(n.a)})}function ol(e,t){if(e.l.s)for(const n of e.l.s)s(n);t()}function ki(e,t,n){if(e==null)return t(void 0),n&&n(void 0),ra;const r=p(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const La=[];function H0(e,t){return{subscribe:ln(e,t).subscribe}}function ln(e,t=ra){let n=null;const r=new Set;function a(i){if(_i(e,i)&&(e=i,n)){const l=!La.length;for(const c of r)c[1](),La.push(c,e);if(l){for(let c=0;c<La.length;c+=2)La[c][0](La[c+1]);La.length=0}}}function o(i){a(i(e))}function u(i,l=ra){const c=[i,l];return r.add(c),r.size===1&&(n=t(a,o)||ra),i(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:a,update:o,subscribe:u}}function yn(e,t,n){const r=!Array.isArray(e),a=r?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return H0(n,(u,i)=>{let l=!1;const c=[];let f=0,d=ra;const m=()=>{if(f)return;d();const g=t(r?c[0]:c,u,i);o?u(g):d=typeof g=="function"?g:ra},h=a.map((g,T)=>ki(g,A=>{c[T]=A,f&=~(1<<T),l&&m()},()=>{f|=1<<T}));return l=!0,m(),function(){Ns(h),d(),l=!1}})}function lt(e){let t;return ki(e,n=>t=n)(),t}let ro=!1,Ku=Symbol();function Dt(e,t,n){const r=n[t]??={store:null,source:$(void 0),unsubscribe:ra};if(r.store!==e&&!(Ku in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=ra;else{var a=!0;r.unsubscribe=ki(e,o=>{a?r.source.v=o:_(r.source,o)}),a=!1}return e&&Ku in n?lt(e):s(r.source)}function yr(){const e={};function t(){jo(()=>{for(var n in e)e[n].unsubscribe();ko(e,Ku,{enumerable:!1,value:!0})})}return[e,t]}function W0(e,t,n){return e.set(n),t}function V0(e){var t=ro;try{return ro=!1,[e(),ro]}finally{ro=t}}const G0={get(e,t){if(!e.exclude.includes(t))return s(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){if(!(t in e.special)){var r=ht;try{lr(e.parent_effect),e.special[t]=le({get[t](){return e.props[t]}},t,vc)}finally{lr(r)}}return e.special[t](n),Zi(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Zi(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function cr(e,t){return new Proxy({props:e,exclude:t,special:{},version:oa(0),parent_effect:ht},G0)}const Z0={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(fs(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let a=e.props[r];fs(a)&&(a=a());const o=Br(a,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(fs(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const a=Br(r,t);return a&&!a.configurable&&(a.configurable=!0),a}}},has(e,t){if(t===Mr||t===fc)return!1;for(let n of e.props)if(fs(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(fs(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function Pr(...e){return new Proxy({props:e},Z0)}function le(e,t,n,r){var a=!us||(n&Pf)!==0,o=(n&If)!==0,u=(n&Lf)!==0,i=r,l=!0,c=()=>(l&&(l=!1,i=u?p(r):r),i),f;if(o){var d=Mr in e||fc in e;f=Br(e,t)?.set??(d&&t in e?C=>e[t]=C:void 0)}var m,h=!1;o?[m,h]=V0(()=>e[t]):m=e[t],m===void 0&&r!==void 0&&(m=c(),f&&(a&&Sf(),f(m)));var g;if(a?g=()=>{var C=e[t];return C===void 0?c():(l=!0,C)}:g=()=>{var C=e[t];return C!==void 0&&(i=void 0),C===void 0?i:C},a&&(n&vc)===0)return g;if(f){var T=e.$$legacy;return(function(C,k){return arguments.length>0?((!a||!k||T||h)&&f(k?g():C),C):g()})}var A=!1,w=((n&Ff)!==0?Ws:Gt)(()=>(A=!1,g()));o&&s(w);var E=ht;return(function(C,k){if(arguments.length>0){const S=k?s(w):a&&o?Va(C):C;return _(w,S),A=!0,i!==void 0&&(i=S),C}return Da&&A||(E.f&Ca)!==0?w.v:s(w)})}function Zs(e){Kt===null&&$o(),us&&Kt.l!==null?nd(Kt).m.push(e):Wu(()=>{const t=p(e);if(typeof t=="function")return t})}function ts(e){Kt===null&&$o(),Zs(()=>()=>p(e))}function K0(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function pn(){const e=Kt;return e===null&&$o(),(t,n,r)=>{const a=e.s.$$events?.[t];if(a){const o=qs(a)?a.slice():[a],u=K0(t,n,r);for(const i of o)i.call(e.x,u);return!u.defaultPrevented}return!0}}function td(e){Kt===null&&$o(),Kt.l===null&&kf(),nd(Kt).a.push(e)}function nd(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Y0="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Y0);Hf();const Jt="";function dt(e){return e.startsWith("/")?`${Jt}${e}`:`${Jt}/${e}`}const J0=/\r?\n/;function ul(e){const t=[],n=e.split(/\n\n|\r\r|\r\n\r\n/);for(const r of n){const a=r.trim();if(!a)continue;const o=a.split(J0);let u="message",i=[],l;for(const c of o)if(c&&!c.startsWith(":")){if(c.startsWith("event:")){u=c.slice(6).trim()||"message";continue}if(c.startsWith("data:")){i.push(c.slice(5).trimStart());continue}if(c.startsWith("id:")){l=c.slice(3).trim();continue}}t.push({event:u,data:i.length?i.join(`
`):void 0,id:l})}return t}class br extends Error{status;constructor(t,n){super(n),this.status=t}}async function xt(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const a=await n.json();r=a.detail||a.message||JSON.stringify(a)}catch{}throw new br(n.status,r)}return await n.json()}async function Wo(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const a=await n.json();r=a.detail||a.message||JSON.stringify(a)}catch{}throw new br(n.status,r)}}async function X0(){return xt(dt("/api/models"))}async function Q0(e){const t=`/api/chat/generation/${encodeURIComponent(e)}`;return xt(dt(t))}async function il(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}/messages/${encodeURIComponent(t)}`;await Wo(dt(n),{method:"DELETE"})}async function ep(){return xt(dt("/api/clients/svelte/llm"))}async function ll(e){return xt(dt("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify(e)})}async function tp(){return{system_prompt:(await xt(dt("/api/clients/svelte/llm"))).system_prompt}}async function np(e){return{system_prompt:(await xt(dt("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify({system_prompt:e.system_prompt})})).system_prompt}}async function fu(){return xt(dt("/api/mcp/servers/"))}async function rp(e){return xt(dt("/api/mcp/servers/connect"),{method:"POST",body:JSON.stringify({url:e})})}async function ap(e){await Wo(dt(`/api/mcp/servers/${encodeURIComponent(e)}`),{method:"DELETE"})}async function sp(e,t){const n=`/api/mcp/servers/${encodeURIComponent(e)}`;return xt(dt(n),{method:"PATCH",body:JSON.stringify(t)})}async function op(){return xt(dt("/api/mcp/servers/refresh"),{method:"POST",body:JSON.stringify({})})}async function up(e){return xt(dt(`/api/mcp/preferences/${encodeURIComponent(e)}`))}async function cl(e,t){return xt(dt(`/api/mcp/preferences/${encodeURIComponent(e)}`),{method:"PUT",body:JSON.stringify({enabled_servers:t})})}async function ip(){return xt(dt("/api/google-auth/status"))}async function lp(e){return xt(dt("/api/google-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function cp(){return xt(dt("/api/monarch-auth/status"))}async function dp(e){return xt(dt("/api/monarch-auth/credentials"),{method:"POST",body:JSON.stringify(e)})}async function fp(){return xt(dt("/api/monarch-auth/credentials"),{method:"DELETE"})}async function pp(){return xt(dt("/api/spotify-auth/status"))}async function vp(e){return xt(dt("/api/spotify-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function hp(e,t){const n=new FormData;n.append("file",e),n.append("session_id",t);const r=await fetch(dt("/api/uploads"),{method:"POST",body:n});if(!r.ok){let a=r.statusText||"Upload failed";try{a=(await r.json())?.detail??a}catch{}throw new br(r.status||0,a)}return await r.json()}const mp=/\n\n|\r\r|\r\n\r\n/;async function gp(e,{onChunk:t,onDone:n,onError:r,onSession:a,onNotice:o,signal:u}={}){const i=await fetch(dt("/api/chat/stream"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(e),signal:u});if(!i.ok||!i.body){const d=i.statusText||"Failed to connect to chat stream",m=new br(i.status||0,d);throw r?.(m),m}const l=i.body.getReader(),c=new TextDecoder;let f="";try{for(;;){const{value:d,done:m}=await l.read();if(m)break;f+=c.decode(d,{stream:!0});const h=f.split(mp);f=h.pop()??"";for(const g of h){const T=ul(g);for(const A of T){if(A.event==="session"&&A.data){try{const w=JSON.parse(A.data);w.session_id&&a?.(w.session_id)}catch(w){console.warn("Failed to parse session payload",w)}continue}if(A.event==="notice"){if(A.data)try{const w=JSON.parse(A.data);o?.(w)}catch(w){console.warn("Failed to parse notice payload",w,A.data)}continue}if(A.event!=="message"){t?.({choices:[],object:"event",meta:{event:A.event,data:A.data}},A);continue}if(A.data==="[DONE]"){n?.();return}if(A.data)try{const w=JSON.parse(A.data);t?.(w,A)}catch(w){console.warn("Failed to parse SSE chunk",w,A.data)}}}}if(f.trim()){const d=ul(f);for(const m of d)if(m.event==="session"&&m.data)try{const h=JSON.parse(m.data);h.session_id&&a?.(h.session_id)}catch(h){console.warn("Failed to parse session payload",h)}else if(m.event==="notice"){if(m.data)try{const h=JSON.parse(m.data);o?.(h)}catch(h){console.warn("Failed to parse notice payload",h,m.data)}}else if(m.event==="message"){if(m.data==="[DONE]")n?.();else if(m.data)try{const h=JSON.parse(m.data);t?.(h,m)}catch(h){console.warn("Failed to parse SSE chunk",h,m.data)}}}n?.()}catch(d){if(d instanceof DOMException&&d.name==="AbortError")return;const m=d instanceof Error?d:new Error(String(d));throw r?.(m),m}finally{l.releaseLock()}}function Ks(e,t){return{name:e.name,model:e.llm?.model??"unknown",provider:null,parameters:null,supports_tools:e.llm?.supports_tools??null,system_prompt:e.llm?.system_prompt??null,suggestions:null,model_filters:e.model_filters??null,is_default:t,created_at:e.created_at??new Date().toISOString(),updated_at:e.updated_at??new Date().toISOString()}}function _p(e,t){return{name:e.name,model:e.llm?.model??"unknown",is_default:t,has_filters:!!e.model_filters,created_at:e.created_at??new Date().toISOString(),updated_at:e.updated_at??new Date().toISOString()}}async function hs(){const e=await xt(dt("/api/clients/svelte/presets"));return e.presets.map((t,n)=>_p(t,n===e.active_index))}async function bp(e){const t=await xt(dt("/api/clients/svelte/presets")),n=t.presets.find(a=>a.name===e);if(!n)throw new br(404,`Preset not found: ${e}`);const r=t.presets.indexOf(n);return Ks(n,r===t.active_index)}async function yp(e){const t=await xt(dt("/api/clients/svelte/llm")),n={name:e.name,llm:t,model_filters:e.model_filters},r=await xt(dt("/api/clients/svelte/presets"),{method:"POST",body:JSON.stringify(n)}),a=r.presets.find(u=>u.name===e.name);if(!a)throw new br(500,"Failed to create preset");const o=r.presets.indexOf(a);return Ks(a,o===r.active_index)}async function xp(e,t){const r=(await xt(dt("/api/clients/svelte/presets"))).presets.findIndex(i=>i.name===e);if(r===-1)throw new br(404,`Preset not found: ${e}`);const a=await xt(dt("/api/clients/svelte/llm")),o=await xt(dt(`/api/clients/svelte/presets/${r}`),{method:"PUT",body:JSON.stringify({llm:a,model_filters:t?.model_filters??null})}),u=o.presets[r];if(!u)throw new br(500,"Failed to save preset snapshot");return Ks(u,r===o.active_index)}async function wp(e){return await Wo(dt(`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}`),{method:"DELETE"}),{deleted:!0}}async function kp(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/apply`;return await xt(dt(t),{method:"POST",body:JSON.stringify({})}),bp(e)}async function Sp(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/set-active`,n=await xt(dt(t),{method:"POST",body:JSON.stringify({})}),r=n.presets.find(o=>o.name===e);if(!r)throw new br(404,`Preset not found: ${e}`);const a=n.presets.indexOf(r);return Ks(r,a===n.active_index)}async function Ep(){const e=await xt(dt("/api/clients/svelte/presets"));return e.active_index!==null&&e.presets[e.active_index]?Ks(e.presets[e.active_index],!0):null}async function rd(){return xt(dt("/api/clients/svelte/stt"))}async function Cp(e){return xt(dt("/api/clients/svelte/stt"),{method:"PUT",body:JSON.stringify(e)})}async function ad(e=50,t=0,n){let r=`/api/chat/conversations?limit=${e}&offset=${t}`;return n&&(r+=`&search=${encodeURIComponent(n)}`),(await xt(dt(r))).conversations}async function Ap(e){const t=`/api/chat/session/${encodeURIComponent(e)}/messages`;return xt(dt(t))}async function dl(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}/save`,r={};return t?.title&&(r.title=t.title),t?.llmSettings&&(r.llm_settings=t.llmSettings),xt(dt(n),{method:"POST",body:JSON.stringify(r)})}async function Tp(e){const t=`/api/chat/session/${encodeURIComponent(e)}/unsave`;await xt(dt(t),{method:"POST"})}async function Dp(e){const t=`/api/chat/conversations/${encodeURIComponent(e)}`;await Wo(dt(t),{method:"DELETE"})}async function Mp(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}`;await xt(dt(n),{method:"PATCH",body:JSON.stringify({llm_settings:t})})}async function Yu(e){const t=`/api/chat/session/${encodeURIComponent(e)}/generate-title`;return xt(dt(t),{method:"POST"})}const sd=[{key:"total_cost",label:"Total cost"},{key:"created_at",label:"Created"},{key:"model",label:"Model"},{key:"origin",label:"Origin"},{key:"usage",label:"Usage"},{key:"is_byok",label:"Self-hosted"},{key:"cache_discount",label:"Cache discount"},{key:"upstream_inference_cost",label:"Upstream inference cost"},{key:"cancelled",label:"Cancelled"},{key:"provider_name",label:"Provider"},{key:"latency",label:"Latency (ms)"},{key:"moderation_latency",label:"Moderation latency (ms)"},{key:"generation_time",label:"Generation time (ms)"},{key:"finish_reason",label:"Finish reason"},{key:"native_finish_reason",label:"Native finish reason"},{key:"tokens_prompt",label:"Prompt tokens"},{key:"tokens_completion",label:"Completion tokens"},{key:"native_tokens_prompt",label:"Native prompt tokens"},{key:"native_tokens_completion",label:"Native completion tokens"},{key:"native_tokens_reasoning",label:"Native reasoning tokens"},{key:"num_media_prompt",label:"Prompt media"},{key:"num_media_completion",label:"Completion media"},{key:"num_search_results",label:"Search results"}];function fl(e){if(e==null||e==="")return{text:"â",isMultiline:!1};if(typeof e=="boolean")return{text:e?"Yes":"No",isMultiline:!1};if(typeof e=="number")return{text:Number.isFinite(e)?e.toString():String(e),isMultiline:!1};if(typeof e=="object")try{const n=JSON.stringify(e,null,2);return{text:n,isMultiline:n.includes(`
`)}}catch(n){console.warn("Failed to stringify generation detail value",n,e);const r=String(e);return{text:r,isMultiline:r.includes(`
`)}}const t=String(e);return{text:t,isMultiline:t.includes(`
`)}}const Fp="modulepreload",Pp=function(e){return"/"+e},pl={},Ip=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),i=u?.nonce||u?.getAttribute("nonce");a=l(n.map(c=>{if(c=Pp(c),c in pl)return;pl[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Fp,f||(m.as="script"),m.crossOrigin="",m.href=c,i&&m.setAttribute("nonce",i),document.head.appendChild(m),f)return new Promise((h,g)=>{m.addEventListener("load",h),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(u){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=u,window.dispatchEvent(i),!i.defaultPrevented)throw u}return a.then(u=>{for(const i of u||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},vl={enabled:!1,engine:null,maxResults:5,searchPrompt:"",contextSize:null};function hl(e,t){const n={...t};if(Object.prototype.hasOwnProperty.call(e,"enabled")&&(n.enabled=!!e.enabled),Object.prototype.hasOwnProperty.call(e,"engine")){const r=e.engine;n.engine=r==="native"||r==="exa"?r:null}if(Object.prototype.hasOwnProperty.call(e,"maxResults")){const r=e.maxResults;if(r==null)n.maxResults=null;else{const a=Number(r);Number.isFinite(a)&&a>0?n.maxResults=Math.min(Math.round(a),25):n.maxResults=t.maxResults}}if(Object.prototype.hasOwnProperty.call(e,"searchPrompt")){const r=e.searchPrompt;n.searchPrompt=typeof r=="string"?r:t.searchPrompt}if(Object.prototype.hasOwnProperty.call(e,"contextSize")){const r=e.contextSize;n.contextSize=r==="low"||r==="medium"||r==="high"?r:null}return n}function Lp(e=vl){const t=ln({...e});function n(u){t.update(i=>hl(u,i))}function r(u){t.update(i=>hl({enabled:u},i))}function a(){t.set({...vl})}const o=yn(t,u=>u.enabled);return{subscribe:t.subscribe,get current(){return lt(t)},update:n,setEnabled:r,reset:a,isEnabled:o}}const Sr=Lp(),Np=[{label:"GPT",keywords:["gpt","openai","o1","o3"]},{label:"Claude",keywords:["claude"]},{label:"Gemini",keywords:["gemini","palm-2","palm2"]},{label:"Grok",keywords:["grok"]},{label:"Cohere",keywords:["cohere","command"]},{label:"Nova",keywords:["nova"]},{label:"Qwen",keywords:["qwen"]},{label:"Yi",keywords:["yi"]},{label:"DeepSeek",keywords:["deepseek"]},{label:"Mistral",keywords:["mistral","mixtral"]},{label:"Llama4",keywords:["llama-4"]},{label:"Llama3",keywords:["llama-3"]},{label:"Llama2",keywords:["llama-2"]},{label:"RWKV",keywords:["rwkv"]},{label:"Router",keywords:["router"]},{label:"Media",keywords:["media"]},{label:"Other",keywords:[]}];function od(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function Si(e){const t=[];if(Array.isArray(e)){for(const n of e)typeof n=="string"&&n.trim()&&t.push(n.trim().toLowerCase());return t}if(typeof e=="string"&&e.trim())return e.split(/[,/]/).map(n=>n.trim().toLowerCase()).filter(Boolean);if(e&&typeof e=="object"){const n=Object.values(e);for(const r of n)t.push(...Si(r))}return t}function Ei(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const o=n;for(const u of["input_modalities","input","modalities","inputs"])a(o[u])}return a(e.input_modalities),a(r),Array.from(t);function a(o){for(const u of Si(o))t.add(u)}}function Ci(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const o=n;for(const i of["output_modalities","output","outputs"])a(o[i]);const u=o.modalities;u&&(a(u.output),a(u.outputs))}return a(e.output_modalities),a(r),Array.from(t);function a(o){for(const u of Si(o))t.add(u)}}const ud=1e6,id=6,Op=["prompt_price_per_million","input_price_per_million","input_token_price_per_million"],$p=["prompt_price","input_price","input_token_price"],Rp=["prompt","input","input_tokens","prompt_tokens"],zp=["completion_price_per_million","output_price_per_million","output_token_price_per_million"],Bp=["completion_price","output_price","output_token_price"],Up=["completion","output","output_tokens","completion_tokens"];function ld(e,t){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number(e.toFixed(t))}function cd(e,t,n){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number((e*t).toFixed(n))}function Ao(e,t){for(const n of t){if(!(n in e))continue;const r=od(e[n]);if(r!==null)return r}return null}function jp(e){const t=[],n=a=>{a&&typeof a=="object"&&t.push(a)};n(e.pricing),e.provider&&typeof e.provider=="object"&&n(e.provider.pricing);const r=e.top_provider;return r&&typeof r=="object"&&n(r.pricing),t}function qp(e,t,n,r,a){const o=Ao(e,t),u=ld(o,a);if(u!==null)return u;const i=Ao(e,n),l=cd(i,r,a);return l!==null?l:null}function Hp(e,t,n,r,a){if(!e)return null;const o=e,u=Ao(o,t),i=ld(u,a);if(i!==null)return i;const l=Ao(o,n),c=cd(l,r,a);return c!==null?c:null}function dd(e,t,n,r,a,o){const i=qp(e,t,n,a,o);if(i!==null)return i;const l=[...r,...n];for(const c of jp(e)){const f=Hp(c,t,l,a,o);if(f!==null)return f}return null}function fd(e){return dd(e,Op,$p,Rp,ud,id)}function Wp(e){return dd(e,zp,Bp,Up,ud,id)}function go(e){return fd(e)}function Fs(e){const t=[e.max_context,e.context_length,e.context_window,e.context_tokens,e.stats?.context_length];for(const n of t){const r=od(n);if(r!==null)return r}return null}function Vp(e){return e===null?"â":e===0?"FREE":e>=100?`$${e.toFixed(0)}`:e>=10?`$${e.toFixed(1)}`:e>=1?`$${e.toFixed(2)}`:e>=.1?`$${e.toFixed(2)}`:`$${e.toFixed(3)}`}function ao(e){return e===null?"Unknown":e>=1e3?`${(e/1e3).toFixed(1)}k tokens`:`${e} tokens`}function pd(e){const t=e.provider;if(t&&typeof t=="object"){const r=t,a=r.display_name;if(typeof a=="string"&&a.trim())return a.trim();const o=r.name??r.id??r.slug;if(typeof o=="string"&&o.trim())return o.trim()}if(typeof e.provider=="string")return e.provider.trim()||null;const n=e.id?.split("/")??[];return n.length>=2?n[n.length-2]??null:null}function vd(e){const t=new Set,n=[];typeof e.id=="string"&&n.push(e.id.toLowerCase()),typeof e.name=="string"&&n.push(e.name.toLowerCase()),Array.isArray(e.tags)&&n.push(...e.tags.map(a=>String(a).toLowerCase()));const r=n.join(" ");for(const a of Np)a.label!=="Other"&&a.keywords.some(o=>r.includes(o))&&t.add(a.label);return t.size===0&&t.add("Other"),Array.from(t)}function Ai(e){const t=new Set,n=[],r=e;if(n.push(r.parameters,r.supported_parameters),e.capabilities&&typeof e.capabilities=="object"){const a=e.capabilities;n.push(a.parameters,a.supports_parameters)}for(const a of n)if(a){if(Array.isArray(a)){for(const o of a){const u=pu(o);u&&t.add(u)}continue}if(typeof a=="object")for(const o of Object.keys(a)){const u=pu(o);u&&t.add(u)}if(typeof a=="string"){const o=pu(a);o&&t.add(o)}}return Array.from(t)}function hd(e){const t=e,n=[t.is_moderated,t.moderation,t.requires_moderation],r=e.capabilities;r&&typeof r=="object"&&(n.push(r.is_moderated),n.push(r.requires_moderation));const a=e.provider;a&&typeof a=="object"&&n.push(a.is_moderated);const o=t.top_provider;o&&typeof o=="object"&&n.push(o.is_moderated);const u=t.metadata;u&&typeof u=="object"&&n.push(u.is_moderated);for(const i of n)if(typeof i=="boolean")return i?"moderated":"unmoderated";return null}function pu(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function Na(){return{include:[],exclude:[]}}function Ju(){return{search:"",inputModalities:Na(),outputModalities:Na(),minContext:null,minPromptPrice:null,maxPromptPrice:null,sort:"newness",series:Na(),providers:Na(),supportedParameters:Na(),moderation:Na()}}const Gp={inputModalities:[],outputModalities:[],minContext:null,maxContext:null,minPromptPrice:null,maxPromptPrice:null,series:[],providers:[],supportedParameters:[],moderation:[]},Zp={models:[],loading:!1,error:null,filters:Ju(),facets:{...Gp}};function Kp(e){const t=new Set,n=new Set;let r=null,a=null,o=null,u=null;const i=new Set,l=new Set,c=new Set,f=new Set;for(const d of e){for(const A of Ei(d))t.add(A);for(const A of Ci(d))n.add(A);const m=Fs(d);m!==null&&(r=r===null?m:Math.min(r,m),a=a===null?m:Math.max(a,m));const h=go(d);h!==null&&(o=o===null?h:Math.min(o,h),u=u===null?h:Math.max(u,h));for(const A of vd(d))i.add(A);const g=pd(d);g&&l.add(g);for(const A of Ai(d))c.add(A);const T=hd(d);T&&f.add(T)}return{inputModalities:Array.from(t).sort(),outputModalities:Array.from(n).sort(),minContext:r,maxContext:a,minPromptPrice:o,maxPromptPrice:u,series:Array.from(i).sort(),providers:Array.from(l).sort(),supportedParameters:Array.from(c).sort(),moderation:Array.from(f).sort()}}function Ti(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t||null}function vu(e){const t=[];for(const n of e){const r=Ti(n);r&&t.push(r)}return t}function Yp(e,t){return e.include.includes(t)?"include":e.exclude.includes(t)?"exclude":"neutral"}function md(e,t,n){const r=e.include.filter(o=>o!==t),a=e.exclude.filter(o=>o!==t);return n==="include"?{include:[...r,t],exclude:a}:n==="exclude"?{include:r,exclude:[...a,t]}:{include:r,exclude:a}}function Jp(e,t,n){const r=Ti(t);return r?md(e,r,n):e}function Oa(e,t){const n=vu(e.include),r=vu(e.exclude);if(n.length===0&&r.length===0)return!0;const a=new Set(vu(t));if(n.length>0){for(const o of n)if(!a.has(o))return!1}if(r.length>0){for(const o of r)if(a.has(o))return!1}return!0}function Xp(e){const{models:t,filters:n}=e;if(!Array.isArray(t)||t.length===0)return[];const r=n.search.toLowerCase().split(/\s+/).filter(Boolean),a=t.filter(i=>{if(r.length>0){const m=[i.id,i.name,i.description,(i.tags??[]).join(" ")].join(" ").toLowerCase();if(!r.every(g=>m.includes(g)))return!1}if(!Oa(n.inputModalities,Ei(i))||!Oa(n.outputModalities,Ci(i)))return!1;const l=Fs(i);if(n.minContext!==null&&(l===null||l<n.minContext))return!1;const c=go(i);if(n.minPromptPrice!==null&&(c===null||c<n.minPromptPrice)||n.maxPromptPrice!==null&&(c===null||c>n.maxPromptPrice)||!Oa(n.series,vd(i)))return!1;const f=pd(i);if(!Oa(n.providers,f?[f]:[])||!Oa(n.supportedParameters,Ai(i)))return!1;const d=hd(i);return!!Oa(n.moderation,d?[d]:[])}),o={newness:(i,l)=>{const c=Date.parse(i.created_at??"")||0;return(Date.parse(l.created_at??"")||0)-c},price:(i,l)=>{const c=go(i),f=go(l),d=c??Number.POSITIVE_INFINITY,m=f??Number.POSITIVE_INFINITY;return d===m?0:d<m?-1:1},context:(i,l)=>{const c=Fs(i),f=Fs(l),d=c??-1/0,m=f??-1/0;return d===m?0:m-d}},u=o[n.sort]??o.newness;return a.slice().sort(u)}function $a(e,t){const n=Ti(t);if(!n)return e;const r=Yp(e,n);return md(e,n,r==="include"?"exclude":r==="exclude"?"neutral":"include")}function Qp(e,t,n,r){const a={...e};return a[t]=Jp(e[t],n,r),a}function Ra(e){return e===null||Number.isNaN(e)||!Number.isFinite(e)||e<0?null:e}function ar(e){return e.include.length>0||e.exclude.length>0}function e1(e){return!!(e.search.trim()||ar(e.inputModalities)||ar(e.outputModalities)||ar(e.series)||ar(e.providers)||ar(e.supportedParameters)||ar(e.moderation)||e.minContext!==null||e.minPromptPrice!==null||e.maxPromptPrice!==null)}function t1(e,t,n,r){if(!Array.isArray(e)||e.length===0){if(n){const o=t.find(u=>u.id===n);return o?[o]:[{id:n,name:`${n} (unavailable)`}]}return[]}if(!n||e.some(o=>o.id===n))return e;const a=t.find(o=>o.id===n);return a?r?e:[a,...e]:[{id:n,name:`${n} (unavailable)`},...e]}function n1(e,t){return!Array.isArray(e)||e.length===0||!t?null:e.find(r=>r.id===t)??null}function r1(){const e=ln({...Zp});async function t(){e.update(P=>({...P,loading:!0,error:null}));try{const P=await X0(),L=Array.isArray(P.data)?P.data:[],K=Kp(L);return e.update(G=>({...G,models:L,facets:K,loading:!1,error:null})),P}catch(P){const L=P instanceof Error?P.message:String(P);e.update(K=>({...K,loading:!1,error:L}))}}function n(P){e.update(L=>({...L,filters:{...L.filters,search:P}}))}function r(P){e.update(L=>({...L,filters:{...L.filters,inputModalities:$a(L.filters.inputModalities,P)}}))}function a(P){e.update(L=>({...L,filters:{...L.filters,outputModalities:$a(L.filters.outputModalities,P)}}))}function o(P){e.update(L=>({...L,filters:{...L.filters,series:$a(L.filters.series,P)}}))}function u(P){e.update(L=>({...L,filters:{...L.filters,providers:$a(L.filters.providers,P)}}))}function i(P){e.update(L=>({...L,filters:{...L.filters,supportedParameters:$a(L.filters.supportedParameters,P)}}))}function l(P){e.update(L=>({...L,filters:{...L.filters,moderation:$a(L.filters.moderation,P)}}))}function c(P,L,K){e.update(G=>({...G,filters:Qp(G.filters,P,L,K)}))}function f(P){e.update(L=>({...L,filters:{...L.filters,minContext:Ra(P)}}))}function d(P){e.update(L=>({...L,filters:{...L.filters,minPromptPrice:Ra(P)}}))}function m(P){e.update(L=>({...L,filters:{...L.filters,maxPromptPrice:Ra(P)}}))}function h(P){e.update(L=>({...L,filters:{...L.filters,sort:P}}))}function g(){e.update(P=>{const L=Ju();return L.sort=P.filters.sort,{...P,filters:L}})}function T(){const P=lt(e).filters,L={};return ar(P.inputModalities)&&(L.inputModalities=P.inputModalities),ar(P.outputModalities)&&(L.outputModalities=P.outputModalities),P.minContext!==null&&(L.minContext=P.minContext),P.minPromptPrice!==null&&(L.minPromptPrice=P.minPromptPrice),P.maxPromptPrice!==null&&(L.maxPromptPrice=P.maxPromptPrice),ar(P.series)&&(L.series=P.series),ar(P.providers)&&(L.providers=P.providers),ar(P.supportedParameters)&&(L.supportedParameters=P.supportedParameters),ar(P.moderation)&&(L.moderation=P.moderation),L.sort=P.sort,L}function A(P){e.update(L=>{const K=Ju();return K.search=L.filters.search,P.inputModalities&&(K.inputModalities=P.inputModalities),P.outputModalities&&(K.outputModalities=P.outputModalities),P.minContext!==void 0&&(K.minContext=Ra(P.minContext)),P.minPromptPrice!==void 0&&(K.minPromptPrice=Ra(P.minPromptPrice)),P.maxPromptPrice!==void 0&&(K.maxPromptPrice=Ra(P.maxPromptPrice)),P.series&&(K.series=P.series),P.providers&&(K.providers=P.providers),P.supportedParameters&&(K.supportedParameters=P.supportedParameters),P.moderation&&(K.moderation=P.moderation),P.sort&&(K.sort=P.sort),{...L,filters:K}})}const w=yn(e,P=>P.models),E=yn(e,P=>P.loading),C=yn(e,P=>P.error),k=yn(e,P=>P.filters),S=yn(e,P=>P.facets),x=yn(e,P=>Xp(P)),F=yn(e,P=>e1(P.filters)),q=yn([x,w,F],([P,L,K])=>{const G=K?P:L;return ce=>t1(G,L,ce,K)}),H=yn(w,P=>L=>n1(P,L));return{subscribe:e.subscribe,loadModels:t,setSearch:n,toggleInputModality:r,toggleOutputModality:a,toggleSeries:o,toggleProvider:u,toggleSupportedParameter:i,toggleModeration:l,setSelectionState:c,setMinContext:f,setMinPromptPrice:d,setMaxPromptPrice:m,setSort:h,resetFilters:g,getFilters:T,setFilters:A,models:w,loading:E,error:C,filters:k,facets:S,filtered:x,activeFilters:F,selectable:q,activeFor:H}}const gr=r1(),a1={loading:!1,saving:!1,applying:null,deleting:null,creating:!1,settingDefault:null,error:null,items:[],lastApplied:null,lastResult:null};function s1(){const e=ln({...a1});async function t(){e.update(f=>({...f,loading:!0,error:null}));try{const f=await hs();e.update(d=>({...d,loading:!1,error:null,items:f}))}catch(f){const d=f instanceof Error?f.message:"Failed to load presets.";e.update(m=>({...m,loading:!1,error:d}))}}async function n(f){const d={name:f.trim(),model_filters:gr.getFilters()};if(!d.name)return e.update(m=>({...m,error:"Preset name is required."})),null;e.update(m=>({...m,creating:!0,error:null,lastResult:null}));try{const m=await yp(d),h=await hs();return e.update(g=>({...g,creating:!1,error:null,items:h,lastResult:m})),m}catch(m){const h=m instanceof Error?m.message:"Failed to create preset.";return e.update(g=>({...g,creating:!1,error:h})),null}}async function r(f,d){e.update(m=>({...m,saving:!0,error:null,lastResult:null}));try{const m={...d,model_filters:gr.getFilters()},h=await xp(f,m),g=await hs();return e.update(T=>({...T,saving:!1,error:null,items:g,lastResult:h})),h}catch(m){const h=m instanceof Error?m.message:"Failed to save snapshot.";return e.update(g=>({...g,saving:!1,error:h})),null}}async function a(f){e.update(d=>({...d,deleting:f,error:null}));try{const d=await wp(f),m=await hs();return e.update(h=>({...h,deleting:null,items:m})),!!d?.deleted}catch(d){const m=d instanceof Error?d.message:"Failed to delete preset.";return e.update(h=>({...h,deleting:null,error:m})),!1}}async function o(f){e.update(d=>({...d,applying:f,error:null,lastApplied:null,lastResult:null}));try{const d=await kp(f);return d?.model_filters?gr.setFilters(d.model_filters):gr.resetFilters(),e.update(m=>({...m,applying:null,lastApplied:f,lastResult:d})),d}catch(d){const m=d instanceof Error?d.message:"Failed to apply preset.";return e.update(h=>({...h,applying:null,error:m})),null}}async function u(f){e.update(d=>({...d,settingDefault:f,error:null}));try{const d=await Sp(f),m=await hs();return e.update(h=>({...h,settingDefault:null,items:m,lastResult:d})),d}catch(d){const m=d instanceof Error?d.message:"Failed to set default preset.";return e.update(h=>({...h,settingDefault:null,error:m})),null}}async function i(){try{return await Ep()}catch(f){return console.error("Failed to load default preset:",f),null}}function l(){e.update(f=>({...f,error:null}))}function c(){e.update(f=>({...f,lastApplied:null,lastResult:null}))}return{subscribe:e.subscribe,load:t,create:n,saveSnapshot:r,remove:a,apply:o,setDefault:u,loadDefault:i,clearError:l,clearLastApplied:c}}const Hn=s1();var o1=Ma('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M15 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),u1=Ma('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>'),i1=M('<span class="mobile-preset-label svelte-1vc4gmw"> </span>'),l1=M('<span class="mobile-preset-label svelte-1vc4gmw"><span class="mobile-preset-dot svelte-1vc4gmw"></span> <svg class="preset-chevron svelte-1vc4gmw" width="12" height="12" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></span>'),c1=M('<div class="preset-dropdown-item disabled svelte-1vc4gmw">Loadingâ¦</div>'),d1=M('<div class="preset-dropdown-item disabled svelte-1vc4gmw">No presets</div>'),f1=M('<span class="preset-dropdown-tag svelte-1vc4gmw">default</span>'),p1=Ma('<svg class="preset-dropdown-check svelte-1vc4gmw" width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12l5 5L20 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),v1=M('<button type="button" role="option"><span class="preset-dropdown-name svelte-1vc4gmw"> </span> <!> <!></button>'),h1=M('<!> <div class="preset-dropdown-divider svelte-1vc4gmw"></div> <button class="preset-dropdown-item preset-dropdown-manage svelte-1vc4gmw" type="button">Manage presetsâ¦</button>',1),m1=M('<div class="preset-dropdown svelte-1vc4gmw" role="listbox"><!></div>'),g1=M('<button class="mobile-model-name mobile-preset-btn svelte-1vc4gmw" type="button" title="Select preset" aria-haspopup="true"><!></button> <!>',1),_1=M('<span class="mobile-model-name svelte-1vc4gmw"><!></span>'),b1=M(`<div class="web-search-menu mobile-web-search-menu svelte-1vc4gmw" role="dialog"><div class="web-search-fields svelte-1vc4gmw"><label class="svelte-1vc4gmw"><span class="svelte-1vc4gmw">Engine</span> <select class="select-control svelte-1vc4gmw"><option>Auto</option><option>Native</option><option>Exa</option></select></label> <label class="svelte-1vc4gmw"><span class="svelte-1vc4gmw">Context</span> <select class="select-control svelte-1vc4gmw"><option>Default</option><option>Low</option><option>Medium</option><option>High</option></select></label> <label class="svelte-1vc4gmw"><span class="svelte-1vc4gmw">Max results</span> <input class="input-control svelte-1vc4gmw" type="number" min="1" max="25" step="1" inputmode="numeric" pattern="\\\\d*"/></label> <label class="prompt svelte-1vc4gmw"><span class="svelte-1vc4gmw">Search prompt</span> <textarea class="textarea-control svelte-1vc4gmw" rows="4" placeholder="Default: A web search was conducted on {today's_date}. Incorporate the following web search results into your response."></textarea></label></div> <button class="btn btn-ghost btn-small web-search-disable svelte-1vc4gmw" type="button">Disable Web Search</button></div>`),y1=M('<div class="mobile-web-search-wrapper svelte-1vc4gmw"><button type="button" aria-haspopup="true"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke="currentColor" stroke-width="1.5"></path></svg></button> <!></div>'),x1=M('<div class="model-picker-loading svelte-1vc4gmw" aria-hidden="true"><select disabled><option>Loadingâ¦</option></select></div>'),w1=M('<div class="preset-badge applying svelte-1vc4gmw" role="group" aria-live="polite"><button class="preset-main svelte-1vc4gmw" type="button" disabled><span class="spinner svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button></div>'),k1=M('<span class="preset-default-tag svelte-1vc4gmw">(default)</span>'),S1=M('<button class="preset-close svelte-1vc4gmw" type="button" title="Reset to default preset" aria-label="Reset to default preset"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M18 6 6 18M6 6l12 12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></path></svg></button>'),E1=M('<div class="preset-dropdown-item disabled svelte-1vc4gmw">Loadingâ¦</div>'),C1=M('<div class="preset-dropdown-item disabled svelte-1vc4gmw">No presets</div>'),A1=M('<span class="preset-dropdown-tag svelte-1vc4gmw">default</span>'),T1=Ma('<svg class="preset-dropdown-check svelte-1vc4gmw" width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12l5 5L20 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),D1=M('<button type="button" role="option"><span class="preset-dropdown-name svelte-1vc4gmw"> </span> <!> <!></button>'),M1=M('<!> <div class="preset-dropdown-divider svelte-1vc4gmw"></div> <button class="preset-dropdown-item preset-dropdown-manage svelte-1vc4gmw" type="button">Manage presetsâ¦</button>',1),F1=M('<div class="preset-dropdown svelte-1vc4gmw" role="listbox"><!></div>'),P1=M('<div class="preset-badge svelte-1vc4gmw" role="group" aria-live="polite"><button class="preset-main svelte-1vc4gmw" type="button" title="Select preset" aria-haspopup="true"><span class="dot svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span> <svg class="preset-chevron svelte-1vc4gmw" width="12" height="12" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!></div> <!>',1),I1=M('<div class="history-search-wrapper pwa-full-row svelte-1vc4gmw"><svg class="history-search-icon svelte-1vc4gmw" width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"></circle><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg> <input class="history-search-input svelte-1vc4gmw" type="text" placeholder="Search..."/> <button class="history-search-close svelte-1vc4gmw" type="button" aria-label="Close history"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M18 6 6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button></div>'),L1=M('<button class="btn btn-ghost btn-small pwa-full-row svelte-1vc4gmw" type="button" aria-label="Conversation history" title="Conversation history"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline></svg> <span>History</span></button>'),N1=M('<div class="history-empty svelte-1vc4gmw"><!></div>'),O1=M('<button type="button" aria-label="Regenerate title"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1vc4gmw"><path d="M1 4v6h6M23 20v-6h-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>'),$1=M('<div class="history-item svelte-1vc4gmw" role="menuitem" tabindex="0"><span class="history-item-title svelte-1vc4gmw"> </span> <span class="history-item-meta svelte-1vc4gmw"> </span> <!> <button class="history-item-delete svelte-1vc4gmw" type="button" aria-label="Delete conversation"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div>'),R1=M('<div class="history-group-label svelte-1vc4gmw"> </div> <!>',1),z1=M('<div class="history-dropdown svelte-1vc4gmw" role="menu"><!></div>'),B1=M('<button class="btn btn-ghost btn-small pwa-full-row mcp-btn svelte-1vc4gmw" type="button" aria-label="MCP servers" title="MCP servers"><svg width="18" height="18" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M25 97.8528L92.8823 29.9706C102.255 20.598 117.451 20.598 126.823 29.9706V29.9706C136.196 39.3431 136.196 54.5391 126.823 63.9117L75.5581 115.177" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M76.2653 114.47L126.823 63.9117C136.196 54.5391 151.392 54.5391 160.765 63.9117L161.118 64.2652C170.491 73.6378 170.491 88.8338 161.118 98.2063L99.7248 159.6C96.6006 162.724 96.6006 167.789 99.7248 170.913L112.331 183.52" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M109.853 46.9411L59.6482 97.1457C50.2757 106.518 50.2757 121.714 59.6482 131.087V131.087C69.0208 140.459 84.2168 140.459 93.5894 131.087L143.794 80.8822" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path></svg> <span>MCP Servers</span></button> <button class="btn btn-ghost btn-small pwa-full-row system-settings svelte-1vc4gmw" type="button" aria-label="System settings" title="System settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M8 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M3 8h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg> <span>System Settings</span></button> <div class="history-wrapper pwa-full-row svelte-1vc4gmw"><!> <!></div>',1),U1=M(`<div class="web-search-menu svelte-1vc4gmw" role="dialog"><div class="web-search-fields svelte-1vc4gmw"><label class="svelte-1vc4gmw"><span class="svelte-1vc4gmw">Engine</span> <select class="select-control svelte-1vc4gmw"><option>Auto</option><option>Native</option><option>Exa</option></select></label> <label class="svelte-1vc4gmw"><span class="svelte-1vc4gmw">Context</span> <select class="select-control svelte-1vc4gmw"><option>Default</option><option>Low</option><option>Medium</option><option>High</option></select></label> <label class="svelte-1vc4gmw"><span class="svelte-1vc4gmw">Max results</span> <input class="input-control svelte-1vc4gmw" type="number" min="1" max="25" step="1" inputmode="numeric" pattern="\\\\d*"/></label> <label class="prompt svelte-1vc4gmw"><span class="svelte-1vc4gmw">Search prompt</span> <textarea class="textarea-control svelte-1vc4gmw" rows="4" placeholder="Default: A web search was conducted on {today's_date}. Incorporate the following web search results into your response."></textarea></label></div> <button class="btn btn-ghost btn-small web-search-disable svelte-1vc4gmw" type="button">Disable Web Search</button></div>`),j1=M('<div class="web-search-wrapper svelte-1vc4gmw"><button type="button" aria-haspopup="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke="currentColor" stroke-width="1.5"></path></svg></button> <!></div> <button class="btn btn-ghost btn-small settings-icon mcp-btn" type="button" aria-label="MCP servers" title="MCP servers"><svg width="18" height="18" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M25 97.8528L92.8823 29.9706C102.255 20.598 117.451 20.598 126.823 29.9706V29.9706C136.196 39.3431 136.196 54.5391 126.823 63.9117L75.5581 115.177" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M76.2653 114.47L126.823 63.9117C136.196 54.5391 151.392 54.5391 160.765 63.9117L161.118 64.2652C170.491 73.6378 170.491 88.8338 161.118 98.2063L99.7248 159.6C96.6006 162.724 96.6006 167.789 99.7248 170.913L112.331 183.52" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M109.853 46.9411L59.6482 97.1457C50.2757 106.518 50.2757 121.714 59.6482 131.087V131.087C69.0208 140.459 84.2168 140.459 93.5894 131.087L143.794 80.8822" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon system-settings" type="button" aria-label="System settings" title="System settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M8 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M3 8h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button>',1),q1=M('<div class="history-search-wrapper svelte-1vc4gmw"><svg class="history-search-icon svelte-1vc4gmw" width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"></circle><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg> <input class="history-search-input svelte-1vc4gmw" type="text" placeholder="Search..."/> <button class="history-search-close svelte-1vc4gmw" type="button" aria-label="Close history"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M18 6 6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button></div>'),H1=M('<button class="btn btn-ghost btn-small" type="button" aria-label="Conversation history" title="Conversation history">History</button>'),W1=M('<div class="history-empty svelte-1vc4gmw"><!></div>'),V1=M('<button type="button" aria-label="Regenerate title"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1vc4gmw"><path d="M1 4v6h6M23 20v-6h-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>'),G1=M('<div class="history-item svelte-1vc4gmw" role="menuitem" tabindex="0"><span class="history-item-title svelte-1vc4gmw"> </span> <span class="history-item-meta svelte-1vc4gmw"> </span> <!> <button class="history-item-delete svelte-1vc4gmw" type="button" aria-label="Delete conversation"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div>'),Z1=M('<div class="history-group-label svelte-1vc4gmw"> </div> <!>',1),K1=M('<div class="history-dropdown svelte-1vc4gmw" role="menu"><!></div>'),Y1=M('<button class="btn btn-ghost btn-small settings-icon kiosk-btn" type="button" aria-label="Kiosk settings" title="Kiosk settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="4" y="2" width="16" height="12" rx="1.5" stroke="currentColor" stroke-width="1.5"></rect><path d="M12 14v4M8 22h8M8 18h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon cli-btn" type="button" aria-label="CLI settings" title="CLI settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4 17l6-6-6-6M12 19h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button type="button"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><polyline points="17 21 17 13 7 13 7 21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline><polyline points="7 3 7 8 15 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline></svg></button> <div class="history-wrapper svelte-1vc4gmw"><!> <!></div> <button class="btn btn-ghost btn-small desktop-clear svelte-1vc4gmw" type="button">Clear</button>',1),J1=M('<button class="drawer-backdrop svelte-1vc4gmw" type="button" aria-label="Close menu" tabindex="-1"></button>'),X1=M('<header class="topbar chat-header svelte-1vc4gmw"><div class="mobile-bar svelte-1vc4gmw"><button class="hamburger-btn svelte-1vc4gmw" type="button" aria-controls="chat-header-controls"><!></button> <div class="mobile-preset-wrapper svelte-1vc4gmw"><!></div> <!> <button type="button"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><polyline points="17 21 17 13 7 13 7 21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline><polyline points="7 3 7 8 15 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline></svg></button> <button class="btn btn-ghost btn-small mobile-clear svelte-1vc4gmw" type="button" aria-label="Clear conversation">Clear</button></div> <div class="topbar-content svelte-1vc4gmw"><div class="controls svelte-1vc4gmw" id="chat-header-controls"><button class="btn btn-ghost btn-small explorer svelte-1vc4gmw" type="button">Explorer</button> <div class="model-group svelte-1vc4gmw"><!> <button class="btn btn-ghost btn-small model-settings-btn svelte-1vc4gmw" type="button" aria-label="Model settings" title="Model settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="svelte-1vc4gmw"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.89 3.31.876 2.42 2.42a1.724 1.724 0 0 0 1.066 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.572c.89 1.543-.876 3.31-2.42 2.42a1.724 1.724 0 0 0-2.572 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.89-3.31-.876-2.42-2.42a1.724 1.724 0 0 0-1.066-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.572c-.89-1.543.876-3.31 2.42-2.42.965.557 2.185.21 2.573-1.066Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <div class="desktop-preset-wrapper svelte-1vc4gmw"><!></div> <!> <div class="icon-row svelte-1vc4gmw"><!> <!></div></div></div> <!></header>');function Q1(e,t){Nt(t,!1);const n=()=>Dt(Hn,"$presetsStore",a),r=()=>Dt(Sr,"$webSearchStore",a),[a,o]=yr(),u=$(),i=$(),l=$(),c=pn();let f=le(t,"selectableModels",24,()=>[]),d=le(t,"selectedModel",8,""),m=le(t,"modelsLoading",8,!1),h=le(t,"modelsError",8,null),g=le(t,"hasMessages",8,!1),T=le(t,"pwaMode",8,!1),A=le(t,"isSaved",8,!1),w=le(t,"conversations",24,()=>[]),E=$(!1),C=$(),k=$(""),S=$(null),x=$(""),F=$(null),q=null,H=$(!1),P=$(),L=$(null),K=$(!1),G=$(!1),ce=$(),O=$(!1),ae=$(),oe=le(t,"controlsOpen",12,!1),se=$(null);function Y(){oe(!1)}async function R(){if(!s(L)){_(K,!0);try{const Q=await Ip(()=>import("./ModelPicker-BYQ2bCr3.js"),__vite__mapDeps([0,1]));_(L,Q.default)}catch(Q){console.error("Failed to load ModelPicker",Q)}finally{_(K,!1)}}}Zs(()=>{R()});function V(){Sr.current.enabled?_(G,!s(G)):(Sr.setEnabled(!0),_(G,!0))}function ve(){_(G,!1)}function Se(){Sr.setEnabled(!1),_(G,!1)}function te(Q){const Z=Q.currentTarget.value;Sr.update({engine:Z==="native"||Z==="exa"?Z:null})}function X(Q){const Z=Q.currentTarget.value;Sr.update({contextSize:Z==="low"||Z==="medium"||Z==="high"?Z:null})}function J(Q){const Z=Q.currentTarget;if(Z.value===""){Sr.update({maxResults:null});return}let D=Math.trunc(Number(Z.value));Number.isFinite(D)&&(D<1&&(D=1),D>25&&(D=25),Sr.update({maxResults:D}))}function ye(Q){const Z=Q.currentTarget.value;Sr.update({searchPrompt:Z})}function ue(){c("openExplorer")}function we(){Y(),c("clear")}function ee(Q){c("modelChange",Q.detail)}function Ue(){T()||Y(),c("openModelSettings")}function qe(){T()||Y(),c("openSystemSettings")}function ot(){_(O,!s(O))}function je(){_(O,!1)}function Me(Q){je(),c("applyPreset",{name:Q})}function at(){T()||Y(),c("openKioskSettings")}function be(){T()||Y(),c("openCliSettings")}function Re(){T()||Y(),c("openMcpServers")}function $e(){c("toggleSaved")}async function Ge(){if(_(E,!s(E)),s(E)&&s(C)){if(window.innerWidth<=768)_(k,"");else{const Q=s(C).getBoundingClientRect(),Z=400,D=4,U=320,re=window.innerHeight-Q.bottom-D,Ee=Q.top-D;let Fe,me;re>=200||re>=Ee?(Fe=Q.bottom+D,me=Math.min(Z,re)):(me=Math.min(Z,Ee),Fe=Q.top-D-me);const Ce=Math.max(8,Math.min(Q.left,window.innerWidth-U-8));_(k,`position:fixed;top:${Fe}px;left:${Ce}px;max-height:${me}px;width:${Math.min(U,window.innerWidth-16)}px;`)}await Hc(),s(P)?.focus()}else fe()}function ut(Q){fe(),_(E,!1),Y(),c("loadConversation",{sessionId:Q})}function $t(Q,Z){Q.stopPropagation(),c("deleteConversation",{sessionId:Z})}function fe(){_(x,""),_(F,null),_(H,!1),q&&clearTimeout(q)}function j(){if(q&&clearTimeout(q),!s(x).trim()){_(F,null),_(H,!1);return}_(H,!0),q=setTimeout(async()=>{try{_(F,await ad(50,0,s(x).trim()))}catch(Q){console.error("Search failed",Q),_(F,null)}finally{_(H,!1)}},300)}async function pe(Q,Z){Q.stopPropagation(),_(S,Z);try{await Yu(Z),c("refreshConversations")}catch(D){console.error("Failed to regenerate title",D)}finally{_(S,null)}}function ge(Q){const Z=new Date,D=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()),U=new Date(D.getTime()-864e5),re=new Date(D.getTime()-7*864e5),Ee=new Date(D.getTime()-30*864e5),Fe={},me=[];function Ce(Te,We){Fe[Te]||(Fe[Te]=[],me.push(Te)),Fe[Te].push(We)}for(const Te of Q){const We=Te.updated_at||Te.created_at;if(!We){Ce("Older",Te);continue}const Ye=new Date(We);if(Ye>=D)Ce("Today",Te);else if(Ye>=U)Ce("Yesterday",Te);else if(Ye>=re)Ce("Previous 7 Days",Te);else if(Ye>=Ee)Ce("Previous 30 Days",Te);else{const Je=Ye.toLocaleDateString("en-US",{month:"long",year:"numeric"});Ce(Je,Te)}}return me.map(Te=>({label:Te,items:Fe[Te]}))}function ke(Q){const Z=Q.target;s(E)&&!Z.closest(".history-wrapper")&&(fe(),_(E,!1)),s(G)&&s(ce)&&!s(ce).contains(Z)&&ve(),s(O)&&s(ae)&&!s(ae).contains(Z)&&je()}xe(()=>(s(se),z(oe())),()=>{s(se)!==oe()&&(_(se,oe()),c("drawerToggle",{open:oe()}))}),xe(()=>(s(F),z(w())),()=>{_(u,s(F)??w())}),xe(()=>s(u),()=>{_(i,ge(s(u)))}),xe(()=>n(),()=>{_(l,n().lastApplied?n().items.some(Q=>Q.name===n().lastApplied&&Q.is_default):!1)}),fn(),Ut();var Ie=X1();N("click",Os,ke);var Le=v(Ie),Ze=v(Le),Ke=v(Ze);{var Qe=Q=>{var Z=o1();y(Q,Z)},ft=Q=>{var Z=u1();y(Q,Z)};I(Ke,Q=>{oe()?Q(Qe):Q(ft,!1)})}var et=b(Ze,2),Mt=v(et);{var gt=Q=>{var Z=g1(),D=de(Z),U=v(D);{var re=Ce=>{var Te=i1(),We=v(Te);B(()=>W(We,`Applying ${n(),p(()=>n().applying)??""}â¦`)),y(Ce,Te)},Ee=Ce=>{var Te=l1(),We=b(v(Te));B(()=>W(We,` ${n(),p(()=>n().lastApplied)??""} `)),y(Ce,Te)};I(U,Ce=>{n(),p(()=>n().applying)?Ce(re):Ce(Ee,!1)})}var Fe=b(D,2);{var me=Ce=>{var Te=m1(),We=v(Te);{var Ye=Be=>{var Ve=c1();y(Be,Ve)},Je=Be=>{var Ve=Ae(),Pe=de(Ve);{var Xe=he=>{var vt=d1();y(he,vt)},tt=he=>{var vt=h1(),kt=de(vt);Lt(kt,1,()=>(n(),p(()=>n().items)),Zt=>Zt.name,(Zt,_t)=>{var Wt=v1();let rt;var Bt=v(Wt),gn=v(Bt),bt=b(Bt,2);{var un=De=>{var it=f1();y(De,it)};I(bt,De=>{s(_t),p(()=>s(_t).is_default)&&De(un)})}var dn=b(bt,2);{var Fn=De=>{var it=p1();y(De,it)};I(dn,De=>{s(_t),n(),p(()=>s(_t).name===n().lastApplied)&&De(Fn)})}B(De=>{rt=At(Wt,1,"preset-dropdown-item svelte-1vc4gmw",null,rt,De),ie(Wt,"aria-selected",(s(_t),n(),p(()=>s(_t).name===n().lastApplied))),W(gn,(s(_t),p(()=>s(_t).name)))},[()=>({active:s(_t).name===n().lastApplied})]),N("click",Wt,()=>Me(s(_t).name)),y(Zt,Wt)});var zt=b(kt,4);N("click",zt,()=>{je(),qe()}),y(he,vt)};I(Pe,he=>{n(),p(()=>!n().items.length)?he(Xe):he(tt,!1)},!0)}y(Be,Ve)};I(We,Be=>{n(),p(()=>n().loading)?Be(Ye):Be(Je,!1)})}y(Ce,Te)};I(Fe,Ce=>{s(O),n(),p(()=>s(O)&&!n().applying)&&Ce(me)})}B(()=>ie(D,"aria-expanded",s(O))),N("click",D,ot),y(Q,Z)},Rt=Q=>{var Z=_1(),D=v(Z);{var U=Ee=>{var Fe=nn();B(me=>W(Fe,me),[()=>(z(f()),z(d()),p(()=>f().find(me=>me.id===d())?.name??d().split("/").pop()??"Chat"))]),y(Ee,Fe)},re=Ee=>{var Fe=nn("Chat");y(Ee,Fe)};I(D,Ee=>{d()?Ee(U):Ee(re,!1)})}y(Q,Z)};I(Mt,Q=>{n(),p(()=>n().applying||n().lastApplied)?Q(gt):Q(Rt,!1)})}qn(et,Q=>_(ae,Q),()=>s(ae));var vn=b(et,2);{var rn=Q=>{var Z=y1(),D=v(Z);let U;var re=b(D,2);{var Ee=Fe=>{var me=b1(),Ce=v(me),Te=v(Ce),We=b(v(Te),2),Ye=v(We);Ye.value=Ye.__value="";var Je=b(Ye);Je.value=Je.__value="native";var Be=b(Je);Be.value=Be.__value="exa";var Ve;In(We);var Pe=b(Te,2),Xe=b(v(Pe),2),tt=v(Xe);tt.value=tt.__value="";var he=b(tt);he.value=he.__value="low";var vt=b(he);vt.value=vt.__value="medium";var kt=b(vt);kt.value=kt.__value="high";var zt;In(Xe);var Zt=b(Pe,2),_t=b(v(Zt),2),Wt=b(Zt,2),rt=b(v(Wt),2),Bt=b(Ce,2);B(()=>{Ve!==(Ve=(r(),p(()=>r().engine??"")))&&(We.value=(We.__value=(r(),p(()=>r().engine??"")))??"",xn(We,(r(),p(()=>r().engine??"")))),zt!==(zt=(r(),p(()=>r().contextSize??"")))&&(Xe.value=(Xe.__value=(r(),p(()=>r().contextSize??"")))??"",xn(Xe,(r(),p(()=>r().contextSize??"")))),It(_t,(r(),p(()=>r().maxResults??""))),It(rt,(r(),p(()=>r().searchPrompt??"")))}),N("change",We,te),N("change",Xe,X),N("change",_t,J),N("blur",_t,J),N("input",rt,ye),N("click",Bt,Se),y(Fe,me)};I(re,Fe=>{s(G),r(),p(()=>s(G)&&r().enabled)&&Fe(Ee)})}qn(Z,Fe=>_(ce,Fe),()=>s(ce)),B(Fe=>{U=At(D,1,"btn btn-ghost btn-small mobile-web-search svelte-1vc4gmw",null,U,Fe),ie(D,"aria-label",(r(),p(()=>r().enabled?"Web search enabled":"Enable web search"))),ie(D,"title",(r(),p(()=>r().enabled?"Web search enabled":"Enable web search"))),ie(D,"aria-expanded",s(G))},[()=>({active:r().enabled})]),N("click",D,V),y(Q,Z)};I(vn,Q=>{T()&&Q(rn)})}var an=b(vn,2);let wt;var ct=b(an,2),He=b(Le,2),mt=v(He),st=v(mt),tn=b(st,2),cn=v(tn);{var nt=Q=>{var Z=Ae(),D=de(Z);N0(D,()=>s(L),(U,re)=>{re(U,{get selectableModels(){return f()},get selectedModel(){return d()},get modelsLoading(){return m()},get modelsError(){return h()},$$events:{modelChange:ee}})}),y(Q,Z)},pt=Q=>{var Z=x1();B(()=>ie(Z,"data-loading",s(K))),y(Q,Z)};I(cn,Q=>{s(L)?Q(nt):Q(pt,!1)})}var Tt=b(cn,2),ze=b(tn,2),_n=v(ze);{var Ft=Q=>{var Z=w1(),D=v(Z),U=b(v(D),4),re=v(U);B(()=>{ie(D,"title",(n(),p(()=>`Applying ${n().applying}â¦`))),ie(U,"title",(n(),p(()=>n().applying))),W(re,(n(),p(()=>n().applying)))}),y(Q,Z)},Ht=Q=>{var Z=Ae(),D=de(Z);{var U=re=>{var Ee=P1(),Fe=de(Ee),me=v(Fe),Ce=b(v(me),4),Te=v(Ce),We=b(me,2);{var Ye=Pe=>{var Xe=k1();y(Pe,Xe)},Je=Pe=>{var Xe=S1();N("click",Xe,du(()=>c("resetToDefault"))),y(Pe,Xe)};I(We,Pe=>{s(l)?Pe(Ye):Pe(Je,!1)})}var Be=b(Fe,2);{var Ve=Pe=>{var Xe=F1(),tt=v(Xe);{var he=kt=>{var zt=E1();y(kt,zt)},vt=kt=>{var zt=Ae(),Zt=de(zt);{var _t=rt=>{var Bt=C1();y(rt,Bt)},Wt=rt=>{var Bt=M1(),gn=de(Bt);Lt(gn,1,()=>(n(),p(()=>n().items)),un=>un.name,(un,dn)=>{var Fn=D1();let De;var it=v(Fn),Ct=v(it),Pt=b(it,2);{var qt=Vt=>{var sn=A1();y(Vt,sn)};I(Pt,Vt=>{s(dn),p(()=>s(dn).is_default)&&Vt(qt)})}var jt=b(Pt,2);{var Yt=Vt=>{var sn=T1();y(Vt,sn)};I(jt,Vt=>{s(dn),n(),p(()=>s(dn).name===n().lastApplied)&&Vt(Yt)})}B(Vt=>{De=At(Fn,1,"preset-dropdown-item svelte-1vc4gmw",null,De,Vt),ie(Fn,"aria-selected",(s(dn),n(),p(()=>s(dn).name===n().lastApplied))),W(Ct,(s(dn),p(()=>s(dn).name)))},[()=>({active:s(dn).name===n().lastApplied})]),N("click",Fn,()=>Me(s(dn).name)),y(un,Fn)});var bt=b(gn,4);N("click",bt,()=>{je(),qe()}),y(rt,Bt)};I(Zt,rt=>{n(),p(()=>!n().items.length)?rt(_t):rt(Wt,!1)},!0)}y(kt,zt)};I(tt,kt=>{n(),p(()=>n().loading)?kt(he):kt(vt,!1)})}y(Pe,Xe)};I(Be,Pe=>{s(O)&&Pe(Ve)})}B(()=>{ie(me,"aria-expanded",s(O)),ie(Ce,"title",(n(),p(()=>n().lastApplied))),W(Te,(n(),p(()=>n().lastApplied)))}),N("click",me,ot),y(re,Ee)};I(D,re=>{n(),p(()=>n().lastApplied)&&re(U)},!0)}y(Q,Z)};I(_n,Q=>{n(),p(()=>n().applying)?Q(Ft):Q(Ht,!1)})}qn(ze,Q=>_(ae,Q),()=>s(ae));var on=b(ze,2);{var Mn=Q=>{var Z=B1(),D=de(Z),U=b(D,2),re=b(U,2),Ee=v(re);{var Fe=We=>{var Ye=I1(),Je=b(v(Ye),2);qn(Je,Ve=>_(P,Ve),()=>s(P));var Be=b(Je,2);sr(Je,()=>s(x),Ve=>_(x,Ve)),N("input",Je,j),N("keydown",Je,Ve=>{Ve.key==="Escape"&&(_(E,!1),fe())}),N("click",Be,()=>{_(E,!1),fe()}),y(We,Ye)},me=We=>{var Ye=L1();B(()=>ie(Ye,"aria-expanded",s(E))),N("click",Ye,du(Ge)),y(We,Ye)};I(Ee,We=>{s(E)?We(Fe):We(me,!1)})}var Ce=b(Ee,2);{var Te=We=>{var Ye=z1(),Je=v(Ye);{var Be=Pe=>{var Xe=N1(),tt=v(Xe);{var he=kt=>{var zt=Ae(),Zt=de(zt);{var _t=rt=>{var Bt=nn("Searchingâ¦");y(rt,Bt)},Wt=rt=>{var Bt=nn("No matching conversations");y(rt,Bt)};I(Zt,rt=>{s(H)?rt(_t):rt(Wt,!1)})}y(kt,zt)},vt=kt=>{var zt=nn("No saved conversations");y(kt,zt)};I(tt,kt=>{s(x),p(()=>s(x).trim())?kt(he):kt(vt,!1)})}y(Pe,Xe)},Ve=Pe=>{var Xe=Ae(),tt=de(Xe);Lt(tt,1,()=>s(i),Jn,(he,vt)=>{var kt=R1(),zt=de(kt),Zt=v(zt),_t=b(zt,2);Lt(_t,1,()=>(s(vt),p(()=>s(vt).items)),Jn,(Wt,rt)=>{var Bt=$1(),gn=v(Bt),bt=v(gn),un=b(gn,2),dn=v(un),Fn=b(un,2);{var De=Ct=>{var Pt=O1();let qt;B(jt=>qt=At(Pt,1,"history-item-refresh svelte-1vc4gmw",null,qt,jt),[()=>({spinning:s(S)===s(rt).session_id})]),N("click",Pt,jt=>pe(jt,s(rt).session_id)),y(Ct,Pt)};I(Fn,Ct=>{s(rt),p(()=>s(rt).title_source!=="user")&&Ct(De)})}var it=b(Fn,2);B(()=>{ie(gn,"title",(s(rt),p(()=>s(rt).title||s(rt).preview||"Untitled"))),W(bt,(s(rt),p(()=>s(rt).title||s(rt).preview||"Untitled"))),W(dn,`${s(rt),p(()=>s(rt).message_count)??""} msgs`)}),N("click",it,Ct=>$t(Ct,s(rt).session_id)),N("click",Bt,()=>ut(s(rt).session_id)),N("keydown",Bt,Ct=>{(Ct.key==="Enter"||Ct.key===" ")&&ut(s(rt).session_id)}),y(Wt,Bt)}),B(()=>W(Zt,(s(vt),p(()=>s(vt).label)))),y(he,kt)}),y(Pe,Xe)};I(Je,Pe=>{s(u),p(()=>s(u).length===0)?Pe(Be):Pe(Ve,!1)})}y(We,Ye)};I(Ce,We=>{s(E)&&We(Te)})}N("click",D,Re),N("click",U,qe),y(Q,Z)};I(on,Q=>{T()&&Q(Mn)})}var zn=b(on,2),Ln=v(zn);{var _e=Q=>{var Z=j1(),D=de(Z),U=v(D);let re;var Ee=b(U,2);{var Fe=Te=>{var We=U1(),Ye=v(We),Je=v(Ye),Be=b(v(Je),2),Ve=v(Be);Ve.value=Ve.__value="";var Pe=b(Ve);Pe.value=Pe.__value="native";var Xe=b(Pe);Xe.value=Xe.__value="exa";var tt;In(Be);var he=b(Je,2),vt=b(v(he),2),kt=v(vt);kt.value=kt.__value="";var zt=b(kt);zt.value=zt.__value="low";var Zt=b(zt);Zt.value=Zt.__value="medium";var _t=b(Zt);_t.value=_t.__value="high";var Wt;In(vt);var rt=b(he,2),Bt=b(v(rt),2),gn=b(rt,2),bt=b(v(gn),2),un=b(Ye,2);B(()=>{tt!==(tt=(r(),p(()=>r().engine??"")))&&(Be.value=(Be.__value=(r(),p(()=>r().engine??"")))??"",xn(Be,(r(),p(()=>r().engine??"")))),Wt!==(Wt=(r(),p(()=>r().contextSize??"")))&&(vt.value=(vt.__value=(r(),p(()=>r().contextSize??"")))??"",xn(vt,(r(),p(()=>r().contextSize??"")))),It(Bt,(r(),p(()=>r().maxResults??""))),It(bt,(r(),p(()=>r().searchPrompt??"")))}),N("change",Be,te),N("change",vt,X),N("change",Bt,J),N("blur",Bt,J),N("input",bt,ye),N("click",un,Se),y(Te,We)};I(Ee,Te=>{s(G),r(),p(()=>s(G)&&r().enabled)&&Te(Fe)})}qn(D,Te=>_(ce,Te),()=>s(ce));var me=b(D,2),Ce=b(me,2);B(Te=>{re=At(U,1,"btn btn-ghost btn-small web-search-toggle svelte-1vc4gmw",null,re,Te),ie(U,"aria-label",(r(),p(()=>r().enabled?"Web search enabled":"Enable web search"))),ie(U,"title",(r(),p(()=>r().enabled?"Web search enabled":"Enable web search"))),ie(U,"aria-expanded",s(G))},[()=>({active:r().enabled})]),N("click",U,V),N("click",me,Re),N("click",Ce,qe),y(Q,Z)};I(Ln,Q=>{T()||Q(_e)})}var Ne=b(Ln,2);{var ne=Q=>{var Z=Y1(),D=de(Z),U=b(D,2),re=b(U,2);let Ee;var Fe=b(re,2),me=v(Fe);{var Ce=Be=>{var Ve=q1(),Pe=b(v(Ve),2);qn(Pe,tt=>_(P,tt),()=>s(P));var Xe=b(Pe,2);sr(Pe,()=>s(x),tt=>_(x,tt)),N("input",Pe,j),N("keydown",Pe,tt=>{tt.key==="Escape"&&(_(E,!1),fe())}),N("click",Xe,()=>{_(E,!1),fe()}),y(Be,Ve)},Te=Be=>{var Ve=H1();B(()=>ie(Ve,"aria-expanded",s(E))),N("click",Ve,du(Ge)),y(Be,Ve)};I(me,Be=>{s(E)?Be(Ce):Be(Te,!1)})}var We=b(me,2);{var Ye=Be=>{var Ve=K1(),Pe=v(Ve);{var Xe=he=>{var vt=W1(),kt=v(vt);{var zt=_t=>{var Wt=Ae(),rt=de(Wt);{var Bt=bt=>{var un=nn("Searchingâ¦");y(bt,un)},gn=bt=>{var un=nn("No matching conversations");y(bt,un)};I(rt,bt=>{s(H)?bt(Bt):bt(gn,!1)})}y(_t,Wt)},Zt=_t=>{var Wt=nn("No saved conversations");y(_t,Wt)};I(kt,_t=>{s(x),p(()=>s(x).trim())?_t(zt):_t(Zt,!1)})}y(he,vt)},tt=he=>{var vt=Ae(),kt=de(vt);Lt(kt,1,()=>s(i),Jn,(zt,Zt)=>{var _t=Z1(),Wt=de(_t),rt=v(Wt),Bt=b(Wt,2);Lt(Bt,1,()=>(s(Zt),p(()=>s(Zt).items)),Jn,(gn,bt)=>{var un=G1(),dn=v(un),Fn=v(dn),De=b(dn,2),it=v(De),Ct=b(De,2);{var Pt=jt=>{var Yt=V1();let Vt;B(sn=>Vt=At(Yt,1,"history-item-refresh svelte-1vc4gmw",null,Vt,sn),[()=>({spinning:s(S)===s(bt).session_id})]),N("click",Yt,sn=>pe(sn,s(bt).session_id)),y(jt,Yt)};I(Ct,jt=>{s(bt),p(()=>s(bt).title_source!=="user")&&jt(Pt)})}var qt=b(Ct,2);B(()=>{ie(dn,"title",(s(bt),p(()=>s(bt).title||s(bt).preview||"Untitled"))),W(Fn,(s(bt),p(()=>s(bt).title||s(bt).preview||"Untitled"))),W(it,`${s(bt),p(()=>s(bt).message_count)??""} msgs`)}),N("click",qt,jt=>$t(jt,s(bt).session_id)),N("click",un,()=>ut(s(bt).session_id)),N("keydown",un,jt=>{(jt.key==="Enter"||jt.key===" ")&&ut(s(bt).session_id)}),y(gn,un)}),B(()=>W(rt,(s(Zt),p(()=>s(Zt).label)))),y(zt,_t)}),y(he,vt)};I(Pe,he=>{s(u),p(()=>s(u).length===0)?he(Xe):he(tt,!1)})}B(()=>An(Ve,s(k))),y(Be,Ve)};I(We,Be=>{s(E)&&Be(Ye)})}qn(Fe,Be=>_(C,Be),()=>s(C));var Je=b(Fe,2);B(Be=>{Ee=At(re,1,"btn btn-ghost btn-small save-toggle svelte-1vc4gmw",null,Ee,Be),ie(re,"aria-label",A()?"Conversation saved":"Save conversation"),ie(re,"title",A()?"Conversation saved":"Save conversation"),Je.disabled=!g()},[()=>({active:A()})]),N("click",D,at),N("click",U,be),N("click",re,$e),N("click",Je,we),y(Q,Z)};I(Ne,Q=>{T()||Q(ne)})}var Oe=b(He,2);{var Et=Q=>{var Z=J1();N("click",Z,()=>oe(!1)),y(Q,Z)};I(Oe,Q=>{oe()&&Q(Et)})}B(Q=>{ie(Ie,"data-pwa-mode",T()),ie(Ie,"data-drawer-open",oe()),ie(Ze,"aria-label",oe()?"Close menu":"Open menu"),ie(Ze,"aria-expanded",oe()),wt=At(an,1,"btn btn-ghost btn-small mobile-save svelte-1vc4gmw",null,wt,Q),ie(an,"aria-label",A()?"Conversation saved":"Save conversation"),ie(an,"title",A()?"Conversation saved":"Save conversation"),ct.disabled=!g(),Tt.disabled=m()||!d()},[()=>({active:A()})]),N("click",Ze,()=>oe(!oe())),N("click",an,$e),N("click",ct,we),N("click",st,ue),N("click",Tt,Ue),y(e,Ie),Ot(),o()}/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const ev={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var tv=Ma("<svg><!><!></svg>");function Ir(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]),r=cr(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Nt(t,!1);let a=le(t,"name",8,void 0),o=le(t,"color",8,"currentColor"),u=le(t,"size",8,24),i=le(t,"strokeWidth",8,2),l=le(t,"absoluteStrokeWidth",8,!1),c=le(t,"iconNode",24,()=>[]);const f=(...g)=>g.filter((T,A,w)=>!!T&&w.indexOf(T)===A).join(" ");Ut();var d=tv();rl(d,(g,T)=>({...ev,...r,width:u(),height:u(),stroke:o(),"stroke-width":g,class:T}),[()=>(z(l()),z(i()),z(u()),p(()=>l()?Number(i())*24/Number(u()):i())),()=>(z(a()),z(n),p(()=>f("lucide-icon","lucide",a()?`lucide-${a()}`:"",n.class)))]);var m=v(d);Lt(m,1,c,Jn,(g,T)=>{var A=a0(()=>hf(s(T),2));let w=()=>s(A)[0],E=()=>s(A)[1];var C=Ae(),k=de(C);O0(k,w,!0,(S,x)=>{rl(S,()=>({...E()}))}),y(g,C)});var h=b(m);$n(h,t,"default",{}),y(e,d),Ot()}function nv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];Ir(e,Pr({name:"brain"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function rv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M5 21v-6"}],["path",{d:"M12 21V9"}],["path",{d:"M19 21V3"}]];Ir(e,Pr({name:"chart-no-axes-column-increasing"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function av(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M20 6 9 17l-5-5"}]];Ir(e,Pr({name:"check"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function sv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4"}],["path",{d:"M21 14H11"}],["path",{d:"m15 10-4 4 4 4"}]];Ir(e,Pr({name:"clipboard-copy"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function ov(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];Ir(e,Pr({name:"globe"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function ml(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Ir(e,Pr({name:"pencil"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function uv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}],["path",{d:"M16 16h5v5"}]];Ir(e,Pr({name:"refresh-ccw"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function iv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];Ir(e,Pr({name:"send"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function lv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ir(e,Pr({name:"trash-2"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function cv(e,t){const n=cr(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];Ir(e,Pr({name:"wrench"},()=>n,{get iconNode(){return r},children:(a,o)=>{var u=Ae(),i=de(u);$n(i,t,"default",{}),y(a,u)},$$slots:{default:!0}}))}function dv(e,t=null){let n=0,r=2;function a(c){if(typeof c=="number")r=Number.isFinite(c)&&c>0?c:2;else if(c&&typeof c=="object"&&"maxMultiplier"in c){const f=c.maxMultiplier;typeof f=="number"&&Number.isFinite(f)&&f>0&&(r=f)}}a(t);function o(){const c=e.style.height;if(e.style.height="auto",n=e.clientHeight||e.scrollHeight||0,e.style.height=c,!n){const f=getComputedStyle(e);n=parseFloat(f.lineHeight||"0")||24}}function u(){const c=Math.max(1,Math.round(n*r));e.style.height="auto";const f=e.scrollHeight,d=Math.min(f,c);e.style.height=`${d}px`,e.style.overflowY=f>c?"auto":"hidden",e.style.maxHeight=`${c}px`}function i(){u()}const l=requestAnimationFrame(()=>{o(),u()});return e.addEventListener("input",i),{update(c){a(c),o(),u()},destroy(){cancelAnimationFrame(l),e.removeEventListener("input",i),e.style.overflowY="",e.style.maxHeight=""}}}const Di="speech.settings.v2",fv={fast:{label:"Fast",autoSubmitDelayMs:0},normal:{label:"Normal",autoSubmitDelayMs:300},slow:{label:"Slow",autoSubmitDelayMs:800}},pv={stt:{autoSubmit:!0,autoSubmitDelayMs:0},updatedAt:null};function vv(e){return JSON.parse(JSON.stringify(e))}function _a(){return vv(pv)}function hv(e,t,n){return Math.min(Math.max(Math.round(e),t),n)}function mv(e,t){return typeof e=="boolean"?e:t}function gv(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Xu(e){const t=_a(),n={stt:{...t.stt},updatedAt:t.updatedAt};if(!e||typeof e!="object")return n;const r=e,a=r.stt??r.stt;if(a&&typeof a=="object"){const u=a;n.stt.autoSubmit=mv(u.autoSubmit??u.auto_submit,t.stt.autoSubmit);const i=gv(u.autoSubmitDelayMs??u.auto_submit_delay_ms);i!==null&&(n.stt.autoSubmitDelayMs=hv(i,0,1e4))}const o=r.updatedAt??r.updated_at;return n.updatedAt=typeof o=="string"&&o?o:null,n}function gl(){if(typeof window>"u"||!window.localStorage)return _a();try{const e=window.localStorage.getItem(Di);if(!e)return _a();const t=JSON.parse(e);return Xu(t)}catch(e){return console.warn("Failed to read speech settings from storage",e),_a()}}function _v(e){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(Di,JSON.stringify(e))}catch(t){console.warn("Failed to persist speech settings",t)}}function bv(){const e=gl(),t=ln(e);function n(u){const i=Xu(u),l={...i,stt:{...i.stt},updatedAt:new Date().toISOString()};return t.set(l),_v(l),l}function r(u){const i=lt(t),l={...i,stt:{...i.stt},updatedAt:i.updatedAt};return u.stt&&(l.stt={...l.stt,...u.stt}),u.updatedAt!==void 0&&(l.updatedAt=u.updatedAt),n(l)}function a(){return n(_a())}function o(){const u=gl();t.set(u)}return typeof window<"u"&&window.addEventListener("storage",u=>{if(u.key===Di)try{const i=u.newValue?JSON.parse(u.newValue):null,l=Xu(i);t.set(l)}catch(i){console.warn("Failed to synchronize speech settings from storage",i)}}),{subscribe:t.subscribe,save:n,update:r,reset:a,refresh:o,get current(){return lt(t)}}}const Ps=bv(),To=16e3,yv=4096,xv="audio-capture",wv=new URL("data:text/javascript;base64,LyoqCiAqIEF1ZGlvV29ya2xldCBwcm9jZXNzb3IgZm9yIGNhcHR1cmluZyBtaWNyb3Bob25lIGF1ZGlvLgogKiBTZW5kcyBGbG9hdDMyQXJyYXkgc2FtcGxlcyB0byB0aGUgbWFpbiB0aHJlYWQgZm9yIHByb2Nlc3NpbmcuCiAqLwpjbGFzcyBBdWRpb0NhcHR1cmVQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgc3VwZXIoKTsKICAgICAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7CiAgICAgICAgdGhpcy5wb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4gewogICAgICAgICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YSB8fCB7fTsKICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3BhdXNlJykgewogICAgICAgICAgICAgICAgdGhpcy5pc1BhdXNlZCA9IEJvb2xlYW4oZGF0YS52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIHByb2Nlc3MoaW5wdXRzKSB7CiAgICAgICAgaWYgKHRoaXMuaXNQYXVzZWQpIHJldHVybiB0cnVlOwogICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgICAgIGlmICghaW5wdXQgfHwgIWlucHV0WzBdIHx8IGlucHV0WzBdLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gQ29weSBzYW1wbGVzIGFuZCB0cmFuc2ZlciBidWZmZXIgdG8gbWFpbiB0aHJlYWQKICAgICAgICBjb25zdCBzYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheShpbnB1dFswXSk7CiAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHNhbXBsZXMsIFtzYW1wbGVzLmJ1ZmZlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgpyZWdpc3RlclByb2Nlc3NvcignYXVkaW8tY2FwdHVyZScsIEF1ZGlvQ2FwdHVyZVByb2Nlc3Nvcik7Cg==",import.meta.url),kv={mode:"idle",recording:!1,connecting:!1,error:null,promptText:"",promptVersion:0,keepPromptSynced:!1,pendingSubmit:null,sttMode:"command",conversationActive:!1},Dn=ln({...kv});let _o=null,bo=null,Wa=null,ba=null,zr=0,Yr="",yo=null,Qu=0;function Ys(){yo&&(clearTimeout(yo),yo=null),Qu++}function Do(e,t){Dn.update(n=>({...n,promptText:e,promptVersion:n.promptVersion+1,keepPromptSynced:t?!0:n.keepPromptSynced}))}function so(e){Dn.update(t=>({...t,error:e,recording:!1,connecting:!1,keepPromptSynced:!1,mode:"idle"}))}function Sv(){let e=window.location.origin;return e=e.replace(/^http/,"ws"),`${e}/api/stt/stream`}function Ev(e,t,n){if(!e||e.length===0||!t||!n||t===n)return e;const r=t/n,a=Math.max(1,Math.round(e.length/r)),o=new Float32Array(a);for(let u=0;u<a;u++){const i=u*r,l=Math.floor(i),c=Math.min(l+1,e.length-1),f=i-l;o[u]=e[l]+(e[c]-e[l])*f}return o}function Cv(e){const t=new Int16Array(e.length);for(let a=0;a<e.length;a++)t[a]=Math.max(-32768,Math.min(32767,Math.floor(e[a]*32768)));const n=new Uint8Array(t.buffer);let r="";for(let a=0;a<n.length;a++)r+=String.fromCharCode(n[a]);return btoa(r)}function hu(e,t){if(!e||e.length===0||!ba||ba.readyState!==WebSocket.OPEN)return;const n=t!==To?Ev(e,t,To):e,r=Cv(n);ba.send(JSON.stringify({type:"audio_chunk",data:{audio:r}}))}function Av(){if(ba)try{ba.close()}catch(e){console.warn("Failed to close WebSocket",e)}ba=null}function gd(){if(Wa)try{Wa.disconnect(),"port"in Wa&&(Wa.port.onmessage=null)}catch{}if(Wa=null,bo)try{bo.close()}catch{}if(bo=null,_o)try{_o.getTracks().forEach(e=>e.stop())}catch{}_o=null}function Ar(e={}){gd(),Av(),Ys(),Dn.update(t=>({...t,recording:!1,connecting:!1,keepPromptSynced:!1,pendingSubmit:e.submitText?{text:e.submitText}:null,mode:"idle",conversationActive:e.preserveConversation?t.conversationActive:!1}))}function Tv(e){const t=e.trim(),r=lt(Dn).sttMode==="conversation",a=Ps.current,o=r?!0:a?.stt.autoSubmit??!0,u=r?0:Math.max(a?.stt.autoSubmitDelayMs??0,0);if(Ys(),!t){Ar({submitText:null,preserveConversation:r});return}if(o){if(u<=0){Ar({submitText:t,preserveConversation:r});return}Ar({preserveConversation:r}),Do(t,!1);const i=++Qu;yo=setTimeout(()=>{i===Qu&&Dn.update(l=>({...l,pendingSubmit:{text:t}}))},u)}else Ar({preserveConversation:!1}),Do(t,!1)}async function Dv(e,t,n,r){let a=null;if(e.audioWorklet)try{await e.audioWorklet.addModule(wv);const o=new AudioWorkletNode(e,xv);o.port.onmessage=u=>{if(r!==zr)return;const i=u.data,l=i&&i.samples?i.samples:i;l instanceof Float32Array?hu(l,n):l instanceof ArrayBuffer&&hu(new Float32Array(l),n)},a=o}catch(o){console.warn("AudioWorklet unavailable, falling back to ScriptProcessor:",o)}if(!a){const o=e.createScriptProcessor(yv,1,1);o.onaudioprocess=u=>{r===zr&&hu(u.inputBuffer.getChannelData(0),n)},a=o}t.connect(a),a.connect(e.destination),Wa=a}let ms=null,mu=!1;async function Mv(){if(ms)return ms;if(mu)return await new Promise(e=>setTimeout(e,100)),ms;mu=!0;try{return ms=await rd(),ms}catch(e){return console.warn("Failed to fetch server STT settings",e),null}finally{mu=!1}}async function _d(e,t=!1){const n=lt(Dn);if((n.connecting||n.recording)&&Ar(),Ys(),!Ps.current){so("Speech settings unavailable");return}const o=(await Mv())?.mode==="conversation"?"conversation":"command",u=o==="conversation",i=++zr;Yr="",Dn.set({...n,mode:e,connecting:!0,recording:!1,error:null,keepPromptSynced:!0,pendingSubmit:null,sttMode:o,conversationActive:u||t});let l;try{l=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:To,echoCancellation:!0,noiseSuppression:!0},video:!1})}catch(g){if(i!==zr)return;Ar();const T=g instanceof Error?g.message:"Microphone access denied";so(T);return}if(i!==zr){l.getTracks().forEach(g=>g.stop());return}_o=l;const c=new AudioContext({sampleRate:To});bo=c;const f=c.sampleRate,d=c.createMediaStreamSource(l),m=Sv(),h=new WebSocket(m);ba=h,h.addEventListener("open",()=>{}),h.addEventListener("message",g=>{if(i!==zr||typeof g.data!="string")return;let T;try{T=JSON.parse(g.data)}catch{return}const A=T.type;if(A==="stt_session_ready")Dv(c,d,f,i),Dn.update(w=>({...w,connecting:!1,recording:!0,error:null,keepPromptSynced:!0}));else if(A==="transcript"){const w=String(T.text??""),E=T.is_final===!0;if(w)if(E)Yr=Yr?`${Yr} ${w}`.trim():w,Do(Yr,!0),Tv(Yr);else{const C=Yr?`${Yr} ${w}`.trim():w;Do(C,!0)}}else if(A==="error"){const w=String(T.message??"STT error");console.error("STT error:",w),so(w),Ar()}}),h.addEventListener("error",g=>{console.warn("WebSocket error",g),i===zr&&(so("Connection error"),Ar())}),h.addEventListener("close",()=>{i===zr&&(gd(),Dn.update(g=>({...g,recording:!1,connecting:!1,keepPromptSynced:!1})))})}async function Fv(){Ys();const e=lt(Dn);if(e.mode==="dictation"&&(e.recording||e.connecting)){Ar(),Dn.update(n=>({...n,mode:"idle",keepPromptSynced:!1,conversationActive:!1}));return}Dn.update(n=>({...n,mode:"dictation"})),await _d("dictation")}async function _l(){const e=lt(Dn);e.conversationActive&&(e.recording||e.connecting||(Dn.update(t=>({...t,mode:"dictation"})),await _d("dictation",!0)))}function bl(){Ys(),Ar(),Dn.update(e=>({...e,mode:"idle",conversationActive:!1}))}function yl(){const e=lt(Dn);if(!e.pendingSubmit)return null;const t=e.pendingSubmit;return Dn.update(n=>({...n,pendingSubmit:null})),t}const bd={subscribe:Dn.subscribe};function Cs(e){return typeof e=="object"&&e!==null}function $r(e){if(typeof e!="string")return;const t=e.trim();return t||void 0}function xl(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=e.trim();if(!t)return;const n=Number.parseInt(t,10);if(Number.isFinite(n))return n}}function Ga(e){if(!Cs(e))return null;const t=$r(e.url);if(!t)return null;const n={url:t},r=$r(e.title)??$r(e.name)??$r(e.label);r&&(n.title=r);const a=$r(e.content)??$r(e.snippet)??$r(e.text)??$r(e.description);a&&(n.content=a);const o=xl(e.startIndex??e.start_index);o!==void 0&&(n.startIndex=o);const u=xl(e.endIndex??e.end_index);return u!==void 0&&(n.endIndex=u),n}function Pv(e){const t=$r(e.type),n=t?t.toLowerCase():null,r=[];"url_citation"in e&&r.push(e.url_citation),"urlCitation"in e&&r.push(e.urlCitation),"citation"in e&&r.push(e.citation),"payload"in e&&r.push(e.payload),"data"in e&&r.push(e.data);for(const a of r){const o=Ga(a);if(o)return o}return n==="url_citation"||n==="url-citation"?Ga(e):null}function za(e,t,n){const r=`${n.url}|${n.startIndex??""}|${n.endIndex??""}`;t.has(r)||(t.add(r),e.push(n))}function Iv(e){const t=[],n=new Set,r=/\[([^\]]+)\]\(([^)]+)\)/g;let a;for(;(a=r.exec(e))!==null;){const o=a[1].trim(),u=a[2].trim();u&&!n.has(u)&&(n.add(u),t.push({url:u,title:o||void 0,startIndex:a.index,endIndex:a.index+a[0].length}))}return t}function pa(...e){const t=[],n=new Set,r=new WeakSet,a=[];function o(u){if(u!=null){if(Array.isArray(u)||Cs(u)){const i=u;if(r.has(i))return;r.add(i)}a.push(u)}}for(e.forEach(o);a.length>0;){const u=a.shift();if(u==null)continue;if(Array.isArray(u)){for(const c of u){if(c==null)continue;if(Array.isArray(c)||Cs(c)){o(c);continue}const f=Ga(c);f&&za(t,n,f)}continue}if(!Cs(u)){const c=Ga(u);c&&za(t,n,c);continue}const i=Pv(u);if(i)za(t,n,i);else{const c=Ga(u);c&&za(t,n,c)}o(u.meta),o(u.metadata),o(u.annotations),o(u.citations),o(u.url_citation),o(u.urlCitation),o(u.payload),o(u.data),o(u.message);const l=u.content??u.text;if(typeof l=="string"&&l.length>0){const c=Iv(l);for(const f of c)za(t,n,f)}for(const c of Object.values(u))if(c!=null)if(Array.isArray(c)||Cs(c))o(c);else{const f=Ga(c);f&&za(t,n,f)}}return t}function Lv(e,t){const n=e.trim(),r=[];n&&r.push({type:"text",text:n});for(const a of t)r.push({type:"image_url",image_url:{url:a.deliveryUrl},metadata:{attachment_id:a.id,display_url:a.displayUrl,mime_type:a.mimeType,size_bytes:a.sizeBytes,filename:a.metadata?.filename,session_id:a.sessionId,uploaded_at:a.uploadedAt,expires_at:a.expiresAt}});return r.length===1&&r[0].type==="text"?r[0].text:r.length>0?r:""}function ei(e){if(typeof e=="string"){const a=e;return{parts:a?[{type:"text",text:a}]:[],text:a}}const t=[],n=[];for(const a of e){if(a?.type==="text"&&typeof a.text=="string"){const o=a.text;t.push({type:"text",text:o}),n.push(o);continue}if(a?.type==="image_url"&&"image_url"in a){const o=a.image_url;if(!o||typeof o.url!="string")continue;const u=a.metadata??{},i=typeof u.display_url=="string"&&u.display_url?u.display_url:o.url,l=typeof u.attachment_id=="string"&&u.attachment_id?u.attachment_id:void 0,c=typeof u.mime_type=="string"&&u.mime_type?u.mime_type:void 0,f=typeof u.size_bytes=="number"&&Number.isFinite(u.size_bytes)?Number(u.size_bytes):void 0,d=typeof u.filename=="string"&&u.filename?u.filename:void 0,m=typeof u.session_id=="string"&&u.session_id?u.session_id:void 0,h=typeof u.uploaded_at=="string"&&u.uploaded_at?u.uploaded_at:void 0,g=typeof u.expires_at=="string"&&u.expires_at?u.expires_at:null;t.push({type:"image",url:o.url,displayUrl:i,attachmentId:l,mimeType:c,sizeBytes:f,fileName:d,sessionId:m,uploadedAt:h,expiresAt:g,metadata:a.metadata??null})}}const r=n.join(`
`).trim();return{parts:t,text:r}}function Mo(e){if(e==null)return[];if(Array.isArray(e))return e.flatMap(t=>Mo(t));if(typeof e=="string")return e.length>0?[{text:e}]:[];if(typeof e=="object"){const t=e,n=t.text,r=t.type,a=[];if(typeof n=="string"&&n.length>0){const u={text:n};typeof r=="string"&&r.length>0&&(u.type=r),a.push(u)}const o=["segments","segment","messages","message","content","contents","parts","steps","items"];for(const u of o){const i=t[u];i!==void 0&&a.push(...Mo(i))}return a}return[]}function Nv(e){if(!e||typeof e!="object")return{segments:[],hasPayload:!1};const t=e.choices;if(!Array.isArray(t))return{segments:[],hasPayload:!1};const n=[];let r=!1;for(const a of t){if(!a||typeof a!="object")continue;const o=a.delta;if(!(!o||typeof o!="object")&&"reasoning"in o){r=!0;const u=o.reasoning;n.push(...Mo(u))}}return{segments:n,hasPayload:r}}function Ov(e,t){const n=t.filter(u=>u.text.length>0);if(n.length===0)return e??[];if(!e||e.length===0)return n;const r=e.map(u=>u.text).join(""),a=n.map(u=>u.text).join("");if(a.startsWith(r)){const u=a.slice(r.length);if(u.length===0)return e;const i=[...e],l=i.length-1,c=n[n.length-1];return i[l]={text:`${i[l].text}${u}`,type:c.type??i[l].type},i}const o=[...e];for(const u of n)o.some(l=>l.text===u.text&&l.type===u.type)||o.push(u);return o}function wl(e){return e?.reduce((t,n)=>t+n.text.length,0)??0}async function $v(e,t={}){const{signal:n,onSession:r,onMessageDelta:a,onMetadata:o,onToolEvent:u,onDone:i,onError:l}=t,{onNotice:c}=t;await gp(e,{signal:n,onSession:r,onDone:i,onError:l,onNotice:c,onChunk(f,d){const m=d?.event??"message";if(m==="message"){const{text:h,fragments:g}=Rv(f),{segments:T,hasPayload:A}=Nv(f);if(!h&&g.length===0&&T.length===0&&!A)return;a?.({text:h,fragments:g,reasoningSegments:T,hasReasoningPayload:A,chunk:f});return}if(m==="metadata"&&d?.data){try{const h=JSON.parse(d.data);o?.(h)}catch(h){console.warn("Failed to parse metadata payload",h,d.data)}return}if(m==="tool"&&d?.data)try{const h=JSON.parse(d.data);u?.(h)}catch(h){console.warn("Failed to parse tool payload",h,d.data)}}})}function Rv(e){const t=[],n=[],r=e.choices??[];for(const a of r){const o=a.delta??{},u=o.content;if(typeof u=="string")u&&t.push(u);else if(Array.isArray(u))for(const l of u)l&&typeof l=="object"&&n.push(l);const i=o.images;if(Array.isArray(i))for(const l of i)l&&typeof l=="object"&&n.push(l)}return{text:t.join(""),fragments:n}}const gu={loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:null,lastSyncedModel:null,lastSavedAt:null,version:0};function zv(e){if(!e)return;const t={};for(const[n,r]of Object.entries(e))if(r!=null&&!(typeof r=="string"&&r.trim()==="")){if(Array.isArray(r)){if(r.length===0)continue;t[n]=r;continue}if(typeof r=="object"){if(Object.entries(r).length===0)continue;t[n]=r;continue}t[n]=r}return Object.keys(t).length>0?t:void 0}function Bv(){const e=ln({...gu});let t=0;async function n(){const l=lt(e);if(!l.dirty||!l.data)return l.dirty&&e.update(m=>({...m,dirty:!1})),!0;const c=l.version,f={model:l.data.model,provider:l.data.provider??null};"supports_tools"in l.data&&(f.supports_tools=l.data.supports_tools===void 0?null:l.data.supports_tools);const d=zv(l.data.parameters);d?f.parameters=d:f.parameters=null,e.update(m=>({...m,saving:!0,saveError:null}));try{const m=await ll(f);return e.update(h=>{const g=Date.now();return h.version!==c?{...h,saving:!1,saveError:null,lastSavedAt:g,lastSyncedModel:m.model}:{...h,saving:!1,saveError:null,dirty:!1,data:m,lastSyncedModel:m.model,lastSavedAt:g}}),!0}catch(m){const h=m instanceof Error?m.message:"Failed to save model settings.";return e.update(g=>({...g,saving:!1,saveError:h})),!1}}async function r(l){const c=++t;e.set({...gu,loading:!0});try{const f=await ep();let d=f;if(l&&f.model!==l&&(d=await ll({model:l,parameters:null,provider:null})),c!==t)return;e.set({loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:d,lastSyncedModel:d.model,lastSavedAt:Date.now(),version:0})}catch(f){if(c!==t)return;const d=f instanceof Error?f.message:"Failed to load model settings.";e.set({...gu,error:d})}}function a(l,c){e.update(f=>{if(!f.data)return f;const d={...f.data.parameters??{}};c==null?delete d[l]:d[l]=c;const m={...f.data,parameters:Object.keys(d).length>0?d:null};return{...f,data:m,dirty:!0,saveError:null,version:f.version+1}})}function o(l){e.update(c=>{if(!c.data||c.data.model===l)return c;const f={...c.data,model:l};return{...c,data:f,dirty:!0,saveError:null,version:c.version+1}})}function u(){e.update(l=>{if(!l.data)return l;const c={...l.data,parameters:null};return{...l,data:c,dirty:!0,saveError:null,version:l.version+1}})}function i(){e.update(l=>({...l,error:null,saveError:null}))}return{subscribe:e.subscribe,load:r,updateParameter:a,setModel:o,resetToDefaults:u,clearErrors:i,flushSave:n}}const mn=Bv();function Uv(e){return typeof e=="object"&&e!==null}const _u={messages:[],sessionId:null,isStreaming:!1,error:null,selectedModel:"openrouter/auto",isSaved:!1};function Ba(e){let t=null;const n=typeof globalThis<"u"?globalThis.crypto:void 0;if(n?.randomUUID)try{t=n.randomUUID()}catch(r){console.warn("Failed to generate UUID via crypto.randomUUID",r)}if(!t&&n?.getRandomValues){const r=new Uint32Array(4);n.getRandomValues(r),t=Array.from(r,a=>a.toString(16).padStart(8,"0")).join("")}return t||(t=`${Date.now().toString(36)}${Math.random().toString(36).slice(2,12)}`),`${e}_${t.replace(/-/g,"")}`}function yd(e,t){const n=[],r=new Set;for(const a of e){if(a.type!=="image")continue;const o=a.attachmentId??a.displayUrl??a.url;!o||r.has(o)||(r.add(o),n.push({id:a.attachmentId??o,sessionId:a.sessionId??t??"",mimeType:a.mimeType??"image/png",sizeBytes:a.sizeBytes??0,displayUrl:a.displayUrl||a.url,deliveryUrl:a.displayUrl||a.url,uploadedAt:a.uploadedAt??new Date().toISOString(),expiresAt:a.expiresAt??null,metadata:a.metadata??null}))}return n}function jv(e,t,n,r,a){if(!(Array.isArray(e)||r.length>0)){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const u=Array.isArray(e)?[...e]:[];if(!Array.isArray(e)){const c=typeof e=="string"?e:t;c&&u.push({type:"text",text:c})}if(r.length>0)u.push(...r);else if(n){const c=u[u.length-1];c&&c.type==="text"&&typeof c.text=="string"?c.text+=n:u.push({type:"text",text:n})}if(u.length===0){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const i=ei(u),l=yd(i.parts,a);return{content:u,text:i.text,attachments:l}}function kl(e){const t=[],n=new Set,r=e.details?.serverMessageId;if(typeof r=="number"){const a=String(r);t.push(a),n.add(a)}return e.id&&!n.has(e.id)&&t.push(e.id),t}function qv(e,t,n,r,a){const o={model:e.selectedModel,session_id:e.sessionId??void 0,messages:[{role:"user",content:t,client_message_id:r}],metadata:{client_assistant_message_id:a,client_parent_message_id:r}};if(n.enabled){const u={id:"web"};n.engine&&(u.engine=n.engine),n.maxResults!==null&&n.maxResults!==void 0&&(u.max_results=n.maxResults);const i=n.searchPrompt.trim();i&&(u.search_prompt=i),o.plugins=[u],n.contextSize&&(o.web_search_options={search_context_size:n.contextSize})}return o}function Hv(){const e=ln({..._u});let t=null;function n(...A){for(const w of A)if(typeof w=="string"&&w)return w;return null}async function r(A){const w=A.text??"",E=(A.attachments??[]).map(O=>({...O})),C=w.trim(),k=lt(e);if(k.isStreaming&&t?.abort(),!C&&E.length===0)return;const S=Ba("user"),x=Ba("assistant"),F=Lv(C,E),q=ei(F),H=E,P=Sr.current,L=qv(k,F,P,S,x),K=new Date().toISOString();e.update(O=>({...O,messages:[...O.messages,{id:S,role:"user",content:F,text:q.text,attachments:H,createdAt:K,createdAtUtc:K},{id:x,role:"assistant",content:"",text:"",attachments:[],pending:!0,createdAt:null,createdAtUtc:null,details:P.enabled?{webSearchConfig:{engine:P.engine,maxResults:P.maxResults,contextSize:P.contextSize,searchPrompt:P.searchPrompt}}:void 0}],isStreaming:!0,error:null}));const G=new AbortController;t=G;const ce=new Map;try{await $v(L,{signal:G.signal,onSession(O){e.update(ae=>({...ae,sessionId:O}))},onNotice(O){if(console.log("[NOTICE] Received notice:",O),!O||typeof O!="object"){console.warn("[NOTICE] Invalid payload:",O);return}const ae=O.type;console.log("[NOTICE] Notice type:",ae),console.log("[NOTICE] No handler for notice type:",ae)},onMessageDelta({text:O,fragments:ae,reasoningSegments:oe,hasReasoningPayload:se,chunk:Y}){e.update(R=>{const V=R.messages.map(ve=>{if(ve.id!==x)return ve;const Se=jv(ve.content,ve.text,O,ae,R.sessionId),te=Se.attachments.length>0?Se.attachments:ve.attachments,X={...ve,content:Se.content,text:Se.text,attachments:te??[]};if(oe.length>0||se){const ye=ve.details??{},ue={...ye,reasoningStatus:"streaming"};oe.length>0&&(ue.reasoning=Ov(ye.reasoning,oe)),X.details=ue}const J=Y?pa(Y):[];if(J.length>0){let ye=X.details;ye||(ye=ve.details?{...ve.details}:{});const ue=pa(ye?.citations??null,J);ue.length>0&&(ye.citations=ue,X.details=ye)}return X});return{...R,messages:V}})},onMetadata(O){e.update(ae=>{const oe=ae.messages.map(se=>{if(se.id!==x)return se;const Y=se.details??{},R=Mo(O.reasoning),V=R.length>0;let ve=Y.reasoning;V&&(ve=wl(R)>=wl(Y.reasoning)?R:Y.reasoning??R);const Se=V?se.pending?"streaming":"complete":Y.reasoningStatus??null,te=typeof O.message_id=="number"?O.message_id:Y.serverMessageId??null;let X=Y.meta??null,J=Y.citations??null;if(O.meta===null)X=null,J=null;else if(Uv(O.meta)){X=O.meta;const we=pa(O.meta,O);we.length>0&&(J=we)}else{const we=pa(O);we.length>0&&(J=we)}const ye=n(O.created_at,O.created_at_utc,se.createdAt??null),ue=n(O.created_at_utc,se.createdAtUtc??null);return{...se,details:{...Y,model:typeof O.model=="string"?O.model:Y.model??null,finishReason:typeof O.finish_reason=="string"?O.finish_reason:Y.finishReason??null,reasoning:ve,reasoningStatus:Se,usage:O.usage&&typeof O.usage=="object"?O.usage:Y.usage??null,routing:O.routing&&typeof O.routing=="object"?O.routing:Y.routing??null,toolCalls:Array.isArray(O.tool_calls)?O.tool_calls:Y.toolCalls??null,generationId:typeof O.generation_id=="string"?O.generation_id:Y.generationId??null,serverMessageId:te,meta:X,citations:J},createdAt:ye,createdAtUtc:ue}});return{...ae,messages:oe}})},onToolEvent(O){const ae=typeof O.call_id=="string"?O.call_id:Ba("tool"),oe=typeof O.status=="string"?O.status:"started",se=typeof O.name=="string"?O.name:"tool",Y=O.result,R=typeof Y=="string"?Y:Y&&typeof Y=="object"?JSON.stringify(Y):null,V=typeof O.message_id=="number"?O.message_id:null,ve=O.content,Se=lt(e);let te,X,J=[];if(Array.isArray(ve)){const ue=ei(ve);J=yd(ue.parts,Se.sessionId),te=ve,X=ue.text}else oe==="started"?(te=`Running ${se}â¦`,X=`Running ${se}â¦`):(te=R??`Tool ${se} responded.`,X=R??`Tool ${se} responded.`);let ye=ce.get(ae);if(ye)e.update(ue=>{const we=ue.messages.map(ee=>{if(ee.id!==ye)return ee;const Ue={...ee.details??{},toolName:se,toolStatus:oe,toolResult:R??ee.details?.toolResult??null,serverMessageId:V??ee.details?.serverMessageId??null},qe=n(O.created_at,O.created_at_utc,ee.createdAt??null),ot=n(O.created_at_utc,ee.createdAtUtc??null);return{...ee,content:te,text:X,attachments:J.length>0?J:ee.attachments??[],pending:oe==="started",details:Ue,createdAt:qe,createdAtUtc:ot??qe??ee.createdAtUtc??null}});return{...ue,messages:we}});else{ye=Ba("tool"),ce.set(ae,ye);const ue=new Date().toISOString(),we=n(O.created_at,O.created_at_utc,ue),ee=n(O.created_at_utc,we??ue);e.update(Ue=>({...Ue,messages:[...Ue.messages,{id:ye,role:"tool",content:te,text:X,attachments:J,pending:oe==="started",details:{toolName:se,toolStatus:oe,toolResult:R??null,serverMessageId:V},createdAt:we,createdAtUtc:ee}]}))}},onDone(){e.update(O=>{const ae=O.messages.map(oe=>{if(oe.id!==x)return oe;const se=oe.details?{...oe.details,reasoningStatus:oe.details.reasoning?"complete":oe.details.reasoningStatus??null}:void 0,Y=new Date().toISOString(),R=oe.createdAt??Y;return{...oe,pending:!1,details:se,createdAt:R,createdAtUtc:oe.createdAtUtc??R}});return{...O,isStreaming:!1,messages:ae}})},onError(O){console.error("Chat stream error",O),e.update(ae=>({...ae,isStreaming:!1,error:O.message??"Unknown error",messages:ae.messages.filter(oe=>oe.id!==x&&!(oe.role==="tool"&&oe.pending))}))}})}catch(O){if(O instanceof DOMException&&O.name==="AbortError")return;const ae=O instanceof Error?O.message:String(O);e.update(oe=>({...oe,isStreaming:!1,error:ae,messages:oe.messages.filter(se=>se.id!==x&&!(se.role==="tool"&&se.pending))}))}finally{t=null}}function a(){t&&(t.abort(),t=null,e.update(A=>{const w=A.messages.filter(E=>!(E.role==="assistant"&&E.pending&&!E.text||E.role==="tool"&&E.pending));return{...A,isStreaming:!1,messages:w}}))}function o(){t?.abort(),t=null,e.update(A=>({..._u,selectedModel:A.selectedModel}))}async function u(){const A=lt(e),w={model:A.selectedModel};if(!A.sessionId){const C=Ba("session");e.update(k=>({...k,sessionId:C,isSaved:!0}));try{await dl(C,{llmSettings:w})}catch(k){console.error("Failed to save conversation",k),e.update(S=>({...S,isSaved:!1}))}return}const E=!A.isSaved;e.update(C=>({...C,isSaved:E}));try{E?await dl(A.sessionId,{llmSettings:w}):await Tp(A.sessionId)}catch(C){console.error("Failed to toggle save state",C),e.update(k=>({...k,isSaved:!E}))}}async function i(A){t?.abort(),t=null;try{const w=await Ap(A),E=w.messages.filter(S=>S.role!=="system").map(S=>{const x=S.content??"",F=typeof x=="string"?x:"";return{id:S.client_message_id||`db-${S.message_id??Math.random()}`,role:S.role,content:x,text:F,attachments:[],pending:!1,createdAt:S.created_at??null,createdAtUtc:S.created_at_utc??null,details:S.tool_call_id?{toolName:S.name??void 0}:void 0}}),k=w.metadata.llm_settings?.model;if(e.update(S=>({..._u,selectedModel:k??S.selectedModel,sessionId:A,messages:E,isSaved:w.metadata.saved})),k)try{await mn.load(k)}catch(S){console.warn("Failed to load model settings for restored model",S)}}catch(w){console.error("Failed to load session",w),e.update(E=>({...E,error:w instanceof Error?w.message:"Failed to load conversation"}))}}function l(A,w){const E=A.messages.findIndex(x=>x.id===w);if(E===-1)return A;const C=A.messages.slice(),k=[],[S]=C.splice(E,1);if(!S)return A;if(S.role==="assistant")for(k.push(S.id);E<C.length&&C[E].role==="tool";)C.splice(E,1);else if(S.role==="user")for(;E<C.length&&C[E].role!=="user"&&C[E].role!=="system";){const[x]=C.splice(E,1);x?.role==="assistant"&&x.id&&k.push(x.id)}return{...A,messages:C}}async function c(A,w){let E=null;const C=new Set;for(const k of w){if(k.role==="assistant"||k.role==="tool")continue;const S=kl(k);let x=!1;for(const F of S)if(!(!F||C.has(F))){C.add(F);try{await il(A,F),x=!0;break}catch(q){if(q instanceof br&&q.status===404)continue;E||(E=q instanceof Error?q.message:"Failed to delete previous message.");break}}}return E}async function f(A){const w=lt(e);if(w.isStreaming)return;const E=w.messages.find(C=>C.id===A);if(E){if(w.sessionId){const C=kl(E);let k=null;for(const S of C)try{await il(w.sessionId,S),k=null;break}catch(x){if(x instanceof br&&x.status===404)continue;k=x instanceof Error?x.message:"Failed to delete message.";break}k&&e.update(S=>({...S,error:k}))}e.update(C=>l(C,A))}}async function d(A){const w=lt(e),E=w.messages.findIndex(x=>x.id===A);if(E===-1)return;const C=w.messages[E];if(C.role!=="user")return;w.isStreaming&&(t?.abort(),t=null);const k=w.messages.slice(E),S=w.messages.slice(0,E);if(e.update(x=>({...x,messages:S,isStreaming:!1,error:null})),w.sessionId){const x=await c(w.sessionId,k);x&&e.update(F=>({...F,error:x}))}await r({text:C.text,attachments:(C.attachments??[]).map(x=>({...x}))})}async function m(A,w){const E=w.trim();if(!E)return;const C=lt(e),k=C.messages.findIndex(q=>q.id===A);if(k===-1)return;const S=C.messages[k];if(S.role!=="user")return;C.isStreaming&&(t?.abort(),t=null);const x=C.messages.slice(k),F=C.messages.slice(0,k);if(e.update(q=>({...q,messages:F,isStreaming:!1,error:null})),C.sessionId){const q=await c(C.sessionId,x);q&&e.update(H=>({...H,error:q}))}await r({text:E,attachments:(S.attachments??[]).map(q=>({...q}))})}function h(){e.update(A=>({...A,error:null}))}function g(A){const w=lt(e);e.update(E=>({...E,selectedModel:A}));try{mn.clearErrors(),mn.load(A)}catch{}w.isSaved&&w.sessionId&&Mp(w.sessionId,{model:A}).catch(E=>{console.warn("Failed to persist model change for saved session",E)})}function T(){const A=lt(e);if(A.sessionId)return A.sessionId;const w=Ba("session");return e.update(E=>({...E,sessionId:w})),w}return{subscribe:e.subscribe,sendMessage:r,cancelStream:a,clearConversation:o,deleteMessage:f,retryMessage:d,editMessage:m,clearError:h,setModel:g,ensureSessionId:T,toggleSaved:u,loadSession:i}}const va=Hv();var Wv=M('<span class="chip-status svelte-1ct3ltt">Uploadingâ¦</span>'),Vv=M('<span class="chip-status svelte-1ct3ltt"> </span>'),Gv=M('<div><img alt="Attachment preview" loading="lazy" class="svelte-1ct3ltt"/> <!> <!> <button type="button" class="remove-attachment svelte-1ct3ltt" aria-label="Remove image">Ã</button></div>'),Zv=M('<div class="attachment-strip svelte-1ct3ltt"></div>'),Kv=M('<div class="composer-error svelte-1ct3ltt" role="alert"> </div>'),Yv=M('<div class="composer-error voice svelte-1ct3ltt" role="alert"> </div>'),Jv=M('<button type="button" class="icon-button leading svelte-1ct3ltt" aria-label="Attach image"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 2v14M2 9h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button>'),Xv=M('<button type="button" class="stop-inline svelte-1ct3ltt"><span aria-hidden="true" class="stop-indicator svelte-1ct3ltt"></span> Stop</button>'),Qv=M('<button type="button" class="icon-button leading svelte-1ct3ltt" aria-label="Attach image"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 2v14M2 9h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button>'),eh=M('<form class="composer svelte-1ct3ltt"><div class="composer-content svelte-1ct3ltt"><!> <!> <!> <div><!> <input class="sr-only svelte-1ct3ltt" type="file" accept="image/png,image/jpeg,image/webp,image/gif" multiple/> <textarea rows="1" class="svelte-1ct3ltt"></textarea> <div class="composer-actions svelte-1ct3ltt"><!> <!> <button type="button" class="icon-button svelte-1ct3ltt" aria-label="Start dictation" title="Start dictation"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 3a2 2 0 0 1 2 2v4a2 2 0 1 1-4 0V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.5"></path><path d="M5 8.5a4 4 0 0 0 8 0M9 12.5V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button type="submit" class="send-button svelte-1ct3ltt" title="Send message"><span class="send-label svelte-1ct3ltt">Send</span> <!></button></div></div></div></form>');function th(e,t){Nt(t,!1);const n=()=>Dt(bd,"$speechState",r),[r,a]=yr(),o=$(),u=$(),i=$(),l=$(),c=$(),f=$(),d=$(),m=$();let h=le(t,"prompt",12,""),g=le(t,"isStreaming",8,!1),T=le(t,"presetAttachments",24,()=>[]),A=le(t,"pwaMode",8,!1);const w=pn(),E=new Set(["image/png","image/jpeg","image/webp","image/gif"]),C=10*1024*1024,k=4;let S=$([]),x=$(null),F=$(null),q=$(null),H=$(null);function P(){return globalThis.crypto?.randomUUID?`attachment_${globalThis.crypto.randomUUID().replace(/-/g,"")}`:`attachment_${Date.now().toString(36)}${Math.random().toString(36).slice(2,10)}`}function L(j){if(!(!j||typeof j!="string")&&j.startsWith("blob:"))try{URL.revokeObjectURL(j)}catch{}}function K(j){if(V(),!j||j.length===0){_(x,null);return}const pe=[];for(const ge of j){if(!ge)continue;const ke=ge.displayUrl??ge.deliveryUrl??null;ke&&pe.push({id:ge.id??P(),file:null,previewUrl:ke,status:"ready",resource:{...ge,metadata:ge.metadata?{...ge.metadata}:null}})}_(S,pe),_(x,null)}function G(){if(g())return;const j=h().trim();if(s(S).some(Ie=>Ie.status==="uploading")){_(x,"Please wait for uploads to finish.");return}if(s(S).some(Ie=>Ie.status==="error")){_(x,"Remove failed uploads before sending.");return}const ke=s(S).filter(Ie=>Ie.status==="ready"&&Ie.resource).map(Ie=>Ie.resource);!j&&ke.length===0||(w("submit",{text:j,attachments:ke}),h(""),_(x,null),V())}function ce(j){j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),G())}function O(){w("cancel")}function ae(){g()&&n().mode!=="dictation"||n().connecting&&!n().recording&&n().mode!=="dictation"||w("startDictation")}function oe(){g()||(_(x,null),s(F)?.click())}function se(j){const pe=j.target,ge=pe.files?Array.from(pe.files):[];if(pe.value="",!ge.length)return;const ke=k-s(S).length;if(ke<=0){_(x,`You can attach up to ${k} images.`);return}const Ie=va.ensureSessionId(),Le=ge.slice(0,ke);ge.length>ke&&_(x,`Only ${k} images allowed per message.`);for(const Ze of Le){if(!E.has(Ze.type)){_(x,"Unsupported image format.");continue}if(Ze.size>C){_(x,"Images must be 10 MB or less.");continue}const Ke=URL.createObjectURL(Ze),Qe={id:P(),file:Ze,previewUrl:Ke,status:"uploading"};_(S,[...s(S),Qe]),Y(Qe,Ie)}}async function Y(j,pe){if(j.file)try{const{attachment:ge}=await hp(j.file,pe);_(S,s(S).map(ke=>ke.id===j.id?{...ke,status:"ready",resource:ge}:ke))}catch(ge){const ke=ge instanceof Error?ge.message:"Failed to upload image.";_(S,s(S).map(Ie=>Ie.id===j.id?{...Ie,status:"error",error:ke}:Ie))}}function R(j){_(S,s(S).filter(pe=>pe.id===j?(L(pe.previewUrl),!1):!0)),s(S).length||_(x,null)}function V(){s(S).forEach(j=>{L(j.previewUrl)}),_(S,[])}ts(()=>{V()}),xe(()=>z(h()),()=>{_(o,h().trim())}),xe(()=>s(S),()=>{_(u,s(S).some(j=>j.status==="uploading"))}),xe(()=>s(S),()=>{_(i,s(S).some(j=>j.status==="error"))}),xe(()=>s(S),()=>{_(l,s(S).some(j=>j.status==="ready"))}),xe(()=>(z(g()),s(u),s(i),s(o),s(l)),()=>{_(c,g()||s(u)||s(i)||!s(o)&&!s(l))}),xe(()=>(z(T()),s(H)),()=>{T()!==s(H)&&(K(T()),_(H,T()))}),xe(()=>n(),()=>{_(f,n().mode==="dictation"&&(n().recording||n().connecting))}),xe(()=>n(),()=>{_(d,n().connecting&&!n().recording)}),xe(()=>n(),()=>{_(m,n().error)}),fn(),Ut();var ve=eh(),Se=v(ve),te=v(Se);{var X=j=>{var pe=Zv();Lt(pe,5,()=>s(S),ge=>ge.id,(ge,ke)=>{var Ie=Gv();let Le;var Ze=v(Ie),Ke=b(Ze,2);{var Qe=gt=>{var Rt=Wv();y(gt,Rt)};I(Ke,gt=>{s(ke),p(()=>s(ke).status==="uploading")&&gt(Qe)})}var ft=b(Ke,2);{var et=gt=>{var Rt=Vv(),vn=v(Rt);B(()=>W(vn,(s(ke),p(()=>s(ke).error??"Upload failed.")))),y(gt,Rt)};I(ft,gt=>{s(ke),p(()=>s(ke).status==="error")&&gt(et)})}var Mt=b(ft,2);B(gt=>{Le=At(Ie,1,"attachment-chip svelte-1ct3ltt",null,Le,gt),ie(Ze,"src",(s(ke),p(()=>s(ke).previewUrl??s(ke).resource?.displayUrl??s(ke).resource?.deliveryUrl??"")))},[()=>({uploading:s(ke).status==="uploading",error:s(ke).status==="error"})]),N("click",Mt,()=>R(s(ke).id)),y(ge,Ie)}),y(j,pe)};I(te,j=>{s(S),p(()=>s(S).length)&&j(X)})}var J=b(te,2);{var ye=j=>{var pe=Kv(),ge=v(pe);B(()=>W(ge,s(x))),y(j,pe)};I(J,j=>{s(x)&&j(ye)})}var ue=b(J,2);{var we=j=>{var pe=Yv(),ge=v(pe);B(()=>W(ge,s(m))),y(j,pe)};I(ue,j=>{s(m)&&j(we)})}var ee=b(ue,2);let Ue;var qe=v(ee);{var ot=j=>{var pe=Jv();B(()=>pe.disabled=(z(g()),s(S),p(()=>g()||s(S).length>=k))),N("click",pe,oe),y(j,pe)};I(qe,j=>{A()||j(ot)})}var je=b(qe,2);qn(je,j=>_(F,j),()=>s(F));var Me=b(je,2);qn(Me,j=>_(q,j),()=>s(q)),ur(()=>sr(Me,h)),ur(()=>N("keydown",Me,ce)),ur(()=>N("focus",Me,()=>{w("inputFocus")})),Sa(Me,(j,pe)=>dv?.(j,pe),h);var at=b(Me,2),be=v(at);{var Re=j=>{var pe=Xv();N("click",pe,O),y(j,pe)};I(be,j=>{g()&&j(Re)})}var $e=b(be,2);{var Ge=j=>{var pe=Qv();B(()=>pe.disabled=(z(g()),s(S),p(()=>g()||s(S).length>=k))),N("click",pe,oe),y(j,pe)};I($e,j=>{A()&&j(Ge)})}var ut=b($e,2),$t=b(ut,2),fe=b(v($t),2);iv(fe,{size:16,"aria-hidden":"true","stroke-width":2}),B(j=>{Ue=At(ee,1,"input-shell svelte-1ct3ltt",null,Ue,j),ie(Me,"placeholder",g()?"Waiting for responseâ¦":"Type hereâ¦"),ie(Me,"aria-disabled",g()),ut.disabled=g()&&!s(f)||s(d)&&!s(f),ie(ut,"aria-pressed",s(f)?"true":"false"),ie(ut,"data-active",s(f)?"true":"false"),$t.disabled=s(c)},[()=>({"pwa-layout":A()})]),N("change",je,se),N("click",ut,ae),N("submit",ve,ed(G)),y(e,ve),Ot(),a()}var nh=M('<div><button type="button" class="model-settings-backdrop"></button> <div role="dialog" aria-modal="true" tabindex="-1"><header class="model-settings-header"><div class="model-settings-heading"><!></div> <div class="model-settings-actions"><!> <button type="button" class="btn btn-ghost btn-small">Close</button></div></header> <section><!></section> <!></div></div>');function Wr(e,t){Nt(t,!1);let n=le(t,"open",8,!1),r=le(t,"labelledBy",8,null),a=le(t,"modalClass",8,""),o=le(t,"bodyClass",8,""),u=le(t,"layerClass",8,""),i=le(t,"closeLabel",8,"Close modal"),l=le(t,"closeOnBackdrop",8,!0),c=le(t,"focusOnOpen",8,!0),f=le(t,"closeDisabled",8,!1);const d=pn();let m=$(null),h=$(!1);function g(k){!l()||f()||k.target===k.currentTarget&&d("close")}function T(){f()||d("close")}function A(k){!n()||f()||k.key==="Escape"&&(k.preventDefault(),d("close"))}xe(()=>(z(n()),s(h),z(c()),s(m)),()=>{n()&&!s(h)?(_(h,!0),c()&&s(m)&&s(m).focus()):!n()&&s(h)&&_(h,!1)}),fn(),Ut();var w=Ae();N("keydown",Os,A);var E=de(w);{var C=k=>{var S=nh(),x=v(S),F=b(x,2),q=v(F),H=v(q),P=v(H);$n(P,t,"heading",{});var L=b(H,2),K=v(L);$n(K,t,"actions",{});var G=b(K,2),ce=b(q,2),O=v(ce);$n(O,t,"default",{});var ae=b(ce,2);$n(ae,t,"footer",{}),qn(F,oe=>_(m,oe),()=>s(m)),B((oe,se,Y)=>{At(S,1,oe),ie(x,"aria-label",i()),At(F,1,se),ie(F,"aria-labelledby",r()||void 0),ie(G,"aria-label",i()),G.disabled=f(),At(ce,1,Y)},[()=>mo((z(u()),p(()=>`model-settings-layer ${u()}`.trim()))),()=>mo((z(a()),p(()=>`model-settings-modal ${a()}`.trim()))),()=>mo((z(o()),p(()=>`model-settings-body ${o()}`.trim())))]),N("click",x,g),N("click",G,T),y(k,S)};I(E,k=>{n()&&k(C)})}y(e,w),Ot()}var rh=M('<p class="status">Loadingâ¦</p>'),ah=M('<p class="status error"> </p>'),sh=M('<pre class="svelte-1uwhn5q"> </pre>'),oh=M('<div class="generation-detail-row svelte-1uwhn5q"><dt class="svelte-1uwhn5q"> </dt> <dd class="svelte-1uwhn5q"><!></dd></div>'),uh=M('<dl class="generation-modal-details svelte-1uwhn5q"></dl>'),ih=M('<p class="status">No details available.</p>'),lh=M('<p class="model-settings-subtitle"> </p>'),ch=M('<h2 id="generation-modal-title">Generation details</h2> <!>',1);function dh(e,t){Nt(t,!1);const n=pn();let r=le(t,"open",8,!1),a=le(t,"generationId",8,null),o=le(t,"loading",8,!1),u=le(t,"error",8,null),i=le(t,"data",8,null),l=le(t,"fields",8,sd),c=$([]);function f(){n("close")}xe(()=>(z(i()),z(l()),fl),()=>{_(c,i()?l().map(g=>({field:g,display:fl(i()?.[g.key])})):[])}),fn(),Ut();var d=Ae(),m=de(d);{var h=g=>{Wr(g,{get open(){return r()},labelledBy:"generation-modal-title",modalClass:"generation-modal",closeLabel:"Close generation details",$$events:{close:f},children:(T,A)=>{var w=Ae(),E=de(w);{var C=S=>{var x=rh();y(S,x)},k=S=>{var x=Ae(),F=de(x);{var q=P=>{var L=ah(),K=v(L);B(()=>W(K,u())),y(P,L)},H=P=>{var L=Ae(),K=de(L);{var G=O=>{var ae=uh();Lt(ae,5,()=>s(c),oe=>oe.field.key,(oe,se)=>{var Y=oh(),R=v(Y),V=v(R),ve=b(R,2),Se=v(ve);{var te=J=>{var ye=sh(),ue=v(ye);B(()=>W(ue,(s(se),p(()=>s(se).display.text)))),y(J,ye)},X=J=>{var ye=nn();B(()=>W(ye,(s(se),p(()=>s(se).display.text)))),y(J,ye)};I(Se,J=>{s(se),p(()=>s(se).display.isMultiline)?J(te):J(X,!1)})}B(()=>W(V,(s(se),p(()=>s(se).field.label)))),y(oe,Y)}),y(O,ae)},ce=O=>{var ae=ih();y(O,ae)};I(K,O=>{i()?O(G):O(ce,!1)},!0)}y(P,L)};I(F,P=>{u()?P(q):P(H,!1)},!0)}y(S,x)};I(E,S=>{o()?S(C):S(k,!1)})}y(T,w)},$$slots:{default:!0,heading:(T,A)=>{var w=ch(),E=b(de(w),2);{var C=k=>{var S=lh(),x=v(S);B(()=>W(x,`ID: ${a()??""}`)),y(k,S)};I(E,k=>{a()&&k(C)})}y(T,w)}}})};I(m,g=>{r()&&g(h)})}y(e,d),Ot()}var fh=M('<span class="editor-status svelte-hszu4t">Updated</span>'),ph=M('<form class="message-editor svelte-hszu4t"><div class="editor-shell svelte-hszu4t"><div class="editor-header svelte-hszu4t"><span>Edit message</span> <!></div> <textarea rows="3" placeholder="Update your message..." class="svelte-hszu4t"></textarea> <div class="editor-actions svelte-hszu4t"><button type="button" class="button secondary svelte-hszu4t">Cancel</button> <button type="submit" class="button primary svelte-hszu4t"><!></button></div></div></form>');function vh(e,t){Nt(t,!1);const n=$(),r=$(),a=$();let o=le(t,"value",12,""),u=le(t,"originalValue",8,""),i=le(t,"saving",8,!1),l=le(t,"disabled",8,!1);const c=pn();let f=$(null);Zs(()=>{s(f)&&(s(f).focus(),s(f).setSelectionRange(0,s(f).value.length))});function d(){s(r)&&c("submit",{text:s(n)})}function m(){i()||c("cancel")}function h(P){P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),d())}xe(()=>z(o()),()=>{_(n,o().trim())}),xe(()=>(s(n),z(i()),z(l())),()=>{_(r,!!s(n)&&!i()&&!l())}),xe(()=>(s(n),z(u())),()=>{_(a,s(n)!==u().trim())}),fn(),Ut();var g=ph(),T=v(g),A=v(T),w=b(v(A),2);{var E=P=>{var L=fh();y(P,L)};I(w,P=>{s(a)&&P(E)})}var C=b(A,2);qn(C,P=>_(f,P),()=>s(f));var k=b(C,2),S=v(k),x=b(S,2),F=v(x);{var q=P=>{var L=nn("Sendingâ¦");y(P,L)},H=P=>{var L=nn("Save & Send");y(P,L)};I(F,P=>{i()?P(q):P(H,!1)})}B(()=>{C.disabled=i()||l(),S.disabled=i(),x.disabled=!s(r)}),sr(C,o),N("keydown",C,h),N("click",S,m),N("submit",g,ed(d)),y(e,g),Ot()}const Sl={open:!1,messageId:null,citations:[]};function xd(){const{subscribe:e,set:t,update:n}=ln(Sl);function r(o,u){t({open:!0,messageId:o,citations:u})}function a(){t(Sl)}return{subscribe:e,openWithCitations:r,close:a}}xd();const bu={open:!1,messageId:null,segments:[],status:null};function hh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n],a=t[n];if(r.text!==a.text||r.type!==a.type)return!1}return!0}function mh(){const{subscribe:e,set:t,update:n}=ln(bu);function r(i,l,c){t({open:!0,messageId:i,segments:l??[],status:c??null})}function a(i){r(i.id,i.details?.reasoning,i.details?.reasoningStatus)}function o(){t(bu)}function u(i){n(l=>{if(!l.open||!l.messageId)return l;const c=i.find(m=>m.id===l.messageId);if(!c)return bu;const f=c.details?.reasoning??[],d=c.details?.reasoningStatus??null;return hh(f,l.segments)&&d===l.status?l:{...l,segments:f,status:d}})}return{subscribe:e,openWithDetails:r,openForMessage:a,close:o,syncFromMessages:u}}const wd="tool",gh=["prompt_tokens","input_tokens","prompt","input","promptTokens","inputTokens"],_h=["completion_tokens","output_tokens","completion","output","completionTokens","outputTokens"],bh=["total_tokens","total","totalTokens"];function yh(e,t=wd){const n=[],r={},a={};for(let o=0;o<e.length;o+=1){const u=e[o];if(a[u.id]=o,u.role==="assistant"){const i=u.details?.toolCalls,l=Array.isArray(i)&&i.length>0;let c=0,f=o+1;for(;kd(e[f],t);)c+=1,f+=1;const d=l?i.length:0,m=Math.max(d,c),h=m>0,g=xh(u.details?.usage);r[u.id]={used:h,count:m,tokens:g}}u.role!==t&&n.push(u)}return{visibleMessages:n,assistantToolUsage:r,messageIndexMap:a}}function El(e,t,n,r=wd){const a=t[n];if(typeof a!="number")return[];const o=e[a];if(!o||o.role!=="assistant")return[];const u=[],i=Array.isArray(o.details?.toolCalls)?o.details?.toolCalls:[];let l=a+1;for(;kd(e[l],r);){const c=e[l],f=c.details??{},d=i[u.length],h=(typeof f?.toolName=="string"?f.toolName:null)??yu(d)??"Tool",g=typeof f?.toolStatus=="string"?f.toolStatus:null,T=typeof f?.toolResult=="string"?f.toolResult:null,A=typeof c.content=="string"?c.content:null,w=T??A??xu(d),E=wu(d);u.push({id:c.id,name:h,status:g,input:E,result:w}),l+=1}return u.length===0&&i.length>0?i.forEach((c,f)=>{u.push({id:`${o.id}-metadata-${f}`,name:yu(c)??`Tool ${f+1}`,status:null,input:wu(c),result:xu(c)})}):u.length>0&&i.length>0&&u.forEach((c,f)=>{const d=i[f];d&&((!c.name||c.name==="Tool")&&(c.name=yu(d)??c.name),c.input||(c.input=wu(d)),c.result||(c.result=xu(d)))}),u}function kd(e,t){return e?.role===t}function yu(e){if(!e)return null;const t=e.name;if(typeof t=="string"&&t.trim().length>0)return t;const n=e.function;if(n&&typeof n=="object"){const r=n.name;if(typeof r=="string"&&r.trim().length>0)return r}return null}function xu(e){if(!e)return null;const t=e.result;if(typeof t=="string")return t;if(t&&typeof t=="object")try{return JSON.stringify(t,null,2)}catch(r){console.warn("Failed to stringify tool result",r)}const n=e.function;if(n&&typeof n=="object"){const r=n.arguments;if(typeof r=="string")return r;if(r&&typeof r=="object")try{return JSON.stringify(r,null,2)}catch(a){console.warn("Failed to stringify tool arguments",a)}}return null}function wu(e){if(!e)return null;const t=e.arguments,n=Cl(t);if(n)return n;const r=e.function;if(r&&typeof r=="object"){const a=Cl(r.arguments);if(a)return a}return null}function xh(e){if(!e||typeof e!="object")return null;const t=e,n=ku(t,gh),r=ku(t,_h);let a=ku(t,bh);return a==null&&(n!=null||r!=null)&&(a=(n??0)+(r??0)),n==null&&r==null&&a==null?null:{inputTokens:n,outputTokens:r,totalTokens:a}}function ku(e,t){for(const n of t){if(!(n in e))continue;const r=wh(e[n]);if(r!=null)return r}return null}function wh(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function Cl(e){if(typeof e=="string"){const t=e.trim();if(!t)return null;try{const n=JSON.parse(t);return typeof n=="string"?n:JSON.stringify(n,null,2)}catch{return t}}if(e&&typeof e=="object")try{return JSON.stringify(e,null,2)}catch(t){console.warn("Failed to stringify tool arguments",t,e)}return null}const Al={open:!1,messageId:null,tools:[]};function kh(){const{subscribe:e,set:t,update:n}=ln(Al);function r(i,l){t({open:!0,messageId:i,tools:l})}function a(i,l,c,f){const d=El(i,l,c,f);r(c,d)}function o(){t(Al)}function u(i,l,c){n(f=>{if(!f.open||!f.messageId)return f;const d=El(i,l,f.messageId,c);return d.length===f.tools.length&&d.every((h,g)=>{const T=f.tools[g];return T?.id===h.id&&T?.name===h.name&&T?.status===h.status&&T?.input===h.input&&T?.result===h.result})?f:{...f,tools:d}})}return{subscribe:e,openWithEntries:r,openForMessage:a,close:o,syncEntries:u}}const Tl={open:!1,messageId:null,details:null};function Sh(){const{subscribe:e,set:t,update:n}=ln(Tl);function r(u,i){t({open:!0,messageId:u,details:i??{engine:null,maxResults:null,contextSize:null,searchPrompt:null}})}function a(u){const i=u.details?.webSearchConfig;if(i&&typeof i=="object"){const l={engine:i.engine??null,maxResults:i.maxResults??null,contextSize:i.contextSize??null,searchPrompt:i.searchPrompt??null};r(u.id,l)}else r(u.id,null)}function o(){t(Tl)}return{subscribe:e,openWithDetails:r,openForMessage:a,close:o}}var Eh=M('<p class="status svelte-15rpl30">No web citations found.</p>'),Ch=M('<h3 class="citations-modal-title svelte-15rpl30"> </h3>'),Ah=M('<p class="citations-modal-content svelte-15rpl30"> </p>'),Th=M("<span> </span>"),Dh=M("<span> </span>"),Mh=M('<div class="citations-modal-meta svelte-15rpl30"><!> <!></div>'),Fh=M('<li class="citations-modal-item svelte-15rpl30"><div class="citations-modal-header svelte-15rpl30"><span class="citations-modal-number svelte-15rpl30"></span> <a class="citations-modal-link svelte-15rpl30" target="_blank" rel="noreferrer">Visit source</a></div> <!> <div class="citations-modal-url svelte-15rpl30"> </div> <!> <!></li>'),Ph=M('<ul class="citations-modal-list svelte-15rpl30"></ul>'),Ih=M('<p class="model-settings-subtitle"> </p>'),Lh=M('<h2 id="citations-modal-title">Web Citations</h2> <!>',1);function Nh(e,t){Nt(t,!1);const n=pn();let r=le(t,"open",8,!1),a=le(t,"messageId",8,null),o=le(t,"citations",24,()=>[]);function u(){n("close")}Ut();var i=Ae(),l=de(i);{var c=f=>{Wr(f,{get open(){return r()},labelledBy:"citations-modal-title",modalClass:"citations-modal",bodyClass:"citations-modal-body",closeLabel:"Close web citations",$$events:{close:u},children:(d,m)=>{var h=Ae(),g=de(h);{var T=w=>{var E=Eh();y(w,E)},A=w=>{var E=Ph();Lt(E,5,o,Jn,(C,k,S)=>{var x=Fh(),F=v(x),q=v(F);q.textContent=`Citation ${S+1}`;var H=b(q,2),P=b(F,2);{var L=se=>{var Y=Ch(),R=v(Y);B(()=>W(R,(s(k),p(()=>s(k).title)))),y(se,Y)};I(P,se=>{s(k),p(()=>s(k).title)&&se(L)})}var K=b(P,2),G=v(K),ce=b(K,2);{var O=se=>{var Y=Ah(),R=v(Y);B(()=>W(R,(s(k),p(()=>s(k).content)))),y(se,Y)};I(ce,se=>{s(k),p(()=>s(k).content)&&se(O)})}var ae=b(ce,2);{var oe=se=>{var Y=Mh(),R=v(Y);{var V=te=>{var X=Th(),J=v(X);B(()=>W(J,`Start: ${s(k),p(()=>s(k).startIndex)??""}`)),y(te,X)};I(R,te=>{s(k),p(()=>s(k).startIndex!==void 0)&&te(V)})}var ve=b(R,2);{var Se=te=>{var X=Dh(),J=v(X);B(()=>W(J,`End: ${s(k),p(()=>s(k).endIndex)??""}`)),y(te,X)};I(ve,te=>{s(k),p(()=>s(k).endIndex!==void 0)&&te(Se)})}y(se,Y)};I(ae,se=>{s(k),p(()=>s(k).startIndex!==void 0||s(k).endIndex!==void 0)&&se(oe)})}B(()=>{ie(H,"href",(s(k),p(()=>s(k).url))),W(G,(s(k),p(()=>s(k).url)))}),y(C,x)}),y(w,E)};I(g,w=>{z(o()),p(()=>o().length===0)?w(T):w(A,!1)})}y(d,h)},$$slots:{default:!0,heading:(d,m)=>{var h=Lh(),g=b(de(h),2);{var T=A=>{var w=Ih(),E=v(w);B(()=>W(E,`Message ID: ${a()??""}`)),y(A,w)};I(g,A=>{a()&&A(T)})}y(d,h)}}})};I(l,f=>{r()&&f(c)})}y(e,i),Ot()}const Dl='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path><path d="M16 4h2a2 2 0 0 1 2 2v4"></path><path d="M21 14H11"></path><path d="m15 10-4 4 4 4"></path></svg>',Oh='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>',$h=2e3,Rh="copy-code-button",Ml="copy-code-block";function zh(e){e.classList.add(Ml);const t=document.createElement("button");t.type="button",t.className=Rh,t.setAttribute("aria-label","Copy code"),t.setAttribute("title","Copy code"),t.innerHTML=Dl;let n=null;const r=async()=>{const o=e.querySelector("code")?.textContent??e.textContent??"";if(o){if(!navigator?.clipboard?.writeText){console.warn("Clipboard API unavailable; cannot copy code block");return}try{await navigator.clipboard.writeText(o)}catch(u){console.error("Failed to copy code block",u);return}n!==null&&window.clearTimeout(n),t.classList.add("copied"),t.setAttribute("aria-label","Code copied"),t.innerHTML=Oh,n=window.setTimeout(()=>{e.isConnected&&(t.classList.remove("copied"),t.setAttribute("aria-label","Copy code"),t.innerHTML=Dl,n=null)},$h)}};return t.addEventListener("click",r),e.appendChild(t),{cleanup:()=>{t.removeEventListener("click",r),n!==null&&window.clearTimeout(n),t.remove(),e.classList.remove(Ml)}}}function Fl(e,t){e.querySelectorAll("pre").forEach(r=>{t.has(r)||t.set(r,zh(r))}),Array.from(t.keys()).forEach(r=>{if(!e.contains(r)){const a=t.get(r);a&&(a.cleanup(),t.delete(r))}})}function ti(e){const t=new Map,n=new MutationObserver(()=>{Fl(e,t)});return n.observe(e,{childList:!0,subtree:!0}),Fl(e,t),{destroy:()=>{n.disconnect(),Array.from(t.values()).forEach(r=>r.cleanup()),t.clear()}}}const Pl={};function Bh(e){let t=Pl[e];if(t)return t;t=Pl[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function ns(e,t){typeof t!="string"&&(t=ns.defaultChars);const n=Bh(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let o=0,u=r.length;o<u;o+=3){const i=parseInt(r.slice(o+1,o+3),16);if(i<128){a+=n[i];continue}if((i&224)===192&&o+3<u){const l=parseInt(r.slice(o+4,o+6),16);if((l&192)===128){const c=i<<6&1984|l&63;c<128?a+="ï¿½ï¿½":a+=String.fromCharCode(c),o+=3;continue}}if((i&240)===224&&o+6<u){const l=parseInt(r.slice(o+4,o+6),16),c=parseInt(r.slice(o+7,o+9),16);if((l&192)===128&&(c&192)===128){const f=i<<12&61440|l<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="ï¿½ï¿½ï¿½":a+=String.fromCharCode(f),o+=6;continue}}if((i&248)===240&&o+9<u){const l=parseInt(r.slice(o+4,o+6),16),c=parseInt(r.slice(o+7,o+9),16),f=parseInt(r.slice(o+10,o+12),16);if((l&192)===128&&(c&192)===128&&(f&192)===128){let d=i<<18&1835008|l<<12&258048|c<<6&4032|f&63;d<65536||d>1114111?a+="ï¿½ï¿½ï¿½ï¿½":(d-=65536,a+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}a+="ï¿½"}return a})}ns.defaultChars=";/?:@&=+$,#";ns.componentChars="";const Il={};function Uh(e){let t=Il[e];if(t)return t;t=Il[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Js(e,t,n){typeof t!="string"&&(n=t,t=Js.defaultChars),typeof n>"u"&&(n=!0);const r=Uh(t);let a="";for(let o=0,u=e.length;o<u;o++){const i=e.charCodeAt(o);if(n&&i===37&&o+2<u&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3))){a+=e.slice(o,o+3),o+=2;continue}if(i<128){a+=r[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&o+1<u){const l=e.charCodeAt(o+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[o]+e[o+1]),o++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[o])}return a}Js.defaultChars=";/?:@&=+$,-_.!~*'()#";Js.componentChars="-_.!~*'()";function Mi(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Fo(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const jh=/^([a-z0-9.+-]+:)/i,qh=/:[0-9]*$/,Hh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Wh=["<",">",'"',"`"," ","\r",`
`,"	"],Vh=["{","}","|","\\","^","`"].concat(Wh),Gh=["'"].concat(Vh),Ll=["%","/","?",";","#"].concat(Gh),Nl=["/","?","#"],Zh=255,Ol=/^[+a-z0-9A-Z_-]{0,63}$/,Kh=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$l={javascript:!0,"javascript:":!0},Rl={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Fi(e,t){if(e&&e instanceof Fo)return e;const n=new Fo;return n.parse(e,t),n}Fo.prototype.parse=function(e,t){let n,r,a,o=e;if(o=o.trim(),!t&&e.split("#").length===1){const c=Hh.exec(o);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let u=jh.exec(o);if(u&&(u=u[0],n=u.toLowerCase(),this.protocol=u,o=o.substr(u.length)),(t||u||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=o.substr(0,2)==="//",a&&!(u&&$l[u])&&(o=o.substr(2),this.slashes=!0)),!$l[u]&&(a||u&&!Rl[u])){let c=-1;for(let g=0;g<Nl.length;g++)r=o.indexOf(Nl[g]),r!==-1&&(c===-1||r<c)&&(c=r);let f,d;c===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",c),d!==-1&&(f=o.slice(0,d),o=o.slice(d+1),this.auth=f),c=-1;for(let g=0;g<Ll.length;g++)r=o.indexOf(Ll[g]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=o.length),o[c-1]===":"&&c--;const m=o.slice(0,c);o=o.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const g=this.hostname.split(/\./);for(let T=0,A=g.length;T<A;T++){const w=g[T];if(w&&!w.match(Ol)){let E="";for(let C=0,k=w.length;C<k;C++)w.charCodeAt(C)>127?E+="x":E+=w[C];if(!E.match(Ol)){const C=g.slice(0,T),k=g.slice(T+1),S=w.match(Kh);S&&(C.push(S[1]),k.unshift(S[2])),k.length&&(o=k.join(".")+o),this.hostname=C.join(".");break}}}}this.hostname.length>Zh&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const i=o.indexOf("#");i!==-1&&(this.hash=o.substr(i),o=o.slice(0,i));const l=o.indexOf("?");return l!==-1&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),Rl[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Fo.prototype.parseHost=function(e){let t=qh.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Yh=Object.freeze(Object.defineProperty({__proto__:null,decode:ns,encode:Js,format:Mi,parse:Fi},Symbol.toStringTag,{value:"Module"})),Sd=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ed=/[\0-\x1F\x7F-\x9F]/,Jh=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Pi=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Cd=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Ad=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Xh=Object.freeze(Object.defineProperty({__proto__:null,Any:Sd,Cc:Ed,Cf:Jh,P:Pi,S:Cd,Z:Ad},Symbol.toStringTag,{value:"Module"})),Qh=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(e=>e.charCodeAt(0))),em=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(e=>e.charCodeAt(0)));var Su;const tm=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),nm=(Su=String.fromCodePoint)!==null&&Su!==void 0?Su:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function rm(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=tm.get(e))!==null&&t!==void 0?t:e}var Tn;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Tn||(Tn={}));const am=32;var na;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(na||(na={}));function ni(e){return e>=Tn.ZERO&&e<=Tn.NINE}function sm(e){return e>=Tn.UPPER_A&&e<=Tn.UPPER_F||e>=Tn.LOWER_A&&e<=Tn.LOWER_F}function om(e){return e>=Tn.UPPER_A&&e<=Tn.UPPER_Z||e>=Tn.LOWER_A&&e<=Tn.LOWER_Z||ni(e)}function um(e){return e===Tn.EQUALS||om(e)}var En;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(En||(En={}));var Qr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Qr||(Qr={}));class im{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=En.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Qr.Strict}startEntity(t){this.decodeMode=t,this.state=En.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case En.EntityStart:return t.charCodeAt(n)===Tn.NUM?(this.state=En.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=En.NamedEntity,this.stateNamedEntity(t,n));case En.NumericStart:return this.stateNumericStart(t,n);case En.NumericDecimal:return this.stateNumericDecimal(t,n);case En.NumericHex:return this.stateNumericHex(t,n);case En.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|am)===Tn.LOWER_X?(this.state=En.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=En.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const o=r-n;this.result=this.result*Math.pow(a,o)+parseInt(t.substr(n,o),a),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(ni(a)||sm(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(ni(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Tn.SEMI)this.consumed+=1;else if(this.decodeMode===Qr.Strict)return 0;return this.emitCodePoint(rm(this.result),this.consumed),this.errors&&(t!==Tn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],o=(a&na.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const u=t.charCodeAt(n);if(this.treeIndex=lm(r,a,this.treeIndex+Math.max(1,o),u),this.treeIndex<0)return this.result===0||this.decodeMode===Qr.Attribute&&(o===0||um(u))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],o=(a&na.VALUE_LENGTH)>>14,o!==0){if(u===Tn.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Qr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&na.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~na.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case En.NamedEntity:return this.result!==0&&(this.decodeMode!==Qr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case En.NumericDecimal:return this.emitNumericEntity(0,2);case En.NumericHex:return this.emitNumericEntity(0,3);case En.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case En.EntityStart:return 0}}}function Td(e){let t="";const n=new im(e,r=>t+=nm(r));return function(a,o){let u=0,i=0;for(;(i=a.indexOf("&",i))>=0;){t+=a.slice(u,i),n.startEntity(o);const c=n.write(a,i+1);if(c<0){u=i+n.end();break}u=i+c,i=c===0?u+1:u}const l=t+a.slice(u);return t="",l}}function lm(e,t,n,r){const a=(t&na.BRANCH_LENGTH)>>7,o=t&na.JUMP_TABLE;if(a===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=a?-1:e[n+l]-1}let u=n,i=u+a-1;for(;u<=i;){const l=u+i>>>1,c=e[l];if(c<r)u=l+1;else if(c>r)i=l-1;else return e[l+a]}return-1}const cm=Td(Qh);Td(em);function Dd(e,t=Qr.Legacy){return cm(e,t)}function dm(e){return Object.prototype.toString.call(e)}function Ii(e){return dm(e)==="[object String]"}const fm=Object.prototype.hasOwnProperty;function pm(e,t){return fm.call(e,t)}function Vo(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function Md(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Li(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Po(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Fd=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,vm=/&([a-z#][a-z0-9]{1,31});/gi,hm=new RegExp(Fd.source+"|"+vm.source,"gi"),mm=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function gm(e,t){if(t.charCodeAt(0)===35&&mm.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Li(r)?Po(r):e}const n=Dd(e);return n!==e?n:e}function _m(e){return e.indexOf("\\")<0?e:e.replace(Fd,"$1")}function rs(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(hm,function(t,n,r){return n||gm(t,r)})}const bm=/[&<>"]/,ym=/[&<>"]/g,xm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function wm(e){return xm[e]}function ua(e){return bm.test(e)?e.replace(ym,wm):e}const km=/[.?*+^$[\]\\(){}|-]/g;function Sm(e){return e.replace(km,"\\$&")}function en(e){switch(e){case 9:case 32:return!0}return!1}function Rs(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function zs(e){return Pi.test(e)||Cd.test(e)}function Bs(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Go(e){return e=e.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(e=e.replace(/áº/g,"Ã")),e.toLowerCase().toUpperCase()}const Em={mdurl:Yh,ucmicro:Xh},Cm=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Md,assign:Vo,escapeHtml:ua,escapeRE:Sm,fromCodePoint:Po,has:pm,isMdAsciiPunct:Bs,isPunctChar:zs,isSpace:en,isString:Ii,isValidEntityCode:Li,isWhiteSpace:Rs,lib:Em,normalizeReference:Go,unescapeAll:rs,unescapeMd:_m},Symbol.toStringTag,{value:"Module"}));function Am(e,t,n){let r,a,o,u;const i=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<i;){if(o=e.src.charCodeAt(e.pos),o===93&&(r--,r===0)){a=!0;break}if(u=e.pos,e.md.inline.skipToken(e),o===91){if(u===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return a&&(c=e.pos),e.pos=l,c}function Tm(e,t,n){let r,a=t;const o={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return o;if(r===62)return o.pos=a+1,o.str=rs(e.slice(t+1,a)),o.ok=!0,o;if(r===92&&a+1<n){a+=2;continue}a++}return o}let u=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(u++,u>32))return o;if(r===41){if(u===0)break;u--}a++}return t===a||u!==0||(o.str=rs(e.slice(t,a)),o.pos=a,o.ok=!0),o}function Dm(e,t,n,r){let a,o=t;const u={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)u.str=r.str,u.marker=r.marker;else{if(o>=n)return u;let i=e.charCodeAt(o);if(i!==34&&i!==39&&i!==40)return u;t++,o++,i===40&&(i=41),u.marker=i}for(;o<n;){if(a=e.charCodeAt(o),a===u.marker)return u.pos=o+1,u.str+=rs(e.slice(t,o)),u.ok=!0,u;if(a===40&&u.marker===41)return u;a===92&&o+1<n&&o++,o++}return u.can_continue=!0,u.str+=rs(e.slice(t,o)),u}const Mm=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Tm,parseLinkLabel:Am,parseLinkTitle:Dm},Symbol.toStringTag,{value:"Module"})),Lr={};Lr.code_inline=function(e,t,n,r,a){const o=e[t];return"<code"+a.renderAttrs(o)+">"+ua(o.content)+"</code>"};Lr.code_block=function(e,t,n,r,a){const o=e[t];return"<pre"+a.renderAttrs(o)+"><code>"+ua(e[t].content)+`</code></pre>
`};Lr.fence=function(e,t,n,r,a){const o=e[t],u=o.info?rs(o.info).trim():"";let i="",l="";if(u){const f=u.split(/(\s+)/g);i=f[0],l=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(o.content,i,l)||ua(o.content):c=ua(o.content),c.indexOf("<pre")===0)return c+`
`;if(u){const f=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];f<0?d.push(["class",n.langPrefix+i]):(d[f]=d[f].slice(),d[f][1]+=" "+n.langPrefix+i);const m={attrs:d};return`<pre><code${a.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(o)}>${c}</code></pre>
`};Lr.image=function(e,t,n,r,a){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=a.renderInlineAsText(o.children,n,r),a.renderToken(e,t,n)};Lr.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Lr.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Lr.text=function(e,t){return ua(e[t].content)};Lr.html_block=function(e,t){return e[t].content};Lr.html_inline=function(e,t){return e[t].content};function ls(){this.rules=Vo({},Lr)}ls.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+ua(t.attrs[n][0])+'="'+ua(t.attrs[n][1])+'"';return a};ls.prototype.renderToken=function(t,n,r){const a=t[n];let o="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(o+=" /");let u=!1;if(a.block&&(u=!0,a.nesting===1&&n+1<t.length)){const i=t[n+1];(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(u=!1)}return o+=u?`>
`:">",o};ls.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let o=0,u=e.length;o<u;o++){const i=e[o].type;typeof a[i]<"u"?r+=a[i](e,o,t,n,this):r+=this.renderToken(e,o,t)}return r};ls.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,o=e.length;a<o;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};ls.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let o=0,u=e.length;o<u;o++){const i=e[o].type;i==="inline"?r+=this.renderInline(e[o].children,t,n):typeof a[i]<"u"?r+=a[i](e,o,t,n,this):r+=this.renderToken(e,o,t,n)}return r};function Xn(){this.__rules__=[],this.__cache__=null}Xn.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Xn.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Xn.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Xn.prototype.before=function(e,t,n,r){const a=this.__find__(e),o=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Xn.prototype.after=function(e,t,n,r){const a=this.__find__(e),o=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};Xn.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Xn.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Xn.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Xn.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Xn.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function xr(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}xr.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};xr.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};xr.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};xr.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};xr.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Pd(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Pd.prototype.Token=xr;const Fm=/\r\n?|\n/g,Pm=/\0/g;function Im(e){let t;t=e.src.replace(Fm,`
`),t=t.replace(Pm,"ï¿½"),e.src=t}function Lm(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Nm(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Om(e){return/^<a[>\s]/i.test(e)}function $m(e){return/^<\/a\s*>/i.test(e)}function Rm(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,o=0;for(let u=a.length-1;u>=0;u--){const i=a[u];if(i.type==="link_close"){for(u--;a[u].level!==i.level&&a[u].type!=="link_open";)u--;continue}if(i.type==="html_inline"&&(Om(i.content)&&o>0&&o--,$m(i.content)&&o++),!(o>0)&&i.type==="text"&&e.md.linkify.test(i.content)){const l=i.content;let c=e.md.linkify.match(l);const f=[];let d=i.level,m=0;c.length>0&&c[0].index===0&&u>0&&a[u-1].type==="text_special"&&(c=c.slice(1));for(let h=0;h<c.length;h++){const g=c[h].url,T=e.md.normalizeLink(g);if(!e.md.validateLink(T))continue;let A=c[h].text;c[h].schema?c[h].schema==="mailto:"&&!/^mailto:/i.test(A)?A=e.md.normalizeLinkText("mailto:"+A).replace(/^mailto:/,""):A=e.md.normalizeLinkText(A):A=e.md.normalizeLinkText("http://"+A).replace(/^http:\/\//,"");const w=c[h].index;if(w>m){const S=new e.Token("text","",0);S.content=l.slice(m,w),S.level=d,f.push(S)}const E=new e.Token("link_open","a",1);E.attrs=[["href",T]],E.level=d++,E.markup="linkify",E.info="auto",f.push(E);const C=new e.Token("text","",0);C.content=A,C.level=d,f.push(C);const k=new e.Token("link_close","a",-1);k.level=--d,k.markup="linkify",k.info="auto",f.push(k),m=c[h].lastIndex}if(m<l.length){const h=new e.Token("text","",0);h.content=l.slice(m),h.level=d,f.push(h)}t[n].children=a=Md(a,u,f)}}}}const Id=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,zm=/\((c|tm|r)\)/i,Bm=/\((c|tm|r)\)/ig,Um={c:"Â©",r:"Â®",tm:"â¢"};function jm(e,t){return Um[t.toLowerCase()]}function qm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Bm,jm)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Hm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&Id.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Wm(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(zm.test(e.tokens[t].content)&&qm(e.tokens[t].children),Id.test(e.tokens[t].content)&&Hm(e.tokens[t].children))}const Vm=/['"]/,zl=/['"]/g,Bl="â";function oo(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Gm(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const o=e[a],u=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=u);n--);if(r.length=n+1,o.type!=="text")continue;let i=o.content,l=0,c=i.length;e:for(;l<c;){zl.lastIndex=l;const f=zl.exec(i);if(!f)break;let d=!0,m=!0;l=f.index+1;const h=f[0]==="'";let g=32;if(f.index-1>=0)g=i.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){g=e[n].content.charCodeAt(e[n].content.length-1);break}let T=32;if(l<c)T=i.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){T=e[n].content.charCodeAt(0);break}const A=Bs(g)||zs(String.fromCharCode(g)),w=Bs(T)||zs(String.fromCharCode(T)),E=Rs(g),C=Rs(T);if(C?d=!1:w&&(E||A||(d=!1)),E?m=!1:A&&(C||w||(m=!1)),T===34&&f[0]==='"'&&g>=48&&g<=57&&(m=d=!1),d&&m&&(d=A,m=w),!d&&!m){h&&(o.content=oo(o.content,f.index,Bl));continue}if(m)for(n=r.length-1;n>=0;n--){let k=r[n];if(r[n].level<u)break;if(k.single===h&&r[n].level===u){k=r[n];let S,x;h?(S=t.md.options.quotes[2],x=t.md.options.quotes[3]):(S=t.md.options.quotes[0],x=t.md.options.quotes[1]),o.content=oo(o.content,f.index,x),e[k.token].content=oo(e[k.token].content,k.pos,S),l+=x.length-1,k.token===a&&(l+=S.length-1),i=o.content,c=i.length,r.length=n;continue e}}d?r.push({token:a,pos:f.index,single:h,level:u}):m&&h&&(o.content=oo(o.content,f.index,Bl))}}}function Zm(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Vm.test(e.tokens[t].content)||Gm(e.tokens[t].children,e)}function Km(e){let t,n;const r=e.tokens,a=r.length;for(let o=0;o<a;o++){if(r[o].type!=="inline")continue;const u=r[o].children,i=u.length;for(t=0;t<i;t++)u[t].type==="text_special"&&(u[t].type="text");for(t=n=0;t<i;t++)u[t].type==="text"&&t+1<i&&u[t+1].type==="text"?u[t+1].content=u[t].content+u[t+1].content:(t!==n&&(u[n]=u[t]),n++);t!==n&&(u.length=n)}}const Eu=[["normalize",Im],["block",Lm],["inline",Nm],["linkify",Rm],["replacements",Wm],["smartquotes",Zm],["text_join",Km]];function Ni(){this.ruler=new Xn;for(let e=0;e<Eu.length;e++)this.ruler.push(Eu[e][0],Eu[e][1])}Ni.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Ni.prototype.State=Pd;function Nr(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let o=0,u=0,i=0,l=0,c=a.length,f=!1;u<c;u++){const d=a.charCodeAt(u);if(!f)if(en(d)){i++,d===9?l+=4-l%4:l++;continue}else f=!0;(d===10||u===c-1)&&(d!==10&&u++,this.bMarks.push(o),this.eMarks.push(u),this.tShift.push(i),this.sCount.push(l),this.bsCount.push(0),f=!1,i=0,l=0,o=u+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Nr.prototype.push=function(e,t,n){const r=new xr(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Nr.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Nr.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Nr.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!en(r))break}return t};Nr.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!en(this.src.charCodeAt(--t)))return t+1;return t};Nr.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Nr.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Nr.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const o=new Array(n-t);for(let u=0,i=t;i<n;i++,u++){let l=0;const c=this.bMarks[i];let f=c,d;for(i+1<n||a?d=this.eMarks[i]+1:d=this.eMarks[i];f<d&&l<r;){const m=this.src.charCodeAt(f);if(en(m))m===9?l+=4-(l+this.bsCount[i])%4:l++;else if(f-c<this.tShift[i])l++;else break;f++}l>r?o[u]=new Array(l-r+1).join(" ")+this.src.slice(f,d):o[u]=this.src.slice(f,d)}return o.join("")};Nr.prototype.Token=xr;const Ym=65536;function Cu(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Ul(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),o=!1,u=0,i="";for(;r<n;)a===124&&(o?(i+=e.substring(u,r-1),u=r):(t.push(i+e.substring(u,r)),i="",u=r+1)),o=a===92,r++,a=e.charCodeAt(r);return t.push(i+e.substring(u)),t}function Jm(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let o=e.bMarks[a]+e.tShift[a];if(o>=e.eMarks[a])return!1;const u=e.src.charCodeAt(o++);if(u!==124&&u!==45&&u!==58||o>=e.eMarks[a])return!1;const i=e.src.charCodeAt(o++);if(i!==124&&i!==45&&i!==58&&!en(i)||u===45&&en(i))return!1;for(;o<e.eMarks[a];){const k=e.src.charCodeAt(o);if(k!==124&&k!==45&&k!==58&&!en(k))return!1;o++}let l=Cu(e,t+1),c=l.split("|");const f=[];for(let k=0;k<c.length;k++){const S=c[k].trim();if(!S){if(k===0||k===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?f.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=Cu(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Ul(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==f.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),g=e.push("table_open","table",1),T=[t,0];g.map=T;const A=e.push("thead_open","thead",1);A.map=[t,t+1];const w=e.push("tr_open","tr",1);w.map=[t,t+1];for(let k=0;k<c.length;k++){const S=e.push("th_open","th",1);f[k]&&(S.attrs=[["style","text-align:"+f[k]]]);const x=e.push("inline","",0);x.content=c[k].trim(),x.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let E,C=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let k=!1;for(let x=0,F=h.length;x<F;x++)if(h[x](e,a,n,!0)){k=!0;break}if(k||(l=Cu(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(c=Ul(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),C+=d-c.length,C>Ym))break;if(a===t+2){const x=e.push("tbody_open","tbody",1);x.map=E=[t+2,0]}const S=e.push("tr_open","tr",1);S.map=[a,a+1];for(let x=0;x<d;x++){const F=e.push("td_open","td",1);f[x]&&(F.attrs=[["style","text-align:"+f[x]]]);const q=e.push("inline","",0);q.content=c[x]?c[x].trim():"",q.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return E&&(e.push("tbody_close","tbody",-1),E[1]=a),e.push("table_close","table",-1),T[1]=a,e.parentType=m,e.line=a,!0}function Xm(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const o=e.push("code_block","code",0);return o.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0}function Qm(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>o)return!1;const u=e.src.charCodeAt(a);if(u!==126&&u!==96)return!1;let i=a;a=e.skipChars(a,u);let l=a-i;if(l<3)return!1;const c=e.src.slice(i,a),f=e.src.slice(a,o);if(u===96&&f.indexOf(String.fromCharCode(u))>=0)return!1;if(r)return!0;let d=t,m=!1;for(;d++,!(d>=n||(a=i=e.bMarks[d]+e.tShift[d],o=e.eMarks[d],a<o&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(a)===u&&!(e.sCount[d]-e.blkIndent>=4)&&(a=e.skipChars(a,u),!(a-i<l)&&(a=e.skipSpaces(a),!(a<o)))){m=!0;break}l=e.sCount[t],e.line=d+(m?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,d,l,!0),h.markup=c,h.map=[t,e.line],!0}function eg(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const u=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const i=[],l=[],c=[],f=[],d=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let h=!1,g;for(g=t;g<n;g++){const C=e.sCount[g]<e.blkIndent;if(a=e.bMarks[g]+e.tShift[g],o=e.eMarks[g],a>=o)break;if(e.src.charCodeAt(a++)===62&&!C){let S=e.sCount[g]+1,x,F;e.src.charCodeAt(a)===32?(a++,S++,F=!1,x=!0):e.src.charCodeAt(a)===9?(x=!0,(e.bsCount[g]+S)%4===3?(a++,S++,F=!1):F=!0):x=!1;let q=S;for(i.push(e.bMarks[g]),e.bMarks[g]=a;a<o;){const H=e.src.charCodeAt(a);if(en(H))H===9?q+=4-(q+e.bsCount[g]+(F?1:0))%4:q++;else break;a++}h=a>=o,l.push(e.bsCount[g]),e.bsCount[g]=e.sCount[g]+1+(x?1:0),c.push(e.sCount[g]),e.sCount[g]=q-S,f.push(e.tShift[g]),e.tShift[g]=a-e.bMarks[g];continue}if(h)break;let k=!1;for(let S=0,x=d.length;S<x;S++)if(d[S](e,g,n,!0)){k=!0;break}if(k){e.lineMax=g,e.blkIndent!==0&&(i.push(e.bMarks[g]),l.push(e.bsCount[g]),f.push(e.tShift[g]),c.push(e.sCount[g]),e.sCount[g]-=e.blkIndent);break}i.push(e.bMarks[g]),l.push(e.bsCount[g]),f.push(e.tShift[g]),c.push(e.sCount[g]),e.sCount[g]=-1}const T=e.blkIndent;e.blkIndent=0;const A=e.push("blockquote_open","blockquote",1);A.markup=">";const w=[t,0];A.map=w,e.md.block.tokenize(e,t,g);const E=e.push("blockquote_close","blockquote",-1);E.markup=">",e.lineMax=u,e.parentType=m,w[1]=e.line;for(let C=0;C<f.length;C++)e.bMarks[C+t]=i[C],e.tShift[C+t]=f[C],e.sCount[C+t]=c[C],e.bsCount[C+t]=l[C];return e.blkIndent=T,!0}function tg(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const u=e.src.charCodeAt(o++);if(u!==42&&u!==45&&u!==95)return!1;let i=1;for(;o<a;){const c=e.src.charCodeAt(o++);if(c!==u&&!en(c))return!1;c===u&&i++}if(i<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(i+1).join(String.fromCharCode(u)),!0}function jl(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const o=e.src.charCodeAt(r);if(!en(o))return-1}return r}function ql(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let o=e.src.charCodeAt(a++);if(o<48||o>57)return-1;for(;;){if(a>=r)return-1;if(o=e.src.charCodeAt(a++),o>=48&&o<=57){if(a-n>=10)return-1;continue}if(o===41||o===46)break;return-1}return a<r&&(o=e.src.charCodeAt(a),!en(o))?-1:a}function ng(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function rg(e,t,n,r){let a,o,u,i,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let d,m,h;if((h=ql(e,l))>=0){if(d=!0,u=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(u,h-1)),f&&m!==1)return!1}else if((h=jl(e,l))>=0)d=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const g=e.src.charCodeAt(h-1),T=e.tokens.length;d?(i=e.push("ordered_list_open","ol",1),m!==1&&(i.attrs=[["start",m]])):i=e.push("bullet_list_open","ul",1);const A=[l,0];i.map=A,i.markup=String.fromCharCode(g);let w=!1;const E=e.md.block.ruler.getRules("list"),C=e.parentType;for(e.parentType="list";l<n;){o=h,a=e.eMarks[l];const k=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let S=k;for(;o<a;){const O=e.src.charCodeAt(o);if(O===9)S+=4-(S+e.bsCount[l])%4;else if(O===32)S++;else break;o++}const x=o;let F;x>=a?F=1:F=S-k,F>4&&(F=1);const q=k+F;i=e.push("list_item_open","li",1),i.markup=String.fromCharCode(g);const H=[l,0];i.map=H,d&&(i.info=e.src.slice(u,h-1));const P=e.tight,L=e.tShift[l],K=e.sCount[l],G=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=q,e.tight=!0,e.tShift[l]=x-e.bMarks[l],e.sCount[l]=S,x>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||w)&&(c=!1),w=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=G,e.tShift[l]=L,e.sCount[l]=K,e.tight=P,i=e.push("list_item_close","li",-1),i.markup=String.fromCharCode(g),l=e.line,H[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let ce=!1;for(let O=0,ae=E.length;O<ae;O++)if(E[O](e,l,n,!0)){ce=!0;break}if(ce)break;if(d){if(h=ql(e,l),h<0)break;u=e.bMarks[l]+e.tShift[l]}else if(h=jl(e,l),h<0)break;if(g!==e.src.charCodeAt(h-1))break}return d?i=e.push("ordered_list_close","ol",-1):i=e.push("bullet_list_close","ul",-1),i.markup=String.fromCharCode(g),A[1]=l,e.line=l,e.parentType=C,c&&ng(e,T),!0}function ag(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],u=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function i(E){const C=e.lineMax;if(E>=C||e.isEmpty(E))return null;let k=!1;if(e.sCount[E]-e.blkIndent>3&&(k=!0),e.sCount[E]<0&&(k=!0),!k){const F=e.md.block.ruler.getRules("reference"),q=e.parentType;e.parentType="reference";let H=!1;for(let P=0,L=F.length;P<L;P++)if(F[P](e,E,C,!0)){H=!0;break}if(e.parentType=q,H)return null}const S=e.bMarks[E]+e.tShift[E],x=e.eMarks[E];return e.src.slice(S,x+1)}let l=e.src.slice(a,o+1);o=l.length;let c=-1;for(a=1;a<o;a++){const E=l.charCodeAt(a);if(E===91)return!1;if(E===93){c=a;break}else if(E===10){const C=i(u);C!==null&&(l+=C,o=l.length,u++)}else if(E===92&&(a++,a<o&&l.charCodeAt(a)===10)){const C=i(u);C!==null&&(l+=C,o=l.length,u++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<o;a++){const E=l.charCodeAt(a);if(E===10){const C=i(u);C!==null&&(l+=C,o=l.length,u++)}else if(!en(E))break}const f=e.md.helpers.parseLinkDestination(l,a,o);if(!f.ok)return!1;const d=e.md.normalizeLink(f.str);if(!e.md.validateLink(d))return!1;a=f.pos;const m=a,h=u,g=a;for(;a<o;a++){const E=l.charCodeAt(a);if(E===10){const C=i(u);C!==null&&(l+=C,o=l.length,u++)}else if(!en(E))break}let T=e.md.helpers.parseLinkTitle(l,a,o);for(;T.can_continue;){const E=i(u);if(E===null)break;l+=E,a=o,o=l.length,u++,T=e.md.helpers.parseLinkTitle(l,a,o,T)}let A;for(a<o&&g!==a&&T.ok?(A=T.str,a=T.pos):(A="",a=m,u=h);a<o;){const E=l.charCodeAt(a);if(!en(E))break;a++}if(a<o&&l.charCodeAt(a)!==10&&A)for(A="",a=m,u=h;a<o;){const E=l.charCodeAt(a);if(!en(E))break;a++}if(a<o&&l.charCodeAt(a)!==10)return!1;const w=Go(l.slice(1,c));return w?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[w]>"u"&&(e.env.references[w]={title:A,href:d}),e.line=u),!0):!1}const sg=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],og="[a-zA-Z_:][a-zA-Z0-9:._-]*",ug="[^\"'=<>`\\x00-\\x20]+",ig="'[^']*'",lg='"[^"]*"',cg="(?:"+ug+"|"+ig+"|"+lg+")",dg="(?:\\s+"+og+"(?:\\s*=\\s*"+cg+")?)",Ld="<[A-Za-z][A-Za-z0-9\\-]*"+dg+"*\\s*\\/?>",Nd="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",fg="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",pg="<[?][\\s\\S]*?[?]>",vg="<![A-Za-z][^>]*>",hg="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",mg=new RegExp("^(?:"+Ld+"|"+Nd+"|"+fg+"|"+pg+"|"+vg+"|"+hg+")"),gg=new RegExp("^(?:"+Ld+"|"+Nd+")"),Ua=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+sg.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(gg.source+"\\s*$"),/^$/,!1]];function _g(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let u=e.src.slice(a,o),i=0;for(;i<Ua.length&&!Ua[i][0].test(u);i++);if(i===Ua.length)return!1;if(r)return Ua[i][2];let l=t+1;if(!Ua[i][1].test(u)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],u=e.src.slice(a,o),Ua[i][1].test(u)){u.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function bg(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let u=e.src.charCodeAt(a);if(u!==35||a>=o)return!1;let i=1;for(u=e.src.charCodeAt(++a);u===35&&a<o&&i<=6;)i++,u=e.src.charCodeAt(++a);if(i>6||a<o&&!en(u))return!1;if(r)return!0;o=e.skipSpacesBack(o,a);const l=e.skipCharsBack(o,35,a);l>a&&en(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;const c=e.push("heading_open","h"+String(i),1);c.markup="########".slice(0,i),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,o).trim(),f.map=[t,e.line],f.children=[];const d=e.push("heading_close","h"+String(i),-1);return d.markup="########".slice(0,i),!0}function yg(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let o=0,u,i=t+1;for(;i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3)continue;if(e.sCount[i]>=e.blkIndent){let h=e.bMarks[i]+e.tShift[i];const g=e.eMarks[i];if(h<g&&(u=e.src.charCodeAt(h),(u===45||u===61)&&(h=e.skipChars(h,u),h=e.skipSpaces(h),h>=g))){o=u===61?1:2;break}}if(e.sCount[i]<0)continue;let m=!1;for(let h=0,g=r.length;h<g;h++)if(r[h](e,i,n,!0)){m=!0;break}if(m)break}if(!o)return!1;const l=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i+1;const c=e.push("heading_open","h"+String(o),1);c.markup=String.fromCharCode(u),c.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const d=e.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(u),e.parentType=a,!0}function xg(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let o=t+1;for(e.parentType="paragraph";o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3||e.sCount[o]<0)continue;let c=!1;for(let f=0,d=r.length;f<d;f++)if(r[f](e,o,n,!0)){c=!0;break}if(c)break}const u=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o;const i=e.push("paragraph_open","p",1);i.map=[t,e.line];const l=e.push("inline","",0);return l.content=u,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const uo=[["table",Jm,["paragraph","reference"]],["code",Xm],["fence",Qm,["paragraph","reference","blockquote","list"]],["blockquote",eg,["paragraph","reference","blockquote","list"]],["hr",tg,["paragraph","reference","blockquote","list"]],["list",rg,["paragraph","reference","blockquote"]],["reference",ag],["html_block",_g,["paragraph","reference","blockquote"]],["heading",bg,["paragraph","reference","blockquote"]],["lheading",yg],["paragraph",xg]];function Zo(){this.ruler=new Xn;for(let e=0;e<uo.length;e++)this.ruler.push(uo[e][0],uo[e][1],{alt:(uo[e][2]||[]).slice()})}Zo.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,o=e.md.options.maxNesting;let u=t,i=!1;for(;u<n&&(e.line=u=e.skipEmptyLines(u),!(u>=n||e.sCount[u]<e.blkIndent));){if(e.level>=o){e.line=n;break}const l=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,u,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!i,e.isEmpty(e.line-1)&&(i=!0),u=e.line,u<n&&e.isEmpty(u)&&(i=!0,u++,e.line=u)}};Zo.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};Zo.prototype.State=Nr;function Xs(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Xs.prototype.pushPending=function(){const e=new xr("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Xs.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new xr(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};Xs.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<n&&this.src.charCodeAt(o)===r;)o++;const u=o-e,i=o<n?this.src.charCodeAt(o):32,l=Bs(a)||zs(String.fromCharCode(a)),c=Bs(i)||zs(String.fromCharCode(i)),f=Rs(a),d=Rs(i),m=!d&&(!c||f||l),h=!f&&(!l||d||c);return{can_open:m&&(t||!h||l),can_close:h&&(t||!m||c),length:u}};Xs.prototype.Token=xr;function wg(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function kg(e,t){let n=e.pos;for(;n<e.posMax&&!wg(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Sg=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Eg(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Sg);if(!a)return!1;const o=a[1],u=e.md.linkify.matchAtStart(e.src.slice(n-o.length));if(!u)return!1;let i=u.url;if(i.length<=o.length)return!1;i=i.replace(/\*+$/,"");const l=e.md.normalizeLink(i);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-o.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(i);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=i.length-o.length,!0}function Cg(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&en(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Oi=[];for(let e=0;e<256;e++)Oi.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Oi[e.charCodeAt(0)]=1});function Ag(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!en(a));)n++;return e.pos=n,!0}let o=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const i=e.src.charCodeAt(n+1);i>=56320&&i<=57343&&(o+=e.src[n+1],n++)}const u="\\"+o;if(!t){const i=e.push("text_special","",0);a<256&&Oi[a]!==0?i.content=o:i.content=u,i.markup=u,i.info="escape"}return e.pos=n+1,!0}function Tg(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const o=e.posMax;for(;n<o&&e.src.charCodeAt(n)===96;)n++;const u=e.src.slice(a,n),i=u.length;if(e.backticksScanned&&(e.backticks[i]||0)<=a)return t||(e.pending+=u),e.pos+=i,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<o&&e.src.charCodeAt(l)===96;)l++;const f=l-c;if(f===i){if(!t){const d=e.push("code_inline","code",0);d.markup=u,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=u),e.pos+=i,!0}function Dg(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let o=a.length;const u=String.fromCharCode(r);if(o<2)return!1;let i;o%2&&(i=e.push("text","",0),i.content=u,o--);for(let l=0;l<o;l+=2)i=e.push("text","",0),i.content=u+u,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function Hl(e,t){let n;const r=[],a=t.length;for(let o=0;o<a;o++){const u=t[o];if(u.marker!==126||u.end===-1)continue;const i=t[u.end];n=e.tokens[u.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[i.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[i.token-1].type==="text"&&e.tokens[i.token-1].content==="~"&&r.push(i.token-1)}for(;r.length;){const o=r.pop();let u=o+1;for(;u<e.tokens.length&&e.tokens[u].type==="s_close";)u++;u--,o!==u&&(n=e.tokens[u],e.tokens[u]=e.tokens[o],e.tokens[o]=n)}}function Mg(e){const t=e.tokens_meta,n=e.tokens_meta.length;Hl(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Hl(e,t[r].delimiters)}const Od={tokenize:Dg,postProcess:Mg};function Fg(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let o=0;o<a.length;o++){const u=e.push("text","",0);u.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function Wl(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const o=t[a.end],u=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===o.token+1,i=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=u?"strong_open":"em_open",l.tag=u?"strong":"em",l.nesting=1,l.markup=u?i+i:i,l.content="";const c=e.tokens[o.token];c.type=u?"strong_close":"em_close",c.tag=u?"strong":"em",c.nesting=-1,c.markup=u?i+i:i,c.content="",u&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Pg(e){const t=e.tokens_meta,n=e.tokens_meta.length;Wl(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Wl(e,t[r].delimiters)}const $d={tokenize:Fg,postProcess:Pg};function Ig(e,t){let n,r,a,o,u="",i="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,d=e.posMax,m=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let g=h+1;if(g<d&&e.src.charCodeAt(g)===40){for(c=!1,g++;g<d&&(n=e.src.charCodeAt(g),!(!en(n)&&n!==10));g++);if(g>=d)return!1;if(l=g,a=e.md.helpers.parseLinkDestination(e.src,g,e.posMax),a.ok){for(u=e.md.normalizeLink(a.str),e.md.validateLink(u)?g=a.pos:u="",l=g;g<d&&(n=e.src.charCodeAt(g),!(!en(n)&&n!==10));g++);if(a=e.md.helpers.parseLinkTitle(e.src,g,e.posMax),g<d&&l!==g&&a.ok)for(i=a.str,g=a.pos;g<d&&(n=e.src.charCodeAt(g),!(!en(n)&&n!==10));g++);}(g>=d||e.src.charCodeAt(g)!==41)&&(c=!0),g++}if(c){if(typeof e.env.references>"u")return!1;if(g<d&&e.src.charCodeAt(g)===91?(l=g+1,g=e.md.helpers.parseLinkLabel(e,g),g>=0?r=e.src.slice(l,g++):g=h+1):g=h+1,r||(r=e.src.slice(m,h)),o=e.env.references[Go(r)],!o)return e.pos=f,!1;u=o.href,i=o.title}if(!t){e.pos=m,e.posMax=h;const T=e.push("link_open","a",1),A=[["href",u]];T.attrs=A,i&&A.push(["title",i]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=g,e.posMax=d,!0}function Lg(e,t){let n,r,a,o,u,i,l,c,f="";const d=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,g=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(g<0)return!1;if(o=g+1,o<m&&e.src.charCodeAt(o)===40){for(o++;o<m&&(n=e.src.charCodeAt(o),!(!en(n)&&n!==10));o++);if(o>=m)return!1;for(c=o,i=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),i.ok&&(f=e.md.normalizeLink(i.str),e.md.validateLink(f)?o=i.pos:f=""),c=o;o<m&&(n=e.src.charCodeAt(o),!(!en(n)&&n!==10));o++);if(i=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<m&&c!==o&&i.ok)for(l=i.str,o=i.pos;o<m&&(n=e.src.charCodeAt(o),!(!en(n)&&n!==10));o++);else l="";if(o>=m||e.src.charCodeAt(o)!==41)return e.pos=d,!1;o++}else{if(typeof e.env.references>"u")return!1;if(o<m&&e.src.charCodeAt(o)===91?(c=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?a=e.src.slice(c,o++):o=g+1):o=g+1,a||(a=e.src.slice(h,g)),u=e.env.references[Go(a)],!u)return e.pos=d,!1;f=u.href,l=u.title}if(!t){r=e.src.slice(h,g);const T=[];e.md.inline.parse(r,e.md,e.env,T);const A=e.push("image","img",0),w=[["src",f],["alt",""]];A.attrs=w,A.children=T,A.content=r,l&&w.push(["title",l])}return e.pos=o,e.posMax=m,!0}const Ng=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Og=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function $g(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const u=e.src.charCodeAt(n);if(u===60)return!1;if(u===62)break}const o=e.src.slice(r+1,n);if(Og.test(o)){const u=e.md.normalizeLink(o);if(!e.md.validateLink(u))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",u]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=o.length+2,!0}if(Ng.test(o)){const u=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(u))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",u]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(o);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=o.length+2,!0}return!1}function Rg(e){return/^<a[>\s]/i.test(e)}function zg(e){return/^<\/a\s*>/i.test(e)}function Bg(e){const t=e|32;return t>=97&&t<=122}function Ug(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Bg(a))return!1;const o=e.src.slice(r).match(mg);if(!o)return!1;if(!t){const u=e.push("html_inline","",0);u.content=o[0],Rg(u.content)&&e.linkLevel++,zg(u.content)&&e.linkLevel--}return e.pos+=o[0].length,!0}const jg=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,qg=/^&([a-z][a-z0-9]{1,31});/i;function Hg(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const o=e.src.slice(n).match(jg);if(o){if(!t){const u=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),i=e.push("text_special","",0);i.content=Li(u)?Po(u):Po(65533),i.markup=o[0],i.info="entity"}return e.pos+=o[0].length,!0}}else{const o=e.src.slice(n).match(qg);if(o){const u=Dd(o[0]);if(u!==o[0]){if(!t){const i=e.push("text_special","",0);i.content=u,i.markup=o[0],i.info="entity"}return e.pos+=o[0].length,!0}}}return!1}function Vl(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const o=[];for(let u=0;u<n;u++){const i=e[u];if(o.push(0),(e[r].marker!==i.marker||a!==i.token-1)&&(r=u),a=i.token,i.length=i.length||0,!i.close)continue;t.hasOwnProperty(i.marker)||(t[i.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[i.marker][(i.open?3:0)+i.length%3];let c=r-o[r]-1,f=c;for(;c>l;c-=o[c]+1){const d=e[c];if(d.marker===i.marker&&d.open&&d.end<0){let m=!1;if((d.close||i.open)&&(d.length+i.length)%3===0&&(d.length%3!==0||i.length%3!==0)&&(m=!0),!m){const h=c>0&&!e[c-1].open?o[c-1]+1:0;o[u]=u-c+h,o[c]=h,i.open=!1,d.end=u,d.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[i.marker][(i.open?3:0)+(i.length||0)%3]=f)}}function Wg(e){const t=e.tokens_meta,n=e.tokens_meta.length;Vl(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Vl(t[r].delimiters)}function Vg(e){let t,n,r=0;const a=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<o&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const Au=[["text",kg],["linkify",Eg],["newline",Cg],["escape",Ag],["backticks",Tg],["strikethrough",Od.tokenize],["emphasis",$d.tokenize],["link",Ig],["image",Lg],["autolink",$g],["html_inline",Ug],["entity",Hg]],Tu=[["balance_pairs",Wg],["strikethrough",Od.postProcess],["emphasis",$d.postProcess],["fragments_join",Vg]];function Qs(){this.ruler=new Xn;for(let e=0;e<Au.length;e++)this.ruler.push(Au[e][0],Au[e][1]);this.ruler2=new Xn;for(let e=0;e<Tu.length;e++)this.ruler2.push(Tu[e][0],Tu[e][1])}Qs.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,o=e.cache;if(typeof o[t]<"u"){e.pos=o[t];return}let u=!1;if(e.level<a){for(let i=0;i<r;i++)if(e.level++,u=n[i](e,!0),e.level--,u){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;u||e.pos++,o[t]=e.pos};Qs.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const o=e.pos;let u=!1;if(e.level<a){for(let i=0;i<n;i++)if(u=t[i](e,!1),u){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(u){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Qs.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const o=this.ruler2.getRules(""),u=o.length;for(let i=0;i<u;i++)o[i](a)};Qs.prototype.State=Xs;function Gg(e){const t={};e=e||{},t.src_Any=Sd.source,t.src_Cc=Ed.source,t.src_Z=Ad.source,t.src_P=Pi.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><ï½]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function ri(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Ko(e){return Object.prototype.toString.call(e)}function Zg(e){return Ko(e)==="[object String]"}function Kg(e){return Ko(e)==="[object Object]"}function Yg(e){return Ko(e)==="[object RegExp]"}function Gl(e){return Ko(e)==="[object Function]"}function Jg(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Rd={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Xg(e){return Object.keys(e||{}).reduce(function(t,n){return t||Rd.hasOwnProperty(n)},!1)}const Qg={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},e2="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",t2="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function n2(e){e.__index__=-1,e.__text_cache__=""}function r2(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Zl(){return function(e,t){t.normalize(e)}}function Io(e){const t=e.re=Gg(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(e2),n.push(t.src_xn),t.src_tlds=n.join("|");function r(i){return i.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function o(i,l){throw new Error('(LinkifyIt) Invalid schema "'+i+'": '+l)}Object.keys(e.__schemas__).forEach(function(i){const l=e.__schemas__[i];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[i]=c,Kg(l)){Yg(l.validate)?c.validate=r2(l.validate):Gl(l.validate)?c.validate=l.validate:o(i,l),Gl(l.normalize)?c.normalize=l.normalize:l.normalize?o(i,l):c.normalize=Zl();return}if(Zg(l)){a.push(i);return}o(i,l)}),a.forEach(function(i){e.__compiled__[e.__schemas__[i]]&&(e.__compiled__[i].validate=e.__compiled__[e.__schemas__[i]].validate,e.__compiled__[i].normalize=e.__compiled__[e.__schemas__[i]].normalize)}),e.__compiled__[""]={validate:null,normalize:Zl()};const u=Object.keys(e.__compiled__).filter(function(i){return i.length>0&&e.__compiled__[i]}).map(Jg).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),n2(e)}function a2(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function ai(e,t){const n=new a2(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function tr(e,t){if(!(this instanceof tr))return new tr(e,t);t||Xg(e)&&(t=e,e={}),this.__opts__=ri({},Rd,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ri({},Qg,e),this.__compiled__={},this.__tlds__=t2,this.__tlds_replaced__=!1,this.re={},Io(this)}tr.prototype.add=function(t,n){return this.__schemas__[t]=n,Io(this),this};tr.prototype.set=function(t){return this.__opts__=ri(this.__opts__,t),this};tr.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,o,u,i,l,c,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],l.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(u=r.index+r[1].length,(this.__index__<0||u<this.__index__)&&(this.__schema__="",this.__index__=u,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(u=a.index+a[1].length,i=a.index+a[0].length,(this.__index__<0||u<this.__index__||u===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=u,this.__last_index__=i))),this.__index__>=0};tr.prototype.pretest=function(t){return this.re.pretest.test(t)};tr.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};tr.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(ai(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(ai(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};tr.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,ai(this,0)):null};tr.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,o){return r!==o[a-1]}).reverse(),Io(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Io(this),this)};tr.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};tr.prototype.onCompile=function(){};const Ja=2147483647,Tr=36,$i=1,Us=26,s2=38,o2=700,zd=72,Bd=128,Ud="-",u2=/^xn--/,i2=/[^\0-\x7F]/,l2=/[\x2E\u3002\uFF0E\uFF61]/g,c2={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Du=Tr-$i,Dr=Math.floor,Mu=String.fromCharCode;function Xr(e){throw new RangeError(c2[e])}function d2(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function jd(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(l2,".");const a=e.split("."),o=d2(a,t).join(".");return r+o}function qd(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const o=e.charCodeAt(n++);(o&64512)==56320?t.push(((a&1023)<<10)+(o&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const f2=e=>String.fromCodePoint(...e),p2=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Tr},Kl=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Hd=function(e,t,n){let r=0;for(e=n?Dr(e/o2):e>>1,e+=Dr(e/t);e>Du*Us>>1;r+=Tr)e=Dr(e/Du);return Dr(r+(Du+1)*e/(e+s2))},Wd=function(e){const t=[],n=e.length;let r=0,a=Bd,o=zd,u=e.lastIndexOf(Ud);u<0&&(u=0);for(let i=0;i<u;++i)e.charCodeAt(i)>=128&&Xr("not-basic"),t.push(e.charCodeAt(i));for(let i=u>0?u+1:0;i<n;){const l=r;for(let f=1,d=Tr;;d+=Tr){i>=n&&Xr("invalid-input");const m=p2(e.charCodeAt(i++));m>=Tr&&Xr("invalid-input"),m>Dr((Ja-r)/f)&&Xr("overflow"),r+=m*f;const h=d<=o?$i:d>=o+Us?Us:d-o;if(m<h)break;const g=Tr-h;f>Dr(Ja/g)&&Xr("overflow"),f*=g}const c=t.length+1;o=Hd(r-l,c,l==0),Dr(r/c)>Ja-a&&Xr("overflow"),a+=Dr(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},Vd=function(e){const t=[];e=qd(e);const n=e.length;let r=Bd,a=0,o=zd;for(const l of e)l<128&&t.push(Mu(l));const u=t.length;let i=u;for(u&&t.push(Ud);i<n;){let l=Ja;for(const f of e)f>=r&&f<l&&(l=f);const c=i+1;l-r>Dr((Ja-a)/c)&&Xr("overflow"),a+=(l-r)*c,r=l;for(const f of e)if(f<r&&++a>Ja&&Xr("overflow"),f===r){let d=a;for(let m=Tr;;m+=Tr){const h=m<=o?$i:m>=o+Us?Us:m-o;if(d<h)break;const g=d-h,T=Tr-h;t.push(Mu(Kl(h+g%T,0))),d=Dr(g/T)}t.push(Mu(Kl(d,0))),o=Hd(a,c,i===u),a=0,++i}++a,++r}return t.join("")},v2=function(e){return jd(e,function(t){return u2.test(t)?Wd(t.slice(4).toLowerCase()):t})},h2=function(e){return jd(e,function(t){return i2.test(t)?"xn--"+Vd(t):t})},Gd={version:"2.3.1",ucs2:{decode:qd,encode:f2},decode:Wd,encode:Vd,toASCII:h2,toUnicode:v2},m2={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},g2={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},_2={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},b2={default:m2,zero:g2,commonmark:_2},y2=/^(vbscript|javascript|file|data):/,x2=/^data:image\/(gif|png|jpeg|webp);/;function w2(e){const t=e.trim().toLowerCase();return y2.test(t)?x2.test(t):!0}const Zd=["http:","https:","mailto:"];function k2(e){const t=Fi(e,!0);if(t.hostname&&(!t.protocol||Zd.indexOf(t.protocol)>=0))try{t.hostname=Gd.toASCII(t.hostname)}catch{}return Js(Mi(t))}function S2(e){const t=Fi(e,!0);if(t.hostname&&(!t.protocol||Zd.indexOf(t.protocol)>=0))try{t.hostname=Gd.toUnicode(t.hostname)}catch{}return ns(Mi(t),ns.defaultChars+"%")}function dr(e,t){if(!(this instanceof dr))return new dr(e,t);t||Ii(e)||(t=e||{},e="default"),this.inline=new Qs,this.block=new Zo,this.core=new Ni,this.renderer=new ls,this.linkify=new tr,this.validateLink=w2,this.normalizeLink=k2,this.normalizeLinkText=S2,this.utils=Cm,this.helpers=Vo({},Mm),this.options={},this.configure(e),t&&this.set(t)}dr.prototype.set=function(e){return Vo(this.options,e),this};dr.prototype.configure=function(e){const t=this;if(Ii(e)){const n=e;if(e=b2[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};dr.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};dr.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};dr.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};dr.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};dr.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};dr.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};dr.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:Kd,setPrototypeOf:Yl,isFrozen:E2,getPrototypeOf:C2,getOwnPropertyDescriptor:A2}=Object;let{freeze:Vn,seal:fr,create:Yd}=Object,{apply:si,construct:oi}=typeof Reflect<"u"&&Reflect;Vn||(Vn=function(t){return t});fr||(fr=function(t){return t});si||(si=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return t.apply(n,a)});oi||(oi=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return new t(...r)});const io=Gn(Array.prototype.forEach),T2=Gn(Array.prototype.lastIndexOf),Jl=Gn(Array.prototype.pop),gs=Gn(Array.prototype.push),D2=Gn(Array.prototype.splice),xo=Gn(String.prototype.toLowerCase),Fu=Gn(String.prototype.toString),Pu=Gn(String.prototype.match),_s=Gn(String.prototype.replace),M2=Gn(String.prototype.indexOf),F2=Gn(String.prototype.trim),hr=Gn(Object.prototype.hasOwnProperty),Bn=Gn(RegExp.prototype.test),bs=P2(TypeError);function Gn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return si(e,t,r)}}function P2(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oi(e,n)}}function yt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xo;Yl&&Yl(e,null);let r=t.length;for(;r--;){let a=t[r];if(typeof a=="string"){const o=n(a);o!==a&&(E2(t)||(t[r]=o),a=o)}e[a]=!0}return e}function I2(e){for(let t=0;t<e.length;t++)hr(e,t)||(e[t]=null);return e}function Rr(e){const t=Yd(null);for(const[n,r]of Kd(e))hr(e,n)&&(Array.isArray(r)?t[n]=I2(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Rr(r):t[n]=r);return t}function ys(e,t){for(;e!==null;){const r=A2(e,t);if(r){if(r.get)return Gn(r.get);if(typeof r.value=="function")return Gn(r.value)}e=C2(e)}function n(){return null}return n}const Xl=Vn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Iu=Vn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Lu=Vn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L2=Vn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nu=Vn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N2=Vn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ql=Vn(["#text"]),ec=Vn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ou=Vn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tc=Vn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lo=Vn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),O2=fr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$2=fr(/<%[\w\W]*|[\w\W]*%>/gm),R2=fr(/\$\{[\w\W]*/gm),z2=fr(/^data-[\-\w.\u00B7-\uFFFF]+$/),B2=fr(/^aria-[\-\w]+$/),Jd=fr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U2=fr(/^(?:\w+script|data):/i),j2=fr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xd=fr(/^html$/i),q2=fr(/^[a-z][.\w]*(-[.\w]+)+$/i);var nc=Object.freeze({__proto__:null,ARIA_ATTR:B2,ATTR_WHITESPACE:j2,CUSTOM_ELEMENT:q2,DATA_ATTR:z2,DOCTYPE_NAME:Xd,ERB_EXPR:$2,IS_ALLOWED_URI:Jd,IS_SCRIPT_OR_DATA:U2,MUSTACHE_EXPR:O2,TMPLIT_EXPR:R2});const xs={element:1,text:3,progressingInstruction:7,comment:8,document:9},H2=function(){return typeof window>"u"?null:window},W2=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";n&&n.hasAttribute(a)&&(r=n.getAttribute(a));const o="dompurify"+(r?"#"+r:"");try{return t.createPolicy(o,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},rc=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Qd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H2();const t=Z=>Qd(Z);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==xs.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,a=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:u,Node:i,Element:l,NodeFilter:c,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:m,trustedTypes:h}=e,g=l.prototype,T=ys(g,"cloneNode"),A=ys(g,"remove"),w=ys(g,"nextSibling"),E=ys(g,"childNodes"),C=ys(g,"parentNode");if(typeof u=="function"){const Z=n.createElement("template");Z.content&&Z.content.ownerDocument&&(n=Z.content.ownerDocument)}let k,S="";const{implementation:x,createNodeIterator:F,createDocumentFragment:q,getElementsByTagName:H}=n,{importNode:P}=r;let L=rc();t.isSupported=typeof Kd=="function"&&typeof C=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:K,ERB_EXPR:G,TMPLIT_EXPR:ce,DATA_ATTR:O,ARIA_ATTR:ae,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:se,CUSTOM_ELEMENT:Y}=nc;let{IS_ALLOWED_URI:R}=nc,V=null;const ve=yt({},[...Xl,...Iu,...Lu,...Nu,...Ql]);let Se=null;const te=yt({},[...ec,...Ou,...tc,...lo]);let X=Object.seal(Yd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),J=null,ye=null,ue=!0,we=!0,ee=!1,Ue=!0,qe=!1,ot=!0,je=!1,Me=!1,at=!1,be=!1,Re=!1,$e=!1,Ge=!0,ut=!1;const $t="user-content-";let fe=!0,j=!1,pe={},ge=null;const ke=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ie=null;const Le=yt({},["audio","video","img","source","image","track"]);let Ze=null;const Ke=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",ft="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml";let Mt=et,gt=!1,Rt=null;const vn=yt({},[Qe,ft,et],Fu);let rn=yt({},["mi","mo","mn","ms","mtext"]),an=yt({},["annotation-xml"]);const wt=yt({},["title","style","font","a","script"]);let ct=null;const He=["application/xhtml+xml","text/html"],mt="text/html";let st=null,tn=null;const cn=n.createElement("form"),nt=function(D){return D instanceof RegExp||D instanceof Function},pt=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(tn&&tn===D)){if((!D||typeof D!="object")&&(D={}),D=Rr(D),ct=He.indexOf(D.PARSER_MEDIA_TYPE)===-1?mt:D.PARSER_MEDIA_TYPE,st=ct==="application/xhtml+xml"?Fu:xo,V=hr(D,"ALLOWED_TAGS")?yt({},D.ALLOWED_TAGS,st):ve,Se=hr(D,"ALLOWED_ATTR")?yt({},D.ALLOWED_ATTR,st):te,Rt=hr(D,"ALLOWED_NAMESPACES")?yt({},D.ALLOWED_NAMESPACES,Fu):vn,Ze=hr(D,"ADD_URI_SAFE_ATTR")?yt(Rr(Ke),D.ADD_URI_SAFE_ATTR,st):Ke,Ie=hr(D,"ADD_DATA_URI_TAGS")?yt(Rr(Le),D.ADD_DATA_URI_TAGS,st):Le,ge=hr(D,"FORBID_CONTENTS")?yt({},D.FORBID_CONTENTS,st):ke,J=hr(D,"FORBID_TAGS")?yt({},D.FORBID_TAGS,st):Rr({}),ye=hr(D,"FORBID_ATTR")?yt({},D.FORBID_ATTR,st):Rr({}),pe=hr(D,"USE_PROFILES")?D.USE_PROFILES:!1,ue=D.ALLOW_ARIA_ATTR!==!1,we=D.ALLOW_DATA_ATTR!==!1,ee=D.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=D.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=D.SAFE_FOR_TEMPLATES||!1,ot=D.SAFE_FOR_XML!==!1,je=D.WHOLE_DOCUMENT||!1,be=D.RETURN_DOM||!1,Re=D.RETURN_DOM_FRAGMENT||!1,$e=D.RETURN_TRUSTED_TYPE||!1,at=D.FORCE_BODY||!1,Ge=D.SANITIZE_DOM!==!1,ut=D.SANITIZE_NAMED_PROPS||!1,fe=D.KEEP_CONTENT!==!1,j=D.IN_PLACE||!1,R=D.ALLOWED_URI_REGEXP||Jd,Mt=D.NAMESPACE||et,rn=D.MATHML_TEXT_INTEGRATION_POINTS||rn,an=D.HTML_INTEGRATION_POINTS||an,X=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&nt(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&nt(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(we=!1),Re&&(be=!0),pe&&(V=yt({},Ql),Se=[],pe.html===!0&&(yt(V,Xl),yt(Se,ec)),pe.svg===!0&&(yt(V,Iu),yt(Se,Ou),yt(Se,lo)),pe.svgFilters===!0&&(yt(V,Lu),yt(Se,Ou),yt(Se,lo)),pe.mathMl===!0&&(yt(V,Nu),yt(Se,tc),yt(Se,lo))),D.ADD_TAGS&&(V===ve&&(V=Rr(V)),yt(V,D.ADD_TAGS,st)),D.ADD_ATTR&&(Se===te&&(Se=Rr(Se)),yt(Se,D.ADD_ATTR,st)),D.ADD_URI_SAFE_ATTR&&yt(Ze,D.ADD_URI_SAFE_ATTR,st),D.FORBID_CONTENTS&&(ge===ke&&(ge=Rr(ge)),yt(ge,D.FORBID_CONTENTS,st)),fe&&(V["#text"]=!0),je&&yt(V,["html","head","body"]),V.table&&(yt(V,["tbody"]),delete J.tbody),D.TRUSTED_TYPES_POLICY){if(typeof D.TRUSTED_TYPES_POLICY.createHTML!="function")throw bs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof D.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=D.TRUSTED_TYPES_POLICY,S=k.createHTML("")}else k===void 0&&(k=W2(h,a)),k!==null&&typeof S=="string"&&(S=k.createHTML(""));Vn&&Vn(D),tn=D}},Tt=yt({},[...Iu,...Lu,...L2]),ze=yt({},[...Nu,...N2]),_n=function(D){let U=C(D);(!U||!U.tagName)&&(U={namespaceURI:Mt,tagName:"template"});const re=xo(D.tagName),Ee=xo(U.tagName);return Rt[D.namespaceURI]?D.namespaceURI===ft?U.namespaceURI===et?re==="svg":U.namespaceURI===Qe?re==="svg"&&(Ee==="annotation-xml"||rn[Ee]):!!Tt[re]:D.namespaceURI===Qe?U.namespaceURI===et?re==="math":U.namespaceURI===ft?re==="math"&&an[Ee]:!!ze[re]:D.namespaceURI===et?U.namespaceURI===ft&&!an[Ee]||U.namespaceURI===Qe&&!rn[Ee]?!1:!ze[re]&&(wt[re]||!Tt[re]):!!(ct==="application/xhtml+xml"&&Rt[D.namespaceURI]):!1},Ft=function(D){gs(t.removed,{element:D});try{C(D).removeChild(D)}catch{A(D)}},Ht=function(D,U){try{gs(t.removed,{attribute:U.getAttributeNode(D),from:U})}catch{gs(t.removed,{attribute:null,from:U})}if(U.removeAttribute(D),D==="is")if(be||Re)try{Ft(U)}catch{}else try{U.setAttribute(D,"")}catch{}},on=function(D){let U=null,re=null;if(at)D="<remove></remove>"+D;else{const me=Pu(D,/^[\r\n\t ]+/);re=me&&me[0]}ct==="application/xhtml+xml"&&Mt===et&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const Ee=k?k.createHTML(D):D;if(Mt===et)try{U=new m().parseFromString(Ee,ct)}catch{}if(!U||!U.documentElement){U=x.createDocument(Mt,"template",null);try{U.documentElement.innerHTML=gt?S:Ee}catch{}}const Fe=U.body||U.documentElement;return D&&re&&Fe.insertBefore(n.createTextNode(re),Fe.childNodes[0]||null),Mt===et?H.call(U,je?"html":"body")[0]:je?U.documentElement:Fe},Mn=function(D){return F.call(D.ownerDocument||D,D,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},zn=function(D){return D instanceof d&&(typeof D.nodeName!="string"||typeof D.textContent!="string"||typeof D.removeChild!="function"||!(D.attributes instanceof f)||typeof D.removeAttribute!="function"||typeof D.setAttribute!="function"||typeof D.namespaceURI!="string"||typeof D.insertBefore!="function"||typeof D.hasChildNodes!="function")},Ln=function(D){return typeof i=="function"&&D instanceof i};function _e(Z,D,U){io(Z,re=>{re.call(t,D,U,tn)})}const Ne=function(D){let U=null;if(_e(L.beforeSanitizeElements,D,null),zn(D))return Ft(D),!0;const re=st(D.nodeName);if(_e(L.uponSanitizeElement,D,{tagName:re,allowedTags:V}),ot&&D.hasChildNodes()&&!Ln(D.firstElementChild)&&Bn(/<[/\w!]/g,D.innerHTML)&&Bn(/<[/\w!]/g,D.textContent)||D.nodeType===xs.progressingInstruction||ot&&D.nodeType===xs.comment&&Bn(/<[/\w]/g,D.data))return Ft(D),!0;if(!V[re]||J[re]){if(!J[re]&&Oe(re)&&(X.tagNameCheck instanceof RegExp&&Bn(X.tagNameCheck,re)||X.tagNameCheck instanceof Function&&X.tagNameCheck(re)))return!1;if(fe&&!ge[re]){const Ee=C(D)||D.parentNode,Fe=E(D)||D.childNodes;if(Fe&&Ee){const me=Fe.length;for(let Ce=me-1;Ce>=0;--Ce){const Te=T(Fe[Ce],!0);Te.__removalCount=(D.__removalCount||0)+1,Ee.insertBefore(Te,w(D))}}}return Ft(D),!0}return D instanceof l&&!_n(D)||(re==="noscript"||re==="noembed"||re==="noframes")&&Bn(/<\/no(script|embed|frames)/i,D.innerHTML)?(Ft(D),!0):(qe&&D.nodeType===xs.text&&(U=D.textContent,io([K,G,ce],Ee=>{U=_s(U,Ee," ")}),D.textContent!==U&&(gs(t.removed,{element:D.cloneNode()}),D.textContent=U)),_e(L.afterSanitizeElements,D,null),!1)},ne=function(D,U,re){if(Ge&&(U==="id"||U==="name")&&(re in n||re in cn))return!1;if(!(we&&!ye[U]&&Bn(O,U))){if(!(ue&&Bn(ae,U))){if(!Se[U]||ye[U]){if(!(Oe(D)&&(X.tagNameCheck instanceof RegExp&&Bn(X.tagNameCheck,D)||X.tagNameCheck instanceof Function&&X.tagNameCheck(D))&&(X.attributeNameCheck instanceof RegExp&&Bn(X.attributeNameCheck,U)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(U,D))||U==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&Bn(X.tagNameCheck,re)||X.tagNameCheck instanceof Function&&X.tagNameCheck(re))))return!1}else if(!Ze[U]){if(!Bn(R,_s(re,se,""))){if(!((U==="src"||U==="xlink:href"||U==="href")&&D!=="script"&&M2(re,"data:")===0&&Ie[D])){if(!(ee&&!Bn(oe,_s(re,se,"")))){if(re)return!1}}}}}}return!0},Oe=function(D){return D!=="annotation-xml"&&Pu(D,Y)},Et=function(D){_e(L.beforeSanitizeAttributes,D,null);const{attributes:U}=D;if(!U||zn(D))return;const re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se,forceKeepAttr:void 0};let Ee=U.length;for(;Ee--;){const Fe=U[Ee],{name:me,namespaceURI:Ce,value:Te}=Fe,We=st(me),Ye=Te;let Je=me==="value"?Ye:F2(Ye);if(re.attrName=We,re.attrValue=Je,re.keepAttr=!0,re.forceKeepAttr=void 0,_e(L.uponSanitizeAttribute,D,re),Je=re.attrValue,ut&&(We==="id"||We==="name")&&(Ht(me,D),Je=$t+Je),ot&&Bn(/((--!?|])>)|<\/(style|title|textarea)/i,Je)){Ht(me,D);continue}if(We==="attributename"&&Pu(Je,"href")){Ht(me,D);continue}if(re.forceKeepAttr)continue;if(!re.keepAttr){Ht(me,D);continue}if(!Ue&&Bn(/\/>/i,Je)){Ht(me,D);continue}qe&&io([K,G,ce],Ve=>{Je=_s(Je,Ve," ")});const Be=st(D.nodeName);if(!ne(Be,We,Je)){Ht(me,D);continue}if(k&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Ce)switch(h.getAttributeType(Be,We)){case"TrustedHTML":{Je=k.createHTML(Je);break}case"TrustedScriptURL":{Je=k.createScriptURL(Je);break}}if(Je!==Ye)try{Ce?D.setAttributeNS(Ce,me,Je):D.setAttribute(me,Je),zn(D)?Ft(D):Jl(t.removed)}catch{Ht(me,D)}}_e(L.afterSanitizeAttributes,D,null)},Q=function Z(D){let U=null;const re=Mn(D);for(_e(L.beforeSanitizeShadowDOM,D,null);U=re.nextNode();)_e(L.uponSanitizeShadowNode,U,null),Ne(U),Et(U),U.content instanceof o&&Z(U.content);_e(L.afterSanitizeShadowDOM,D,null)};return t.sanitize=function(Z){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=null,re=null,Ee=null,Fe=null;if(gt=!Z,gt&&(Z="<!-->"),typeof Z!="string"&&!Ln(Z))if(typeof Z.toString=="function"){if(Z=Z.toString(),typeof Z!="string")throw bs("dirty is not a string, aborting")}else throw bs("toString is not a function");if(!t.isSupported)return Z;if(Me||pt(D),t.removed=[],typeof Z=="string"&&(j=!1),j){if(Z.nodeName){const Te=st(Z.nodeName);if(!V[Te]||J[Te])throw bs("root node is forbidden and cannot be sanitized in-place")}}else if(Z instanceof i)U=on("<!---->"),re=U.ownerDocument.importNode(Z,!0),re.nodeType===xs.element&&re.nodeName==="BODY"||re.nodeName==="HTML"?U=re:U.appendChild(re);else{if(!be&&!qe&&!je&&Z.indexOf("<")===-1)return k&&$e?k.createHTML(Z):Z;if(U=on(Z),!U)return be?null:$e?S:""}U&&at&&Ft(U.firstChild);const me=Mn(j?Z:U);for(;Ee=me.nextNode();)Ne(Ee),Et(Ee),Ee.content instanceof o&&Q(Ee.content);if(j)return Z;if(be){if(Re)for(Fe=q.call(U.ownerDocument);U.firstChild;)Fe.appendChild(U.firstChild);else Fe=U;return(Se.shadowroot||Se.shadowrootmode)&&(Fe=P.call(r,Fe,!0)),Fe}let Ce=je?U.outerHTML:U.innerHTML;return je&&V["!doctype"]&&U.ownerDocument&&U.ownerDocument.doctype&&U.ownerDocument.doctype.name&&Bn(Xd,U.ownerDocument.doctype.name)&&(Ce="<!DOCTYPE "+U.ownerDocument.doctype.name+`>
`+Ce),qe&&io([K,G,ce],Te=>{Ce=_s(Ce,Te," ")}),k&&$e?k.createHTML(Ce):Ce},t.setConfig=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pt(Z),Me=!0},t.clearConfig=function(){tn=null,Me=!1},t.isValidAttribute=function(Z,D,U){tn||pt({});const re=st(Z),Ee=st(D);return ne(re,Ee,U)},t.addHook=function(Z,D){typeof D=="function"&&gs(L[Z],D)},t.removeHook=function(Z,D){if(D!==void 0){const U=T2(L[Z],D);return U===-1?void 0:D2(L[Z],U,1)[0]}return Jl(L[Z])},t.removeHooks=function(Z){L[Z]=[]},t.removeAllHooks=function(){L=rc()},t}var ef=Qd();const V2=new dr({html:!1,linkify:!0,typographer:!0,breaks:!0}),G2={USE_PROFILES:{html:!0},ADD_ATTR:["target","rel","class","colspan","rowspan","scope"],ADD_TAGS:["table","thead","tbody","tfoot","tr","th","td"]};ef.addHook("afterSanitizeAttributes",e=>{const t=e;if(!t||typeof t.tagName!="string"||t.tagName.toUpperCase()!=="A")return;t.setAttribute("target","_blank");const n=(t.getAttribute("rel")||"").split(/\s+/).filter(Boolean),r=["noopener","noreferrer","nofollow","ugc"],a=Array.from(new Set([...n,...r]));t.setAttribute("rel",a.join(" "))});function Za(e){if(!e)return"";const t=V2.render(e);return ef.sanitize(t,G2)}var Z2=M('<span class="sender-model-text svelte-1cnmaqf"> </span>'),K2=M('<span class="sender-token-count svelte-1cnmaqf" aria-label="Total tokens used" title="Total tokens used"> </span>'),Y2=M('<button type="button" aria-label="View reasoning trace"><!></button>'),J2=M('<button type="button" class="sender-citation-indicator svelte-1cnmaqf" aria-label="View web search details" title="View web search details"><!></button>'),X2=M('<span class="sender-tool-count svelte-1cnmaqf"> </span>'),Q2=M('<span class="sender-tool-tokens svelte-1cnmaqf"> </span>'),e_=M('<button type="button" class="sender-tool-indicator svelte-1cnmaqf"><!> <!> <!></button>'),t_=M('<span class="sender-model svelte-1cnmaqf"><!> <!> <!> <!> <!></span>'),n_=M('<span class="sender svelte-1cnmaqf"><span class="sender-label svelte-1cnmaqf"> <!></span></span>'),r_=M('<button type="button" class="attachment-edit svelte-1cnmaqf" aria-label="Edit and resend image" title="Edit and resend image"><!> <span class="attachment-edit-label svelte-1cnmaqf">Edit &amp; send</span></button>'),a_=M('<figure class="attachment-card svelte-1cnmaqf"><div class="attachment-shell svelte-1cnmaqf"><a class="attachment-link svelte-1cnmaqf" target="_blank" rel="noreferrer"><img loading="lazy" class="svelte-1cnmaqf"/></a> <!></div></figure>'),s_=M('<div class="message-attachments svelte-1cnmaqf"></div>'),o_=M('<div class="message-meta svelte-1cnmaqf"><time class="svelte-1cnmaqf"> </time></div>'),u_=M('<button type="button" class="message-action svelte-1cnmaqf" aria-label="Edit message"><!></button> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Retry message"><!></button>',1),i_=M('<button type="button" class="message-action svelte-1cnmaqf" aria-label="View usage details"><!></button>'),l_=M('<article><div><!> <div class="message-content svelte-1cnmaqf"><!> <!></div> <!> <div class="message-actions svelte-1cnmaqf"><button type="button"><!></button> <!> <!> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Delete message"><!></button></div></div></article>');function c_(e,t){Nt(t,!1);const n=$(),r=$(),a=$(),o=$();let u=le(t,"message",8),i=le(t,"toolSummary",8),l=le(t,"copied",8,!1),c=le(t,"disableDelete",8,!1);const f=pn();let d=$(!1),m=$([]),h=$(!1),g=$(!1),T=$("View tool usage"),A=$(null),w=$(null),E=$(null);const C=new Intl.NumberFormat(void 0,{maximumFractionDigits:0});function k(){f("copy",{message:u()})}function S(){f("openReasoning",{message:u()})}function x(){f("openTool",{message:u()})}function F(){f("openWebSearchDetails",{message:u()})}function q(){const fe=u().details?.generationId;fe&&f("openUsage",{id:fe})}function H(){f("edit",{message:u()})}function P(){f("retry",{message:u()})}function L(){c()||f("delete",{message:u()})}function K(fe){f("editAttachment",{message:u(),attachment:fe})}function G(fe){const j=fe.metadata?.filename;return typeof j=="string"&&j.trim()?j:null}function ce(fe){const j=G(fe);return j?`Open attachment ${j}`:"Open attachment"}function O(fe){return G(fe)??"Attachment preview"}const ae="America/New_York";function oe(fe){if(!fe)return null;const j=new Date(fe);if(Number.isNaN(j.getTime()))return null;const pe=new Intl.DateTimeFormat("en-US",{timeZone:"UTC",weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(j),ge=et=>pe.find(Mt=>Mt.type===et)?.value??"",ke=ge("weekday"),Ie=ge("month"),Le=ge("day"),Ze=ge("year"),Ke=ge("hour"),Qe=ge("minute"),ft=ge("second");return`${ke} ${Ie} ${Le} ${Ze} ${Ke}:${Qe}:${ft} UTC`.replace(/\s+/g," ")}function se(fe,j){if(!fe)return null;const pe=typeof fe=="string"&&fe?fe:String(fe),ge=new Date(pe);if(Number.isNaN(ge.getTime()))return{iso:pe,display:pe,tooltip:pe};try{const Ie=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:ae,timeZoneName:"short"}).formatToParts(ge),Le=wt=>Ie.find(ct=>ct.type===wt)?.value??"",Ze=Le("hour"),Ke=Le("minute"),Qe=Le("second"),ft=Le("dayPeriod"),et=Le("timeZoneName"),Mt=`${Ze}:${Ke} ${ft}${et?` ${et}`:""}`.trim(),gt=`${Ze}:${Ke}:${Qe} ${ft}${et?` ${et}`:""}`.trim(),Rt=new Intl.DateTimeFormat(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:ae,timeZoneName:"short"}),vn=oe(j??fe),rn=`${Rt.format(ge)} (${gt})`,an=vn?`${rn}
${vn}`:rn;return{iso:pe,display:Mt,tooltip:an}}catch(ke){console.warn("Failed to format timestamp",ke);const Ie=oe(j??fe);return{iso:pe,display:ge.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),tooltip:Ie??pe}}}xe(()=>z(i()),()=>{_(n,i()?.tokens?.totalTokens??null)}),xe(()=>s(n),()=>{_(E,s(n)!=null?`${C.format(s(n))} tokens`:null)}),xe(()=>z(i()),()=>{_(A,i()?.count&&i().count>0?`Ã${i().count}`:null)}),xe(()=>z(i()),()=>{_(g,!!i()?.used)}),xe(()=>{},()=>{_(w,null)}),xe(()=>(z(i()),s(E)),()=>{_(T,(()=>{const fe=[];return i()?.count&&i().count>0&&fe.push(`${i().count} ${i().count===1?"hop":"hops"}`),s(E)&&fe.push(`${s(E)}`),fe.length===0?"View tool usage":`View tool usage â ${fe.join(", ")}`})())}),xe(()=>z(u()),()=>{_(d,(u().details?.reasoning?.length??0)>0||!!u().details?.reasoningStatus)}),xe(()=>(z(u()),s(m),pa),()=>{const fe=u().details?.meta?.web_search_results;u().role==="assistant"&&(console.log("=== FULL MESSAGE DEBUG ==="),console.log("Message ID:",u().id),console.log("Message role:",u().role),console.log("Message.details:",JSON.stringify(u().details,null,2)),console.log("webSearchResults:",fe),console.log("Is Array?",Array.isArray(fe)),console.log("Length:",Array.isArray(fe)?fe.length:0),console.log("========================")),Array.isArray(fe)&&fe.length>0?(_(m,fe.map(j=>({url:j.url||"",title:j.title||j.name||"",content:j.snippet||j.content||j.description||""})).filter(j=>j.url)),console.log("Citations extracted:",s(m))):(_(m,pa(u().details?.citations??null,u().details?.meta??null,u().details??null,u().content??null,{content:typeof u().content=="string"?u().content:null})),console.log("Citations from collectCitations:",s(m)))}),xe(()=>s(m),()=>{_(r,s(m).length>0)}),xe(()=>z(u()),()=>{_(h,!!u().details?.webSearchConfig)}),xe(()=>z(u()),()=>{_(a,(u().attachments?.length??0)>0)}),xe(()=>z(u()),()=>{_(o,se(u().createdAt,u().createdAtUtc))}),fn(),Ut();var Y=l_(),R=v(Y);let V;var ve=v(R);{var Se=fe=>{var j=n_(),pe=v(j),ge=v(pe),ke=b(ge);{var Ie=Le=>{var Ze=t_(),Ke=v(Ze);{var Qe=wt=>{var ct=Z2(),He=v(ct);B(()=>W(He,`â ${z(u()),p(()=>u().details.model)??""}`)),y(wt,ct)};I(Ke,wt=>{z(u()),p(()=>u().details?.model)&&wt(Qe)})}var ft=b(Ke,2);{var et=wt=>{var ct=K2(),He=v(ct);B(()=>W(He,s(E))),y(wt,ct)};I(ft,wt=>{s(E)&&wt(et)})}var Mt=b(ft,2);{var gt=wt=>{var ct=Y2();let He;var mt=v(ct);nv(mt,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),B(st=>{He=At(ct,1,"sender-reasoning-indicator svelte-1cnmaqf",null,He,st),ie(ct,"title",(z(u()),p(()=>u().details?.reasoningStatus==="streaming"?"Reasoning stream in progress":"View reasoning trace")))},[()=>({streaming:u().details?.reasoningStatus==="streaming"})]),N("click",ct,S),y(wt,ct)};I(Mt,wt=>{s(d)&&wt(gt)})}var Rt=b(Mt,2);{var vn=wt=>{var ct=J2(),He=v(ct);ov(He,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),N("click",ct,F),y(wt,ct)};I(Rt,wt=>{s(h)&&wt(vn)})}var rn=b(Rt,2);{var an=wt=>{var ct=e_(),He=v(ct);cv(He,{size:14,strokeWidth:1.8,"aria-hidden":"true"});var mt=b(He,2);{var st=nt=>{var pt=X2(),Tt=v(pt);B(()=>W(Tt,s(A))),y(nt,pt)};I(mt,nt=>{s(A)&&nt(st)})}var tn=b(mt,2);{var cn=nt=>{var pt=Q2(),Tt=v(pt);B(()=>W(Tt,s(w))),y(nt,pt)};I(tn,nt=>{s(w)&&nt(cn)})}B(()=>{ie(ct,"aria-label",s(T)),ie(ct,"title",s(T))}),N("click",ct,x),y(wt,ct)};I(rn,wt=>{s(g)&&wt(an)})}y(Le,Ze)};I(ke,Le=>{z(u()),p(()=>u().role==="assistant")&&Le(Ie)})}B(()=>W(ge,`${z(u()),p(()=>u().role)??""} `)),y(fe,j)};I(ve,fe=>{z(u()),p(()=>u().role!=="user")&&fe(Se)})}var te=b(ve,2),X=v(te);{var J=fe=>{var j=Ae(),pe=de(j);Zu(pe,()=>(z(Za),z(u()),p(()=>Za(u().text)))),y(fe,j)};I(X,fe=>{z(u()),p(()=>u().text)&&fe(J)})}var ye=b(X,2);{var ue=fe=>{var j=s_();Lt(j,5,()=>(z(u()),p(()=>u().attachments)),pe=>pe.id??pe.displayUrl??pe.deliveryUrl,(pe,ge)=>{var ke=a_(),Ie=v(ke),Le=v(Ie),Ze=v(Le),Ke=b(Le,2);{var Qe=ft=>{var et=r_(),Mt=v(et);ml(Mt,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),N("click",et,()=>K(s(ge))),y(ft,et)};I(Ke,ft=>{z(u()),p(()=>u().role==="assistant")&&ft(Qe)})}B((ft,et)=>{ie(Le,"href",(s(ge),p(()=>s(ge).displayUrl||s(ge).deliveryUrl))),ie(Le,"aria-label",ft),ie(Ze,"src",(s(ge),p(()=>s(ge).displayUrl||s(ge).deliveryUrl))),ie(Ze,"alt",et)},[()=>(s(ge),p(()=>ce(s(ge)))),()=>(s(ge),p(()=>O(s(ge))))]),y(pe,ke)}),y(fe,j)};I(ye,fe=>{z(u()),p(()=>u().attachments?.length)&&fe(ue)})}Sa(te,fe=>ti?.(fe));var we=b(te,2);{var ee=fe=>{var j=o_(),pe=v(j),ge=v(pe);B(()=>{ie(pe,"datetime",(s(o),p(()=>s(o).iso))),ie(pe,"title",(s(o),p(()=>s(o).tooltip))),W(ge,(s(o),p(()=>s(o).display)))}),y(fe,j)};I(we,fe=>{s(o)&&fe(ee)})}var Ue=b(we,2),qe=v(Ue);let ot;var je=v(qe);{var Me=fe=>{av(fe,{size:16,strokeWidth:1.6,"aria-hidden":"true"})},at=fe=>{sv(fe,{size:16,strokeWidth:1.6,"aria-hidden":"true"})};I(je,fe=>{l()?fe(Me):fe(at,!1)})}var be=b(qe,2);{var Re=fe=>{var j=u_(),pe=de(j),ge=v(pe);ml(ge,{size:16,strokeWidth:1.6,"aria-hidden":"true"});var ke=b(pe,2),Ie=v(ke);uv(Ie,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),N("click",pe,H),N("click",ke,P),y(fe,j)};I(be,fe=>{z(u()),p(()=>u().role==="user")&&fe(Re)})}var $e=b(be,2);{var Ge=fe=>{var j=i_(),pe=v(j);rv(pe,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),N("click",j,q),y(fe,j)};I($e,fe=>{z(u()),p(()=>u().role==="assistant"&&u().details?.generationId)&&fe(Ge)})}var ut=b($e,2),$t=v(ut);lv($t,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),B((fe,j)=>{At(Y,1,(z(u()),p(()=>`message ${u().role}`)),"svelte-1cnmaqf"),V=At(R,1,"bubble svelte-1cnmaqf",null,V,fe),ot=At(qe,1,"message-action svelte-1cnmaqf",null,ot,j),ie(qe,"aria-label",l()?"Message copied":"Copy message"),ut.disabled=c()},[()=>({"has-attachments":s(a)}),()=>({copied:l()})]),N("click",qe,k),N("click",ut,L),y(e,Y),Ot()}var d_=M('<p class="reasoning-modal-subtitle svelte-2cxve6"> </p>'),f_=M('<span aria-live="polite"><span class="reasoning-status-indicator svelte-2cxve6" aria-hidden="true"></span> </span>'),p_=M('<p class="reasoning-modal-status svelte-2cxve6">No reasoning data received yet.</p>'),v_=M('<pre class="reasoning-modal-text svelte-2cxve6"> </pre>'),h_=M('<div class="reasoning-modal-layer svelte-2cxve6"><button type="button" class="reasoning-modal-backdrop svelte-2cxve6" aria-label="Close reasoning details"></button> <div class="reasoning-modal svelte-2cxve6" role="dialog" aria-modal="true" aria-labelledby="reasoning-modal-title" tabindex="-1"><header class="reasoning-modal-header svelte-2cxve6"><div class="svelte-2cxve6"><h2 id="reasoning-modal-title" class="svelte-2cxve6">Reasoning trace</h2> <!></div> <div class="reasoning-modal-actions svelte-2cxve6"><!> <button type="button" class="modal-close svelte-2cxve6" aria-label="Close reasoning details">Close</button></div></header> <section class="reasoning-modal-body svelte-2cxve6"><!></section></div></div>');function m_(e,t){Nt(t,!1);const n=pn();let r=le(t,"open",8,!1),a=le(t,"messageId",8,null),o=le(t,"segments",24,()=>[]),u=le(t,"status",8,null),i=$(null),l=$(null),c=$("");const f=12;let d=!0,m=!1;function h(k){if(!k||k.length===0)return"";let S="",x;for(const F of k){if(!F||typeof F.text!="string"||F.text.length===0)continue;const q=F.text;x&&F.type&&x!==F.type&&(S.endsWith(`
`)||(S+=`
`),S+=`
`),S.length>0&&!S.endsWith(" ")&&!S.endsWith(`
`)&&!S.endsWith("	")&&!S.endsWith("(")&&!S.endsWith("[")&&!S.endsWith("{")&&!S.endsWith("/")&&!S.endsWith("'")&&!S.endsWith("â")&&!/^[\s,.!?;:)/\]\}'"âºÂ»]/u.test(q)&&q[0]!=="'"&&q[0]!=="â"&&(S+=" "),S+=q,x=F.type??x}return S}td(()=>{r()&&!m&&(d=!0),m=r(),r()&&s(i)&&s(i).focus(),r()&&s(l)&&u()==="streaming"&&d&&Ec(l,s(l).scrollTop=s(l).scrollHeight)});function g(){if(!s(l))return;const{scrollTop:k,scrollHeight:S,clientHeight:x}=s(l);d=S-(k+x)<=f}function T(){n("close")}function A(k){r()&&k.key==="Escape"&&(k.preventDefault(),T())}xe(()=>z(o()),()=>{_(c,h(o()))}),fn(),Ut();var w=Ae();N("keydown",Os,A);var E=de(w);{var C=k=>{var S=h_(),x=v(S),F=b(x,2),q=v(F),H=v(q),P=b(v(H),2);{var L=R=>{var V=d_(),ve=v(V);B(()=>W(ve,`Message ID: ${a()??""}`)),y(R,V)};I(P,R=>{a()&&R(L)})}var K=b(H,2),G=v(K);{var ce=R=>{var V=f_(),ve=b(v(V));B(()=>{At(V,1,`reasoning-status ${u()}`,"svelte-2cxve6"),W(ve,` ${u()==="streaming"?"Streaming":"Complete"}`)}),y(R,V)};I(G,R=>{u()&&R(ce)})}var O=b(G,2),ae=b(q,2),oe=v(ae);{var se=R=>{var V=p_();y(R,V)},Y=R=>{var V=v_(),ve=v(V);B(()=>W(ve,s(c))),y(R,V)};I(oe,R=>{s(c),p(()=>s(c).length===0)?R(se):R(Y,!1)})}qn(ae,R=>_(l,R),()=>s(l)),qn(F,R=>_(i,R),()=>s(i)),N("click",x,T),N("click",O,T),N("scroll",ae,g),y(k,S)};I(E,k=>{r()&&k(C)})}y(e,w),Ot()}var g_=M('<p class="status">No tool activity recorded.</p>'),__=M('<span class="tool-usage-modal-status-pill svelte-12mixwl"> </span>'),b_=M('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Input</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),y_=M('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Output</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),x_=M('<p class="status tool-usage-status svelte-12mixwl">No details provided.</p>'),w_=M('<li class="tool-usage-modal-item svelte-12mixwl"><div class="tool-usage-modal-item-header svelte-12mixwl"><span class="tool-usage-modal-name svelte-12mixwl"> </span> <!></div> <details class="tool-usage-modal-details svelte-12mixwl"><summary class="tool-usage-modal-summary svelte-12mixwl">Show input &amp; output</summary> <!> <!> <!></details></li>'),k_=M('<ul class="tool-usage-modal-list svelte-12mixwl"></ul>'),S_=M('<p class="model-settings-subtitle"> </p>'),E_=M('<h2 id="tool-usage-modal-title">Tools used</h2> <!>',1);function C_(e,t){Nt(t,!1);const n=pn();let r=le(t,"open",8,!1),a=le(t,"messageId",8,null),o=le(t,"tools",24,()=>[]);function u(){n("close")}Ut();var i=Ae(),l=de(i);{var c=f=>{Wr(f,{get open(){return r()},labelledBy:"tool-usage-modal-title",modalClass:"tool-usage-modal",bodyClass:"tool-usage-body",closeLabel:"Close tool usage details",$$events:{close:u},children:(d,m)=>{var h=Ae(),g=de(h);{var T=w=>{var E=g_();y(w,E)},A=w=>{var E=k_();Lt(E,5,o,C=>C.id,(C,k)=>{var S=w_(),x=v(S),F=v(x),q=v(F),H=b(F,2);{var P=se=>{var Y=__(),R=v(Y);B(()=>W(R,(s(k),p(()=>s(k).status)))),y(se,Y)};I(H,se=>{s(k),p(()=>s(k).status)&&se(P)})}var L=b(x,2),K=b(v(L),2);{var G=se=>{var Y=b_(),R=b(v(Y),2),V=v(R);Zu(V,()=>(z(Za),s(k),p(()=>Za(s(k).input)))),Sa(R,ve=>ti?.(ve)),y(se,Y)};I(K,se=>{s(k),p(()=>s(k).input)&&se(G)})}var ce=b(K,2);{var O=se=>{var Y=y_(),R=b(v(Y),2),V=v(R);Zu(V,()=>(z(Za),s(k),p(()=>Za(s(k).result)))),Sa(R,ve=>ti?.(ve)),y(se,Y)};I(ce,se=>{s(k),p(()=>s(k).result)&&se(O)})}var ae=b(ce,2);{var oe=se=>{var Y=x_();y(se,Y)};I(ae,se=>{s(k),p(()=>!s(k).input&&!s(k).result)&&se(oe)})}B(()=>W(q,(s(k),p(()=>s(k).name)))),y(C,S)}),y(w,E)};I(g,w=>{z(o()),p(()=>o().length===0)?w(T):w(A,!1)})}y(d,h)},$$slots:{default:!0,heading:(d,m)=>{var h=E_(),g=b(de(h),2);{var T=A=>{var w=S_(),E=v(w);B(()=>W(E,`Message ID: ${a()??""}`)),y(A,w)};I(g,A=>{a()&&A(T)})}y(d,h)}}})};I(l,f=>{r()&&f(c)})}y(e,i),Ot()}var A_=M('<p class="status svelte-1oswcu0">No web search details available.</p>'),T_=M('<div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Context Size</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Amount of search context provided to the model</div></div>'),D_=M('<div class="detail-item full-width svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Custom Search Prompt</div> <div class="detail-value prompt svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Instructions for how to incorporate search results</div></div>'),M_=M('<div class="details-grid svelte-1oswcu0"><div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Search Engine</div> <div class="detail-value engine svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0"><!></div></div> <div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Max Results</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Number of search results retrieved</div></div> <!> <!></div>'),F_=M('<p class="model-settings-subtitle"> </p>'),P_=M('<h2 id="web-search-details-modal-title">Web Search Details</h2> <!>',1);function I_(e,t){Nt(t,!1);const n=pn();let r=le(t,"open",8,!1),a=le(t,"messageId",8,null),o=le(t,"details",8,null);function u(){n("close")}function i(m){return m?m==="native"?"Native (OpenAI/Anthropic)":m==="exa"?"Exa":m:"Auto"}function l(m){return m?m.charAt(0).toUpperCase()+m.slice(1):"Default"}Ut();var c=Ae(),f=de(c);{var d=m=>{Wr(m,{get open(){return r()},labelledBy:"web-search-details-modal-title",modalClass:"web-search-details-modal",bodyClass:"web-search-details-modal-body",closeLabel:"Close web search details",$$events:{close:u},children:(h,g)=>{var T=Ae(),A=de(T);{var w=C=>{var k=A_();y(C,k)},E=C=>{var k=M_(),S=v(k),x=b(v(S),2),F=v(x),q=b(x,2),H=v(q);{var P=Y=>{var R=nn("Automatic selection based on model provider");y(Y,R)},L=Y=>{var R=Ae(),V=de(R);{var ve=te=>{var X=nn("Using provider's built-in web search");y(te,X)},Se=te=>{var X=Ae(),J=de(X);{var ye=ue=>{var we=nn("Using Exa's AI-powered search API");y(ue,we)};I(J,ue=>{z(o()),p(()=>o().engine==="exa")&&ue(ye)},!0)}y(te,X)};I(V,te=>{z(o()),p(()=>o().engine==="native")?te(ve):te(Se,!1)},!0)}y(Y,R)};I(H,Y=>{z(o()),p(()=>!o().engine||o().engine===null)?Y(P):Y(L,!1)})}var K=b(S,2),G=b(v(K),2),ce=v(G),O=b(K,2);{var ae=Y=>{var R=T_(),V=b(v(R),2),ve=v(V);B(Se=>W(ve,Se),[()=>(z(o()),p(()=>l(o().contextSize)))]),y(Y,R)};I(O,Y=>{z(o()),p(()=>o().contextSize)&&Y(ae)})}var oe=b(O,2);{var se=Y=>{var R=D_(),V=b(v(R),2),ve=v(V);B(()=>W(ve,(z(o()),p(()=>o().searchPrompt)))),y(Y,R)};I(oe,Y=>{z(o()),p(()=>o().searchPrompt&&o().searchPrompt.trim())&&Y(se)})}B(Y=>{W(F,Y),W(ce,(z(o()),p(()=>o().maxResults??5)))},[()=>(z(o()),p(()=>i(o().engine)))]),y(C,k)};I(A,C=>{o()?C(E,!1):C(w)})}y(h,T)},$$slots:{default:!0,heading:(h,g)=>{var T=P_(),A=b(de(T),2);{var w=E=>{var C=F_(),k=v(C);B(()=>W(k,`Message ID: ${a()??""}`)),y(E,C)};I(A,E=>{a()&&E(w)})}y(h,T)}}})};I(f,m=>{r()&&m(d)})}y(e,c),Ot()}var L_=M('<div class="conversation-item svelte-26wxji"><!></div>'),N_=M('<section class="conversation svelte-26wxji" aria-live="polite"></section> <!> <!> <!> <!>',1);function O_(e,t){Nt(t,!1);const n=()=>Dt(k,"$toolUsageModal",u),r=()=>Dt(S,"$reasoningModal",u),a=()=>Dt(x,"$citationsModal",u),o=()=>Dt(F,"$webSearchDetailsModal",u),[u,i]=yr();let l=le(t,"messages",24,()=>[]),c=le(t,"disableDelete",8,!1),f=$(null),d=$(null),m=null,h=$([]),g=$({}),T=$({});const A="tool";let w=!1;const E=12;let C=!0;const k=kh(),S=mh(),x=xd(),F=Sh(),q=pn();td(()=>{if(s(f)){if(w){w=!1;return}C&&Ec(f,s(f).scrollTop=s(f).scrollHeight)}});function H(){if(!s(f))return;const{scrollTop:ee,scrollHeight:Ue,clientHeight:qe}=s(f);C=Ue-(ee+qe)<=E}function P(ee){ee&&q("openGenerationDetails",{id:ee})}async function L(ee){try{await navigator.clipboard.writeText(ee.text??"")}catch(Ue){console.error("Failed to copy message",Ue);return}_(d,ee.id),w=!0,m&&clearTimeout(m),m=setTimeout(()=>{w=!0,_(d,null),m=null},2e3)}ts(()=>{m&&clearTimeout(m)});function K(ee){k.openForMessage(l(),s(T),ee.id,A)}function G(){k.close()}function ce(ee){S.openForMessage(ee)}function O(){S.close()}function ae(ee){const Ue=pa(ee.details?.citations??null,ee.details?.meta??null,ee.details??null);x.openWithCitations(ee.id,Ue)}function oe(){x.close()}function se(ee){F.openForMessage(ee)}function Y(){F.close()}function R(ee){ee&&q("deleteMessage",{id:ee.id})}function V(ee){ee&&q("retryMessage",{id:ee.id})}function ve(ee){ee&&q("editMessage",{id:ee.id})}function Se(ee){!ee?.message||!ee?.attachment||q("editAssistantAttachment",ee)}xe(()=>z(l()),()=>{const ee=yh(l(),A);_(h,ee.visibleMessages),_(g,ee.assistantToolUsage),_(T,ee.messageIndexMap)}),xe(()=>(z(l()),s(T)),()=>{k.syncEntries(l(),s(T),A)}),xe(()=>z(l()),()=>{S.syncFromMessages(l())}),fn(),Ut();var te=N_(),X=de(te);Lt(X,5,()=>s(h),ee=>ee.id,(ee,Ue)=>{var qe=L_(),ot=v(qe);{let je=Gt(()=>(s(d),s(Ue),p(()=>s(d)===s(Ue).id)));c_(ot,{get message(){return s(Ue)},get toolSummary(){return s(g),s(Ue),p(()=>s(g)[s(Ue).id])},get copied(){return s(je)},get disableDelete(){return c()},$$events:{copy:Me=>L(Me.detail.message),openTool:Me=>K(Me.detail.message),openReasoning:Me=>ce(Me.detail.message),openCitations:Me=>ae(Me.detail.message),openWebSearchDetails:Me=>se(Me.detail.message),openUsage:Me=>P(Me.detail.id),delete:Me=>R(Me.detail.message),retry:Me=>V(Me.detail.message),edit:Me=>ve(Me.detail.message),editAttachment:Me=>Se(Me.detail)}})}y(ee,qe)}),qn(X,ee=>_(f,ee),()=>s(f));var J=b(X,2);C_(J,{get open(){return n(),p(()=>n().open)},get messageId(){return n(),p(()=>n().messageId)},get tools(){return n(),p(()=>n().tools)},$$events:{close:G}});var ye=b(J,2);m_(ye,{get open(){return r(),p(()=>r().open)},get messageId(){return r(),p(()=>r().messageId)},get segments(){return r(),p(()=>r().segments)},get status(){return r(),p(()=>r().status)},$$events:{close:O}});var ue=b(ye,2);Nh(ue,{get open(){return a(),p(()=>a().open)},get messageId(){return a(),p(()=>a().messageId)},get citations(){return a(),p(()=>a().citations)},$$events:{close:oe}});var we=b(ue,2);I_(we,{get open(){return o(),p(()=>o().open)},get messageId(){return o(),p(()=>o().messageId)},get details(){return o(),p(()=>o().details)},$$events:{close:Y}}),N("scroll",X,H),y(e,te),Ot(),i()}const $_=[{key:"temperature",aliases:["temperature"],label:"Temperature",description:"Higher values increase randomness.",fallback:{type:"number",min:0,max:2,step:.1}},{key:"top_p",aliases:["top_p"],label:"Top P",description:"Limits sampling to a cumulative probability mass.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_k",aliases:["top_k"],label:"Top K",description:"Restrict sampling to the top K tokens.",fallback:{type:"integer",min:1,max:400,step:1}},{key:"min_p",aliases:["min_p"],label:"Min P",description:"Nucleus sampling floor; smaller values widen sampling.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_a",aliases:["top_a"],label:"Top A",description:"Alternative nucleus control for certain models.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"max_tokens",aliases:["max_tokens","max_output_tokens"],label:"Max completion tokens",description:"Upper bound on tokens generated in the response.",fallback:{type:"integer",min:1,max:32768,step:1}},{key:"frequency_penalty",aliases:["frequency_penalty"],label:"Frequency penalty",description:"Penalize frequent tokens; useful to reduce repetition.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"presence_penalty",aliases:["presence_penalty"],label:"Presence penalty",description:"Encourage introducing new topics by penalizing seen tokens.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"repetition_penalty",aliases:["repetition_penalty"],label:"Repetition penalty",description:"Higher values push the model away from repeating itself.",fallback:{type:"number",min:0,max:2,step:.05}},{key:"top_logprobs",aliases:["top_logprobs"],label:"Top logprobs",description:"Return log probabilities for the top N tokens per step.",fallback:{type:"integer",min:0,max:20,step:1}},{key:"seed",aliases:["seed"],label:"Seed",description:"Deterministic seed (when supported).",fallback:{type:"integer",min:0,step:1}},{key:"parallel_tool_calls",aliases:["parallel_tool_calls"],label:"Parallel tool calls",description:"Allow the model to invoke multiple tools simultaneously.",fallback:{type:"boolean"}},{key:"structured_outputs",aliases:["structured_outputs","json_schema","response_format"],label:"Structured outputs",description:"Favor structured responses when supported by the provider.",fallback:{type:"boolean"}},{key:"safe_prompt",aliases:["safe_prompt"],label:"Safe prompt",description:"Ask the provider to apply additional safety prompting.",fallback:{type:"boolean"}},{key:"raw_mode",aliases:["raw_mode"],label:"Raw mode",description:"Bypass guardrails when the provider allows it.",fallback:{type:"boolean"}}];function Is(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function $u(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);if(Number.isFinite(t))return t}}function tf(e){const t={};if(!e||!e.capabilities)return t;const r=e.capabilities.parameters;if(!r||typeof r!="object")return t;function a(o,u){const i=Is(o);if(!i||!u||typeof u!="object")return;const l=u,c={},f=l.type??l.datatype??l.kind;typeof f=="string"&&(c.type=f.toLowerCase());const d=l.min??l.minimum??l.lower_bound??l.minimum_value,m=l.max??l.maximum??l.upper_bound??l.maximum_value,h=l.step??l.increment??l.resolution,g=$u(d),T=$u(m),A=$u(h);g!==void 0&&(c.min=g),T!==void 0&&(c.max=T),A!==void 0&&(c.step=A),t[i]=c;const w=l.properties;if(w&&typeof w=="object")for(const[E,C]of Object.entries(w))a(`${o}.${E}`,C)}for(const[o,u]of Object.entries(r))a(o,u);return t}function nf(e){const t=new Set;if(!e)return t;const n=e.supported_parameters_normalized;if(Array.isArray(n))for(const a of n){const o=Is(a);o&&t.add(o)}const r=e.supported_parameters;if(Array.isArray(r))for(const a of r){const o=Is(a);o&&t.add(o)}if(t.size===0)for(const a of Ai(e)){const o=Is(a);o&&t.add(o)}return t}function R_(e,t){const n=e.fallback;if(n.type==="boolean")return{key:e.key,label:e.label,description:e.description,type:"boolean"};const r={key:e.key,label:e.label,description:e.description,type:n.type,min:n.min,max:n.max,step:n.step};if(!t)return r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r;const a=t.type?.toLowerCase();return a==="boolean"?{key:e.key,label:e.label,description:e.description,type:"boolean"}:(a==="integer"||a==="int"?r.type="integer":(a==="number"||a==="float"||a==="double")&&(r.type="number"),t.min!==void 0&&(r.min=t.min),t.max!==void 0&&(r.max=t.max),t.step!==void 0&&(r.step=t.step),r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r)}function z_(e,t){const n=nf(e),r=new Set(t?Object.keys(t):[]),a=tf(e),o=[],u=new Set;for(const i of $_){if(!i.aliases.some(d=>n.has(d))&&!r.has(i.key)||u.has(i.key))continue;const c=i.aliases.map(d=>a[d]).find(d=>d!==void 0),f=R_(i,c);"min"in f&&"max"in f&&f.min!==void 0&&f.max!==void 0&&f.min>=f.max&&(f.min=void 0,f.max=void 0),o.push(f),u.add(i.key)}return o}function rf(e,t){const n=e?.[t];return typeof n=="number"&&Number.isFinite(n)?n:void 0}function Lo(e,t){let n=e;return t.min!==void 0&&(n=Math.max(n,t.min)),t.max!==void 0&&(n=Math.min(n,t.max)),n}function af(e){const t=e.min??0,n=e.max??t;if(t<=0&&n>=0)return Lo(0,e);const r=t+(n-t)/2;return Lo(r,e)}function B_(e,t){const n=rf(t,e.key);return n!==void 0?Lo(n,e):af(e)}function ac(e){if(e.step&&e.step>0)return e.step;if(e.type==="integer")return 1;const t=e.min??0,r=(e.max??t+1)-t;if(!Number.isFinite(r)||r<=0)return .01;const a=r/100;return a>0?a:.01}function U_(e,t){const n=e.min??0,a=(e.max??n)-n;if(!Number.isFinite(a)||a===0)return"0%";const u=(Lo(t??af(e),e)-n)/a*100;return`${Math.min(100,Math.max(0,u))}%`}const j_=new Intl.NumberFormat(void 0,{maximumFractionDigits:4});function No(e){return typeof e=="number"&&Number.isFinite(e)?String(e):""}function ws(e,t){return t.type==="integer"?String(Math.round(e)):j_.format(e)}var q_=M('<div class="setting-range"><div class="setting-range-header"><span> </span> <button type="button" class="range-reset">Use default</button></div> <input class="range-input" type="range"/> <div class="range-extents"><span> </span> <span> </span></div></div>');function H_(e,t){Nt(t,!1);const n=$(),r=$(),a=$(),o=$(),u=$();let i=le(t,"field",8),l=le(t,"parameters",8),c=le(t,"numericValue",8),f=le(t,"hasCustom",8,!1),d=le(t,"handlers",8);xe(()=>(z(i()),z(l())),()=>{_(n,B_(i(),l()))}),xe(()=>(z(i()),z(c())),()=>{_(r,U_(i(),c()))}),xe(()=>(z(c()),z(i())),()=>{_(a,c()!==void 0?ws(c(),i()):"Provider default")}),xe(()=>(z(i()),s(n)),()=>{_(o,i().min??s(n))}),xe(()=>(z(i()),s(n)),()=>{_(u,i().max??s(n))}),fn(),Ut();var m=q_(),h=v(m),g=v(h);let T;var A=v(g),w=b(g,2),E=b(h,2),C=b(E,2),k=v(C),S=v(k),x=b(k,2),F=v(x);B((q,H,P,L)=>{T=At(g,1,"range-value",null,T,q),W(A,s(a)),w.disabled=!f(),ie(E,"min",(z(i()),p(()=>i().min))),ie(E,"max",(z(i()),p(()=>i().max))),ie(E,"step",H),It(E,s(n)),An(E,`--slider-fill:${s(r)};`),ie(E,"aria-valuemin",(z(i()),p(()=>i().min))),ie(E,"aria-valuemax",(z(i()),p(()=>i().max))),ie(E,"aria-valuenow",c()??void 0),ie(E,"aria-valuetext",s(a)),W(S,P),W(F,L)},[()=>({default:!f()}),()=>(z(ac),z(i()),p(()=>ac(i()))),()=>(z(ws),s(o),z(i()),p(()=>ws(s(o),i()))),()=>(z(ws),s(u),z(i()),p(()=>ws(s(u),i())))]),N("click",w,()=>d().onRangeReset(i().key)),N("input",E,q=>d().onSliderInput(i().key,q)),y(e,m),Ot()}var W_=M('<span class="setting-hint"> </span>'),V_=M('<input class="input-control" type="number" placeholder="Default"/>'),G_=M('<div class="setting-boolean"><input type="checkbox"/> <span>Enabled</span></div>'),Z_=M('<label class="setting"><div class="setting-header"><span class="setting-label"> </span> <!></div> <!></label>');function K_(e,t){Nt(t,!1);let n=le(t,"field",8),r=le(t,"parameters",8),a=le(t,"handlers",8);const o=w=>w.type==="number"||w.type==="integer";let u=$(),i=$(!1);xe(()=>(z(n()),z(r())),()=>{o(n())?_(u,rf(r(),n().key)):_(u,void 0)}),xe(()=>(z(r()),z(n())),()=>{_(i,r()?.[n().key]!=null)}),fn(),Ut();var l=Z_(),c=v(l),f=v(c),d=v(f),m=b(f,2);{var h=w=>{var E=W_(),C=v(E);B(()=>W(C,(z(n()),p(()=>n().description)))),y(w,E)};I(m,w=>{z(n()),p(()=>n().description)&&w(h)})}var g=b(c,2);{var T=w=>{var E=Ae(),C=de(E);{var k=x=>{H_(x,{get field(){return n()},get parameters(){return r()},get numericValue(){return s(u)},get hasCustom(){return s(i)},get handlers(){return a()}})},S=x=>{var F=V_();B(q=>{ie(F,"inputmode",(z(n()),p(()=>n().type==="integer"?"numeric":"decimal"))),ie(F,"step",(z(n()),p(()=>n().step??(n().type==="integer"?1:"any")))),ie(F,"min",(z(n()),p(()=>n().min??void 0))),ie(F,"max",(z(n()),p(()=>n().max??void 0))),It(F,q)},[()=>(z(No),z(r()),z(n()),p(()=>No(r()?.[n().key])))]),N("change",F,q=>a().onNumberChange(n().key,q)),y(x,F)};I(C,x=>{z(n()),p(()=>n().min!==void 0&&n().max!==void 0)?x(k):x(S,!1)})}y(w,E)},A=w=>{var E=Ae(),C=de(E);{var k=S=>{var x=G_(),F=v(x);B(()=>{ie(F,"id",(z(n()),p(()=>`field-${n().key}`))),Kn(F,(z(r()),z(n()),p(()=>r()?.[n().key]===!0)))}),N("change",F,q=>a().onBooleanChange(n().key,q)),y(S,x)};I(C,S=>{z(n()),p(()=>n().type==="boolean")&&S(k)},!0)}y(w,E)};I(g,w=>{z(n()),p(()=>o(n()))?w(T):w(A,!1)})}B(()=>W(d,(z(n()),p(()=>n().label)))),y(e,l),Ot()}var Y_=M("<option> </option>"),J_=M('<label class="reasoning-field"><span>Effort</span> <select class="select-control"><option>Provider default</option><!></select></label>'),X_=M('<label class="reasoning-field"><span>Max reasoning tokens</span> <input class="input-control" type="number" inputmode="numeric" placeholder="Default"/></label>'),Q_=M('<section class="setting reasoning"><div class="setting-header"><span class="setting-label">Reasoning tokens</span> <span class="setting-hint">Adjust effort, budget, or output visibility when the provider supports reasoning traces.</span></div> <div class="reasoning-controls"><label class="reasoning-field"><span>Enabled behavior</span> <select class="select-control"><option>Use provider default</option><option>Force enabled</option><option>Disable reasoning</option></select></label> <!> <!> <label class="reasoning-toggle"><input type="checkbox"/> <span>Exclude reasoning from responses</span></label></div></section>');function eb(e,t){Nt(t,!1);let n=le(t,"reasoning",8),r=le(t,"handlers",8);Ut();var a=Q_(),o=b(v(a),2),u=v(o),i=b(v(u),2),l=v(i);l.value=l.__value="default";var c=b(l);c.value=c.__value="on";var f=b(c);f.value=f.__value="off";var d;In(i);var m=b(u,2);{var h=E=>{var C=J_(),k=b(v(C),2),S=v(k);S.value=S.__value="";var x=b(S);Lt(x,1,()=>(z(n()),p(()=>n().options)),Jn,(q,H)=>{var P=Y_(),L=v(P),K={};B(G=>{W(L,G),K!==(K=s(H))&&(P.value=(P.__value=s(H))??"")},[()=>(s(H),p(()=>s(H).charAt(0).toUpperCase()+s(H).slice(1)))]),y(q,P)});var F;In(k),B(()=>{ie(C,"aria-disabled",(z(n()),p(()=>!n().effort.supported))),k.disabled=(z(n()),p(()=>!n().effort.supported)),F!==(F=(z(n()),p(()=>n().effort.supported?n().effort.value??"":"")))&&(k.value=(k.__value=(z(n()),p(()=>n().effort.supported?n().effort.value??"":"")))??"",xn(k,(z(n()),p(()=>n().effort.supported?n().effort.value??"":""))))}),N("change",k,function(...q){r().onEffortChange?.apply(this,q)}),y(E,C)};I(m,E=>{z(n()),p(()=>n().effort.showField)&&E(h)})}var g=b(m,2);{var T=E=>{var C=X_(),k=b(v(C),2);B(S=>{ie(C,"aria-disabled",(z(n()),p(()=>!n().maxTokens.supported))),ie(k,"min",(z(n()),p(()=>n().schemas.maxTokens?.min??void 0))),ie(k,"max",(z(n()),p(()=>n().schemas.maxTokens?.max??void 0))),ie(k,"step",(z(n()),p(()=>n().schemas.maxTokens?.step??1))),k.disabled=(z(n()),p(()=>!n().maxTokens.supported)),It(k,S)},[()=>(z(No),z(n()),p(()=>No(n().maxTokens.value)))]),N("change",k,function(...S){r().onMaxTokensChange?.apply(this,S)}),y(E,C)};I(g,E=>{z(n()),p(()=>n().maxTokens.showField)&&E(T)})}var A=b(g,2),w=v(A);B(()=>{d!==(d=(z(n()),p(()=>n().enabledSelection)))&&(i.value=(i.__value=(z(n()),p(()=>n().enabledSelection)))??"",xn(i,(z(n()),p(()=>n().enabledSelection)))),Kn(w,(z(n()),p(()=>n().exclude)))}),N("change",i,function(...E){r().onEnabledChange?.apply(this,E)}),N("change",w,function(...E){r().onExcludeChange?.apply(this,E)}),y(e,a),Ot()}const tb=["reasoning","reasoning_effort","reasoning_max_tokens","reasoning_exclude","reasoning_enabled","include_reasoning"],co={effort:["reasoning.effort","reasoning_effort"],maxTokens:["reasoning.max_tokens","reasoning_max_tokens","thinking_budget"],exclude:["reasoning.exclude","reasoning_exclude","include_reasoning"],enabled:["reasoning.enabled","reasoning_enabled"]};function nb(e){if(!e)return!1;const t=["openai/o1","openai/o3","openai/gpt-5","gpt-5","/grok","grok-"],n=[],r=o=>{if(typeof o!="string")return;const u=o.trim().toLowerCase();u&&n.push(u)};if(r(e.id),r(e.name),Array.isArray(e.tags))for(const o of e.tags)r(o);const a=e;return r(a.series),r(a.family),n.some(o=>t.some(u=>o.includes(u)))}function rb(e){const t=[];for(const n of e){const r=Is(n);r&&t.push(r)}return t}function ab(){return yn(mn,e=>e.data?.parameters??null)}function sb(e,t){return yn([e,t],([n,r])=>z_(n,r))}function ob(e){return yn(e,t=>!!(t&&Object.keys(t).length>0))}function ub(e){return yn(e,t=>tf(t))}function ib(e){return yn(e,t=>nf(t))}function lb(e){return yn(e,t=>{const n=r=>{for(const a of rb(r)){const o=t[a];if(o)return o}};return{effort:n(co.effort),maxTokens:n(co.maxTokens),exclude:n(co.exclude),enabled:n(co.enabled)}})}function cb(e){return yn(e,t=>t?.reasoning??null)}function db(e,t,n,r,a){const o=["low","medium","high"];return yn([e,t,n,r,a],([u,i,l,c,f])=>{const d=i?.effort??null,m=i?.max_tokens??null,h=i?.exclude===!0,g=i?i.enabled===!0?"on":i.enabled===!1?"off":"default":"default",T=(()=>{if(u?.reasoning&&Object.keys(u.reasoning).length>0)return!0;for(const q of tb)if(l.has(q))return!0;for(const q of Object.values(c))if(q)return!0;return!1})(),A=!!(c.effort||l.has("reasoning_effort")||nb(f)),w=!!(c.maxTokens||l.has("reasoning_max_tokens")),E=d!==null,C=m!==null;return{supported:T,schemas:c,enabledSelection:g,options:o,effort:{value:d,supported:T&&(A||E),showField:A||E},maxTokens:{value:m,supported:T&&(w||C),showField:w||C},exclude:h}})}function fb(){return ln(null)}function pb(){const e=ln(!1),t=ln(""),n=fb(),r=ab(),a=sb(n,r),o=ob(r),u=ub(n),i=ib(n),l=lb(u),c=cb(r),f=db(r,c,i,l,n);let d=null;const h=yn([e,t,mn],([C,k,S])=>({open:C,selectedModel:k,settingsState:S})).subscribe(({open:C,selectedModel:k,settingsState:S})=>{!C||!k||(S.data&&S.data.model!==k&&mn.setModel(k),d!==k&&(d=k,mn.clearErrors(),mn.load(k)))});ts(()=>{h()});const g={onSliderInput:(C,k)=>{const S=k.currentTarget;if(!S)return;const x=Number(S.value);Number.isFinite(x)&&mn.updateParameter(C,x)},onRangeReset:C=>{mn.updateParameter(C,null)},onNumberChange:(C,k)=>{const S=k.currentTarget;if(!S)return;const x=S.value.trim();if(!x){mn.updateParameter(C,null);return}const F=Number(x);if(!Number.isFinite(F)){mn.updateParameter(C,null);return}mn.updateParameter(C,F)},onBooleanChange:(C,k)=>{const S=k.currentTarget;S&&mn.updateParameter(C,S.checked)}};function T(C){const k=lt(c)?{...lt(c)}:{};C(k);for(const S of Object.keys(k)){const x=k[S];(x==null||typeof x=="string"&&x.trim()==="")&&delete k[S]}Object.keys(k).length===0?mn.updateParameter("reasoning",null):mn.updateParameter("reasoning",k)}const A={onEnabledChange:C=>{const k=C.currentTarget;if(!k)return;const S=k.value;T(x=>{S==="on"?x.enabled=!0:S==="off"?x.enabled=!1:delete x.enabled})},onEffortChange:C=>{const k=C.currentTarget;if(!k)return;const S=k.value;T(x=>{S?x.effort=S:delete x.effort})},onMaxTokensChange:C=>{const k=C.currentTarget;if(!k)return;const S=k.value.trim();if(!S){T(F=>{delete F.max_tokens});return}const x=Number(S);if(!Number.isFinite(x)||x<=0){T(F=>{delete F.max_tokens});return}T(F=>{F.max_tokens=x})},onExcludeChange:C=>{const k=C.currentTarget;if(!k)return;const S=k.checked;T(x=>{S?x.exclude=!0:delete x.exclude})}};let w={open:!1,selectedModel:"",model:null};function E(C){C.open!==w.open&&(e.set(C.open),w.open=C.open),C.selectedModel!==w.selectedModel&&(t.set(C.selectedModel),w.selectedModel=C.selectedModel),C.model!==w.model&&(n.set(C.model),w.model=C.model)}return{settingsState:mn,parameters:r,fields:a,hasCustomParameters:o,reasoning:f,parameterHandlers:g,reasoningHandlers:A,resetToDefaults:()=>mn.resetToDefaults(),flushSave:()=>mn.flushSave(),sync:E}}var vb=M('<p class="status">Loading settingsâ¦</p>'),hb=M('<p class="status error"> </p>'),mb=M('<p class="status">This model does not expose configurable parameters.</p>'),gb=M('<form class="settings-grid"></form>'),_b=M('<div class="settings-stack" aria-live="polite"><!> <!></div>'),bb=M('<h2 id="model-settings-title">Model settings</h2> <p class="model-settings-subtitle"><!></p>',1),yb=M('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),xb=M('<span class="status error"> </span>'),wb=M('<span class="status">Saving changesâ¦</span>'),kb=M('<span class="status">Pending changes; closing this modal will save.</span>'),Sb=M('<span class="status">Changes save when you close this modal.</span>'),Eb=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function Cb(e,t){Nt(t,!1);const n=()=>Dt(h,"$settingsState",i),r=()=>Dt(A,"$hasCustomParameters",i),a=()=>Dt(w,"$reasoning",i),o=()=>Dt(T,"$fields",i),u=()=>Dt(g,"$parameters",i),[i,l]=yr();let c=le(t,"open",8,!1),f=le(t,"selectedModel",8,""),d=le(t,"model",8,null);const m=pn(),{settingsState:h,parameters:g,fields:T,hasCustomParameters:A,reasoning:w,parameterHandlers:E,reasoningHandlers:C,resetToDefaults:k,flushSave:S,sync:x}=pb();let F=!1;async function q(){if(F||n().saving)return;F=!0,await S()&&m("close"),F=!1}xe(()=>(z(c()),z(f()),z(d())),()=>{x({open:c(),selectedModel:f(),model:d()})}),fn(),Ut();var H=Ae(),P=de(H);{var L=K=>{Wr(K,{get open(){return c()},labelledBy:"model-settings-title",closeLabel:"Close model settings",$$events:{close:()=>void q()},children:(G,ce)=>{var O=Ae(),ae=de(O);{var oe=Y=>{var R=vb();y(Y,R)},se=Y=>{var R=Ae(),V=de(R);{var ve=te=>{var X=hb(),J=v(X);B(()=>W(J,(n(),p(()=>n().error)))),y(te,X)},Se=te=>{var X=Ae(),J=de(X);{var ye=we=>{var ee=mb();y(we,ee)},ue=we=>{var ee=_b(),Ue=v(ee);{var qe=Me=>{eb(Me,{get reasoning(){return a()},get handlers(){return C}})};I(Ue,Me=>{a(),p(()=>a().supported)&&Me(qe)})}var ot=b(Ue,2);{var je=Me=>{var at=gb();Lt(at,5,o,be=>be.key,(be,Re)=>{K_(be,{get field(){return s(Re)},get parameters(){return u()},get handlers(){return E}})}),y(Me,at)};I(ot,Me=>{o(),p(()=>o().length)&&Me(je)})}y(we,ee)};I(J,we=>{a(),o(),p(()=>!a().supported&&!o().length)?we(ye):we(ue,!1)})}y(te,X)};I(V,te=>{n(),p(()=>n().error)?te(ve):te(Se,!1)},!0)}y(Y,R)};I(ae,Y=>{n(),p(()=>n().loading)?Y(oe):Y(se,!1)})}y(G,O)},$$slots:{default:!0,heading:(G,ce)=>{var O=bb(),ae=b(de(O),2),oe=v(ae);{var se=R=>{var V=nn();B(()=>W(V,(z(d()),p(()=>d().name)))),y(R,V)},Y=R=>{var V=Ae(),ve=de(V);{var Se=X=>{var J=nn();B(()=>W(J,(z(d()),p(()=>d().id)))),y(X,J)},te=X=>{var J=nn();B(()=>W(J,f())),y(X,J)};I(ve,X=>{z(d()),p(()=>d()?.id)?X(Se):X(te,!1)},!0)}y(R,V)};I(oe,R=>{z(d()),p(()=>d()?.name)?R(se):R(Y,!1)})}y(G,O)},actions:(G,ce)=>{var O=yb();B(()=>O.disabled=(r(),n(),p(()=>!r()||n().saving))),N("click",O,k),y(G,O)},footer:(G,ce)=>{var O=Eb(),ae=v(O);{var oe=Y=>{var R=xb(),V=v(R);B(()=>W(V,(n(),p(()=>n().saveError)))),y(Y,R)},se=Y=>{var R=Ae(),V=de(R);{var ve=te=>{var X=wb();y(te,X)},Se=te=>{var X=Ae(),J=de(X);{var ye=we=>{var ee=kb();y(we,ee)},ue=we=>{var ee=Sb();y(we,ee)};I(J,we=>{n(),p(()=>n().dirty)?we(ye):we(ue,!1)},!0)}y(te,X)};I(V,te=>{n(),p(()=>n().saving)?te(ve):te(Se,!1)},!0)}y(Y,R)};I(ae,Y=>{n(),p(()=>n().saveError)?Y(oe):Y(se,!1)})}y(G,O)}}})};I(P,K=>{c()&&K(L)})}y(e,H),Ot(),l()}var Ab=M('<div class="suggestion-item svelte-1r3jne1"><button type="button" class="suggestion-btn svelte-1r3jne1"> </button> <button type="button" class="delete-btn svelte-1r3jne1" title="Delete suggestion">Ã</button></div>'),Tb=M('<div class="add-form svelte-1r3jne1"><input type="text" placeholder="Label" class="svelte-1r3jne1"/> <input type="text" placeholder="Prompt text" class="svelte-1r3jne1"/> <button type="button" class="add-submit-btn svelte-1r3jne1">Add</button> <button type="button" class="add-cancel-btn svelte-1r3jne1">Cancel</button></div>'),Db=M('<button type="button" class="add-btn svelte-1r3jne1" aria-label="Add suggested prompt">+</button>'),Mb=M("<section><!> <!></section>");function Fb(e,t){Nt(t,!1);const n=pn();let r=le(t,"suggestions",24,()=>[]),a=le(t,"deleting",8,null),o=le(t,"pwaMode",8,!1),u=$(!1),i=$(""),l=$("");function c(S){n("select",{text:S})}function f(S,x){x.stopPropagation(),n("delete",{index:S})}function d(){_(u,!0)}function m(){s(i).trim()&&s(l).trim()&&(n("add"),_(i,""),_(l,""),_(u,!1))}function h(){_(i,""),_(l,""),_(u,!1)}function g(){const S=s(i).trim(),x=s(l).trim();return S&&x?{label:S,text:x}:null}var T={getNewSuggestion:g};Ut();var A=Mb();let w;var E=v(A);Lt(E,3,r,S=>S.text,(S,x,F)=>{var q=Ab(),H=v(q),P=v(H),L=b(H,2);B(()=>{W(P,(s(x),p(()=>s(x).label))),L.disabled=a()===s(F)}),N("click",H,()=>c(s(x).text)),N("click",L,K=>f(s(F),K)),y(S,q)});var C=b(E,2);{var k=S=>{var x=Ae(),F=de(x);{var q=P=>{var L=Tb(),K=v(L),G=b(K,2),ce=b(G,2),O=b(ce,2);sr(K,()=>s(i),ae=>_(i,ae)),N("keydown",K,ae=>ae.key==="Enter"&&m()),sr(G,()=>s(l),ae=>_(l,ae)),N("keydown",G,ae=>ae.key==="Enter"&&m()),N("click",ce,m),N("click",O,h),y(P,L)},H=P=>{var L=Db();N("click",L,d),y(P,L)};I(F,P=>{s(u)?P(q):P(H,!1)})}y(S,x)};I(C,S=>{o()||S(k)})}return B(S=>w=At(A,1,"suggestions svelte-1r3jne1",null,w,S),[()=>({"pwa-layout":o()})]),y(e,A),q0(t,"getNewSuggestion",g),Ot(T)}const Pb=[{id:"nova-3",name:"Nova 3 (Latest)"},{id:"nova-2",name:"Nova 2 (General)"},{id:"nova-2-medical",name:"Nova 2 Medical"},{id:"nova-2-phonecall",name:"Nova 2 Phone Call"},{id:"nova-2-meeting",name:"Nova 2 Meeting"},{id:"nova-2-finance",name:"Nova 2 Finance"},{id:"nova-2-conversationalai",name:"Nova 2 Conversational AI"},{id:"nova-2-drivethru",name:"Nova 2 Drive-Thru"}],Ib={loading:!1,adding:!1,deleting:null,error:null,items:[]};function Lb(){const e=ln({...Ib});async function t(){e.update(o=>({...o,loading:!0,error:null}));try{const o=await fetch(`${Jt}/api/suggestions`);if(!o.ok)throw new Error(`HTTP ${o.status}`);const u=await o.json();e.update(i=>({...i,loading:!1,items:u.suggestions}))}catch(o){const u=o instanceof Error?o.message:"Failed to load suggestions.";e.update(i=>({...i,loading:!1,error:u}))}}async function n(o,u){e.update(i=>({...i,adding:!0,error:null}));try{const i=await fetch(`${Jt}/api/suggestions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:o,text:u})});if(!i.ok)throw new Error(`HTTP ${i.status}`);const l=await i.json();return e.update(c=>({...c,adding:!1,items:l.suggestions})),l.suggestions}catch(i){const l=i instanceof Error?i.message:"Failed to add suggestion.";return e.update(c=>({...c,adding:!1,error:l})),null}}async function r(o){e.update(u=>({...u,deleting:o,error:null}));try{const u=await fetch(`${Jt}/api/suggestions/${o}`,{method:"DELETE"});if(!u.ok)throw new Error(`HTTP ${u.status}`);const i=await u.json();return e.update(l=>({...l,deleting:null,items:i.suggestions})),i.suggestions}catch(u){const i=u instanceof Error?u.message:"Failed to delete suggestion.";return e.update(l=>({...l,deleting:null,error:i})),null}}function a(){e.update(o=>({...o,error:null}))}return{subscribe:e.subscribe,load:t,add:n,remove:r,clearError:a}}const Jr=Lb(),Ru={loading:!1,saving:!1,error:null,saveError:null,value:"",initialValue:"",dirty:!1};function Nb(){const e=ln({...Ru});function t(i,l){return i.trim()!==l.trim()}function n(i){return i.system_prompt?.trim()??""}async function r(){e.set({...Ru,loading:!0});try{const i=await tp(),l=n(i);e.set({loading:!1,saving:!1,error:null,saveError:null,value:l,initialValue:l,dirty:!1})}catch(i){const l=i instanceof Error?i.message:"Failed to load system prompt.";e.set({...Ru,loading:!1,error:l})}}function a(i){e.update(l=>{const c=i;return{...l,value:c,dirty:t(c,l.initialValue),saveError:null}})}async function o(){let i="";e.update(c=>(i=c.value,{...c,saving:!0,saveError:null}));const l={system_prompt:i.trim()||null};try{const c=await np(l),f=n(c);e.set({loading:!1,saving:!1,error:null,saveError:null,value:f,initialValue:f,dirty:!1})}catch(c){const f=c instanceof Error?c.message:"Failed to save system prompt.";e.update(d=>({...d,saving:!1,saveError:f}))}}function u(){e.update(i=>({...i,value:i.initialValue,dirty:!1,saveError:null}))}return{subscribe:e.subscribe,load:r,save:o,reset:u,updateValue:a}}function Ri(e,t){const n=()=>{e.style.height="auto",e.style.height=`${e.scrollHeight}px`},r=()=>n();return n(),e.addEventListener("input",r),{update:()=>n(),destroy:()=>{e.removeEventListener("input",r)}}}var Ob=M('<p class="status">Loading system promptâ¦</p>'),$b=M('<p class="status error"> </p>'),Rb=M('<p class="status error"> </p>'),zb=M('<textarea class="system-prompt textarea-control" rows="6" placeholder="Provide guidance for the assistant to follow at the start of new conversations."></textarea> <!>',1),Bb=M('<p class="status error"> </p>'),Ub=M('<p class="status">Loading presetsâ¦</p>'),jb=M('<p class="status">No presets saved yet.</p>'),qb=M('<span class="default-badge" title="Default preset">Default</span>'),Hb=M('<span class="filters-badge" title="Contains model explorer filters"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> Filters</span>'),Wb=M('<button type="button" class="btn btn-ghost btn-small" title="Set as default preset to load on startup"> </button>'),Vb=M('<li class="preset-item"><div class="meta"><div class="name"> <!> <!></div> <div class="details"><span class="model"> </span> <span class="timestamps"><span title="Created at"> </span> <span aria-hidden="true">Â·</span> <span title="Updated at"> </span></span></div></div> <div class="actions"><button type="button" class="btn btn-ghost btn-small" title="Apply this preset (model, settings, system prompt, MCP servers)"> </button> <button type="button" class="btn btn-ghost btn-small" title="Overwrite preset with current configuration"> </button> <!> <button type="button" class="btn btn-danger btn-small"> </button></div></li>'),Gb=M('<ul class="preset-list" aria-live="polite"></ul>'),Zb=M('<p class="status muted"> </p>'),Kb=M('<p class="status muted"> </p>'),Yb=M('<p class="status muted">Create, update, or apply a preset.</p>'),Jb=M('<p class="status error"> </p>'),Xb=M('<p class="status">Loading STT settingsâ¦</p>'),Qb=M("<option> </option>"),e3=M('<div class="speech-field"><span class="field-label">Submit delay</span> <div class="speech-presets"><button class="btn btn-soft btn-small" type="button">Instant</button> <button class="btn btn-soft btn-small" type="button">Normal (300ms)</button> <button class="btn btn-soft btn-small" type="button">Slow (800ms)</button></div></div> <div class="speech-field"><label class="field-label" for="auto-submit-delay-input">Custom delay (ms)</label> <input id="auto-submit-delay-input" class="input-control" type="number" min="0" max="10000" step="50"/></div>',1),t3=M('<div class="speech-field"><label class="field-label" for="stt-model-select">Model</label> <select id="stt-model-select" class="input-control"></select></div> <div class="speech-field"><label class="inline-checkbox"><input class="input-control" type="checkbox"/> <span class="field-label">Auto-submit after speaking</span></label></div> <!>',1),n3=M('<div class="speech-field"><label class="field-label" for="stt-mode-select">Recognition mode</label> <select id="stt-mode-select" class="input-control"><option>Conversation (Flux)</option><option>Command (Nova)</option></select> <p class="speech-hint"><!></p></div> <!>',1),r3=M(`<article class="system-card"><header class="system-card-header"><div><h3>System prompt</h3> <p class="system-card-caption">Applied to new chat sessions when no custom prompt is present.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Presets</h3> <p class="system-card-caption">Save and manage snapshots of the current configuration.</p></div></header> <div class="system-card-body"><div class="create-row"><input type="text" class="input-control" placeholder="Preset name" aria-label="Preset name"/> <button type="button" class="btn btn-primary"> </button></div> <!> <!> <!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Speech recognition</h3> <p class="system-card-caption">Configure speech-to-text engine and behavior.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Account</h3> <p class="system-card-caption">Session and authentication settings.</p></div></header> <div class="system-card-body"><div class="account-actions"><a href="/cdn-cgi/access/logout" class="btn btn-danger" title="End your session and require re-authentication"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> Logout</a> <p class="speech-hint">Ends your Cloudflare Access session. You'll need to re-authenticate with your email.</p></div></div></article>`,1),a3=M('<h2 id="system-settings-title">System settings</h2> <p class="model-settings-subtitle">Configure orchestration defaults, presets, and speech settings.</p>',1),s3=M('<p class="status error">Resolve the errors above before closing.</p>'),o3=M('<p class="status error"> </p>'),u3=M('<p class="status error"> </p>'),i3=M('<p class="status">Saving changesâ¦</p>'),l3=M('<p class="status">Pending changes; closing this modal will save.</p>'),c3=M('<p class="status">Changes save when you close this modal.</p>'),d3=M('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function f3(e,t){Nt(t,!1);const n=()=>Dt(c,"$systemPrompt",o),r=()=>Dt(va,"$chatStore",o),a=()=>Dt(Hn,"$presetsStore",o),[o,u]=yr();let i=le(t,"open",8,!1);const l=pn(),c=Nb();let f=$(!1),d=!1;async function m(){await Promise.all([c.load(),Hn.load(),h()])}async function h(){try{_(F,await rd()),_(P,null)}catch(ue){_(P,ue instanceof Error?ue.message:"Failed to load STT settings")}}async function g(){return lt(c).dirty?(await c.save(),!lt(c).saveError):!0}async function T(){if(d||n().saving||s(S)||s(H))return;d=!0;const ue=await g(),we=await Se(),ee=await A(),Ue=lt(c);ue&&we&&ee&&!Ue.saveError&&l("close"),d=!1}async function A(){if(!s(q)||!s(F))return!0;_(H,!0);try{return _(F,await Cp({mode:s(F).mode,command_model:s(F).command_model})),_(q,!1),_(P,null),!0}catch(ue){return _(P,ue instanceof Error?ue.message:"Failed to save STT settings"),!1}finally{_(H,!1)}}let w=$(""),E=$(null),C=$(se()),k=$(!1),S=$(!1),x=$(null),F=$(null),q=$(!1),H=$(!1),P=$(null);function L(ue){const we=ue.target;c.updateValue(we?.value??"")}function K(){_(w,""),_(E,null)}async function G(){const ue=s(w).trim();if(!ue||!await g())return;await mn.load(r().selectedModel),await Hn.create(ue)&&_(w,"")}async function ce(ue){const we=await Hn.apply(ue.name);we?.model&&va.setModel(we.model),await Jr.load(),l("close")}async function O(ue){await g()&&(await mn.load(r().selectedModel),await Hn.saveSnapshot(ue.name))}async function ae(ue){if(!ue.is_default){if(s(E)===ue.name){await Hn.remove(ue.name),_(E,null);return}_(E,ue.name),setTimeout(()=>{s(E)===ue.name&&_(E,null)},3e3)}}async function oe(ue){await Hn.setDefault(ue.name)}function se(){const ue=Ps.current??_a();return{...ue,stt:{...ue.stt}}}function Y(){Ps.refresh(),_(C,se()),_(k,!1),_(S,!1),_(x,null),_(F,null),_(q,!1),_(H,!1),_(P,null)}function R(ue,we){_(C,{...s(C),stt:{...s(C).stt,[ue]:we}}),_(k,!0),_(x,null)}function V(ue,we){const ee=ue.target;if(!ee)return;const Ue=Number(ee.value);Number.isFinite(Ue)&&we(Ue)}function ve(ue){const we=fv[ue];_(C,{...s(C),stt:{...s(C).stt,autoSubmitDelayMs:we.autoSubmitDelayMs}}),_(k,!0),_(x,null)}async function Se(){if(!s(k))return!0;_(S,!0);try{const ue=Ps.save(s(C));return _(C,{...ue,stt:{...ue.stt}}),_(k,!1),_(x,null),!0}catch(ue){const we=ue instanceof Error?ue.message:"Failed to save speech settings.";return _(x,we),!1}finally{_(S,!1)}}function te(){_(C,_a()),_(k,!0),_(x,null)}xe(()=>(z(i()),s(f)),()=>{i()&&!s(f)?(_(f,!0),m(),Y(),K()):!i()&&s(f)&&(_(f,!1),c.reset(),Y(),K())}),fn(),Ut();var X=Ae(),J=de(X);{var ye=ue=>{{let we=Gt(()=>(n(),s(S),p(()=>n().saving||s(S))));Wr(ue,{get open(){return i()},labelledBy:"system-settings-title",modalClass:"system-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close system settings",get closeDisabled(){return s(we)},$$events:{close:()=>void T()},children:(ee,Ue)=>{var qe=r3(),ot=de(qe),je=v(ot),Me=b(v(je),2),at=v(Me),be=b(je,2),Re=v(be);{var $e=He=>{var mt=Ob();y(He,mt)},Ge=He=>{var mt=Ae(),st=de(mt);{var tn=nt=>{var pt=$b(),Tt=v(pt);B(()=>W(Tt,(n(),p(()=>n().error)))),y(nt,pt)},cn=nt=>{var pt=zb(),Tt=de(pt);ur(()=>sr(Tt,()=>n().value,Ft=>W0(c,p(n).value=Ft,p(n)))),ur(()=>N("input",Tt,L)),Sa(Tt,(Ft,Ht)=>Ri?.(Ft),()=>n().value);var ze=b(Tt,2);{var _n=Ft=>{var Ht=Rb(),on=v(Ht);B(()=>W(on,(n(),p(()=>n().saveError)))),y(Ft,Ht)};I(ze,Ft=>{n(),p(()=>n().saveError)&&Ft(_n)})}B(()=>Tt.disabled=(n(),p(()=>n().saving))),y(nt,pt)};I(st,nt=>{n(),p(()=>n().error)?nt(tn):nt(cn,!1)},!0)}y(He,mt)};I(Re,He=>{n(),p(()=>n().loading)?He($e):He(Ge,!1)})}var ut=b(ot,2),$t=b(v(ut),2),fe=v($t),j=v(fe),pe=b(j,2),ge=v(pe),ke=b(fe,2);{var Ie=He=>{var mt=Bb(),st=v(mt);B(()=>W(st,(a(),p(()=>a().error)))),y(He,mt)};I(ke,He=>{a(),p(()=>a().error)&&He(Ie)})}var Le=b(ke,2);{var Ze=He=>{var mt=Ub();y(He,mt)},Ke=He=>{var mt=Ae(),st=de(mt);{var tn=nt=>{var pt=jb();y(nt,pt)},cn=nt=>{var pt=Gb();Lt(pt,5,()=>(a(),p(()=>a().items)),Tt=>Tt.name,(Tt,ze)=>{var _n=Vb(),Ft=v(_n),Ht=v(Ft),on=v(Ht),Mn=b(on);{var zn=Be=>{var Ve=qb();y(Be,Ve)};I(Mn,Be=>{s(ze),p(()=>s(ze).is_default)&&Be(zn)})}var Ln=b(Mn,2);{var _e=Be=>{var Ve=Hb();y(Be,Ve)};I(Ln,Be=>{s(ze),p(()=>s(ze).has_filters)&&Be(_e)})}var Ne=b(Ht,2),ne=v(Ne),Oe=v(ne),Et=b(ne,2),Q=v(Et),Z=v(Q),D=b(Q,4),U=v(D),re=b(Ft,2),Ee=v(re),Fe=v(Ee),me=b(Ee,2),Ce=v(me),Te=b(me,2);{var We=Be=>{var Ve=Wb(),Pe=v(Ve);B(()=>{Ve.disabled=(a(),s(ze),p(()=>a().settingDefault===s(ze).name)),ie(Ve,"aria-busy",(a(),s(ze),p(()=>a().settingDefault===s(ze).name))),W(Pe,(a(),s(ze),p(()=>a().settingDefault===s(ze).name?"Settingâ¦":"Set as default")))}),N("click",Ve,()=>oe(s(ze))),y(Be,Ve)};I(Te,Be=>{s(ze),p(()=>!s(ze).is_default)&&Be(We)})}var Ye=b(Te,2),Je=v(Ye);B((Be,Ve)=>{W(on,`${s(ze),p(()=>s(ze).name)??""} `),W(Oe,(s(ze),p(()=>s(ze).model))),W(Z,Be),W(U,Ve),Ee.disabled=(a(),s(ze),p(()=>a().applying===s(ze).name)),ie(Ee,"aria-busy",(a(),s(ze),p(()=>a().applying===s(ze).name))),W(Fe,(a(),s(ze),p(()=>a().applying===s(ze).name?"Applyingâ¦":"Apply"))),me.disabled=(a(),p(()=>a().saving)),ie(me,"aria-busy",(a(),p(()=>a().saving))),W(Ce,(a(),p(()=>a().saving?"Savingâ¦":"Save snapshot"))),Ye.disabled=(s(ze),a(),p(()=>s(ze).is_default||a().deleting===s(ze).name)),ie(Ye,"aria-busy",(a(),s(ze),p(()=>a().deleting===s(ze).name))),ie(Ye,"title",(s(ze),p(()=>s(ze).is_default?"Cannot delete default preset":"Delete preset"))),W(Je,(s(E),s(ze),a(),p(()=>s(E)===s(ze).name?"Confirm delete":a().deleting===s(ze).name?"Deletingâ¦":"Delete")))},[()=>(s(ze),p(()=>new Date(s(ze).created_at).toLocaleString())),()=>(s(ze),p(()=>new Date(s(ze).updated_at).toLocaleString()))]),N("click",Ee,()=>ce(s(ze))),N("click",me,()=>O(s(ze))),N("click",Ye,()=>ae(s(ze))),y(Tt,_n)}),y(nt,pt)};I(st,nt=>{a(),p(()=>!a().items.length)?nt(tn):nt(cn,!1)},!0)}y(He,mt)};I(Le,He=>{a(),p(()=>a().loading)?He(Ze):He(Ke,!1)})}var Qe=b(Le,2);{var ft=He=>{var mt=Zb(),st=v(mt);B(()=>W(st,`Applied preset: ${a(),p(()=>a().lastApplied)??""}`)),y(He,mt)},et=He=>{var mt=Ae(),st=de(mt);{var tn=nt=>{var pt=Kb(),Tt=v(pt);B(()=>W(Tt,`Saved: ${a(),p(()=>a().lastResult.name)??""}`)),y(nt,pt)},cn=nt=>{var pt=Yb();y(nt,pt)};I(st,nt=>{a(),p(()=>a().lastResult)?nt(tn):nt(cn,!1)},!0)}y(He,mt)};I(Qe,He=>{a(),p(()=>a().lastApplied)?He(ft):He(et,!1)})}var Mt=b(ut,2),gt=v(Mt),Rt=b(v(gt),2),vn=v(Rt),rn=b(gt,2),an=v(rn);{var wt=He=>{var mt=Jb(),st=v(mt);B(()=>W(st,s(P))),y(He,mt)},ct=He=>{var mt=Ae(),st=de(mt);{var tn=nt=>{var pt=Xb();y(nt,pt)},cn=nt=>{var pt=n3(),Tt=de(pt),ze=b(v(Tt),2),_n=v(ze);_n.value=_n.__value="conversation";var Ft=b(_n);Ft.value=Ft.__value="command";var Ht;In(ze);var on=b(ze,2),Mn=v(on);{var zn=ne=>{var Oe=nn(`AI-based turn detection for natural dialogue. Auto-submits when
                you finish speaking.`);y(ne,Oe)},Ln=ne=>{var Oe=nn("Silence-based detection with specialized vocabulary models.");y(ne,Oe)};I(Mn,ne=>{s(F),p(()=>s(F).mode==="conversation")?ne(zn):ne(Ln,!1)})}var _e=b(Tt,2);{var Ne=ne=>{var Oe=t3(),Et=de(Oe),Q=b(v(Et),2);Lt(Q,5,()=>Pb,me=>me.id,(me,Ce)=>{var Te=Qb(),We=v(Te),Ye={};B(()=>{W(We,(s(Ce),p(()=>s(Ce).name))),Ye!==(Ye=(s(Ce),p(()=>s(Ce).id)))&&(Te.value=(Te.__value=(s(Ce),p(()=>s(Ce).id)))??"")}),y(me,Te)});var Z;In(Q);var D=b(Et,2),U=v(D),re=v(U),Ee=b(D,2);{var Fe=me=>{var Ce=e3(),Te=de(Ce),We=b(v(Te),2),Ye=v(We),Je=b(Ye,2),Be=b(Je,2),Ve=b(Te,2),Pe=b(v(Ve),2);B(()=>It(Pe,(s(C),p(()=>s(C).stt.autoSubmitDelayMs)))),N("click",Ye,()=>ve("fast")),N("click",Je,()=>ve("normal")),N("click",Be,()=>ve("slow")),N("change",Pe,Xe=>V(Xe,tt=>R("autoSubmitDelayMs",tt))),y(me,Ce)};I(Ee,me=>{s(C),p(()=>s(C).stt.autoSubmit)&&me(Fe)})}B(()=>{Q.disabled=s(H),Z!==(Z=(s(F),p(()=>s(F).command_model)))&&(Q.value=(Q.__value=(s(F),p(()=>s(F).command_model)))??"",xn(Q,(s(F),p(()=>s(F).command_model)))),Kn(re,(s(C),p(()=>s(C).stt.autoSubmit)))}),N("change",Q,me=>{s(F)&&(_(F,{...s(F),command_model:me.target.value}),_(q,!0))}),N("change",re,me=>R("autoSubmit",me.target.checked)),y(ne,Oe)};I(_e,ne=>{s(F),p(()=>s(F).mode==="command")&&ne(Ne)})}B(()=>{ze.disabled=s(H),Ht!==(Ht=(s(F),p(()=>s(F).mode)))&&(ze.value=(ze.__value=(s(F),p(()=>s(F).mode)))??"",xn(ze,(s(F),p(()=>s(F).mode))))}),N("change",ze,ne=>{s(F)&&(_(F,{...s(F),mode:ne.target.value}),_(q,!0))}),y(nt,pt)};I(st,nt=>{s(F)?nt(cn,!1):nt(tn)},!0)}y(He,mt)};I(an,He=>{s(P)?He(wt):He(ct,!1)})}B(He=>{at.disabled=(n(),p(()=>!n().dirty||n().saving)),pe.disabled=He,ie(pe,"aria-busy",(a(),p(()=>a().creating))),W(ge,(a(),p(()=>a().creating?"Creatingâ¦":"Create from current"))),vn.disabled=s(S)||s(H)},[()=>(s(w),a(),p(()=>!s(w).trim()||a().creating))]),N("click",at,()=>c.reset()),sr(j,()=>s(w),He=>_(w,He)),N("keydown",j,He=>He.key==="Enter"?G():null),N("click",pe,G),N("click",vn,te),y(ee,qe)},$$slots:{default:!0,heading:(ee,Ue)=>{var qe=a3();y(ee,qe)},footer:(ee,Ue)=>{var qe=d3(),ot=v(qe);{var je=at=>{var be=s3();y(at,be)},Me=at=>{var be=Ae(),Re=de(be);{var $e=ut=>{var $t=o3(),fe=v($t);B(()=>W(fe,s(x))),y(ut,$t)},Ge=ut=>{var $t=Ae(),fe=de($t);{var j=ge=>{var ke=u3(),Ie=v(ke);B(()=>W(Ie,s(P))),y(ge,ke)},pe=ge=>{var ke=Ae(),Ie=de(ke);{var Le=Ke=>{var Qe=i3();y(Ke,Qe)},Ze=Ke=>{var Qe=Ae(),ft=de(Qe);{var et=gt=>{var Rt=l3();y(gt,Rt)},Mt=gt=>{var Rt=c3();y(gt,Rt)};I(ft,gt=>{n(),s(k),s(q),p(()=>n().dirty||s(k)||s(q))?gt(et):gt(Mt,!1)},!0)}y(Ke,Qe)};I(Ie,Ke=>{n(),s(S),s(H),p(()=>n().saving||s(S)||s(H))?Ke(Le):Ke(Ze,!1)},!0)}y(ge,ke)};I(fe,ge=>{s(P)?ge(j):ge(pe,!1)},!0)}y(ut,$t)};I(Re,ut=>{s(x)?ut($e):ut(Ge,!1)},!0)}y(at,be)};I(ot,at=>{n(),p(()=>n().saveError)?at(je):at(Me,!1)})}y(ee,qe)}}})}};I(J,ue=>{i()&&ue(ye)})}y(e,X),Ot(),u()}async function p3(){const e=await fetch(`${Jt}/api/clients/cli/llm`);if(!e.ok)throw new Error(`Failed to fetch CLI LLM settings: ${e.statusText}`);return e.json()}async function v3(e){const t=await fetch(`${Jt}/api/clients/cli/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update CLI LLM settings: ${t.statusText}`);return t.json()}async function h3(){const e=await fetch(`${Jt}/api/clients/cli/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset CLI settings: ${e.statusText}`);return e.json()}async function m3(){const e=await fetch(`${Jt}/api/clients/cli/presets`);if(!e.ok)throw new Error(`Failed to fetch CLI presets: ${e.statusText}`);return e.json()}async function g3(e){const t=await fetch(`${Jt}/api/clients/cli/presets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to create CLI preset: ${t.statusText}`);return t.json()}async function _3(e){const t=await fetch(`${Jt}/api/clients/cli/presets/by-name/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete CLI preset: ${t.statusText}`)}async function b3(e){const t=await fetch(`${Jt}/api/clients/cli/presets/by-name/${e}/apply`,{method:"POST"});if(!t.ok)throw new Error(`Failed to apply CLI preset: ${t.statusText}`);return t.json()}const ui={model:"openai/gpt-4o-mini",system_prompt:`You control this system via shell. Use the available tools to execute user commands.

RULES:
1. ACT directly - execute commands yourself, don't instruct the user.
2. Use shell_execute for commands. Use background=true for GUI apps.
3. If unsure about the system, call host_get_profile first.
4. READ before WRITE - query state before changing it.`,temperature:.7,max_tokens:1e3};function y3(){const e=ln(ui);let t=!1,n=!1;async function r(){if(n)return lt(e);n=!0;try{const i=await p3(),l={model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens};return e.set(l),t=!0,l}catch(i){return console.error("Failed to load CLI settings:",i),lt(e)}finally{n=!1}}async function a(i){const l=lt(e);e.set({...l,...i,model:i.model??l.model,system_prompt:i.system_prompt??l.system_prompt,temperature:i.temperature??l.temperature,max_tokens:i.max_tokens??l.max_tokens});try{const c=await v3(i);e.update(f=>({...f,model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens}))}catch(c){throw console.error("Failed to update CLI LLM settings:",c),e.set(l),c}}async function o(){try{try{await b3("default"),await r();return}catch{console.log("No user default found, performing hard reset")}await h3(),await r(),await a(ui)}catch(i){throw console.error("Failed to reset CLI settings:",i),i}}async function u(){const i=lt(e);try{(await m3()).presets.some(c=>c.name==="default")&&await _3("default"),await g3({name:"default",llm:{model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens}})}catch(l){throw console.error("Failed to save as default:",l),l}}return{subscribe:e.subscribe,load:r,updateLlm:a,reset:o,saveAsDefault:u}}const ks=y3();var x3=M('<p class="status">Loading settingsâ¦</p>'),w3=M("<option> </option>"),k3=M('<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior for the CLI.</span></div> <div class="reasoning-controls"><div class="setting-select svelte-17wvx4j" style="grid-column: 1 / -1;"><label class="setting-label" for="cli-llm-model" title="Select the language model for CLI responses.">Model</label> <select id="cli-llm-model" class="select-input svelte-17wvx4j"></select></div> <div class="system-prompt-row svelte-17wvx4j"><label class="setting-label" for="cli-system-prompt" title="Instructions that define how the CLI assistant behaves.">System Prompt</label> <textarea id="cli-system-prompt" class="keyterms-input system-prompt svelte-17wvx4j" rows="6" placeholder="You are a helpful CLI assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="4000" step="50"/> <div class="range-extents"><span>50</span> <span>4000</span></div></div></div></div></div></div>'),S3=M('<h2 id="cli-settings-title">CLI Settings</h2> <p class="model-settings-subtitle">Configure the command-line assistant.</p>',1),E3=M('<div slot="actions" style="display: flex; gap: 0.5rem;"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button> <button type="button" class="btn btn-primary btn-small"> </button></div>'),C3=M("<span> </span>"),A3=M('<span class="status">Saving changesâ¦</span>'),T3=M('<span class="status">Pending changes; closing this modal will save.</span>'),D3=M('<span class="status">Changes save on close. "Set as default" updates the reset target.</span>'),M3=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function F3(e,t){Nt(t,!1);const n=()=>Dt(o,"$filtered",r),[r,a]=yr(),{filtered:o}=gr;let u=le(t,"open",8,!1);const i=pn();let l=$({...ui}),c=$(!1),f=$(!1),d=$(!0),m=$(null),h=$(!1),g=!1;async function T(){_(d,!0);try{const[H]=await Promise.all([ks.load(),gr.loadModels()]);_(l,{...H})}catch{_(m,"Failed to load settings")}finally{_(d,!1)}}function A(){g||s(f)||(g=!0,(async()=>(await E()&&i("close"),g=!1))())}function w(){_(c,!0),_(m,null)}async function E(){if(!s(c))return!0;_(f,!0),_(m,null);try{return await ks.updateLlm({model:s(l).model,system_prompt:s(l).system_prompt,temperature:s(l).temperature,max_tokens:s(l).max_tokens}),_(c,!1),!0}catch(H){const P=H instanceof Error?H.message:"Failed to save settings.";return _(m,P),!1}finally{_(f,!1)}}async function C(){_(f,!0);try{await ks.reset();const H=await ks.load();_(l,{...H}),_(c,!1),_(m,null)}catch{_(m,"Failed to reset settings")}finally{_(f,!1)}}async function k(){_(f,!0);try{s(c)&&await E(),await ks.saveAsDefault(),_(m,"Settings saved as new default")}catch{_(m,"Failed to save as default")}finally{_(f,!1)}}function S(H,P,L){return`${(H-P)/(L-P)*100}%`}xe(()=>(z(u()),s(h),s(c),s(f)),()=>{u()&&!s(h)?(_(h,!0),_(c,!1),_(f,!1),_(m,null),T()):!u()&&s(h)&&(_(h,!1),s(c)&&!s(f)&&E())}),fn(),Ut();var x=Ae(),F=de(x);{var q=H=>{Wr(H,{get open(){return u()},labelledBy:"cli-settings-title",closeLabel:"Close CLI settings",$$events:{close:()=>void A()},children:(P,L)=>{var K=Ae(),G=de(K);{var ce=ae=>{var oe=x3();y(ae,oe)},O=ae=>{var oe=k3(),se=v(oe),Y=b(v(se),2),R=v(Y),V=b(v(R),2);Lt(V,5,n,be=>be.id,(be,Re)=>{var $e=w3(),Ge=v($e),ut={};B(()=>{W(Ge,(s(Re),p(()=>s(Re).name??s(Re).id))),ut!==(ut=(s(Re),p(()=>s(Re).id)))&&($e.value=($e.__value=(s(Re),p(()=>s(Re).id)))??"")}),y(be,$e)});var ve;In(V);var Se=b(R,2),te=b(v(Se),2);Sa(te,(be,Re)=>Ri?.(be),()=>s(l).system_prompt),ur(()=>N("input",te,be=>{_(l,{...s(l),system_prompt:be.target.value||null}),w()}));var X=b(Se,2),J=v(X),ye=v(J),ue=b(v(ye),2),we=v(ue),ee=b(ye,2),Ue=b(X,2),qe=v(Ue),ot=v(qe),je=b(v(ot),2),Me=v(je),at=b(ot,2);B((be,Re,$e)=>{V.disabled=s(f),ve!==(ve=(s(l),p(()=>s(l).model)))&&(V.value=(V.__value=(s(l),p(()=>s(l).model)))??"",xn(V,(s(l),p(()=>s(l).model)))),te.disabled=s(f),It(te,(s(l),p(()=>s(l).system_prompt??""))),W(we,be),It(ee,(s(l),p(()=>s(l).temperature??.7))),ee.disabled=s(f),An(ee,`--slider-fill: ${Re??""}`),W(Me,(s(l),p(()=>s(l).max_tokens??1e3))),It(at,(s(l),p(()=>s(l).max_tokens??1e3))),at.disabled=s(f),An(at,`--slider-fill: ${$e??""}`)},[()=>(s(l),p(()=>s(l).temperature?.toFixed(1)??"0.7")),()=>(s(l),p(()=>S(s(l).temperature??.7,0,2))),()=>(s(l),p(()=>S(s(l).max_tokens??1e3,50,4e3)))]),N("change",V,be=>{_(l,{...s(l),model:be.target.value}),w()}),N("input",ee,be=>{_(l,{...s(l),temperature:parseFloat(be.target.value)}),w()}),N("input",at,be=>{_(l,{...s(l),max_tokens:parseInt(be.target.value,10)}),w()}),y(ae,oe)};I(G,ae=>{s(d)?ae(ce):ae(O,!1)})}y(P,K)},$$slots:{default:!0,heading:(P,L)=>{var K=S3();y(P,K)},actions:(P,L)=>{var K=E3(),G=v(K),ce=b(G,2),O=v(ce);B(()=>{G.disabled=s(f)||s(d),ce.disabled=s(f)||s(d),W(O,s(f)?"Savingâ¦":"Set as default")}),N("click",G,C),N("click",ce,()=>void k()),y(P,K)},footer:(P,L)=>{var K=M3(),G=v(K);{var ce=ae=>{var oe=C3();let se;var Y=v(oe);B(R=>{se=At(oe,1,"status",null,se,R),W(Y,s(m))},[()=>({error:s(m).includes("Failed")})]),y(ae,oe)},O=ae=>{var oe=Ae(),se=de(oe);{var Y=V=>{var ve=A3();y(V,ve)},R=V=>{var ve=Ae(),Se=de(ve);{var te=J=>{var ye=T3();y(J,ye)},X=J=>{var ye=D3();y(J,ye)};I(Se,J=>{s(c)?J(te):J(X,!1)},!0)}y(V,ve)};I(se,V=>{s(f)?V(Y):V(R,!1)},!0)}y(ae,oe)};I(G,ae=>{s(m)?ae(ce):ae(O,!1)})}y(P,K)}}})};I(F,H=>{u()&&H(q)})}y(e,x),Ot(),a()}async function P3(){const e=await fetch(`${Jt}/api/clients/kiosk/stt`);if(!e.ok)throw new Error(`Failed to fetch kiosk STT settings: ${e.statusText}`);return e.json()}async function I3(e){const t=await fetch(`${Jt}/api/clients/kiosk/stt`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk STT settings: ${t.statusText}`);return t.json()}async function L3(){const e=await fetch(`${Jt}/api/clients/kiosk/stt/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk STT settings: ${e.statusText}`);return e.json()}async function N3(){const e=await fetch(`${Jt}/api/clients/kiosk/tts`);if(!e.ok)throw new Error(`Failed to fetch kiosk TTS settings: ${e.statusText}`);return e.json()}async function O3(e){const t=await fetch(`${Jt}/api/clients/kiosk/tts`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk TTS settings: ${t.statusText}`);return t.json()}async function $3(){const e=await fetch(`${Jt}/api/clients/kiosk/tts/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk TTS settings: ${e.statusText}`);return e.json()}async function R3(e="openai"){const t=await fetch(`${Jt}/api/clients/kiosk/tts/voices?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Failed to fetch TTS voices: ${t.statusText}`);return t.json()}async function z3(){const e=await fetch(`${Jt}/api/clients/kiosk/ui`);if(!e.ok)throw new Error(`Failed to fetch kiosk UI settings: ${e.statusText}`);return e.json()}async function B3(e){const t=await fetch(`${Jt}/api/clients/kiosk/ui`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk UI settings: ${t.statusText}`);return t.json()}async function U3(){const e=await fetch(`${Jt}/api/clients/kiosk/llm`);if(!e.ok)throw new Error(`Failed to fetch kiosk LLM settings: ${e.statusText}`);return e.json()}async function j3(e){const t=await fetch(`${Jt}/api/clients/kiosk/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk LLM settings: ${t.statusText}`);return t.json()}async function q3(){const e=await fetch(`${Jt}/api/clients/kiosk/llm/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk LLM settings: ${e.statusText}`);return e.json()}async function H3(){const e=await fetch(`${Jt}/api/clients/kiosk/presets`);if(!e.ok)throw new Error(`Failed to fetch kiosk presets: ${e.statusText}`);return e.json()}async function W3(e){const t=await fetch(`${Jt}/api/clients/kiosk/presets/${e}/activate`,{method:"POST"});if(!t.ok)throw new Error(`Failed to activate kiosk preset: ${t.statusText}`);return t.json()}async function V3(e,t){const n=await fetch(`${Jt}/api/clients/kiosk/presets/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update kiosk preset: ${n.statusText}`);return n.json()}const G3={eot_threshold:.7,eot_timeout_ms:5e3,eager_eot_threshold:null,keyterms:[],enabled:!0,provider:"openai",voice:"alloy",model:"tts-1",speed:1,response_format:"pcm",sample_rate:24e3,stream_chunk_bytes:4096,use_segmentation:!0,delimiters:[`
`,". ","? ","! ","* ",", ",": "],segmentation_logging_enabled:!1,first_phrase_min_chars:10,buffering_enabled:!1,startup_delay_enabled:!1,low_latency_audio:!0,initial_buffer_sec:0,max_ahead_sec:1.5,min_chunk_sec:.1,idle_return_delay_ms:1e4,slideshow_max_photos:30,llm_model:"openai/gpt-4o-mini",system_prompt:"You are a helpful voice assistant who replies succinctly.",temperature:.7,max_tokens:500,conversation_mode:!1,conversation_timeout_seconds:10};function Z3(e){return JSON.parse(JSON.stringify(e))}function sf(){return Z3(G3)}function K3(){const e=ln(sf());let t=!1,n=!1;async function r(){if(n)return lt(e);n=!0;try{const[u,i,l,c]=await Promise.all([P3(),N3(),z3(),U3()]),f={eot_threshold:u.eot_threshold,eot_timeout_ms:u.eot_timeout_ms,eager_eot_threshold:u.eager_eot_threshold??null,keyterms:u.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,response_format:i.response_format,sample_rate:i.sample_rate,stream_chunk_bytes:i.stream_chunk_bytes,use_segmentation:i.use_segmentation,delimiters:i.delimiters,segmentation_logging_enabled:i.segmentation_logging_enabled,first_phrase_min_chars:i.first_phrase_min_chars,buffering_enabled:i.buffering_enabled,startup_delay_enabled:i.startup_delay_enabled,low_latency_audio:i.low_latency_audio,initial_buffer_sec:i.initial_buffer_sec,max_ahead_sec:i.max_ahead_sec,min_chunk_sec:i.min_chunk_sec,idle_return_delay_ms:l.idle_return_delay_ms,slideshow_max_photos:l.slideshow_max_photos,llm_model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens,conversation_mode:c.conversation_mode,conversation_timeout_seconds:c.conversation_timeout_seconds};return e.set(f),t=!0,f}catch(u){return console.error("Failed to load kiosk settings:",u),lt(e)}finally{n=!1}}async function a(u){try{const i={},l={},c={},f={};u.eot_threshold!==void 0&&(i.eot_threshold=u.eot_threshold),u.eot_timeout_ms!==void 0&&(i.eot_timeout_ms=u.eot_timeout_ms),u.eager_eot_threshold!==void 0&&(i.eager_eot_threshold=u.eager_eot_threshold),u.keyterms!==void 0&&(i.keyterms=u.keyterms),u.enabled!==void 0&&(l.enabled=u.enabled),u.provider!==void 0&&(l.provider=u.provider),u.voice!==void 0&&(l.voice=u.voice),u.model!==void 0&&(l.model=u.model),u.speed!==void 0&&(l.speed=u.speed),u.response_format!==void 0&&(l.response_format=u.response_format),u.sample_rate!==void 0&&(l.sample_rate=u.sample_rate),u.stream_chunk_bytes!==void 0&&(l.stream_chunk_bytes=u.stream_chunk_bytes),u.use_segmentation!==void 0&&(l.use_segmentation=u.use_segmentation),u.delimiters!==void 0&&(l.delimiters=u.delimiters),u.first_phrase_min_chars!==void 0&&(l.first_phrase_min_chars=u.first_phrase_min_chars),u.segmentation_logging_enabled!==void 0&&(l.segmentation_logging_enabled=u.segmentation_logging_enabled),u.buffering_enabled!==void 0&&(l.buffering_enabled=u.buffering_enabled),u.startup_delay_enabled!==void 0&&(l.startup_delay_enabled=u.startup_delay_enabled),u.low_latency_audio!==void 0&&(l.low_latency_audio=u.low_latency_audio),u.initial_buffer_sec!==void 0&&(l.initial_buffer_sec=u.initial_buffer_sec),u.max_ahead_sec!==void 0&&(l.max_ahead_sec=u.max_ahead_sec),u.min_chunk_sec!==void 0&&(l.min_chunk_sec=u.min_chunk_sec),u.idle_return_delay_ms!==void 0&&(c.idle_return_delay_ms=u.idle_return_delay_ms),u.slideshow_max_photos!==void 0&&(c.slideshow_max_photos=u.slideshow_max_photos),u.llm_model!==void 0&&(f.model=u.llm_model),u.system_prompt!==void 0&&(f.system_prompt=u.system_prompt),u.temperature!==void 0&&(f.temperature=u.temperature),u.max_tokens!==void 0&&(f.max_tokens=u.max_tokens),u.conversation_mode!==void 0&&(f.conversation_mode=u.conversation_mode),u.conversation_timeout_seconds!==void 0&&(f.conversation_timeout_seconds=u.conversation_timeout_seconds);const d=[];return Object.keys(i).length>0&&d.push(I3(i)),Object.keys(l).length>0&&d.push(O3(l)),Object.keys(c).length>0&&d.push(B3(c)),Object.keys(f).length>0&&d.push(j3(f)),await Promise.all(d),await r()}catch(i){throw console.error("Failed to save kiosk settings:",i),i}}async function o(){try{const[u,i,l]=await Promise.all([L3(),$3(),q3()]),c=lt(e),f={eot_threshold:u.eot_threshold,eot_timeout_ms:u.eot_timeout_ms,eager_eot_threshold:u.eager_eot_threshold??null,keyterms:u.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,response_format:i.response_format,sample_rate:i.sample_rate,stream_chunk_bytes:i.stream_chunk_bytes,use_segmentation:i.use_segmentation,delimiters:i.delimiters,segmentation_logging_enabled:i.segmentation_logging_enabled,first_phrase_min_chars:i.first_phrase_min_chars,buffering_enabled:i.buffering_enabled,startup_delay_enabled:i.startup_delay_enabled,low_latency_audio:i.low_latency_audio,initial_buffer_sec:i.initial_buffer_sec,max_ahead_sec:i.max_ahead_sec,min_chunk_sec:i.min_chunk_sec,idle_return_delay_ms:c.idle_return_delay_ms,slideshow_max_photos:c.slideshow_max_photos,llm_model:l.model,system_prompt:l.system_prompt,temperature:l.temperature,max_tokens:l.max_tokens,conversation_mode:l.conversation_mode,conversation_timeout_seconds:l.conversation_timeout_seconds};return e.set(f),f}catch(u){throw console.error("Failed to reset kiosk settings:",u),u}}return{subscribe:e.subscribe,load:r,save:a,reset:o,get isLoaded(){return t},get current(){return lt(e)}}}const fo=K3();var Y3=M('<p class="status">Loading settingsâ¦</p>'),J3=M("<option> </option>"),X3=M("<option> </option>"),Q3=M('<div class="presets-container svelte-10jke8k"><label class="setting-label" for="preset-select">Preset</label> <div class="preset-select-row svelte-10jke8k"><select id="preset-select" class="select-input svelte-10jke8k"></select> <button type="button" class="btn btn-ghost btn-small" title="Save current settings to the selected preset">ð¾ Save</button></div></div>'),ey=M('<div class="setting-range" style="margin-top: 0.75rem;"><div class="setting-range-header"><span class="setting-label" title="Confidence level for triggering early processing. Lower = starts processing sooner (more false starts). Higher = waits longer before speculating.">Eager EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="0.9" step="0.05"/> <div class="range-extents"><span>0.3 (eager)</span> <span>0.9 (conservative)</span></div></div>'),ty=M("<option> </option>"),ny=M('<div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-voice" title="Select the OpenAI voice for text-to-speech synthesis.">Voice</label> <select id="tts-voice" class="select-input svelte-10jke8k"></select></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-model" title="Select the OpenAI TTS model.">Model</label> <select id="tts-model" class="select-input svelte-10jke8k"><option>tts-1 (faster)</option><option>tts-1-hd (higher quality)</option></select></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-response-format" title="Audio format returned by the TTS service.">Response format</label> <select id="tts-response-format" class="select-input svelte-10jke8k"><option>pcm</option><option>mp3</option><option>opus</option><option>aac</option><option>flac</option><option>wav</option></select></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Speech speed multiplier. 1.0 is normal speed.">Speed</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="2.0" step="0.1"/> <div class="range-extents"><span>0.5x (slow)</span> <span>2x (fast)</span></div></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-sample-rate" title="Sample rate in Hz for TTS audio.">Sample rate (Hz)</label> <input id="tts-sample-rate" class="select-input svelte-10jke8k" type="number" min="8000" max="48000" step="1000"/></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-stream-chunk-bytes" title="Chunk size (bytes) when streaming TTS audio from OpenAI. At 24kHz 16-bit PCM: 2048 bytes = ~43ms, 4096 bytes = ~85ms (recommended), 8192 bytes = ~170ms, 32768 bytes = ~683ms. Smaller = lower latency but more network overhead.">Stream chunk bytes</label> <input id="tts-stream-chunk-bytes" class="select-input svelte-10jke8k" type="number" min="512" max="65536" step="256"/></div></div> <label class="setting-boolean" title="Split text at delimiters to start audio sooner." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Enable text segmentation</span></label> <div style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="Minimum characters to accumulate before the first segmented phrase is emitted.">Minimum first phrase length</span> <span class="setting-hint">Set a floor so the first spoken chunk feels complete.</span></div> <input class="select-input svelte-10jke8k" type="number" min="0" max="500" step="1"/></div> <label title="Log when segmentation is waiting for a delimiter after the minimum is reached." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Log segmentation boundary decisions</span></label> <div style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="One delimiter per line. Use \\\\n for newline.">Delimiters</span> <span class="setting-hint">Whitespace matters; each line becomes a delimiter.</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="4" placeholder="\\\\n .  ?  ! "></textarea></div>',1),ry=M('<div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Minimum audio (seconds) to buffer before playback starts.">Initial Buffer</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.05" max="2.0" step="0.05"/> <div class="range-extents"><span>0.05s (fast start)</span> <span>2.0s (smooth)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum audio (seconds) to schedule ahead of current time.">Max Ahead</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="5.0" step="0.1"/> <div class="range-extents"><span>0.3s (tight)</span> <span>5.0s (buffered)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Minimum duration (seconds) for each audio chunk.">Min Chunk Duration</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.02" max="0.5" step="0.01"/> <div class="range-extents"><span>0.02s (responsive)</span> <span>0.5s (chunky)</span></div></div></div>',1),ay=M(`<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior.</span></div> <div class="reasoning-controls"><div class="model-presets-row svelte-10jke8k"><div class="setting-select model-select-compact svelte-10jke8k"><label class="setting-label" for="llm-model" title="Select the language model for generating responses.">Model</label> <select id="llm-model" class="select-input svelte-10jke8k"></select></div> <!></div> <div class="system-prompt-row svelte-10jke8k"><label class="setting-label" for="system-prompt" title="Instructions that define how the assistant behaves.">System Prompt</label> <textarea id="system-prompt" class="keyterms-input system-prompt svelte-10jke8k" rows="4" placeholder="You are a helpful voice assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses. Lower = more focused, higher = more creative. Note: Some models don't support this parameter.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens. Keep low for voice interactions.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="2000" step="50"/> <div class="range-extents"><span>50 (short)</span> <span>2000 (long)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Speech Recognition</span> <span class="setting-hint">Deepgram Flux end-of-turn detection settings.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Confidence level (0.5-0.9) required before the system considers you've finished speaking. Lower = faster response but may cut you off. Higher = waits longer to be sure you're done.">EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="0.9" step="0.05"/> <div class="range-extents"><span>0.5 (fast)</span> <span>0.9 (reliable)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum time (ms) to wait after speech before forcing end-of-turn, regardless of confidence. Shorter = faster response. Longer = allows for natural pauses.">EOT Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="500" max="10000" step="250"/> <div class="range-extents"><span>500ms</span> <span>10s</span></div></div></div> <div class="reasoning-field" style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="Words or phrases the speech recognition should pay extra attention to. Useful for device names, product terms, or commands specific to your home automation setup.">Keyterms</span> <span class="setting-hint">Words to boost recognition (one per line, up to 100).</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="3" placeholder="lights thermostat turn on"></textarea></div></div></div> <div class="setting"><div class="setting-header"><span class="setting-label">Advanced</span> <span class="setting-hint">Optional fine-tuning options.</span></div> <label class="setting-boolean" title="When enabled, the system can speculatively start processing before you fully finish speaking. This reduces latency but may cause 'false starts' if you pause mid-sentence."><input type="checkbox"/> <span>Enable eager end-of-turn</span></label> <!></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Display</span> <span class="setting-hint">Kiosk screen behavior settings.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="When enabled, the microphone re-opens after the assistant speaks, allowing continuous conversation without needing the wake word." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Continuous conversation mode</span></label> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait on the transcription screen after going IDLE before returning to the clock screen.">Return to Clock</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1000" max="60000" step="1000"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait for speech before ending the conversation session and returning to the clock.">Conversation Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1" max="60" step="1"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum number of photos to sync for the slideshow. Lower values reduce memory usage on the Echo device. Changes apply on next sync.">Slideshow Photos</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="5" max="100" step="5"/> <div class="range-extents"><span>5 (low memory)</span> <span>100 (more variety)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Text-to-Speech</span> <span class="setting-hint">Voice synthesis settings for assistant responses.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="Enable or disable audio playback of assistant responses."><input type="checkbox"/> <span>Enable TTS</span></label> <!></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label" title="Low latency mode optimizes for fastest time-to-first-audio. Enable all toggles for maximum speed on fast devices. Disable for smoother playback on slow devices/networks.">Low Latency Mode</span> <span class="setting-hint">Enable all toggles for fastest response. Disable for smoother
              playback.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Skip audio buffering - plays immediately as chunks arrive. Best for fast devices/networks.">Disable Buffering</span> <span class="toggle-value"> </span></div></div> <div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Skip 60ms startup delay before first audio. Faster but may cause glitches on slow devices.">Skip Startup Delay</span> <span class="toggle-value"> </span></div></div> <div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Use low-latency audio mode (interactive). Faster response but may cause stuttering on slow devices.">Low Latency Audio</span> <span class="toggle-value"> </span></div></div> <!></div></div></div>`),sy=M('<h2 id="kiosk-settings-title">Kiosk settings</h2> <p class="model-settings-subtitle">Configure the voice assistant kiosk.</p>',1),oy=M('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),uy=M('<span class="status error"> </span>'),iy=M('<span class="status">Saving changesâ¦</span>'),ly=M('<span class="status">Pending changes; closing this modal will save.</span>'),cy=M('<span class="status">Changes save when you close this modal.</span>'),dy=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function fy(e,t){Nt(t,!1);const n=()=>Dt(o,"$filtered",r),[r,a]=yr(),{filtered:o}=gr;let u=$([]),i=$(null),l=$(!1),c=le(t,"open",8,!1);const f=pn();let d=$(sf()),m=$(!1),h=$(!1),g=$(!0),T=$(null),A=$(!1),w=!1;async function E(){_(g,!0);try{const[G,ce]=await Promise.all([fo.load(),H3(),gr.loadModels()]);_(d,{...G}),_(u,await R3("openai")),_(i,ce)}catch{_(T,"Failed to load settings")}finally{_(g,!1)}}async function C(G){if(!s(l)){_(l,!0);try{_(i,await W3(G));const ce=await fo.load();_(d,{...ce}),_(m,!1)}catch{_(T,"Failed to activate preset")}finally{_(l,!1)}}}async function k(){if(!(!s(i)||s(l))){_(l,!0);try{const G=s(i).active_index,ce=s(i).presets[G],O={name:ce.name,model:s(d).llm_model,system_prompt:s(d).system_prompt??"",temperature:s(d).temperature,max_tokens:s(d).max_tokens,eot_threshold:s(d).eot_threshold,eot_timeout_ms:s(d).eot_timeout_ms,keyterms:s(d).keyterms,tts_enabled:s(d).enabled,tts_voice:s(d).voice,tts_model:s(d).model,tts_sample_rate:s(d).sample_rate};_(i,await V3(G,O)),_(T,`Saved to "${ce.name}"`),setTimeout(()=>{s(T)?.startsWith("Saved")&&_(T,null)},2e3)}catch{_(T,"Failed to save preset")}finally{_(l,!1)}}}function S(){w||s(h)||(w=!0,(async()=>(await F()&&f("close"),w=!1))())}function x(){_(m,!0),_(T,null)}async function F(){if(!s(m))return!0;_(h,!0),_(T,null);try{const G=await fo.save(s(d));return _(d,{...G}),_(m,!1),!0}catch(G){const ce=G instanceof Error?G.message:"Failed to save settings.";return _(T,ce),!1}finally{_(h,!1)}}async function q(){_(h,!0);try{const G=await fo.reset();_(d,{...G}),_(m,!1),_(T,null)}catch{_(T,"Failed to reset settings")}finally{_(h,!1)}}function H(G,ce,O){return`${(G-ce)/(O-ce)*100}%`}xe(()=>(z(c()),s(A),s(m),s(h)),()=>{c()&&!s(A)?(_(A,!0),_(m,!1),_(h,!1),_(T,null),E()):!c()&&s(A)&&(_(A,!1),s(m)&&!s(h)&&F())}),fn(),Ut();var P=Ae(),L=de(P);{var K=G=>{Wr(G,{get open(){return c()},labelledBy:"kiosk-settings-title",closeLabel:"Close kiosk settings",$$events:{close:()=>void S()},children:(ce,O)=>{var ae=Ae(),oe=de(ae);{var se=R=>{var V=Y3();y(R,V)},Y=R=>{var V=ay(),ve=v(V),Se=b(v(ve),2),te=v(Se),X=v(te),J=b(v(X),2);Lt(J,5,n,De=>De.id,(De,it)=>{var Ct=J3(),Pt=v(Ct),qt={};B(()=>{W(Pt,(s(it),p(()=>s(it).name??s(it).id))),qt!==(qt=(s(it),p(()=>s(it).id)))&&(Ct.value=(Ct.__value=(s(it),p(()=>s(it).id)))??"")}),y(De,Ct)});var ye;In(J);var ue=b(X,2);{var we=De=>{var it=Q3(),Ct=b(v(it),2),Pt=v(Ct);Lt(Pt,5,()=>(s(i),p(()=>s(i).presets)),Jn,(Yt,Vt,sn)=>{var Zn=X3(),pr=v(Zn);Zn.value=Zn.__value=sn,B(()=>W(pr,(s(Vt),p(()=>s(Vt).name)))),y(Yt,Zn)});var qt;In(Pt);var jt=b(Pt,2);B(()=>{Pt.disabled=s(h)||s(l),qt!==(qt=(s(i),p(()=>s(i).active_index)))&&(Pt.value=(Pt.__value=(s(i),p(()=>s(i).active_index)))??"",xn(Pt,(s(i),p(()=>s(i).active_index)))),jt.disabled=s(h)||s(l)}),N("change",Pt,Yt=>C(parseInt(Yt.target.value,10))),N("click",jt,k),y(De,it)};I(ue,De=>{s(i)&&De(we)})}var ee=b(te,2),Ue=b(v(ee),2);Sa(Ue,(De,it)=>Ri?.(De),()=>s(d).system_prompt),ur(()=>N("input",Ue,De=>{_(d,{...s(d),system_prompt:De.target.value||null}),x()}));var qe=b(ee,2),ot=v(qe),je=v(ot),Me=b(v(je),2),at=v(Me),be=b(je,2),Re=b(qe,2),$e=v(Re),Ge=v($e),ut=b(v(Ge),2),$t=v(ut),fe=b(Ge,2),j=b(ve,2),pe=b(v(j),2),ge=v(pe),ke=v(ge),Ie=v(ke),Le=b(v(Ie),2),Ze=v(Le),Ke=b(Ie,2),Qe=b(ge,2),ft=v(Qe),et=v(ft),Mt=b(v(et),2),gt=v(Mt),Rt=b(et,2),vn=b(Qe,2),rn=b(v(vn),2),an=b(j,2),wt=b(v(an),2),ct=v(wt),He=b(wt,2);{var mt=De=>{var it=ey(),Ct=v(it),Pt=b(v(Ct),2),qt=v(Pt),jt=b(Ct,2);B((Yt,Vt)=>{W(qt,Yt),It(jt,(s(d),p(()=>s(d).eager_eot_threshold??.5))),jt.disabled=s(h),An(jt,`--slider-fill: ${Vt??""}`)},[()=>(s(d),p(()=>s(d).eager_eot_threshold?.toFixed(2)??"â")),()=>(s(d),p(()=>H(s(d).eager_eot_threshold??.5,.3,.9)))]),N("input",jt,Yt=>{_(d,{...s(d),eager_eot_threshold:parseFloat(Yt.target.value)}),x()}),y(De,it)};I(He,De=>{s(d),p(()=>s(d).eager_eot_threshold!==null)&&De(mt)})}var st=b(an,2),tn=b(v(st),2),cn=v(tn),nt=v(cn),pt=b(cn,2),Tt=v(pt),ze=v(Tt),_n=b(v(ze),2),Ft=v(_n),Ht=b(ze,2),on=b(pt,2);let Mn;var zn=v(on),Ln=v(zn),_e=b(v(Ln),2),Ne=v(_e),ne=b(Ln,2),Oe=b(on,2),Et=v(Oe),Q=v(Et),Z=b(v(Q),2),D=v(Z),U=b(Q,2),re=b(st,2),Ee=b(v(re),2),Fe=v(Ee),me=v(Fe),Ce=b(Fe,2);{var Te=De=>{var it=ny(),Ct=de(it),Pt=v(Ct),qt=b(v(Pt),2);Lt(qt,5,()=>s(u),Jn,(Xt,Sn)=>{var Zr=ty(),kr=v(Zr),no={};B(()=>{W(kr,(s(Sn),p(()=>s(Sn).name))),no!==(no=(s(Sn),p(()=>s(Sn).id)))&&(Zr.value=(Zr.__value=(s(Sn),p(()=>s(Sn).id)))??"")}),y(Xt,Zr)});var jt;In(qt);var Yt=b(Ct,2),Vt=v(Yt),sn=b(v(Vt),2),Zn=v(sn);Zn.value=Zn.__value="tts-1";var pr=b(Zn);pr.value=pr.__value="tts-1-hd";var Vr;In(sn);var Nn=b(Yt,2),hn=v(Nn),wn=b(v(hn),2),nr=v(wn);nr.value=nr.__value="pcm";var wr=b(nr);wr.value=wr.__value="mp3";var Or=b(wr);Or.value=Or.__value="opus";var vr=b(Or);vr.value=vr.__value="aac";var bn=b(vr);bn.value=bn.__value="flac";var kn=b(bn);kn.value=kn.__value="wav";var Gr;In(wn);var On=b(Nn,2),la=v(On),ca=v(la),cs=b(v(ca),2),Yo=v(cs),Pa=b(ca,2),da=b(On,2),Jo=v(da),ds=b(v(Jo),2),to=b(da,2),uf=v(to),Xo=b(v(uf),2),Bi=b(to,2),Qo=v(Bi),eu=b(Bi,2);let Ui;var tu=b(v(eu),2),nu=b(eu,2);let ji;var ru=v(nu),qi=b(nu,2);let Hi;var au=b(v(qi),2);B((Xt,Sn,Zr,kr,no,lf)=>{qt.disabled=s(h),jt!==(jt=(s(d),p(()=>s(d).voice)))&&(qt.value=(qt.__value=(s(d),p(()=>s(d).voice)))??"",xn(qt,(s(d),p(()=>s(d).voice)))),sn.disabled=s(h),Vr!==(Vr=(s(d),p(()=>s(d).model)))&&(sn.value=(sn.__value=(s(d),p(()=>s(d).model)))??"",xn(sn,(s(d),p(()=>s(d).model)))),wn.disabled=s(h),Gr!==(Gr=(s(d),p(()=>s(d).response_format)))&&(wn.value=(wn.__value=(s(d),p(()=>s(d).response_format)))??"",xn(wn,(s(d),p(()=>s(d).response_format)))),W(Yo,`${Xt??""}x`),It(Pa,(s(d),p(()=>s(d).speed))),Pa.disabled=s(h),An(Pa,`--slider-fill: ${Sn??""}`),It(ds,(s(d),p(()=>s(d).sample_rate))),ds.disabled=s(h),It(Xo,(s(d),p(()=>s(d).stream_chunk_bytes))),Xo.disabled=s(h),Kn(Qo,(s(d),p(()=>s(d).use_segmentation))),Qo.disabled=s(h),Ui=At(eu,1,"reasoning-field svelte-10jke8k",null,Ui,Zr),It(tu,(s(d),p(()=>s(d).first_phrase_min_chars))),tu.disabled=(s(h),s(d),p(()=>s(h)||!s(d).use_segmentation)),ji=At(nu,1,"setting-boolean svelte-10jke8k",null,ji,kr),Kn(ru,(s(d),p(()=>s(d).segmentation_logging_enabled))),ru.disabled=(s(h),s(d),p(()=>s(h)||!s(d).use_segmentation)),Hi=At(qi,1,"reasoning-field svelte-10jke8k",null,Hi,no),au.disabled=(s(h),s(d),p(()=>s(h)||!s(d).use_segmentation)),It(au,lf)},[()=>(s(d),p(()=>s(d).speed.toFixed(1))),()=>(s(d),p(()=>H(s(d).speed,.5,2))),()=>({"disabled-field":!s(d).use_segmentation}),()=>({"disabled-field":!s(d).use_segmentation}),()=>({"disabled-field":!s(d).use_segmentation}),()=>(s(d),p(()=>s(d).delimiters.map(Xt=>Xt===`
`?"\\n":Xt).join(`
`)))]),N("change",qt,Xt=>{_(d,{...s(d),voice:Xt.target.value}),x()}),N("change",sn,Xt=>{_(d,{...s(d),model:Xt.target.value}),x()}),N("change",wn,Xt=>{_(d,{...s(d),response_format:Xt.target.value}),x()}),N("input",Pa,Xt=>{_(d,{...s(d),speed:parseFloat(Xt.target.value)}),x()}),N("input",ds,Xt=>{const Sn=parseInt(Xt.target.value,10);Number.isFinite(Sn)&&(_(d,{...s(d),sample_rate:Math.max(8e3,Math.min(48e3,Sn))}),x())}),N("input",Xo,Xt=>{const Sn=parseInt(Xt.target.value,10);Number.isFinite(Sn)&&(_(d,{...s(d),stream_chunk_bytes:Math.max(512,Math.min(65536,Sn))}),x())}),N("change",Qo,Xt=>{_(d,{...s(d),use_segmentation:Xt.target.checked}),x()}),N("input",tu,Xt=>{const Sn=parseInt(Xt.target.value,10);Number.isFinite(Sn)&&(_(d,{...s(d),first_phrase_min_chars:Math.max(0,Math.min(500,Sn))}),x())}),N("change",ru,Xt=>{_(d,{...s(d),segmentation_logging_enabled:Xt.target.checked}),x()}),N("input",au,Xt=>{const Zr=Xt.target.value.split(`
`).map(kr=>kr.replace(/\r/g,"")).map(kr=>kr==="\\n"?`
`:kr).filter(kr=>kr.trim().length>0);_(d,{...s(d),delimiters:Zr}),x()}),y(De,it)};I(Ce,De=>{s(d),p(()=>s(d).enabled)&&De(Te)})}var We=b(re,2),Ye=b(v(We),2),Je=v(Ye),Be=v(Je),Ve=v(Be),Pe=v(Ve),Xe=b(Ve,4),tt=v(Xe),he=b(Je,2),vt=v(he),kt=v(vt),zt=v(kt),Zt=b(kt,4),_t=v(Zt),Wt=b(he,2),rt=v(Wt),Bt=v(rt),gn=v(Bt),bt=b(Bt,4),un=v(bt),dn=b(Wt,2);{var Fn=De=>{var it=ry(),Ct=de(it),Pt=v(Ct),qt=v(Pt),jt=b(v(qt),2),Yt=v(jt),Vt=b(qt,2),sn=b(Ct,2),Zn=v(sn),pr=v(Zn),Vr=b(v(pr),2),Nn=v(Vr),hn=b(pr,2),wn=b(sn,2),nr=v(wn),wr=v(nr),Or=b(v(wr),2),vr=v(Or),bn=b(wr,2);B((kn,Gr,On,la,ca,cs)=>{W(Yt,`${kn??""}s`),It(Vt,(s(d),p(()=>s(d).initial_buffer_sec))),Vt.disabled=s(h),An(Vt,`--slider-fill: ${Gr??""}`),W(Nn,`${On??""}s`),It(hn,(s(d),p(()=>s(d).max_ahead_sec))),hn.disabled=s(h),An(hn,`--slider-fill: ${la??""}`),W(vr,`${ca??""}s`),It(bn,(s(d),p(()=>s(d).min_chunk_sec))),bn.disabled=s(h),An(bn,`--slider-fill: ${cs??""}`)},[()=>(s(d),p(()=>s(d).initial_buffer_sec.toFixed(2))),()=>(s(d),p(()=>H(s(d).initial_buffer_sec,.05,2))),()=>(s(d),p(()=>s(d).max_ahead_sec.toFixed(1))),()=>(s(d),p(()=>H(s(d).max_ahead_sec,.3,5))),()=>(s(d),p(()=>s(d).min_chunk_sec.toFixed(2))),()=>(s(d),p(()=>H(s(d).min_chunk_sec,.02,.5)))]),N("input",Vt,kn=>{_(d,{...s(d),initial_buffer_sec:parseFloat(kn.target.value)}),x()}),N("input",hn,kn=>{_(d,{...s(d),max_ahead_sec:parseFloat(kn.target.value)}),x()}),N("input",bn,kn=>{_(d,{...s(d),min_chunk_sec:parseFloat(kn.target.value)}),x()}),y(De,it)};I(dn,De=>{s(d),p(()=>s(d).buffering_enabled)&&De(Fn)})}B((De,it,Ct,Pt,qt,jt,Yt,Vt,sn,Zn,pr,Vr,Nn)=>{J.disabled=s(h),ye!==(ye=(s(d),p(()=>s(d).llm_model)))&&(J.value=(J.__value=(s(d),p(()=>s(d).llm_model)))??"",xn(J,(s(d),p(()=>s(d).llm_model)))),Ue.disabled=s(h),It(Ue,(s(d),p(()=>s(d).system_prompt??""))),W(at,De),It(be,(s(d),p(()=>s(d).temperature))),be.disabled=s(h),An(be,`--slider-fill: ${it??""}`),W($t,(s(d),p(()=>s(d).max_tokens))),It(fe,(s(d),p(()=>s(d).max_tokens))),fe.disabled=s(h),An(fe,`--slider-fill: ${Ct??""}`),W(Ze,Pt),It(Ke,(s(d),p(()=>s(d).eot_threshold))),Ke.disabled=s(h),An(Ke,`--slider-fill: ${qt??""}`),W(gt,`${s(d),p(()=>s(d).eot_timeout_ms)??""}ms`),It(Rt,(s(d),p(()=>s(d).eot_timeout_ms))),Rt.disabled=s(h),An(Rt,`--slider-fill: ${jt??""}`),rn.disabled=s(h),It(rn,Yt),Kn(ct,(s(d),p(()=>s(d).eager_eot_threshold!==null))),ct.disabled=s(h),Kn(nt,(s(d),p(()=>s(d).conversation_mode))),nt.disabled=s(h),W(Ft,`${Vt??""}s`),It(Ht,(s(d),p(()=>s(d).idle_return_delay_ms))),Ht.disabled=s(h),An(Ht,`--slider-fill: ${sn??""}`),Mn=At(on,1,"reasoning-field svelte-10jke8k",null,Mn,Zn),W(Ne,`${pr??""}s`),It(ne,(s(d),p(()=>s(d).conversation_timeout_seconds))),ne.disabled=(s(h),s(d),p(()=>s(h)||!s(d).conversation_mode)),An(ne,`--slider-fill: ${Vr??""}`),W(D,(s(d),p(()=>s(d).slideshow_max_photos))),It(U,(s(d),p(()=>s(d).slideshow_max_photos))),U.disabled=s(h),An(U,`--slider-fill: ${Nn??""}`),Kn(me,(s(d),p(()=>s(d).enabled))),me.disabled=s(h),Kn(Pe,(s(d),p(()=>!s(d).buffering_enabled))),Pe.disabled=s(h),W(tt,(s(d),p(()=>s(d).buffering_enabled?"Off (buffered)":"On (instant)"))),Kn(zt,(s(d),p(()=>!s(d).startup_delay_enabled))),zt.disabled=s(h),W(_t,(s(d),p(()=>s(d).startup_delay_enabled?"Off (60ms delay)":"On (instant)"))),Kn(gn,(s(d),p(()=>s(d).low_latency_audio))),gn.disabled=s(h),W(un,(s(d),p(()=>s(d).low_latency_audio?"On (interactive)":"Off (smooth)")))},[()=>(s(d),p(()=>s(d).temperature.toFixed(1))),()=>(s(d),p(()=>H(s(d).temperature,0,2))),()=>(s(d),p(()=>H(s(d).max_tokens,50,2e3))),()=>(s(d),p(()=>s(d).eot_threshold.toFixed(2))),()=>(s(d),p(()=>H(s(d).eot_threshold,.5,.9))),()=>(s(d),p(()=>H(s(d).eot_timeout_ms,500,1e4))),()=>(s(d),p(()=>s(d).keyterms.join(`
`))),()=>(s(d),p(()=>(s(d).idle_return_delay_ms/1e3).toFixed(0))),()=>(s(d),p(()=>H(s(d).idle_return_delay_ms,1e3,6e4))),()=>({"disabled-field":!s(d).conversation_mode}),()=>(s(d),p(()=>s(d).conversation_timeout_seconds.toFixed(0))),()=>(s(d),p(()=>H(s(d).conversation_timeout_seconds,1,60))),()=>(s(d),p(()=>H(s(d).slideshow_max_photos,5,100)))]),N("change",J,De=>{_(d,{...s(d),llm_model:De.target.value}),x()}),N("input",be,De=>{_(d,{...s(d),temperature:parseFloat(De.target.value)}),x()}),N("input",fe,De=>{_(d,{...s(d),max_tokens:parseInt(De.target.value,10)}),x()}),N("input",Ke,De=>{_(d,{...s(d),eot_threshold:parseFloat(De.target.value)}),x()}),N("input",Rt,De=>{_(d,{...s(d),eot_timeout_ms:parseInt(De.target.value,10)}),x()}),N("input",rn,De=>{const Ct=De.target.value.split(`
`).map(Pt=>Pt.trim()).filter(Pt=>Pt.length>0).slice(0,100);_(d,{...s(d),keyterms:Ct}),x()}),N("change",ct,De=>{const it=De.target.checked;_(d,{...s(d),eager_eot_threshold:it?.5:null}),x()}),N("change",nt,De=>{_(d,{...s(d),conversation_mode:De.target.checked}),x()}),N("input",Ht,De=>{_(d,{...s(d),idle_return_delay_ms:parseInt(De.target.value,10)}),x()}),N("input",ne,De=>{_(d,{...s(d),conversation_timeout_seconds:parseFloat(De.target.value)}),x()}),N("input",U,De=>{_(d,{...s(d),slideshow_max_photos:parseInt(De.target.value,10)}),x()}),N("change",me,De=>{_(d,{...s(d),enabled:De.target.checked}),x()}),N("change",Pe,De=>{const it=De.target.checked;_(d,{...s(d),buffering_enabled:!it,initial_buffer_sec:it?0:s(d).initial_buffer_sec||.3}),x()}),N("change",zt,De=>{_(d,{...s(d),startup_delay_enabled:!De.target.checked}),x()}),N("change",gn,De=>{_(d,{...s(d),low_latency_audio:De.target.checked}),x()}),y(R,V)};I(oe,R=>{s(g)?R(se):R(Y,!1)})}y(ce,ae)},$$slots:{default:!0,heading:(ce,O)=>{var ae=sy();y(ce,ae)},actions:(ce,O)=>{var ae=oy();B(()=>ae.disabled=s(h)||s(g)),N("click",ae,q),y(ce,ae)},footer:(ce,O)=>{var ae=dy(),oe=v(ae);{var se=R=>{var V=uy(),ve=v(V);B(()=>W(ve,s(T))),y(R,V)},Y=R=>{var V=Ae(),ve=de(V);{var Se=X=>{var J=iy();y(X,J)},te=X=>{var J=Ae(),ye=de(J);{var ue=ee=>{var Ue=ly();y(ee,Ue)},we=ee=>{var Ue=cy();y(ee,Ue)};I(ye,ee=>{s(m)?ee(ue):ee(we,!1)},!0)}y(X,J)};I(ve,X=>{s(h)?X(Se):X(te,!1)},!0)}y(R,V)};I(oe,R=>{s(T)?R(se):R(Y,!1)})}y(ce,ae)}}})};I(L,G=>{c()&&G(K)})}y(e,P),Ot(),a()}const wo=["Google Calendar","Google Tasks","Gmail","Google Drive"],zu={loading:!1,authorizing:!1,authorized:!1,userEmail:null,expiresAt:null,services:[...wo],error:null};function py(e){return new Promise((t,n)=>{const r=u=>{const i=u.data;if(!i||typeof i!="object"||i.source!=="google-auth")return;o();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},a=window.setInterval(()=>{e.closed&&(o(),n(new Error("The authorization window was closed before completion.")))},500),o=()=>{window.removeEventListener("message",r),window.clearInterval(a)};window.addEventListener("message",r)})}function vy(){const e=ln({...zu});async function t(){e.update(a=>({...a,loading:!0,error:null}));try{const a=await ip();e.set({loading:!1,authorizing:!1,authorized:a.authorized,userEmail:a.user_email??null,expiresAt:a.expires_at??null,services:a.services&&a.services.length>0?a.services:[...wo],error:null})}catch(a){const o=a instanceof Error?a.message:"Failed to check Google authorization status.";e.set({...zu,services:[...wo],loading:!1,error:o})}}function n(){e.set({...zu,services:[...wo]})}async function r(){if(typeof window>"u")return e.update(o=>({...o,error:"Google authorization is only available in a browser environment."})),!1;if(lt(e).authorizing)return!1;e.update(o=>({...o,authorizing:!0,error:null}));try{const o=await lp({}),u=window.open(o.auth_url,"google-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!u)throw new Error("Popup was blocked. Allow pop-ups and try again.");return u.focus(),await py(u),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(o){const u=o instanceof Error?o.message:"Failed to start Google authorization.";return e.update(i=>({...i,authorizing:!1,error:u})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}const ii=["svelte","voice","kiosk","cli"],po={svelte:"Main",voice:"Voice",kiosk:"Kiosk",cli:"CLI"},vo={loading:!1,refreshing:!1,saving:!1,dirty:!1,error:null,saveError:null,servers:[],updatedAt:null,pending:{},pendingChanges:{},clientPreferences:{svelte:null,voice:null,kiosk:null,cli:null},prefsLoaded:!1};function ja(e,t){return{...e,servers:t.servers??[],updatedAt:t.updated_at??null,error:null,saveError:null}}function hy(){const e=ln({...vo});async function t(){e.set({...vo,loading:!0});try{const[m,...h]=await Promise.all([fu(),...ii.map(T=>up(T))]),g={svelte:null,voice:null,kiosk:null,cli:null};ii.forEach((T,A)=>{const w=h[A];g[T]=w.enabled_servers.length>0?w.enabled_servers:null}),e.set({...vo,servers:m.servers,updatedAt:m.updated_at??null,clientPreferences:g,prefsLoaded:!0,loading:!1})}catch(m){const h=m instanceof Error?m.message:"Failed to load MCP servers.";e.set({...vo,loading:!1,error:h})}}function n(m,h){e.update(g=>{const T=g.servers.map(w=>w.id===m?{...w,enabled:h}:w),A={...g.pendingChanges,[m]:{...g.pendingChanges[m]??{},enabled:h}};return{...g,servers:T,dirty:!0,saveError:null,pendingChanges:A}})}function r(m,h,g){e.update(T=>{const A=T.servers.find(S=>S.id===m);if(!A)return T;const w=new Set(A.disabled_tools??[]);g?w.delete(h):w.add(h);const E=Array.from(w).sort(),C=T.servers.map(S=>S.id!==m?S:{...S,disabled_tools:E,tools:S.tools.map(x=>x.name===h?{...x,enabled:g}:x)}),k={...T.pendingChanges,[m]:{...T.pendingChanges[m]??{},disabled_tools:E}};return{...T,servers:C,dirty:!0,saveError:null,pendingChanges:k}})}async function a(){e.update(m=>({...m,refreshing:!0,error:null}));try{const m=await op();e.update(h=>({...ja(h,m),refreshing:!1}))}catch(m){const h=m instanceof Error?m.message:"Failed to refresh MCP servers.";e.update(g=>({...g,refreshing:!1,saveError:h}))}}function o(m){return lt(e).servers.find(g=>g.id===m)}function u(m){return!!lt(e).pending[m]}async function i(){const m=lt(e);if(!m.dirty)return!0;const h=Object.entries(m.pendingChanges);if(!h.length)return e.update(T=>({...T,dirty:!1})),!0;e.update(T=>({...T,saving:!0,saveError:null}));let g=!0;for(const[T,A]of h){e.update(w=>({...w,pending:{...w.pending,[T]:!0}}));try{const w=await sp(T,A);e.update(E=>{const C={...E.pending};delete C[T];const k={...E.pendingChanges};delete k[T];const S=ja(E,w),x=Object.keys(k).length>0;return{...S,pending:C,pendingChanges:k,dirty:x}})}catch(w){let E="Failed to update MCP server.";if(w instanceof Error)E=w.message;else if(typeof w=="object"&&w!==null){const C=w;E=String(C.detail||C.message||C.error||JSON.stringify(w))}else typeof w=="string"&&(E=w);E.includes("[object Object]")&&(E="Failed to save MCP server settings. Check server logs for details."),e.update(C=>{const k={...C.pending};return delete k[T],{...C,pending:k,saving:!1,saveError:E}}),g=!1;break}}return g?(e.update(T=>({...T,saving:!1,dirty:!1})),!0):(e.update(T=>({...T,saving:!1,dirty:!0})),!1)}async function l(m){e.update(h=>({...h,saving:!0,saveError:null}));try{const h=await rp(m),g=await fu(),A=lt(e).clientPreferences.svelte??g.servers.map(w=>w.id);if(A.includes(h.id))e.update(w=>({...ja(w,g),saving:!1}));else{const w=[...A,h.id];try{const E=await cl("svelte",w);e.update(C=>({...ja(C,g),clientPreferences:{...C.clientPreferences,svelte:E.enabled_servers.length>0?E.enabled_servers:null},saving:!1}))}catch{e.update(E=>({...ja(E,g),saving:!1}))}}return h}catch(h){const g=h instanceof Error?h.message:"Failed to connect to MCP server.";return e.update(T=>({...T,saving:!1,saveError:g})),null}}async function c(m){e.update(h=>({...h,saving:!0,saveError:null,pending:{...h.pending,[m]:!0}}));try{await ap(m);const h=await fu();return e.update(g=>{const T={...g.pending};return delete T[m],{...ja(g,h),saving:!1,pending:T}}),!0}catch(h){const g=h instanceof Error?h.message:"Failed to remove MCP server.";return e.update(T=>{const A={...T.pending};return delete A[m],{...T,saving:!1,saveError:g,pending:A}}),!1}}async function f(m,h,g){const T=lt(e),A=T.clientPreferences[m]??T.servers.map(E=>E.id);let w;g?w=A.includes(h)?A:[...A,h]:w=A.filter(E=>E!==h),e.update(E=>({...E,clientPreferences:{...E.clientPreferences,[m]:w},saving:!0,saveError:null}));try{const E=await cl(m,w);e.update(C=>({...C,clientPreferences:{...C.clientPreferences,[m]:E.enabled_servers.length>0?E.enabled_servers:null},saving:!1}))}catch(E){const C=E instanceof Error?E.message:"Failed to update preferences.";e.update(k=>({...k,clientPreferences:{...k.clientPreferences,[m]:A.length>0?A:null},saving:!1,saveError:C}))}}function d(m,h){const T=lt(e).clientPreferences[m];return T===null?!0:T.includes(h)}return{subscribe:e.subscribe,load:t,refresh:a,setServerEnabled:n,setToolEnabled:r,connectServer:l,removeServer:c,setClientServerEnabled:f,isServerEnabledForClient:d,getServer:o,isPending:u,flushPending:i}}const sc={loading:!1,saving:!1,refreshing:!1,configured:!1,email:null,error:null};function my(){const e=ln({...sc});async function t(){e.update(o=>({...o,loading:!0,error:null}));try{const o=await cp();e.set({loading:!1,saving:!1,refreshing:!1,configured:o.configured,email:o.email,error:null})}catch(o){const u=o instanceof Error?o.message:"Failed to check Monarch status.";e.set({...sc,loading:!1,error:u})}}async function n(o){e.update(u=>({...u,saving:!0,error:null}));try{const u=await dp(o);return e.set({loading:!1,saving:!1,refreshing:!1,configured:u.configured,email:u.email,error:null}),!0}catch(u){const i=u instanceof Error?u.message:"Failed to save Monarch credentials.";return e.update(l=>({...l,saving:!1,error:i})),!1}}async function r(){e.update(o=>({...o,saving:!0,error:null}));try{const o=await fp();return e.set({loading:!1,saving:!1,refreshing:!1,configured:o.configured,email:o.email,error:null}),!0}catch(o){const u=o instanceof Error?o.message:"Failed to remove Monarch credentials.";return e.update(i=>({...i,saving:!1,error:u})),!1}}async function a(){e.update(o=>({...o,refreshing:!0,error:null}));try{return await new Promise(o=>setTimeout(o,2e3)),e.update(o=>({...o,refreshing:!1})),{success:!0,message:"Account data refreshed successfully"}}catch(o){const u=o instanceof Error?o.message:"Failed to refresh account data.";return e.update(i=>({...i,refreshing:!1,error:u})),{success:!1,message:u}}}return{subscribe:e.subscribe,load:t,save:n,remove:r,refresh:a}}const Bu={loading:!1,authorizing:!1,authorized:!1,userEmail:null,error:null};function gy(e){return new Promise((t,n)=>{const r=u=>{const i=u.data;if(!i||typeof i!="object"||i.source!=="spotify-auth")return;o();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},a=window.setInterval(()=>{e.closed&&(o(),n(new Error("The authorization window was closed before completion.")))},500),o=()=>{window.removeEventListener("message",r),window.clearInterval(a)};window.addEventListener("message",r)})}function _y(){const e=ln({...Bu});async function t(){e.update(a=>({...a,loading:!0,error:null}));try{const a=await pp();e.set({loading:!1,authorizing:!1,authorized:a.authorized,userEmail:a.user_email??null,error:null})}catch(a){const o=a instanceof Error?a.message:"Failed to check Spotify authorization status.";e.set({...Bu,loading:!1,error:o})}}function n(){e.set({...Bu})}async function r(){if(typeof window>"u")return e.update(o=>({...o,error:"Spotify authorization is only available in a browser environment."})),!1;if(lt(e).authorizing)return!1;e.update(o=>({...o,authorizing:!0,error:null}));try{const o=await vp({}),u=window.open(o.auth_url,"spotify-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!u)throw new Error("Popup was blocked. Allow pop-ups and try again.");return u.focus(),await gy(u),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(o){const u=o instanceof Error?o.message:"Failed to start Spotify authorization.";return e.update(i=>({...i,authorizing:!1,error:u})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}var by=M('<p class="status">Checking Google authorization...</p>'),yy=M('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),xy=M('<p class="status muted"> </p>'),wy=M('<p class="status muted">Access will refresh automatically.</p>'),ky=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <!>',1),Sy=M('<p class="status">Google services are not connected.</p>'),Ey=M("<li> </li>"),Cy=M('<p class="status">Checking Spotify authorization...</p>'),Ay=M('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),Ty=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <p class="status muted">Access will refresh automatically.</p>',1),Dy=M('<p class="status">Spotify is not connected.</p>'),My=M('<button type="button" class="btn btn-primary btn-small auth-reconnect-btn">Reconnect</button>'),Fy=M('<button type="button" class="btn btn-primary btn-small auth-reconnect-btn"> </button>'),Py=M('<p class="status">Checking Monarch status...</p>'),Iy=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p>'),Ly=Ma('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),Ny=Ma('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),Oy=M('<p class="status error"> </p>'),$y=M(`<div class="monarch-form"><label>Email <input type="email" class="input-control" placeholder="email@example.com"/></label> <label>Password <div class="password-input-wrapper"><input class="input-control" placeholder="Password"/> <button type="button" class="btn btn-ghost btn-icon btn-small"><!></button></div></label> <label>MFA Secret (Optional) <input type="text" class="input-control" placeholder="MFA Secret"/></label> <p class="status muted" style="margin-top: -0.5rem; margin-bottom: 1rem; font-size: 0.8em;">If you already use an app, you must <strong>reset MFA</strong> in Monarch
              Settings to see the secret key again. Enter the new key here AND in
              your app.</p> <!></div>`),Ry=M('<p class="system-card-caption"> </p>'),zy=M('<p class="system-card-caption">Toggle integrations available to the assistant.</p>'),By=M('<p class="status">Loading MCP servers...</p>'),Uy=M('<p class="status error"> </p>'),jy=M('<p class="status">No MCP servers configured.</p>'),qy=M('<label class="toggle client-toggle"><input type="checkbox"/> <span> </span></label>'),Hy=M('<li class="tool-row"><div class="tool-info"><span class="tool-name"> </span></div> <label class="toggle"><input type="checkbox"/> <span> </span></label></li>'),Wy=M('<ul class="tool-list"></ul>'),Vy=M('<p class="status">Tool list unavailable.</p>'),Gy=M('<p class="status warning"> </p>'),Zy=M('<div class="tools-dropdown"><!> <!></div>'),Ky=M('<li class="server-row"><div class="server-row-header"><div class="server-heading"><h4> </h4> <div class="server-meta"><span> </span> <span aria-hidden="true">&bull;</span> <span class="server-url"> </span></div></div> <div class="server-toggles"><div class="client-toggles-group"></div> <label class="toggle running-toggle" title="Enable or disable this server globally"><input type="checkbox"/> <span> </span></label> <button type="button" class="btn btn-ghost btn-small btn-danger" title="Remove this server">Remove</button></div></div> <div class="server-row-body"><button type="button"><span class="tools-toggle__label"> </span> <svg class="tools-toggle__icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!></div></li>'),Yy=M('<ul class="server-list"></ul>'),Jy=M('<p class="status error"> </p>'),Xy=M('<p class="status warning">Pending changes save when you close this modal.</p>'),Qy=M('<div class="add-server-row"><input type="url" class="input-control" placeholder="http://192.168.1.110:9003/mcp"/> <button type="button" class="btn btn-primary btn-small"> </button></div> <!> <!> <!>',1),e6=M('<article class="system-card"><header class="system-card-header"><div><h3>Google services</h3> <p class="system-card-caption">Connect Calendar, Tasks, Gmail, and Drive with a single consent.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small auth-reconnect-btn"> </button></div></header> <div class="system-card-body google-auth-body"><!> <ul class="google-services-list"></ul> <p class="status muted"><!></p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Spotify</h3> <p class="system-card-caption">Connect Spotify for music control and playback.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small auth-reconnect-btn"> </button></div></header> <div class="system-card-body google-auth-body"><!> <p class="status muted"><!></p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Monarch Money</h3> <p class="system-card-caption">Connect your Monarch Money account.</p></div> <div class="system-card-actions"><!></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Server status</h3> <!></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small"> </button></div></header> <div class="system-card-body"><!></div></article>',1),t6=M('<h2 id="mcp-settings-title">MCP servers</h2> <p class="model-settings-subtitle">Manage MCP server availability, tools, and client access.</p>',1),n6=M('<p class="status error">Resolve the errors above before closing.</p>'),r6=M('<p class="status">Saving changes...</p>'),a6=M('<p class="status">Pending changes; closing this modal will save.</p>'),s6=M('<p class="status">Changes save when you close this modal.</p>'),o6=M('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function u6(e,t){Nt(t,!1);const n=()=>Dt(f,"$mcpServers",u),r=()=>Dt(d,"$googleAuth",u),a=()=>Dt(h,"$spotifyAuth",u),o=()=>Dt(m,"$monarchAuth",u),[u,i]=yr();let l=le(t,"open",8,!1);const c=pn(),f=hy(),d=vy(),m=my(),h=_y();let g=$(!1),T=!1,A=$(new Set),w=$(""),E=$(""),C=$(""),k=$(!1),S=$(""),x=$(!1);async function F(){await Promise.all([f.load(),d.load(),m.load(),h.load()])}async function q(){if(T||n().saving||r().authorizing)return;T=!0;const J=await f.flushPending(),ye=lt(f);J&&!ye.saveError&&c("close"),T=!1}function H(){!s(w)||!s(E)||m.save({email:s(w),password:s(E),mfa_secret:s(C)||null})}function P(J,ye){n().saving||f.setServerEnabled(J,ye)}function L(J,ye,ue){n().saving||f.setClientServerEnabled(J,ye,ue)}function K(J,ye,ue){n().saving||f.setToolEnabled(J,ye,ue)}async function G(){const J=s(S).trim();!J||s(x)||(_(x,!0),await f.connectServer(J),_(x,!1),_(S,""))}async function ce(J){n().saving||await f.removeServer(J)}function O(){const J=lt(f);J.dirty||J.saving||f.refresh()}function ae(){r().loading||r().authorizing||d.load()}async function oe(){r().authorizing||await d.authorize()}function se(){a().loading||a().authorizing||h.load()}async function Y(){a().authorizing||await h.authorize()}async function R(){if(o().saving)return;await m.remove()&&(_(E,""),_(C,""),_(k,!1))}function V(J){if(!J)return null;try{const ye=new Date(J);return Number.isNaN(ye.getTime())?J:new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"2-digit"}).format(ye)}catch(ye){return console.warn("Failed to format timestamp",ye),J}}function ve(J){const ye=new Set(s(A));ye.has(J)?ye.delete(J):ye.add(J),_(A,ye)}xe(()=>(z(l()),s(g)),()=>{l()&&!s(g)?(_(g,!0),F()):!l()&&s(g)&&(_(g,!1),d.reset(),h.reset(),_(A,new Set),_(S,""))}),fn(),Ut();var Se=Ae(),te=de(Se);{var X=J=>{{let ye=Gt(()=>(n(),r(),p(()=>n().saving||r().authorizing)));Wr(J,{get open(){return l()},labelledBy:"mcp-settings-title",modalClass:"mcp-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close MCP servers",get closeDisabled(){return s(ye)},$$events:{close:()=>void q()},children:(ue,we)=>{var ee=e6(),Ue=de(ee),qe=v(Ue),ot=b(v(qe),2),je=v(ot),Me=v(je),at=b(qe,2),be=v(at);{var Re=ne=>{var Oe=by();y(ne,Oe)},$e=ne=>{var Oe=Ae(),Et=de(Oe);{var Q=D=>{var U=yy(),re=de(U),Ee=v(re),Fe=b(re,2),me=v(Fe);B(()=>{W(Ee,(r(),p(()=>r().error))),me.disabled=(r(),p(()=>r().loading||r().authorizing))}),N("click",me,ae),y(D,U)},Z=D=>{var U=Ae(),re=de(U);{var Ee=me=>{var Ce=ky(),Te=de(Ce),We=b(v(Te)),Ye=v(We),Je=b(Te,2);{var Be=Pe=>{var Xe=xy(),tt=v(Xe);B(he=>W(tt,`Current token expires ${he??""}.`),[()=>(r(),p(()=>V(r().expiresAt)??"soon"))]),y(Pe,Xe)},Ve=Pe=>{var Xe=wy();y(Pe,Xe)};I(Je,Pe=>{r(),p(()=>r().expiresAt)?Pe(Be):Pe(Ve,!1)})}B(()=>W(Ye,(r(),p(()=>r().userEmail)))),y(me,Ce)},Fe=me=>{var Ce=Sy();y(me,Ce)};I(re,me=>{r(),p(()=>r().authorized)?me(Ee):me(Fe,!1)},!0)}y(D,U)};I(Et,D=>{r(),p(()=>r().error)?D(Q):D(Z,!1)},!0)}y(ne,Oe)};I(be,ne=>{r(),p(()=>r().loading)?ne(Re):ne($e,!1)})}var Ge=b(be,2);Lt(Ge,5,()=>(r(),p(()=>r().services)),Jn,(ne,Oe)=>{var Et=Ey(),Q=v(Et);B(()=>W(Q,s(Oe))),y(ne,Et)});var ut=b(Ge,2),$t=v(ut);{var fe=ne=>{var Oe=nn(`Click "Reconnect" to refresh Google authorization for these
            integrations.`);y(ne,Oe)},j=ne=>{var Oe=nn('Click "Connect" to authorize these integrations for the assistant.');y(ne,Oe)};I($t,ne=>{r(),p(()=>r().authorized)?ne(fe):ne(j,!1)})}var pe=b(Ue,2),ge=v(pe),ke=b(v(ge),2),Ie=v(ke),Le=v(Ie),Ze=b(ge,2),Ke=v(Ze);{var Qe=ne=>{var Oe=Cy();y(ne,Oe)},ft=ne=>{var Oe=Ae(),Et=de(Oe);{var Q=D=>{var U=Ay(),re=de(U),Ee=v(re),Fe=b(re,2),me=v(Fe);B(()=>{W(Ee,(a(),p(()=>a().error))),me.disabled=(a(),p(()=>a().loading||a().authorizing))}),N("click",me,se),y(D,U)},Z=D=>{var U=Ae(),re=de(U);{var Ee=me=>{var Ce=Ty(),Te=de(Ce),We=b(v(Te)),Ye=v(We);B(()=>W(Ye,(a(),p(()=>a().userEmail)))),y(me,Ce)},Fe=me=>{var Ce=Dy();y(me,Ce)};I(re,me=>{a(),p(()=>a().authorized)?me(Ee):me(Fe,!1)},!0)}y(D,U)};I(Et,D=>{a(),p(()=>a().error)?D(Q):D(Z,!1)},!0)}y(ne,Oe)};I(Ke,ne=>{a(),p(()=>a().loading)?ne(Qe):ne(ft,!1)})}var et=b(Ke,2),Mt=v(et);{var gt=ne=>{var Oe=nn('Click "Reconnect" to refresh Spotify authorization.');y(ne,Oe)},Rt=ne=>{var Oe=nn('Click "Connect" to authorize music control and playback features.');y(ne,Oe)};I(Mt,ne=>{a(),p(()=>a().authorized)?ne(gt):ne(Rt,!1)})}var vn=b(pe,2),rn=v(vn),an=b(v(rn),2),wt=v(an);{var ct=ne=>{var Oe=My();B(()=>Oe.disabled=(o(),p(()=>o().saving))),N("click",Oe,()=>void R()),y(ne,Oe)},He=ne=>{var Oe=Fy(),Et=v(Oe);B(()=>{Oe.disabled=(o(),s(w),s(E),p(()=>o().saving||!s(w)||!s(E))),W(Et,(o(),p(()=>o().saving?"Saving...":"Connect")))}),N("click",Oe,H),y(ne,Oe)};I(wt,ne=>{o(),p(()=>o().configured)?ne(ct):ne(He,!1)})}var mt=b(rn,2),st=v(mt);{var tn=ne=>{var Oe=Py();y(ne,Oe)},cn=ne=>{var Oe=Ae(),Et=de(Oe);{var Q=D=>{var U=Iy(),re=b(v(U)),Ee=v(re);B(()=>W(Ee,(o(),p(()=>o().email)))),y(D,U)},Z=D=>{var U=$y(),re=v(U),Ee=b(v(re)),Fe=b(re,2),me=b(v(Fe)),Ce=v(me),Te=b(Ce,2),We=v(Te);{var Ye=tt=>{var he=Ly();y(tt,he)},Je=tt=>{var he=Ny();y(tt,he)};I(We,tt=>{s(k)?tt(Ye):tt(Je,!1)})}var Be=b(Fe,2),Ve=b(v(Be)),Pe=b(Be,4);{var Xe=tt=>{var he=Oy(),vt=v(he);B(()=>W(vt,(o(),p(()=>o().error)))),y(tt,he)};I(Pe,tt=>{o(),p(()=>o().error)&&tt(Xe)})}B(()=>{ie(Ce,"type",s(k)?"text":"password"),ie(Te,"title",s(k)?"Hide password":"Show password")}),sr(Ee,()=>s(w),tt=>_(w,tt)),sr(Ce,()=>s(E),tt=>_(E,tt)),N("click",Te,()=>_(k,!s(k))),sr(Ve,()=>s(C),tt=>_(C,tt)),y(D,U)};I(Et,D=>{o(),p(()=>o().configured)?D(Q):D(Z,!1)},!0)}y(ne,Oe)};I(st,ne=>{o(),p(()=>o().loading)?ne(tn):ne(cn,!1)})}var nt=b(vn,2),pt=v(nt),Tt=v(pt),ze=b(v(Tt),2);{var _n=ne=>{var Oe=Ry(),Et=v(Oe);B(Q=>W(Et,`Last updated ${Q??""}`),[()=>(n(),p(()=>V(n().updatedAt)??""))]),y(ne,Oe)},Ft=ne=>{var Oe=zy();y(ne,Oe)};I(ze,ne=>{n(),p(()=>n().updatedAt)?ne(_n):ne(Ft,!1)})}var Ht=b(Tt,2),on=v(Ht),Mn=v(on),zn=b(pt,2),Ln=v(zn);{var _e=ne=>{var Oe=By();y(ne,Oe)},Ne=ne=>{var Oe=Ae(),Et=de(Oe);{var Q=D=>{var U=Uy(),re=v(U);B(()=>W(re,(n(),p(()=>n().error)))),y(D,U)},Z=D=>{var U=Qy(),re=de(U),Ee=v(re),Fe=b(Ee,2),me=v(Fe),Ce=b(re,2);{var Te=Pe=>{var Xe=jy();y(Pe,Xe)},We=Pe=>{var Xe=Yy();Lt(Xe,5,()=>(n(),p(()=>n().servers)),Jn,(tt,he)=>{var vt=Ky(),kt=v(vt),zt=v(kt),Zt=v(zt),_t=v(Zt),Wt=b(Zt,2),rt=v(Wt);let Bt;var gn=v(rt),bt=b(rt,4),un=v(bt),dn=b(zt,2),Fn=v(dn);Lt(Fn,5,()=>ii,Jn,(Nn,hn)=>{var wn=qy(),nr=v(wn),wr=b(nr,2),Or=v(wr);B(vr=>{ie(wn,"title",`Enable for ${z(po),s(hn),p(()=>po[s(hn)])??""} client`),Kn(nr,vr),nr.disabled=(s(he),n(),p(()=>!s(he).enabled||!s(he).connected||n().pending[s(he).id]||n().saving)),W(Or,(z(po),s(hn),p(()=>po[s(hn)])))},[()=>(n(),s(hn),s(he),p(()=>n().clientPreferences[s(hn)]===null||n().clientPreferences[s(hn)]?.includes(s(he).id)))]),N("change",nr,vr=>L(s(hn),s(he).id,vr.target.checked)),y(Nn,wn)});var De=b(Fn,2),it=v(De),Ct=b(it,2),Pt=v(Ct),qt=b(De,2),jt=b(kt,2),Yt=v(jt);let Vt;var sn=v(Yt),Zn=v(sn),pr=b(Yt,2);{var Vr=Nn=>{var hn=Zy(),wn=v(hn);{var nr=bn=>{var kn=Wy();Lt(kn,5,()=>(s(he),p(()=>s(he).tools)),Jn,(Gr,On)=>{var la=Hy(),ca=v(la),cs=v(ca),Yo=v(cs),Pa=b(ca,2),da=v(Pa),Jo=b(da,2),ds=v(Jo);B(()=>{ie(la,"data-disabled",(s(On),p(()=>!s(On).enabled))),W(Yo,(s(On),p(()=>s(On).name))),Kn(da,(s(On),p(()=>s(On).enabled))),da.disabled=(s(he),n(),p(()=>!s(he).enabled||n().pending[s(he).id]||n().saving)),W(ds,(s(On),p(()=>s(On).enabled?"Enabled":"Disabled")))}),N("change",da,to=>K(s(he).id,s(On).name,to.target.checked)),y(Gr,la)}),y(bn,kn)},wr=bn=>{var kn=Vy();y(bn,kn)};I(wn,bn=>{s(he),p(()=>s(he).tools.length)?bn(nr):bn(wr,!1)})}var Or=b(wn,2);{var vr=bn=>{var kn=Gy(),Gr=v(kn);B(On=>W(Gr,`Disabled tool ids: ${On??""}`),[()=>(s(he),p(()=>s(he).disabled_tools.join(", ")))]),y(bn,kn)};I(Or,bn=>{s(he),p(()=>s(he).disabled_tools.length)&&bn(vr)})}B(()=>ie(hn,"id",`tools-${s(he),p(()=>s(he).id)??""}`)),y(Nn,hn)};I(pr,Nn=>{s(A),s(he),p(()=>s(A).has(s(he).id))&&Nn(Vr)})}B((Nn,hn,wn)=>{ie(vt,"data-connected",(s(he),p(()=>s(he).connected))),ie(vt,"data-pending",(n(),s(he),p(()=>n().pending[s(he).id]?"true":"false"))),ie(vt,"data-dirty",(n(),s(he),p(()=>n().pendingChanges[s(he).id]?"true":"false"))),W(_t,(s(he),p(()=>s(he).id))),Bt=At(rt,1,"",null,Bt,Nn),W(gn,(s(he),p(()=>s(he).connected?"Connected":"Offline"))),ie(bt,"title",(s(he),p(()=>s(he).url))),W(un,(s(he),p(()=>s(he).url))),Kn(it,(s(he),p(()=>s(he).enabled))),it.disabled=(n(),s(he),p(()=>n().pending[s(he).id]||n().saving)),W(Pt,(s(he),p(()=>s(he).enabled?"Enabled":"Disabled"))),qt.disabled=(n(),s(he),p(()=>n().pending[s(he).id]||n().saving)),Vt=At(Yt,1,"tools-toggle",null,Vt,hn),ie(Yt,"aria-expanded",wn),ie(Yt,"aria-controls",`tools-${s(he),p(()=>s(he).id)??""}`),W(Zn,`${s(he),p(()=>s(he).tool_count)??""} tool${s(he),p(()=>s(he).tool_count===1?"":"s")??""} available`)},[()=>({connected:s(he).connected,offline:!s(he).connected}),()=>({open:s(A).has(s(he).id)}),()=>(s(A),s(he),p(()=>s(A).has(s(he).id)))]),N("change",it,Nn=>P(s(he).id,Nn.target.checked)),N("click",qt,()=>void ce(s(he).id)),N("click",Yt,()=>ve(s(he).id)),y(tt,vt)}),y(Pe,Xe)};I(Ce,Pe=>{n(),p(()=>!n().servers.length)?Pe(Te):Pe(We,!1)})}var Ye=b(Ce,2);{var Je=Pe=>{var Xe=Jy(),tt=v(Xe);B(()=>W(tt,(n(),p(()=>n().saveError)))),y(Pe,Xe)};I(Ye,Pe=>{n(),p(()=>n().saveError)&&Pe(Je)})}var Be=b(Ye,2);{var Ve=Pe=>{var Xe=Xy();y(Pe,Xe)};I(Be,Pe=>{n(),p(()=>n().dirty)&&Pe(Ve)})}B(Pe=>{Ee.disabled=(s(x),n(),p(()=>s(x)||n().saving)),Fe.disabled=Pe,W(me,s(x)?"Connecting...":"Connect")},[()=>(s(x),s(S),n(),p(()=>s(x)||!s(S).trim()||n().saving))]),sr(Ee,()=>s(S),Pe=>_(S,Pe)),N("keydown",Ee,Pe=>{Pe.key==="Enter"&&G()}),N("click",Fe,()=>void G()),y(D,U)};I(Et,D=>{n(),p(()=>n().error)?D(Q):D(Z,!1)},!0)}y(ne,Oe)};I(Ln,ne=>{n(),p(()=>n().loading)?ne(_e):ne(Ne,!1)})}B(()=>{je.disabled=(r(),p(()=>r().loading||r().authorizing)),W(Me,(r(),p(()=>r().authorizing?"Authorizing...":r().authorized?"Reconnect":"Connect"))),Ie.disabled=(a(),p(()=>a().loading||a().authorizing)),W(Le,(a(),p(()=>a().authorizing?"Authorizing...":a().authorized?"Reconnect":"Connect"))),on.disabled=(n(),p(()=>n().refreshing||n().saving||n().dirty)),W(Mn,(n(),p(()=>n().refreshing?"Refreshing...":"Refresh")))}),N("click",je,()=>void oe()),N("click",Ie,()=>void Y()),N("click",on,O),y(ue,ee)},$$slots:{default:!0,heading:(ue,we)=>{var ee=t6();y(ue,ee)},footer:(ue,we)=>{var ee=o6(),Ue=v(ee);{var qe=je=>{var Me=n6();y(je,Me)},ot=je=>{var Me=Ae(),at=de(Me);{var be=$e=>{var Ge=r6();y($e,Ge)},Re=$e=>{var Ge=Ae(),ut=de(Ge);{var $t=j=>{var pe=a6();y(j,pe)},fe=j=>{var pe=s6();y(j,pe)};I(ut,j=>{n(),p(()=>n().dirty)?j($t):j(fe,!1)},!0)}y($e,Ge)};I(at,$e=>{n(),p(()=>n().saving)?$e(be):$e(Re,!1)},!0)}y(je,Me)};I(Ue,je=>{n(),p(()=>n().saveError)?je(qe):je(ot,!1)})}y(ue,ee)}}})}};I(te,J=>{l()&&J(X)})}y(e,Se),Ot(),i()}var i6=M('<button type="button"><span class="chip-label svelte-v6y1b4"><span class="chip-category svelte-v6y1b4"> </span> <span class="chip-separator" aria-hidden="true">Â·</span> <span class="chip-value svelte-v6y1b4"> </span></span> <span class="chip-remove svelte-v6y1b4" aria-hidden="true">Ã</span></button>'),l6=M('<section class="active-filters svelte-v6y1b4" aria-label="Active filters"><h3 class="title svelte-v6y1b4">Active filters</h3> <div class="chip-list svelte-v6y1b4"></div></section>');function li(e,t){Nt(t,!1);let n=le(t,"chips",24,()=>[]);const r=pn();function a(l){r("clear",l)}Ut();var o=Ae(),u=de(o);{var i=l=>{var c=l6(),f=b(v(c),2);Lt(f,5,n,d=>d.id,(d,m)=>{var h=i6();let g;var T=v(h),A=v(T),w=v(A),E=b(A,4),C=v(E);B(k=>{g=At(h,1,"chip svelte-v6y1b4",null,g,k),ie(h,"aria-label",(s(m),p(()=>`Remove ${s(m).state==="exclude"?"excluded":"included"} filter ${s(m).categoryLabel} ${s(m).valueLabel}`))),W(w,(s(m),p(()=>s(m).categoryLabel))),W(C,`${s(m),p(()=>s(m).state==="exclude"?"Not ":"")??""}${s(m),p(()=>s(m).valueLabel)??""}`)},[()=>({include:s(m).state==="include",exclude:s(m).state==="exclude"})]),N("click",h,()=>a(s(m))),y(d,h)}),y(l,c)};I(u,l=>{z(n()),p(()=>n().length>0)&&l(i)})}y(e,o),Ot()}var c6=M('<section><header class="svelte-10u46cr"><button type="button"><span class="title svelte-10u46cr"> </span> <span class="chevron svelte-10u46cr" aria-hidden="true"></span></button></header> <div class="content svelte-10u46cr"><!></div></section>');function ci(e,t){Nt(t,!1);let n=le(t,"title",8),r=le(t,"startOpen",8,!1),a=le(t,"forceOpen",8,!1),o=$(r()),u=$(!1);const i=c(n());function l(){a()||_(o,!s(o))}function c(E){const C=E.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"section",k=Math.abs(Array.from(E).reduce((S,x)=>S*31+x.charCodeAt(0),7)).toString(36);return`filter-section-${C}-${k}`}xe(()=>(z(a()),s(o),s(u),z(r())),()=>{a()?(s(o)||_(o,!0),_(u,!0)):s(u)&&(_(o,r()),_(u,!1))}),fn(),Ut();var f=c6(),d=v(f),m=v(d);let h;var g=v(m),T=v(g),A=b(d,2),w=v(A);$n(w,t,"default",{}),B(E=>{At(f,1,`filter-section ${s(o)?"expanded":"collapsed"}`,"svelte-10u46cr"),h=At(m,1,"toggle svelte-10u46cr",null,h,E),ie(m,"aria-expanded",s(o)),ie(m,"aria-controls",i),ie(m,"aria-disabled",a()),W(T,n()),ie(A,"id",i),ie(A,"hidden",!s(o))},[()=>({locked:a()})]),N("click",m,l),y(e,f),Ot()}var d6=M('<div class="range-slider svelte-1q5g18c"><div class="track svelte-1q5g18c"></div> <div class="range svelte-1q5g18c" aria-hidden="true"></div> <input class="thumb thumb-min svelte-1q5g18c" type="range"/> <input class="thumb thumb-max svelte-1q5g18c" type="range"/></div>');function f6(e,t){Nt(t,!1);const n=$(),r=$(),a=$(),o=$(),u=$(),i=$(),l=pn();let c=le(t,"id",8),f=le(t,"min",8,0),d=le(t,"max",8,100),m=le(t,"step",8,1),h=le(t,"value",24,()=>({min:f(),max:d()})),g=le(t,"disabled",8,!1),T=le(t,"ariaLabelMin",8,"Minimum value"),A=le(t,"ariaLabelMax",8,"Maximum value");const w=6;function E(L,K,G){return!Number.isFinite(L)||L<K?K:L>G?G:Number(L.toFixed(w))}function C(L,K,G){const ce=G-K;return!Number.isFinite(ce)||ce<=0?0:(L-K)/ce*100}function k(L,K){const G={min:L,max:K};l("input",G),l("change",G)}function S(L){const K=L.target,G=E(Number(K.value),s(n),s(o));if(G>s(o)){k(s(o),s(o));return}k(G,s(o))}function x(L){const K=L.target,G=E(Number(K.value),s(a),s(r));if(G<s(a)){k(s(a),s(a));return}k(s(a),G)}xe(()=>z(f()),()=>{_(n,Number.isFinite(f())?f():0)}),xe(()=>(z(d()),s(n)),()=>{_(r,Number.isFinite(d())?d():s(n))}),xe(()=>(z(h()),s(n),s(r)),()=>{_(a,E(h()?.min??s(n),s(n),s(r)))}),xe(()=>(z(h()),s(r),s(n)),()=>{_(o,E(h()?.max??s(r),s(n),s(r)))}),xe(()=>(s(a),s(o)),()=>{s(a)>s(o)&&_(a,s(o))}),xe(()=>(s(a),s(n),s(r)),()=>{_(u,C(s(a),s(n),s(r)))}),xe(()=>(s(o),s(n),s(r)),()=>{_(i,C(s(o),s(n),s(r)))}),fn(),Ut();var F=d6(),q=b(v(F),2),H=b(q,2),P=b(H,2);B(()=>{ie(F,"data-disabled",g()),An(q,`left: ${s(u)}%; right: ${100-s(i)}%;`),ie(H,"id",c()?`${c()}-min`:void 0),ie(H,"min",s(n)),ie(H,"max",s(o)),ie(H,"step",m()),It(H,s(a)),ie(H,"aria-label",T()),H.disabled=g(),ie(P,"id",c()?`${c()}-max`:void 0),ie(P,"min",s(a)),ie(P,"max",s(r)),ie(P,"step",m()),It(P,s(o)),ie(P,"aria-label",A()),P.disabled=g()}),N("input",H,S),N("input",P,x),y(e,F),Ot()}var p6=M('<p class="empty svelte-2m3fny"> </p>'),v6=M('<button type="button"><span class="label svelte-2m3fny"> </span> <span class="indicator svelte-2m3fny" aria-hidden="true"></span></button>'),h6=M('<div class="options svelte-2m3fny"><!></div>');function qa(e,t){Nt(t,!1);let n=le(t,"title",8),r=le(t,"options",24,()=>[]),a=le(t,"selected",24,()=>[]),o=le(t,"excluded",24,()=>[]),u=le(t,"emptyMessage",8,"No options available."),i=le(t,"variant",8,"default");const l=pn();let c=$([]);function f(g){l("toggle",g)}function d(g){return g.trim().toLowerCase()}function m(g,T){if(g.length===0)return!1;const A=d(T);return A?g.some(w=>d(w)===A):!1}function h(g){return m(a(),g)?"include":m(o(),g)?"exclude":"neutral"}xe(()=>z(r()),()=>{_(c,r().map(g=>{const T=h(g);return{value:g,state:T,pressed:T==="include"?"true":T==="exclude"?"mixed":"false"}}))}),fn(),Ut();{let g=Gt(()=>(z(a()),z(o()),p(()=>a().length+o().length>0)));ci(e,{get title(){return n()},get forceOpen(){return s(g)},children:(T,A)=>{var w=h6(),E=v(w);{var C=S=>{var x=p6(),F=v(x);B(()=>W(F,u())),y(S,x)},k=S=>{var x=Ae(),F=de(x);Lt(F,1,()=>s(c),({value:q,state:H,pressed:P})=>q,(q,H)=>{let P=()=>s(H).value,L=()=>s(H).state,K=()=>s(H).pressed;var G=v6();let ce;var O=v(G),ae=v(O);B(oe=>{ce=At(G,1,"pill svelte-2m3fny",null,ce,oe),ie(G,"aria-pressed",K()),ie(G,"data-state",L()),W(ae,P())},[()=>({active:L()==="include",exclude:L()==="exclude"})]),N("click",G,()=>f(P())),y(q,G)}),y(S,x)};I(E,S=>{z(r()),p(()=>r().length===0)?S(C):S(k,!1)})}B(()=>ie(w,"data-variant",i())),y(T,w)},$$slots:{default:!0}})}Ot()}const zi=1e-9,eo=[4e3,16e3,32e3,64e3,128e3,256e3,1e6],js=eo.length,Ls=0;function m6(e){return!Number.isFinite(e)||e<=0?"Any":e>=1e6?"1M":e>=1e3?`${Math.round(e/1e3)}K`:`${e}`}const oc=["Any",...eo.map(e=>m6(e))],Fa=[0,.1,.2,.5,1,5,10],ya=Fa.length,Ka=ya,uc="$10+";function As(e){if(e<=0)return"FREE";const t=Math.abs(e),n=t>=10||t>=1?0:t>=.1?1:t>=.01?2:3;return`$${e.toFixed(n).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")}`}const Uu=Fa.map(e=>As(e));function Ss(e,t,n){return!Number.isFinite(e)||e<t?t:e>n?n:Math.round(e)}function of(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<ya;r+=1){const a=Math.abs(Fa[r]-e);a<n&&(n=a,t=r)}return t}function g6(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<js;r+=1){const a=Math.abs(eo[r]-e);a<n&&(n=a,t=r)}return t+1}function _6(e){if(e===null||e<=0)return 0;const t=Fa.findIndex(n=>Math.abs(n-e)<=zi);return t>=0?t:of(e)}function b6(e){if(e===null)return Ka;const t=Fa.findIndex(n=>Math.abs(n-e)<=zi);return t>=0?t:of(e)}function y6(e){if(e===null||e<=0)return Ls;for(let t=0;t<js;t+=1)if(Math.abs(eo[t]-e)<=zi)return t+1;return g6(e)}function x6(e){if(e<=Ls)return null;const t=Math.min(Math.max(e-1,0),js-1);return eo[t]}function w6(e){if(e<=0)return null;const t=Math.min(e,ya-1);return Fa[t]}function k6(e){if(e>=Ka)return null;const t=Math.min(Math.max(e,0),ya-1);return Fa[t]}function S6(e){if(!e)return 0;let t=0;e.search.trim()&&(t+=1);const n=r=>{t+=r.include.length+r.exclude.length};return n(e.inputModalities),n(e.outputModalities),n(e.series),n(e.providers),n(e.supportedParameters),n(e.moderation),e.minContext!==null&&(t+=1),e.minPromptPrice!==null&&(t+=1),e.maxPromptPrice!==null&&(t+=1),t}var E6=M('<p class="hint svelte-1247vns">No context metadata available.</p>'),C6=M('<p class="hint svelte-1247vns"> </p>'),A6=M('<span class="svelte-1247vns"> </span>'),T6=M('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Minimum tokens</span> <span class="slider-value svelte-1247vns"> </span></div> <input class="slider svelte-1247vns" type="range" aria-label="Minimum context tokens"/> <div class="slider-scale context-scale svelte-1247vns"></div></div>'),D6=M('<p class="hint svelte-1247vns">No pricing metadata available.</p>'),M6=M('<p class="hint svelte-1247vns"> </p>'),F6=M('<span class="svelte-1247vns"> </span>'),P6=M('<div class="slider-scale price-scale svelte-1247vns"></div>'),I6=M('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Prompt price (per 1M tokens)</span> <span class="slider-value svelte-1247vns"> </span></div> <!> <!></div>'),L6=M('<aside class="filters-panel svelte-1247vns" aria-label="Filter models"><header class="filters-header svelte-1247vns"><div><h3 class="svelte-1247vns">Filters</h3> <p> </p></div> <button type="button" class="btn btn-ghost btn-small">Clear all</button></header> <div class="filters-content svelte-1247vns"><!> <!> <!> <!> <!> <!> <!> <!></div></aside>');function ic(e,t){Nt(t,!1);const n=()=>Dt(i,"$facets",o),r=()=>Dt(l,"$filters",o),a=()=>Dt(C,"$activeFilters",o),[o,u]=yr(),{facets:i,filters:l,toggleInputModality:c,toggleOutputModality:f,toggleSeries:d,toggleProvider:m,toggleSupportedParameter:h,toggleModeration:g,setMinContext:T,setMinPromptPrice:A,setMaxPromptPrice:w,resetFilters:E,activeFilters:C}=gr,k="context-length-slider",S="prompt-price-slider";let x=$(),F=$(null),q=$(),H=$(0),P=$(""),L=$(null),K=$(!1),G=$(0),ce=$([]),O=$(!1),ae=$({min:0,max:0}),oe=$(""),se=$([]);function Y(be){if(s(K)){T(null);return}const Re=Ss(be,Ls,js);T(x6(Re))}function R(be){if(s(O)){A(null),w(null);return}const Re=be.detail,$e=Ss(Re.min,0,ya-1),Ge=Ss(Re.max,0,Ka);A(w6($e)),w(k6(Ge))}xe(()=>n(),()=>{_(F,n())}),xe(()=>r(),()=>{_(x,r())}),xe(()=>a(),()=>{_(q,a())}),xe(()=>s(x),()=>{_(H,S6(s(x)))}),xe(()=>s(H),()=>{_(P,s(H)>0?`${s(H)} active filter${s(H)===1?"":"s"}`:"All models shown.")}),xe(()=>(s(F),s(K),s(x),oc),()=>{const be=s(F)?.maxContext??null;_(L,be),_(K,be===null),_(G,s(K)?Ls:y6(s(x)?.minContext??null)),_(ce,s(K)?[]:oc)}),xe(()=>s(F),()=>{const be=s(F)?.maxPromptPrice??null;_(O,be===null)}),xe(()=>(s(O),s(x),ya),()=>{_(ae,(()=>{if(s(O))return{min:0,max:Ka};const be=_6(s(x)?.minPromptPrice??null),Re=b6(s(x)?.maxPromptPrice??null),$e=Ss(be,0,ya-1),Ge=Ss(Re,0,Ka);return $e>Ge?{min:Ge,max:Ge}:{min:$e,max:Ge}})())}),xe(()=>(s(x),uc),()=>{_(oe,(()=>{const be=s(x)?.minPromptPrice,Re=s(x)?.maxPromptPrice,$e=be===null?Uu[0]:As(be),Ge=Re===null?uc:As(Re);return`${$e} â ${Ge}`})())}),xe(()=>(s(O),Uu),()=>{_(se,s(O)?[]:Uu)}),fn(),Ut();var V=L6(),ve=v(V),Se=v(ve),te=b(v(Se),2);let X;var J=v(te),ye=b(Se,2),ue=b(ve,2),we=v(ue);{let be=Gt(()=>(s(F),p(()=>s(F)?.inputModalities??[]))),Re=Gt(()=>(s(x),p(()=>s(x)?.inputModalities?.include??[]))),$e=Gt(()=>(s(x),p(()=>s(x)?.inputModalities?.exclude??[])));qa(we,{title:"Input modalities",get options(){return s(be)},get selected(){return s(Re)},get excluded(){return s($e)},emptyMessage:"No modality data available.",$$events:{toggle:Ge=>c(Ge.detail)}})}var ee=b(we,2);{let be=Gt(()=>(s(F),p(()=>s(F)?.outputModalities??[]))),Re=Gt(()=>(s(x),p(()=>s(x)?.outputModalities?.include??[]))),$e=Gt(()=>(s(x),p(()=>s(x)?.outputModalities?.exclude??[])));qa(ee,{title:"Output modalities",get options(){return s(be)},get selected(){return s(Re)},get excluded(){return s($e)},emptyMessage:"No modality data available.",$$events:{toggle:Ge=>f(Ge.detail)}})}var Ue=b(ee,2);{let be=Gt(()=>(s(x),p(()=>s(x)?.minContext!==null)));ci(Ue,{title:"Context length",get forceOpen(){return s(be)},children:(Re,$e)=>{var Ge=Ae(),ut=de(Ge);{var $t=j=>{var pe=Ae(),ge=de(pe);{var ke=Le=>{var Ze=E6();y(Le,Ze)},Ie=Le=>{var Ze=C6(),Ke=v(Ze);B(Qe=>W(Ke,`All models offer ${Qe??""} context.`),[()=>(z(ao),s(L),p(()=>ao(s(L))))]),y(Le,Ze)};I(ge,Le=>{s(F),p(()=>s(F)?.maxContext===null||s(F)?.maxContext===void 0)?Le(ke):Le(Ie,!1)})}y(j,pe)},fe=j=>{var pe=T6(),ge=v(pe),ke=b(v(ge),2),Ie=v(ke),Le=b(ge,2);ie(Le,"id",k),ie(Le,"step",1);var Ze=b(Le,2);Lt(Ze,7,()=>s(ce),(Ke,Qe)=>Ke+Qe,(Ke,Qe)=>{var ft=A6(),et=v(ft);B(()=>W(et,s(Qe))),y(Ke,ft)}),B(Ke=>{W(Ie,Ke),ie(Le,"min",Ls),ie(Le,"max",js),It(Le,s(G))},[()=>(s(x),z(ao),p(()=>s(x)?.minContext===null?"Any":ao(s(x)?.minContext??0)))]),N("input",Le,Ke=>Y(Number(Ke.target.value))),y(j,pe)};I(ut,j=>{s(K)?j($t):j(fe,!1)})}y(Re,Ge)},$$slots:{default:!0}})}var qe=b(Ue,2);{let be=Gt(()=>(s(x),p(()=>s(x)?.minPromptPrice!==null||s(x)?.maxPromptPrice!==null)));ci(qe,{title:"Prompt pricing",get forceOpen(){return s(be)},children:(Re,$e)=>{var Ge=Ae(),ut=de(Ge);{var $t=j=>{var pe=Ae(),ge=de(pe);{var ke=Le=>{var Ze=D6();y(Le,Ze)},Ie=Le=>{var Ze=M6(),Ke=v(Ze);B(Qe=>W(Ke,`All models share ${Qe??""} pricing.`),[()=>(z(As),s(F),p(()=>As(s(F)?.maxPromptPrice??0)))]),y(Le,Ze)};I(ge,Le=>{s(F),p(()=>s(F)?.maxPromptPrice===null||s(F)?.maxPromptPrice===void 0)?Le(ke):Le(Ie,!1)})}y(j,pe)},fe=j=>{var pe=I6(),ge=v(pe),ke=b(v(ge),2),Ie=v(ke),Le=b(ge,2);f6(Le,{id:S,min:0,get max(){return Ka},step:1,get value(){return s(ae)},ariaLabelMin:"Minimum prompt price",ariaLabelMax:"Maximum prompt price",get disabled(){return s(O)},$$events:{input:R,change:R}});var Ze=b(Le,2);{var Ke=Qe=>{var ft=P6();Lt(ft,7,()=>s(se),(et,Mt)=>et+Mt,(et,Mt)=>{var gt=F6(),Rt=v(gt);B(()=>W(Rt,s(Mt))),y(et,gt)}),y(Qe,ft)};I(Ze,Qe=>{s(se),p(()=>s(se).length>0)&&Qe(Ke)})}B(()=>W(Ie,s(oe))),y(j,pe)};I(ut,j=>{s(O)?j($t):j(fe,!1)})}y(Re,Ge)},$$slots:{default:!0}})}var ot=b(qe,2);{let be=Gt(()=>(s(F),p(()=>s(F)?.series??[]))),Re=Gt(()=>(s(x),p(()=>s(x)?.series?.include??[]))),$e=Gt(()=>(s(x),p(()=>s(x)?.series?.exclude??[])));qa(ot,{title:"Series",get options(){return s(be)},get selected(){return s(Re)},get excluded(){return s($e)},emptyMessage:"Series information unavailable.",$$events:{toggle:Ge=>d(Ge.detail)}})}var je=b(ot,2);{let be=Gt(()=>(s(F),p(()=>s(F)?.supportedParameters??[]))),Re=Gt(()=>(s(x),p(()=>s(x)?.supportedParameters?.include??[]))),$e=Gt(()=>(s(x),p(()=>s(x)?.supportedParameters?.exclude??[])));qa(je,{title:"Supported parameters",get options(){return s(be)},get selected(){return s(Re)},get excluded(){return s($e)},variant:"columns",emptyMessage:"No parameter metadata available.",$$events:{toggle:Ge=>h(Ge.detail)}})}var Me=b(je,2);{let be=Gt(()=>(s(F),p(()=>s(F)?.providers??[]))),Re=Gt(()=>(s(x),p(()=>s(x)?.providers?.include??[]))),$e=Gt(()=>(s(x),p(()=>s(x)?.providers?.exclude??[])));qa(Me,{title:"Providers",get options(){return s(be)},get selected(){return s(Re)},get excluded(){return s($e)},emptyMessage:"No provider data available.",$$events:{toggle:Ge=>m(Ge.detail)}})}var at=b(Me,2);{let be=Gt(()=>(s(F),p(()=>s(F)?.moderation??[]))),Re=Gt(()=>(s(x),p(()=>s(x)?.moderation?.include??[]))),$e=Gt(()=>(s(x),p(()=>s(x)?.moderation?.exclude??[])));qa(at,{title:"Moderation",get options(){return s(be)},get selected(){return s(Re)},get excluded(){return s($e)},variant:"compact",emptyMessage:"No moderation metadata available.",$$events:{toggle:Ge=>g(Ge.detail)}})}B(be=>{X=At(te,1,"filters-status svelte-1247vns",null,X,be),W(J,s(P)),ye.disabled=!s(q)},[()=>({muted:s(H)===0})]),N("click",ye,E),y(e,V),Ot(),u()}const N6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M400-240%20160-480l240-240%2056%2058-142%20142h486v80H314l142%20142-56%2058Z'/%3e%3c/svg%3e";var O6=M("<option> </option>"),$6=M('<div class="sort svelte-3bn1bu"><label for="sort-select" class="sort-label svelte-3bn1bu">Sort by</label> <select id="sort-select" class="select-control sort-select svelte-3bn1bu"></select></div>');function R6(e,t){Nt(t,!1);let n=le(t,"selected",8),r=le(t,"onSelect",8);const a=[{label:"Newest",value:"newness"},{label:"Lowest price",value:"price"},{label:"Longest context",value:"context"}];function o(c){const f=c.target;r()(f.value)}Ut();var u=$6(),i=b(v(u),2);Lt(i,5,()=>a,Jn,(c,f)=>{var d=O6(),m=v(d),h={};B(()=>{W(m,(s(f),p(()=>s(f).label))),h!==(h=(s(f),p(()=>s(f).value)))&&(d.value=(d.__value=(s(f),p(()=>s(f).value)))??"")}),y(c,d)});var l;In(i),B(()=>{l!==(l=n())&&(i.value=(i.__value=n())??"",xn(i,n()))}),N("change",i,o),y(e,u),Ot()}var z6=M('<header class="explorer-header svelte-d2gcy1"><div class="title-group svelte-d2gcy1"><button type="button" class="back-btn svelte-d2gcy1" aria-label="Go back"><img alt="" aria-hidden="true" class="icon svelte-d2gcy1"/></button> <h2 id="model-explorer-title" class="svelte-d2gcy1">Model Explorer</h2></div> <div class="header-controls svelte-d2gcy1"><label class="search svelte-d2gcy1"><span class="visually-hidden svelte-d2gcy1">Search models</span> <input class="input-control svelte-d2gcy1" type="search" placeholder="Search by name, provider, description, or tags"/></label> <div class="meta-row svelte-d2gcy1"><p class="summary svelte-d2gcy1" aria-live="polite"> </p> <!></div></div></header>');function B6(e,t){Nt(t,!1);let n=le(t,"resultCount",8,0),r=le(t,"searchValue",8,""),a=le(t,"onSearch",8),o=le(t,"sort",8),u=le(t,"onSort",8),i=le(t,"onClose",8);function l(k){const S=k.target;S&&a()(S.value)}Ut();var c=z6(),f=v(c),d=v(f),m=v(d),h=b(f,2),g=v(h),T=b(v(g),2),A=b(g,2),w=v(A),E=v(w),C=b(w,2);R6(C,{get selected(){return o()},get onSelect(){return u()}}),B(()=>{ie(m,"src",N6),It(T,r()),W(E,`${n()??""} result${n()===1?"":"s"}`)}),N("click",d,function(...k){i()?.apply(this,k)}),N("input",T,l),y(e,c),Ot()}var U6=M('<div class="info-item svelte-b7ahyp"><dt class="svelte-b7ahyp"> </dt> <dd class="svelte-b7ahyp"> </dd></div>'),j6=M('<article class="model-card svelte-b7ahyp" role="button" tabindex="0"><header class="svelte-b7ahyp"><h4 class="svelte-b7ahyp"> </h4></header> <section class="info-section svelte-b7ahyp"><dl class="info-grid svelte-b7ahyp"></dl></section></article>');function q6(e,t){Nt(t,!1);const n=$(),r=$(),a=$(),o=$(),u=$(),i=$(),l=$(),c=$(),f=$(),d=$(),m=$(),h=$(),g=$(),T=$(),A=$();let w=le(t,"model",8),E=le(t,"onSelect",8);const C=1e6;function k(R){return R&&R.split(/[\s_/-]+/).filter(Boolean).map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(" ")}function S(R){const V=new Set,ve=[];for(const Se of R){const te=k(Se.trim());if(!te)continue;const X=te.toLowerCase();V.has(X)||(V.add(X),ve.push(te))}return ve}function x(R){if(R===null)return"Unknown";const V=R/C,ve=V>=10?0:1;return`${V.toFixed(ve).replace(/\.0$/,"")}M tokens`}function F(R){return R.length?R.join(", "):null}function q(R,V){if(R===null)return null;const ve=Vp(R);return ve==="FREE"?"FREE":`${ve} ${V}`}const H="/ 1M tokens";function P(R,V,ve,Se){const te=q(ve,Se);return te?{key:R,label:V,value:te}:null}function L(R,V,ve){return ve?{key:R,label:V,value:ve}:null}function K(){E()(w())}function G(R){(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),E()(w()))}xe(()=>z(w()),()=>{_(n,w().name??w().id)}),xe(()=>z(w()),()=>{_(r,fd(w()))}),xe(()=>z(w()),()=>{_(a,Wp(w()))}),xe(()=>z(w()),()=>{_(o,Fs(w()))}),xe(()=>s(o),()=>{_(u,x(s(o)))}),xe(()=>z(w()),()=>{_(i,Ei(w()).map(R=>R.toLowerCase()))}),xe(()=>z(w()),()=>{_(l,Ci(w()).map(R=>R.toLowerCase()))}),xe(()=>s(r),()=>{_(c,s(r)!==null)}),xe(()=>s(a),()=>{_(f,s(a)!==null)}),xe(()=>s(i),()=>{_(d,S(s(i)))}),xe(()=>s(l),()=>{_(m,S(s(l)))}),xe(()=>z(w()),()=>{_(h,(()=>{const R=w().provider;if(R&&typeof R=="object"){if(R.display_name)return R.display_name;if(R.slug)return R.slug}const V=w().id?.split("/")??[];return V.length>1?V[V.length-2]:null})())}),xe(()=>(s(u),s(h),s(d),s(m)),()=>{_(g,[L("context","Context",s(u)),L("provider","Provider",s(h)),L("input-modalities","Input",F(s(d))),L("output-modalities","Output",F(s(m)))].filter(R=>!!R))}),xe(()=>(s(c),s(r),s(f),s(a)),()=>{_(T,[s(c)?P("input-price","Input price",s(r),H):null,s(f)?P("output-price","Output price",s(a),H):null].filter(R=>!!R))}),xe(()=>(s(g),s(T)),()=>{_(A,[...s(g),...s(T)])}),fn(),Ut();var ce=j6(),O=v(ce),ae=v(O),oe=v(ae),se=b(O,2),Y=v(se);Lt(Y,5,()=>s(A),R=>R.key,(R,V)=>{var ve=U6(),Se=v(ve),te=v(Se),X=b(Se,2),J=v(X);B(()=>{W(te,(s(V),p(()=>s(V).label))),W(J,(s(V),p(()=>s(V).value)))}),y(R,ve)}),B(()=>{ie(ce,"aria-label",`Use model ${s(n)}`),W(oe,s(n))}),N("click",ce,K),N("keydown",ce,G),y(e,ce),Ot()}var H6=M('<p class="empty svelte-6ipifh"><!></p>'),W6=M("<li><!></li>"),V6=M('<ul class="model-grid svelte-6ipifh"></ul>'),G6=M('<section class="results svelte-6ipifh" aria-live="polite"><!> <!></section>');function Z6(e,t){Nt(t,!1);let n=le(t,"models",24,()=>[]),r=le(t,"filtersActive",8,!1),a=le(t,"onSelect",8),o=le(t,"filterChips",24,()=>[]);const u=pn();function i(h){u("clearFilter",h.detail)}Ut();var l=G6(),c=v(l);li(c,{get chips(){return o()},$$events:{clear:i}});var f=b(c,2);{var d=h=>{var g=H6(),T=v(g);{var A=E=>{var C=nn("No models match your current filters.");y(E,C)},w=E=>{var C=nn("No models available.");y(E,C)};I(T,E=>{r()?E(A):E(w,!1)})}y(h,g)},m=h=>{var g=V6();Lt(g,5,n,T=>T.id,(T,A)=>{var w=W6(),E=v(w);q6(E,{get model(){return s(A)},get onSelect(){return a()}}),y(T,w)}),y(h,g)};I(f,h=>{z(n()),p(()=>n().length===0)?h(d):h(m,!1)})}y(e,l),Ot()}var K6=M('<span class="filters-toggle__count svelte-drtqmy"> </span>'),Y6=M('<div class="filters-panel-active svelte-drtqmy"><!></div>'),J6=M('<div id="model-explorer-filters" class="filters-dropdown svelte-drtqmy"><!> <!></div>'),X6=M('<div class="mobile-active-filters svelte-drtqmy"><!></div>'),Q6=M('<div class="body-toolbar svelte-drtqmy"><button type="button" aria-controls="model-explorer-filters"><span class="filters-toggle__label">Filters</span> <!> <span>â¼</span></button> <!></div> <!>',1),ex=M('<div id="model-explorer-filters" class="filters-panel-container svelte-drtqmy"><!></div>'),tx=M('<div class="modal-backdrop svelte-drtqmy" role="presentation"></div> <div class="model-explorer svelte-drtqmy" role="dialog" aria-modal="true" aria-labelledby="model-explorer-title"><!> <div class="body svelte-drtqmy"><!> <!></div></div>',1);function nx(e,t){Nt(t,!1);const n=()=>Dt(m,"$filtered",o),r=()=>Dt(A,"$activeFilters",o),a=()=>Dt(h,"$filters",o),[o,u]=yr(),i=$(),l=$(),c=$();let f=le(t,"open",12,!1);const d=pn(),{filtered:m,filters:h,setSearch:g,setSort:T,activeFilters:A,setSelectionState:w}=gr,E={inputModalities:{label:"Input"},outputModalities:{label:"Output"},series:{label:"Series"},providers:{label:"Provider"},supportedParameters:{label:"Parameter"},moderation:{label:"Moderation"}},C=["inputModalities","outputModalities","series","providers","supportedParameters","moderation"],k="(max-width: 1024px)";let S=$(!1),x=$(!0),F=!1,q=$([]);const H="modal-open";let P=()=>{typeof document<"u"&&document.body.classList.remove(H)};ts(()=>P());function L(){f(!1),d("close")}function K(te){d("select",{id:te.id}),L()}function G(te){T(te)}function ce(te){g(te)}function O(te){const X=[];for(const J of C){const ye=te[J];if(!ye)continue;const we=E[J]?.label??J;for(const ee of ye.include)X.push(ae(J,we,ee,"include"));for(const ee of ye.exclude)X.push(ae(J,we,ee,"exclude"))}return X}function ae(te,X,J,ye){const ue=J.trim();return{id:`${te}:${ye}:${ue}`,category:te,categoryLabel:X,value:ue,valueLabel:oe(ue),state:ye}}function oe(te){return te.replace(/[_-]/g," ")||te}function se(te){_(S,te),te?F||_(x,!1):(_(x,!0),F=!1)}function Y(){_(x,!s(x)),F=!0}function R(te){const X=te.detail;w(X.category,X.value,"neutral")}Zs(()=>{if(typeof window>"u")return;const te=window.matchMedia(k);se(te.matches);const X=J=>{se(J.matches)};return typeof te.addEventListener=="function"?(te.addEventListener("change",X),()=>te.removeEventListener("change",X)):(te.addListener(X),()=>te.removeListener(X))}),xe(()=>z(f()),()=>{typeof document<"u"&&(f()?document.body.classList.add(H):document.body.classList.remove(H))}),xe(()=>n(),()=>{_(i,n())}),xe(()=>r(),()=>{_(l,r())}),xe(()=>a(),()=>{_(c,a())}),xe(()=>s(c),()=>{_(q,s(c)?O(s(c)):[])}),fn(),Ut();var V=Ae(),ve=de(V);{var Se=te=>{var X=tx(),J=de(X),ye=b(J,2),ue=v(ye);B6(ue,{get resultCount(){return s(i),p(()=>s(i).length)},get searchValue(){return a(),p(()=>a().search)},onSearch:ce,get sort(){return a(),p(()=>a().sort)},onSort:G,onClose:L});var we=b(ue,2),ee=v(we);{var Ue=je=>{var Me=Q6(),at=de(Me),be=v(at);let Re;var $e=b(v(be),2);{var Ge=ke=>{var Ie=K6(),Le=v(Ie);B(()=>W(Le,(s(q),p(()=>s(q).length)))),y(ke,Ie)};I($e,ke=>{s(l)&&ke(Ge)})}var ut=b($e,2);let $t;var fe=b(be,2);{var j=ke=>{var Ie=J6(),Le=v(Ie);{var Ze=Qe=>{var ft=Y6(),et=v(ft);li(et,{get chips(){return s(q)},$$events:{clear:R}}),y(Qe,ft)};I(Le,Qe=>{s(q),p(()=>s(q).length>0)&&Qe(Ze)})}var Ke=b(Le,2);ic(Ke,{}),y(ke,Ie)};I(fe,ke=>{s(x)&&ke(j)})}var pe=b(at,2);{var ge=ke=>{var Ie=X6(),Le=v(Ie);li(Le,{get chips(){return s(q)},$$events:{clear:R}}),y(ke,Ie)};I(pe,ke=>{s(q),s(x),p(()=>s(q).length>0&&!s(x))&&ke(ge)})}B((ke,Ie)=>{Re=At(be,1,"filters-toggle svelte-drtqmy",null,Re,ke),ie(be,"aria-expanded",s(x)),$t=At(ut,1,"filters-toggle__chevron svelte-drtqmy",null,$t,Ie)},[()=>({open:s(x)}),()=>({open:s(x)})]),N("click",be,Y),y(je,Me)},qe=je=>{var Me=ex(),at=v(Me);ic(at,{}),y(je,Me)};I(ee,je=>{s(S)?je(Ue):je(qe,!1)})}var ot=b(ee,2);{let je=Gt(()=>s(S)?[]:s(q));Z6(ot,{get models(){return s(i)},get filtersActive(){return s(l)},get filterChips(){return s(je)},onSelect:K,$$events:{clearFilter:R}})}B(()=>{ie(ye,"data-compact",s(S)),ie(we,"data-compact",s(S))}),N("click",J,L),y(te,X)};I(ve,te=>{f()&&te(Se)})}y(e,V),Ot(),u()}var rx=M('<div class="chat-error svelte-1n46o8q" role="alert"><span class="svelte-1n46o8q"> </span> <button type="button" class="svelte-1n46o8q">Dismiss</button></div>'),ax=M('<div class="install-banner svelte-1n46o8q" role="alertdialog" aria-labelledby="install-title"><div class="install-content svelte-1n46o8q"><span id="install-title" class="svelte-1n46o8q">Install this app for a better experience</span> <div class="install-actions svelte-1n46o8q"><button class="install-btn install-btn-primary svelte-1n46o8q" type="button">Install</button> <button class="install-btn install-btn-dismiss svelte-1n46o8q" type="button">Not now</button></div></div></div>'),sx=M('<main class="chat-app svelte-1n46o8q"><!> <section class="chat-main svelte-1n46o8q"><!> <!></section> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></main>');function ox(e,t){Nt(t,!1);const n=()=>Dt(q,"$selectable",c),r=()=>Dt(va,"$chatStore",c),a=()=>Dt(H,"$activeFor",c),o=()=>Dt(bd,"$speechState",c),u=()=>Dt(x,"$modelsLoading",c),i=()=>Dt(F,"$modelsError",c),l=()=>Dt(Jr,"$suggestionsStore",c),[c,f]=yr(),{sendMessage:d,cancelStream:m,clearConversation:h,deleteMessage:g,retryMessage:T,editMessage:A,clearError:w,setModel:E,toggleSaved:C,loadSession:k}=va,{loadModels:S,loading:x,error:F,selectable:q,activeFor:H}=gr;let P=$(""),L=$([]),K=$(),G=$(!1),ce=$(!1),O=$(!1),ae=$(!1),oe=$(!1),se=$(!1),Y=$(!1),R=$(0),V=$(!1),ve=$(!1),Se=$(null),te=$(null),X=$(null),J=$([]),ye=$(null);const ue=sd;let we=$(null),ee=$(""),Ue=$(""),qe=$(!1),ot=null,je=$(!1),Me=$(!1),at=$(!1),be=$(!1),Re=$([]);async function $e(){try{_(Re,await ad())}catch(_e){console.error("Failed to load conversation list",_e)}}Zs(async()=>{if(typeof window<"u"){_(Me,window.matchMedia("(pointer: coarse)").matches&&window.innerWidth<=768||window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: minimal-ui)").matches||"standalone"in navigator&&navigator.standalone===!0);const ne=Oe=>{Oe.preventDefault(),ot=Oe,_(je,!0)};window.addEventListener("beforeinstallprompt",ne),window.addEventListener("appinstalled",()=>{_(je,!1),ot=null}),ts(()=>{window.removeEventListener("beforeinstallprompt",ne)})}await S(),await Jr.load(),$e(),await Hn.load();const _e=await Hn.loadDefault();if(_e){const ne=await Hn.apply(_e.name);ne?.model&&E(ne.model),await Jr.load()}new URLSearchParams(window.location.search).get("mcp")==="1"&&(_(oe,!0),window.history.replaceState({},"",window.location.pathname))});async function Ge(){if(!s(K))return;const _e=s(K).getNewSuggestion();_e&&await Jr.add(_e.label,_e.text)}async function ut(_e){await Jr.remove(_e.detail.index)}ts(()=>{typeof document<"u"&&document.body.classList.remove("modal-open")});function $t(_e){E(_e)}function fe(){Fv()}function j(_e){E(_e.detail.id)}function pe(_e){_(P,_e)}function ge(_e){r().isStreaming||g(_e.detail.id)}function ke(_e){T(_e)}function Ie(_e){if(!_e?.attachment)return;Ke();const Ne={..._e.attachment,metadata:_e.attachment.metadata?{..._e.attachment.metadata}:null},ne=s(L)??[],Et=ne.some(Q=>Q.id===Ne.id||Q.displayUrl===Ne.displayUrl||Q.deliveryUrl===Ne.deliveryUrl)?ne:[...ne,Ne];_(L,Et)}function Le(_e){const Ne=r().messages.find(ne=>ne.id===_e&&ne.role==="user");Ne&&(_(qe,!1),_(we,_e),_(ee,Ne.text),_(Ue,Ne.text))}function Ze(){_(we,null),_(ee,""),_(Ue,"")}function Ke(){s(qe)||Ze()}function Qe(){Ke()}function ft(_e){if(!s(we))return;const Ne=_e.trim();if(!Ne)return;const ne=s(we);_(qe,!0),Ze(),A(ne,Ne).catch(Et=>{console.error("Failed to apply message edit",Et)}).finally(()=>{_(qe,!1)})}async function et(_e){if(_e){_(ce,!0),_(ve,!0),_(Se,null),_(te,null),_(X,_e);try{const Ne=await Q0(_e);_(te,Ne?.data??null)}catch(Ne){const ne=Ne instanceof Error?Ne.message:"Failed to load details.";_(Se,ne)}finally{_(ve,!1)}}}function Mt(){_(ce,!1),_(X,null),_(te,null),_(Se,null)}async function gt(_e){const Ne=_e.trim();if(Ne){_(P,Ne);try{await d({text:Ne,attachments:[]}),_(P,"")}catch(ne){console.error("Failed to send speech transcription",ne)}}}async function Rt(){if(!ot)return;await ot.prompt();const{outcome:_e}=await ot.userChoice;_e==="accepted"&&_(je,!1),ot=null}function vn(){_(je,!1)}xe(()=>(s(G),s(ce),s(O),s(ae),s(oe),s(se),s(Y)),()=>{typeof document<"u"&&document.body.classList.toggle("modal-open",s(G)||s(ce)||s(O)||s(ae)||s(oe)||s(se)||s(Y))}),xe(()=>(n(),r()),()=>{_(J,n()(r().selectedModel))}),xe(()=>(a(),r()),()=>{_(ye,a()(r().selectedModel))}),xe(()=>(o(),s(R)),()=>{o().promptVersion!==s(R)&&(_(R,o().promptVersion),_(P,o().promptText))}),xe(()=>(o(),r(),yl),()=>{if(o().pendingSubmit&&!r().isStreaming){const _e=yl();_e&&gt(_e.text)}}),xe(()=>(r(),s(V),o(),_l),()=>{const _e=r().isStreaming;s(V)&&!_e&&o().conversationActive&&_l(),_(V,_e)}),xe(()=>(s(we),bl),()=>{s(we)&&bl()}),fn(),Ut();var rn=sx(),an=v(rn);{let _e=Gt(()=>(r(),p(()=>r().messages.length>0)));Q1(an,{get selectableModels(){return s(J)},get selectedModel(){return r(),p(()=>r().selectedModel)},get modelsLoading(){return u()},get modelsError(){return i()},get hasMessages(){return s(_e)},get pwaMode(){return s(Me)},get isSaved(){return r(),p(()=>r().isSaved)},get conversations(){return s(Re)},get controlsOpen(){return s(at)},set controlsOpen(Ne){_(at,Ne)},$$events:{openExplorer:()=>{_(be,s(at)),_(G,!0)},clear:()=>{const Ne=lt(va).sessionId;_(L,[]),_(P,""),h(),Ne?Yu(Ne).catch(()=>{}).finally(()=>void $e()):$e()},modelChange:Ne=>$t(Ne.detail.id),openModelSettings:()=>_(O,!0),openSystemSettings:()=>_(ae,!0),openMcpServers:()=>_(oe,!0),openKioskSettings:()=>_(se,!0),openCliSettings:()=>_(Y,!0),resetToDefault:async()=>{const Ne=await Hn.loadDefault();if(Ne){const ne=await Hn.apply(Ne.name);ne?.model&&E(ne.model),await Jr.load()}else Hn.clearLastApplied()},applyPreset:async Ne=>{const ne=await Hn.apply(Ne.detail.name);ne?.model&&E(ne.model),await Jr.load()},toggleSaved:async()=>{await C(),$e()},loadConversation:async Ne=>{const ne=lt(va).sessionId;await k(Ne.detail.sessionId),_(L,[]),_(P,""),ne&&ne!==Ne.detail.sessionId&&Yu(ne).catch(()=>{}).finally(()=>void $e())},deleteConversation:async Ne=>{try{await Dp(Ne.detail.sessionId),$e()}catch(ne){console.error("Failed to delete conversation",ne)}},refreshConversations:()=>void $e()},$$legacy:!0})}var wt=b(an,2),ct=v(wt);{var He=_e=>{qn(Fb(_e,{get suggestions(){return l(),p(()=>l().items)},get deleting(){return l(),p(()=>l().deleting)},get pwaMode(){return s(Me)},$$events:{add:Ge,delete:ut,select:Ne=>pe(Ne.detail.text)},$$legacy:!0}),Ne=>_(K,Ne),()=>s(K))};I(ct,_e=>{r(),p(()=>!r().messages.length)&&_e(He)})}var mt=b(ct,2);O_(mt,{get messages(){return r(),p(()=>r().messages)},get disableDelete(){return r(),p(()=>r().isStreaming)},$$events:{openGenerationDetails:_e=>et(_e.detail.id),deleteMessage:ge,retryMessage:_e=>ke(_e.detail.id),editMessage:_e=>Le(_e.detail.id),editAssistantAttachment:_e=>Ie(_e.detail)}});var st=b(wt,2);{var tn=_e=>{var Ne=rx(),ne=v(Ne),Oe=v(ne),Et=b(ne,2);B(()=>W(Oe,(r(),p(()=>r().error)))),N("click",Et,w),y(_e,Ne)};I(st,_e=>{r(),p(()=>r().error)&&_e(tn)})}var cn=b(st,2);{var nt=_e=>{vh(_e,{get originalValue(){return s(Ue)},get saving(){return s(qe)},get disabled(){return s(qe)},get value(){return s(ee)},set value(Ne){_(ee,Ne)},$$events:{cancel:Qe,submit:Ne=>ft(Ne.detail.text)},$$legacy:!0})},pt=_e=>{th(_e,{get presetAttachments(){return s(L)},get pwaMode(){return s(Me)},get isStreaming(){return r(),p(()=>r().isStreaming)},get prompt(){return s(P)},set prompt(Ne){_(P,Ne)},$$events:{submit:Ne=>d(Ne.detail),cancel:m,startDictation:fe,inputFocus:()=>_(at,!1)},$$legacy:!0})};I(cn,_e=>{s(we)?_e(nt):_e(pt,!1)})}var Tt=b(cn,2);dh(Tt,{get open(){return s(ce)},get generationId(){return s(X)},get loading(){return s(ve)},get error(){return s(Se)},get data(){return s(te)},get fields(){return ue},$$events:{close:Mt}});var ze=b(Tt,2);Cb(ze,{get open(){return s(O)},get selectedModel(){return r(),p(()=>r().selectedModel)},get model(){return s(ye)},$$events:{close:()=>_(O,!1)}});var _n=b(ze,2);f3(_n,{get open(){return s(ae)},$$events:{close:()=>_(ae,!1)}});var Ft=b(_n,2);u6(Ft,{get open(){return s(oe)},$$events:{close:()=>_(oe,!1)}});var Ht=b(Ft,2);fy(Ht,{get open(){return s(se)},$$events:{close:()=>_(se,!1)}});var on=b(Ht,2);F3(on,{get open(){return s(Y)},$$events:{close:()=>_(Y,!1)}});var Mn=b(on,2);nx(Mn,{get open(){return s(G)},set open(_e){_(G,_e)},$$events:{select:j,close:()=>{s(be)&&_(at,!0),_(be,!1)}},$$legacy:!0});var zn=b(Mn,2);{var Ln=_e=>{var Ne=ax(),ne=v(Ne),Oe=b(v(ne),2),Et=v(Oe),Q=b(Et,2);N("click",Et,Rt),N("click",Q,vn),y(_e,Ne)};I(zn,_e=>{s(je)&&_e(Ln)})}B(()=>ie(rn,"data-drawer-open",s(at))),y(e,rn),Ot(),f()}M0(ox,{target:document.getElementById("app")});"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{});export{le as a,I as b,pn as c,lx as d,N as e,M as f,y as g,Ot as h,Ut as i,v as j,ix as k,Ae as l,de as m,z as n,Lt as o,Nt as p,s as q,W as s,B as t,p as u};
