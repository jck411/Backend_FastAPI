const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModelPicker-BltK9Rg4.js","assets/ModelPicker-Cn_xB6on.css","assets/WebSearchMenu-llg5iChw.js","assets/WebSearchMenu-CawX--ca.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Il=!1;var ka=Array.isArray,Ld=Array.prototype.indexOf,Lo=Array.from,nu=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,Nl=Object.getOwnPropertyDescriptors,Od=Object.prototype,$d=Array.prototype,Oo=Object.getPrototypeOf,hi=Object.isExtensible;function Hs(e){return typeof e=="function"}const Tr=()=>{};function Rd(e){return e()}function ha(e){for(var t=0;t<e.length;t++)e[t]()}function zd(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}function Ud(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const wn=2,$o=4,mu=8,Ms=16,hr=32,Qr=64,Ro=128,An=256,ru=512,Jt=1024,Dn=2048,mr=4096,Un=8192,es=16384,zo=32768,Ps=65536,mi=1<<17,Bd=1<<18,Is=1<<19,Ll=1<<20,ho=1<<21,Uo=1<<22,qr=1<<23,Xn=Symbol("$state"),Ol=Symbol("legacy props"),jd=Symbol(""),Bo=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function vu(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qd(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Hd(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wd(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vd(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Gd(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kd(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Zd(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Yd(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Jd(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xd(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qd(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const gu=1,bu=2,$l=4,ef=8,tf=16,nf=1,rf=2,Rl=4,sf=8,af=16,uf=1,of=2,Vt=Symbol(),lf="http://www.w3.org/1999/xhtml",cf="http://www.w3.org/2000/svg",df="@attach";function ff(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function pf(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let hf=!1;function zl(e){return e===this.v}function jo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ul(e){return!jo(e,this.v)}let Ns=!1,mf=!1;function vf(){Ns=!0}let gt=null;function Cs(e){gt=e}function it(e,t=!1,n){gt={p:gt,c:null,e:null,s:e,x:null,l:Ns&&!t?{s:null,u:null,$:[]}:null}}function lt(e){var t=gt,n=t.e;if(n!==null){t.e=null;for(var r of n)nc(r)}return e!==void 0&&(t.x=e),gt=t.p,e??{}}function wa(){return!Ns||gt!==null&&gt.l===null}let Cr=[],su=[];function Bl(){var e=Cr;Cr=[],ha(e)}function gf(){var e=su;su=[],ha(e)}function bf(){return Cr.length>0||su.length>0}function ts(e){if(Cr.length===0&&!oa){var t=Cr;queueMicrotask(()=>{t===Cr&&Bl()})}Cr.push(e)}function _f(){Cr.length>0&&Bl(),su.length>0&&gf()}const yf=new WeakMap;function jl(e){var t=Ke;if(t===null)return Qe.f|=qr,e;if((t.f&zo)===0){if((t.f&Ro)===0)throw!t.parent&&e instanceof Error&&ql(e),e;t.b.error(e)}else As(e,t)}function As(e,t){for(;t!==null;){if((t.f&Ro)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&ql(e),e}function ql(e){const t=yf.get(e);t&&(nu(e,"message",{value:t.message}),nu(e,"stack",{value:t.stack}))}const Iu=new Set;let kt=null,Va=null,mo=new Set,Kr=[],_u=null,vo=!1,oa=!1;class dr{current=new Map;#a=new Map;#t=new Set;#f=0;#u=null;#c=!1;#s=[];#n=[];#e=[];#r=[];#o=[];#d=[];#l=[];skipped_effects=new Set;process(t){Kr=[],Va=null;for(const s of t)this.#p(s);if(this.#s.length===0&&this.#f===0){this.#h();var n=this.#e,r=this.#r;this.#e=[],this.#r=[],this.#o=[],Va=kt,kt=null,vi(n),vi(r),kt===null?kt=this:Iu.delete(this),this.#u?.resolve()}else this.#i(this.#e),this.#i(this.#r),this.#i(this.#o);for(const s of this.#s)Wr(s);for(const s of this.#n)Wr(s);this.#s=[],this.#n=[]}#p(t){t.f^=Jt;for(var n=t.first;n!==null;){var r=n.f,s=(r&(hr|Qr))!==0,a=s&&(r&Jt)!==0,u=a||(r&Un)!==0||this.skipped_effects.has(n);if(!u&&n.fn!==null){if(s)n.f^=Jt;else if((r&$o)!==0)this.#r.push(n);else if((r&Jt)===0)if((r&Uo)!==0){var i=n.b?.is_pending()?this.#n:this.#s;i.push(n)}else Ca(n)&&((n.f&Ms)!==0&&this.#o.push(n),Wr(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#i(t){for(const n of t)((n.f&Dn)!==0?this.#d:this.#l).push(n),fn(n,Jt);t.length=0}capture(t,n){this.#a.has(t)||this.#a.set(t,n),this.current.set(t,t.v)}activate(){kt=this}deactivate(){kt=null,Va=null;for(const t of mo)if(mo.delete(t),t(),kt!==null)break}neuter(){this.#c=!0}flush(){Kr.length>0?Hl():this.#h(),kt===this&&(this.#f===0&&Iu.delete(this),this.deactivate())}#h(){if(!this.#c)for(const t of this.#t)t();this.#t.clear()}increment(){this.#f+=1}decrement(){if(this.#f-=1,this.#f===0){for(const t of this.#d)fn(t,Dn),Ds(t);for(const t of this.#l)fn(t,mr),Ds(t);this.#e=[],this.#r=[],this.flush()}else this.deactivate()}add_callback(t){this.#t.add(t)}settled(){return(this.#u??=zd()).promise}static ensure(){if(kt===null){const t=kt=new dr;Iu.add(kt),oa||dr.enqueue(()=>{kt===t&&t.flush()})}return kt}static enqueue(t){ts(t)}}function xf(e){var t=oa;oa=!0;try{for(var n;;){if(_f(),Kr.length===0&&!bf()&&(kt?.flush(),Kr.length===0))return _u=null,n;Hl()}}finally{oa=t}}function Hl(){var e=Es;vo=!0;try{var t=0;for(yi(!0);Kr.length>0;){var n=dr.ensure();if(t++>1e3){var r,s;kf()}n.process(Kr),Fr.clear()}}finally{vo=!1,yi(e),_u=null}}function kf(){try{Gd()}catch(e){As(e,_u)}}let Ur=null;function vi(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(es|Un))===0&&Ca(r)&&(Ur=[],Wr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?uc(r):r.fn=null),Ur?.length>0)){Fr.clear();for(const s of Ur)Wr(s);Ur=[]}}Ur=null}}function Ds(e){for(var t=_u=e;t.parent!==null;){t=t.parent;var n=t.f;if(vo&&t===Ke&&(n&Ms)!==0)return;if((n&(Qr|hr))!==0){if((n&Jt)===0)return;t.f^=Jt}}Kr.push(t)}function wf(e){let t=0,n=Pr(0),r;return()=>{Rf()&&(o(n),Ls(()=>(t===0&&(r=m(()=>e(()=>ia(n)))),t+=1,()=>{ts(()=>{t-=1,t===0&&(r?.(),r=void 0,ia(n))})})))}}var Ef=Ps|Is|Ro;function Sf(e,t,n){new Cf(e,t,n)}class Cf{parent;#a=!1;#t;#f=null;#u;#c;#s;#n=null;#e=null;#r=null;#o=null;#d=0;#l=0;#p=!1;#i=null;#h=()=>{this.#i&&Zr(this.#i,this.#d)};#b=wf(()=>(this.#i=Pr(this.#d),()=>{this.#i=null}));constructor(t,n,r){this.#t=t,this.#u=n,this.#c=r,this.parent=Ke.b,this.#a=!!this.#u.pending,this.#s=ns(()=>{Ke.b=this;{try{this.#n=cn(()=>r(this.#t))}catch(s){this.error(s)}this.#l>0?this.#v():this.#a=!1}},Ef)}#_(){try{this.#n=cn(()=>this.#c(this.#t))}catch(t){this.error(t)}this.#a=!1}#y(){const t=this.#u.pending;t&&(this.#e=cn(()=>t(this.#t)),dr.enqueue(()=>{this.#n=this.#m(()=>(dr.ensure(),cn(()=>this.#c(this.#t)))),this.#l>0?this.#v():(Mr(this.#e,()=>{this.#e=null}),this.#a=!1)}))}is_pending(){return this.#a||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#u.pending}#m(t){var n=Ke,r=Qe,s=gt;Tn(this.#s),vn(this.#s),Cs(this.#s.ctx);try{return t()}catch(a){return jl(a),null}finally{Tn(n),vn(r),Cs(s)}}#v(){const t=this.#u.pending;this.#n!==null&&(this.#o=document.createDocumentFragment(),Af(this.#n,this.#o)),this.#e===null&&(this.#e=cn(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#l+=t,this.#l===0&&(this.#a=!1,this.#e&&Mr(this.#e,()=>{this.#e=null}),this.#o&&(this.#t.before(this.#o),this.#o=null))}update_pending_count(t){this.#g(t),this.#d+=t,mo.add(this.#h)}get_effect_pending(){return this.#b(),o(this.#i)}error(t){var n=this.#u.onerror;let r=this.#u.failed;if(this.#p||!n&&!r)throw t;this.#n&&(nn(this.#n),this.#n=null),this.#e&&(nn(this.#e),this.#e=null),this.#r&&(nn(this.#r),this.#r=null);var s=!1,a=!1;const u=()=>{if(s){pf();return}s=!0,a&&Qd(),dr.ensure(),this.#d=0,this.#r!==null&&Mr(this.#r,()=>{this.#r=null}),this.#a=this.has_pending_snippet(),this.#n=this.#m(()=>(this.#p=!1,cn(()=>this.#c(this.#t)))),this.#l>0?this.#v():this.#a=!1};var i=Qe;try{vn(null),a=!0,n?.(t,u),a=!1}catch(l){As(l,this.#s&&this.#s.parent)}finally{vn(i)}r&&ts(()=>{this.#r=this.#m(()=>{this.#p=!0;try{return cn(()=>{r(this.#t,()=>t,()=>u)})}catch(l){return As(l,this.#s.parent),null}finally{this.#p=!1}})})}}function Af(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Sa(n);t.append(n),n=s}}function Wl(e,t,n){const r=wa()?Ea:vt;if(t.length===0){n(e.map(r));return}var s=kt,a=Ke,u=Df();Promise.all(t.map(i=>Tf(i))).then(i=>{s?.activate(),u();try{n([...e.map(r),...i])}catch(l){(a.f&es)===0&&As(l,a)}s?.deactivate(),Vl()}).catch(i=>{As(i,a)})}function Df(){var e=Ke,t=Qe,n=gt,r=kt;return function(){Tn(e),vn(t),Cs(n),r?.activate()}}function Vl(){Tn(null),vn(null),Cs(null)}function Ea(e){var t=wn|Dn,n=Qe!==null&&(Qe.f&wn)!==0?Qe:null;return Ke===null||n!==null&&(n.f&An)!==0?t|=An:Ke.f|=Is,{ctx:gt,deps:null,effects:null,equals:zl,f:t,fn:e,reactions:null,rv:0,v:Vt,wv:0,parent:n??Ke,ac:null}}function Tf(e,t){let n=Ke;n===null&&qd();var r=n.b,s=void 0,a=Pr(Vt),u=null,i=!Qe;return Bf(()=>{try{var l=e();u&&Promise.resolve(l).catch(()=>{})}catch(h){l=Promise.reject(h)}var c=()=>l;s=u?.then(c,c)??Promise.resolve(l),u=s;var f=kt,d=r.is_pending();i&&(r.update_pending_count(1),d||f.increment());const v=(h,p=void 0)=>{u=null,d||f.activate(),p?p!==Bo&&(a.f|=qr,Zr(a,p)):((a.f&qr)!==0&&(a.f^=qr),Zr(a,h)),i&&(r.update_pending_count(-1),d||f.decrement()),Vl()};if(s.then(v,h=>v(null,h||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(l=>{function c(f){function d(){f===s?l(a):c(s)}f.then(d,d)}c(s)})}function Ff(e){const t=Ea(e);return lc(t),t}function vt(e){const t=Ea(e);return t.equals=Ul,t}function Gl(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)nn(t[n])}}function Mf(e){for(var t=e.parent;t!==null;){if((t.f&wn)===0)return t;t=t.parent}return null}function qo(e){var t,n=Ke;Tn(Mf(e));try{Gl(e),t=pc(e)}finally{Tn(n)}return t}function Kl(e){var t=qo(e);if(e.equals(t)||(e.v=t,e.wv=dc()),!rs){var n=(Ar||(e.f&An)!==0)&&e.deps!==null?mr:Jt;fn(e,n)}}const Fr=new Map;function Pr(e,t){var n={f:0,v:e,reactions:null,equals:zl,rv:0,wv:0};return n}function xr(e,t){const n=Pr(e);return lc(n),n}function R(e,t=!1,n=!0){const r=Pr(e);return t||(r.equals=Ul),Ns&&n&&gt!==null&&gt.l!==null&&(gt.l.s??=[]).push(r),r}function Zl(e,t){return w(e,m(()=>o(e))),t}function w(e,t,n=!1){Qe!==null&&(!$n||(Qe.f&mi)!==0)&&wa()&&(Qe.f&(wn|Ms|Uo|mi))!==0&&!fr?.includes(e)&&Xd();let r=n?ys(t):t;return Zr(e,r)}function Zr(e,t){if(!e.equals(t)){var n=e.v;rs?Fr.set(e,t):Fr.set(e,n),e.v=t;var r=dr.ensure();r.capture(e,n),(e.f&wn)!==0&&((e.f&Dn)!==0&&qo(e),fn(e,(e.f&An)===0?Jt:mr)),e.wv=dc(),Yl(e,Dn),wa()&&Ke!==null&&(Ke.f&Jt)!==0&&(Ke.f&(hr|Qr))===0&&(Sn===null?Hf([e]):Sn.push(e))}return t}function gi(e,t=1){var n=o(e),r=t===1?n++:n--;return w(e,n),r}function ia(e){w(e,e.v+1)}function Yl(e,t){var n=e.reactions;if(n!==null)for(var r=wa(),s=n.length,a=0;a<s;a++){var u=n[a],i=u.f;if(!(!r&&u===Ke)){var l=(i&Dn)===0;l&&fn(u,t),(i&wn)!==0?Yl(u,mr):l&&((i&Ms)!==0&&Ur!==null&&Ur.push(u),Ds(u))}}}function ys(e){if(typeof e!="object"||e===null||Xn in e)return e;const t=Oo(e);if(t!==Od&&t!==$d)return e;var n=new Map,r=ka(e),s=xr(0),a=Hr,u=i=>{if(Hr===a)return i();var l=Qe,c=Hr;vn(null),ki(a);var f=i();return vn(l),ki(c),f};return r&&n.set("length",xr(e.length)),new Proxy(e,{defineProperty(i,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Yd();var f=n.get(l);return f===void 0?f=u(()=>{var d=xr(c.value);return n.set(l,d),d}):w(f,c.value,!0),!0},deleteProperty(i,l){var c=n.get(l);if(c===void 0){if(l in i){const f=u(()=>xr(Vt));n.set(l,f),ia(s)}}else w(c,Vt),ia(s);return!0},get(i,l,c){if(l===Xn)return e;var f=n.get(l),d=l in i;if(f===void 0&&(!d||cr(i,l)?.writable)&&(f=u(()=>{var h=ys(d?i[l]:Vt),p=xr(h);return p}),n.set(l,f)),f!==void 0){var v=o(f);return v===Vt?void 0:v}return Reflect.get(i,l,c)},getOwnPropertyDescriptor(i,l){var c=Reflect.getOwnPropertyDescriptor(i,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=o(f))}else if(c===void 0){var d=n.get(l),v=d?.v;if(d!==void 0&&v!==Vt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(i,l){if(l===Xn)return!0;var c=n.get(l),f=c!==void 0&&c.v!==Vt||Reflect.has(i,l);if(c!==void 0||Ke!==null&&(!f||cr(i,l)?.writable)){c===void 0&&(c=u(()=>{var v=f?ys(i[l]):Vt,h=xr(v);return h}),n.set(l,c));var d=o(c);if(d===Vt)return!1}return f},set(i,l,c,f){var d=n.get(l),v=l in i;if(r&&l==="length")for(var h=c;h<d.v;h+=1){var p=n.get(h+"");p!==void 0?w(p,Vt):h in i&&(p=u(()=>xr(Vt)),n.set(h+"",p))}if(d===void 0)(!v||cr(i,l)?.writable)&&(d=u(()=>xr(void 0)),w(d,ys(c)),n.set(l,d));else{v=d.v!==Vt;var x=u(()=>ys(c));w(d,x)}var y=Reflect.getOwnPropertyDescriptor(i,l);if(y?.set&&y.set.call(f,c),!v){if(r&&typeof l=="string"){var _=n.get("length"),E=Number(l);Number.isInteger(E)&&E>=_.v&&w(_,E+1)}ia(s)}return!0},ownKeys(i){o(s);var l=Reflect.ownKeys(i).filter(d=>{var v=n.get(d);return v===void 0||v.v!==Vt});for(var[c,f]of n)f.v!==Vt&&!(c in i)&&l.push(c);return l},setPrototypeOf(){Jd()}})}function bi(e){try{if(e!==null&&typeof e=="object"&&Xn in e)return e[Xn]}catch{}return e}function Pf(e,t){return Object.is(bi(e),bi(t))}var au,Jl,Xl,Ql;function If(){if(au===void 0){au=window,Jl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Xl=cr(t,"firstChild").get,Ql=cr(t,"nextSibling").get,hi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),hi(n)&&(n.__t=void 0)}}function Nr(e=""){return document.createTextNode(e)}function Zn(e){return Xl.call(e)}function Sa(e){return Ql.call(e)}function g(e,t){return Zn(e)}function me(e,t=!1){{var n=Zn(e);return n instanceof Comment&&n.data===""?Sa(n):n}}function C(e,t=1,n=!1){let r=e;for(;t--;)r=Sa(r);return r}function Nf(e){e.textContent=""}function Ho(){return!1}function Lf(e,t){if(t){const n=document.body;e.autofocus=!0,ts(()=>{document.activeElement===n&&e.focus()})}}let _i=!1;function Of(){_i||(_i=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function yu(e){var t=Qe,n=Ke;vn(null),Tn(null);try{return e()}finally{vn(t),Tn(n)}}function ec(e,t,n,r=n){e.addEventListener(t,()=>yu(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),Of()}function tc(e){Ke===null&&Qe===null&&Vd(),Qe!==null&&(Qe.f&An)!==0&&Ke===null&&Wd(),rs&&Hd()}function $f(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function tr(e,t,n,r=!0){var s=Ke;s!==null&&(s.f&Un)!==0&&(e|=Un);var a={ctx:gt,deps:null,nodes_start:null,nodes_end:null,f:e|Dn,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Wr(a),a.f|=zo}catch(l){throw nn(a),l}else t!==null&&Ds(a);if(r){var u=a;if(n&&u.deps===null&&u.teardown===null&&u.nodes_start===null&&u.first===u.last&&(u.f&Is)===0&&(u=u.first),u!==null&&(u.parent=s,s!==null&&$f(u,s),Qe!==null&&(Qe.f&wn)!==0&&(e&Qr)===0)){var i=Qe;(i.effects??=[]).push(u)}}return a}function Rf(){return Qe!==null&&!$n}function xu(e){const t=tr(mu,null,!1);return fn(t,Jt),t.teardown=e,t}function go(e){tc();var t=Ke.f,n=!Qe&&(t&hr)!==0&&(t&zo)===0;if(n){var r=gt;(r.e??=[]).push(e)}else return nc(e)}function nc(e){return tr($o|Ll,e,!1)}function zf(e){return tc(),tr(mu|Ll,e,!0)}function Uf(e){dr.ensure();const t=tr(Qr|Is,e,!0);return(n={})=>new Promise(r=>{n.outro?Mr(t,()=>{nn(t),r(void 0)}):(nn(t),r(void 0))})}function qn(e){return tr($o,e,!1)}function ve(e,t){var n=gt,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=Ls(()=>{e(),!r.ran&&(r.ran=!0,m(t))})}function Rt(){var e=gt;Ls(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Jt)!==0&&fn(n,mr),Ca(n)&&Wr(n),t.ran=!1}})}function Bf(e){return tr(Uo|Is,e,!0)}function Ls(e,t=0){return tr(mu|t,e,!0)}function K(e,t=[],n=[]){Wl(t,n,r=>{tr(mu,()=>e(...r.map(o)),!0)})}function ns(e,t=0){var n=tr(Ms|t,e,!0);return n}function cn(e,t=!0){return tr(hr|Is,e,!0,t)}function rc(e){var t=e.teardown;if(t!==null){const n=rs,r=Qe;xi(!0),vn(null);try{t.call(null)}finally{xi(n),vn(r)}}}function sc(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&yu(()=>{s.abort(Bo)});var r=n.next;(n.f&Qr)!==0?n.parent=null:nn(n,t),n=r}}function jf(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&hr)===0&&nn(t),t=n}}function nn(e,t=!0){var n=!1;(t||(e.f&Bd)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ac(e.nodes_start,e.nodes_end),n=!0),sc(e,t&&!n),uu(e,0),fn(e,es);var r=e.transitions;if(r!==null)for(const a of r)a.stop();rc(e);var s=e.parent;s!==null&&s.first!==null&&uc(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ac(e,t){for(;e!==null;){var n=e===t?null:Sa(e);e.remove(),e=n}}function uc(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Mr(e,t){var n=[];Wo(e,n,!0),oc(n,()=>{nn(e),t&&t()})}function oc(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function Wo(e,t,n){if((e.f&Un)===0){if(e.f^=Un,e.transitions!==null)for(const u of e.transitions)(u.is_global||n)&&t.push(u);for(var r=e.first;r!==null;){var s=r.next,a=(r.f&Ps)!==0||(r.f&hr)!==0;Wo(r,t,a?n:!1),r=s}}}function ku(e){ic(e,!0)}function ic(e,t){if((e.f&Un)!==0){e.f^=Un,(e.f&Jt)===0&&(fn(e,Dn),Ds(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Ps)!==0||(n.f&hr)!==0;ic(n,s?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let bs=null;function qf(e){var t=bs;try{if(bs=new Set,m(e),t!==null)for(var n of bs)t.add(n);return bs}finally{bs=t}}function _y(e){for(var t of qf(e))Zr(t,t.v)}let Es=!1;function yi(e){Es=e}let rs=!1;function xi(e){rs=e}let Qe=null,$n=!1;function vn(e){Qe=e}let Ke=null;function Tn(e){Ke=e}let fr=null;function lc(e){Qe!==null&&(fr===null?fr=[e]:fr.push(e))}let ln=null,yn=0,Sn=null;function Hf(e){Sn=e}let cc=1,ma=0,Hr=ma;function ki(e){Hr=e}let Ar=!1;function dc(){return++cc}function Ca(e){var t=e.f;if((t&Dn)!==0)return!0;if((t&mr)!==0){var n=e.deps,r=(t&An)!==0;if(n!==null){var s,a,u=(t&ru)!==0,i=r&&Ke!==null&&!Ar,l=n.length;if((u||i)&&(Ke===null||(Ke.f&es)===0)){var c=e,f=c.parent;for(s=0;s<l;s++)a=n[s],(u||!a?.reactions?.includes(c))&&(a.reactions??=[]).push(c);u&&(c.f^=ru),i&&f!==null&&(f.f&An)===0&&(c.f^=An)}for(s=0;s<l;s++)if(a=n[s],Ca(a)&&Kl(a),a.wv>e.wv)return!0}(!r||Ke!==null&&!Ar)&&fn(e,Jt)}return!1}function fc(e,t,n=!0){var r=e.reactions;if(r!==null&&!fr?.includes(e))for(var s=0;s<r.length;s++){var a=r[s];(a.f&wn)!==0?fc(a,t,!1):t===a&&(n?fn(a,Dn):(a.f&Jt)!==0&&fn(a,mr),Ds(a))}}function pc(e){var t=ln,n=yn,r=Sn,s=Qe,a=Ar,u=fr,i=gt,l=$n,c=Hr,f=e.f;ln=null,yn=0,Sn=null,Ar=(f&An)!==0&&($n||!Es||Qe===null),Qe=(f&(hr|Qr))===0?e:null,fr=null,Cs(e.ctx),$n=!1,Hr=++ma,e.ac!==null&&(yu(()=>{e.ac.abort(Bo)}),e.ac=null);try{e.f|=ho;var d=e.fn,v=d(),h=e.deps;if(ln!==null){var p;if(uu(e,yn),h!==null&&yn>0)for(h.length=yn+ln.length,p=0;p<ln.length;p++)h[yn+p]=ln[p];else e.deps=h=ln;if(!Ar||(f&wn)!==0&&e.reactions!==null)for(p=yn;p<h.length;p++)(h[p].reactions??=[]).push(e)}else h!==null&&yn<h.length&&(uu(e,yn),h.length=yn);if(wa()&&Sn!==null&&!$n&&h!==null&&(e.f&(wn|mr|Dn))===0)for(p=0;p<Sn.length;p++)fc(Sn[p],e);return s!==null&&s!==e&&(ma++,Sn!==null&&(r===null?r=Sn:r.push(...Sn))),(e.f&qr)!==0&&(e.f^=qr),v}catch(x){return jl(x)}finally{e.f^=ho,ln=t,yn=n,Sn=r,Qe=s,Ar=a,fr=u,Cs(i),$n=l,Hr=c}}function Wf(e,t){let n=t.reactions;if(n!==null){var r=Ld.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&wn)!==0&&(ln===null||!ln.includes(t))&&(fn(t,mr),(t.f&(An|ru))===0&&(t.f^=ru),Gl(t),uu(t,0))}function uu(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Wf(e,n[r])}function Wr(e){var t=e.f;if((t&es)===0){fn(e,Jt);var n=Ke,r=Es;Ke=e,Es=!0;try{(t&Ms)!==0?jf(e):sc(e),rc(e);var s=pc(e);e.teardown=typeof s=="function"?s:null,e.wv=cc;var a;Il&&mf&&(e.f&Dn)!==0&&e.deps}finally{Es=r,Ke=n}}}async function Vf(){await Promise.resolve(),xf()}function o(e){var t=e.f,n=(t&wn)!==0;if(bs?.add(e),Qe!==null&&!$n){var r=Ke!==null&&(Ke.f&es)!==0;if(!r&&!fr?.includes(e)){var s=Qe.deps;if((Qe.f&ho)!==0)e.rv<ma&&(e.rv=ma,ln===null&&s!==null&&s[yn]===e?yn++:ln===null?ln=[e]:(!Ar||!ln.includes(e))&&ln.push(e));else{(Qe.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[Qe]:a.includes(Qe)||a.push(Qe)}}}else if(n&&e.deps===null&&e.effects===null){var u=e,i=u.parent;i!==null&&(i.f&An)===0&&(u.f^=An)}if(rs){if(Fr.has(e))return Fr.get(e);if(n){u=e;var l=u.v;return((u.f&Jt)===0&&u.reactions!==null||hc(u))&&(l=qo(u)),Fr.set(u,l),l}}else n&&(u=e,Ca(u)&&Kl(u));if((e.f&qr)!==0)throw e.v;return e.v}function hc(e){if(e.v===Vt)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Fr.has(t)||(t.f&wn)!==0&&hc(t))return!0;return!1}function m(e){var t=$n;try{return $n=!0,e()}finally{$n=t}}const Gf=-7169;function fn(e,t){e.f=e.f&Gf|t}function O(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Xn in e)bo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Xn in n&&bo(n)}}}function bo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{bo(e[r],t)}catch{}const n=Oo(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Nl(n);for(let s in r){const a=r[s].get;if(a)try{a.call(e)}catch{}}}}}function Kf(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Zf=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Yf(e){return Zf.includes(e)}const Jf={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Xf(e){return e=e.toLowerCase(),Jf[e]??e}const Qf=["touchstart","touchmove"];function e0(e){return Qf.includes(e)}const mc=new Set,_o=new Set;function vc(e,t,n,r={}){function s(a){if(r.capture||sa.call(t,a),!a.cancelBubble)return yu(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ts(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function W(e,t,n,r,s){var a={capture:r,passive:s},u=vc(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&xu(()=>{t.removeEventListener(e,u,a)})}function t0(e){for(var t=0;t<e.length;t++)mc.add(e[t]);for(var n of _o)n(e)}let wi=null;function sa(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;wi=e;var u=0,i=wi===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;l<=c&&(u=l)}if(a=s[u]||e.target,a!==t){nu(e,"currentTarget",{configurable:!0,get(){return a||n}});var f=Qe,d=Ke;vn(null),Tn(null);try{for(var v,h=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var x=a["__"+r];if(x!=null&&(!a.disabled||e.target===a))if(ka(x)){var[y,..._]=x;y.apply(a,[e,..._])}else x.call(a,e)}catch(E){v?h.push(E):v=E}if(e.cancelBubble||p===t||p===null)break;a=p}if(v){for(let E of h)queueMicrotask(()=>{throw E});throw v}}finally{e.__root=t,delete e.currentTarget,vn(f),Tn(d)}}}function Vo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Yr(e,t){var n=Ke;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function F(e,t){var n=(t&uf)!==0,r=(t&of)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=Vo(a?e:"<!>"+e),n||(s=Zn(s)));var u=r||Jl?document.importNode(s,!0):s.cloneNode(!0);if(n){var i=Zn(u),l=u.lastChild;Yr(i,l)}else Yr(u,u);return u}}function n0(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var u=Vo(s),i=Zn(u);a=Zn(i)}var l=a.cloneNode(!0);return Yr(l,l),l}}function Go(e,t){return n0(e,t,"svg")}function Bn(e=""){{var t=Nr(e+"");return Yr(t,t),t}}function Ae(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Nr();return e.append(t,n),Yr(t,n),e}function k(e,t){e!==null&&e.before(t)}function X(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function r0(e,t){return s0(e,t)}const ls=new Map;function s0(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:u=!0}){If();var i=new Set,l=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!i.has(h)){i.add(h);var p=e0(h);t.addEventListener(h,sa,{passive:p});var x=ls.get(h);x===void 0?(document.addEventListener(h,sa,{passive:p}),ls.set(h,1)):ls.set(h,x+1)}}};l(Lo(mc)),_o.add(l);var c=void 0,f=Uf(()=>{var d=n??t.appendChild(Nr());return Sf(d,{pending:()=>{}},v=>{if(a){it({});var h=gt;h.c=a}s&&(r.$$events=s),c=e(v,r)||{},a&&lt()}),()=>{for(var v of i){t.removeEventListener(v,sa);var h=ls.get(v);--h===0?(document.removeEventListener(v,sa),ls.delete(v)):ls.set(v,h)}_o.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return a0.set(c,f),c}let a0=new WeakMap;function $(e,t,n=!1){var r=e,s=null,a=null,u=Vt,i=n?Ps:0,l=!1;const c=(h,p=!0)=>{l=!0,v(p,h)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var h=u?s:a,p=u?a:s;h&&ku(h),p&&Mr(p,()=>{u?a=null:s=null})}const v=(h,p)=>{if(u!==(u=h)){var x=Ho(),y=r;if(x&&(f=document.createDocumentFragment(),f.append(y=Nr())),u?s??=p&&cn(()=>p(y)):a??=p&&cn(()=>p(y)),x){var _=kt,E=u?s:a,S=u?a:s;E&&_.skipped_effects.delete(E),S&&_.skipped_effects.add(S),_.add_callback(d)}else d()}};ns(()=>{l=!1,t(c),l||v(null,null)},i)}function zn(e,t){return t}function u0(e,t,n){for(var r=e.items,s=[],a=t.length,u=0;u<a;u++)Wo(t[u].e,s,!0);var i=a>0&&s.length===0&&n!==null;if(i){var l=n.parentNode;Nf(l),l.append(n),r.clear(),Gn(e,t[0].prev,t[a-1].next)}oc(s,()=>{for(var c=0;c<a;c++){var f=t[c];i||(r.delete(f.k),Gn(e,f.prev,f.next)),nn(f.e,!i)}})}function _t(e,t,n,r,s,a=null){var u=e,i={flags:t,items:new Map,first:null},l=(t&$l)!==0;if(l){var c=e;u=c.appendChild(Nr())}var f=null,d=!1,v=new Map,h=vt(()=>{var _=n();return ka(_)?_:_==null?[]:Lo(_)}),p,x;function y(){o0(x,p,i,v,u,s,t,r,n),a!==null&&(p.length===0?f?ku(f):f=cn(()=>a(u)):f!==null&&Mr(f,()=>{f=null}))}ns(()=>{x??=Ke,p=o(h);var _=p.length;if(!(d&&_===0)){d=_===0;var E,S,b,D;if(Ho()){var A=new Set,P=kt;for(S=0;S<_;S+=1){b=p[S],D=r(b,S);var Z=i.items.get(D)??v.get(D);Z?(t&(gu|bu))!==0&&gc(Z,b,S,t):(E=bc(null,i,null,null,b,D,S,s,t,n,!0),v.set(D,E)),A.add(D)}for(const[Y,T]of i.items)A.has(Y)||P.skipped_effects.add(T.e);P.add_callback(y)}else y();o(h)}})}function o0(e,t,n,r,s,a,u,i,l){var c=(u&ef)!==0,f=(u&(gu|bu))!==0,d=t.length,v=n.items,h=n.first,p=h,x,y=null,_,E=[],S=[],b,D,A,P;if(c)for(P=0;P<d;P+=1)b=t[P],D=i(b,P),A=v.get(D),A!==void 0&&(A.a?.measure(),(_??=new Set).add(A));for(P=0;P<d;P+=1){if(b=t[P],D=i(b,P),A=v.get(D),A===void 0){var Z=r.get(D);if(Z!==void 0){r.delete(D),v.set(D,Z);var Y=y?y.next:p;Gn(n,y,Z),Gn(n,Z,Y),Nu(Z,Y,s),y=Z}else{var T=p?p.e.nodes_start:s;y=bc(T,n,y,y===null?n.first:y.next,b,D,P,a,u,l)}v.set(D,y),E=[],S=[],p=y.next;continue}if(f&&gc(A,b,P,u),(A.e.f&Un)!==0&&(ku(A.e),c&&(A.a?.unfix(),(_??=new Set).delete(A))),A!==p){if(x!==void 0&&x.has(A)){if(E.length<S.length){var N=S[0],Q;y=N.prev;var I=E[0],V=E[E.length-1];for(Q=0;Q<E.length;Q+=1)Nu(E[Q],N,s);for(Q=0;Q<S.length;Q+=1)x.delete(S[Q]);Gn(n,I.prev,V.next),Gn(n,y,I),Gn(n,V,N),p=N,y=V,P-=1,E=[],S=[]}else x.delete(A),Nu(A,p,s),Gn(n,A.prev,A.next),Gn(n,A,y===null?n.first:y.next),Gn(n,y,A),y=A;continue}for(E=[],S=[];p!==null&&p.k!==D;)(p.e.f&Un)===0&&(x??=new Set).add(p),S.push(p),p=p.next;if(p===null)continue;A=p}E.push(A),y=A,p=A.next}if(p!==null||x!==void 0){for(var J=x===void 0?[]:Lo(x);p!==null;)(p.e.f&Un)===0&&J.push(p),p=p.next;var se=J.length;if(se>0){var de=(u&$l)!==0&&d===0?s:null;if(c){for(P=0;P<se;P+=1)J[P].a?.measure();for(P=0;P<se;P+=1)J[P].a?.fix()}u0(n,J,de)}}c&&ts(()=>{if(_!==void 0)for(A of _)A.a?.apply()}),e.first=n.first&&n.first.e,e.last=y&&y.e;for(var ae of r.values())nn(ae.e);r.clear()}function gc(e,t,n,r){(r&gu)!==0&&Zr(e.v,t),(r&bu)!==0?Zr(e.i,n):e.i=n}function bc(e,t,n,r,s,a,u,i,l,c,f){var d=(l&gu)!==0,v=(l&tf)===0,h=d?v?R(s,!1,!1):Pr(s):s,p=(l&bu)===0?u:Pr(u),x={i:p,v:h,k:a,a:null,e:null,prev:n,next:r};try{if(e===null){var y=document.createDocumentFragment();y.append(e=Nr())}return x.e=cn(()=>i(e,h,p,c),hf),x.e.prev=n&&n.e,x.e.next=r&&r.e,n===null?f||(t.first=x):(n.next=x,n.e.next=x.e),r!==null&&(r.prev=x,r.e.prev=x.e),x}finally{}}function Nu(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var u=Sa(a);s.before(a),a=u}}function Gn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function yo(e,t,n=!1,r=!1,s=!1){var a=e,u="";K(()=>{var i=Ke;if(u!==(u=t()??"")&&(i.nodes_start!==null&&(ac(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),u!=="")){var l=u+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var c=Vo(l);if((n||r)&&(c=Zn(c)),Yr(Zn(c),c.lastChild),n||r)for(;Zn(c);)a.before(Zn(c));else a.before(c)}})}function tn(e,t,n,r,s){var a=t.$$slots?.[n],u=!1;a===!0&&(a=t[n==="default"?"children":n],u=!0),a===void 0||a(e,u?()=>r:r)}function Ei(e,t,n){var r=e,s,a,u=null,i=null;function l(){a&&(Mr(a),a=null),u&&(u.lastChild.remove(),r.before(u),u=null),a=i,i=null}ns(()=>{if(s!==(s=t())){var c=Ho();if(s){var f=r;c&&(u=document.createDocumentFragment(),u.append(f=Nr()),a&&kt.skipped_effects.add(a)),i=cn(()=>n(f,s))}c?kt.add_callback(l):l()}},Ps)}function i0(e,t,n,r,s,a){var u,i,l=null,c=e,f;ns(()=>{const d=t()||null;var v=cf;d!==u&&(f&&(d===null?Mr(f,()=>{f=null,i=null}):d===i?ku(f):nn(f)),d&&d!==i&&(f=cn(()=>{if(l=document.createElementNS(v,d),Yr(l,l),r){var h=l.appendChild(Nr());r(l,h)}Ke.nodes_end=l,c.before(l)})),u=d,u&&(i=u))},Ps)}function Jr(e,t,n){qn(()=>{var r=m(()=>t(e,n?.())||{});if(n&&r?.update){var s=!1,a={};Ls(()=>{var u=n();O(u),s&&jo(a,u)&&(a=u,r.update(u))}),s=!0}if(r?.destroy)return()=>r.destroy()})}function l0(e,t){var n=void 0,r;ns(()=>{n!==(n=t())&&(r&&(nn(r),r=null),n&&(r=cn(()=>{qn(()=>n(e))})))})}function _c(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=_c(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function c0(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=_c(e))&&(r&&(r+=" "),r+=t);return r}function Ga(e){return typeof e=="object"?c0(e):e??""}const Si=[...` 	
\r\fÂ \v\uFEFF`];function d0(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,u=0;(u=r.indexOf(s,u))>=0;){var i=u+a;(u===0||Si.includes(r[u-1]))&&(i===r.length||Si.includes(r[i]))?r=(u===0?"":r.substring(0,u))+r.substring(i+1):u=i}}return r===""?null:r}function Ci(e,t=!1){var n=t?" !important;":";",r="";for(var s in e){var a=e[s];a!=null&&a!==""&&(r+=" "+s+": "+a+n)}return r}function Lu(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function f0(e,t){if(t){var n="",r,s;if(Array.isArray(t)?(r=t[0],s=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,u=0,i=!1,l=[];r&&l.push(...Object.keys(r).map(Lu)),s&&l.push(...Object.keys(s).map(Lu));var c=0,f=-1;const x=e.length;for(var d=0;d<x;d++){var v=e[d];if(i?v==="/"&&e[d-1]==="*"&&(i=!1):a?a===v&&(a=!1):v==="/"&&e[d+1]==="*"?i=!0:v==='"'||v==="'"?a=v:v==="("?u++:v===")"&&u--,!i&&a===!1&&u===0){if(v===":"&&f===-1)f=d;else if(v===";"||d===x-1){if(f!==-1){var h=Lu(e.substring(c,f).trim());if(!l.includes(h)){v!==";"&&d++;var p=e.substring(c,d).trim();n+=" "+p+";"}}c=d+1,f=-1}}}}return r&&(n+=Ci(r)),s&&(n+=Ci(s,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Ct(e,t,n,r,s,a){var u=e.__className;if(u!==n||u===void 0){var i=d0(n,r,a);i==null?e.removeAttribute("class"):t?e.className=i:e.setAttribute("class",i),e.__className=n}else if(a&&s!==a)for(var l in a){var c=!!a[l];(s==null||c!==!!s[l])&&e.classList.toggle(l,c)}return a}function Ou(e,t={},n,r){for(var s in n){var a=n[s];t[s]!==a&&(n[s]==null?e.style.removeProperty(s):e.style.setProperty(s,a,r))}}function xn(e,t,n,r){var s=e.__style;if(s!==t){var a=f0(t,r);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}else r&&(Array.isArray(r)?(Ou(e,n?.[0],r[0]),Ou(e,n?.[1],r[1],"important")):Ou(e,n,r));return r}function kn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!ka(t))return ff();for(var r of e.options)r.selected=t.includes(la(r));return}for(r of e.options){var s=la(r);if(Pf(s,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function jn(e){var t=new MutationObserver(()=>{kn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),xu(()=>{t.disconnect()})}function yy(e,t,n=t){var r=!0;ec(e,"change",s=>{var a=s?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(a),la);else{var i=e.querySelector(a)??e.querySelector("option:not([disabled])");u=i&&la(i)}n(u)}),qn(()=>{var s=t();if(kn(e,s,r),r&&s===void 0){var a=e.querySelector(":checked");a!==null&&(s=la(a),n(s))}e.__value=s,r=!1}),jn(e)}function la(e){return"__value"in e?e.__value:e.value}const Ws=Symbol("class"),Vs=Symbol("style"),yc=Symbol("is custom element"),xc=Symbol("is html");function Dt(e,t){var n=wu(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Gt(e,t){var n=wu(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function p0(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function fe(e,t,n,r){var s=wu(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[jd]=n),n==null?e.removeAttribute(t):typeof n!="string"&&kc(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function h0(e,t,n,r,s=!1,a=!1){var u=wu(e),i=u[yc],l=!u[xc],c=t||{},f=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=Ga(n.class):n[Ws]&&(n.class=null),n[Vs]&&(n.style??=null);var v=kc(e);for(const S in n){let b=n[S];if(f&&S==="value"&&b==null){e.value=e.__value="",c[S]=b;continue}if(S==="class"){var h=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ct(e,h,b,r,t?.[Ws],n[Ws]),c[S]=b,c[Ws]=n[Ws];continue}if(S==="style"){xn(e,b,t?.[Vs],n[Vs]),c[S]=b,c[Vs]=n[Vs];continue}var p=c[S];if(!(b===p&&!(b===void 0&&e.hasAttribute(S)))){c[S]=b;var x=S[0]+S[1];if(x!=="$$")if(x==="on"){const D={},A="$$"+S;let P=S.slice(2);var y=Yf(P);if(Kf(P)&&(P=P.slice(0,-7),D.capture=!0),!y&&p){if(b!=null)continue;e.removeEventListener(P,c[A],D),c[A]=null}if(b!=null)if(y)e[`__${P}`]=b,t0([P]);else{let Z=function(Y){c[S].call(this,Y)};c[A]=vc(P,e,Z,D)}else y&&(e[`__${P}`]=void 0)}else if(S==="style")fe(e,S,b);else if(S==="autofocus")Lf(e,!!b);else if(!i&&(S==="__value"||S==="value"&&b!=null))e.value=e.__value=b;else if(S==="selected"&&f)p0(e,b);else{var _=S;l||(_=Xf(_));var E=_==="defaultValue"||_==="defaultChecked";if(b==null&&!i&&!E)if(u[S]=null,_==="value"||_==="checked"){let D=e;const A=t===void 0;if(_==="value"){let P=D.defaultValue;D.removeAttribute(_),D.defaultValue=P,D.value=D.__value=A?P:null}else{let P=D.defaultChecked;D.removeAttribute(_),D.defaultChecked=P,D.checked=A?P:!1}}else e.removeAttribute(S);else E||v.includes(_)&&(i||typeof b!="string")?(e[_]=b,_ in u&&(u[_]=Vt)):typeof b!="function"&&fe(e,_,b)}}}return c}function Ai(e,t,n=[],r=[],s,a=!1,u=!1){Wl(n,r,i=>{var l=void 0,c={},f=e.nodeName==="SELECT",d=!1;if(ns(()=>{var h=t(...i.map(o)),p=h0(e,l,h,s,a,u);d&&f&&"value"in h&&kn(e,h.value);for(let y of Object.getOwnPropertySymbols(c))h[y]||nn(c[y]);for(let y of Object.getOwnPropertySymbols(h)){var x=h[y];y.description===df&&(!l||x!==l[y])&&(c[y]&&nn(c[y]),c[y]=cn(()=>l0(e,()=>x))),p[y]=x}l=p}),f){var v=e;qn(()=>{kn(v,l.value,!0),jn(v)})}d=!0})}function wu(e){return e.__attributes??={[yc]:e.nodeName.includes("-"),[xc]:e.namespaceURI===lf}}var Di=new Map;function kc(e){var t=e.getAttribute("is")||e.nodeName,n=Di.get(t);if(n)return n;Di.set(t,n=[]);for(var r,s=e,a=Element.prototype;a!==s;){r=Nl(s);for(var u in r)r[u].set&&n.push(u);s=Oo(s)}return n}function pr(e,t,n=t){var r=new WeakSet;ec(e,"input",async s=>{var a=s?e.defaultValue:e.value;if(a=$u(e)?Ru(a):a,n(a),kt!==null&&r.add(kt),await Vf(),a!==(a=t())){var u=e.selectionStart,i=e.selectionEnd;e.value=a??"",i!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(i,e.value.length))}}),m(t)==null&&e.value&&(n($u(e)?Ru(e.value):e.value),kt!==null&&r.add(kt)),Ls(()=>{var s=t();if(e===document.activeElement){var a=Va??kt;if(r.has(a))return}$u(e)&&s===Ru(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function $u(e){var t=e.type;return t==="number"||t==="range"}function Ru(e){return e===""?null:+e}function m0(e,t,n){var r=cr(e,t);r&&r.set&&(e[t]=n,xu(()=>{e[t]=null}))}function Ti(e,t){return e===t||e?.[Xn]===t}function Xr(e={},t,n,r){return qn(()=>{var s,a;return Ls(()=>{s=a,a=[],m(()=>{e!==n(...a)&&(t(e,...a),s&&Ti(n(...s),e)&&t(null,...s))})}),()=>{ts(()=>{a&&Ti(n(...a),e)&&t(null,...a)})}}),e}function Ko(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}function dt(e=!1){const t=gt,n=t.l.u;if(!n)return;let r=()=>O(t.s);if(e){let s=0,a={};const u=Ea(()=>{let i=!1;const l=t.s;for(const c in l)l[c]!==a[c]&&(a[c]=l[c],i=!0);return i&&s++,s});r=()=>o(u)}n.b.length&&zf(()=>{Fi(t,r),ha(n.b)}),go(()=>{const s=m(()=>n.m.map(Rd));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&go(()=>{Fi(t,r),ha(n.a)})}function Fi(e,t){if(e.l.s)for(const n of e.l.s)o(n);t()}function Zo(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Tr;const r=m(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const cs=[];function v0(e,t){return{subscribe:Tt(e,t).subscribe}}function Tt(e,t=Tr){let n=null;const r=new Set;function s(i){if(jo(e,i)&&(e=i,n)){const l=!cs.length;for(const c of r)c[1](),cs.push(c,e);if(l){for(let c=0;c<cs.length;c+=2)cs[c][0](cs[c+1]);cs.length=0}}}function a(i){s(i(e))}function u(i,l=Tr){const c=[i,l];return r.add(c),r.size===1&&(n=t(s,a)||Tr),i(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:u}}function Ht(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return v0(n,(u,i)=>{let l=!1;const c=[];let f=0,d=Tr;const v=()=>{if(f)return;d();const p=t(r?c[0]:c,u,i);a?u(p):d=typeof p=="function"?p:Tr},h=s.map((p,x)=>Zo(p,y=>{c[x]=y,f&=~(1<<x),l&&v()},()=>{f|=1<<x}));return l=!0,v(),function(){ha(h),d(),l=!1}})}function nt(e){let t;return Zo(e,n=>t=n)(),t}let Oa=!1,xo=Symbol();function at(e,t,n){const r=n[t]??={store:null,source:R(void 0),unsubscribe:Tr};if(r.store!==e&&!(xo in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Tr;else{var s=!0;r.unsubscribe=Zo(e,a=>{s?r.source.v=a:w(r.source,a)}),s=!1}return e&&xo in n?nt(e):o(r.source)}function Hn(){const e={};function t(){xu(()=>{for(var n in e)e[n].unsubscribe();nu(e,xo,{enumerable:!1,value:!0})})}return[e,t]}function g0(e,t,n){return e.set(n),t}function b0(e){var t=Oa;try{return Oa=!1,[e(),Oa]}finally{Oa=t}}const _0={get(e,t){if(!e.exclude.includes(t))return o(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){if(!(t in e.special)){var r=Ke;try{Tn(e.parent_effect),e.special[t]=oe({get[t](){return e.props[t]}},t,Rl)}finally{Tn(r)}}return e.special[t](n),gi(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),gi(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Fn(e,t){return new Proxy({props:e,exclude:t,special:{},version:Pr(0),parent_effect:Ke},_0)}const y0={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Hs(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let s=e.props[r];Hs(s)&&(s=s());const a=cr(s,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Hs(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const s=cr(r,t);return s&&!s.configurable&&(s.configurable=!0),s}}},has(e,t){if(t===Xn||t===Ol)return!1;for(let n of e.props)if(Hs(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Hs(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function nr(...e){return new Proxy({props:e},y0)}function oe(e,t,n,r){var s=!Ns||(n&rf)!==0,a=(n&sf)!==0,u=(n&af)!==0,i=r,l=!0,c=()=>(l&&(l=!1,i=u?m(r):r),i),f;if(a){var d=Xn in e||Ol in e;f=cr(e,t)?.set??(d&&t in e?S=>e[t]=S:void 0)}var v,h=!1;a?[v,h]=b0(()=>e[t]):v=e[t],v===void 0&&r!==void 0&&(v=c(),f&&(s&&Zd(),f(v)));var p;if(s?p=()=>{var S=e[t];return S===void 0?c():(l=!0,S)}:p=()=>{var S=e[t];return S!==void 0&&(i=void 0),S===void 0?i:S},s&&(n&Rl)===0)return p;if(f){var x=e.$$legacy;return(function(S,b){return arguments.length>0?((!s||!b||x||h)&&f(b?p():S),S):p()})}var y=!1,_=((n&nf)!==0?Ea:vt)(()=>(y=!1,p()));a&&o(_);var E=Ke;return(function(S,b){if(arguments.length>0){const D=b?o(_):s&&a?ys(S):S;return w(_,D),y=!0,i!==void 0&&(i=D),S}return rs&&y||(E.f&es)!==0?_.v:o(_)})}function Aa(e){gt===null&&vu(),Ns&&gt.l!==null?Ec(gt).m.push(e):go(()=>{const t=m(e);if(typeof t=="function")return t})}function Da(e){gt===null&&vu(),Aa(()=>()=>m(e))}function x0(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function It(){const e=gt;return e===null&&vu(),(t,n,r)=>{const s=e.s.$$events?.[t];if(s){const a=ka(s)?s.slice():[s],u=x0(t,n,r);for(const i of a)i.call(e.x,u);return!u.defaultPrevented}return!0}}function wc(e){gt===null&&vu(),gt.l===null&&Kd(),Ec(gt).a.push(e)}function Ec(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const k0="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(k0);vf();const yt="";function pt(e){return e.startsWith("/")?`${yt}${e}`:`${yt}/${e}`}const w0=/\r?\n/;function Mi(e){const t=[],n=e.split(/\n\n|\r\r|\r\n\r\n/);for(const r of n){const s=r.trim();if(!s)continue;const a=s.split(w0);let u="message",i=[],l;for(const c of a)if(c&&!c.startsWith(":")){if(c.startsWith("event:")){u=c.slice(6).trim()||"message";continue}if(c.startsWith("data:")){i.push(c.slice(5).trimStart());continue}if(c.startsWith("id:")){l=c.slice(3).trim();continue}}t.push({event:u,data:i.length?i.join(`
`):void 0,id:l})}return t}class er extends Error{status;constructor(t,n){super(n),this.status=t}}async function xt(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const s=await n.json();r=s.detail||s.message||JSON.stringify(s)}catch{}throw new er(n.status,r)}return await n.json()}async function Sc(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const s=await n.json();r=s.detail||s.message||JSON.stringify(s)}catch{}throw new er(n.status,r)}}async function E0(){return xt(pt("/api/models"))}async function S0(){return xt(pt("/api/stt/deepgram/token"),{method:"POST",body:JSON.stringify({})})}async function C0(e){const t=`/api/chat/generation/${encodeURIComponent(e)}`;return xt(pt(t))}async function Pi(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}/messages/${encodeURIComponent(t)}`;await Sc(pt(n),{method:"DELETE"})}async function A0(){return xt(pt("/api/clients/svelte/llm"))}async function Ii(e){return xt(pt("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify(e)})}async function D0(){return{system_prompt:(await xt(pt("/api/clients/svelte/llm"))).system_prompt}}async function T0(e){return{system_prompt:(await xt(pt("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify({system_prompt:e.system_prompt})})).system_prompt}}async function F0(){return xt(pt("/api/mcp/servers/"))}async function M0(e,t){const n=`/api/mcp/servers/${encodeURIComponent(e)}`;return xt(pt(n),{method:"PATCH",body:JSON.stringify(t)})}async function P0(){return xt(pt("/api/mcp/servers/refresh"),{method:"POST",body:JSON.stringify({})})}async function I0(e,t,n){const r=`/api/mcp/servers/${encodeURIComponent(e)}/clients/${encodeURIComponent(t)}?enabled=${n}`;return xt(pt(r),{method:"PATCH"})}async function N0(){return xt(pt("/api/google-auth/status"))}async function L0(e){return xt(pt("/api/google-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function O0(){return xt(pt("/api/monarch-auth/status"))}async function $0(e){return xt(pt("/api/monarch-auth/credentials"),{method:"POST",body:JSON.stringify(e)})}async function R0(){return xt(pt("/api/monarch-auth/credentials"),{method:"DELETE"})}async function z0(){return xt(pt("/api/spotify-auth/status"))}async function U0(e){return xt(pt("/api/spotify-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function B0(e,t){const n=new FormData;n.append("file",e),n.append("session_id",t);const r=await fetch(pt("/api/uploads"),{method:"POST",body:n});if(!r.ok){let s=r.statusText||"Upload failed";try{s=(await r.json())?.detail??s}catch{}throw new er(r.status||0,s)}return await r.json()}const j0=/\n\n|\r\r|\r\n\r\n/;async function q0(e,{onChunk:t,onDone:n,onError:r,onSession:s,onNotice:a,signal:u}={}){const i=await fetch(pt("/api/chat/stream"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(e),signal:u});if(!i.ok||!i.body){const d=i.statusText||"Failed to connect to chat stream",v=new er(i.status||0,d);throw r?.(v),v}const l=i.body.getReader(),c=new TextDecoder;let f="";try{for(;;){const{value:d,done:v}=await l.read();if(v)break;f+=c.decode(d,{stream:!0});const h=f.split(j0);f=h.pop()??"";for(const p of h){const x=Mi(p);for(const y of x){if(y.event==="session"&&y.data){try{const _=JSON.parse(y.data);_.session_id&&s?.(_.session_id)}catch(_){console.warn("Failed to parse session payload",_)}continue}if(y.event==="notice"){if(y.data)try{const _=JSON.parse(y.data);a?.(_)}catch(_){console.warn("Failed to parse notice payload",_,y.data)}continue}if(y.event!=="message"){t?.({choices:[],object:"event",meta:{event:y.event,data:y.data}},y);continue}if(y.data==="[DONE]"){n?.();return}if(y.data)try{const _=JSON.parse(y.data);t?.(_,y)}catch(_){console.warn("Failed to parse SSE chunk",_,y.data)}}}}if(f.trim()){const d=Mi(f);for(const v of d)if(v.event==="session"&&v.data)try{const h=JSON.parse(v.data);h.session_id&&s?.(h.session_id)}catch(h){console.warn("Failed to parse session payload",h)}else if(v.event==="notice"){if(v.data)try{const h=JSON.parse(v.data);a?.(h)}catch(h){console.warn("Failed to parse notice payload",h,v.data)}}else if(v.event==="message"){if(v.data==="[DONE]")n?.();else if(v.data)try{const h=JSON.parse(v.data);t?.(h,v)}catch(h){console.warn("Failed to parse SSE chunk",h,v.data)}}}n?.()}catch(d){if(d instanceof DOMException&&d.name==="AbortError")return;const v=d instanceof Error?d:new Error(String(d));throw r?.(v),v}finally{l.releaseLock()}}async function Gs(){const e=await xt(pt("/api/clients/svelte/presets"));return e.presets.map((t,n)=>({name:t.name,model:t.llm?.model??"unknown",is_default:n===e.active_index,has_filters:!1,created_at:t.created_at??new Date().toISOString(),updated_at:t.updated_at??new Date().toISOString()}))}async function H0(e){const t=await xt(pt("/api/clients/svelte/llm")),n={name:e.name,llm:t},s=(await xt(pt("/api/clients/svelte/presets"),{method:"POST",body:JSON.stringify(n)})).presets.find(a=>a.name===e.name);if(!s)throw new er(500,"Failed to create preset");return s}async function W0(e,t){const r=(await xt(pt("/api/clients/svelte/presets"))).presets.findIndex(i=>i.name===e);if(r===-1)throw new er(404,`Preset not found: ${e}`);const s=await xt(pt("/api/clients/svelte/llm")),u=(await xt(pt(`/api/clients/svelte/presets/${r}`),{method:"PUT",body:JSON.stringify({llm:s})})).presets[r];if(!u)throw new er(500,"Failed to save preset snapshot");return u}async function V0(e){return await Sc(pt(`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}`),{method:"DELETE"}),{deleted:!0}}async function G0(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/apply`;return(await xt(pt(t),{method:"POST",body:JSON.stringify({})})).llm}async function K0(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/set-active`,r=(await xt(pt(t),{method:"POST",body:JSON.stringify({})})).presets.find(s=>s.name===e);if(!r)throw new er(404,`Preset not found: ${e}`);return r}async function Z0(){const e=await xt(pt("/api/clients/svelte/presets"));return e.active_index!==null&&e.presets[e.active_index]?e.presets[e.active_index]:null}const Cc=[{key:"total_cost",label:"Total cost"},{key:"created_at",label:"Created"},{key:"model",label:"Model"},{key:"origin",label:"Origin"},{key:"usage",label:"Usage"},{key:"is_byok",label:"Self-hosted"},{key:"cache_discount",label:"Cache discount"},{key:"upstream_inference_cost",label:"Upstream inference cost"},{key:"cancelled",label:"Cancelled"},{key:"provider_name",label:"Provider"},{key:"latency",label:"Latency (ms)"},{key:"moderation_latency",label:"Moderation latency (ms)"},{key:"generation_time",label:"Generation time (ms)"},{key:"finish_reason",label:"Finish reason"},{key:"native_finish_reason",label:"Native finish reason"},{key:"tokens_prompt",label:"Prompt tokens"},{key:"tokens_completion",label:"Completion tokens"},{key:"native_tokens_prompt",label:"Native prompt tokens"},{key:"native_tokens_completion",label:"Native completion tokens"},{key:"native_tokens_reasoning",label:"Native reasoning tokens"},{key:"num_media_prompt",label:"Prompt media"},{key:"num_media_completion",label:"Completion media"},{key:"num_search_results",label:"Search results"}];function Ni(e){if(e==null||e==="")return{text:"â",isMultiline:!1};if(typeof e=="boolean")return{text:e?"Yes":"No",isMultiline:!1};if(typeof e=="number")return{text:Number.isFinite(e)?e.toString():String(e),isMultiline:!1};if(typeof e=="object")try{const n=JSON.stringify(e,null,2);return{text:n,isMultiline:n.includes(`
`)}}catch(n){console.warn("Failed to stringify generation detail value",n,e);const r=String(e);return{text:r,isMultiline:r.includes(`
`)}}const t=String(e);return{text:t,isMultiline:t.includes(`
`)}}const Y0="modulepreload",J0=function(e){return"/"+e},Li={},Oi=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),i=u?.nonce||u?.getAttribute("nonce");s=l(n.map(c=>{if(c=J0(c),c in Li)return;Li[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":Y0,f||(v.as="script"),v.crossOrigin="",v.href=c,i&&v.setAttribute("nonce",i),document.head.appendChild(v),f)return new Promise((h,p)=>{v.addEventListener("load",h),v.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(u){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=u,window.dispatchEvent(i),!i.defaultPrevented)throw u}return s.then(u=>{for(const i of u||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})},$i={enabled:!1,engine:null,maxResults:5,searchPrompt:"",contextSize:null};function Ri(e,t){const n={...t};if(Object.prototype.hasOwnProperty.call(e,"enabled")&&(n.enabled=!!e.enabled),Object.prototype.hasOwnProperty.call(e,"engine")){const r=e.engine;n.engine=r==="native"||r==="exa"?r:null}if(Object.prototype.hasOwnProperty.call(e,"maxResults")){const r=e.maxResults;if(r==null)n.maxResults=null;else{const s=Number(r);Number.isFinite(s)&&s>0?n.maxResults=Math.min(Math.round(s),25):n.maxResults=t.maxResults}}if(Object.prototype.hasOwnProperty.call(e,"searchPrompt")){const r=e.searchPrompt;n.searchPrompt=typeof r=="string"?r:t.searchPrompt}if(Object.prototype.hasOwnProperty.call(e,"contextSize")){const r=e.contextSize;n.contextSize=r==="low"||r==="medium"||r==="high"?r:null}return n}function X0(e=$i){const t=Tt({...e});function n(u){t.update(i=>Ri(u,i))}function r(u){t.update(i=>Ri({enabled:u},i))}function s(){t.set({...$i})}const a=Ht(t,u=>u.enabled);return{subscribe:t.subscribe,get current(){return nt(t)},update:n,setEnabled:r,reset:s,isEnabled:a}}const Ac=X0(),Q0=[{label:"GPT",keywords:["gpt","openai","o1","o3"]},{label:"Claude",keywords:["claude"]},{label:"Gemini",keywords:["gemini","palm-2","palm2"]},{label:"Grok",keywords:["grok"]},{label:"Cohere",keywords:["cohere","command"]},{label:"Nova",keywords:["nova"]},{label:"Qwen",keywords:["qwen"]},{label:"Yi",keywords:["yi"]},{label:"DeepSeek",keywords:["deepseek"]},{label:"Mistral",keywords:["mistral","mixtral"]},{label:"Llama4",keywords:["llama-4"]},{label:"Llama3",keywords:["llama-3"]},{label:"Llama2",keywords:["llama-2"]},{label:"RWKV",keywords:["rwkv"]},{label:"Router",keywords:["router"]},{label:"Media",keywords:["media"]},{label:"Other",keywords:[]}];function Dc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function Yo(e){const t=[];if(Array.isArray(e)){for(const n of e)typeof n=="string"&&n.trim()&&t.push(n.trim().toLowerCase());return t}if(typeof e=="string"&&e.trim())return e.split(/[,/]/).map(n=>n.trim().toLowerCase()).filter(Boolean);if(e&&typeof e=="object"){const n=Object.values(e);for(const r of n)t.push(...Yo(r))}return t}function Jo(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const a=n;for(const u of["input_modalities","input","modalities","inputs"])s(a[u])}return s(e.input_modalities),s(r),Array.from(t);function s(a){for(const u of Yo(a))t.add(u)}}function Xo(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const a=n;for(const i of["output_modalities","output","outputs"])s(a[i]);const u=a.modalities;u&&(s(u.output),s(u.outputs))}return s(e.output_modalities),s(r),Array.from(t);function s(a){for(const u of Yo(a))t.add(u)}}const Tc=1e6,Fc=6,ep=["prompt_price_per_million","input_price_per_million","input_token_price_per_million"],tp=["prompt_price","input_price","input_token_price"],np=["prompt","input","input_tokens","prompt_tokens"],rp=["completion_price_per_million","output_price_per_million","output_token_price_per_million"],sp=["completion_price","output_price","output_token_price"],ap=["completion","output","output_tokens","completion_tokens"];function Mc(e,t){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number(e.toFixed(t))}function Pc(e,t,n){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number((e*t).toFixed(n))}function ou(e,t){for(const n of t){if(!(n in e))continue;const r=Dc(e[n]);if(r!==null)return r}return null}function up(e){const t=[],n=s=>{s&&typeof s=="object"&&t.push(s)};n(e.pricing),e.provider&&typeof e.provider=="object"&&n(e.provider.pricing);const r=e.top_provider;return r&&typeof r=="object"&&n(r.pricing),t}function op(e,t,n,r,s){const a=ou(e,t),u=Mc(a,s);if(u!==null)return u;const i=ou(e,n),l=Pc(i,r,s);return l!==null?l:null}function ip(e,t,n,r,s){if(!e)return null;const a=e,u=ou(a,t),i=Mc(u,s);if(i!==null)return i;const l=ou(a,n),c=Pc(l,r,s);return c!==null?c:null}function Ic(e,t,n,r,s,a){const i=op(e,t,n,s,a);if(i!==null)return i;const l=[...r,...n];for(const c of up(e)){const f=ip(c,t,l,s,a);if(f!==null)return f}return null}function Nc(e){return Ic(e,ep,tp,np,Tc,Fc)}function lp(e){return Ic(e,rp,sp,ap,Tc,Fc)}function Ka(e){return Nc(e)}function ca(e){const t=[e.max_context,e.context_length,e.context_window,e.context_tokens,e.stats?.context_length];for(const n of t){const r=Dc(n);if(r!==null)return r}return null}function cp(e){return e===null?"â":e===0?"FREE":e>=100?`$${e.toFixed(0)}`:e>=10?`$${e.toFixed(1)}`:e>=1?`$${e.toFixed(2)}`:e>=.1?`$${e.toFixed(2)}`:`$${e.toFixed(3)}`}function $a(e){return e===null?"Unknown":e>=1e3?`${(e/1e3).toFixed(1)}k tokens`:`${e} tokens`}function Lc(e){const t=e.provider;if(t&&typeof t=="object"){const r=t,s=r.display_name;if(typeof s=="string"&&s.trim())return s.trim();const a=r.name??r.id??r.slug;if(typeof a=="string"&&a.trim())return a.trim()}if(typeof e.provider=="string")return e.provider.trim()||null;const n=e.id?.split("/")??[];return n.length>=2?n[n.length-2]??null:null}function Oc(e){const t=new Set,n=[];typeof e.id=="string"&&n.push(e.id.toLowerCase()),typeof e.name=="string"&&n.push(e.name.toLowerCase()),Array.isArray(e.tags)&&n.push(...e.tags.map(s=>String(s).toLowerCase()));const r=n.join(" ");for(const s of Q0)s.label!=="Other"&&s.keywords.some(a=>r.includes(a))&&t.add(s.label);return t.size===0&&t.add("Other"),Array.from(t)}function Qo(e){const t=new Set,n=[],r=e;if(n.push(r.parameters,r.supported_parameters),e.capabilities&&typeof e.capabilities=="object"){const s=e.capabilities;n.push(s.parameters,s.supports_parameters)}for(const s of n)if(s){if(Array.isArray(s)){for(const a of s){const u=zu(a);u&&t.add(u)}continue}if(typeof s=="object")for(const a of Object.keys(s)){const u=zu(a);u&&t.add(u)}if(typeof s=="string"){const a=zu(s);a&&t.add(a)}}return Array.from(t)}function $c(e){const t=e,n=[t.is_moderated,t.moderation,t.requires_moderation],r=e.capabilities;r&&typeof r=="object"&&(n.push(r.is_moderated),n.push(r.requires_moderation));const s=e.provider;s&&typeof s=="object"&&n.push(s.is_moderated);const a=t.top_provider;a&&typeof a=="object"&&n.push(a.is_moderated);const u=t.metadata;u&&typeof u=="object"&&n.push(u.is_moderated);for(const i of n)if(typeof i=="boolean")return i?"moderated":"unmoderated";return null}function zu(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function ds(){return{include:[],exclude:[]}}function ko(){return{search:"",inputModalities:ds(),outputModalities:ds(),minContext:null,minPromptPrice:null,maxPromptPrice:null,sort:"newness",series:ds(),providers:ds(),supportedParameters:ds(),moderation:ds()}}const dp={inputModalities:[],outputModalities:[],minContext:null,maxContext:null,minPromptPrice:null,maxPromptPrice:null,series:[],providers:[],supportedParameters:[],moderation:[]},fp={models:[],loading:!1,error:null,filters:ko(),facets:{...dp}};function pp(e){const t=new Set,n=new Set;let r=null,s=null,a=null,u=null;const i=new Set,l=new Set,c=new Set,f=new Set;for(const d of e){for(const y of Jo(d))t.add(y);for(const y of Xo(d))n.add(y);const v=ca(d);v!==null&&(r=r===null?v:Math.min(r,v),s=s===null?v:Math.max(s,v));const h=Ka(d);h!==null&&(a=a===null?h:Math.min(a,h),u=u===null?h:Math.max(u,h));for(const y of Oc(d))i.add(y);const p=Lc(d);p&&l.add(p);for(const y of Qo(d))c.add(y);const x=$c(d);x&&f.add(x)}return{inputModalities:Array.from(t).sort(),outputModalities:Array.from(n).sort(),minContext:r,maxContext:s,minPromptPrice:a,maxPromptPrice:u,series:Array.from(i).sort(),providers:Array.from(l).sort(),supportedParameters:Array.from(c).sort(),moderation:Array.from(f).sort()}}function ei(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t||null}function Uu(e){const t=[];for(const n of e){const r=ei(n);r&&t.push(r)}return t}function hp(e,t){return e.include.includes(t)?"include":e.exclude.includes(t)?"exclude":"neutral"}function Rc(e,t,n){const r=e.include.filter(a=>a!==t),s=e.exclude.filter(a=>a!==t);return n==="include"?{include:[...r,t],exclude:s}:n==="exclude"?{include:r,exclude:[...s,t]}:{include:r,exclude:s}}function mp(e,t,n){const r=ei(t);return r?Rc(e,r,n):e}function fs(e,t){const n=Uu(e.include),r=Uu(e.exclude);if(n.length===0&&r.length===0)return!0;const s=new Set(Uu(t));if(n.length>0){for(const a of n)if(!s.has(a))return!1}if(r.length>0){for(const a of r)if(s.has(a))return!1}return!0}function vp(e){const{models:t,filters:n}=e;if(!Array.isArray(t)||t.length===0)return[];const r=n.search.toLowerCase().split(/\s+/).filter(Boolean),s=t.filter(i=>{if(r.length>0){const v=[i.id,i.name,i.description,(i.tags??[]).join(" ")].join(" ").toLowerCase();if(!r.every(p=>v.includes(p)))return!1}if(!fs(n.inputModalities,Jo(i))||!fs(n.outputModalities,Xo(i)))return!1;const l=ca(i);if(n.minContext!==null&&(l===null||l<n.minContext))return!1;const c=Ka(i);if(n.minPromptPrice!==null&&(c===null||c<n.minPromptPrice)||n.maxPromptPrice!==null&&(c===null||c>n.maxPromptPrice)||!fs(n.series,Oc(i)))return!1;const f=Lc(i);if(!fs(n.providers,f?[f]:[])||!fs(n.supportedParameters,Qo(i)))return!1;const d=$c(i);return!!fs(n.moderation,d?[d]:[])}),a={newness:(i,l)=>{const c=Date.parse(i.created_at??"")||0;return(Date.parse(l.created_at??"")||0)-c},price:(i,l)=>{const c=Ka(i),f=Ka(l),d=c??Number.POSITIVE_INFINITY,v=f??Number.POSITIVE_INFINITY;return d===v?0:d<v?-1:1},context:(i,l)=>{const c=ca(i),f=ca(l),d=c??-1/0,v=f??-1/0;return d===v?0:v-d}},u=a[n.sort]??a.newness;return s.slice().sort(u)}function ps(e,t){const n=ei(t);if(!n)return e;const r=hp(e,n);return Rc(e,n,r==="include"?"exclude":r==="exclude"?"neutral":"include")}function gp(e,t,n,r){const s={...e};return s[t]=mp(e[t],n,r),s}function hs(e){return e===null||Number.isNaN(e)||!Number.isFinite(e)||e<0?null:e}function Cn(e){return e.include.length>0||e.exclude.length>0}function bp(e){return!!(e.search.trim()||Cn(e.inputModalities)||Cn(e.outputModalities)||Cn(e.series)||Cn(e.providers)||Cn(e.supportedParameters)||Cn(e.moderation)||e.minContext!==null||e.minPromptPrice!==null||e.maxPromptPrice!==null)}function _p(e,t,n){if(!Array.isArray(e)||e.length===0)return[];if(!n||e.some(s=>s.id===n))return e;const r=t.find(s=>s.id===n);return r?[r,...e]:e}function yp(e,t){return!Array.isArray(e)||e.length===0||!t?null:e.find(r=>r.id===t)??null}function xp(){const e=Tt({...fp});async function t(){e.update(T=>({...T,loading:!0,error:null}));try{const T=await E0(),N=Array.isArray(T.data)?T.data:[],Q=pp(N);return e.update(I=>({...I,models:N,facets:Q,loading:!1,error:null})),T}catch(T){const N=T instanceof Error?T.message:String(T);e.update(Q=>({...Q,loading:!1,error:N}))}}function n(T){e.update(N=>({...N,filters:{...N.filters,search:T}}))}function r(T){e.update(N=>({...N,filters:{...N.filters,inputModalities:ps(N.filters.inputModalities,T)}}))}function s(T){e.update(N=>({...N,filters:{...N.filters,outputModalities:ps(N.filters.outputModalities,T)}}))}function a(T){e.update(N=>({...N,filters:{...N.filters,series:ps(N.filters.series,T)}}))}function u(T){e.update(N=>({...N,filters:{...N.filters,providers:ps(N.filters.providers,T)}}))}function i(T){e.update(N=>({...N,filters:{...N.filters,supportedParameters:ps(N.filters.supportedParameters,T)}}))}function l(T){e.update(N=>({...N,filters:{...N.filters,moderation:ps(N.filters.moderation,T)}}))}function c(T,N,Q){e.update(I=>({...I,filters:gp(I.filters,T,N,Q)}))}function f(T){e.update(N=>({...N,filters:{...N.filters,minContext:hs(T)}}))}function d(T){e.update(N=>({...N,filters:{...N.filters,minPromptPrice:hs(T)}}))}function v(T){e.update(N=>({...N,filters:{...N.filters,maxPromptPrice:hs(T)}}))}function h(T){e.update(N=>({...N,filters:{...N.filters,sort:T}}))}function p(){e.update(T=>{const N=ko();return N.sort=T.filters.sort,{...T,filters:N}})}function x(){const T=nt(e).filters,N={};return Cn(T.inputModalities)&&(N.inputModalities=T.inputModalities),Cn(T.outputModalities)&&(N.outputModalities=T.outputModalities),T.minContext!==null&&(N.minContext=T.minContext),T.minPromptPrice!==null&&(N.minPromptPrice=T.minPromptPrice),T.maxPromptPrice!==null&&(N.maxPromptPrice=T.maxPromptPrice),Cn(T.series)&&(N.series=T.series),Cn(T.providers)&&(N.providers=T.providers),Cn(T.supportedParameters)&&(N.supportedParameters=T.supportedParameters),Cn(T.moderation)&&(N.moderation=T.moderation),N.sort=T.sort,N}function y(T){e.update(N=>{const Q=ko();return Q.search=N.filters.search,T.inputModalities&&(Q.inputModalities=T.inputModalities),T.outputModalities&&(Q.outputModalities=T.outputModalities),T.minContext!==void 0&&(Q.minContext=hs(T.minContext)),T.minPromptPrice!==void 0&&(Q.minPromptPrice=hs(T.minPromptPrice)),T.maxPromptPrice!==void 0&&(Q.maxPromptPrice=hs(T.maxPromptPrice)),T.series&&(Q.series=T.series),T.providers&&(Q.providers=T.providers),T.supportedParameters&&(Q.supportedParameters=T.supportedParameters),T.moderation&&(Q.moderation=T.moderation),T.sort&&(Q.sort=T.sort),{...N,filters:Q}})}const _=Ht(e,T=>T.models),E=Ht(e,T=>T.loading),S=Ht(e,T=>T.error),b=Ht(e,T=>T.filters),D=Ht(e,T=>T.facets),A=Ht(e,T=>vp(T)),P=Ht(e,T=>bp(T.filters)),Z=Ht([A,_,P],([T,N,Q])=>{const I=Q?T:N;return V=>_p(I,N,V)}),Y=Ht(_,T=>N=>yp(T,N));return{subscribe:e.subscribe,loadModels:t,setSearch:n,toggleInputModality:r,toggleOutputModality:s,toggleSeries:a,toggleProvider:u,toggleSupportedParameter:i,toggleModeration:l,setSelectionState:c,setMinContext:f,setMinPromptPrice:d,setMaxPromptPrice:v,setSort:h,resetFilters:p,getFilters:x,setFilters:y,models:_,loading:E,error:S,filters:b,facets:D,filtered:A,activeFilters:P,selectable:Z,activeFor:Y}}const Qn=xp(),Ra={loading:!1,saving:!1,applying:null,deleting:null,creating:!1,settingDefault:null,error:null,items:[],lastApplied:null,lastResult:null};function kp(){const e=Tt({...Ra});async function t(){e.set({...Ra,loading:!0});try{const c=await Gs();e.set({...Ra,loading:!1,items:c})}catch(c){const f=c instanceof Error?c.message:"Failed to load presets.";e.set({...Ra,loading:!1,error:f})}}async function n(c){const f={name:c.trim(),model_filters:Qn.getFilters()};if(!f.name)return e.update(d=>({...d,error:"Preset name is required."})),null;e.update(d=>({...d,creating:!0,error:null,lastResult:null}));try{const d=await H0(f),v=await Gs();return e.update(h=>({...h,creating:!1,error:null,items:v,lastResult:d})),d}catch(d){const v=d instanceof Error?d.message:"Failed to create preset.";return e.update(h=>({...h,creating:!1,error:v})),null}}async function r(c,f){e.update(d=>({...d,saving:!0,error:null,lastResult:null}));try{const d={...f,model_filters:Qn.getFilters()},v=await W0(c,d),h=await Gs();return e.update(p=>({...p,saving:!1,error:null,items:h,lastResult:v})),v}catch(d){const v=d instanceof Error?d.message:"Failed to save snapshot.";return e.update(h=>({...h,saving:!1,error:v})),null}}async function s(c){e.update(f=>({...f,deleting:c,error:null}));try{const f=await V0(c),d=await Gs();return e.update(v=>({...v,deleting:null,items:d})),!!f?.deleted}catch(f){const d=f instanceof Error?f.message:"Failed to delete preset.";return e.update(v=>({...v,deleting:null,error:d})),!1}}async function a(c){e.update(f=>({...f,applying:c,error:null,lastApplied:null,lastResult:null}));try{const f=await G0(c);return f?.model_filters&&Qn.setFilters(f.model_filters),e.update(d=>({...d,applying:null,lastApplied:c,lastResult:f})),f}catch(f){const d=f instanceof Error?f.message:"Failed to apply preset.";return e.update(v=>({...v,applying:null,error:d})),null}}async function u(c){e.update(f=>({...f,settingDefault:c,error:null}));try{const f=await K0(c),d=await Gs();return e.update(v=>({...v,settingDefault:null,items:d,lastResult:f})),f}catch(f){const d=f instanceof Error?f.message:"Failed to set default preset.";return e.update(v=>({...v,settingDefault:null,error:d})),null}}async function i(){try{return await Z0()}catch(c){return console.error("Failed to load default preset:",c),null}}function l(){e.update(c=>({...c,error:null}))}return{subscribe:e.subscribe,load:t,create:n,saveSnapshot:r,remove:s,apply:a,setDefault:u,loadDefault:i,clearError:l}}const Kn=kp();var wp=F('<div class="model-picker-loading svelte-1vc4gmw" aria-hidden="true"><select disabled><option>Loadingâ¦</option></select></div>'),Ep=F('<div class="web-search-loading svelte-1vc4gmw" aria-hidden="true"><button class="btn btn-ghost btn-small web-search-summary" type="button" disabled><span>Web search</span> <span class="status svelte-1vc4gmw"> </span></button></div>'),Sp=F('<button class="preset-badge applying svelte-1vc4gmw" type="button" aria-live="polite"><span class="spinner svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button>'),Cp=F('<button class="preset-badge svelte-1vc4gmw" type="button" aria-live="polite"><span class="dot svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button>'),Ap=F('<header class="topbar chat-header svelte-1vc4gmw"><div class="topbar-content svelte-1vc4gmw"><div class="controls svelte-1vc4gmw"><button class="btn btn-ghost btn-small explorer svelte-1vc4gmw" type="button">Explorer</button> <!> <!> <button class="btn btn-ghost btn-small svelte-1vc4gmw" type="button" aria-label="Model settings" title="Model settings"><span>Model</span> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.89 3.31.876 2.42 2.42a1.724 1.724 0 0 0 1.066 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.572c.89 1.543-.876 3.31-2.42 2.42a1.724 1.724 0 0 0-2.572 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.89-3.31-.876-2.42-2.42a1.724 1.724 0 0 0-1.066-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.572c-.89-1.543.876-3.31 2.42-2.42.965.557 2.185.21 2.573-1.066Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!> <div class="icon-row svelte-1vc4gmw"><button class="btn btn-ghost btn-small settings-icon mcp-btn" type="button" aria-label="MCP servers" title="MCP servers"><svg width="18" height="18" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M25 97.8528L92.8823 29.9706C102.255 20.598 117.451 20.598 126.823 29.9706V29.9706C136.196 39.3431 136.196 54.5391 126.823 63.9117L75.5581 115.177" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M76.2653 114.47L126.823 63.9117C136.196 54.5391 151.392 54.5391 160.765 63.9117L161.118 64.2652C170.491 73.6378 170.491 88.8338 161.118 98.2063L99.7248 159.6C96.6006 162.724 96.6006 167.789 99.7248 170.913L112.331 183.52" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M109.853 46.9411L59.6482 97.1457C50.2757 106.518 50.2757 121.714 59.6482 131.087V131.087C69.0208 140.459 84.2168 140.459 93.5894 131.087L143.794 80.8822" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon system-settings" type="button" aria-label="System settings" title="System settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M8 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M3 8h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon kiosk-btn" type="button" aria-label="Kiosk settings" title="Kiosk settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="4" y="2" width="16" height="12" rx="1.5" stroke="currentColor" stroke-width="1.5"></rect><path d="M12 14v4M8 22h8M8 18h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon cli-btn" type="button" aria-label="CLI settings" title="CLI settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4 17l6-6-6-6M12 19h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="btn btn-ghost btn-small" type="button">Clear</button></div></div></div></header>');function Dp(e,t){it(t,!1);const n=()=>at(Ac,"$webSearchStore",s),r=()=>at(Kn,"$presetsStore",s),[s,a]=Hn(),u=It();let i=oe(t,"selectableModels",24,()=>[]),l=oe(t,"selectedModel",8,""),c=oe(t,"modelsLoading",8,!1),f=oe(t,"modelsError",8,null),d=oe(t,"hasMessages",8,!1),v=R(null),h=R(null),p=R(!1),x=R(!1);async function y(){if(!o(v)){w(p,!0);try{const B=await Oi(()=>import("./ModelPicker-BltK9Rg4.js"),__vite__mapDeps([0,1]));w(v,B.default)}catch(B){console.error("Failed to load ModelPicker",B)}finally{w(p,!1)}}}async function _(){if(!o(h)){w(x,!0);try{const B=await Oi(()=>import("./WebSearchMenu-llg5iChw.js"),__vite__mapDeps([2,3]));w(h,B.default)}catch(B){console.error("Failed to load WebSearchMenu",B)}finally{w(x,!1)}}}Aa(()=>{y(),_()});function E(){u("openExplorer")}function S(){u("clear")}function b(B){u("modelChange",B.detail)}function D(){u("openModelSettings")}function A(){u("openSystemSettings")}function P(){u("openKioskSettings")}function Z(){u("openCliSettings")}function Y(){u("openMcpServers")}dt();var T=Ap(),N=g(T),Q=g(N),I=g(Q),V=C(I,2);{var J=B=>{var _e=Ae(),Ne=me(_e);Ei(Ne,()=>o(v),(Be,Oe)=>{Oe(Be,{get selectableModels(){return i()},get selectedModel(){return l()},get modelsLoading(){return c()},get modelsError(){return f()},$$events:{modelChange:b}})}),k(B,_e)},se=B=>{var _e=wp();K(()=>fe(_e,"data-loading",o(p))),k(B,_e)};$(V,B=>{o(v)?B(J):B(se,!1)})}var de=C(V,2);{var ae=B=>{var _e=Ae(),Ne=me(_e);Ei(Ne,()=>o(h),(Be,Oe)=>{Oe(Be,{})}),k(B,_e)},ue=B=>{var _e=Ep(),Ne=g(_e),Be=C(g(Ne),2),Oe=g(Be);K(()=>{fe(_e,"data-loading",o(x)),fe(Be,"data-enabled",(n(),m(()=>n().enabled))),X(Oe,(n(),m(()=>n().enabled?"On":"Off")))}),k(B,_e)};$(de,B=>{o(h)?B(ae):B(ue,!1)})}var L=C(de,2),U=C(L,2);{var G=B=>{var _e=Sp(),Ne=C(g(_e),4),Be=g(Ne);K(()=>{fe(_e,"title",(r(),m(()=>`Applying ${r().applying}â¦ (open system settings to manage presets)`))),fe(Ne,"title",(r(),m(()=>r().applying))),X(Be,(r(),m(()=>r().applying)))}),W("click",_e,A),k(B,_e)},ie=B=>{var _e=Ae(),Ne=me(_e);{var Be=Oe=>{var ke=Cp(),We=C(g(ke),4),he=g(We);K(()=>{fe(ke,"title",(r(),m(()=>`Active preset: ${r().lastApplied} (open system settings to manage)`))),fe(We,"title",(r(),m(()=>r().lastApplied))),X(he,(r(),m(()=>r().lastApplied)))}),W("click",ke,A),k(Oe,ke)};$(Ne,Oe=>{r(),m(()=>r().lastApplied)&&Oe(Be)},!0)}k(B,_e)};$(U,B=>{r(),m(()=>r().applying)?B(G):B(ie,!1)})}var H=C(U,2),q=g(H),z=C(q,2),le=C(z,2),xe=C(le,2),De=C(xe,2);K(()=>{L.disabled=c()||!l(),De.disabled=!d()}),W("click",I,E),W("click",L,D),W("click",q,Y),W("click",z,A),W("click",le,P),W("click",xe,Z),W("click",De,S),k(e,T),lt(),a()}/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Tp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Fp=Go("<svg><!><!></svg>");function rr(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]),r=Fn(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);it(t,!1);let s=oe(t,"name",8,void 0),a=oe(t,"color",8,"currentColor"),u=oe(t,"size",8,24),i=oe(t,"strokeWidth",8,2),l=oe(t,"absoluteStrokeWidth",8,!1),c=oe(t,"iconNode",24,()=>[]);const f=(...p)=>p.filter((x,y,_)=>!!x&&_.indexOf(x)===y).join(" ");dt();var d=Fp();Ai(d,(p,x)=>({...Tp,...r,width:u(),height:u(),stroke:a(),"stroke-width":p,class:x}),[()=>(O(l()),O(i()),O(u()),m(()=>l()?Number(i())*24/Number(u()):i())),()=>(O(s()),O(n),m(()=>f("lucide-icon","lucide",s()?`lucide-${s()}`:"",n.class)))]);var v=g(d);_t(v,1,c,zn,(p,x)=>{var y=Ff(()=>Ud(o(x),2));let _=()=>o(y)[0],E=()=>o(y)[1];var S=Ae(),b=me(S);i0(b,_,!0,(D,A)=>{Ai(D,()=>({...E()}))}),k(p,S)});var h=C(v);tn(h,t,"default",{}),k(e,d),lt()}function Mp(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];rr(e,nr({name:"brain"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Pp(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M5 21v-6"}],["path",{d:"M12 21V9"}],["path",{d:"M19 21V3"}]];rr(e,nr({name:"chart-no-axes-column-increasing"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Ip(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M20 6 9 17l-5-5"}]];rr(e,nr({name:"check"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Np(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4"}],["path",{d:"M21 14H11"}],["path",{d:"m15 10-4 4 4 4"}]];rr(e,nr({name:"clipboard-copy"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Lp(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];rr(e,nr({name:"globe"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function zi(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];rr(e,nr({name:"pencil"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Op(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}],["path",{d:"M16 16h5v5"}]];rr(e,nr({name:"refresh-ccw"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function $p(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];rr(e,nr({name:"send"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Rp(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];rr(e,nr({name:"trash-2"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function zp(e,t){const n=Fn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];rr(e,nr({name:"wrench"},()=>n,{get iconNode(){return r},children:(s,a)=>{var u=Ae(),i=me(u);tn(i,t,"default",{}),k(s,u)},$$slots:{default:!0}}))}function Up(e,t=null){let n=0,r=2;function s(c){if(typeof c=="number")r=Number.isFinite(c)&&c>0?c:2;else if(c&&typeof c=="object"&&"maxMultiplier"in c){const f=c.maxMultiplier;typeof f=="number"&&Number.isFinite(f)&&f>0&&(r=f)}}s(t);function a(){const c=e.style.height;if(e.style.height="auto",n=e.clientHeight||e.scrollHeight||0,e.style.height=c,!n){const f=getComputedStyle(e);n=parseFloat(f.lineHeight||"0")||24}}function u(){const c=Math.max(1,Math.round(n*r));e.style.height="auto";const f=e.scrollHeight,d=Math.min(f,c);e.style.height=`${d}px`,e.style.overflowY=f>c?"auto":"hidden",e.style.maxHeight=`${c}px`}function i(){u()}const l=requestAnimationFrame(()=>{a(),u()});return e.addEventListener("input",i),{update(c){s(c),a(),u()},destroy(){cancelAnimationFrame(l),e.removeEventListener("input",i),e.style.overflowY="",e.style.maxHeight=""}}}const ti="speech.settings.v1",Bp={fast:{label:"Fast speech",stt:{utteranceEndMs:1e3,endpointing:800,autoSubmitDelayMs:100}},normal:{label:"Normal speech",stt:{utteranceEndMs:1500,endpointing:1200,autoSubmitDelayMs:400}},slow:{label:"Slow speech",stt:{utteranceEndMs:2500,endpointing:2e3,autoSubmitDelayMs:800}}},jp=[{value:"nova-3-general",label:"Nova-3 General"},{value:"nova-3-medical",label:"Nova-3 Medical"},{value:"nova-2-finance",label:"Nova-2 Finance"},{value:"nova-2-conversationalai",label:"Nova-2 Conversational AI"}],qp={stt:{provider:"deepgram",model:"nova-3",interimResults:!0,vadEvents:!0,utteranceEndMs:1500,endpointing:1200,autoSubmit:!0,autoSubmitDelayMs:0,smartFormat:!0,punctuate:!0,numerals:!0,fillerWords:!1,profanityFilter:!1},updatedAt:null};function Hp(e){return JSON.parse(JSON.stringify(e))}function Vr(){return Hp(qp)}function Bu(e,t,n){return Math.min(Math.max(Math.round(e),t),n)}function kr(e,t){return typeof e=="boolean"?e:t}function ju(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function wo(e){const t=Vr(),n={stt:{...t.stt},updatedAt:t.updatedAt};if(!e||typeof e!="object")return n;const r=e,s=r.stt??r.stt;if(s&&typeof s=="object"){const u=s,i=typeof u.model=="string"||typeof u.model=="string"?u.model:null,l=i?i.trim():"";n.stt.provider="deepgram",n.stt.model=l||t.stt.model,n.stt.interimResults=kr(u.interimResults??u.interim_results,t.stt.interimResults),n.stt.vadEvents=kr(u.vadEvents??u.vad_events,t.stt.vadEvents);const c=ju(u.utteranceEndMs??u.utterance_end_ms);c!==null&&(n.stt.utteranceEndMs=Bu(c,500,5e3));const f=ju(u.endpointing);f!==null&&(n.stt.endpointing=Bu(f,300,5e3)),n.stt.autoSubmit=kr(u.autoSubmit??u.auto_submit,t.stt.autoSubmit);const d=ju(u.autoSubmitDelayMs??u.auto_submit_delay_ms);d!==null&&(n.stt.autoSubmitDelayMs=Bu(d,0,2e4)),n.stt.smartFormat=kr(u.smartFormat??u.smart_format,t.stt.smartFormat),n.stt.punctuate=kr(u.punctuate,t.stt.punctuate),n.stt.numerals=kr(u.numerals,t.stt.numerals),n.stt.fillerWords=kr(u.fillerWords??u.filler_words,t.stt.fillerWords),n.stt.profanityFilter=kr(u.profanityFilter??u.profanity_filter,t.stt.profanityFilter)}const a=r.updatedAt??r.updated_at;return n.updatedAt=typeof a=="string"&&a?a:null,n}function Ui(){if(typeof window>"u"||!window.localStorage)return Vr();try{const e=window.localStorage.getItem(ti);if(!e)return Vr();const t=JSON.parse(e);return wo(t)}catch(e){return console.warn("Failed to read speech settings from storage",e),Vr()}}function Wp(e){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(ti,JSON.stringify(e))}catch(t){console.warn("Failed to persist speech settings",t)}}function Vp(){const e=Ui(),t=Tt(e);function n(u){const i=wo(u),l={...i,stt:{...i.stt},updatedAt:new Date().toISOString()};return t.set(l),Wp(l),l}function r(u){const i=nt(t),l={...i,stt:{...i.stt},updatedAt:i.updatedAt};return u.stt&&(l.stt={...l.stt,...u.stt}),u.updatedAt!==void 0&&(l.updatedAt=u.updatedAt),n(l)}function s(){return n(Vr())}function a(){const u=Ui();t.set(u)}return typeof window<"u"&&window.addEventListener("storage",u=>{if(u.key===ti)try{const i=u.newValue?JSON.parse(u.newValue):null,l=wo(i);t.set(l)}catch(i){console.warn("Failed to synchronize speech settings from storage",i)}}),{subscribe:t.subscribe,save:n,update:r,reset:s,refresh:a,get current(){return nt(t)}}}const da=Vp(),Gp={mode:"idle",recording:!1,connecting:!1,error:null,promptText:"",promptVersion:0,keepPromptSynced:!1,pendingSubmit:null},dn=Tt({...Gp});let Za=null,Br=null,Er=null,zr=0,or="",Ya="",Ja=!1,Xa=null,Qa=null,Eo=0;function Eu(){Qa&&(clearTimeout(Qa),Qa=null),Eo++}function iu(e,t){dn.update(n=>({...n,promptText:e,promptVersion:n.promptVersion+1,keepPromptSynced:t?!0:n.keepPromptSynced}))}function Kp(){or="",Ya="",Ja=!1}function So(){Xa&&(clearTimeout(Xa),Xa=null)}function Zp(){if(Er)try{Er.close()}catch(e){console.warn("Failed to close Deepgram socket",e)}Er=null}function zc(){if(Br)try{Br.stop()}catch{}if(Br=null,Za)try{Za.getTracks().forEach(e=>e.stop())}catch{}Za=null}function Rn(e={}){zc(),Zp(),So(),dn.update(t=>({...t,recording:!1,connecting:!1,keepPromptSynced:!1,pendingSubmit:e.submitText?{text:e.submitText}:null,mode:"idle"}))}function Ks(e){dn.update(t=>({...t,error:e,recording:!1,connecting:!1,keepPromptSynced:!1,mode:"idle"}))}function Bi(e){const t=e.trim(),n=da.current,r=n?.stt.autoSubmit??!0,s=Math.max(n?.stt.autoSubmitDelayMs??0,0);if(Eu(),!t){Rn({submitText:null});return}if(r){if(s<=0){Rn({submitText:t});return}Rn(),iu(t,!1);const a=++Eo;Qa=setTimeout(()=>{a===Eo&&dn.update(u=>({...u,pendingSubmit:{text:t}}))},s)}else Rn(),iu(t,!1)}async function Yp(e){const t=nt(dn);(t.connecting||t.recording)&&Rn(),Eu();const n=da.current;if(!n){Ks("Speech settings unavailable");return}const r=++zr;Kp(),dn.set({...t,mode:e,connecting:!0,recording:!1,error:null,keepPromptSynced:!0,pendingSubmit:null});let s;try{if(s=(await S0()).access_token,!s)throw new Error("Missing Deepgram token")}catch(_){if(r!==zr)return;Rn();const E=_ instanceof Error?_.message:"Failed to get Deepgram token";Ks(E);return}let a;try{a=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}catch(_){if(r!==zr)return;Rn();const E=_ instanceof Error?_.message:"Microphone access denied";Ks(E);return}const i=["audio/ogg;codecs=opus","audio/webm;codecs=opus","audio/webm"].find(_=>{try{return MediaRecorder.isTypeSupported(_)}catch{return!1}}),l="opus",c=n.stt,f=Math.max(c.utteranceEndMs,500),d=Math.max(c.endpointing,300),h=`wss://api.deepgram.com/v1/listen?${new URLSearchParams({model:c.model,interim_results:String(c.interimResults!==!1),vad_events:String(c.vadEvents!==!1),smart_format:String(c.smartFormat!==!1),punctuate:String(c.punctuate!==!1),numerals:String(c.numerals!==!1),filler_words:String(c.fillerWords===!0),profanity_filter:String(c.profanityFilter===!0),utterance_end_ms:String(f),endpointing:String(d),encoding:l,no_delay:"false",multichannel:"false",alternatives:"1"}).toString()}`,x=s.includes(".")&&s.split(".").length>=3?["Bearer",s]:["token",s],y=new WebSocket(h,x);Er=y,Za=a,y.addEventListener("open",()=>{if(r===zr){dn.update(_=>({..._,connecting:!1,recording:!0,error:null,keepPromptSynced:!0}));try{Br=new MediaRecorder(a,i?{mimeType:i}:void 0)}catch{Ks("MediaRecorder not supported"),Rn();return}Br.addEventListener("dataavailable",async _=>{if(!(!_.data||_.data.size===0))try{const E=await _.data.arrayBuffer();Er&&Er.readyState===WebSocket.OPEN&&Er.send(E)}catch(E){console.warn("Failed to send audio chunk",E)}}),Br.addEventListener("stop",()=>{try{Er?.send(new Uint8Array)}catch{}}),Br.start(250)}}),y.addEventListener("message",_=>{if(r!==zr||typeof _.data!="string")return;let E;try{E=JSON.parse(_.data)}catch{return}Jp(E)}),y.addEventListener("error",_=>{console.warn("Deepgram socket error",_),r===zr&&(Ks("Deepgram connection error"),Rn())}),y.addEventListener("close",()=>{r===zr&&(zc(),dn.update(_=>({..._,recording:!1,connecting:!1,keepPromptSynced:!1})))})}function Jp(e,t,n){const r=e;if(r.type==="UtteranceEnd"){Ja||Bi(or||Ya),So(),Xa=setTimeout(()=>{Ja=!1},1e3);return}if(r.type!=="Results")return;const u=(r.channel?.alternatives?.[0]?.transcript??"").trim();if(u){const c=or?`${or} ${u}`.trim():u;Ya=c,iu(c,!0)}r.is_final===!0&&u&&(or=or?`${or} ${u}`.trim():u,iu(or,!0)),r.speech_final===!0&&(Ja=!0,So(),Bi(or||Ya||u))}async function Xp(){Eu();const e=nt(dn);if(e.mode==="dictation"&&(e.recording||e.connecting)){Rn(),dn.update(n=>({...n,mode:"idle",keepPromptSynced:!1}));return}dn.update(n=>({...n,mode:"dictation"})),await Yp("dictation")}function ji(){Eu(),Rn(),dn.update(e=>({...e,mode:"idle"}))}function qi(){const e=nt(dn);if(!e.pendingSubmit)return null;const t=e.pendingSubmit;return dn.update(n=>({...n,pendingSubmit:null})),t}const Uc={subscribe:dn.subscribe};function aa(e){return typeof e=="object"&&e!==null}function ir(e){if(typeof e!="string")return;const t=e.trim();return t||void 0}function Hi(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=e.trim();if(!t)return;const n=Number.parseInt(t,10);if(Number.isFinite(n))return n}}function xs(e){if(!aa(e))return null;const t=ir(e.url);if(!t)return null;const n={url:t},r=ir(e.title)??ir(e.name)??ir(e.label);r&&(n.title=r);const s=ir(e.content)??ir(e.snippet)??ir(e.text)??ir(e.description);s&&(n.content=s);const a=Hi(e.startIndex??e.start_index);a!==void 0&&(n.startIndex=a);const u=Hi(e.endIndex??e.end_index);return u!==void 0&&(n.endIndex=u),n}function Qp(e){const t=ir(e.type),n=t?t.toLowerCase():null,r=[];"url_citation"in e&&r.push(e.url_citation),"urlCitation"in e&&r.push(e.urlCitation),"citation"in e&&r.push(e.citation),"payload"in e&&r.push(e.payload),"data"in e&&r.push(e.data);for(const s of r){const a=xs(s);if(a)return a}return n==="url_citation"||n==="url-citation"?xs(e):null}function ms(e,t,n){const r=`${n.url}|${n.startIndex??""}|${n.endIndex??""}`;t.has(r)||(t.add(r),e.push(n))}function e1(e){const t=[],n=new Set,r=/\[([^\]]+)\]\(([^)]+)\)/g;let s;for(;(s=r.exec(e))!==null;){const a=s[1].trim(),u=s[2].trim();u&&!n.has(u)&&(n.add(u),t.push({url:u,title:a||void 0,startIndex:s.index,endIndex:s.index+s[0].length}))}return t}function jr(...e){const t=[],n=new Set,r=new WeakSet,s=[];function a(u){if(u!=null){if(Array.isArray(u)||aa(u)){const i=u;if(r.has(i))return;r.add(i)}s.push(u)}}for(e.forEach(a);s.length>0;){const u=s.shift();if(u==null)continue;if(Array.isArray(u)){for(const c of u){if(c==null)continue;if(Array.isArray(c)||aa(c)){a(c);continue}const f=xs(c);f&&ms(t,n,f)}continue}if(!aa(u)){const c=xs(u);c&&ms(t,n,c);continue}const i=Qp(u);if(i)ms(t,n,i);else{const c=xs(u);c&&ms(t,n,c)}a(u.meta),a(u.metadata),a(u.annotations),a(u.citations),a(u.url_citation),a(u.urlCitation),a(u.payload),a(u.data),a(u.message);const l=u.content??u.text;if(typeof l=="string"&&l.length>0){const c=e1(l);for(const f of c)ms(t,n,f)}for(const c of Object.values(u))if(c!=null)if(Array.isArray(c)||aa(c))a(c);else{const f=xs(c);f&&ms(t,n,f)}}return t}function t1(e,t){const n=e.trim(),r=[];n&&r.push({type:"text",text:n});for(const s of t)r.push({type:"image_url",image_url:{url:s.deliveryUrl},metadata:{attachment_id:s.id,display_url:s.displayUrl,mime_type:s.mimeType,size_bytes:s.sizeBytes,filename:s.metadata?.filename,session_id:s.sessionId,uploaded_at:s.uploadedAt,expires_at:s.expiresAt}});return r.length===1&&r[0].type==="text"?r[0].text:r.length>0?r:""}function Co(e){if(typeof e=="string"){const s=e;return{parts:s?[{type:"text",text:s}]:[],text:s}}const t=[],n=[];for(const s of e){if(s?.type==="text"&&typeof s.text=="string"){const a=s.text;t.push({type:"text",text:a}),n.push(a);continue}if(s?.type==="image_url"&&"image_url"in s){const a=s.image_url;if(!a||typeof a.url!="string")continue;const u=s.metadata??{},i=typeof u.display_url=="string"&&u.display_url?u.display_url:a.url,l=typeof u.attachment_id=="string"&&u.attachment_id?u.attachment_id:void 0,c=typeof u.mime_type=="string"&&u.mime_type?u.mime_type:void 0,f=typeof u.size_bytes=="number"&&Number.isFinite(u.size_bytes)?Number(u.size_bytes):void 0,d=typeof u.filename=="string"&&u.filename?u.filename:void 0,v=typeof u.session_id=="string"&&u.session_id?u.session_id:void 0,h=typeof u.uploaded_at=="string"&&u.uploaded_at?u.uploaded_at:void 0,p=typeof u.expires_at=="string"&&u.expires_at?u.expires_at:null;t.push({type:"image",url:a.url,displayUrl:i,attachmentId:l,mimeType:c,sizeBytes:f,fileName:d,sessionId:v,uploadedAt:h,expiresAt:p,metadata:s.metadata??null})}}const r=n.join(`
`).trim();return{parts:t,text:r}}function lu(e){if(e==null)return[];if(Array.isArray(e))return e.flatMap(t=>lu(t));if(typeof e=="string")return e.length>0?[{text:e}]:[];if(typeof e=="object"){const t=e,n=t.text,r=t.type,s=[];if(typeof n=="string"&&n.length>0){const u={text:n};typeof r=="string"&&r.length>0&&(u.type=r),s.push(u)}const a=["segments","segment","messages","message","content","contents","parts","steps","items"];for(const u of a){const i=t[u];i!==void 0&&s.push(...lu(i))}return s}return[]}function n1(e){if(!e||typeof e!="object")return{segments:[],hasPayload:!1};const t=e.choices;if(!Array.isArray(t))return{segments:[],hasPayload:!1};const n=[];let r=!1;for(const s of t){if(!s||typeof s!="object")continue;const a=s.delta;if(!(!a||typeof a!="object")&&"reasoning"in a){r=!0;const u=a.reasoning;n.push(...lu(u))}}return{segments:n,hasPayload:r}}function r1(e,t){const n=t.filter(u=>u.text.length>0);if(n.length===0)return e??[];if(!e||e.length===0)return n;const r=e.map(u=>u.text).join(""),s=n.map(u=>u.text).join("");if(s.startsWith(r)){const u=s.slice(r.length);if(u.length===0)return e;const i=[...e],l=i.length-1,c=n[n.length-1];return i[l]={text:`${i[l].text}${u}`,type:c.type??i[l].type},i}const a=[...e];for(const u of n)a.some(l=>l.text===u.text&&l.type===u.type)||a.push(u);return a}function Wi(e){return e?.reduce((t,n)=>t+n.text.length,0)??0}async function s1(e,t={}){const{signal:n,onSession:r,onMessageDelta:s,onMetadata:a,onToolEvent:u,onDone:i,onError:l}=t,{onNotice:c}=t;await q0(e,{signal:n,onSession:r,onDone:i,onError:l,onNotice:c,onChunk(f,d){const v=d?.event??"message";if(v==="message"){const{text:h,fragments:p}=a1(f),{segments:x,hasPayload:y}=n1(f);if(!h&&p.length===0&&x.length===0&&!y)return;s?.({text:h,fragments:p,reasoningSegments:x,hasReasoningPayload:y,chunk:f});return}if(v==="metadata"&&d?.data){try{const h=JSON.parse(d.data);a?.(h)}catch(h){console.warn("Failed to parse metadata payload",h,d.data)}return}if(v==="tool"&&d?.data)try{const h=JSON.parse(d.data);u?.(h)}catch(h){console.warn("Failed to parse tool payload",h,d.data)}}})}function a1(e){const t=[],n=[],r=e.choices??[];for(const s of r){const a=s.delta??{},u=a.content;if(typeof u=="string")u&&t.push(u);else if(Array.isArray(u))for(const l of u)l&&typeof l=="object"&&n.push(l);const i=a.images;if(Array.isArray(i))for(const l of i)l&&typeof l=="object"&&n.push(l)}return{text:t.join(""),fragments:n}}const qu={loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:null,lastSyncedModel:null,lastSavedAt:null,version:0};function u1(e){if(!e)return;const t={};for(const[n,r]of Object.entries(e))if(r!=null&&!(typeof r=="string"&&r.trim()==="")){if(Array.isArray(r)){if(r.length===0)continue;t[n]=r;continue}if(typeof r=="object"){if(Object.entries(r).length===0)continue;t[n]=r;continue}t[n]=r}return Object.keys(t).length>0?t:void 0}function o1(){const e=Tt({...qu});let t=0;async function n(){const l=nt(e);if(!l.dirty||!l.data)return l.dirty&&e.update(v=>({...v,dirty:!1})),!0;const c=l.version,f={model:l.data.model,provider:l.data.provider??null};"supports_tools"in l.data&&(f.supports_tools=l.data.supports_tools===void 0?null:l.data.supports_tools);const d=u1(l.data.parameters);d?f.parameters=d:f.parameters=null,e.update(v=>({...v,saving:!0,saveError:null}));try{const v=await Ii(f);return e.update(h=>{const p=Date.now();return h.version!==c?{...h,saving:!1,saveError:null,lastSavedAt:p,lastSyncedModel:v.model}:{...h,saving:!1,saveError:null,dirty:!1,data:v,lastSyncedModel:v.model,lastSavedAt:p}}),!0}catch(v){const h=v instanceof Error?v.message:"Failed to save model settings.";return e.update(p=>({...p,saving:!1,saveError:h})),!1}}async function r(l){const c=++t;e.set({...qu,loading:!0});try{const f=await A0();let d=f;if(l&&f.model!==l&&(d=await Ii({model:l,parameters:null,provider:null})),c!==t)return;e.set({loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:d,lastSyncedModel:d.model,lastSavedAt:Date.now(),version:0})}catch(f){if(c!==t)return;const d=f instanceof Error?f.message:"Failed to load model settings.";e.set({...qu,error:d})}}function s(l,c){e.update(f=>{if(!f.data)return f;const d={...f.data.parameters??{}};c==null?delete d[l]:d[l]=c;const v={...f.data,parameters:Object.keys(d).length>0?d:null};return{...f,data:v,dirty:!0,saveError:null,version:f.version+1}})}function a(l){e.update(c=>{if(!c.data||c.data.model===l)return c;const f={...c.data,model:l};return{...c,data:f,dirty:!0,saveError:null,version:c.version+1}})}function u(){e.update(l=>{if(!l.data)return l;const c={...l.data,parameters:null};return{...l,data:c,dirty:!0,saveError:null,version:l.version+1}})}function i(){e.update(l=>({...l,error:null,saveError:null}))}return{subscribe:e.subscribe,load:r,updateParameter:s,setModel:a,resetToDefaults:u,clearErrors:i,flushSave:n}}const Ut=o1();function i1(e){return typeof e=="object"&&e!==null}const Vi={messages:[],sessionId:null,isStreaming:!1,error:null,selectedModel:"openrouter/auto"};function Zs(e){let t=null;const n=typeof globalThis<"u"?globalThis.crypto:void 0;if(n?.randomUUID)try{t=n.randomUUID()}catch(r){console.warn("Failed to generate UUID via crypto.randomUUID",r)}if(!t&&n?.getRandomValues){const r=new Uint32Array(4);n.getRandomValues(r),t=Array.from(r,s=>s.toString(16).padStart(8,"0")).join("")}return t||(t=`${Date.now().toString(36)}${Math.random().toString(36).slice(2,12)}`),`${e}_${t.replace(/-/g,"")}`}function Bc(e,t){const n=[],r=new Set;for(const s of e){if(s.type!=="image")continue;const a=s.attachmentId??s.displayUrl??s.url;!a||r.has(a)||(r.add(a),n.push({id:s.attachmentId??a,sessionId:s.sessionId??t??"",mimeType:s.mimeType??"image/png",sizeBytes:s.sizeBytes??0,displayUrl:s.displayUrl||s.url,deliveryUrl:s.displayUrl||s.url,uploadedAt:s.uploadedAt??new Date().toISOString(),expiresAt:s.expiresAt??null,metadata:s.metadata??null}))}return n}function l1(e,t,n,r,s){if(!(Array.isArray(e)||r.length>0)){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const u=Array.isArray(e)?[...e]:[];if(!Array.isArray(e)){const c=typeof e=="string"?e:t;c&&u.push({type:"text",text:c})}if(r.length>0)u.push(...r);else if(n){const c=u[u.length-1];c&&c.type==="text"&&typeof c.text=="string"?c.text+=n:u.push({type:"text",text:n})}if(u.length===0){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const i=Co(u),l=Bc(i.parts,s);return{content:u,text:i.text,attachments:l}}function Gi(e){const t=[],n=new Set,r=e.details?.serverMessageId;if(typeof r=="number"){const s=String(r);t.push(s),n.add(s)}return e.id&&!n.has(e.id)&&t.push(e.id),t}function c1(e,t,n,r,s){const a={model:e.selectedModel,session_id:e.sessionId??void 0,messages:[{role:"user",content:t,client_message_id:r}],metadata:{client_assistant_message_id:s,client_parent_message_id:r}};if(n.enabled){const u={id:"web"};n.engine&&(u.engine=n.engine),n.maxResults!==null&&n.maxResults!==void 0&&(u.max_results=n.maxResults);const i=n.searchPrompt.trim();i&&(u.search_prompt=i),a.plugins=[u],n.contextSize&&(a.web_search_options={search_context_size:n.contextSize})}return a}function d1(){const e=Tt({...Vi});let t=null;function n(...p){for(const x of p)if(typeof x=="string"&&x)return x;return null}async function r(p){const x=p.text??"",y=(p.attachments??[]).map(I=>({...I})),_=x.trim(),E=nt(e);if(E.isStreaming&&t?.abort(),!_&&y.length===0)return;const S=Zs("user"),b=Zs("assistant"),D=t1(_,y),A=Co(D),P=y,Z=Ac.current,Y=c1(E,D,Z,S,b),T=new Date().toISOString();e.update(I=>({...I,messages:[...I.messages,{id:S,role:"user",content:D,text:A.text,attachments:P,createdAt:T,createdAtUtc:T},{id:b,role:"assistant",content:"",text:"",attachments:[],pending:!0,createdAt:null,createdAtUtc:null,details:Z.enabled?{webSearchConfig:{engine:Z.engine,maxResults:Z.maxResults,contextSize:Z.contextSize,searchPrompt:Z.searchPrompt}}:void 0}],isStreaming:!0,error:null}));const N=new AbortController;t=N;const Q=new Map;try{await s1(Y,{signal:N.signal,onSession(I){e.update(V=>({...V,sessionId:I}))},onNotice(I){if(console.log("[NOTICE] Received notice:",I),!I||typeof I!="object"){console.warn("[NOTICE] Invalid payload:",I);return}const V=I.type;console.log("[NOTICE] Notice type:",V),console.log("[NOTICE] No handler for notice type:",V)},onMessageDelta({text:I,fragments:V,reasoningSegments:J,hasReasoningPayload:se,chunk:de}){e.update(ae=>{const ue=ae.messages.map(L=>{if(L.id!==b)return L;const U=l1(L.content,L.text,I,V,ae.sessionId),G=U.attachments.length>0?U.attachments:L.attachments,ie={...L,content:U.content,text:U.text,attachments:G??[]};if(J.length>0||se){const q=L.details??{},z={...q,reasoningStatus:"streaming"};J.length>0&&(z.reasoning=r1(q.reasoning,J)),ie.details=z}const H=de?jr(de):[];if(H.length>0){let q=ie.details;q||(q=L.details?{...L.details}:{});const z=jr(q?.citations??null,H);z.length>0&&(q.citations=z,ie.details=q)}return ie});return{...ae,messages:ue}})},onMetadata(I){e.update(V=>{const J=V.messages.map(se=>{if(se.id!==b)return se;const de=se.details??{},ae=lu(I.reasoning),ue=ae.length>0;let L=de.reasoning;ue&&(L=Wi(ae)>=Wi(de.reasoning)?ae:de.reasoning??ae);const U=ue?se.pending?"streaming":"complete":de.reasoningStatus??null,G=typeof I.message_id=="number"?I.message_id:de.serverMessageId??null;let ie=de.meta??null,H=de.citations??null;if(I.meta===null)ie=null,H=null;else if(i1(I.meta)){ie=I.meta;const le=jr(I.meta,I);le.length>0&&(H=le)}else{const le=jr(I);le.length>0&&(H=le)}const q=n(I.created_at,I.created_at_utc,se.createdAt??null),z=n(I.created_at_utc,se.createdAtUtc??null);return{...se,details:{...de,model:typeof I.model=="string"?I.model:de.model??null,finishReason:typeof I.finish_reason=="string"?I.finish_reason:de.finishReason??null,reasoning:L,reasoningStatus:U,usage:I.usage&&typeof I.usage=="object"?I.usage:de.usage??null,routing:I.routing&&typeof I.routing=="object"?I.routing:de.routing??null,toolCalls:Array.isArray(I.tool_calls)?I.tool_calls:de.toolCalls??null,generationId:typeof I.generation_id=="string"?I.generation_id:de.generationId??null,serverMessageId:G,meta:ie,citations:H},createdAt:q,createdAtUtc:z}});return{...V,messages:J}})},onToolEvent(I){const V=typeof I.call_id=="string"?I.call_id:Zs("tool"),J=typeof I.status=="string"?I.status:"started",se=typeof I.name=="string"?I.name:"tool",de=I.result,ae=typeof de=="string"?de:de&&typeof de=="object"?JSON.stringify(de):null,ue=typeof I.message_id=="number"?I.message_id:null,L=I.content,U=nt(e);let G,ie,H=[];if(Array.isArray(L)){const z=Co(L);H=Bc(z.parts,U.sessionId),G=L,ie=z.text}else J==="started"?(G=`Running ${se}â¦`,ie=`Running ${se}â¦`):(G=ae??`Tool ${se} responded.`,ie=ae??`Tool ${se} responded.`);let q=Q.get(V);if(q)e.update(z=>{const le=z.messages.map(xe=>{if(xe.id!==q)return xe;const De={...xe.details??{},toolName:se,toolStatus:J,toolResult:ae??xe.details?.toolResult??null,serverMessageId:ue??xe.details?.serverMessageId??null},B=n(I.created_at,I.created_at_utc,xe.createdAt??null),_e=n(I.created_at_utc,xe.createdAtUtc??null);return{...xe,content:G,text:ie,attachments:H.length>0?H:xe.attachments??[],pending:J==="started",details:De,createdAt:B,createdAtUtc:_e??B??xe.createdAtUtc??null}});return{...z,messages:le}});else{q=Zs("tool"),Q.set(V,q);const z=new Date().toISOString(),le=n(I.created_at,I.created_at_utc,z),xe=n(I.created_at_utc,le??z);e.update(De=>({...De,messages:[...De.messages,{id:q,role:"tool",content:G,text:ie,attachments:H,pending:J==="started",details:{toolName:se,toolStatus:J,toolResult:ae??null,serverMessageId:ue},createdAt:le,createdAtUtc:xe}]}))}},onDone(){e.update(I=>{const V=I.messages.map(J=>{if(J.id!==b)return J;const se=J.details?{...J.details,reasoningStatus:J.details.reasoning?"complete":J.details.reasoningStatus??null}:void 0,de=new Date().toISOString(),ae=J.createdAt??de;return{...J,pending:!1,details:se,createdAt:ae,createdAtUtc:J.createdAtUtc??ae}});return{...I,isStreaming:!1,messages:V}})},onError(I){console.error("Chat stream error",I),e.update(V=>({...V,isStreaming:!1,error:I.message??"Unknown error",messages:V.messages.filter(J=>J.id!==b&&!(J.role==="tool"&&J.pending))}))}})}catch(I){if(I instanceof DOMException&&I.name==="AbortError")return;const V=I instanceof Error?I.message:String(I);e.update(J=>({...J,isStreaming:!1,error:V,messages:J.messages.filter(se=>se.id!==b&&!(se.role==="tool"&&se.pending))}))}finally{t=null}}function s(){t&&(t.abort(),t=null,e.update(p=>{const x=p.messages.filter(y=>!(y.role==="assistant"&&y.pending&&!y.text||y.role==="tool"&&y.pending));return{...p,isStreaming:!1,messages:x}}))}function a(){t?.abort(),t=null,e.update(p=>({...Vi,selectedModel:p.selectedModel}))}function u(p,x){const y=p.messages.findIndex(b=>b.id===x);if(y===-1)return p;const _=p.messages.slice(),E=[],[S]=_.splice(y,1);if(!S)return p;if(S.role==="assistant")for(E.push(S.id);y<_.length&&_[y].role==="tool";)_.splice(y,1);else if(S.role==="user")for(;y<_.length&&_[y].role!=="user"&&_[y].role!=="system";){const[b]=_.splice(y,1);b?.role==="assistant"&&b.id&&E.push(b.id)}return{...p,messages:_}}async function i(p,x){let y=null;const _=new Set;for(const E of x){if(E.role==="assistant"||E.role==="tool")continue;const S=Gi(E);let b=!1;for(const D of S)if(!(!D||_.has(D))){_.add(D);try{await Pi(p,D),b=!0;break}catch(A){if(A instanceof er&&A.status===404)continue;y||(y=A instanceof Error?A.message:"Failed to delete previous message.");break}}}return y}async function l(p){const x=nt(e);if(x.isStreaming)return;const y=x.messages.find(_=>_.id===p);if(y){if(x.sessionId){const _=Gi(y);let E=null;for(const S of _)try{await Pi(x.sessionId,S),E=null;break}catch(b){if(b instanceof er&&b.status===404)continue;E=b instanceof Error?b.message:"Failed to delete message.";break}E&&e.update(S=>({...S,error:E}))}e.update(_=>u(_,p))}}async function c(p){const x=nt(e),y=x.messages.findIndex(b=>b.id===p);if(y===-1)return;const _=x.messages[y];if(_.role!=="user")return;x.isStreaming&&(t?.abort(),t=null);const E=x.messages.slice(y),S=x.messages.slice(0,y);if(e.update(b=>({...b,messages:S,isStreaming:!1,error:null})),x.sessionId){const b=await i(x.sessionId,E);b&&e.update(D=>({...D,error:b}))}await r({text:_.text,attachments:(_.attachments??[]).map(b=>({...b}))})}async function f(p,x){const y=x.trim();if(!y)return;const _=nt(e),E=_.messages.findIndex(A=>A.id===p);if(E===-1)return;const S=_.messages[E];if(S.role!=="user")return;_.isStreaming&&(t?.abort(),t=null);const b=_.messages.slice(E),D=_.messages.slice(0,E);if(e.update(A=>({...A,messages:D,isStreaming:!1,error:null})),_.sessionId){const A=await i(_.sessionId,b);A&&e.update(P=>({...P,error:A}))}await r({text:y,attachments:(S.attachments??[]).map(A=>({...A}))})}function d(){e.update(p=>({...p,error:null}))}function v(p){e.update(x=>({...x,selectedModel:p}));try{Ut.clearErrors(),Ut.load(p)}catch{}}function h(){const p=nt(e);if(p.sessionId)return p.sessionId;const x=Zs("session");return e.update(y=>({...y,sessionId:x})),x}return{subscribe:e.subscribe,sendMessage:r,cancelStream:s,clearConversation:a,deleteMessage:l,retryMessage:c,editMessage:f,clearError:d,setModel:v,ensureSessionId:h}}const va=d1();var f1=F('<span class="chip-status svelte-1ct3ltt">Uploadingâ¦</span>'),p1=F('<span class="chip-status svelte-1ct3ltt"> </span>'),h1=F('<div><img alt="Attachment preview" loading="lazy" class="svelte-1ct3ltt"/> <!> <!> <button type="button" class="remove-attachment svelte-1ct3ltt" aria-label="Remove image">Ã</button></div>'),m1=F('<div class="attachment-strip svelte-1ct3ltt"></div>'),v1=F('<div class="composer-error svelte-1ct3ltt" role="alert"> </div>'),g1=F('<div class="composer-error voice svelte-1ct3ltt" role="alert"> </div>'),b1=F('<button type="button" class="stop-inline svelte-1ct3ltt"><span aria-hidden="true" class="stop-indicator svelte-1ct3ltt"></span> Stop</button>'),_1=F('<form class="composer svelte-1ct3ltt"><div class="composer-content svelte-1ct3ltt"><!> <!> <!> <div class="input-shell svelte-1ct3ltt"><button type="button" class="icon-button leading svelte-1ct3ltt" aria-label="Attach image"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 2v14M2 9h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <input class="sr-only svelte-1ct3ltt" type="file" accept="image/png,image/jpeg,image/webp,image/gif" multiple/> <textarea rows="1" class="svelte-1ct3ltt"></textarea> <div class="composer-actions svelte-1ct3ltt"><!> <button type="button" class="icon-button svelte-1ct3ltt" aria-label="Start dictation" title="Start dictation"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 3a2 2 0 0 1 2 2v4a2 2 0 1 1-4 0V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.5"></path><path d="M5 8.5a4 4 0 0 0 8 0M9 12.5V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button type="submit" class="send-button svelte-1ct3ltt" title="Send message"><span class="send-label svelte-1ct3ltt">Send</span> <!></button></div></div></div></form>');function y1(e,t){it(t,!1);const n=()=>at(Uc,"$speechState",r),[r,s]=Hn(),a=R(),u=R(),i=R(),l=R(),c=R(),f=R(),d=R(),v=R();let h=oe(t,"prompt",12,""),p=oe(t,"isStreaming",8,!1),x=oe(t,"presetAttachments",24,()=>[]);const y=It(),_=new Set(["image/png","image/jpeg","image/webp","image/gif"]),E=10*1024*1024,S=4;let b=R([]),D=R(null),A=R(null),P=R(null);function Z(){return globalThis.crypto?.randomUUID?`attachment_${globalThis.crypto.randomUUID().replace(/-/g,"")}`:`attachment_${Date.now().toString(36)}${Math.random().toString(36).slice(2,10)}`}function Y(ne){if(!(!ne||typeof ne!="string")&&ne.startsWith("blob:"))try{URL.revokeObjectURL(ne)}catch{}}function T(ne){if(ue(),!ne||ne.length===0){w(D,null);return}const ge=[];for(const be of ne){if(!be)continue;const Te=be.displayUrl??be.deliveryUrl??null;Te&&ge.push({id:be.id??Z(),file:null,previewUrl:Te,status:"ready",resource:{...be,metadata:be.metadata?{...be.metadata}:null}})}w(b,ge),w(D,null)}function N(){if(p())return;const ne=h().trim();if(o(b).some(qe=>qe.status==="uploading")){w(D,"Please wait for uploads to finish.");return}if(o(b).some(qe=>qe.status==="error")){w(D,"Remove failed uploads before sending.");return}const Te=o(b).filter(qe=>qe.status==="ready"&&qe.resource).map(qe=>qe.resource);!ne&&Te.length===0||(y("submit",{text:ne,attachments:Te}),h(""),w(D,null),ue())}function Q(ne){ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),N())}function I(){y("cancel")}function V(){p()&&n().mode!=="dictation"||n().connecting&&!n().recording&&n().mode!=="dictation"||y("startDictation")}function J(){p()||(w(D,null),o(A)?.click())}function se(ne){const ge=ne.target,be=ge.files?Array.from(ge.files):[];if(ge.value="",!be.length)return;const Te=S-o(b).length;if(Te<=0){w(D,`You can attach up to ${S} images.`);return}const qe=va.ensureSessionId(),ce=be.slice(0,Te);be.length>Te&&w(D,`Only ${S} images allowed per message.`);for(const pe of ce){if(!_.has(pe.type)){w(D,"Unsupported image format.");continue}if(pe.size>E){w(D,"Images must be 10 MB or less.");continue}const Ee=URL.createObjectURL(pe),Fe={id:Z(),file:pe,previewUrl:Ee,status:"uploading"};w(b,[...o(b),Fe]),de(Fe,qe)}}async function de(ne,ge){if(ne.file)try{const{attachment:be}=await B0(ne.file,ge);w(b,o(b).map(Te=>Te.id===ne.id?{...Te,status:"ready",resource:be}:Te))}catch(be){const Te=be instanceof Error?be.message:"Failed to upload image.";w(b,o(b).map(qe=>qe.id===ne.id?{...qe,status:"error",error:Te}:qe))}}function ae(ne){w(b,o(b).filter(ge=>ge.id===ne?(Y(ge.previewUrl),!1):!0)),o(b).length||w(D,null)}function ue(){o(b).forEach(ne=>{Y(ne.previewUrl)}),w(b,[])}Da(()=>{ue()}),ve(()=>O(h()),()=>{w(a,h().trim())}),ve(()=>o(b),()=>{w(u,o(b).some(ne=>ne.status==="uploading"))}),ve(()=>o(b),()=>{w(i,o(b).some(ne=>ne.status==="error"))}),ve(()=>o(b),()=>{w(l,o(b).some(ne=>ne.status==="ready"))}),ve(()=>(O(p()),o(u),o(i),o(a),o(l)),()=>{w(c,p()||o(u)||o(i)||!o(a)&&!o(l))}),ve(()=>(O(x()),o(P)),()=>{x()!==o(P)&&(T(x()),w(P,x()))}),ve(()=>n(),()=>{w(f,n().mode==="dictation"&&(n().recording||n().connecting))}),ve(()=>n(),()=>{w(d,n().connecting&&!n().recording)}),ve(()=>n(),()=>{w(v,n().error)}),Rt(),dt();var L=_1(),U=g(L),G=g(U);{var ie=ne=>{var ge=m1();_t(ge,5,()=>o(b),be=>be.id,(be,Te)=>{var qe=h1();let ce;var pe=g(qe),Ee=C(pe,2);{var Fe=ze=>{var je=f1();k(ze,je)};$(Ee,ze=>{o(Te),m(()=>o(Te).status==="uploading")&&ze(Fe)})}var et=C(Ee,2);{var rt=ze=>{var je=p1(),Je=g(je);K(()=>X(Je,(o(Te),m(()=>o(Te).error??"Upload failed.")))),k(ze,je)};$(et,ze=>{o(Te),m(()=>o(Te).status==="error")&&ze(rt)})}var Le=C(et,2);K(ze=>{ce=Ct(qe,1,"attachment-chip svelte-1ct3ltt",null,ce,ze),fe(pe,"src",(o(Te),m(()=>o(Te).previewUrl??o(Te).resource?.displayUrl??o(Te).resource?.deliveryUrl??"")))},[()=>({uploading:o(Te).status==="uploading",error:o(Te).status==="error"})]),W("click",Le,()=>ae(o(Te).id)),k(be,qe)}),k(ne,ge)};$(G,ne=>{o(b),m(()=>o(b).length)&&ne(ie)})}var H=C(G,2);{var q=ne=>{var ge=v1(),be=g(ge);K(()=>X(be,o(D))),k(ne,ge)};$(H,ne=>{o(D)&&ne(q)})}var z=C(H,2);{var le=ne=>{var ge=g1(),be=g(ge);K(()=>X(be,o(v))),k(ne,ge)};$(z,ne=>{o(v)&&ne(le)})}var xe=C(z,2),De=g(xe),B=C(De,2);Xr(B,ne=>w(A,ne),()=>o(A));var _e=C(B,2);qn(()=>pr(_e,h)),qn(()=>W("keydown",_e,Q)),Jr(_e,(ne,ge)=>Up?.(ne,ge),h);var Ne=C(_e,2),Be=g(Ne);{var Oe=ne=>{var ge=b1();W("click",ge,I),k(ne,ge)};$(Be,ne=>{p()&&ne(Oe)})}var ke=C(Be,2),We=C(ke,2),he=C(g(We),2);$p(he,{size:16,"aria-hidden":"true","stroke-width":2}),K(()=>{De.disabled=(O(p()),o(b),m(()=>p()||o(b).length>=S)),fe(_e,"placeholder",p()?"Waiting for responseâ¦":"Type hereâ¦"),fe(_e,"aria-disabled",p()),ke.disabled=p()&&!o(f)||o(d)&&!o(f),fe(ke,"aria-pressed",o(f)?"true":"false"),fe(ke,"data-active",o(f)?"true":"false"),We.disabled=o(c)}),W("click",De,J),W("change",B,se),W("click",ke,V),W("submit",L,Ko(N)),k(e,L),lt(),s()}var x1=F('<div><button type="button" class="model-settings-backdrop"></button> <div role="dialog" aria-modal="true" tabindex="-1"><header class="model-settings-header"><div class="model-settings-heading"><!></div> <div class="model-settings-actions"><!> <button type="button" class="btn btn-ghost btn-small">Close</button></div></header> <section><!></section> <!></div></div>');function vr(e,t){it(t,!1);let n=oe(t,"open",8,!1),r=oe(t,"labelledBy",8,null),s=oe(t,"modalClass",8,""),a=oe(t,"bodyClass",8,""),u=oe(t,"layerClass",8,""),i=oe(t,"closeLabel",8,"Close modal"),l=oe(t,"closeOnBackdrop",8,!0),c=oe(t,"focusOnOpen",8,!0),f=oe(t,"closeDisabled",8,!1);const d=It();let v=R(null),h=R(!1);function p(b){!l()||f()||b.target===b.currentTarget&&d("close")}function x(){f()||d("close")}function y(b){!n()||f()||b.key==="Escape"&&(b.preventDefault(),d("close"))}ve(()=>(O(n()),o(h),O(c()),o(v)),()=>{n()&&!o(h)?(w(h,!0),c()&&o(v)&&o(v).focus()):!n()&&o(h)&&w(h,!1)}),Rt(),dt();var _=Ae();W("keydown",au,y);var E=me(_);{var S=b=>{var D=x1(),A=g(D),P=C(A,2),Z=g(P),Y=g(Z),T=g(Y);tn(T,t,"heading",{});var N=C(Y,2),Q=g(N);tn(Q,t,"actions",{});var I=C(Q,2),V=C(Z,2),J=g(V);tn(J,t,"default",{});var se=C(V,2);tn(se,t,"footer",{}),Xr(P,de=>w(v,de),()=>o(v)),K((de,ae,ue)=>{Ct(D,1,de),fe(A,"aria-label",i()),Ct(P,1,ae),fe(P,"aria-labelledby",r()||void 0),fe(I,"aria-label",i()),I.disabled=f(),Ct(V,1,ue)},[()=>Ga((O(u()),m(()=>`model-settings-layer ${u()}`.trim()))),()=>Ga((O(s()),m(()=>`model-settings-modal ${s()}`.trim()))),()=>Ga((O(a()),m(()=>`model-settings-body ${a()}`.trim())))]),W("click",A,p),W("click",I,x),k(b,D)};$(E,b=>{n()&&b(S)})}k(e,_),lt()}var k1=F('<p class="status">Loadingâ¦</p>'),w1=F('<p class="status error"> </p>'),E1=F('<pre class="svelte-1uwhn5q"> </pre>'),S1=F('<div class="generation-detail-row svelte-1uwhn5q"><dt class="svelte-1uwhn5q"> </dt> <dd class="svelte-1uwhn5q"><!></dd></div>'),C1=F('<dl class="generation-modal-details svelte-1uwhn5q"></dl>'),A1=F('<p class="status">No details available.</p>'),D1=F('<p class="model-settings-subtitle"> </p>'),T1=F('<h2 id="generation-modal-title">Generation details</h2> <!>',1);function F1(e,t){it(t,!1);const n=It();let r=oe(t,"open",8,!1),s=oe(t,"generationId",8,null),a=oe(t,"loading",8,!1),u=oe(t,"error",8,null),i=oe(t,"data",8,null),l=oe(t,"fields",8,Cc),c=R([]);function f(){n("close")}ve(()=>(O(i()),O(l()),Ni),()=>{w(c,i()?l().map(p=>({field:p,display:Ni(i()?.[p.key])})):[])}),Rt(),dt();var d=Ae(),v=me(d);{var h=p=>{vr(p,{get open(){return r()},labelledBy:"generation-modal-title",modalClass:"generation-modal",closeLabel:"Close generation details",$$events:{close:f},children:(x,y)=>{var _=Ae(),E=me(_);{var S=D=>{var A=k1();k(D,A)},b=D=>{var A=Ae(),P=me(A);{var Z=T=>{var N=w1(),Q=g(N);K(()=>X(Q,u())),k(T,N)},Y=T=>{var N=Ae(),Q=me(N);{var I=J=>{var se=C1();_t(se,5,()=>o(c),de=>de.field.key,(de,ae)=>{var ue=S1(),L=g(ue),U=g(L),G=C(L,2),ie=g(G);{var H=z=>{var le=E1(),xe=g(le);K(()=>X(xe,(o(ae),m(()=>o(ae).display.text)))),k(z,le)},q=z=>{var le=Bn();K(()=>X(le,(o(ae),m(()=>o(ae).display.text)))),k(z,le)};$(ie,z=>{o(ae),m(()=>o(ae).display.isMultiline)?z(H):z(q,!1)})}K(()=>X(U,(o(ae),m(()=>o(ae).field.label)))),k(de,ue)}),k(J,se)},V=J=>{var se=A1();k(J,se)};$(Q,J=>{i()?J(I):J(V,!1)},!0)}k(T,N)};$(P,T=>{u()?T(Z):T(Y,!1)},!0)}k(D,A)};$(E,D=>{a()?D(S):D(b,!1)})}k(x,_)},$$slots:{default:!0,heading:(x,y)=>{var _=T1(),E=C(me(_),2);{var S=b=>{var D=D1(),A=g(D);K(()=>X(A,`ID: ${s()??""}`)),k(b,D)};$(E,b=>{s()&&b(S)})}k(x,_)}}})};$(v,p=>{r()&&p(h)})}k(e,d),lt()}var M1=F('<span class="editor-status svelte-hszu4t">Updated</span>'),P1=F('<form class="message-editor svelte-hszu4t"><div class="editor-shell svelte-hszu4t"><div class="editor-header svelte-hszu4t"><span>Edit message</span> <!></div> <textarea rows="3" placeholder="Update your message..." class="svelte-hszu4t"></textarea> <div class="editor-actions svelte-hszu4t"><button type="button" class="button secondary svelte-hszu4t">Cancel</button> <button type="submit" class="button primary svelte-hszu4t"><!></button></div></div></form>');function I1(e,t){it(t,!1);const n=R(),r=R(),s=R();let a=oe(t,"value",12,""),u=oe(t,"originalValue",8,""),i=oe(t,"saving",8,!1),l=oe(t,"disabled",8,!1);const c=It();let f=R(null);Aa(()=>{o(f)&&(o(f).focus(),o(f).setSelectionRange(0,o(f).value.length))});function d(){o(r)&&c("submit",{text:o(n)})}function v(){i()||c("cancel")}function h(T){T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),d())}ve(()=>O(a()),()=>{w(n,a().trim())}),ve(()=>(o(n),O(i()),O(l())),()=>{w(r,!!o(n)&&!i()&&!l())}),ve(()=>(o(n),O(u())),()=>{w(s,o(n)!==u().trim())}),Rt(),dt();var p=P1(),x=g(p),y=g(x),_=C(g(y),2);{var E=T=>{var N=M1();k(T,N)};$(_,T=>{o(s)&&T(E)})}var S=C(y,2);Xr(S,T=>w(f,T),()=>o(f));var b=C(S,2),D=g(b),A=C(D,2),P=g(A);{var Z=T=>{var N=Bn("Sendingâ¦");k(T,N)},Y=T=>{var N=Bn("Save & Send");k(T,N)};$(P,T=>{i()?T(Z):T(Y,!1)})}K(()=>{S.disabled=i()||l(),D.disabled=i(),A.disabled=!o(r)}),pr(S,a),W("keydown",S,h),W("click",D,v),W("submit",p,Ko(d)),k(e,p),lt()}const Ki={open:!1,messageId:null,citations:[]};function jc(){const{subscribe:e,set:t,update:n}=Tt(Ki);function r(a,u){t({open:!0,messageId:a,citations:u})}function s(){t(Ki)}return{subscribe:e,openWithCitations:r,close:s}}jc();const Hu={open:!1,messageId:null,segments:[],status:null};function N1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n],s=t[n];if(r.text!==s.text||r.type!==s.type)return!1}return!0}function L1(){const{subscribe:e,set:t,update:n}=Tt(Hu);function r(i,l,c){t({open:!0,messageId:i,segments:l??[],status:c??null})}function s(i){r(i.id,i.details?.reasoning,i.details?.reasoningStatus)}function a(){t(Hu)}function u(i){n(l=>{if(!l.open||!l.messageId)return l;const c=i.find(v=>v.id===l.messageId);if(!c)return Hu;const f=c.details?.reasoning??[],d=c.details?.reasoningStatus??null;return N1(f,l.segments)&&d===l.status?l:{...l,segments:f,status:d}})}return{subscribe:e,openWithDetails:r,openForMessage:s,close:a,syncFromMessages:u}}const qc="tool",O1=["prompt_tokens","input_tokens","prompt","input","promptTokens","inputTokens"],$1=["completion_tokens","output_tokens","completion","output","completionTokens","outputTokens"],R1=["total_tokens","total","totalTokens"];function z1(e,t=qc){const n=[],r={},s={};for(let a=0;a<e.length;a+=1){const u=e[a];if(s[u.id]=a,u.role==="assistant"){const i=u.details?.toolCalls,l=Array.isArray(i)&&i.length>0;let c=0,f=a+1;for(;Hc(e[f],t);)c+=1,f+=1;const d=l?i.length:0,v=Math.max(d,c),h=v>0,p=U1(u.details?.usage);r[u.id]={used:h,count:v,tokens:p}}u.role!==t&&n.push(u)}return{visibleMessages:n,assistantToolUsage:r,messageIndexMap:s}}function Zi(e,t,n,r=qc){const s=t[n];if(typeof s!="number")return[];const a=e[s];if(!a||a.role!=="assistant")return[];const u=[],i=Array.isArray(a.details?.toolCalls)?a.details?.toolCalls:[];let l=s+1;for(;Hc(e[l],r);){const c=e[l],f=c.details??{},d=i[u.length],h=(typeof f?.toolName=="string"?f.toolName:null)??Wu(d)??"Tool",p=typeof f?.toolStatus=="string"?f.toolStatus:null,x=typeof f?.toolResult=="string"?f.toolResult:null,y=typeof c.content=="string"?c.content:null,_=x??y??Vu(d),E=Gu(d);u.push({id:c.id,name:h,status:p,input:E,result:_}),l+=1}return u.length===0&&i.length>0?i.forEach((c,f)=>{u.push({id:`${a.id}-metadata-${f}`,name:Wu(c)??`Tool ${f+1}`,status:null,input:Gu(c),result:Vu(c)})}):u.length>0&&i.length>0&&u.forEach((c,f)=>{const d=i[f];d&&((!c.name||c.name==="Tool")&&(c.name=Wu(d)??c.name),c.input||(c.input=Gu(d)),c.result||(c.result=Vu(d)))}),u}function Hc(e,t){return e?.role===t}function Wu(e){if(!e)return null;const t=e.name;if(typeof t=="string"&&t.trim().length>0)return t;const n=e.function;if(n&&typeof n=="object"){const r=n.name;if(typeof r=="string"&&r.trim().length>0)return r}return null}function Vu(e){if(!e)return null;const t=e.result;if(typeof t=="string")return t;if(t&&typeof t=="object")try{return JSON.stringify(t,null,2)}catch(r){console.warn("Failed to stringify tool result",r)}const n=e.function;if(n&&typeof n=="object"){const r=n.arguments;if(typeof r=="string")return r;if(r&&typeof r=="object")try{return JSON.stringify(r,null,2)}catch(s){console.warn("Failed to stringify tool arguments",s)}}return null}function Gu(e){if(!e)return null;const t=e.arguments,n=Yi(t);if(n)return n;const r=e.function;if(r&&typeof r=="object"){const s=Yi(r.arguments);if(s)return s}return null}function U1(e){if(!e||typeof e!="object")return null;const t=e,n=Ku(t,O1),r=Ku(t,$1);let s=Ku(t,R1);return s==null&&(n!=null||r!=null)&&(s=(n??0)+(r??0)),n==null&&r==null&&s==null?null:{inputTokens:n,outputTokens:r,totalTokens:s}}function Ku(e,t){for(const n of t){if(!(n in e))continue;const r=B1(e[n]);if(r!=null)return r}return null}function B1(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function Yi(e){if(typeof e=="string"){const t=e.trim();if(!t)return null;try{const n=JSON.parse(t);return typeof n=="string"?n:JSON.stringify(n,null,2)}catch{return t}}if(e&&typeof e=="object")try{return JSON.stringify(e,null,2)}catch(t){console.warn("Failed to stringify tool arguments",t,e)}return null}const Ji={open:!1,messageId:null,tools:[]};function j1(){const{subscribe:e,set:t,update:n}=Tt(Ji);function r(i,l){t({open:!0,messageId:i,tools:l})}function s(i,l,c,f){const d=Zi(i,l,c,f);r(c,d)}function a(){t(Ji)}function u(i,l,c){n(f=>{if(!f.open||!f.messageId)return f;const d=Zi(i,l,f.messageId,c);return d.length===f.tools.length&&d.every((h,p)=>{const x=f.tools[p];return x?.id===h.id&&x?.name===h.name&&x?.status===h.status&&x?.input===h.input&&x?.result===h.result})?f:{...f,tools:d}})}return{subscribe:e,openWithEntries:r,openForMessage:s,close:a,syncEntries:u}}const Xi={open:!1,messageId:null,details:null};function q1(){const{subscribe:e,set:t,update:n}=Tt(Xi);function r(u,i){t({open:!0,messageId:u,details:i??{engine:null,maxResults:null,contextSize:null,searchPrompt:null}})}function s(u){const i=u.details?.webSearchConfig;if(i&&typeof i=="object"){const l={engine:i.engine??null,maxResults:i.maxResults??null,contextSize:i.contextSize??null,searchPrompt:i.searchPrompt??null};r(u.id,l)}else r(u.id,null)}function a(){t(Xi)}return{subscribe:e,openWithDetails:r,openForMessage:s,close:a}}var H1=F('<p class="status svelte-15rpl30">No web citations found.</p>'),W1=F('<h3 class="citations-modal-title svelte-15rpl30"> </h3>'),V1=F('<p class="citations-modal-content svelte-15rpl30"> </p>'),G1=F("<span> </span>"),K1=F("<span> </span>"),Z1=F('<div class="citations-modal-meta svelte-15rpl30"><!> <!></div>'),Y1=F('<li class="citations-modal-item svelte-15rpl30"><div class="citations-modal-header svelte-15rpl30"><span class="citations-modal-number svelte-15rpl30"></span> <a class="citations-modal-link svelte-15rpl30" target="_blank" rel="noreferrer">Visit source</a></div> <!> <div class="citations-modal-url svelte-15rpl30"> </div> <!> <!></li>'),J1=F('<ul class="citations-modal-list svelte-15rpl30"></ul>'),X1=F('<p class="model-settings-subtitle"> </p>'),Q1=F('<h2 id="citations-modal-title">Web Citations</h2> <!>',1);function eh(e,t){it(t,!1);const n=It();let r=oe(t,"open",8,!1),s=oe(t,"messageId",8,null),a=oe(t,"citations",24,()=>[]);function u(){n("close")}dt();var i=Ae(),l=me(i);{var c=f=>{vr(f,{get open(){return r()},labelledBy:"citations-modal-title",modalClass:"citations-modal",bodyClass:"citations-modal-body",closeLabel:"Close web citations",$$events:{close:u},children:(d,v)=>{var h=Ae(),p=me(h);{var x=_=>{var E=H1();k(_,E)},y=_=>{var E=J1();_t(E,5,a,zn,(S,b,D)=>{var A=Y1(),P=g(A),Z=g(P);Z.textContent=`Citation ${D+1}`;var Y=C(Z,2),T=C(P,2);{var N=ae=>{var ue=W1(),L=g(ue);K(()=>X(L,(o(b),m(()=>o(b).title)))),k(ae,ue)};$(T,ae=>{o(b),m(()=>o(b).title)&&ae(N)})}var Q=C(T,2),I=g(Q),V=C(Q,2);{var J=ae=>{var ue=V1(),L=g(ue);K(()=>X(L,(o(b),m(()=>o(b).content)))),k(ae,ue)};$(V,ae=>{o(b),m(()=>o(b).content)&&ae(J)})}var se=C(V,2);{var de=ae=>{var ue=Z1(),L=g(ue);{var U=H=>{var q=G1(),z=g(q);K(()=>X(z,`Start: ${o(b),m(()=>o(b).startIndex)??""}`)),k(H,q)};$(L,H=>{o(b),m(()=>o(b).startIndex!==void 0)&&H(U)})}var G=C(L,2);{var ie=H=>{var q=K1(),z=g(q);K(()=>X(z,`End: ${o(b),m(()=>o(b).endIndex)??""}`)),k(H,q)};$(G,H=>{o(b),m(()=>o(b).endIndex!==void 0)&&H(ie)})}k(ae,ue)};$(se,ae=>{o(b),m(()=>o(b).startIndex!==void 0||o(b).endIndex!==void 0)&&ae(de)})}K(()=>{fe(Y,"href",(o(b),m(()=>o(b).url))),X(I,(o(b),m(()=>o(b).url)))}),k(S,A)}),k(_,E)};$(p,_=>{O(a()),m(()=>a().length===0)?_(x):_(y,!1)})}k(d,h)},$$slots:{default:!0,heading:(d,v)=>{var h=Q1(),p=C(me(h),2);{var x=y=>{var _=X1(),E=g(_);K(()=>X(E,`Message ID: ${s()??""}`)),k(y,_)};$(p,y=>{s()&&y(x)})}k(d,h)}}})};$(l,f=>{r()&&f(c)})}k(e,i),lt()}const Qi='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path><path d="M16 4h2a2 2 0 0 1 2 2v4"></path><path d="M21 14H11"></path><path d="m15 10-4 4 4 4"></path></svg>',th='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>',nh=2e3,rh="copy-code-button",el="copy-code-block";function sh(e){e.classList.add(el);const t=document.createElement("button");t.type="button",t.className=rh,t.setAttribute("aria-label","Copy code"),t.setAttribute("title","Copy code"),t.innerHTML=Qi;let n=null;const r=async()=>{const a=e.querySelector("code")?.textContent??e.textContent??"";if(a){if(!navigator?.clipboard?.writeText){console.warn("Clipboard API unavailable; cannot copy code block");return}try{await navigator.clipboard.writeText(a)}catch(u){console.error("Failed to copy code block",u);return}n!==null&&window.clearTimeout(n),t.classList.add("copied"),t.setAttribute("aria-label","Code copied"),t.innerHTML=th,n=window.setTimeout(()=>{e.isConnected&&(t.classList.remove("copied"),t.setAttribute("aria-label","Copy code"),t.innerHTML=Qi,n=null)},nh)}};return t.addEventListener("click",r),e.appendChild(t),{cleanup:()=>{t.removeEventListener("click",r),n!==null&&window.clearTimeout(n),t.remove(),e.classList.remove(el)}}}function tl(e,t){e.querySelectorAll("pre").forEach(r=>{t.has(r)||t.set(r,sh(r))}),Array.from(t.keys()).forEach(r=>{if(!e.contains(r)){const s=t.get(r);s&&(s.cleanup(),t.delete(r))}})}function Ao(e){const t=new Map,n=new MutationObserver(()=>{tl(e,t)});return n.observe(e,{childList:!0,subtree:!0}),tl(e,t),{destroy:()=>{n.disconnect(),Array.from(t.values()).forEach(r=>r.cleanup()),t.clear()}}}const nl={};function ah(e){let t=nl[e];if(t)return t;t=nl[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Ts(e,t){typeof t!="string"&&(t=Ts.defaultChars);const n=ah(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let s="";for(let a=0,u=r.length;a<u;a+=3){const i=parseInt(r.slice(a+1,a+3),16);if(i<128){s+=n[i];continue}if((i&224)===192&&a+3<u){const l=parseInt(r.slice(a+4,a+6),16);if((l&192)===128){const c=i<<6&1984|l&63;c<128?s+="ï¿½ï¿½":s+=String.fromCharCode(c),a+=3;continue}}if((i&240)===224&&a+6<u){const l=parseInt(r.slice(a+4,a+6),16),c=parseInt(r.slice(a+7,a+9),16);if((l&192)===128&&(c&192)===128){const f=i<<12&61440|l<<6&4032|c&63;f<2048||f>=55296&&f<=57343?s+="ï¿½ï¿½ï¿½":s+=String.fromCharCode(f),a+=6;continue}}if((i&248)===240&&a+9<u){const l=parseInt(r.slice(a+4,a+6),16),c=parseInt(r.slice(a+7,a+9),16),f=parseInt(r.slice(a+10,a+12),16);if((l&192)===128&&(c&192)===128&&(f&192)===128){let d=i<<18&1835008|l<<12&258048|c<<6&4032|f&63;d<65536||d>1114111?s+="ï¿½ï¿½ï¿½ï¿½":(d-=65536,s+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),a+=9;continue}}s+="ï¿½"}return s})}Ts.defaultChars=";/?:@&=+$,#";Ts.componentChars="";const rl={};function uh(e){let t=rl[e];if(t)return t;t=rl[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Ta(e,t,n){typeof t!="string"&&(n=t,t=Ta.defaultChars),typeof n>"u"&&(n=!0);const r=uh(t);let s="";for(let a=0,u=e.length;a<u;a++){const i=e.charCodeAt(a);if(n&&i===37&&a+2<u&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3))){s+=e.slice(a,a+3),a+=2;continue}if(i<128){s+=r[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&a+1<u){const l=e.charCodeAt(a+1);if(l>=56320&&l<=57343){s+=encodeURIComponent(e[a]+e[a+1]),a++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[a])}return s}Ta.defaultChars=";/?:@&=+$,-_.!~*'()#";Ta.componentChars="-_.!~*'()";function ni(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function cu(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const oh=/^([a-z0-9.+-]+:)/i,ih=/:[0-9]*$/,lh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ch=["<",">",'"',"`"," ","\r",`
`,"	"],dh=["{","}","|","\\","^","`"].concat(ch),fh=["'"].concat(dh),sl=["%","/","?",";","#"].concat(fh),al=["/","?","#"],ph=255,ul=/^[+a-z0-9A-Z_-]{0,63}$/,hh=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ol={javascript:!0,"javascript:":!0},il={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ri(e,t){if(e&&e instanceof cu)return e;const n=new cu;return n.parse(e,t),n}cu.prototype.parse=function(e,t){let n,r,s,a=e;if(a=a.trim(),!t&&e.split("#").length===1){const c=lh.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let u=oh.exec(a);if(u&&(u=u[0],n=u.toLowerCase(),this.protocol=u,a=a.substr(u.length)),(t||u||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(u&&ol[u])&&(a=a.substr(2),this.slashes=!0)),!ol[u]&&(s||u&&!il[u])){let c=-1;for(let p=0;p<al.length;p++)r=a.indexOf(al[p]),r!==-1&&(c===-1||r<c)&&(c=r);let f,d;c===-1?d=a.lastIndexOf("@"):d=a.lastIndexOf("@",c),d!==-1&&(f=a.slice(0,d),a=a.slice(d+1),this.auth=f),c=-1;for(let p=0;p<sl.length;p++)r=a.indexOf(sl[p]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=a.length),a[c-1]===":"&&c--;const v=a.slice(0,c);a=a.slice(c),this.parseHost(v),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let x=0,y=p.length;x<y;x++){const _=p[x];if(_&&!_.match(ul)){let E="";for(let S=0,b=_.length;S<b;S++)_.charCodeAt(S)>127?E+="x":E+=_[S];if(!E.match(ul)){const S=p.slice(0,x),b=p.slice(x+1),D=_.match(hh);D&&(S.push(D[1]),b.unshift(D[2])),b.length&&(a=b.join(".")+a),this.hostname=S.join(".");break}}}}this.hostname.length>ph&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const i=a.indexOf("#");i!==-1&&(this.hash=a.substr(i),a=a.slice(0,i));const l=a.indexOf("?");return l!==-1&&(this.search=a.substr(l),a=a.slice(0,l)),a&&(this.pathname=a),il[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};cu.prototype.parseHost=function(e){let t=ih.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const mh=Object.freeze(Object.defineProperty({__proto__:null,decode:Ts,encode:Ta,format:ni,parse:ri},Symbol.toStringTag,{value:"Module"})),Wc=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Vc=/[\0-\x1F\x7F-\x9F]/,vh=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,si=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Gc=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Kc=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,gh=Object.freeze(Object.defineProperty({__proto__:null,Any:Wc,Cc:Vc,Cf:vh,P:si,S:Gc,Z:Kc},Symbol.toStringTag,{value:"Module"})),bh=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(e=>e.charCodeAt(0))),_h=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(e=>e.charCodeAt(0)));var Zu;const yh=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),xh=(Zu=String.fromCodePoint)!==null&&Zu!==void 0?Zu:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function kh(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=yh.get(e))!==null&&t!==void 0?t:e}var Kt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Kt||(Kt={}));const wh=32;var Dr;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Dr||(Dr={}));function Do(e){return e>=Kt.ZERO&&e<=Kt.NINE}function Eh(e){return e>=Kt.UPPER_A&&e<=Kt.UPPER_F||e>=Kt.LOWER_A&&e<=Kt.LOWER_F}function Sh(e){return e>=Kt.UPPER_A&&e<=Kt.UPPER_Z||e>=Kt.LOWER_A&&e<=Kt.LOWER_Z||Do(e)}function Ch(e){return e===Kt.EQUALS||Sh(e)}var Wt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Wt||(Wt={}));var Sr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Sr||(Sr={}));class Ah{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Wt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Sr.Strict}startEntity(t){this.decodeMode=t,this.state=Wt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Wt.EntityStart:return t.charCodeAt(n)===Kt.NUM?(this.state=Wt.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Wt.NamedEntity,this.stateNamedEntity(t,n));case Wt.NumericStart:return this.stateNumericStart(t,n);case Wt.NumericDecimal:return this.stateNumericDecimal(t,n);case Wt.NumericHex:return this.stateNumericHex(t,n);case Wt.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|wh)===Kt.LOWER_X?(this.state=Wt.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Wt.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const a=r-n;this.result=this.result*Math.pow(s,a)+parseInt(t.substr(n,a),s),this.consumed+=a}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Do(s)||Eh(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Do(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Kt.SEMI)this.consumed+=1;else if(this.decodeMode===Sr.Strict)return 0;return this.emitCodePoint(kh(this.result),this.consumed),this.errors&&(t!==Kt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],a=(s&Dr.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const u=t.charCodeAt(n);if(this.treeIndex=Dh(r,s,this.treeIndex+Math.max(1,a),u),this.treeIndex<0)return this.result===0||this.decodeMode===Sr.Attribute&&(a===0||Ch(u))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],a=(s&Dr.VALUE_LENGTH)>>14,a!==0){if(u===Kt.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Sr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&Dr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~Dr.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case Wt.NamedEntity:return this.result!==0&&(this.decodeMode!==Sr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Wt.NumericDecimal:return this.emitNumericEntity(0,2);case Wt.NumericHex:return this.emitNumericEntity(0,3);case Wt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Wt.EntityStart:return 0}}}function Zc(e){let t="";const n=new Ah(e,r=>t+=xh(r));return function(s,a){let u=0,i=0;for(;(i=s.indexOf("&",i))>=0;){t+=s.slice(u,i),n.startEntity(a);const c=n.write(s,i+1);if(c<0){u=i+n.end();break}u=i+c,i=c===0?u+1:u}const l=t+s.slice(u);return t="",l}}function Dh(e,t,n,r){const s=(t&Dr.BRANCH_LENGTH)>>7,a=t&Dr.JUMP_TABLE;if(s===0)return a!==0&&r===a?n:-1;if(a){const l=r-a;return l<0||l>=s?-1:e[n+l]-1}let u=n,i=u+s-1;for(;u<=i;){const l=u+i>>>1,c=e[l];if(c<r)u=l+1;else if(c>r)i=l-1;else return e[l+s]}return-1}const Th=Zc(bh);Zc(_h);function Yc(e,t=Sr.Legacy){return Th(e,t)}function Fh(e){return Object.prototype.toString.call(e)}function ai(e){return Fh(e)==="[object String]"}const Mh=Object.prototype.hasOwnProperty;function Ph(e,t){return Mh.call(e,t)}function Su(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function Jc(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function ui(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function du(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Xc=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Ih=/&([a-z#][a-z0-9]{1,31});/gi,Nh=new RegExp(Xc.source+"|"+Ih.source,"gi"),Lh=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Oh(e,t){if(t.charCodeAt(0)===35&&Lh.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return ui(r)?du(r):e}const n=Yc(e);return n!==e?n:e}function $h(e){return e.indexOf("\\")<0?e:e.replace(Xc,"$1")}function Fs(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Nh,function(t,n,r){return n||Oh(t,r)})}const Rh=/[&<>"]/,zh=/[&<>"]/g,Uh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Bh(e){return Uh[e]}function Ir(e){return Rh.test(e)?e.replace(zh,Bh):e}const jh=/[.?*+^$[\]\\(){}|-]/g;function qh(e){return e.replace(jh,"\\$&")}function wt(e){switch(e){case 9:case 32:return!0}return!1}function ga(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ba(e){return si.test(e)||Gc.test(e)}function _a(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Cu(e){return e=e.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(e=e.replace(/áº/g,"Ã")),e.toLowerCase().toUpperCase()}const Hh={mdurl:mh,ucmicro:gh},Wh=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Jc,assign:Su,escapeHtml:Ir,escapeRE:qh,fromCodePoint:du,has:Ph,isMdAsciiPunct:_a,isPunctChar:ba,isSpace:wt,isString:ai,isValidEntityCode:ui,isWhiteSpace:ga,lib:Hh,normalizeReference:Cu,unescapeAll:Fs,unescapeMd:$h},Symbol.toStringTag,{value:"Module"}));function Vh(e,t,n){let r,s,a,u;const i=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<i;){if(a=e.src.charCodeAt(e.pos),a===93&&(r--,r===0)){s=!0;break}if(u=e.pos,e.md.inline.skipToken(e),a===91){if(u===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return s&&(c=e.pos),e.pos=l,c}function Gh(e,t,n){let r,s=t;const a={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(r=e.charCodeAt(s),r===10||r===60)return a;if(r===62)return a.pos=s+1,a.str=Fs(e.slice(t+1,s)),a.ok=!0,a;if(r===92&&s+1<n){s+=2;continue}s++}return a}let u=0;for(;s<n&&(r=e.charCodeAt(s),!(r===32||r<32||r===127));){if(r===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(r===40&&(u++,u>32))return a;if(r===41){if(u===0)break;u--}s++}return t===s||u!==0||(a.str=Fs(e.slice(t,s)),a.pos=s,a.ok=!0),a}function Kh(e,t,n,r){let s,a=t;const u={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)u.str=r.str,u.marker=r.marker;else{if(a>=n)return u;let i=e.charCodeAt(a);if(i!==34&&i!==39&&i!==40)return u;t++,a++,i===40&&(i=41),u.marker=i}for(;a<n;){if(s=e.charCodeAt(a),s===u.marker)return u.pos=a+1,u.str+=Fs(e.slice(t,a)),u.ok=!0,u;if(s===40&&u.marker===41)return u;s===92&&a+1<n&&a++,a++}return u.can_continue=!0,u.str+=Fs(e.slice(t,a)),u}const Zh=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Gh,parseLinkLabel:Vh,parseLinkTitle:Kh},Symbol.toStringTag,{value:"Module"})),sr={};sr.code_inline=function(e,t,n,r,s){const a=e[t];return"<code"+s.renderAttrs(a)+">"+Ir(a.content)+"</code>"};sr.code_block=function(e,t,n,r,s){const a=e[t];return"<pre"+s.renderAttrs(a)+"><code>"+Ir(e[t].content)+`</code></pre>
`};sr.fence=function(e,t,n,r,s){const a=e[t],u=a.info?Fs(a.info).trim():"";let i="",l="";if(u){const f=u.split(/(\s+)/g);i=f[0],l=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(a.content,i,l)||Ir(a.content):c=Ir(a.content),c.indexOf("<pre")===0)return c+`
`;if(u){const f=a.attrIndex("class"),d=a.attrs?a.attrs.slice():[];f<0?d.push(["class",n.langPrefix+i]):(d[f]=d[f].slice(),d[f][1]+=" "+n.langPrefix+i);const v={attrs:d};return`<pre><code${s.renderAttrs(v)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(a)}>${c}</code></pre>
`};sr.image=function(e,t,n,r,s){const a=e[t];return a.attrs[a.attrIndex("alt")][1]=s.renderInlineAsText(a.children,n,r),s.renderToken(e,t,n)};sr.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};sr.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};sr.text=function(e,t){return Ir(e[t].content)};sr.html_block=function(e,t){return e[t].content};sr.html_inline=function(e,t){return e[t].content};function Os(){this.rules=Su({},sr)}Os.prototype.renderAttrs=function(t){let n,r,s;if(!t.attrs)return"";for(s="",n=0,r=t.attrs.length;n<r;n++)s+=" "+Ir(t.attrs[n][0])+'="'+Ir(t.attrs[n][1])+'"';return s};Os.prototype.renderToken=function(t,n,r){const s=t[n];let a="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(a+=`
`),a+=(s.nesting===-1?"</":"<")+s.tag,a+=this.renderAttrs(s),s.nesting===0&&r.xhtmlOut&&(a+=" /");let u=!1;if(s.block&&(u=!0,s.nesting===1&&n+1<t.length)){const i=t[n+1];(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===s.tag)&&(u=!1)}return a+=u?`>
`:">",a};Os.prototype.renderInline=function(e,t,n){let r="";const s=this.rules;for(let a=0,u=e.length;a<u;a++){const i=e[a].type;typeof s[i]<"u"?r+=s[i](e,a,t,n,this):r+=this.renderToken(e,a,t)}return r};Os.prototype.renderInlineAsText=function(e,t,n){let r="";for(let s=0,a=e.length;s<a;s++)switch(e[s].type){case"text":r+=e[s].content;break;case"image":r+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":r+=e[s].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Os.prototype.render=function(e,t,n){let r="";const s=this.rules;for(let a=0,u=e.length;a<u;a++){const i=e[a].type;i==="inline"?r+=this.renderInline(e[a].children,t,n):typeof s[i]<"u"?r+=s[i](e,a,t,n,this):r+=this.renderToken(e,a,t,n)}return r};function gn(){this.__rules__=[],this.__cache__=null}gn.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};gn.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};gn.prototype.at=function(e,t,n){const r=this.__find__(e),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=s.alt||[],this.__cache__=null};gn.prototype.before=function(e,t,n,r){const s=this.__find__(e),a=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};gn.prototype.after=function(e,t,n,r){const s=this.__find__(e),a=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};gn.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};gn.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};gn.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};gn.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};gn.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Wn(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Wn.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,s=n.length;r<s;r++)if(n[r][0]===t)return r;return-1};Wn.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Wn.prototype.attrSet=function(t,n){const r=this.attrIndex(t),s=[t,n];r<0?this.attrPush(s):this.attrs[r]=s};Wn.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Wn.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Qc(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Qc.prototype.Token=Wn;const Yh=/\r\n?|\n/g,Jh=/\0/g;function Xh(e){let t;t=e.src.replace(Yh,`
`),t=t.replace(Jh,"ï¿½"),e.src=t}function Qh(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function em(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function tm(e){return/^<a[>\s]/i.test(e)}function nm(e){return/^<\/a\s*>/i.test(e)}function rm(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,a=0;for(let u=s.length-1;u>=0;u--){const i=s[u];if(i.type==="link_close"){for(u--;s[u].level!==i.level&&s[u].type!=="link_open";)u--;continue}if(i.type==="html_inline"&&(tm(i.content)&&a>0&&a--,nm(i.content)&&a++),!(a>0)&&i.type==="text"&&e.md.linkify.test(i.content)){const l=i.content;let c=e.md.linkify.match(l);const f=[];let d=i.level,v=0;c.length>0&&c[0].index===0&&u>0&&s[u-1].type==="text_special"&&(c=c.slice(1));for(let h=0;h<c.length;h++){const p=c[h].url,x=e.md.normalizeLink(p);if(!e.md.validateLink(x))continue;let y=c[h].text;c[h].schema?c[h].schema==="mailto:"&&!/^mailto:/i.test(y)?y=e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=e.md.normalizeLinkText(y):y=e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,"");const _=c[h].index;if(_>v){const D=new e.Token("text","",0);D.content=l.slice(v,_),D.level=d,f.push(D)}const E=new e.Token("link_open","a",1);E.attrs=[["href",x]],E.level=d++,E.markup="linkify",E.info="auto",f.push(E);const S=new e.Token("text","",0);S.content=y,S.level=d,f.push(S);const b=new e.Token("link_close","a",-1);b.level=--d,b.markup="linkify",b.info="auto",f.push(b),v=c[h].lastIndex}if(v<l.length){const h=new e.Token("text","",0);h.content=l.slice(v),h.level=d,f.push(h)}t[n].children=s=Jc(s,u,f)}}}}const ed=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,sm=/\((c|tm|r)\)/i,am=/\((c|tm|r)\)/ig,um={c:"Â©",r:"Â®",tm:"â¢"};function om(e,t){return um[t.toLowerCase()]}function im(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(am,om)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function lm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&ed.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function cm(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(sm.test(e.tokens[t].content)&&im(e.tokens[t].children),ed.test(e.tokens[t].content)&&lm(e.tokens[t].children))}const dm=/['"]/,ll=/['"]/g,cl="â";function za(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function fm(e,t){let n;const r=[];for(let s=0;s<e.length;s++){const a=e[s],u=e[s].level;for(n=r.length-1;n>=0&&!(r[n].level<=u);n--);if(r.length=n+1,a.type!=="text")continue;let i=a.content,l=0,c=i.length;e:for(;l<c;){ll.lastIndex=l;const f=ll.exec(i);if(!f)break;let d=!0,v=!0;l=f.index+1;const h=f[0]==="'";let p=32;if(f.index-1>=0)p=i.charCodeAt(f.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let x=32;if(l<c)x=i.charCodeAt(l);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){x=e[n].content.charCodeAt(0);break}const y=_a(p)||ba(String.fromCharCode(p)),_=_a(x)||ba(String.fromCharCode(x)),E=ga(p),S=ga(x);if(S?d=!1:_&&(E||y||(d=!1)),E?v=!1:y&&(S||_||(v=!1)),x===34&&f[0]==='"'&&p>=48&&p<=57&&(v=d=!1),d&&v&&(d=y,v=_),!d&&!v){h&&(a.content=za(a.content,f.index,cl));continue}if(v)for(n=r.length-1;n>=0;n--){let b=r[n];if(r[n].level<u)break;if(b.single===h&&r[n].level===u){b=r[n];let D,A;h?(D=t.md.options.quotes[2],A=t.md.options.quotes[3]):(D=t.md.options.quotes[0],A=t.md.options.quotes[1]),a.content=za(a.content,f.index,A),e[b.token].content=za(e[b.token].content,b.pos,D),l+=A.length-1,b.token===s&&(l+=D.length-1),i=a.content,c=i.length,r.length=n;continue e}}d?r.push({token:s,pos:f.index,single:h,level:u}):v&&h&&(a.content=za(a.content,f.index,cl))}}}function pm(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!dm.test(e.tokens[t].content)||fm(e.tokens[t].children,e)}function hm(e){let t,n;const r=e.tokens,s=r.length;for(let a=0;a<s;a++){if(r[a].type!=="inline")continue;const u=r[a].children,i=u.length;for(t=0;t<i;t++)u[t].type==="text_special"&&(u[t].type="text");for(t=n=0;t<i;t++)u[t].type==="text"&&t+1<i&&u[t+1].type==="text"?u[t+1].content=u[t].content+u[t+1].content:(t!==n&&(u[n]=u[t]),n++);t!==n&&(u.length=n)}}const Yu=[["normalize",Xh],["block",Qh],["inline",em],["linkify",rm],["replacements",cm],["smartquotes",pm],["text_join",hm]];function oi(){this.ruler=new gn;for(let e=0;e<Yu.length;e++)this.ruler.push(Yu[e][0],Yu[e][1])}oi.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};oi.prototype.State=Qc;function ar(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let a=0,u=0,i=0,l=0,c=s.length,f=!1;u<c;u++){const d=s.charCodeAt(u);if(!f)if(wt(d)){i++,d===9?l+=4-l%4:l++;continue}else f=!0;(d===10||u===c-1)&&(d!==10&&u++,this.bMarks.push(a),this.eMarks.push(u),this.tShift.push(i),this.sCount.push(l),this.bsCount.push(0),f=!1,i=0,l=0,a=u+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ar.prototype.push=function(e,t,n){const r=new Wn(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};ar.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};ar.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};ar.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!wt(r))break}return t};ar.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!wt(this.src.charCodeAt(--t)))return t+1;return t};ar.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};ar.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};ar.prototype.getLines=function(t,n,r,s){if(t>=n)return"";const a=new Array(n-t);for(let u=0,i=t;i<n;i++,u++){let l=0;const c=this.bMarks[i];let f=c,d;for(i+1<n||s?d=this.eMarks[i]+1:d=this.eMarks[i];f<d&&l<r;){const v=this.src.charCodeAt(f);if(wt(v))v===9?l+=4-(l+this.bsCount[i])%4:l++;else if(f-c<this.tShift[i])l++;else break;f++}l>r?a[u]=new Array(l-r+1).join(" ")+this.src.slice(f,d):a[u]=this.src.slice(f,d)}return a.join("")};ar.prototype.Token=Wn;const mm=65536;function Ju(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function dl(e){const t=[],n=e.length;let r=0,s=e.charCodeAt(r),a=!1,u=0,i="";for(;r<n;)s===124&&(a?(i+=e.substring(u,r-1),u=r):(t.push(i+e.substring(u,r)),i="",u=r+1)),a=s===92,r++,s=e.charCodeAt(r);return t.push(i+e.substring(u)),t}function vm(e,t,n,r){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let a=e.bMarks[s]+e.tShift[s];if(a>=e.eMarks[s])return!1;const u=e.src.charCodeAt(a++);if(u!==124&&u!==45&&u!==58||a>=e.eMarks[s])return!1;const i=e.src.charCodeAt(a++);if(i!==124&&i!==45&&i!==58&&!wt(i)||u===45&&wt(i))return!1;for(;a<e.eMarks[s];){const b=e.src.charCodeAt(a);if(b!==124&&b!==45&&b!==58&&!wt(b))return!1;a++}let l=Ju(e,t+1),c=l.split("|");const f=[];for(let b=0;b<c.length;b++){const D=c[b].trim();if(!D){if(b===0||b===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(D))return!1;D.charCodeAt(D.length-1)===58?f.push(D.charCodeAt(0)===58?"center":"right"):D.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=Ju(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=dl(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==f.length)return!1;if(r)return!0;const v=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),x=[t,0];p.map=x;const y=e.push("thead_open","thead",1);y.map=[t,t+1];const _=e.push("tr_open","tr",1);_.map=[t,t+1];for(let b=0;b<c.length;b++){const D=e.push("th_open","th",1);f[b]&&(D.attrs=[["style","text-align:"+f[b]]]);const A=e.push("inline","",0);A.content=c[b].trim(),A.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let E,S=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let b=!1;for(let A=0,P=h.length;A<P;A++)if(h[A](e,s,n,!0)){b=!0;break}if(b||(l=Ju(e,s).trim(),!l)||e.sCount[s]-e.blkIndent>=4||(c=dl(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),S+=d-c.length,S>mm))break;if(s===t+2){const A=e.push("tbody_open","tbody",1);A.map=E=[t+2,0]}const D=e.push("tr_open","tr",1);D.map=[s,s+1];for(let A=0;A<d;A++){const P=e.push("td_open","td",1);f[A]&&(P.attrs=[["style","text-align:"+f[A]]]);const Z=e.push("inline","",0);Z.content=c[A]?c[A].trim():"",Z.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return E&&(e.push("tbody_close","tbody",-1),E[1]=s),e.push("table_close","table",-1),x[1]=s,e.parentType=v,e.line=s,!0}function gm(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,s=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,s=r;continue}break}e.line=s;const a=e.push("code_block","code",0);return a.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,a.map=[t,e.line],!0}function bm(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>a)return!1;const u=e.src.charCodeAt(s);if(u!==126&&u!==96)return!1;let i=s;s=e.skipChars(s,u);let l=s-i;if(l<3)return!1;const c=e.src.slice(i,s),f=e.src.slice(s,a);if(u===96&&f.indexOf(String.fromCharCode(u))>=0)return!1;if(r)return!0;let d=t,v=!1;for(;d++,!(d>=n||(s=i=e.bMarks[d]+e.tShift[d],a=e.eMarks[d],s<a&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(s)===u&&!(e.sCount[d]-e.blkIndent>=4)&&(s=e.skipChars(s,u),!(s-i<l)&&(s=e.skipSpaces(s),!(s<a)))){v=!0;break}l=e.sCount[t],e.line=d+(v?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,d,l,!0),h.markup=c,h.map=[t,e.line],!0}function _m(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const u=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(r)return!0;const i=[],l=[],c=[],f=[],d=e.md.block.ruler.getRules("blockquote"),v=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<n;p++){const S=e.sCount[p]<e.blkIndent;if(s=e.bMarks[p]+e.tShift[p],a=e.eMarks[p],s>=a)break;if(e.src.charCodeAt(s++)===62&&!S){let D=e.sCount[p]+1,A,P;e.src.charCodeAt(s)===32?(s++,D++,P=!1,A=!0):e.src.charCodeAt(s)===9?(A=!0,(e.bsCount[p]+D)%4===3?(s++,D++,P=!1):P=!0):A=!1;let Z=D;for(i.push(e.bMarks[p]),e.bMarks[p]=s;s<a;){const Y=e.src.charCodeAt(s);if(wt(Y))Y===9?Z+=4-(Z+e.bsCount[p]+(P?1:0))%4:Z++;else break;s++}h=s>=a,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(A?1:0),c.push(e.sCount[p]),e.sCount[p]=Z-D,f.push(e.tShift[p]),e.tShift[p]=s-e.bMarks[p];continue}if(h)break;let b=!1;for(let D=0,A=d.length;D<A;D++)if(d[D](e,p,n,!0)){b=!0;break}if(b){e.lineMax=p,e.blkIndent!==0&&(i.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}i.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const x=e.blkIndent;e.blkIndent=0;const y=e.push("blockquote_open","blockquote",1);y.markup=">";const _=[t,0];y.map=_,e.md.block.tokenize(e,t,p);const E=e.push("blockquote_close","blockquote",-1);E.markup=">",e.lineMax=u,e.parentType=v,_[1]=e.line;for(let S=0;S<f.length;S++)e.bMarks[S+t]=i[S],e.tShift[S+t]=f[S],e.sCount[S+t]=c[S],e.bsCount[S+t]=l[S];return e.blkIndent=x,!0}function ym(e,t,n,r){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.bMarks[t]+e.tShift[t];const u=e.src.charCodeAt(a++);if(u!==42&&u!==45&&u!==95)return!1;let i=1;for(;a<s;){const c=e.src.charCodeAt(a++);if(c!==u&&!wt(c))return!1;c===u&&i++}if(i<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(i+1).join(String.fromCharCode(u)),!0}function fl(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(r++);if(s!==42&&s!==45&&s!==43)return-1;if(r<n){const a=e.src.charCodeAt(r);if(!wt(a))return-1}return r}function pl(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let s=n;if(s+1>=r)return-1;let a=e.src.charCodeAt(s++);if(a<48||a>57)return-1;for(;;){if(s>=r)return-1;if(a=e.src.charCodeAt(s++),a>=48&&a<=57){if(s-n>=10)return-1;continue}if(a===41||a===46)break;return-1}return s<r&&(a=e.src.charCodeAt(s),!wt(a))?-1:s}function xm(e,t){const n=e.level+2;for(let r=t+2,s=e.tokens.length-2;r<s;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function km(e,t,n,r){let s,a,u,i,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let d,v,h;if((h=pl(e,l))>=0){if(d=!0,u=e.bMarks[l]+e.tShift[l],v=Number(e.src.slice(u,h-1)),f&&v!==1)return!1}else if((h=fl(e,l))>=0)d=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const p=e.src.charCodeAt(h-1),x=e.tokens.length;d?(i=e.push("ordered_list_open","ol",1),v!==1&&(i.attrs=[["start",v]])):i=e.push("bullet_list_open","ul",1);const y=[l,0];i.map=y,i.markup=String.fromCharCode(p);let _=!1;const E=e.md.block.ruler.getRules("list"),S=e.parentType;for(e.parentType="list";l<n;){a=h,s=e.eMarks[l];const b=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let D=b;for(;a<s;){const J=e.src.charCodeAt(a);if(J===9)D+=4-(D+e.bsCount[l])%4;else if(J===32)D++;else break;a++}const A=a;let P;A>=s?P=1:P=D-b,P>4&&(P=1);const Z=b+P;i=e.push("list_item_open","li",1),i.markup=String.fromCharCode(p);const Y=[l,0];i.map=Y,d&&(i.info=e.src.slice(u,h-1));const T=e.tight,N=e.tShift[l],Q=e.sCount[l],I=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=Z,e.tight=!0,e.tShift[l]=A-e.bMarks[l],e.sCount[l]=D,A>=s&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||_)&&(c=!1),_=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=I,e.tShift[l]=N,e.sCount[l]=Q,e.tight=T,i=e.push("list_item_close","li",-1),i.markup=String.fromCharCode(p),l=e.line,Y[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let V=!1;for(let J=0,se=E.length;J<se;J++)if(E[J](e,l,n,!0)){V=!0;break}if(V)break;if(d){if(h=pl(e,l),h<0)break;u=e.bMarks[l]+e.tShift[l]}else if(h=fl(e,l),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return d?i=e.push("ordered_list_close","ol",-1):i=e.push("bullet_list_close","ul",-1),i.markup=String.fromCharCode(p),y[1]=l,e.line=l,e.parentType=S,c&&xm(e,x),!0}function wm(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],u=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function i(E){const S=e.lineMax;if(E>=S||e.isEmpty(E))return null;let b=!1;if(e.sCount[E]-e.blkIndent>3&&(b=!0),e.sCount[E]<0&&(b=!0),!b){const P=e.md.block.ruler.getRules("reference"),Z=e.parentType;e.parentType="reference";let Y=!1;for(let T=0,N=P.length;T<N;T++)if(P[T](e,E,S,!0)){Y=!0;break}if(e.parentType=Z,Y)return null}const D=e.bMarks[E]+e.tShift[E],A=e.eMarks[E];return e.src.slice(D,A+1)}let l=e.src.slice(s,a+1);a=l.length;let c=-1;for(s=1;s<a;s++){const E=l.charCodeAt(s);if(E===91)return!1;if(E===93){c=s;break}else if(E===10){const S=i(u);S!==null&&(l+=S,a=l.length,u++)}else if(E===92&&(s++,s<a&&l.charCodeAt(s)===10)){const S=i(u);S!==null&&(l+=S,a=l.length,u++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<a;s++){const E=l.charCodeAt(s);if(E===10){const S=i(u);S!==null&&(l+=S,a=l.length,u++)}else if(!wt(E))break}const f=e.md.helpers.parseLinkDestination(l,s,a);if(!f.ok)return!1;const d=e.md.normalizeLink(f.str);if(!e.md.validateLink(d))return!1;s=f.pos;const v=s,h=u,p=s;for(;s<a;s++){const E=l.charCodeAt(s);if(E===10){const S=i(u);S!==null&&(l+=S,a=l.length,u++)}else if(!wt(E))break}let x=e.md.helpers.parseLinkTitle(l,s,a);for(;x.can_continue;){const E=i(u);if(E===null)break;l+=E,s=a,a=l.length,u++,x=e.md.helpers.parseLinkTitle(l,s,a,x)}let y;for(s<a&&p!==s&&x.ok?(y=x.str,s=x.pos):(y="",s=v,u=h);s<a;){const E=l.charCodeAt(s);if(!wt(E))break;s++}if(s<a&&l.charCodeAt(s)!==10&&y)for(y="",s=v,u=h;s<a;){const E=l.charCodeAt(s);if(!wt(E))break;s++}if(s<a&&l.charCodeAt(s)!==10)return!1;const _=Cu(l.slice(1,c));return _?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[_]>"u"&&(e.env.references[_]={title:y,href:d}),e.line=u),!0):!1}const Em=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Sm="[a-zA-Z_:][a-zA-Z0-9:._-]*",Cm="[^\"'=<>`\\x00-\\x20]+",Am="'[^']*'",Dm='"[^"]*"',Tm="(?:"+Cm+"|"+Am+"|"+Dm+")",Fm="(?:\\s+"+Sm+"(?:\\s*=\\s*"+Tm+")?)",td="<[A-Za-z][A-Za-z0-9\\-]*"+Fm+"*\\s*\\/?>",nd="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Mm="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Pm="<[?][\\s\\S]*?[?]>",Im="<![A-Za-z][^>]*>",Nm="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Lm=new RegExp("^(?:"+td+"|"+nd+"|"+Mm+"|"+Pm+"|"+Im+"|"+Nm+")"),Om=new RegExp("^(?:"+td+"|"+nd+")"),vs=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Em.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Om.source+"\\s*$"),/^$/,!1]];function $m(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let u=e.src.slice(s,a),i=0;for(;i<vs.length&&!vs[i][0].test(u);i++);if(i===vs.length)return!1;if(r)return vs[i][2];let l=t+1;if(!vs[i][1].test(u)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(s=e.bMarks[l]+e.tShift[l],a=e.eMarks[l],u=e.src.slice(s,a),vs[i][1].test(u)){u.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function Rm(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let u=e.src.charCodeAt(s);if(u!==35||s>=a)return!1;let i=1;for(u=e.src.charCodeAt(++s);u===35&&s<a&&i<=6;)i++,u=e.src.charCodeAt(++s);if(i>6||s<a&&!wt(u))return!1;if(r)return!0;a=e.skipSpacesBack(a,s);const l=e.skipCharsBack(a,35,s);l>s&&wt(e.src.charCodeAt(l-1))&&(a=l),e.line=t+1;const c=e.push("heading_open","h"+String(i),1);c.markup="########".slice(0,i),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(s,a).trim(),f.map=[t,e.line],f.children=[];const d=e.push("heading_close","h"+String(i),-1);return d.markup="########".slice(0,i),!0}function zm(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let a=0,u,i=t+1;for(;i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3)continue;if(e.sCount[i]>=e.blkIndent){let h=e.bMarks[i]+e.tShift[i];const p=e.eMarks[i];if(h<p&&(u=e.src.charCodeAt(h),(u===45||u===61)&&(h=e.skipChars(h,u),h=e.skipSpaces(h),h>=p))){a=u===61?1:2;break}}if(e.sCount[i]<0)continue;let v=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](e,i,n,!0)){v=!0;break}if(v)break}if(!a)return!1;const l=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i+1;const c=e.push("heading_open","h"+String(a),1);c.markup=String.fromCharCode(u),c.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const d=e.push("heading_close","h"+String(a),-1);return d.markup=String.fromCharCode(u),e.parentType=s,!0}function Um(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let a=t+1;for(e.parentType="paragraph";a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)continue;let c=!1;for(let f=0,d=r.length;f<d;f++)if(r[f](e,a,n,!0)){c=!0;break}if(c)break}const u=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a;const i=e.push("paragraph_open","p",1);i.map=[t,e.line];const l=e.push("inline","",0);return l.content=u,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const Ua=[["table",vm,["paragraph","reference"]],["code",gm],["fence",bm,["paragraph","reference","blockquote","list"]],["blockquote",_m,["paragraph","reference","blockquote","list"]],["hr",ym,["paragraph","reference","blockquote","list"]],["list",km,["paragraph","reference","blockquote"]],["reference",wm],["html_block",$m,["paragraph","reference","blockquote"]],["heading",Rm,["paragraph","reference","blockquote"]],["lheading",zm],["paragraph",Um]];function Au(){this.ruler=new gn;for(let e=0;e<Ua.length;e++)this.ruler.push(Ua[e][0],Ua[e][1],{alt:(Ua[e][2]||[]).slice()})}Au.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),s=r.length,a=e.md.options.maxNesting;let u=t,i=!1;for(;u<n&&(e.line=u=e.skipEmptyLines(u),!(u>=n||e.sCount[u]<e.blkIndent));){if(e.level>=a){e.line=n;break}const l=e.line;let c=!1;for(let f=0;f<s;f++)if(c=r[f](e,u,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!i,e.isEmpty(e.line-1)&&(i=!0),u=e.line,u<n&&e.isEmpty(u)&&(i=!0,u++,e.line=u)}};Au.prototype.parse=function(e,t,n,r){if(!e)return;const s=new this.State(e,t,n,r);this.tokenize(s,s.line,s.lineMax)};Au.prototype.State=ar;function Fa(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Fa.prototype.pushPending=function(){const e=new Wn("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Fa.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Wn(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};Fa.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let a=e;for(;a<n&&this.src.charCodeAt(a)===r;)a++;const u=a-e,i=a<n?this.src.charCodeAt(a):32,l=_a(s)||ba(String.fromCharCode(s)),c=_a(i)||ba(String.fromCharCode(i)),f=ga(s),d=ga(i),v=!d&&(!c||f||l),h=!f&&(!l||d||c);return{can_open:v&&(t||!h||l),can_close:h&&(t||!v||c),length:u}};Fa.prototype.Token=Wn;function Bm(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function jm(e,t){let n=e.pos;for(;n<e.posMax&&!Bm(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const qm=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Hm(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(qm);if(!s)return!1;const a=s[1],u=e.md.linkify.matchAtStart(e.src.slice(n-a.length));if(!u)return!1;let i=u.url;if(i.length<=a.length)return!1;i=i.replace(/\*+$/,"");const l=e.md.normalizeLink(i);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-a.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(i);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=i.length-a.length,!0}function Wm(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,s=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let a=r-1;for(;a>=1&&e.pending.charCodeAt(a-1)===32;)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&wt(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const ii=[];for(let e=0;e<256;e++)ii.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){ii[e.charCodeAt(0)]=1});function Vm(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(s=e.src.charCodeAt(n),!!wt(s));)n++;return e.pos=n,!0}let a=e.src[n];if(s>=55296&&s<=56319&&n+1<r){const i=e.src.charCodeAt(n+1);i>=56320&&i<=57343&&(a+=e.src[n+1],n++)}const u="\\"+a;if(!t){const i=e.push("text_special","",0);s<256&&ii[s]!==0?i.content=a:i.content=u,i.markup=u,i.info="escape"}return e.pos=n+1,!0}function Gm(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const a=e.posMax;for(;n<a&&e.src.charCodeAt(n)===96;)n++;const u=e.src.slice(s,n),i=u.length;if(e.backticksScanned&&(e.backticks[i]||0)<=s)return t||(e.pending+=u),e.pos+=i,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<a&&e.src.charCodeAt(l)===96;)l++;const f=l-c;if(f===i){if(!t){const d=e.push("code_inline","code",0);d.markup=u,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=u),e.pos+=i,!0}function Km(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const s=e.scanDelims(e.pos,!0);let a=s.length;const u=String.fromCharCode(r);if(a<2)return!1;let i;a%2&&(i=e.push("text","",0),i.content=u,a--);for(let l=0;l<a;l+=2)i=e.push("text","",0),i.content=u+u,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function hl(e,t){let n;const r=[],s=t.length;for(let a=0;a<s;a++){const u=t[a];if(u.marker!==126||u.end===-1)continue;const i=t[u.end];n=e.tokens[u.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[i.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[i.token-1].type==="text"&&e.tokens[i.token-1].content==="~"&&r.push(i.token-1)}for(;r.length;){const a=r.pop();let u=a+1;for(;u<e.tokens.length&&e.tokens[u].type==="s_close";)u++;u--,a!==u&&(n=e.tokens[u],e.tokens[u]=e.tokens[a],e.tokens[a]=n)}}function Zm(e){const t=e.tokens_meta,n=e.tokens_meta.length;hl(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&hl(e,t[r].delimiters)}const rd={tokenize:Km,postProcess:Zm};function Ym(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const s=e.scanDelims(e.pos,r===42);for(let a=0;a<s.length;a++){const u=e.push("text","",0);u.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function ml(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const s=t[r];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const a=t[s.end],u=r>0&&t[r-1].end===s.end+1&&t[r-1].marker===s.marker&&t[r-1].token===s.token-1&&t[s.end+1].token===a.token+1,i=String.fromCharCode(s.marker),l=e.tokens[s.token];l.type=u?"strong_open":"em_open",l.tag=u?"strong":"em",l.nesting=1,l.markup=u?i+i:i,l.content="";const c=e.tokens[a.token];c.type=u?"strong_close":"em_close",c.tag=u?"strong":"em",c.nesting=-1,c.markup=u?i+i:i,c.content="",u&&(e.tokens[t[r-1].token].content="",e.tokens[t[s.end+1].token].content="",r--)}}function Jm(e){const t=e.tokens_meta,n=e.tokens_meta.length;ml(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&ml(e,t[r].delimiters)}const sd={tokenize:Ym,postProcess:Jm};function Xm(e,t){let n,r,s,a,u="",i="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,d=e.posMax,v=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<d&&e.src.charCodeAt(p)===40){for(c=!1,p++;p<d&&(n=e.src.charCodeAt(p),!(!wt(n)&&n!==10));p++);if(p>=d)return!1;if(l=p,s=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),s.ok){for(u=e.md.normalizeLink(s.str),e.md.validateLink(u)?p=s.pos:u="",l=p;p<d&&(n=e.src.charCodeAt(p),!(!wt(n)&&n!==10));p++);if(s=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<d&&l!==p&&s.ok)for(i=s.str,p=s.pos;p<d&&(n=e.src.charCodeAt(p),!(!wt(n)&&n!==10));p++);}(p>=d||e.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<d&&e.src.charCodeAt(p)===91?(l=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?r=e.src.slice(l,p++):p=h+1):p=h+1,r||(r=e.src.slice(v,h)),a=e.env.references[Cu(r)],!a)return e.pos=f,!1;u=a.href,i=a.title}if(!t){e.pos=v,e.posMax=h;const x=e.push("link_open","a",1),y=[["href",u]];x.attrs=y,i&&y.push(["title",i]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=d,!0}function Qm(e,t){let n,r,s,a,u,i,l,c,f="";const d=e.pos,v=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(a=p+1,a<v&&e.src.charCodeAt(a)===40){for(a++;a<v&&(n=e.src.charCodeAt(a),!(!wt(n)&&n!==10));a++);if(a>=v)return!1;for(c=a,i=e.md.helpers.parseLinkDestination(e.src,a,e.posMax),i.ok&&(f=e.md.normalizeLink(i.str),e.md.validateLink(f)?a=i.pos:f=""),c=a;a<v&&(n=e.src.charCodeAt(a),!(!wt(n)&&n!==10));a++);if(i=e.md.helpers.parseLinkTitle(e.src,a,e.posMax),a<v&&c!==a&&i.ok)for(l=i.str,a=i.pos;a<v&&(n=e.src.charCodeAt(a),!(!wt(n)&&n!==10));a++);else l="";if(a>=v||e.src.charCodeAt(a)!==41)return e.pos=d,!1;a++}else{if(typeof e.env.references>"u")return!1;if(a<v&&e.src.charCodeAt(a)===91?(c=a+1,a=e.md.helpers.parseLinkLabel(e,a),a>=0?s=e.src.slice(c,a++):a=p+1):a=p+1,s||(s=e.src.slice(h,p)),u=e.env.references[Cu(s)],!u)return e.pos=d,!1;f=u.href,l=u.title}if(!t){r=e.src.slice(h,p);const x=[];e.md.inline.parse(r,e.md,e.env,x);const y=e.push("image","img",0),_=[["src",f],["alt",""]];y.attrs=_,y.children=x,y.content=r,l&&_.push(["title",l])}return e.pos=a,e.posMax=v,!0}const ev=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,tv=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function nv(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const u=e.src.charCodeAt(n);if(u===60)return!1;if(u===62)break}const a=e.src.slice(r+1,n);if(tv.test(a)){const u=e.md.normalizeLink(a);if(!e.md.validateLink(u))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",u]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=a.length+2,!0}if(ev.test(a)){const u=e.md.normalizeLink("mailto:"+a);if(!e.md.validateLink(u))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",u]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=a.length+2,!0}return!1}function rv(e){return/^<a[>\s]/i.test(e)}function sv(e){return/^<\/a\s*>/i.test(e)}function av(e){const t=e|32;return t>=97&&t<=122}function uv(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const s=e.src.charCodeAt(r+1);if(s!==33&&s!==63&&s!==47&&!av(s))return!1;const a=e.src.slice(r).match(Lm);if(!a)return!1;if(!t){const u=e.push("html_inline","",0);u.content=a[0],rv(u.content)&&e.linkLevel++,sv(u.content)&&e.linkLevel--}return e.pos+=a[0].length,!0}const ov=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,iv=/^&([a-z][a-z0-9]{1,31});/i;function lv(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const a=e.src.slice(n).match(ov);if(a){if(!t){const u=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),i=e.push("text_special","",0);i.content=ui(u)?du(u):du(65533),i.markup=a[0],i.info="entity"}return e.pos+=a[0].length,!0}}else{const a=e.src.slice(n).match(iv);if(a){const u=Yc(a[0]);if(u!==a[0]){if(!t){const i=e.push("text_special","",0);i.content=u,i.markup=a[0],i.info="entity"}return e.pos+=a[0].length,!0}}}return!1}function vl(e){const t={},n=e.length;if(!n)return;let r=0,s=-2;const a=[];for(let u=0;u<n;u++){const i=e[u];if(a.push(0),(e[r].marker!==i.marker||s!==i.token-1)&&(r=u),s=i.token,i.length=i.length||0,!i.close)continue;t.hasOwnProperty(i.marker)||(t[i.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[i.marker][(i.open?3:0)+i.length%3];let c=r-a[r]-1,f=c;for(;c>l;c-=a[c]+1){const d=e[c];if(d.marker===i.marker&&d.open&&d.end<0){let v=!1;if((d.close||i.open)&&(d.length+i.length)%3===0&&(d.length%3!==0||i.length%3!==0)&&(v=!0),!v){const h=c>0&&!e[c-1].open?a[c-1]+1:0;a[u]=u-c+h,a[c]=h,i.open=!1,d.end=u,d.close=!1,f=-1,s=-2;break}}}f!==-1&&(t[i.marker][(i.open?3:0)+(i.length||0)%3]=f)}}function cv(e){const t=e.tokens_meta,n=e.tokens_meta.length;vl(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&vl(t[r].delimiters)}function dv(e){let t,n,r=0;const s=e.tokens,a=e.tokens.length;for(t=n=0;t<a;t++)s[t].nesting<0&&r--,s[t].level=r,s[t].nesting>0&&r++,s[t].type==="text"&&t+1<a&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const Xu=[["text",jm],["linkify",Hm],["newline",Wm],["escape",Vm],["backticks",Gm],["strikethrough",rd.tokenize],["emphasis",sd.tokenize],["link",Xm],["image",Qm],["autolink",nv],["html_inline",uv],["entity",lv]],Qu=[["balance_pairs",cv],["strikethrough",rd.postProcess],["emphasis",sd.postProcess],["fragments_join",dv]];function Ma(){this.ruler=new gn;for(let e=0;e<Xu.length;e++)this.ruler.push(Xu[e][0],Xu[e][1]);this.ruler2=new gn;for(let e=0;e<Qu.length;e++)this.ruler2.push(Qu[e][0],Qu[e][1])}Ma.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,s=e.md.options.maxNesting,a=e.cache;if(typeof a[t]<"u"){e.pos=a[t];return}let u=!1;if(e.level<s){for(let i=0;i<r;i++)if(e.level++,u=n[i](e,!0),e.level--,u){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;u||e.pos++,a[t]=e.pos};Ma.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,s=e.md.options.maxNesting;for(;e.pos<r;){const a=e.pos;let u=!1;if(e.level<s){for(let i=0;i<n;i++)if(u=t[i](e,!1),u){if(a>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(u){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Ma.prototype.parse=function(e,t,n,r){const s=new this.State(e,t,n,r);this.tokenize(s);const a=this.ruler2.getRules(""),u=a.length;for(let i=0;i<u;i++)a[i](s)};Ma.prototype.State=Fa;function fv(e){const t={};e=e||{},t.src_Any=Wc.source,t.src_Cc=Vc.source,t.src_Z=Kc.source,t.src_P=si.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><ï½]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function To(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Du(e){return Object.prototype.toString.call(e)}function pv(e){return Du(e)==="[object String]"}function hv(e){return Du(e)==="[object Object]"}function mv(e){return Du(e)==="[object RegExp]"}function gl(e){return Du(e)==="[object Function]"}function vv(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const ad={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function gv(e){return Object.keys(e||{}).reduce(function(t,n){return t||ad.hasOwnProperty(n)},!1)}const bv={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},_v="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",yv="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function xv(e){e.__index__=-1,e.__text_cache__=""}function kv(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function bl(){return function(e,t){t.normalize(e)}}function fu(e){const t=e.re=fv(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(_v),n.push(t.src_xn),t.src_tlds=n.join("|");function r(i){return i.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function a(i,l){throw new Error('(LinkifyIt) Invalid schema "'+i+'": '+l)}Object.keys(e.__schemas__).forEach(function(i){const l=e.__schemas__[i];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[i]=c,hv(l)){mv(l.validate)?c.validate=kv(l.validate):gl(l.validate)?c.validate=l.validate:a(i,l),gl(l.normalize)?c.normalize=l.normalize:l.normalize?a(i,l):c.normalize=bl();return}if(pv(l)){s.push(i);return}a(i,l)}),s.forEach(function(i){e.__compiled__[e.__schemas__[i]]&&(e.__compiled__[i].validate=e.__compiled__[e.__schemas__[i]].validate,e.__compiled__[i].normalize=e.__compiled__[e.__schemas__[i]].normalize)}),e.__compiled__[""]={validate:null,normalize:bl()};const u=Object.keys(e.__compiled__).filter(function(i){return i.length>0&&e.__compiled__[i]}).map(vv).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),xv(e)}function wv(e,t){const n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function Fo(e,t){const n=new wv(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function En(e,t){if(!(this instanceof En))return new En(e,t);t||gv(e)&&(t=e,e={}),this.__opts__=To({},ad,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=To({},bv,e),this.__compiled__={},this.__tlds__=yv,this.__tlds_replaced__=!1,this.re={},fu(this)}En.prototype.add=function(t,n){return this.__schemas__[t]=n,fu(this),this};En.prototype.set=function(t){return this.__opts__=To(this.__opts__,t),this};En.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,s,a,u,i,l,c,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(a=this.testSchemaAt(t,n[2],l.lastIndex),a){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(u=r.index+r[1].length,(this.__index__<0||u<this.__index__)&&(this.__schema__="",this.__index__=u,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(u=s.index+s[1].length,i=s.index+s[0].length,(this.__index__<0||u<this.__index__||u===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=u,this.__last_index__=i))),this.__index__>=0};En.prototype.pretest=function(t){return this.re.pretest.test(t)};En.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};En.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Fo(this,r)),r=this.__last_index__);let s=r?t.slice(r):t;for(;this.test(s);)n.push(Fo(this,r)),s=s.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};En.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Fo(this,0)):null};En.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,s,a){return r!==a[s-1]}).reverse(),fu(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,fu(this),this)};En.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};En.prototype.onCompile=function(){};const Ss=2147483647,Yn=36,li=1,ya=26,Ev=38,Sv=700,ud=72,od=128,id="-",Cv=/^xn--/,Av=/[^\0-\x7F]/,Dv=/[\x2E\u3002\uFF0E\uFF61]/g,Tv={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},eo=Yn-li,Jn=Math.floor,to=String.fromCharCode;function wr(e){throw new RangeError(Tv[e])}function Fv(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function ld(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Dv,".");const s=e.split("."),a=Fv(s,t).join(".");return r+a}function cd(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const a=e.charCodeAt(n++);(a&64512)==56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const Mv=e=>String.fromCodePoint(...e),Pv=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Yn},_l=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},dd=function(e,t,n){let r=0;for(e=n?Jn(e/Sv):e>>1,e+=Jn(e/t);e>eo*ya>>1;r+=Yn)e=Jn(e/eo);return Jn(r+(eo+1)*e/(e+Ev))},fd=function(e){const t=[],n=e.length;let r=0,s=od,a=ud,u=e.lastIndexOf(id);u<0&&(u=0);for(let i=0;i<u;++i)e.charCodeAt(i)>=128&&wr("not-basic"),t.push(e.charCodeAt(i));for(let i=u>0?u+1:0;i<n;){const l=r;for(let f=1,d=Yn;;d+=Yn){i>=n&&wr("invalid-input");const v=Pv(e.charCodeAt(i++));v>=Yn&&wr("invalid-input"),v>Jn((Ss-r)/f)&&wr("overflow"),r+=v*f;const h=d<=a?li:d>=a+ya?ya:d-a;if(v<h)break;const p=Yn-h;f>Jn(Ss/p)&&wr("overflow"),f*=p}const c=t.length+1;a=dd(r-l,c,l==0),Jn(r/c)>Ss-s&&wr("overflow"),s+=Jn(r/c),r%=c,t.splice(r++,0,s)}return String.fromCodePoint(...t)},pd=function(e){const t=[];e=cd(e);const n=e.length;let r=od,s=0,a=ud;for(const l of e)l<128&&t.push(to(l));const u=t.length;let i=u;for(u&&t.push(id);i<n;){let l=Ss;for(const f of e)f>=r&&f<l&&(l=f);const c=i+1;l-r>Jn((Ss-s)/c)&&wr("overflow"),s+=(l-r)*c,r=l;for(const f of e)if(f<r&&++s>Ss&&wr("overflow"),f===r){let d=s;for(let v=Yn;;v+=Yn){const h=v<=a?li:v>=a+ya?ya:v-a;if(d<h)break;const p=d-h,x=Yn-h;t.push(to(_l(h+p%x,0))),d=Jn(p/x)}t.push(to(_l(d,0))),a=dd(s,c,i===u),s=0,++i}++s,++r}return t.join("")},Iv=function(e){return ld(e,function(t){return Cv.test(t)?fd(t.slice(4).toLowerCase()):t})},Nv=function(e){return ld(e,function(t){return Av.test(t)?"xn--"+pd(t):t})},hd={version:"2.3.1",ucs2:{decode:cd,encode:Mv},decode:fd,encode:pd,toASCII:Nv,toUnicode:Iv},Lv={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Ov={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},$v={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Rv={default:Lv,zero:Ov,commonmark:$v},zv=/^(vbscript|javascript|file|data):/,Uv=/^data:image\/(gif|png|jpeg|webp);/;function Bv(e){const t=e.trim().toLowerCase();return zv.test(t)?Uv.test(t):!0}const md=["http:","https:","mailto:"];function jv(e){const t=ri(e,!0);if(t.hostname&&(!t.protocol||md.indexOf(t.protocol)>=0))try{t.hostname=hd.toASCII(t.hostname)}catch{}return Ta(ni(t))}function qv(e){const t=ri(e,!0);if(t.hostname&&(!t.protocol||md.indexOf(t.protocol)>=0))try{t.hostname=hd.toUnicode(t.hostname)}catch{}return Ts(ni(t),Ts.defaultChars+"%")}function Mn(e,t){if(!(this instanceof Mn))return new Mn(e,t);t||ai(e)||(t=e||{},e="default"),this.inline=new Ma,this.block=new Au,this.core=new oi,this.renderer=new Os,this.linkify=new En,this.validateLink=Bv,this.normalizeLink=jv,this.normalizeLinkText=qv,this.utils=Wh,this.helpers=Su({},Zh),this.options={},this.configure(e),t&&this.set(t)}Mn.prototype.set=function(e){return Su(this.options,e),this};Mn.prototype.configure=function(e){const t=this;if(ai(e)){const n=e;if(e=Rv[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Mn.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Mn.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Mn.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Mn.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Mn.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Mn.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Mn.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:vd,setPrototypeOf:yl,isFrozen:Hv,getPrototypeOf:Wv,getOwnPropertyDescriptor:Vv}=Object;let{freeze:pn,seal:Pn,create:gd}=Object,{apply:Mo,construct:Po}=typeof Reflect<"u"&&Reflect;pn||(pn=function(t){return t});Pn||(Pn=function(t){return t});Mo||(Mo=function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];return t.apply(n,s)});Po||(Po=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return new t(...r)});const Ba=hn(Array.prototype.forEach),Gv=hn(Array.prototype.lastIndexOf),xl=hn(Array.prototype.pop),Ys=hn(Array.prototype.push),Kv=hn(Array.prototype.splice),eu=hn(String.prototype.toLowerCase),no=hn(String.prototype.toString),ro=hn(String.prototype.match),Js=hn(String.prototype.replace),Zv=hn(String.prototype.indexOf),Yv=hn(String.prototype.trim),On=hn(Object.prototype.hasOwnProperty),on=hn(RegExp.prototype.test),Xs=Jv(TypeError);function hn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Mo(e,t,r)}}function Jv(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Po(e,n)}}function Ye(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eu;yl&&yl(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const a=n(s);a!==s&&(Hv(t)||(t[r]=a),s=a)}e[s]=!0}return e}function Xv(e){for(let t=0;t<e.length;t++)On(e,t)||(e[t]=null);return e}function lr(e){const t=gd(null);for(const[n,r]of vd(e))On(e,n)&&(Array.isArray(r)?t[n]=Xv(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=lr(r):t[n]=r);return t}function Qs(e,t){for(;e!==null;){const r=Vv(e,t);if(r){if(r.get)return hn(r.get);if(typeof r.value=="function")return hn(r.value)}e=Wv(e)}function n(){return null}return n}const kl=pn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),so=pn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ao=pn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Qv=pn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),uo=pn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),eg=pn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wl=pn(["#text"]),El=pn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),oo=pn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Sl=pn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ja=pn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tg=Pn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ng=Pn(/<%[\w\W]*|[\w\W]*%>/gm),rg=Pn(/\$\{[\w\W]*/gm),sg=Pn(/^data-[\-\w.\u00B7-\uFFFF]+$/),ag=Pn(/^aria-[\-\w]+$/),bd=Pn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ug=Pn(/^(?:\w+script|data):/i),og=Pn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_d=Pn(/^html$/i),ig=Pn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Cl=Object.freeze({__proto__:null,ARIA_ATTR:ag,ATTR_WHITESPACE:og,CUSTOM_ELEMENT:ig,DATA_ATTR:sg,DOCTYPE_NAME:_d,ERB_EXPR:ng,IS_ALLOWED_URI:bd,IS_SCRIPT_OR_DATA:ug,MUSTACHE_EXPR:tg,TMPLIT_EXPR:rg});const ea={element:1,text:3,progressingInstruction:7,comment:8,document:9},lg=function(){return typeof window>"u"?null:window},cg=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Al=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function yd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lg();const t=Ce=>yd(Ce);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==ea.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:u,Node:i,Element:l,NodeFilter:c,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:v,trustedTypes:h}=e,p=l.prototype,x=Qs(p,"cloneNode"),y=Qs(p,"remove"),_=Qs(p,"nextSibling"),E=Qs(p,"childNodes"),S=Qs(p,"parentNode");if(typeof u=="function"){const Ce=n.createElement("template");Ce.content&&Ce.content.ownerDocument&&(n=Ce.content.ownerDocument)}let b,D="";const{implementation:A,createNodeIterator:P,createDocumentFragment:Z,getElementsByTagName:Y}=n,{importNode:T}=r;let N=Al();t.isSupported=typeof vd=="function"&&typeof S=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Q,ERB_EXPR:I,TMPLIT_EXPR:V,DATA_ATTR:J,ARIA_ATTR:se,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:ae,CUSTOM_ELEMENT:ue}=Cl;let{IS_ALLOWED_URI:L}=Cl,U=null;const G=Ye({},[...kl,...so,...ao,...uo,...wl]);let ie=null;const H=Ye({},[...El,...oo,...Sl,...ja]);let q=Object.seal(gd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,le=null,xe=!0,De=!0,B=!1,_e=!0,Ne=!1,Be=!0,Oe=!1,ke=!1,We=!1,he=!1,ne=!1,ge=!1,be=!0,Te=!1;const qe="user-content-";let ce=!0,pe=!1,Ee={},Fe=null;const et=Ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rt=null;const Le=Ye({},["audio","video","img","source","image","track"]);let ze=null;const je=Ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",ct="http://www.w3.org/2000/svg",He="http://www.w3.org/1999/xhtml";let ht=He,Bt=!1,bt=null;const Zt=Ye({},[Je,ct,He],no);let jt=Ye({},["mi","mo","mn","ms","mtext"]),qt=Ye({},["annotation-xml"]);const st=Ye({},["title","style","font","a","script"]);let Ve=null;const Ft=["application/xhtml+xml","text/html"],ye="text/html";let Se=null,ut=null;const Yt=n.createElement("form"),At=function(M){return M instanceof RegExp||M instanceof Function},Nt=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ut&&ut===M)){if((!M||typeof M!="object")&&(M={}),M=lr(M),Ve=Ft.indexOf(M.PARSER_MEDIA_TYPE)===-1?ye:M.PARSER_MEDIA_TYPE,Se=Ve==="application/xhtml+xml"?no:eu,U=On(M,"ALLOWED_TAGS")?Ye({},M.ALLOWED_TAGS,Se):G,ie=On(M,"ALLOWED_ATTR")?Ye({},M.ALLOWED_ATTR,Se):H,bt=On(M,"ALLOWED_NAMESPACES")?Ye({},M.ALLOWED_NAMESPACES,no):Zt,ze=On(M,"ADD_URI_SAFE_ATTR")?Ye(lr(je),M.ADD_URI_SAFE_ATTR,Se):je,rt=On(M,"ADD_DATA_URI_TAGS")?Ye(lr(Le),M.ADD_DATA_URI_TAGS,Se):Le,Fe=On(M,"FORBID_CONTENTS")?Ye({},M.FORBID_CONTENTS,Se):et,z=On(M,"FORBID_TAGS")?Ye({},M.FORBID_TAGS,Se):lr({}),le=On(M,"FORBID_ATTR")?Ye({},M.FORBID_ATTR,Se):lr({}),Ee=On(M,"USE_PROFILES")?M.USE_PROFILES:!1,xe=M.ALLOW_ARIA_ATTR!==!1,De=M.ALLOW_DATA_ATTR!==!1,B=M.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=M.SAFE_FOR_TEMPLATES||!1,Be=M.SAFE_FOR_XML!==!1,Oe=M.WHOLE_DOCUMENT||!1,he=M.RETURN_DOM||!1,ne=M.RETURN_DOM_FRAGMENT||!1,ge=M.RETURN_TRUSTED_TYPE||!1,We=M.FORCE_BODY||!1,be=M.SANITIZE_DOM!==!1,Te=M.SANITIZE_NAMED_PROPS||!1,ce=M.KEEP_CONTENT!==!1,pe=M.IN_PLACE||!1,L=M.ALLOWED_URI_REGEXP||bd,ht=M.NAMESPACE||He,jt=M.MATHML_TEXT_INTEGRATION_POINTS||jt,qt=M.HTML_INTEGRATION_POINTS||qt,q=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&At(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&At(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(De=!1),ne&&(he=!0),Ee&&(U=Ye({},wl),ie=[],Ee.html===!0&&(Ye(U,kl),Ye(ie,El)),Ee.svg===!0&&(Ye(U,so),Ye(ie,oo),Ye(ie,ja)),Ee.svgFilters===!0&&(Ye(U,ao),Ye(ie,oo),Ye(ie,ja)),Ee.mathMl===!0&&(Ye(U,uo),Ye(ie,Sl),Ye(ie,ja))),M.ADD_TAGS&&(U===G&&(U=lr(U)),Ye(U,M.ADD_TAGS,Se)),M.ADD_ATTR&&(ie===H&&(ie=lr(ie)),Ye(ie,M.ADD_ATTR,Se)),M.ADD_URI_SAFE_ATTR&&Ye(ze,M.ADD_URI_SAFE_ATTR,Se),M.FORBID_CONTENTS&&(Fe===et&&(Fe=lr(Fe)),Ye(Fe,M.FORBID_CONTENTS,Se)),ce&&(U["#text"]=!0),Oe&&Ye(U,["html","head","body"]),U.table&&(Ye(U,["tbody"]),delete z.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=M.TRUSTED_TYPES_POLICY,D=b.createHTML("")}else b===void 0&&(b=cg(h,s)),b!==null&&typeof D=="string"&&(D=b.createHTML(""));pn&&pn(M),ut=M}},bn=Ye({},[...so,...ao,...Qv]),ur=Ye({},[...uo,...eg]),In=function(M){let te=S(M);(!te||!te.tagName)&&(te={namespaceURI:ht,tagName:"template"});const ee=eu(M.tagName),Ie=eu(te.tagName);return bt[M.namespaceURI]?M.namespaceURI===ct?te.namespaceURI===He?ee==="svg":te.namespaceURI===Je?ee==="svg"&&(Ie==="annotation-xml"||jt[Ie]):!!bn[ee]:M.namespaceURI===Je?te.namespaceURI===He?ee==="math":te.namespaceURI===ct?ee==="math"&&qt[Ie]:!!ur[ee]:M.namespaceURI===He?te.namespaceURI===ct&&!qt[Ie]||te.namespaceURI===Je&&!jt[Ie]?!1:!ur[ee]&&(st[ee]||!bn[ee]):!!(Ve==="application/xhtml+xml"&&bt[M.namespaceURI]):!1},Me=function(M){Ys(t.removed,{element:M});try{S(M).removeChild(M)}catch{y(M)}},Re=function(M,te){try{Ys(t.removed,{attribute:te.getAttributeNode(M),from:te})}catch{Ys(t.removed,{attribute:null,from:te})}if(te.removeAttribute(M),M==="is")if(he||ne)try{Me(te)}catch{}else try{te.setAttribute(M,"")}catch{}},Mt=function(M){let te=null,ee=null;if(We)M="<remove></remove>"+M;else{const re=ro(M,/^[\r\n\t ]+/);ee=re&&re[0]}Ve==="application/xhtml+xml"&&ht===He&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const Ie=b?b.createHTML(M):M;if(ht===He)try{te=new v().parseFromString(Ie,Ve)}catch{}if(!te||!te.documentElement){te=A.createDocument(ht,"template",null);try{te.documentElement.innerHTML=Bt?D:Ie}catch{}}const j=te.body||te.documentElement;return M&&ee&&j.insertBefore(n.createTextNode(ee),j.childNodes[0]||null),ht===He?Y.call(te,Oe?"html":"body")[0]:Oe?te.documentElement:j},zt=function(M){return P.call(M.ownerDocument||M,M,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},rn=function(M){return M instanceof d&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof f)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},tt=function(M){return typeof i=="function"&&M instanceof i};function Ge(Ce,M,te){Ba(Ce,ee=>{ee.call(t,M,te,ut)})}const mt=function(M){let te=null;if(Ge(N.beforeSanitizeElements,M,null),rn(M))return Me(M),!0;const ee=Se(M.nodeName);if(Ge(N.uponSanitizeElement,M,{tagName:ee,allowedTags:U}),Be&&M.hasChildNodes()&&!tt(M.firstElementChild)&&on(/<[/\w!]/g,M.innerHTML)&&on(/<[/\w!]/g,M.textContent)||M.nodeType===ea.progressingInstruction||Be&&M.nodeType===ea.comment&&on(/<[/\w]/g,M.data))return Me(M),!0;if(!U[ee]||z[ee]){if(!z[ee]&&Ot(ee)&&(q.tagNameCheck instanceof RegExp&&on(q.tagNameCheck,ee)||q.tagNameCheck instanceof Function&&q.tagNameCheck(ee)))return!1;if(ce&&!Fe[ee]){const Ie=S(M)||M.parentNode,j=E(M)||M.childNodes;if(j&&Ie){const re=j.length;for(let we=re-1;we>=0;--we){const Pe=x(j[we],!0);Pe.__removalCount=(M.__removalCount||0)+1,Ie.insertBefore(Pe,_(M))}}}return Me(M),!0}return M instanceof l&&!In(M)||(ee==="noscript"||ee==="noembed"||ee==="noframes")&&on(/<\/no(script|embed|frames)/i,M.innerHTML)?(Me(M),!0):(Ne&&M.nodeType===ea.text&&(te=M.textContent,Ba([Q,I,V],Ie=>{te=Js(te,Ie," ")}),M.textContent!==te&&(Ys(t.removed,{element:M.cloneNode()}),M.textContent=te)),Ge(N.afterSanitizeElements,M,null),!1)},Lt=function(M,te,ee){if(be&&(te==="id"||te==="name")&&(ee in n||ee in Yt))return!1;if(!(De&&!le[te]&&on(J,te))){if(!(xe&&on(se,te))){if(!ie[te]||le[te]){if(!(Ot(M)&&(q.tagNameCheck instanceof RegExp&&on(q.tagNameCheck,M)||q.tagNameCheck instanceof Function&&q.tagNameCheck(M))&&(q.attributeNameCheck instanceof RegExp&&on(q.attributeNameCheck,te)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(te,M))||te==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&on(q.tagNameCheck,ee)||q.tagNameCheck instanceof Function&&q.tagNameCheck(ee))))return!1}else if(!ze[te]){if(!on(L,Js(ee,ae,""))){if(!((te==="src"||te==="xlink:href"||te==="href")&&M!=="script"&&Zv(ee,"data:")===0&&rt[M])){if(!(B&&!on(de,Js(ee,ae,"")))){if(ee)return!1}}}}}}return!0},Ot=function(M){return M!=="annotation-xml"&&ro(M,ue)},ot=function(M){Ge(N.beforeSanitizeAttributes,M,null);const{attributes:te}=M;if(!te||rn(M))return;const ee={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ie,forceKeepAttr:void 0};let Ie=te.length;for(;Ie--;){const j=te[Ie],{name:re,namespaceURI:we,value:Pe}=j,Ze=Se(re),Et=Pe;let Ue=re==="value"?Et:Yv(Et);if(ee.attrName=Ze,ee.attrValue=Ue,ee.keepAttr=!0,ee.forceKeepAttr=void 0,Ge(N.uponSanitizeAttribute,M,ee),Ue=ee.attrValue,Te&&(Ze==="id"||Ze==="name")&&(Re(re,M),Ue=qe+Ue),Be&&on(/((--!?|])>)|<\/(style|title|textarea)/i,Ue)){Re(re,M);continue}if(Ze==="attributename"&&ro(Ue,"href")){Re(re,M);continue}if(ee.forceKeepAttr)continue;if(!ee.keepAttr){Re(re,M);continue}if(!_e&&on(/\/>/i,Ue)){Re(re,M);continue}Ne&&Ba([Q,I,V],St=>{Ue=Js(Ue,St," ")});const ft=Se(M.nodeName);if(!Lt(ft,Ze,Ue)){Re(re,M);continue}if(b&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!we)switch(h.getAttributeType(ft,Ze)){case"TrustedHTML":{Ue=b.createHTML(Ue);break}case"TrustedScriptURL":{Ue=b.createScriptURL(Ue);break}}if(Ue!==Et)try{we?M.setAttributeNS(we,re,Ue):M.setAttribute(re,Ue),rn(M)?Me(M):xl(t.removed)}catch{Re(re,M)}}Ge(N.afterSanitizeAttributes,M,null)},Pt=function Ce(M){let te=null;const ee=zt(M);for(Ge(N.beforeSanitizeShadowDOM,M,null);te=ee.nextNode();)Ge(N.uponSanitizeShadowNode,te,null),mt(te),ot(te),te.content instanceof a&&Ce(te.content);Ge(N.afterSanitizeShadowDOM,M,null)};return t.sanitize=function(Ce){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=null,ee=null,Ie=null,j=null;if(Bt=!Ce,Bt&&(Ce="<!-->"),typeof Ce!="string"&&!tt(Ce))if(typeof Ce.toString=="function"){if(Ce=Ce.toString(),typeof Ce!="string")throw Xs("dirty is not a string, aborting")}else throw Xs("toString is not a function");if(!t.isSupported)return Ce;if(ke||Nt(M),t.removed=[],typeof Ce=="string"&&(pe=!1),pe){if(Ce.nodeName){const Pe=Se(Ce.nodeName);if(!U[Pe]||z[Pe])throw Xs("root node is forbidden and cannot be sanitized in-place")}}else if(Ce instanceof i)te=Mt("<!---->"),ee=te.ownerDocument.importNode(Ce,!0),ee.nodeType===ea.element&&ee.nodeName==="BODY"||ee.nodeName==="HTML"?te=ee:te.appendChild(ee);else{if(!he&&!Ne&&!Oe&&Ce.indexOf("<")===-1)return b&&ge?b.createHTML(Ce):Ce;if(te=Mt(Ce),!te)return he?null:ge?D:""}te&&We&&Me(te.firstChild);const re=zt(pe?Ce:te);for(;Ie=re.nextNode();)mt(Ie),ot(Ie),Ie.content instanceof a&&Pt(Ie.content);if(pe)return Ce;if(he){if(ne)for(j=Z.call(te.ownerDocument);te.firstChild;)j.appendChild(te.firstChild);else j=te;return(ie.shadowroot||ie.shadowrootmode)&&(j=T.call(r,j,!0)),j}let we=Oe?te.outerHTML:te.innerHTML;return Oe&&U["!doctype"]&&te.ownerDocument&&te.ownerDocument.doctype&&te.ownerDocument.doctype.name&&on(_d,te.ownerDocument.doctype.name)&&(we="<!DOCTYPE "+te.ownerDocument.doctype.name+`>
`+we),Ne&&Ba([Q,I,V],Pe=>{we=Js(we,Pe," ")}),b&&ge?b.createHTML(we):we},t.setConfig=function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Nt(Ce),ke=!0},t.clearConfig=function(){ut=null,ke=!1},t.isValidAttribute=function(Ce,M,te){ut||Nt({});const ee=Se(Ce),Ie=Se(M);return Lt(ee,Ie,te)},t.addHook=function(Ce,M){typeof M=="function"&&Ys(N[Ce],M)},t.removeHook=function(Ce,M){if(M!==void 0){const te=Gv(N[Ce],M);return te===-1?void 0:Kv(N[Ce],te,1)[0]}return xl(N[Ce])},t.removeHooks=function(Ce){N[Ce]=[]},t.removeAllHooks=function(){N=Al()},t}var xd=yd();const dg=new Mn({html:!1,linkify:!0,typographer:!0,breaks:!0}),fg={USE_PROFILES:{html:!0},ADD_ATTR:["target","rel","class","colspan","rowspan","scope"],ADD_TAGS:["table","thead","tbody","tfoot","tr","th","td"]};xd.addHook("afterSanitizeAttributes",e=>{const t=e;if(!t||typeof t.tagName!="string"||t.tagName.toUpperCase()!=="A")return;t.setAttribute("target","_blank");const n=(t.getAttribute("rel")||"").split(/\s+/).filter(Boolean),r=["noopener","noreferrer","nofollow","ugc"],s=Array.from(new Set([...n,...r]));t.setAttribute("rel",s.join(" "))});function ks(e){if(!e)return"";const t=dg.render(e);return xd.sanitize(t,fg)}var pg=F('<span class="sender-model-text svelte-1cnmaqf"> </span>'),hg=F('<span class="sender-token-count svelte-1cnmaqf" aria-label="Total tokens used" title="Total tokens used"> </span>'),mg=F('<button type="button" aria-label="View reasoning trace"><!></button>'),vg=F('<button type="button" class="sender-citation-indicator svelte-1cnmaqf" aria-label="View web search details" title="View web search details"><!></button>'),gg=F('<span class="sender-tool-count svelte-1cnmaqf"> </span>'),bg=F('<span class="sender-tool-tokens svelte-1cnmaqf"> </span>'),_g=F('<button type="button" class="sender-tool-indicator svelte-1cnmaqf"><!> <!> <!></button>'),yg=F('<span class="sender-model svelte-1cnmaqf"><!> <!> <!> <!> <!></span>'),xg=F('<span class="sender svelte-1cnmaqf"><span class="sender-label svelte-1cnmaqf"> <!></span></span>'),kg=F('<button type="button" class="attachment-edit svelte-1cnmaqf" aria-label="Edit and resend image" title="Edit and resend image"><!> <span class="attachment-edit-label svelte-1cnmaqf">Edit &amp; send</span></button>'),wg=F('<figure class="attachment-card svelte-1cnmaqf"><div class="attachment-shell svelte-1cnmaqf"><a class="attachment-link svelte-1cnmaqf" target="_blank" rel="noreferrer"><img loading="lazy" class="svelte-1cnmaqf"/></a> <!></div></figure>'),Eg=F('<div class="message-attachments svelte-1cnmaqf"></div>'),Sg=F('<div class="message-meta svelte-1cnmaqf"><time class="svelte-1cnmaqf"> </time></div>'),Cg=F('<button type="button" class="message-action svelte-1cnmaqf" aria-label="Edit message"><!></button> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Retry message"><!></button>',1),Ag=F('<button type="button" class="message-action svelte-1cnmaqf" aria-label="View usage details"><!></button>'),Dg=F('<article><div><!> <div class="message-content svelte-1cnmaqf"><!> <!></div> <!> <div class="message-actions svelte-1cnmaqf"><button type="button"><!></button> <!> <!> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Delete message"><!></button></div></div></article>');function Tg(e,t){it(t,!1);const n=R(),r=R(),s=R(),a=R();let u=oe(t,"message",8),i=oe(t,"toolSummary",8),l=oe(t,"copied",8,!1),c=oe(t,"disableDelete",8,!1);const f=It();let d=R(!1),v=R([]),h=R(!1),p=R(!1),x=R("View tool usage"),y=R(null),_=R(null),E=R(null);const S=new Intl.NumberFormat(void 0,{maximumFractionDigits:0});function b(){f("copy",{message:u()})}function D(){f("openReasoning",{message:u()})}function A(){f("openTool",{message:u()})}function P(){f("openWebSearchDetails",{message:u()})}function Z(){const ce=u().details?.generationId;ce&&f("openUsage",{id:ce})}function Y(){f("edit",{message:u()})}function T(){f("retry",{message:u()})}function N(){c()||f("delete",{message:u()})}function Q(ce){f("editAttachment",{message:u(),attachment:ce})}function I(ce){const pe=ce.metadata?.filename;return typeof pe=="string"&&pe.trim()?pe:null}function V(ce){const pe=I(ce);return pe?`Open attachment ${pe}`:"Open attachment"}function J(ce){return I(ce)??"Attachment preview"}const se="America/New_York";function de(ce){if(!ce)return null;const pe=new Date(ce);if(Number.isNaN(pe.getTime()))return null;const Ee=new Intl.DateTimeFormat("en-US",{timeZone:"UTC",weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(pe),Fe=He=>Ee.find(ht=>ht.type===He)?.value??"",et=Fe("weekday"),rt=Fe("month"),Le=Fe("day"),ze=Fe("year"),je=Fe("hour"),Je=Fe("minute"),ct=Fe("second");return`${et} ${rt} ${Le} ${ze} ${je}:${Je}:${ct} UTC`.replace(/\s+/g," ")}function ae(ce,pe){if(!ce)return null;const Ee=typeof ce=="string"&&ce?ce:String(ce),Fe=new Date(Ee);if(Number.isNaN(Fe.getTime()))return{iso:Ee,display:Ee,tooltip:Ee};try{const rt=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:se,timeZoneName:"short"}).formatToParts(Fe),Le=st=>rt.find(Ve=>Ve.type===st)?.value??"",ze=Le("hour"),je=Le("minute"),Je=Le("second"),ct=Le("dayPeriod"),He=Le("timeZoneName"),ht=`${ze}:${je} ${ct}${He?` ${He}`:""}`.trim(),Bt=`${ze}:${je}:${Je} ${ct}${He?` ${He}`:""}`.trim(),bt=new Intl.DateTimeFormat(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:se,timeZoneName:"short"}),Zt=de(pe??ce),jt=`${bt.format(Fe)} (${Bt})`,qt=Zt?`${jt}
${Zt}`:jt;return{iso:Ee,display:ht,tooltip:qt}}catch(et){console.warn("Failed to format timestamp",et);const rt=de(pe??ce);return{iso:Ee,display:Fe.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),tooltip:rt??Ee}}}ve(()=>O(i()),()=>{w(n,i()?.tokens?.totalTokens??null)}),ve(()=>o(n),()=>{w(E,o(n)!=null?`${S.format(o(n))} tokens`:null)}),ve(()=>O(i()),()=>{w(y,i()?.count&&i().count>0?`Ã${i().count}`:null)}),ve(()=>O(i()),()=>{w(p,!!i()?.used)}),ve(()=>{},()=>{w(_,null)}),ve(()=>(O(i()),o(E)),()=>{w(x,(()=>{const ce=[];return i()?.count&&i().count>0&&ce.push(`${i().count} ${i().count===1?"hop":"hops"}`),o(E)&&ce.push(`${o(E)}`),ce.length===0?"View tool usage":`View tool usage â ${ce.join(", ")}`})())}),ve(()=>O(u()),()=>{w(d,(u().details?.reasoning?.length??0)>0||!!u().details?.reasoningStatus)}),ve(()=>(O(u()),o(v),jr),()=>{const ce=u().details?.meta?.web_search_results;u().role==="assistant"&&(console.log("=== FULL MESSAGE DEBUG ==="),console.log("Message ID:",u().id),console.log("Message role:",u().role),console.log("Message.details:",JSON.stringify(u().details,null,2)),console.log("webSearchResults:",ce),console.log("Is Array?",Array.isArray(ce)),console.log("Length:",Array.isArray(ce)?ce.length:0),console.log("========================")),Array.isArray(ce)&&ce.length>0?(w(v,ce.map(pe=>({url:pe.url||"",title:pe.title||pe.name||"",content:pe.snippet||pe.content||pe.description||""})).filter(pe=>pe.url)),console.log("Citations extracted:",o(v))):(w(v,jr(u().details?.citations??null,u().details?.meta??null,u().details??null,u().content??null,{content:typeof u().content=="string"?u().content:null})),console.log("Citations from collectCitations:",o(v)))}),ve(()=>o(v),()=>{w(r,o(v).length>0)}),ve(()=>O(u()),()=>{w(h,!!u().details?.webSearchConfig)}),ve(()=>O(u()),()=>{w(s,(u().attachments?.length??0)>0)}),ve(()=>O(u()),()=>{w(a,ae(u().createdAt,u().createdAtUtc))}),Rt(),dt();var ue=Dg(),L=g(ue);let U;var G=g(L);{var ie=ce=>{var pe=xg(),Ee=g(pe),Fe=g(Ee),et=C(Fe);{var rt=Le=>{var ze=yg(),je=g(ze);{var Je=st=>{var Ve=pg(),Ft=g(Ve);K(()=>X(Ft,`â ${O(u()),m(()=>u().details.model)??""}`)),k(st,Ve)};$(je,st=>{O(u()),m(()=>u().details?.model)&&st(Je)})}var ct=C(je,2);{var He=st=>{var Ve=hg(),Ft=g(Ve);K(()=>X(Ft,o(E))),k(st,Ve)};$(ct,st=>{o(E)&&st(He)})}var ht=C(ct,2);{var Bt=st=>{var Ve=mg();let Ft;var ye=g(Ve);Mp(ye,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),K(Se=>{Ft=Ct(Ve,1,"sender-reasoning-indicator svelte-1cnmaqf",null,Ft,Se),fe(Ve,"title",(O(u()),m(()=>u().details?.reasoningStatus==="streaming"?"Reasoning stream in progress":"View reasoning trace")))},[()=>({streaming:u().details?.reasoningStatus==="streaming"})]),W("click",Ve,D),k(st,Ve)};$(ht,st=>{o(d)&&st(Bt)})}var bt=C(ht,2);{var Zt=st=>{var Ve=vg(),Ft=g(Ve);Lp(Ft,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),W("click",Ve,P),k(st,Ve)};$(bt,st=>{o(h)&&st(Zt)})}var jt=C(bt,2);{var qt=st=>{var Ve=_g(),Ft=g(Ve);zp(Ft,{size:14,strokeWidth:1.8,"aria-hidden":"true"});var ye=C(Ft,2);{var Se=At=>{var Nt=gg(),bn=g(Nt);K(()=>X(bn,o(y))),k(At,Nt)};$(ye,At=>{o(y)&&At(Se)})}var ut=C(ye,2);{var Yt=At=>{var Nt=bg(),bn=g(Nt);K(()=>X(bn,o(_))),k(At,Nt)};$(ut,At=>{o(_)&&At(Yt)})}K(()=>{fe(Ve,"aria-label",o(x)),fe(Ve,"title",o(x))}),W("click",Ve,A),k(st,Ve)};$(jt,st=>{o(p)&&st(qt)})}k(Le,ze)};$(et,Le=>{O(u()),m(()=>u().role==="assistant")&&Le(rt)})}K(()=>X(Fe,`${O(u()),m(()=>u().role)??""} `)),k(ce,pe)};$(G,ce=>{O(u()),m(()=>u().role!=="user")&&ce(ie)})}var H=C(G,2),q=g(H);{var z=ce=>{var pe=Ae(),Ee=me(pe);yo(Ee,()=>(O(ks),O(u()),m(()=>ks(u().text)))),k(ce,pe)};$(q,ce=>{O(u()),m(()=>u().text)&&ce(z)})}var le=C(q,2);{var xe=ce=>{var pe=Eg();_t(pe,5,()=>(O(u()),m(()=>u().attachments)),Ee=>Ee.id??Ee.displayUrl??Ee.deliveryUrl,(Ee,Fe)=>{var et=wg(),rt=g(et),Le=g(rt),ze=g(Le),je=C(Le,2);{var Je=ct=>{var He=kg(),ht=g(He);zi(ht,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),W("click",He,()=>Q(o(Fe))),k(ct,He)};$(je,ct=>{O(u()),m(()=>u().role==="assistant")&&ct(Je)})}K((ct,He)=>{fe(Le,"href",(o(Fe),m(()=>o(Fe).displayUrl||o(Fe).deliveryUrl))),fe(Le,"aria-label",ct),fe(ze,"src",(o(Fe),m(()=>o(Fe).displayUrl||o(Fe).deliveryUrl))),fe(ze,"alt",He)},[()=>(o(Fe),m(()=>V(o(Fe)))),()=>(o(Fe),m(()=>J(o(Fe))))]),k(Ee,et)}),k(ce,pe)};$(le,ce=>{O(u()),m(()=>u().attachments?.length)&&ce(xe)})}Jr(H,ce=>Ao?.(ce));var De=C(H,2);{var B=ce=>{var pe=Sg(),Ee=g(pe),Fe=g(Ee);K(()=>{fe(Ee,"datetime",(o(a),m(()=>o(a).iso))),fe(Ee,"title",(o(a),m(()=>o(a).tooltip))),X(Fe,(o(a),m(()=>o(a).display)))}),k(ce,pe)};$(De,ce=>{o(a)&&ce(B)})}var _e=C(De,2),Ne=g(_e);let Be;var Oe=g(Ne);{var ke=ce=>{Ip(ce,{size:16,strokeWidth:1.6,"aria-hidden":"true"})},We=ce=>{Np(ce,{size:16,strokeWidth:1.6,"aria-hidden":"true"})};$(Oe,ce=>{l()?ce(ke):ce(We,!1)})}var he=C(Ne,2);{var ne=ce=>{var pe=Cg(),Ee=me(pe),Fe=g(Ee);zi(Fe,{size:16,strokeWidth:1.6,"aria-hidden":"true"});var et=C(Ee,2),rt=g(et);Op(rt,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),W("click",Ee,Y),W("click",et,T),k(ce,pe)};$(he,ce=>{O(u()),m(()=>u().role==="user")&&ce(ne)})}var ge=C(he,2);{var be=ce=>{var pe=Ag(),Ee=g(pe);Pp(Ee,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),W("click",pe,Z),k(ce,pe)};$(ge,ce=>{O(u()),m(()=>u().role==="assistant"&&u().details?.generationId)&&ce(be)})}var Te=C(ge,2),qe=g(Te);Rp(qe,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),K((ce,pe)=>{Ct(ue,1,(O(u()),m(()=>`message ${u().role}`)),"svelte-1cnmaqf"),U=Ct(L,1,"bubble svelte-1cnmaqf",null,U,ce),Be=Ct(Ne,1,"message-action svelte-1cnmaqf",null,Be,pe),fe(Ne,"aria-label",l()?"Message copied":"Copy message"),Te.disabled=c()},[()=>({"has-attachments":o(s)}),()=>({copied:l()})]),W("click",Ne,b),W("click",Te,N),k(e,ue),lt()}var Fg=F('<p class="reasoning-modal-subtitle svelte-2cxve6"> </p>'),Mg=F('<span aria-live="polite"><span class="reasoning-status-indicator svelte-2cxve6" aria-hidden="true"></span> </span>'),Pg=F('<p class="reasoning-modal-status svelte-2cxve6">No reasoning data received yet.</p>'),Ig=F('<pre class="reasoning-modal-text svelte-2cxve6"> </pre>'),Ng=F('<div class="reasoning-modal-layer svelte-2cxve6"><button type="button" class="reasoning-modal-backdrop svelte-2cxve6" aria-label="Close reasoning details"></button> <div class="reasoning-modal svelte-2cxve6" role="dialog" aria-modal="true" aria-labelledby="reasoning-modal-title" tabindex="-1"><header class="reasoning-modal-header svelte-2cxve6"><div class="svelte-2cxve6"><h2 id="reasoning-modal-title" class="svelte-2cxve6">Reasoning trace</h2> <!></div> <div class="reasoning-modal-actions svelte-2cxve6"><!> <button type="button" class="modal-close svelte-2cxve6" aria-label="Close reasoning details">Close</button></div></header> <section class="reasoning-modal-body svelte-2cxve6"><!></section></div></div>');function Lg(e,t){it(t,!1);const n=It();let r=oe(t,"open",8,!1),s=oe(t,"messageId",8,null),a=oe(t,"segments",24,()=>[]),u=oe(t,"status",8,null),i=R(null),l=R(null),c=R("");const f=12;let d=!0,v=!1;function h(b){if(!b||b.length===0)return"";let D="",A;for(const P of b){if(!P||typeof P.text!="string"||P.text.length===0)continue;const Z=P.text;A&&P.type&&A!==P.type&&(D.endsWith(`
`)||(D+=`
`),D+=`
`),D.length>0&&!D.endsWith(" ")&&!D.endsWith(`
`)&&!D.endsWith("	")&&!D.endsWith("(")&&!D.endsWith("[")&&!D.endsWith("{")&&!D.endsWith("/")&&!D.endsWith("'")&&!D.endsWith("â")&&!/^[\s,.!?;:)/\]\}'"âºÂ»]/u.test(Z)&&Z[0]!=="'"&&Z[0]!=="â"&&(D+=" "),D+=Z,A=P.type??A}return D}wc(()=>{r()&&!v&&(d=!0),v=r(),r()&&o(i)&&o(i).focus(),r()&&o(l)&&u()==="streaming"&&d&&Zl(l,o(l).scrollTop=o(l).scrollHeight)});function p(){if(!o(l))return;const{scrollTop:b,scrollHeight:D,clientHeight:A}=o(l);d=D-(b+A)<=f}function x(){n("close")}function y(b){r()&&b.key==="Escape"&&(b.preventDefault(),x())}ve(()=>O(a()),()=>{w(c,h(a()))}),Rt(),dt();var _=Ae();W("keydown",au,y);var E=me(_);{var S=b=>{var D=Ng(),A=g(D),P=C(A,2),Z=g(P),Y=g(Z),T=C(g(Y),2);{var N=L=>{var U=Fg(),G=g(U);K(()=>X(G,`Message ID: ${s()??""}`)),k(L,U)};$(T,L=>{s()&&L(N)})}var Q=C(Y,2),I=g(Q);{var V=L=>{var U=Mg(),G=C(g(U));K(()=>{Ct(U,1,`reasoning-status ${u()}`,"svelte-2cxve6"),X(G,` ${u()==="streaming"?"Streaming":"Complete"}`)}),k(L,U)};$(I,L=>{u()&&L(V)})}var J=C(I,2),se=C(Z,2),de=g(se);{var ae=L=>{var U=Pg();k(L,U)},ue=L=>{var U=Ig(),G=g(U);K(()=>X(G,o(c))),k(L,U)};$(de,L=>{o(c),m(()=>o(c).length===0)?L(ae):L(ue,!1)})}Xr(se,L=>w(l,L),()=>o(l)),Xr(P,L=>w(i,L),()=>o(i)),W("click",A,x),W("click",J,x),W("scroll",se,p),k(b,D)};$(E,b=>{r()&&b(S)})}k(e,_),lt()}var Og=F('<p class="status">No tool activity recorded.</p>'),$g=F('<span class="tool-usage-modal-status-pill svelte-12mixwl"> </span>'),Rg=F('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Input</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),zg=F('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Output</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),Ug=F('<p class="status tool-usage-status svelte-12mixwl">No details provided.</p>'),Bg=F('<li class="tool-usage-modal-item svelte-12mixwl"><div class="tool-usage-modal-item-header svelte-12mixwl"><span class="tool-usage-modal-name svelte-12mixwl"> </span> <!></div> <details class="tool-usage-modal-details svelte-12mixwl"><summary class="tool-usage-modal-summary svelte-12mixwl">Show input &amp; output</summary> <!> <!> <!></details></li>'),jg=F('<ul class="tool-usage-modal-list svelte-12mixwl"></ul>'),qg=F('<p class="model-settings-subtitle"> </p>'),Hg=F('<h2 id="tool-usage-modal-title">Tools used</h2> <!>',1);function Wg(e,t){it(t,!1);const n=It();let r=oe(t,"open",8,!1),s=oe(t,"messageId",8,null),a=oe(t,"tools",24,()=>[]);function u(){n("close")}dt();var i=Ae(),l=me(i);{var c=f=>{vr(f,{get open(){return r()},labelledBy:"tool-usage-modal-title",modalClass:"tool-usage-modal",bodyClass:"tool-usage-body",closeLabel:"Close tool usage details",$$events:{close:u},children:(d,v)=>{var h=Ae(),p=me(h);{var x=_=>{var E=Og();k(_,E)},y=_=>{var E=jg();_t(E,5,a,S=>S.id,(S,b)=>{var D=Bg(),A=g(D),P=g(A),Z=g(P),Y=C(P,2);{var T=ae=>{var ue=$g(),L=g(ue);K(()=>X(L,(o(b),m(()=>o(b).status)))),k(ae,ue)};$(Y,ae=>{o(b),m(()=>o(b).status)&&ae(T)})}var N=C(A,2),Q=C(g(N),2);{var I=ae=>{var ue=Rg(),L=C(g(ue),2),U=g(L);yo(U,()=>(O(ks),o(b),m(()=>ks(o(b).input)))),Jr(L,G=>Ao?.(G)),k(ae,ue)};$(Q,ae=>{o(b),m(()=>o(b).input)&&ae(I)})}var V=C(Q,2);{var J=ae=>{var ue=zg(),L=C(g(ue),2),U=g(L);yo(U,()=>(O(ks),o(b),m(()=>ks(o(b).result)))),Jr(L,G=>Ao?.(G)),k(ae,ue)};$(V,ae=>{o(b),m(()=>o(b).result)&&ae(J)})}var se=C(V,2);{var de=ae=>{var ue=Ug();k(ae,ue)};$(se,ae=>{o(b),m(()=>!o(b).input&&!o(b).result)&&ae(de)})}K(()=>X(Z,(o(b),m(()=>o(b).name)))),k(S,D)}),k(_,E)};$(p,_=>{O(a()),m(()=>a().length===0)?_(x):_(y,!1)})}k(d,h)},$$slots:{default:!0,heading:(d,v)=>{var h=Hg(),p=C(me(h),2);{var x=y=>{var _=qg(),E=g(_);K(()=>X(E,`Message ID: ${s()??""}`)),k(y,_)};$(p,y=>{s()&&y(x)})}k(d,h)}}})};$(l,f=>{r()&&f(c)})}k(e,i),lt()}var Vg=F('<p class="status svelte-1oswcu0">No web search details available.</p>'),Gg=F('<div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Context Size</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Amount of search context provided to the model</div></div>'),Kg=F('<div class="detail-item full-width svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Custom Search Prompt</div> <div class="detail-value prompt svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Instructions for how to incorporate search results</div></div>'),Zg=F('<div class="details-grid svelte-1oswcu0"><div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Search Engine</div> <div class="detail-value engine svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0"><!></div></div> <div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Max Results</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Number of search results retrieved</div></div> <!> <!></div>'),Yg=F('<p class="model-settings-subtitle"> </p>'),Jg=F('<h2 id="web-search-details-modal-title">Web Search Details</h2> <!>',1);function Xg(e,t){it(t,!1);const n=It();let r=oe(t,"open",8,!1),s=oe(t,"messageId",8,null),a=oe(t,"details",8,null);function u(){n("close")}function i(v){return v?v==="native"?"Native (OpenAI/Anthropic)":v==="exa"?"Exa":v:"Auto"}function l(v){return v?v.charAt(0).toUpperCase()+v.slice(1):"Default"}dt();var c=Ae(),f=me(c);{var d=v=>{vr(v,{get open(){return r()},labelledBy:"web-search-details-modal-title",modalClass:"web-search-details-modal",bodyClass:"web-search-details-modal-body",closeLabel:"Close web search details",$$events:{close:u},children:(h,p)=>{var x=Ae(),y=me(x);{var _=S=>{var b=Vg();k(S,b)},E=S=>{var b=Zg(),D=g(b),A=C(g(D),2),P=g(A),Z=C(A,2),Y=g(Z);{var T=ue=>{var L=Bn("Automatic selection based on model provider");k(ue,L)},N=ue=>{var L=Ae(),U=me(L);{var G=H=>{var q=Bn("Using provider's built-in web search");k(H,q)},ie=H=>{var q=Ae(),z=me(q);{var le=xe=>{var De=Bn("Using Exa's AI-powered search API");k(xe,De)};$(z,xe=>{O(a()),m(()=>a().engine==="exa")&&xe(le)},!0)}k(H,q)};$(U,H=>{O(a()),m(()=>a().engine==="native")?H(G):H(ie,!1)},!0)}k(ue,L)};$(Y,ue=>{O(a()),m(()=>!a().engine||a().engine===null)?ue(T):ue(N,!1)})}var Q=C(D,2),I=C(g(Q),2),V=g(I),J=C(Q,2);{var se=ue=>{var L=Gg(),U=C(g(L),2),G=g(U);K(ie=>X(G,ie),[()=>(O(a()),m(()=>l(a().contextSize)))]),k(ue,L)};$(J,ue=>{O(a()),m(()=>a().contextSize)&&ue(se)})}var de=C(J,2);{var ae=ue=>{var L=Kg(),U=C(g(L),2),G=g(U);K(()=>X(G,(O(a()),m(()=>a().searchPrompt)))),k(ue,L)};$(de,ue=>{O(a()),m(()=>a().searchPrompt&&a().searchPrompt.trim())&&ue(ae)})}K(ue=>{X(P,ue),X(V,(O(a()),m(()=>a().maxResults??5)))},[()=>(O(a()),m(()=>i(a().engine)))]),k(S,b)};$(y,S=>{a()?S(E,!1):S(_)})}k(h,x)},$$slots:{default:!0,heading:(h,p)=>{var x=Jg(),y=C(me(x),2);{var _=E=>{var S=Yg(),b=g(S);K(()=>X(b,`Message ID: ${s()??""}`)),k(E,S)};$(y,E=>{s()&&E(_)})}k(h,x)}}})};$(f,v=>{r()&&v(d)})}k(e,c),lt()}var Qg=F('<div class="conversation-item svelte-26wxji"><!></div>'),e2=F('<section class="conversation svelte-26wxji" aria-live="polite"></section> <!> <!> <!> <!>',1);function t2(e,t){it(t,!1);const n=()=>at(b,"$toolUsageModal",u),r=()=>at(D,"$reasoningModal",u),s=()=>at(A,"$citationsModal",u),a=()=>at(P,"$webSearchDetailsModal",u),[u,i]=Hn();let l=oe(t,"messages",24,()=>[]),c=oe(t,"disableDelete",8,!1),f=R(null),d=R(null),v=null,h=R([]),p=R({}),x=R({});const y="tool";let _=!1;const E=12;let S=!0;const b=j1(),D=L1(),A=jc(),P=q1(),Z=It();wc(()=>{if(o(f)){if(_){_=!1;return}S&&Zl(f,o(f).scrollTop=o(f).scrollHeight)}});function Y(){if(!o(f))return;const{scrollTop:B,scrollHeight:_e,clientHeight:Ne}=o(f);S=_e-(B+Ne)<=E}function T(B){B&&Z("openGenerationDetails",{id:B})}async function N(B){try{await navigator.clipboard.writeText(B.text??"")}catch(_e){console.error("Failed to copy message",_e);return}w(d,B.id),_=!0,v&&clearTimeout(v),v=setTimeout(()=>{_=!0,w(d,null),v=null},2e3)}Da(()=>{v&&clearTimeout(v)});function Q(B){b.openForMessage(l(),o(x),B.id,y)}function I(){b.close()}function V(B){D.openForMessage(B)}function J(){D.close()}function se(B){const _e=jr(B.details?.citations??null,B.details?.meta??null,B.details??null);A.openWithCitations(B.id,_e)}function de(){A.close()}function ae(B){P.openForMessage(B)}function ue(){P.close()}function L(B){B&&Z("deleteMessage",{id:B.id})}function U(B){B&&Z("retryMessage",{id:B.id})}function G(B){B&&Z("editMessage",{id:B.id})}function ie(B){!B?.message||!B?.attachment||Z("editAssistantAttachment",B)}ve(()=>O(l()),()=>{const B=z1(l(),y);w(h,B.visibleMessages),w(p,B.assistantToolUsage),w(x,B.messageIndexMap)}),ve(()=>(O(l()),o(x)),()=>{b.syncEntries(l(),o(x),y)}),ve(()=>O(l()),()=>{D.syncFromMessages(l())}),Rt(),dt();var H=e2(),q=me(H);_t(q,5,()=>o(h),B=>B.id,(B,_e)=>{var Ne=Qg(),Be=g(Ne);{let Oe=vt(()=>(o(d),o(_e),m(()=>o(d)===o(_e).id)));Tg(Be,{get message(){return o(_e)},get toolSummary(){return o(p),o(_e),m(()=>o(p)[o(_e).id])},get copied(){return o(Oe)},get disableDelete(){return c()},$$events:{copy:ke=>N(ke.detail.message),openTool:ke=>Q(ke.detail.message),openReasoning:ke=>V(ke.detail.message),openCitations:ke=>se(ke.detail.message),openWebSearchDetails:ke=>ae(ke.detail.message),openUsage:ke=>T(ke.detail.id),delete:ke=>L(ke.detail.message),retry:ke=>U(ke.detail.message),edit:ke=>G(ke.detail.message),editAttachment:ke=>ie(ke.detail)}})}k(B,Ne)}),Xr(q,B=>w(f,B),()=>o(f));var z=C(q,2);Wg(z,{get open(){return n(),m(()=>n().open)},get messageId(){return n(),m(()=>n().messageId)},get tools(){return n(),m(()=>n().tools)},$$events:{close:I}});var le=C(z,2);Lg(le,{get open(){return r(),m(()=>r().open)},get messageId(){return r(),m(()=>r().messageId)},get segments(){return r(),m(()=>r().segments)},get status(){return r(),m(()=>r().status)},$$events:{close:J}});var xe=C(le,2);eh(xe,{get open(){return s(),m(()=>s().open)},get messageId(){return s(),m(()=>s().messageId)},get citations(){return s(),m(()=>s().citations)},$$events:{close:de}});var De=C(xe,2);Xg(De,{get open(){return a(),m(()=>a().open)},get messageId(){return a(),m(()=>a().messageId)},get details(){return a(),m(()=>a().details)},$$events:{close:ue}}),W("scroll",q,Y),k(e,H),lt(),i()}const n2=[{key:"temperature",aliases:["temperature"],label:"Temperature",description:"Higher values increase randomness.",fallback:{type:"number",min:0,max:2,step:.1}},{key:"top_p",aliases:["top_p"],label:"Top P",description:"Limits sampling to a cumulative probability mass.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_k",aliases:["top_k"],label:"Top K",description:"Restrict sampling to the top K tokens.",fallback:{type:"integer",min:1,max:400,step:1}},{key:"min_p",aliases:["min_p"],label:"Min P",description:"Nucleus sampling floor; smaller values widen sampling.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_a",aliases:["top_a"],label:"Top A",description:"Alternative nucleus control for certain models.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"max_tokens",aliases:["max_tokens","max_output_tokens"],label:"Max completion tokens",description:"Upper bound on tokens generated in the response.",fallback:{type:"integer",min:1,max:32768,step:1}},{key:"frequency_penalty",aliases:["frequency_penalty"],label:"Frequency penalty",description:"Penalize frequent tokens; useful to reduce repetition.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"presence_penalty",aliases:["presence_penalty"],label:"Presence penalty",description:"Encourage introducing new topics by penalizing seen tokens.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"repetition_penalty",aliases:["repetition_penalty"],label:"Repetition penalty",description:"Higher values push the model away from repeating itself.",fallback:{type:"number",min:0,max:2,step:.05}},{key:"top_logprobs",aliases:["top_logprobs"],label:"Top logprobs",description:"Return log probabilities for the top N tokens per step.",fallback:{type:"integer",min:0,max:20,step:1}},{key:"seed",aliases:["seed"],label:"Seed",description:"Deterministic seed (when supported).",fallback:{type:"integer",min:0,step:1}},{key:"parallel_tool_calls",aliases:["parallel_tool_calls"],label:"Parallel tool calls",description:"Allow the model to invoke multiple tools simultaneously.",fallback:{type:"boolean"}},{key:"structured_outputs",aliases:["structured_outputs","json_schema","response_format"],label:"Structured outputs",description:"Favor structured responses when supported by the provider.",fallback:{type:"boolean"}},{key:"safe_prompt",aliases:["safe_prompt"],label:"Safe prompt",description:"Ask the provider to apply additional safety prompting.",fallback:{type:"boolean"}},{key:"raw_mode",aliases:["raw_mode"],label:"Raw mode",description:"Bypass guardrails when the provider allows it.",fallback:{type:"boolean"}}];function fa(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function io(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);if(Number.isFinite(t))return t}}function kd(e){const t={};if(!e||!e.capabilities)return t;const r=e.capabilities.parameters;if(!r||typeof r!="object")return t;function s(a,u){const i=fa(a);if(!i||!u||typeof u!="object")return;const l=u,c={},f=l.type??l.datatype??l.kind;typeof f=="string"&&(c.type=f.toLowerCase());const d=l.min??l.minimum??l.lower_bound??l.minimum_value,v=l.max??l.maximum??l.upper_bound??l.maximum_value,h=l.step??l.increment??l.resolution,p=io(d),x=io(v),y=io(h);p!==void 0&&(c.min=p),x!==void 0&&(c.max=x),y!==void 0&&(c.step=y),t[i]=c;const _=l.properties;if(_&&typeof _=="object")for(const[E,S]of Object.entries(_))s(`${a}.${E}`,S)}for(const[a,u]of Object.entries(r))s(a,u);return t}function wd(e){const t=new Set;if(!e)return t;const n=e.supported_parameters_normalized;if(Array.isArray(n))for(const s of n){const a=fa(s);a&&t.add(a)}const r=e.supported_parameters;if(Array.isArray(r))for(const s of r){const a=fa(s);a&&t.add(a)}if(t.size===0)for(const s of Qo(e)){const a=fa(s);a&&t.add(a)}return t}function r2(e,t){const n=e.fallback;if(n.type==="boolean")return{key:e.key,label:e.label,description:e.description,type:"boolean"};const r={key:e.key,label:e.label,description:e.description,type:n.type,min:n.min,max:n.max,step:n.step};if(!t)return r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r;const s=t.type?.toLowerCase();return s==="boolean"?{key:e.key,label:e.label,description:e.description,type:"boolean"}:(s==="integer"||s==="int"?r.type="integer":(s==="number"||s==="float"||s==="double")&&(r.type="number"),t.min!==void 0&&(r.min=t.min),t.max!==void 0&&(r.max=t.max),t.step!==void 0&&(r.step=t.step),r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r)}function s2(e,t){const n=wd(e),r=new Set(t?Object.keys(t):[]),s=kd(e),a=[],u=new Set;for(const i of n2){if(!i.aliases.some(d=>n.has(d))&&!r.has(i.key)||u.has(i.key))continue;const c=i.aliases.map(d=>s[d]).find(d=>d!==void 0),f=r2(i,c);"min"in f&&"max"in f&&f.min!==void 0&&f.max!==void 0&&f.min>=f.max&&(f.min=void 0,f.max=void 0),a.push(f),u.add(i.key)}return a}function Ed(e,t){const n=e?.[t];return typeof n=="number"&&Number.isFinite(n)?n:void 0}function pu(e,t){let n=e;return t.min!==void 0&&(n=Math.max(n,t.min)),t.max!==void 0&&(n=Math.min(n,t.max)),n}function Sd(e){const t=e.min??0,n=e.max??t;if(t<=0&&n>=0)return pu(0,e);const r=t+(n-t)/2;return pu(r,e)}function a2(e,t){const n=Ed(t,e.key);return n!==void 0?pu(n,e):Sd(e)}function Dl(e){if(e.step&&e.step>0)return e.step;if(e.type==="integer")return 1;const t=e.min??0,r=(e.max??t+1)-t;if(!Number.isFinite(r)||r<=0)return .01;const s=r/100;return s>0?s:.01}function u2(e,t){const n=e.min??0,s=(e.max??n)-n;if(!Number.isFinite(s)||s===0)return"0%";const u=(pu(t??Sd(e),e)-n)/s*100;return`${Math.min(100,Math.max(0,u))}%`}const o2=new Intl.NumberFormat(void 0,{maximumFractionDigits:4});function hu(e){return typeof e=="number"&&Number.isFinite(e)?String(e):""}function ta(e,t){return t.type==="integer"?String(Math.round(e)):o2.format(e)}var i2=F('<div class="setting-range"><div class="setting-range-header"><span> </span> <button type="button" class="range-reset">Use default</button></div> <input class="range-input" type="range"/> <div class="range-extents"><span> </span> <span> </span></div></div>');function l2(e,t){it(t,!1);const n=R(),r=R(),s=R(),a=R(),u=R();let i=oe(t,"field",8),l=oe(t,"parameters",8),c=oe(t,"numericValue",8),f=oe(t,"hasCustom",8,!1),d=oe(t,"handlers",8);ve(()=>(O(i()),O(l())),()=>{w(n,a2(i(),l()))}),ve(()=>(O(i()),O(c())),()=>{w(r,u2(i(),c()))}),ve(()=>(O(c()),O(i())),()=>{w(s,c()!==void 0?ta(c(),i()):"Provider default")}),ve(()=>(O(i()),o(n)),()=>{w(a,i().min??o(n))}),ve(()=>(O(i()),o(n)),()=>{w(u,i().max??o(n))}),Rt(),dt();var v=i2(),h=g(v),p=g(h);let x;var y=g(p),_=C(p,2),E=C(h,2),S=C(E,2),b=g(S),D=g(b),A=C(b,2),P=g(A);K((Z,Y,T,N)=>{x=Ct(p,1,"range-value",null,x,Z),X(y,o(s)),_.disabled=!f(),fe(E,"min",(O(i()),m(()=>i().min))),fe(E,"max",(O(i()),m(()=>i().max))),fe(E,"step",Y),Dt(E,o(n)),xn(E,`--slider-fill:${o(r)};`),fe(E,"aria-valuemin",(O(i()),m(()=>i().min))),fe(E,"aria-valuemax",(O(i()),m(()=>i().max))),fe(E,"aria-valuenow",c()??void 0),fe(E,"aria-valuetext",o(s)),X(D,T),X(P,N)},[()=>({default:!f()}),()=>(O(Dl),O(i()),m(()=>Dl(i()))),()=>(O(ta),o(a),O(i()),m(()=>ta(o(a),i()))),()=>(O(ta),o(u),O(i()),m(()=>ta(o(u),i())))]),W("click",_,()=>d().onRangeReset(i().key)),W("input",E,Z=>d().onSliderInput(i().key,Z)),k(e,v),lt()}var c2=F('<span class="setting-hint"> </span>'),d2=F('<input class="input-control" type="number" placeholder="Default"/>'),f2=F('<div class="setting-boolean"><input type="checkbox"/> <span>Enabled</span></div>'),p2=F('<label class="setting"><div class="setting-header"><span class="setting-label"> </span> <!></div> <!></label>');function h2(e,t){it(t,!1);let n=oe(t,"field",8),r=oe(t,"parameters",8),s=oe(t,"handlers",8);const a=_=>_.type==="number"||_.type==="integer";let u=R(),i=R(!1);ve(()=>(O(n()),O(r())),()=>{a(n())?w(u,Ed(r(),n().key)):w(u,void 0)}),ve(()=>(O(r()),O(n())),()=>{w(i,r()?.[n().key]!=null)}),Rt(),dt();var l=p2(),c=g(l),f=g(c),d=g(f),v=C(f,2);{var h=_=>{var E=c2(),S=g(E);K(()=>X(S,(O(n()),m(()=>n().description)))),k(_,E)};$(v,_=>{O(n()),m(()=>n().description)&&_(h)})}var p=C(c,2);{var x=_=>{var E=Ae(),S=me(E);{var b=A=>{l2(A,{get field(){return n()},get parameters(){return r()},get numericValue(){return o(u)},get hasCustom(){return o(i)},get handlers(){return s()}})},D=A=>{var P=d2();K(Z=>{fe(P,"inputmode",(O(n()),m(()=>n().type==="integer"?"numeric":"decimal"))),fe(P,"step",(O(n()),m(()=>n().step??(n().type==="integer"?1:"any")))),fe(P,"min",(O(n()),m(()=>n().min??void 0))),fe(P,"max",(O(n()),m(()=>n().max??void 0))),Dt(P,Z)},[()=>(O(hu),O(r()),O(n()),m(()=>hu(r()?.[n().key])))]),W("change",P,Z=>s().onNumberChange(n().key,Z)),k(A,P)};$(S,A=>{O(n()),m(()=>n().min!==void 0&&n().max!==void 0)?A(b):A(D,!1)})}k(_,E)},y=_=>{var E=Ae(),S=me(E);{var b=D=>{var A=f2(),P=g(A);K(()=>{fe(P,"id",(O(n()),m(()=>`field-${n().key}`))),Gt(P,(O(r()),O(n()),m(()=>r()?.[n().key]===!0)))}),W("change",P,Z=>s().onBooleanChange(n().key,Z)),k(D,A)};$(S,D=>{O(n()),m(()=>n().type==="boolean")&&D(b)},!0)}k(_,E)};$(p,_=>{O(n()),m(()=>a(n()))?_(x):_(y,!1)})}K(()=>X(d,(O(n()),m(()=>n().label)))),k(e,l),lt()}var m2=F("<option> </option>"),v2=F('<label class="reasoning-field"><span>Effort</span> <select class="select-control"><option>Provider default</option><!></select></label>'),g2=F('<label class="reasoning-field"><span>Max reasoning tokens</span> <input class="input-control" type="number" inputmode="numeric" placeholder="Default"/></label>'),b2=F('<section class="setting reasoning"><div class="setting-header"><span class="setting-label">Reasoning tokens</span> <span class="setting-hint">Adjust effort, budget, or output visibility when the provider supports reasoning traces.</span></div> <div class="reasoning-controls"><label class="reasoning-field"><span>Enabled behavior</span> <select class="select-control"><option>Use provider default</option><option>Force enabled</option><option>Disable reasoning</option></select></label> <!> <!> <label class="reasoning-toggle"><input type="checkbox"/> <span>Exclude reasoning from responses</span></label></div></section>');function _2(e,t){it(t,!1);let n=oe(t,"reasoning",8),r=oe(t,"handlers",8);dt();var s=b2(),a=C(g(s),2),u=g(a),i=C(g(u),2),l=g(i);l.value=l.__value="default";var c=C(l);c.value=c.__value="on";var f=C(c);f.value=f.__value="off";var d;jn(i);var v=C(u,2);{var h=E=>{var S=v2(),b=C(g(S),2),D=g(b);D.value=D.__value="";var A=C(D);_t(A,1,()=>(O(n()),m(()=>n().options)),zn,(Z,Y)=>{var T=m2(),N=g(T),Q={};K(I=>{X(N,I),Q!==(Q=o(Y))&&(T.value=(T.__value=o(Y))??"")},[()=>(o(Y),m(()=>o(Y).charAt(0).toUpperCase()+o(Y).slice(1)))]),k(Z,T)});var P;jn(b),K(()=>{fe(S,"aria-disabled",(O(n()),m(()=>!n().effort.supported))),b.disabled=(O(n()),m(()=>!n().effort.supported)),P!==(P=(O(n()),m(()=>n().effort.supported?n().effort.value??"":"")))&&(b.value=(b.__value=(O(n()),m(()=>n().effort.supported?n().effort.value??"":"")))??"",kn(b,(O(n()),m(()=>n().effort.supported?n().effort.value??"":""))))}),W("change",b,function(...Z){r().onEffortChange?.apply(this,Z)}),k(E,S)};$(v,E=>{O(n()),m(()=>n().effort.showField)&&E(h)})}var p=C(v,2);{var x=E=>{var S=g2(),b=C(g(S),2);K(D=>{fe(S,"aria-disabled",(O(n()),m(()=>!n().maxTokens.supported))),fe(b,"min",(O(n()),m(()=>n().schemas.maxTokens?.min??void 0))),fe(b,"max",(O(n()),m(()=>n().schemas.maxTokens?.max??void 0))),fe(b,"step",(O(n()),m(()=>n().schemas.maxTokens?.step??1))),b.disabled=(O(n()),m(()=>!n().maxTokens.supported)),Dt(b,D)},[()=>(O(hu),O(n()),m(()=>hu(n().maxTokens.value)))]),W("change",b,function(...D){r().onMaxTokensChange?.apply(this,D)}),k(E,S)};$(p,E=>{O(n()),m(()=>n().maxTokens.showField)&&E(x)})}var y=C(p,2),_=g(y);K(()=>{d!==(d=(O(n()),m(()=>n().enabledSelection)))&&(i.value=(i.__value=(O(n()),m(()=>n().enabledSelection)))??"",kn(i,(O(n()),m(()=>n().enabledSelection)))),Gt(_,(O(n()),m(()=>n().exclude)))}),W("change",i,function(...E){r().onEnabledChange?.apply(this,E)}),W("change",_,function(...E){r().onExcludeChange?.apply(this,E)}),k(e,s),lt()}const y2=["reasoning","reasoning_effort","reasoning_max_tokens","reasoning_exclude","reasoning_enabled","include_reasoning"],qa={effort:["reasoning.effort","reasoning_effort"],maxTokens:["reasoning.max_tokens","reasoning_max_tokens","thinking_budget"],exclude:["reasoning.exclude","reasoning_exclude","include_reasoning"],enabled:["reasoning.enabled","reasoning_enabled"]};function x2(e){if(!e)return!1;const t=["openai/o1","openai/o3","openai/gpt-5","gpt-5","/grok","grok-"],n=[],r=a=>{if(typeof a!="string")return;const u=a.trim().toLowerCase();u&&n.push(u)};if(r(e.id),r(e.name),Array.isArray(e.tags))for(const a of e.tags)r(a);const s=e;return r(s.series),r(s.family),n.some(a=>t.some(u=>a.includes(u)))}function k2(e){const t=[];for(const n of e){const r=fa(n);r&&t.push(r)}return t}function w2(){return Ht(Ut,e=>e.data?.parameters??null)}function E2(e,t){return Ht([e,t],([n,r])=>s2(n,r))}function S2(e){return Ht(e,t=>!!(t&&Object.keys(t).length>0))}function C2(e){return Ht(e,t=>kd(t))}function A2(e){return Ht(e,t=>wd(t))}function D2(e){return Ht(e,t=>{const n=r=>{for(const s of k2(r)){const a=t[s];if(a)return a}};return{effort:n(qa.effort),maxTokens:n(qa.maxTokens),exclude:n(qa.exclude),enabled:n(qa.enabled)}})}function T2(e){return Ht(e,t=>t?.reasoning??null)}function F2(e,t,n,r,s){const a=["low","medium","high"];return Ht([e,t,n,r,s],([u,i,l,c,f])=>{const d=i?.effort??null,v=i?.max_tokens??null,h=i?.exclude===!0,p=i?i.enabled===!0?"on":i.enabled===!1?"off":"default":"default",x=(()=>{if(u?.reasoning&&Object.keys(u.reasoning).length>0)return!0;for(const Z of y2)if(l.has(Z))return!0;for(const Z of Object.values(c))if(Z)return!0;return!1})(),y=!!(c.effort||l.has("reasoning_effort")||x2(f)),_=!!(c.maxTokens||l.has("reasoning_max_tokens")),E=d!==null,S=v!==null;return{supported:x,schemas:c,enabledSelection:p,options:a,effort:{value:d,supported:x&&(y||E),showField:y||E},maxTokens:{value:v,supported:x&&(_||S),showField:_||S},exclude:h}})}function M2(){return Tt(null)}function P2(){const e=Tt(!1),t=Tt(""),n=M2(),r=w2(),s=E2(n,r),a=S2(r),u=C2(n),i=A2(n),l=D2(u),c=T2(r),f=F2(r,c,i,l,n);let d=null;const h=Ht([e,t,Ut],([S,b,D])=>({open:S,selectedModel:b,settingsState:D})).subscribe(({open:S,selectedModel:b,settingsState:D})=>{!S||!b||(D.data&&D.data.model!==b&&Ut.setModel(b),d!==b&&(d=b,Ut.clearErrors(),Ut.load(b)))});Da(()=>{h()});const p={onSliderInput:(S,b)=>{const D=b.currentTarget;if(!D)return;const A=Number(D.value);Number.isFinite(A)&&Ut.updateParameter(S,A)},onRangeReset:S=>{Ut.updateParameter(S,null)},onNumberChange:(S,b)=>{const D=b.currentTarget;if(!D)return;const A=D.value.trim();if(!A){Ut.updateParameter(S,null);return}const P=Number(A);if(!Number.isFinite(P)){Ut.updateParameter(S,null);return}Ut.updateParameter(S,P)},onBooleanChange:(S,b)=>{const D=b.currentTarget;D&&Ut.updateParameter(S,D.checked)}};function x(S){const b=nt(c)?{...nt(c)}:{};S(b);for(const D of Object.keys(b)){const A=b[D];(A==null||typeof A=="string"&&A.trim()==="")&&delete b[D]}Object.keys(b).length===0?Ut.updateParameter("reasoning",null):Ut.updateParameter("reasoning",b)}const y={onEnabledChange:S=>{const b=S.currentTarget;if(!b)return;const D=b.value;x(A=>{D==="on"?A.enabled=!0:D==="off"?A.enabled=!1:delete A.enabled})},onEffortChange:S=>{const b=S.currentTarget;if(!b)return;const D=b.value;x(A=>{D?A.effort=D:delete A.effort})},onMaxTokensChange:S=>{const b=S.currentTarget;if(!b)return;const D=b.value.trim();if(!D){x(P=>{delete P.max_tokens});return}const A=Number(D);if(!Number.isFinite(A)||A<=0){x(P=>{delete P.max_tokens});return}x(P=>{P.max_tokens=A})},onExcludeChange:S=>{const b=S.currentTarget;if(!b)return;const D=b.checked;x(A=>{D?A.exclude=!0:delete A.exclude})}};let _={open:!1,selectedModel:"",model:null};function E(S){S.open!==_.open&&(e.set(S.open),_.open=S.open),S.selectedModel!==_.selectedModel&&(t.set(S.selectedModel),_.selectedModel=S.selectedModel),S.model!==_.model&&(n.set(S.model),_.model=S.model)}return{settingsState:Ut,parameters:r,fields:s,hasCustomParameters:a,reasoning:f,parameterHandlers:p,reasoningHandlers:y,resetToDefaults:()=>Ut.resetToDefaults(),flushSave:()=>Ut.flushSave(),sync:E}}var I2=F('<p class="status">Loading settingsâ¦</p>'),N2=F('<p class="status error"> </p>'),L2=F('<p class="status">This model does not expose configurable parameters.</p>'),O2=F('<form class="settings-grid"></form>'),$2=F('<div class="settings-stack" aria-live="polite"><!> <!></div>'),R2=F('<h2 id="model-settings-title">Model settings</h2> <p class="model-settings-subtitle"><!></p>',1),z2=F('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),U2=F('<span class="status error"> </span>'),B2=F('<span class="status">Saving changesâ¦</span>'),j2=F('<span class="status">Pending changes; closing this modal will save.</span>'),q2=F('<span class="status">Changes save when you close this modal.</span>'),H2=F('<footer slot="footer" class="model-settings-footer"><!></footer>');function W2(e,t){it(t,!1);const n=()=>at(h,"$settingsState",i),r=()=>at(y,"$hasCustomParameters",i),s=()=>at(_,"$reasoning",i),a=()=>at(x,"$fields",i),u=()=>at(p,"$parameters",i),[i,l]=Hn();let c=oe(t,"open",8,!1),f=oe(t,"selectedModel",8,""),d=oe(t,"model",8,null);const v=It(),{settingsState:h,parameters:p,fields:x,hasCustomParameters:y,reasoning:_,parameterHandlers:E,reasoningHandlers:S,resetToDefaults:b,flushSave:D,sync:A}=P2();let P=!1;async function Z(){if(P||n().saving)return;P=!0,await D()&&v("close"),P=!1}ve(()=>(O(c()),O(f()),O(d())),()=>{A({open:c(),selectedModel:f(),model:d()})}),Rt(),dt();var Y=Ae(),T=me(Y);{var N=Q=>{vr(Q,{get open(){return c()},labelledBy:"model-settings-title",closeLabel:"Close model settings",$$events:{close:()=>void Z()},children:(I,V)=>{var J=Ae(),se=me(J);{var de=ue=>{var L=I2();k(ue,L)},ae=ue=>{var L=Ae(),U=me(L);{var G=H=>{var q=N2(),z=g(q);K(()=>X(z,(n(),m(()=>n().error)))),k(H,q)},ie=H=>{var q=Ae(),z=me(q);{var le=De=>{var B=L2();k(De,B)},xe=De=>{var B=$2(),_e=g(B);{var Ne=ke=>{_2(ke,{get reasoning(){return s()},get handlers(){return S}})};$(_e,ke=>{s(),m(()=>s().supported)&&ke(Ne)})}var Be=C(_e,2);{var Oe=ke=>{var We=O2();_t(We,5,a,he=>he.key,(he,ne)=>{h2(he,{get field(){return o(ne)},get parameters(){return u()},get handlers(){return E}})}),k(ke,We)};$(Be,ke=>{a(),m(()=>a().length)&&ke(Oe)})}k(De,B)};$(z,De=>{s(),a(),m(()=>!s().supported&&!a().length)?De(le):De(xe,!1)})}k(H,q)};$(U,H=>{n(),m(()=>n().error)?H(G):H(ie,!1)},!0)}k(ue,L)};$(se,ue=>{n(),m(()=>n().loading)?ue(de):ue(ae,!1)})}k(I,J)},$$slots:{default:!0,heading:(I,V)=>{var J=R2(),se=C(me(J),2),de=g(se);{var ae=L=>{var U=Bn();K(()=>X(U,(O(d()),m(()=>d().name)))),k(L,U)},ue=L=>{var U=Ae(),G=me(U);{var ie=q=>{var z=Bn();K(()=>X(z,(O(d()),m(()=>d().id)))),k(q,z)},H=q=>{var z=Bn();K(()=>X(z,f())),k(q,z)};$(G,q=>{O(d()),m(()=>d()?.id)?q(ie):q(H,!1)},!0)}k(L,U)};$(de,L=>{O(d()),m(()=>d()?.name)?L(ae):L(ue,!1)})}k(I,J)},actions:(I,V)=>{var J=z2();K(()=>J.disabled=(r(),n(),m(()=>!r()||n().saving))),W("click",J,b),k(I,J)},footer:(I,V)=>{var J=H2(),se=g(J);{var de=ue=>{var L=U2(),U=g(L);K(()=>X(U,(n(),m(()=>n().saveError)))),k(ue,L)},ae=ue=>{var L=Ae(),U=me(L);{var G=H=>{var q=B2();k(H,q)},ie=H=>{var q=Ae(),z=me(q);{var le=De=>{var B=j2();k(De,B)},xe=De=>{var B=q2();k(De,B)};$(z,De=>{n(),m(()=>n().dirty)?De(le):De(xe,!1)},!0)}k(H,q)};$(U,H=>{n(),m(()=>n().saving)?H(G):H(ie,!1)},!0)}k(ue,L)};$(se,ue=>{n(),m(()=>n().saveError)?ue(de):ue(ae,!1)})}k(I,J)}}})};$(T,Q=>{c()&&Q(N)})}k(e,Y),lt(),l()}var V2=F('<div class="suggestion-item svelte-1r3jne1"><button type="button" class="suggestion-btn svelte-1r3jne1"> </button> <button type="button" class="delete-btn svelte-1r3jne1" title="Delete suggestion">Ã</button></div>'),G2=F('<div class="add-form svelte-1r3jne1"><input type="text" placeholder="Label" class="svelte-1r3jne1"/> <input type="text" placeholder="Prompt text" class="svelte-1r3jne1"/> <button type="button" class="add-submit-btn svelte-1r3jne1">Add</button> <button type="button" class="add-cancel-btn svelte-1r3jne1">Cancel</button></div>'),K2=F('<button type="button" class="add-btn svelte-1r3jne1" aria-label="Add suggested prompt">+</button>'),Z2=F('<section class="suggestions svelte-1r3jne1"><!> <!></section>');function Y2(e,t){it(t,!1);const n=It();let r=oe(t,"suggestions",24,()=>[]),s=oe(t,"deleting",8,null),a=R(!1),u=R(""),i=R("");function l(b){n("select",{text:b})}function c(b,D){D.stopPropagation(),n("delete",{index:b})}function f(){w(a,!0)}function d(){o(u).trim()&&o(i).trim()&&(n("add"),w(u,""),w(i,""),w(a,!1))}function v(){w(u,""),w(i,""),w(a,!1)}function h(){const b=o(u).trim(),D=o(i).trim();return b&&D?{label:b,text:D}:null}var p={getNewSuggestion:h};dt();var x=Z2(),y=g(x);_t(y,3,r,b=>b.text,(b,D,A)=>{var P=V2(),Z=g(P),Y=g(Z),T=C(Z,2);K(()=>{X(Y,(o(D),m(()=>o(D).label))),T.disabled=s()===o(A)}),W("click",Z,()=>l(o(D).text)),W("click",T,N=>c(o(A),N)),k(b,P)});var _=C(y,2);{var E=b=>{var D=G2(),A=g(D),P=C(A,2),Z=C(P,2),Y=C(Z,2);pr(A,()=>o(u),T=>w(u,T)),W("keydown",A,T=>T.key==="Enter"&&d()),pr(P,()=>o(i),T=>w(i,T)),W("keydown",P,T=>T.key==="Enter"&&d()),W("click",Z,d),W("click",Y,v),k(b,D)},S=b=>{var D=K2();W("click",D,f),k(b,D)};$(_,b=>{o(a)?b(E):b(S,!1)})}return k(e,x),m0(t,"getNewSuggestion",h),lt(p)}function ci(e,t){const n=()=>{e.style.height="auto",e.style.height=`${e.scrollHeight}px`},r=()=>n();return n(),e.addEventListener("input",r),{update:()=>n(),destroy:()=>{e.removeEventListener("input",r)}}}const lo={loading:!1,saving:!1,error:null,saveError:null,value:"",initialValue:"",dirty:!1};function J2(){const e=Tt({...lo});function t(i,l){return i.trim()!==l.trim()}function n(i){return i.system_prompt?.trim()??""}async function r(){e.set({...lo,loading:!0});try{const i=await D0(),l=n(i);e.set({loading:!1,saving:!1,error:null,saveError:null,value:l,initialValue:l,dirty:!1})}catch(i){const l=i instanceof Error?i.message:"Failed to load system prompt.";e.set({...lo,loading:!1,error:l})}}function s(i){e.update(l=>{const c=i;return{...l,value:c,dirty:t(c,l.initialValue),saveError:null}})}async function a(){let i="";e.update(c=>(i=c.value,{...c,saving:!0,saveError:null}));const l={system_prompt:i.trim()||null};try{const c=await T0(l),f=n(c);e.set({loading:!1,saving:!1,error:null,saveError:null,value:f,initialValue:f,dirty:!1})}catch(c){const f=c instanceof Error?c.message:"Failed to save system prompt.";e.update(d=>({...d,saving:!1,saveError:f}))}}function u(){e.update(i=>({...i,value:i.initialValue,dirty:!1,saveError:null}))}return{subscribe:e.subscribe,load:r,save:a,reset:u,updateValue:s}}const X2={loading:!1,adding:!1,deleting:null,error:null,items:[]};function Q2(){const e=Tt({...X2});async function t(){e.update(a=>({...a,loading:!0,error:null}));try{const a=await fetch(`${yt}/api/suggestions`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const u=await a.json();e.update(i=>({...i,loading:!1,items:u.suggestions}))}catch(a){const u=a instanceof Error?a.message:"Failed to load suggestions.";e.update(i=>({...i,loading:!1,error:u}))}}async function n(a,u){e.update(i=>({...i,adding:!0,error:null}));try{const i=await fetch(`${yt}/api/suggestions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:a,text:u})});if(!i.ok)throw new Error(`HTTP ${i.status}`);const l=await i.json();return e.update(c=>({...c,adding:!1,items:l.suggestions})),l.suggestions}catch(i){const l=i instanceof Error?i.message:"Failed to add suggestion.";return e.update(c=>({...c,adding:!1,error:l})),null}}async function r(a){e.update(u=>({...u,deleting:a,error:null}));try{const u=await fetch(`${yt}/api/suggestions/${a}`,{method:"DELETE"});if(!u.ok)throw new Error(`HTTP ${u.status}`);const i=await u.json();return e.update(l=>({...l,deleting:null,items:i.suggestions})),i.suggestions}catch(u){const i=u instanceof Error?u.message:"Failed to delete suggestion.";return e.update(l=>({...l,deleting:null,error:i})),null}}function s(){e.update(a=>({...a,error:null}))}return{subscribe:e.subscribe,load:t,add:n,remove:r,clearError:s}}const _s=Q2();var eb=F('<p class="status">Loading system promptâ¦</p>'),tb=F('<p class="status error"> </p>'),nb=F('<p class="status error"> </p>'),rb=F('<textarea class="system-prompt textarea-control" rows="6" placeholder="Provide guidance for the assistant to follow at the start of new conversations."></textarea> <!>',1),sb=F('<p class="status error"> </p>'),ab=F('<p class="status">Loading presetsâ¦</p>'),ub=F('<p class="status">No presets saved yet.</p>'),ob=F('<span class="default-badge" title="Default preset">Default</span>'),ib=F('<span class="filters-badge" title="Contains model explorer filters"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> Filters</span>'),lb=F('<button type="button" class="btn btn-ghost btn-small" title="Set as default preset to load on startup"> </button>'),cb=F('<li class="preset-item"><div class="meta"><div class="name"> <!> <!></div> <div class="details"><span class="model"> </span> <span class="timestamps"><span title="Created at"> </span> <span aria-hidden="true">Â·</span> <span title="Updated at"> </span></span></div></div> <div class="actions"><button type="button" class="btn btn-ghost btn-small" title="Apply this preset (model, settings, system prompt, MCP servers)"> </button> <button type="button" class="btn btn-ghost btn-small" title="Overwrite preset with current configuration"> </button> <!> <button type="button" class="btn btn-danger btn-small"> </button></div></li>'),db=F('<ul class="preset-list" aria-live="polite"></ul>'),fb=F('<p class="status muted"> </p>'),pb=F('<p class="status muted"> </p>'),hb=F('<p class="status muted">Create, update, or apply a preset.</p>'),mb=F("<option> </option>"),vb=F(`<article class="system-card"><header class="system-card-header"><div><h3>System prompt</h3> <p class="system-card-caption">Applied to new chat sessions when no custom prompt is present.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Presets</h3> <p class="system-card-caption">Save and manage snapshots of the current configuration.</p></div></header> <div class="system-card-body"><div class="create-row"><input type="text" class="input-control" placeholder="Preset name" aria-label="Preset name"/> <button type="button" class="btn btn-primary"> </button></div> <!> <!> <!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Speech settings</h3> <p class="system-card-caption">Configure Deepgram speech-to-text dictation settings.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button></div></header> <div class="system-card-body"><div class="speech-card"><div class="speech-card-header"><h3>Deepgram model</h3> <p>Choose the speech-to-text engine and helper features.</p></div> <div class="model-presets-row"><div class="speech-field"><span class="field-label">Model</span> <select class="select-control"></select></div> <div class="speech-field presets-field"><span class="field-label">Speech timing presets</span> <div class="speech-presets" aria-label="Timing presets"><button class="btn btn-soft btn-small" type="button">Fast</button> <button class="btn btn-soft btn-small" type="button">Normal</button> <button class="btn btn-soft btn-small" type="button">Slow</button></div></div></div> <div class="toggle-grid"><label class="toggle-item"><input type="checkbox"/> <span>Interim transcripts</span></label> <label class="toggle-item"><input type="checkbox"/> <span>VAD events</span></label> <label class="toggle-item"><input type="checkbox"/> <span>Smart formatting</span></label> <label class="toggle-item"><input type="checkbox"/> <span>Punctuation</span></label> <label class="toggle-item"><input type="checkbox"/> <span>Numerals</span></label> <label class="toggle-item"><input type="checkbox"/> <span>Keep filler words</span></label> <label class="toggle-item"><input type="checkbox"/> <span>Profanity filter</span></label></div></div> <div class="speech-card"><div class="speech-card-header"><h3>Timing & auto-submit</h3> <p>Tune silence detection and message submission.</p></div> <div class="timing-grid"><div class="speech-field"><span class="field-label">Endpointing window (ms)</span> <input class="input-control" type="number" min="300" max="5000" step="50"/> <p class="speech-hint">How long Deepgram waits after silence before finalizing the
                transcript.</p></div> <div class="speech-field"><span class="field-label">Utterance gap (ms)</span> <input class="input-control" type="number" min="500" max="5000" step="50"/> <p class="speech-hint">Silence between words before Deepgram starts a new interim
                segment.</p></div></div> <div class="auto-submit-block"><div class="auto-submit-row"><label class="inline-checkbox"><input class="input-control" type="checkbox"/> <span class="field-label">Auto-submit</span></label> <p class="speech-hint">Send automatically when speech ends. Delay waits after
                endpointing.</p></div> <div class="delay-inline"><label class="delay-label" for="auto-submit-delay-input">Delay (ms)</label> <input id="auto-submit-delay-input" class="input-control" type="number" min="0" max="20000" step="50"/></div></div></div></div></article>`,1),gb=F('<h2 id="system-settings-title">System settings</h2> <p class="model-settings-subtitle">Configure orchestration defaults, presets, and speech settings.</p>',1),bb=F('<p class="status error">Resolve the errors above before closing.</p>'),_b=F('<p class="status error"> </p>'),yb=F('<p class="status">Saving changesâ¦</p>'),xb=F('<p class="status">Pending changes; closing this modal will save.</p>'),kb=F('<p class="status">Changes save when you close this modal.</p>'),wb=F('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function Eb(e,t){it(t,!1);const n=()=>at(c,"$systemPrompt",a),r=()=>at(va,"$chatStore",a),s=()=>at(Kn,"$presetsStore",a),[a,u]=Hn();let i=oe(t,"open",8,!1);const l=It(),c=J2();let f=R(!1),d=!1;async function v(){await Promise.all([c.load(),Kn.load()])}async function h(){return nt(c).dirty?(await c.save(),!nt(c).saveError):!0}async function p(){if(d||n().saving||o(S))return;d=!0;const G=await h(),ie=await de(),H=nt(c);G&&ie&&!H.saveError&&l("close"),d=!1}let x=R(""),y=R(null),_=R(Q()),E=R(!1),S=R(!1),b=R(null);function D(G){const ie=G.target;c.updateValue(ie?.value??"")}function A(){w(x,""),w(y,null)}async function P(){const G=o(x).trim();if(!G)return;await Ut.load(r().selectedModel),await Kn.create(G)&&w(x,"")}async function Z(G){const ie=await Kn.apply(G.name);ie?.model&&va.setModel(ie.model),await _s.load()}async function Y(G){await Ut.load(r().selectedModel),await Kn.saveSnapshot(G.name)}async function T(G){if(!G.is_default){if(o(y)===G.name){await Kn.remove(G.name),w(y,null);return}w(y,G.name),setTimeout(()=>{o(y)===G.name&&w(y,null)},3e3)}}async function N(G){await Kn.setDefault(G.name)}function Q(){const G=da.current??Vr();return{...G,stt:{...G.stt}}}function I(){da.refresh(),w(_,Q()),w(E,!1),w(S,!1),w(b,null)}function V(G,ie){w(_,{...o(_),stt:{...o(_).stt,[G]:ie}}),w(E,!0),w(b,null)}function J(G,ie){const H=G.target;if(!H)return;const q=Number(H.value);Number.isFinite(q)&&ie(q)}function se(G){const ie=Bp[G];w(_,{...o(_),stt:{...o(_).stt,utteranceEndMs:ie.stt.utteranceEndMs,endpointing:ie.stt.endpointing,autoSubmitDelayMs:ie.stt.autoSubmitDelayMs}}),w(E,!0),w(b,null)}async function de(){if(!o(E))return!0;w(S,!0);try{const G=da.save(o(_));return w(_,{...G,stt:{...G.stt}}),w(E,!1),w(b,null),!0}catch(G){const ie=G instanceof Error?G.message:"Failed to save speech settings.";return w(b,ie),!1}finally{w(S,!1)}}function ae(){w(_,Vr()),w(E,!0),w(b,null)}ve(()=>(O(i()),o(f)),()=>{i()&&!o(f)?(w(f,!0),v(),I(),A()):!i()&&o(f)&&(w(f,!1),c.reset(),I(),A())}),Rt(),dt();var ue=Ae(),L=me(ue);{var U=G=>{{let ie=vt(()=>(n(),o(S),m(()=>n().saving||o(S))));vr(G,{get open(){return i()},labelledBy:"system-settings-title",modalClass:"system-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close system settings",get closeDisabled(){return o(ie)},$$events:{close:()=>void p()},children:(H,q)=>{var z=vb(),le=me(z),xe=g(le),De=C(g(xe),2),B=g(De),_e=C(xe,2),Ne=g(_e);{var Be=re=>{var we=eb();k(re,we)},Oe=re=>{var we=Ae(),Pe=me(we);{var Ze=Ue=>{var ft=tb(),St=g(ft);K(()=>X(St,(n(),m(()=>n().error)))),k(Ue,ft)},Et=Ue=>{var ft=rb(),St=me(ft);qn(()=>pr(St,()=>n().value,$t=>g0(c,m(n).value=$t,m(n)))),qn(()=>W("input",St,D)),Jr(St,($t,_n)=>ci?.($t),()=>n().value);var $e=C(St,2);{var mn=$t=>{var _n=nb(),gr=g(_n);K(()=>X(gr,(n(),m(()=>n().saveError)))),k($t,_n)};$($e,$t=>{n(),m(()=>n().saveError)&&$t(mn)})}K(()=>St.disabled=(n(),m(()=>n().saving))),k(Ue,ft)};$(Pe,Ue=>{n(),m(()=>n().error)?Ue(Ze):Ue(Et,!1)},!0)}k(re,we)};$(Ne,re=>{n(),m(()=>n().loading)?re(Be):re(Oe,!1)})}var ke=C(le,2),We=C(g(ke),2),he=g(We),ne=g(he),ge=C(ne,2),be=g(ge),Te=C(he,2);{var qe=re=>{var we=sb(),Pe=g(we);K(()=>X(Pe,(s(),m(()=>s().error)))),k(re,we)};$(Te,re=>{s(),m(()=>s().error)&&re(qe)})}var ce=C(Te,2);{var pe=re=>{var we=ab();k(re,we)},Ee=re=>{var we=Ae(),Pe=me(we);{var Ze=Ue=>{var ft=ub();k(Ue,ft)},Et=Ue=>{var ft=db();_t(ft,5,()=>(s(),m(()=>s().items)),St=>St.name,(St,$e)=>{var mn=cb(),$t=g(mn),_n=g($t),gr=g(_n),br=C(gr);{var as=sn=>{var Xe=ob();k(sn,Xe)};$(br,sn=>{o($e),m(()=>o($e).is_default)&&sn(as)})}var Tu=C(br,2);{var Fu=sn=>{var Xe=ib();k(sn,Xe)};$(Tu,sn=>{o($e),m(()=>o($e).has_filters)&&sn(Fu)})}var us=C(_n,2),$s=g(us),Rs=g($s),os=C($s,2),zs=g(os),Us=g(zs),Bs=C(zs,4),Ia=g(Bs),js=C($t,2),Lr=g(js),Na=g(Lr),Or=C(Lr,2),_r=g(Or),qs=C(Or,2);{var Mu=sn=>{var Xe=lb(),Xt=g(Xe);K(()=>{Xe.disabled=(s(),o($e),m(()=>s().settingDefault===o($e).name)),fe(Xe,"aria-busy",(s(),o($e),m(()=>s().settingDefault===o($e).name))),X(Xt,(s(),o($e),m(()=>s().settingDefault===o($e).name?"Settingâ¦":"Set as default")))}),W("click",Xe,()=>N(o($e))),k(sn,Xe)};$(qs,sn=>{o($e),m(()=>!o($e).is_default)&&sn(Mu)})}var $r=C(qs,2),Pu=g($r);K((sn,Xe)=>{X(gr,`${o($e),m(()=>o($e).name)??""} `),X(Rs,(o($e),m(()=>o($e).model))),X(Us,sn),X(Ia,Xe),Lr.disabled=(s(),o($e),m(()=>s().applying===o($e).name)),fe(Lr,"aria-busy",(s(),o($e),m(()=>s().applying===o($e).name))),X(Na,(s(),o($e),m(()=>s().applying===o($e).name?"Applyingâ¦":"Apply"))),Or.disabled=(s(),m(()=>s().saving)),fe(Or,"aria-busy",(s(),m(()=>s().saving))),X(_r,(s(),m(()=>s().saving?"Savingâ¦":"Save snapshot"))),$r.disabled=(o($e),s(),m(()=>o($e).is_default||s().deleting===o($e).name)),fe($r,"aria-busy",(s(),o($e),m(()=>s().deleting===o($e).name))),fe($r,"title",(o($e),m(()=>o($e).is_default?"Cannot delete default preset":"Delete preset"))),X(Pu,(o(y),o($e),s(),m(()=>o(y)===o($e).name?"Confirm delete":s().deleting===o($e).name?"Deletingâ¦":"Delete")))},[()=>(o($e),m(()=>new Date(o($e).created_at).toLocaleString())),()=>(o($e),m(()=>new Date(o($e).updated_at).toLocaleString()))]),W("click",Lr,()=>Z(o($e))),W("click",Or,()=>Y(o($e))),W("click",$r,()=>T(o($e))),k(St,mn)}),k(Ue,ft)};$(Pe,Ue=>{s(),m(()=>!s().items.length)?Ue(Ze):Ue(Et,!1)},!0)}k(re,we)};$(ce,re=>{s(),m(()=>s().loading)?re(pe):re(Ee,!1)})}var Fe=C(ce,2);{var et=re=>{var we=fb(),Pe=g(we);K(()=>X(Pe,`Applied preset: ${s(),m(()=>s().lastApplied)??""}`)),k(re,we)},rt=re=>{var we=Ae(),Pe=me(we);{var Ze=Ue=>{var ft=pb(),St=g(ft);K(()=>X(St,`Saved: ${s(),m(()=>s().lastResult.name)??""}`)),k(Ue,ft)},Et=Ue=>{var ft=hb();k(Ue,ft)};$(Pe,Ue=>{s(),m(()=>s().lastResult)?Ue(Ze):Ue(Et,!1)},!0)}k(re,we)};$(Fe,re=>{s(),m(()=>s().lastApplied)?re(et):re(rt,!1)})}var Le=C(ke,2),ze=g(Le),je=C(g(ze),2),Je=g(je),ct=C(ze,2),He=g(ct),ht=C(g(He),2),Bt=g(ht),bt=C(g(Bt),2);_t(bt,5,()=>jp,zn,(re,we)=>{var Pe=mb(),Ze=g(Pe),Et={};K(()=>{X(Ze,(o(we),m(()=>o(we).label))),Et!==(Et=(o(we),m(()=>o(we).value)))&&(Pe.value=(Pe.__value=(o(we),m(()=>o(we).value)))??"")}),k(re,Pe)});var Zt;jn(bt);var jt=C(Bt,2),qt=C(g(jt),2),st=g(qt),Ve=C(st,2),Ft=C(Ve,2),ye=C(ht,2),Se=g(ye),ut=g(Se),Yt=C(Se,2),At=g(Yt),Nt=C(Yt,2),bn=g(Nt),ur=C(Nt,2),In=g(ur),Me=C(ur,2),Re=g(Me),Mt=C(Me,2),zt=g(Mt),rn=C(Mt,2),tt=g(rn),Ge=C(He,2),mt=C(g(Ge),2),Lt=g(mt),Ot=C(g(Lt),2),ot=C(Lt,2),Pt=C(g(ot),2),Ce=C(mt,2),M=g(Ce),te=g(M),ee=g(te),Ie=C(M,2),j=C(g(Ie),2);K(re=>{B.disabled=(n(),m(()=>!n().dirty||n().saving)),ge.disabled=re,fe(ge,"aria-busy",(s(),m(()=>s().creating))),X(be,(s(),m(()=>s().creating?"Creatingâ¦":"Create from current"))),Je.disabled=o(S),Zt!==(Zt=(o(_),m(()=>o(_).stt.model)))&&(bt.value=(bt.__value=(o(_),m(()=>o(_).stt.model)))??"",kn(bt,(o(_),m(()=>o(_).stt.model)))),Gt(ut,(o(_),m(()=>o(_).stt.interimResults))),Gt(At,(o(_),m(()=>o(_).stt.vadEvents))),Gt(bn,(o(_),m(()=>o(_).stt.smartFormat))),Gt(In,(o(_),m(()=>o(_).stt.punctuate))),Gt(Re,(o(_),m(()=>o(_).stt.numerals))),Gt(zt,(o(_),m(()=>o(_).stt.fillerWords))),Gt(tt,(o(_),m(()=>o(_).stt.profanityFilter))),Dt(Ot,(o(_),m(()=>o(_).stt.endpointing))),Dt(Pt,(o(_),m(()=>o(_).stt.utteranceEndMs))),Gt(ee,(o(_),m(()=>o(_).stt.autoSubmit))),Dt(j,(o(_),m(()=>o(_).stt.autoSubmitDelayMs))),j.disabled=(o(_),m(()=>!o(_).stt.autoSubmit))},[()=>(o(x),s(),m(()=>!o(x).trim()||s().creating))]),W("click",B,()=>c.reset()),pr(ne,()=>o(x),re=>w(x,re)),W("keydown",ne,re=>re.key==="Enter"?P():null),W("click",ge,P),W("click",Je,ae),W("change",bt,re=>V("model",re.target.value)),W("click",st,()=>se("fast")),W("click",Ve,()=>se("normal")),W("click",Ft,()=>se("slow")),W("change",ut,re=>V("interimResults",re.target.checked)),W("change",At,re=>V("vadEvents",re.target.checked)),W("change",bn,re=>V("smartFormat",re.target.checked)),W("change",In,re=>V("punctuate",re.target.checked)),W("change",Re,re=>V("numerals",re.target.checked)),W("change",zt,re=>V("fillerWords",re.target.checked)),W("change",tt,re=>V("profanityFilter",re.target.checked)),W("change",Ot,re=>J(re,we=>V("endpointing",we))),W("change",Pt,re=>J(re,we=>V("utteranceEndMs",we))),W("change",ee,re=>V("autoSubmit",re.target.checked)),W("change",j,re=>J(re,we=>V("autoSubmitDelayMs",we))),k(H,z)},$$slots:{default:!0,heading:(H,q)=>{var z=gb();k(H,z)},footer:(H,q)=>{var z=wb(),le=g(z);{var xe=B=>{var _e=bb();k(B,_e)},De=B=>{var _e=Ae(),Ne=me(_e);{var Be=ke=>{var We=_b(),he=g(We);K(()=>X(he,o(b))),k(ke,We)},Oe=ke=>{var We=Ae(),he=me(We);{var ne=be=>{var Te=yb();k(be,Te)},ge=be=>{var Te=Ae(),qe=me(Te);{var ce=Ee=>{var Fe=xb();k(Ee,Fe)},pe=Ee=>{var Fe=kb();k(Ee,Fe)};$(qe,Ee=>{n(),o(E),m(()=>n().dirty||o(E))?Ee(ce):Ee(pe,!1)},!0)}k(be,Te)};$(he,be=>{n(),o(S),m(()=>n().saving||o(S))?be(ne):be(ge,!1)},!0)}k(ke,We)};$(Ne,ke=>{o(b)?ke(Be):ke(Oe,!1)},!0)}k(B,_e)};$(le,B=>{n(),m(()=>n().saveError)?B(xe):B(De,!1)})}k(H,z)}}})}};$(L,G=>{i()&&G(U)})}k(e,ue),lt(),u()}async function Sb(){const e=await fetch(`${yt}/api/clients/kiosk/stt`);if(!e.ok)throw new Error(`Failed to fetch kiosk STT settings: ${e.statusText}`);return e.json()}async function Cb(e){const t=await fetch(`${yt}/api/clients/kiosk/stt`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk STT settings: ${t.statusText}`);return t.json()}async function Ab(){const e=await fetch(`${yt}/api/clients/kiosk/stt/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk STT settings: ${e.statusText}`);return e.json()}async function Db(){const e=await fetch(`${yt}/api/clients/kiosk/tts`);if(!e.ok)throw new Error(`Failed to fetch kiosk TTS settings: ${e.statusText}`);return e.json()}async function Tb(e){const t=await fetch(`${yt}/api/clients/kiosk/tts`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk TTS settings: ${t.statusText}`);return t.json()}async function Fb(){const e=await fetch(`${yt}/api/clients/kiosk/tts/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk TTS settings: ${e.statusText}`);return e.json()}async function Mb(e="openai"){const t=await fetch(`${yt}/api/clients/kiosk/tts/voices?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Failed to fetch TTS voices: ${t.statusText}`);return t.json()}async function Pb(){const e=await fetch(`${yt}/api/clients/kiosk/ui`);if(!e.ok)throw new Error(`Failed to fetch kiosk UI settings: ${e.statusText}`);return e.json()}async function Ib(e){const t=await fetch(`${yt}/api/clients/kiosk/ui`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk UI settings: ${t.statusText}`);return t.json()}async function Nb(){const e=await fetch(`${yt}/api/clients/kiosk/llm`);if(!e.ok)throw new Error(`Failed to fetch kiosk LLM settings: ${e.statusText}`);return e.json()}async function Lb(e){const t=await fetch(`${yt}/api/clients/kiosk/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk LLM settings: ${t.statusText}`);return t.json()}async function Ob(){const e=await fetch(`${yt}/api/clients/kiosk/llm/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk LLM settings: ${e.statusText}`);return e.json()}async function $b(){const e=await fetch(`${yt}/api/clients/kiosk/presets`);if(!e.ok)throw new Error(`Failed to fetch kiosk presets: ${e.statusText}`);return e.json()}async function Rb(e){const t=await fetch(`${yt}/api/clients/kiosk/presets/${e}/activate`,{method:"POST"});if(!t.ok)throw new Error(`Failed to activate kiosk preset: ${t.statusText}`);return t.json()}async function zb(e,t){const n=await fetch(`${yt}/api/clients/kiosk/presets/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update kiosk preset: ${n.statusText}`);return n.json()}const Ub={eot_threshold:.7,eot_timeout_ms:5e3,eager_eot_threshold:null,keyterms:[],enabled:!0,provider:"openai",voice:"alloy",model:"tts-1",speed:1,sample_rate:24e3,idle_return_delay_ms:1e4,llm_model:"openai/gpt-4o-mini",system_prompt:"You are a helpful voice assistant who replies succinctly.",temperature:.7,max_tokens:500,conversation_mode:!1,conversation_timeout_seconds:10};function Bb(e){return JSON.parse(JSON.stringify(e))}function Cd(){return Bb(Ub)}function jb(){const e=Tt(Cd());let t=!1,n=!1;async function r(){if(n)return nt(e);n=!0;try{const[u,i,l,c]=await Promise.all([Sb(),Db(),Pb(),Nb()]),f={eot_threshold:u.eot_threshold,eot_timeout_ms:u.eot_timeout_ms,eager_eot_threshold:u.eager_eot_threshold??null,keyterms:u.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,sample_rate:i.sample_rate,idle_return_delay_ms:l.idle_return_delay_ms,llm_model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens,conversation_mode:c.conversation_mode,conversation_timeout_seconds:c.conversation_timeout_seconds};return e.set(f),t=!0,f}catch(u){return console.error("Failed to load kiosk settings:",u),nt(e)}finally{n=!1}}async function s(u){try{const i={},l={},c={},f={};u.eot_threshold!==void 0&&(i.eot_threshold=u.eot_threshold),u.eot_timeout_ms!==void 0&&(i.eot_timeout_ms=u.eot_timeout_ms),u.eager_eot_threshold!==void 0&&(i.eager_eot_threshold=u.eager_eot_threshold),u.keyterms!==void 0&&(i.keyterms=u.keyterms),u.enabled!==void 0&&(l.enabled=u.enabled),u.provider!==void 0&&(l.provider=u.provider),u.voice!==void 0&&(l.voice=u.voice),u.model!==void 0&&(l.model=u.model),u.speed!==void 0&&(l.speed=u.speed),u.sample_rate!==void 0&&(l.sample_rate=u.sample_rate),u.idle_return_delay_ms!==void 0&&(c.idle_return_delay_ms=u.idle_return_delay_ms),u.llm_model!==void 0&&(f.model=u.llm_model),u.system_prompt!==void 0&&(f.system_prompt=u.system_prompt),u.temperature!==void 0&&(f.temperature=u.temperature),u.max_tokens!==void 0&&(f.max_tokens=u.max_tokens),u.conversation_mode!==void 0&&(f.conversation_mode=u.conversation_mode),u.conversation_timeout_seconds!==void 0&&(f.conversation_timeout_seconds=u.conversation_timeout_seconds);const d=[];return Object.keys(i).length>0&&d.push(Cb(i)),Object.keys(l).length>0&&d.push(Tb(l)),Object.keys(c).length>0&&d.push(Ib(c)),Object.keys(f).length>0&&d.push(Lb(f)),await Promise.all(d),await r()}catch(i){throw console.error("Failed to save kiosk settings:",i),i}}async function a(){try{const[u,i,l]=await Promise.all([Ab(),Fb(),Ob()]),c=nt(e),f={eot_threshold:u.eot_threshold,eot_timeout_ms:u.eot_timeout_ms,eager_eot_threshold:u.eager_eot_threshold??null,keyterms:u.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,sample_rate:i.sample_rate,idle_return_delay_ms:c.idle_return_delay_ms,llm_model:l.model,system_prompt:l.system_prompt,temperature:l.temperature,max_tokens:l.max_tokens,conversation_mode:l.conversation_mode,conversation_timeout_seconds:l.conversation_timeout_seconds};return e.set(f),f}catch(u){throw console.error("Failed to reset kiosk settings:",u),u}}return{subscribe:e.subscribe,load:r,save:s,reset:a,get isLoaded(){return t},get current(){return nt(e)}}}const Ha=jb();var qb=F('<p class="status">Loading settingsâ¦</p>'),Hb=F("<option> </option>"),Wb=F("<option> </option>"),Vb=F('<div class="presets-container svelte-10jke8k"><label class="setting-label" for="preset-select">Preset</label> <div class="preset-select-row svelte-10jke8k"><select id="preset-select" class="select-input svelte-10jke8k"></select> <button type="button" class="btn btn-ghost btn-small" title="Save current settings to the selected preset">ð¾ Save</button></div></div>'),Gb=F('<div class="setting-range" style="margin-top: 0.75rem;"><div class="setting-range-header"><span class="setting-label" title="Confidence level for triggering early processing. Lower = starts processing sooner (more false starts). Higher = waits longer before speculating.">Eager EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="0.9" step="0.05"/> <div class="range-extents"><span>0.3 (eager)</span> <span>0.9 (conservative)</span></div></div>'),Kb=F("<option> </option>"),Zb=F('<div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-voice" title="Select the OpenAI voice for text-to-speech synthesis.">Voice</label> <select id="tts-voice" class="select-input svelte-10jke8k"></select></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Speech speed multiplier. 1.0 is normal speed.">Speed</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="2.0" step="0.1"/> <div class="range-extents"><span>0.5x (slow)</span> <span>2x (fast)</span></div></div></div>',1),Yb=F(`<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior.</span></div> <div class="reasoning-controls"><div class="model-presets-row svelte-10jke8k"><div class="setting-select model-select-compact svelte-10jke8k"><label class="setting-label" for="llm-model" title="Select the language model for generating responses.">Model</label> <select id="llm-model" class="select-input svelte-10jke8k"></select></div> <!></div> <div class="system-prompt-row svelte-10jke8k"><label class="setting-label" for="system-prompt" title="Instructions that define how the assistant behaves.">System Prompt</label> <textarea id="system-prompt" class="keyterms-input system-prompt svelte-10jke8k" rows="4" placeholder="You are a helpful voice assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses. Lower = more focused, higher = more creative. Note: Some models don't support this parameter.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens. Keep low for voice interactions.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="2000" step="50"/> <div class="range-extents"><span>50 (short)</span> <span>2000 (long)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Speech Recognition</span> <span class="setting-hint">Deepgram Flux end-of-turn detection settings.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Confidence level (0.5-0.9) required before the system considers you've finished speaking. Lower = faster response but may cut you off. Higher = waits longer to be sure you're done.">EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="0.9" step="0.05"/> <div class="range-extents"><span>0.5 (fast)</span> <span>0.9 (reliable)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum time (ms) to wait after speech before forcing end-of-turn, regardless of confidence. Shorter = faster response. Longer = allows for natural pauses.">EOT Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="500" max="10000" step="250"/> <div class="range-extents"><span>500ms</span> <span>10s</span></div></div></div></div></div> <div class="setting"><div class="setting-header"><span class="setting-label">Advanced</span> <span class="setting-hint">Optional fine-tuning options.</span></div> <label class="setting-boolean" title="When enabled, the system can speculatively start processing before you fully finish speaking. This reduces latency but may cause 'false starts' if you pause mid-sentence."><input type="checkbox"/> <span>Enable eager end-of-turn</span></label> <!></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Display</span> <span class="setting-hint">Kiosk screen behavior settings.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="When enabled, the microphone re-opens after the assistant speaks, allowing continuous conversation without needing the wake word." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Continuous conversation mode</span></label> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait on the transcription screen after going IDLE before returning to the clock screen.">Return to Clock</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1000" max="60000" step="1000"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait for speech before ending the conversation session and returning to the clock.">Conversation Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1" max="60" step="1"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Text-to-Speech</span> <span class="setting-hint">Voice synthesis settings for assistant responses.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="Enable or disable audio playback of assistant responses."><input type="checkbox"/> <span>Enable TTS</span></label> <!></div></div> <div class="setting"><div class="setting-header"><span class="setting-label" title="Words or phrases the speech recognition should pay extra attention to. Useful for device names, product terms, or commands specific to your home automation setup.">Keyterms</span> <span class="setting-hint">Words to boost recognition (one per line, up to 100).</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="3" placeholder="lights thermostat turn on"></textarea></div></div>`),Jb=F('<h2 id="kiosk-settings-title">Kiosk settings</h2> <p class="model-settings-subtitle">Configure the voice assistant kiosk.</p>',1),Xb=F('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),Qb=F('<span class="status error"> </span>'),e_=F('<span class="status">Saving changesâ¦</span>'),t_=F('<span class="status">Pending changes; closing this modal will save.</span>'),n_=F('<span class="status">Changes save when you close this modal.</span>'),r_=F('<footer slot="footer" class="model-settings-footer"><!></footer>');function s_(e,t){it(t,!1);const n=()=>at(a,"$filtered",r),[r,s]=Hn(),{filtered:a}=Qn;let u=R([]),i=R(null),l=R(!1),c=oe(t,"open",8,!1);const f=It();let d=R(Cd()),v=R(!1),h=R(!1),p=R(!0),x=R(null),y=R(!1),_=!1;async function E(){w(p,!0);try{const[I,V]=await Promise.all([Ha.load(),$b(),Qn.loadModels()]);w(d,{...I}),w(u,await Mb("openai")),w(i,V)}catch{w(x,"Failed to load settings")}finally{w(p,!1)}}async function S(I){if(!o(l)){w(l,!0);try{w(i,await Rb(I));const V=await Ha.load();w(d,{...V}),w(v,!1)}catch{w(x,"Failed to activate preset")}finally{w(l,!1)}}}async function b(){if(!(!o(i)||o(l))){w(l,!0);try{const I=o(i).active_index,V=o(i).presets[I],J={name:V.name,model:o(d).llm_model,system_prompt:o(d).system_prompt??"",temperature:o(d).temperature,max_tokens:o(d).max_tokens,eot_threshold:o(d).eot_threshold,eot_timeout_ms:o(d).eot_timeout_ms,keyterms:o(d).keyterms,tts_enabled:o(d).enabled,tts_voice:o(d).voice,tts_model:o(d).model,tts_sample_rate:o(d).sample_rate};w(i,await zb(I,J)),w(x,`Saved to "${V.name}"`),setTimeout(()=>{o(x)?.startsWith("Saved")&&w(x,null)},2e3)}catch{w(x,"Failed to save preset")}finally{w(l,!1)}}}function D(){_||o(h)||(_=!0,(async()=>(await P()&&f("close"),_=!1))())}function A(){w(v,!0),w(x,null)}async function P(){if(!o(v))return!0;w(h,!0),w(x,null);try{const I=await Ha.save(o(d));return w(d,{...I}),w(v,!1),!0}catch(I){const V=I instanceof Error?I.message:"Failed to save settings.";return w(x,V),!1}finally{w(h,!1)}}async function Z(){w(h,!0);try{const I=await Ha.reset();w(d,{...I}),w(v,!1),w(x,null)}catch{w(x,"Failed to reset settings")}finally{w(h,!1)}}function Y(I,V,J){return`${(I-V)/(J-V)*100}%`}ve(()=>(O(c()),o(y),o(v),o(h)),()=>{c()&&!o(y)?(w(y,!0),w(v,!1),w(h,!1),w(x,null),E()):!c()&&o(y)&&(w(y,!1),o(v)&&!o(h)&&P())}),Rt(),dt();var T=Ae(),N=me(T);{var Q=I=>{vr(I,{get open(){return c()},labelledBy:"kiosk-settings-title",closeLabel:"Close kiosk settings",$$events:{close:()=>void D()},children:(V,J)=>{var se=Ae(),de=me(se);{var ae=L=>{var U=qb();k(L,U)},ue=L=>{var U=Yb(),G=g(U),ie=C(g(G),2),H=g(ie),q=g(H),z=C(g(q),2);_t(z,5,n,ee=>ee.id,(ee,Ie)=>{var j=Hb(),re=g(j),we={};K(()=>{X(re,(o(Ie),m(()=>o(Ie).name??o(Ie).id))),we!==(we=(o(Ie),m(()=>o(Ie).id)))&&(j.value=(j.__value=(o(Ie),m(()=>o(Ie).id)))??"")}),k(ee,j)});var le;jn(z);var xe=C(q,2);{var De=ee=>{var Ie=Vb(),j=C(g(Ie),2),re=g(j);_t(re,5,()=>(o(i),m(()=>o(i).presets)),zn,(Ze,Et,Ue)=>{var ft=Wb(),St=g(ft);ft.value=ft.__value=Ue,K(()=>X(St,(o(Et),m(()=>o(Et).name)))),k(Ze,ft)});var we;jn(re);var Pe=C(re,2);K(()=>{re.disabled=o(h)||o(l),we!==(we=(o(i),m(()=>o(i).active_index)))&&(re.value=(re.__value=(o(i),m(()=>o(i).active_index)))??"",kn(re,(o(i),m(()=>o(i).active_index)))),Pe.disabled=o(h)||o(l)}),W("change",re,Ze=>S(parseInt(Ze.target.value,10))),W("click",Pe,b),k(ee,Ie)};$(xe,ee=>{o(i)&&ee(De)})}var B=C(H,2),_e=C(g(B),2);Jr(_e,(ee,Ie)=>ci?.(ee),()=>o(d).system_prompt),qn(()=>W("input",_e,ee=>{w(d,{...o(d),system_prompt:ee.target.value||null}),A()}));var Ne=C(B,2),Be=g(Ne),Oe=g(Be),ke=C(g(Oe),2),We=g(ke),he=C(Oe,2),ne=C(Ne,2),ge=g(ne),be=g(ge),Te=C(g(be),2),qe=g(Te),ce=C(be,2),pe=C(G,2),Ee=C(g(pe),2),Fe=g(Ee),et=g(Fe),rt=g(et),Le=C(g(rt),2),ze=g(Le),je=C(rt,2),Je=C(Fe,2),ct=g(Je),He=g(ct),ht=C(g(He),2),Bt=g(ht),bt=C(He,2),Zt=C(pe,2),jt=C(g(Zt),2),qt=g(jt),st=C(jt,2);{var Ve=ee=>{var Ie=Gb(),j=g(Ie),re=C(g(j),2),we=g(re),Pe=C(j,2);K((Ze,Et)=>{X(we,Ze),Dt(Pe,(o(d),m(()=>o(d).eager_eot_threshold??.5))),Pe.disabled=o(h),xn(Pe,`--slider-fill: ${Et??""}`)},[()=>(o(d),m(()=>o(d).eager_eot_threshold?.toFixed(2)??"â")),()=>(o(d),m(()=>Y(o(d).eager_eot_threshold??.5,.3,.9)))]),W("input",Pe,Ze=>{w(d,{...o(d),eager_eot_threshold:parseFloat(Ze.target.value)}),A()}),k(ee,Ie)};$(st,ee=>{o(d),m(()=>o(d).eager_eot_threshold!==null)&&ee(Ve)})}var Ft=C(Zt,2),ye=C(g(Ft),2),Se=g(ye),ut=g(Se),Yt=C(Se,2),At=g(Yt),Nt=g(At),bn=C(g(Nt),2),ur=g(bn),In=C(Nt,2),Me=C(Yt,2);let Re;var Mt=g(Me),zt=g(Mt),rn=C(g(zt),2),tt=g(rn),Ge=C(zt,2),mt=C(Ft,2),Lt=C(g(mt),2),Ot=g(Lt),ot=g(Ot),Pt=C(Ot,2);{var Ce=ee=>{var Ie=Zb(),j=me(Ie),re=g(j),we=C(g(re),2);_t(we,5,()=>o(u),zn,(mn,$t)=>{var _n=Kb(),gr=g(_n),br={};K(()=>{X(gr,(o($t),m(()=>o($t).name))),br!==(br=(o($t),m(()=>o($t).id)))&&(_n.value=(_n.__value=(o($t),m(()=>o($t).id)))??"")}),k(mn,_n)});var Pe;jn(we);var Ze=C(j,2),Et=g(Ze),Ue=g(Et),ft=C(g(Ue),2),St=g(ft),$e=C(Ue,2);K((mn,$t)=>{we.disabled=o(h),Pe!==(Pe=(o(d),m(()=>o(d).voice)))&&(we.value=(we.__value=(o(d),m(()=>o(d).voice)))??"",kn(we,(o(d),m(()=>o(d).voice)))),X(St,`${mn??""}x`),Dt($e,(o(d),m(()=>o(d).speed))),$e.disabled=o(h),xn($e,`--slider-fill: ${$t??""}`)},[()=>(o(d),m(()=>o(d).speed.toFixed(1))),()=>(o(d),m(()=>Y(o(d).speed,.5,2)))]),W("change",we,mn=>{w(d,{...o(d),voice:mn.target.value}),A()}),W("input",$e,mn=>{w(d,{...o(d),speed:parseFloat(mn.target.value)}),A()}),k(ee,Ie)};$(Pt,ee=>{o(d),m(()=>o(d).enabled)&&ee(Ce)})}var M=C(mt,2),te=C(g(M),2);K((ee,Ie,j,re,we,Pe,Ze,Et,Ue,ft,St,$e)=>{z.disabled=o(h),le!==(le=(o(d),m(()=>o(d).llm_model)))&&(z.value=(z.__value=(o(d),m(()=>o(d).llm_model)))??"",kn(z,(o(d),m(()=>o(d).llm_model)))),_e.disabled=o(h),Dt(_e,(o(d),m(()=>o(d).system_prompt??""))),X(We,ee),Dt(he,(o(d),m(()=>o(d).temperature))),he.disabled=o(h),xn(he,`--slider-fill: ${Ie??""}`),X(qe,(o(d),m(()=>o(d).max_tokens))),Dt(ce,(o(d),m(()=>o(d).max_tokens))),ce.disabled=o(h),xn(ce,`--slider-fill: ${j??""}`),X(ze,re),Dt(je,(o(d),m(()=>o(d).eot_threshold))),je.disabled=o(h),xn(je,`--slider-fill: ${we??""}`),X(Bt,`${o(d),m(()=>o(d).eot_timeout_ms)??""}ms`),Dt(bt,(o(d),m(()=>o(d).eot_timeout_ms))),bt.disabled=o(h),xn(bt,`--slider-fill: ${Pe??""}`),Gt(qt,(o(d),m(()=>o(d).eager_eot_threshold!==null))),qt.disabled=o(h),Gt(ut,(o(d),m(()=>o(d).conversation_mode))),ut.disabled=o(h),X(ur,`${Ze??""}s`),Dt(In,(o(d),m(()=>o(d).idle_return_delay_ms))),In.disabled=o(h),xn(In,`--slider-fill: ${Et??""}`),Re=Ct(Me,1,"reasoning-field svelte-10jke8k",null,Re,Ue),X(tt,`${ft??""}s`),Dt(Ge,(o(d),m(()=>o(d).conversation_timeout_seconds))),Ge.disabled=(o(h),o(d),m(()=>o(h)||!o(d).conversation_mode)),xn(Ge,`--slider-fill: ${St??""}`),Gt(ot,(o(d),m(()=>o(d).enabled))),ot.disabled=o(h),te.disabled=o(h),Dt(te,$e)},[()=>(o(d),m(()=>o(d).temperature.toFixed(1))),()=>(o(d),m(()=>Y(o(d).temperature,0,2))),()=>(o(d),m(()=>Y(o(d).max_tokens,50,2e3))),()=>(o(d),m(()=>o(d).eot_threshold.toFixed(2))),()=>(o(d),m(()=>Y(o(d).eot_threshold,.5,.9))),()=>(o(d),m(()=>Y(o(d).eot_timeout_ms,500,1e4))),()=>(o(d),m(()=>(o(d).idle_return_delay_ms/1e3).toFixed(0))),()=>(o(d),m(()=>Y(o(d).idle_return_delay_ms,1e3,6e4))),()=>({"disabled-field":!o(d).conversation_mode}),()=>(o(d),m(()=>o(d).conversation_timeout_seconds.toFixed(0))),()=>(o(d),m(()=>Y(o(d).conversation_timeout_seconds,1,60))),()=>(o(d),m(()=>o(d).keyterms.join(`
`)))]),W("change",z,ee=>{w(d,{...o(d),llm_model:ee.target.value}),A()}),W("input",he,ee=>{w(d,{...o(d),temperature:parseFloat(ee.target.value)}),A()}),W("input",ce,ee=>{w(d,{...o(d),max_tokens:parseInt(ee.target.value,10)}),A()}),W("input",je,ee=>{w(d,{...o(d),eot_threshold:parseFloat(ee.target.value)}),A()}),W("input",bt,ee=>{w(d,{...o(d),eot_timeout_ms:parseInt(ee.target.value,10)}),A()}),W("change",qt,ee=>{const Ie=ee.target.checked;w(d,{...o(d),eager_eot_threshold:Ie?.5:null}),A()}),W("change",ut,ee=>{w(d,{...o(d),conversation_mode:ee.target.checked}),A()}),W("input",In,ee=>{w(d,{...o(d),idle_return_delay_ms:parseInt(ee.target.value,10)}),A()}),W("input",Ge,ee=>{w(d,{...o(d),conversation_timeout_seconds:parseFloat(ee.target.value)}),A()}),W("change",ot,ee=>{w(d,{...o(d),enabled:ee.target.checked}),A()}),W("input",te,ee=>{const j=ee.target.value.split(`
`).map(re=>re.trim()).filter(re=>re.length>0).slice(0,100);w(d,{...o(d),keyterms:j}),A()}),k(L,U)};$(de,L=>{o(p)?L(ae):L(ue,!1)})}k(V,se)},$$slots:{default:!0,heading:(V,J)=>{var se=Jb();k(V,se)},actions:(V,J)=>{var se=Xb();K(()=>se.disabled=o(h)||o(p)),W("click",se,Z),k(V,se)},footer:(V,J)=>{var se=r_(),de=g(se);{var ae=L=>{var U=Qb(),G=g(U);K(()=>X(G,o(x))),k(L,U)},ue=L=>{var U=Ae(),G=me(U);{var ie=q=>{var z=e_();k(q,z)},H=q=>{var z=Ae(),le=me(z);{var xe=B=>{var _e=t_();k(B,_e)},De=B=>{var _e=n_();k(B,_e)};$(le,B=>{o(v)?B(xe):B(De,!1)},!0)}k(q,z)};$(G,q=>{o(h)?q(ie):q(H,!1)},!0)}k(L,U)};$(de,L=>{o(x)?L(ae):L(ue,!1)})}k(V,se)}}})};$(N,I=>{c()&&I(Q)})}k(e,T),lt(),s()}async function a_(){const e=await fetch(`${yt}/api/clients/cli/llm`);if(!e.ok)throw new Error(`Failed to fetch CLI LLM settings: ${e.statusText}`);return e.json()}async function u_(e){const t=await fetch(`${yt}/api/clients/cli/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update CLI LLM settings: ${t.statusText}`);return t.json()}async function o_(){const e=await fetch(`${yt}/api/clients/cli/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset CLI settings: ${e.statusText}`);return e.json()}async function i_(){const e=await fetch(`${yt}/api/clients/cli/presets`);if(!e.ok)throw new Error(`Failed to fetch CLI presets: ${e.statusText}`);return e.json()}async function l_(e){const t=await fetch(`${yt}/api/clients/cli/presets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to create CLI preset: ${t.statusText}`);return t.json()}async function c_(e){const t=await fetch(`${yt}/api/clients/cli/presets/by-name/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete CLI preset: ${t.statusText}`)}async function d_(e){const t=await fetch(`${yt}/api/clients/cli/presets/by-name/${e}/apply`,{method:"POST"});if(!t.ok)throw new Error(`Failed to apply CLI preset: ${t.statusText}`);return t.json()}const Io={model:"openai/gpt-4o-mini",system_prompt:`You control the user's system via shell. Call host_get_profile first - it tells you everything: OS, paths, tools, and quirks.

PRINCIPLES:
1. ACT, don't instruct. Execute commands directly. Never tell the user to click, navigate, or check something themselves - do it yourself.
2. FETCH, don't defer. If answering requires live data (weather, IPs, system state, etc.), get it via shell - don't say you lack access.
3. READ before WRITE. Query current state before changing anything. Never assume.
4. VERIFY outcomes. Don't trust exit codes alone - check that the expected result actually exists.
5. BACKUP before destructive edits. Verify the backup exists before proceeding.
6. BRIEF STATUS. When calling tools, include a short sentence explaining what you're doing.

WHEN THINGS FAIL:
- Read both stdout and stderr carefully - they usually explain why.
- Explain the root cause briefly.
- Offer what YOU can try next (retry, workaround, different approach).
- If you need user input (e.g., password, confirmation), ask once and wait - do not dump instructions.

Workflow: get profile â query state â act â verify â report.`,temperature:.7,max_tokens:1e3};function f_(){const e=Tt(Io);let t=!1,n=!1;async function r(){if(n)return nt(e);n=!0;try{const i=await a_(),l={model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens};return e.set(l),t=!0,l}catch(i){return console.error("Failed to load CLI settings:",i),nt(e)}finally{n=!1}}async function s(i){const l=nt(e);e.set({...l,...i,model:i.model??l.model,system_prompt:i.system_prompt??l.system_prompt,temperature:i.temperature??l.temperature,max_tokens:i.max_tokens??l.max_tokens});try{const c=await u_(i);e.update(f=>({...f,model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens}))}catch(c){throw console.error("Failed to update CLI LLM settings:",c),e.set(l),c}}async function a(){try{try{await d_("default"),await r();return}catch{console.log("No user default found, performing hard reset")}await o_(),await r(),await s(Io)}catch(i){throw console.error("Failed to reset CLI settings:",i),i}}async function u(){const i=nt(e);try{(await i_()).presets.some(c=>c.name==="default")&&await c_("default"),await l_({name:"default",llm:{model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens}})}catch(l){throw console.error("Failed to save as default:",l),l}}return{subscribe:e.subscribe,load:r,updateLlm:s,reset:a,saveAsDefault:u}}const na=f_();var p_=F('<p class="status">Loading settingsâ¦</p>'),h_=F("<option> </option>"),m_=F('<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior for the CLI.</span></div> <div class="reasoning-controls"><div class="setting-select svelte-17wvx4j" style="grid-column: 1 / -1;"><label class="setting-label" for="cli-llm-model" title="Select the language model for CLI responses.">Model</label> <select id="cli-llm-model" class="select-input svelte-17wvx4j"></select></div> <div class="system-prompt-row svelte-17wvx4j"><label class="setting-label" for="cli-system-prompt" title="Instructions that define how the CLI assistant behaves.">System Prompt</label> <textarea id="cli-system-prompt" class="keyterms-input system-prompt svelte-17wvx4j" rows="6" placeholder="You are a helpful CLI assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="4000" step="50"/> <div class="range-extents"><span>50</span> <span>4000</span></div></div></div></div></div></div>'),v_=F('<h2 id="cli-settings-title">CLI Settings</h2> <p class="model-settings-subtitle">Configure the command-line assistant.</p>',1),g_=F('<div slot="actions" style="display: flex; gap: 0.5rem;"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button> <button type="button" class="btn btn-primary btn-small"> </button></div>'),b_=F("<span> </span>"),__=F('<span class="status">Saving changesâ¦</span>'),y_=F('<span class="status">Pending changes; closing this modal will save.</span>'),x_=F('<span class="status">Changes save on close. "Set as default" updates the reset target.</span>'),k_=F('<footer slot="footer" class="model-settings-footer"><!></footer>');function w_(e,t){it(t,!1);const n=()=>at(a,"$filtered",r),[r,s]=Hn(),{filtered:a}=Qn;let u=oe(t,"open",8,!1);const i=It();let l=R({...Io}),c=R(!1),f=R(!1),d=R(!0),v=R(null),h=R(!1),p=!1;async function x(){w(d,!0);try{const[Y]=await Promise.all([na.load(),Qn.loadModels()]);w(l,{...Y})}catch{w(v,"Failed to load settings")}finally{w(d,!1)}}function y(){p||o(f)||(p=!0,(async()=>(await E()&&i("close"),p=!1))())}function _(){w(c,!0),w(v,null)}async function E(){if(!o(c))return!0;w(f,!0),w(v,null);try{return await na.updateLlm({model:o(l).model,system_prompt:o(l).system_prompt,temperature:o(l).temperature,max_tokens:o(l).max_tokens}),w(c,!1),!0}catch(Y){const T=Y instanceof Error?Y.message:"Failed to save settings.";return w(v,T),!1}finally{w(f,!1)}}async function S(){w(f,!0);try{await na.reset();const Y=await na.load();w(l,{...Y}),w(c,!1),w(v,null)}catch{w(v,"Failed to reset settings")}finally{w(f,!1)}}async function b(){w(f,!0);try{o(c)&&await E(),await na.saveAsDefault(),w(v,"Settings saved as new default")}catch{w(v,"Failed to save as default")}finally{w(f,!1)}}function D(Y,T,N){return`${(Y-T)/(N-T)*100}%`}ve(()=>(O(u()),o(h),o(c),o(f)),()=>{u()&&!o(h)?(w(h,!0),w(c,!1),w(f,!1),w(v,null),x()):!u()&&o(h)&&(w(h,!1),o(c)&&!o(f)&&E())}),Rt(),dt();var A=Ae(),P=me(A);{var Z=Y=>{vr(Y,{get open(){return u()},labelledBy:"cli-settings-title",closeLabel:"Close CLI settings",$$events:{close:()=>void y()},children:(T,N)=>{var Q=Ae(),I=me(Q);{var V=se=>{var de=p_();k(se,de)},J=se=>{var de=m_(),ae=g(de),ue=C(g(ae),2),L=g(ue),U=C(g(L),2);_t(U,5,n,he=>he.id,(he,ne)=>{var ge=h_(),be=g(ge),Te={};K(()=>{X(be,(o(ne),m(()=>o(ne).name??o(ne).id))),Te!==(Te=(o(ne),m(()=>o(ne).id)))&&(ge.value=(ge.__value=(o(ne),m(()=>o(ne).id)))??"")}),k(he,ge)});var G;jn(U);var ie=C(L,2),H=C(g(ie),2);Jr(H,(he,ne)=>ci?.(he),()=>o(l).system_prompt),qn(()=>W("input",H,he=>{w(l,{...o(l),system_prompt:he.target.value||null}),_()}));var q=C(ie,2),z=g(q),le=g(z),xe=C(g(le),2),De=g(xe),B=C(le,2),_e=C(q,2),Ne=g(_e),Be=g(Ne),Oe=C(g(Be),2),ke=g(Oe),We=C(Be,2);K((he,ne,ge)=>{U.disabled=o(f),G!==(G=(o(l),m(()=>o(l).model)))&&(U.value=(U.__value=(o(l),m(()=>o(l).model)))??"",kn(U,(o(l),m(()=>o(l).model)))),H.disabled=o(f),Dt(H,(o(l),m(()=>o(l).system_prompt??""))),X(De,he),Dt(B,(o(l),m(()=>o(l).temperature??.7))),B.disabled=o(f),xn(B,`--slider-fill: ${ne??""}`),X(ke,(o(l),m(()=>o(l).max_tokens??1e3))),Dt(We,(o(l),m(()=>o(l).max_tokens??1e3))),We.disabled=o(f),xn(We,`--slider-fill: ${ge??""}`)},[()=>(o(l),m(()=>o(l).temperature?.toFixed(1)??"0.7")),()=>(o(l),m(()=>D(o(l).temperature??.7,0,2))),()=>(o(l),m(()=>D(o(l).max_tokens??1e3,50,4e3)))]),W("change",U,he=>{w(l,{...o(l),model:he.target.value}),_()}),W("input",B,he=>{w(l,{...o(l),temperature:parseFloat(he.target.value)}),_()}),W("input",We,he=>{w(l,{...o(l),max_tokens:parseInt(he.target.value,10)}),_()}),k(se,de)};$(I,se=>{o(d)?se(V):se(J,!1)})}k(T,Q)},$$slots:{default:!0,heading:(T,N)=>{var Q=v_();k(T,Q)},actions:(T,N)=>{var Q=g_(),I=g(Q),V=C(I,2),J=g(V);K(()=>{I.disabled=o(f)||o(d),V.disabled=o(f)||o(d),X(J,o(f)?"Savingâ¦":"Set as default")}),W("click",I,S),W("click",V,()=>void b()),k(T,Q)},footer:(T,N)=>{var Q=k_(),I=g(Q);{var V=se=>{var de=b_();let ae;var ue=g(de);K(L=>{ae=Ct(de,1,"status",null,ae,L),X(ue,o(v))},[()=>({error:o(v).includes("Failed")})]),k(se,de)},J=se=>{var de=Ae(),ae=me(de);{var ue=U=>{var G=__();k(U,G)},L=U=>{var G=Ae(),ie=me(G);{var H=z=>{var le=y_();k(z,le)},q=z=>{var le=x_();k(z,le)};$(ie,z=>{o(c)?z(H):z(q,!1)},!0)}k(U,G)};$(ae,U=>{o(f)?U(ue):U(L,!1)},!0)}k(se,de)};$(I,se=>{o(v)?se(V):se(J,!1)})}k(T,Q)}}})};$(P,Y=>{u()&&Y(Z)})}k(e,A),lt(),s()}const tu=["Google Calendar","Google Tasks","Gmail","Google Drive"],co={loading:!1,authorizing:!1,authorized:!1,userEmail:null,expiresAt:null,services:[...tu],error:null};function E_(e){return new Promise((t,n)=>{const r=u=>{const i=u.data;if(!i||typeof i!="object"||i.source!=="google-auth")return;a();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},s=window.setInterval(()=>{e.closed&&(a(),n(new Error("The authorization window was closed before completion.")))},500),a=()=>{window.removeEventListener("message",r),window.clearInterval(s)};window.addEventListener("message",r)})}function S_(){const e=Tt({...co});async function t(){e.update(s=>({...s,loading:!0,error:null}));try{const s=await N0();e.set({loading:!1,authorizing:!1,authorized:s.authorized,userEmail:s.user_email??null,expiresAt:s.expires_at??null,services:s.services&&s.services.length>0?s.services:[...tu],error:null})}catch(s){const a=s instanceof Error?s.message:"Failed to check Google authorization status.";e.set({...co,services:[...tu],loading:!1,error:a})}}function n(){e.set({...co,services:[...tu]})}async function r(){if(typeof window>"u")return e.update(a=>({...a,error:"Google authorization is only available in a browser environment."})),!1;if(nt(e).authorizing)return!1;e.update(a=>({...a,authorizing:!0,error:null}));try{const a=await L0({}),u=window.open(a.auth_url,"google-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!u)throw new Error("Popup was blocked. Allow pop-ups and try again.");return u.focus(),await E_(u),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(a){const u=a instanceof Error?a.message:"Failed to start Google authorization.";return e.update(i=>({...i,authorizing:!1,error:u})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}const Wa={loading:!1,refreshing:!1,saving:!1,dirty:!1,error:null,saveError:null,servers:[],updatedAt:null,pending:{},pendingChanges:{}};function Tl(e,t){return{...e,servers:t.servers??[],updatedAt:t.updated_at??null,error:null,saveError:null}}function C_(){const e=Tt({...Wa});async function t(){e.set({...Wa,loading:!0});try{const h=await F0();e.set({...Wa,servers:h.servers,updatedAt:h.updated_at??null,loading:!1})}catch(h){const p=h instanceof Error?h.message:"Failed to load MCP servers.";e.set({...Wa,loading:!1,error:p})}}function n(h,p){e.update(x=>{const y=x.servers.map(E=>E.id===h?{...E,enabled:p}:E),_={...x.pendingChanges,[h]:{...x.pendingChanges[h]??{},enabled:p}};return{...x,servers:y,dirty:!0,saveError:null,pendingChanges:_}})}async function r(h,p,x){e.update(y=>{const _=y.servers.map(E=>{if(E.id!==h)return E;const S={...E.client_enabled??{}};return S[p]=x,{...E,client_enabled:S}});return{...y,servers:_,pending:{...y.pending,[h]:!0},saveError:null}});try{const y=await I0(h,p,x);e.update(_=>{const E={..._.pending};return delete E[h],{..._,servers:y.servers??_.servers,updatedAt:y.updated_at??_.updatedAt,pending:E}})}catch(y){const _=y instanceof Error?y.message:"Failed to update MCP server client enabled.";e.update(E=>{const S={...E.pending};return delete S[h],{...E,pending:S,saveError:_}})}}function s(h,p){r(h,"kiosk",p)}function a(h,p){r(h,"svelte",p)}function u(h,p){r(h,"cli",p)}function i(h,p,x){e.update(y=>{const _=y.servers.find(A=>A.id===h);if(!_)return y;const E=new Set(_.disabled_tools??[]);x?E.delete(p):E.add(p);const S=Array.from(E).sort(),b=y.servers.map(A=>A.id!==h?A:{...A,disabled_tools:S,tools:A.tools.map(P=>P.name===p?{...P,enabled:x}:P)}),D={...y.pendingChanges,[h]:{...y.pendingChanges[h]??{},disabled_tools:S}};return{...y,servers:b,dirty:!0,saveError:null,pendingChanges:D}})}function l(h,p,x){e.update(y=>{const _=y.servers.find(D=>D.id===h);if(!_)return y;const E={..._.env??{},...y.pendingChanges[h]?.env??{}};E[p]=x;const S=y.servers.map(D=>D.id===h?{...D,env:E}:D),b={...y.pendingChanges,[h]:{...y.pendingChanges[h]??{},env:E}};return{...y,servers:S,dirty:!0,saveError:null,pendingChanges:b}})}async function c(){e.update(h=>({...h,refreshing:!0,error:null}));try{const h=await P0();e.update(p=>({...Tl(p,h),refreshing:!1}))}catch(h){const p=h instanceof Error?h.message:"Failed to refresh MCP servers.";e.update(x=>({...x,refreshing:!1,saveError:p}))}}function f(h){return nt(e).servers.find(x=>x.id===h)}function d(h){return!!nt(e).pending[h]}async function v(){const h=nt(e);if(!h.dirty)return!0;const p=Object.entries(h.pendingChanges);if(!p.length)return e.update(y=>({...y,dirty:!1})),!0;e.update(y=>({...y,saving:!0,saveError:null}));let x=!0;for(const[y,_]of p){e.update(E=>({...E,pending:{...E.pending,[y]:!0}}));try{const E=await M0(y,_);e.update(S=>{const b={...S.pending};delete b[y];const D={...S.pendingChanges};delete D[y];const A=Tl(S,E),P=Object.keys(D).length>0;return{...A,pending:b,pendingChanges:D,dirty:P}})}catch(E){let S="Failed to update MCP server.";if(E instanceof Error)S=E.message;else if(typeof E=="object"&&E!==null){const b=E;S=String(b.detail||b.message||b.error||JSON.stringify(E))}else typeof E=="string"&&(S=E);S.includes("[object Object]")&&(S="Failed to save MCP server settings. Check server logs for details."),e.update(b=>{const D={...b.pending};return delete D[y],{...b,pending:D,saving:!1,saveError:S}}),x=!1;break}}return x?(e.update(y=>({...y,saving:!1,dirty:!1})),!0):(e.update(y=>({...y,saving:!1,dirty:!0})),!1)}return{subscribe:e.subscribe,load:t,refresh:c,setServerEnabled:n,setClientEnabled:r,setKioskEnabled:s,setFrontendEnabled:a,setCliEnabled:u,setToolEnabled:i,setServerEnv:l,getServer:f,isPending:d,flushPending:v}}const Fl={loading:!1,saving:!1,refreshing:!1,configured:!1,email:null,error:null};function A_(){const e=Tt({...Fl});async function t(){e.update(a=>({...a,loading:!0,error:null}));try{const a=await O0();e.set({loading:!1,saving:!1,refreshing:!1,configured:a.configured,email:a.email,error:null})}catch(a){const u=a instanceof Error?a.message:"Failed to check Monarch status.";e.set({...Fl,loading:!1,error:u})}}async function n(a){e.update(u=>({...u,saving:!0,error:null}));try{const u=await $0(a);return e.set({loading:!1,saving:!1,refreshing:!1,configured:u.configured,email:u.email,error:null}),!0}catch(u){const i=u instanceof Error?u.message:"Failed to save Monarch credentials.";return e.update(l=>({...l,saving:!1,error:i})),!1}}async function r(){e.update(a=>({...a,saving:!0,error:null}));try{const a=await R0();return e.set({loading:!1,saving:!1,refreshing:!1,configured:a.configured,email:a.email,error:null}),!0}catch(a){const u=a instanceof Error?a.message:"Failed to remove Monarch credentials.";return e.update(i=>({...i,saving:!1,error:u})),!1}}async function s(){e.update(a=>({...a,refreshing:!0,error:null}));try{return await new Promise(a=>setTimeout(a,2e3)),e.update(a=>({...a,refreshing:!1})),{success:!0,message:"Account data refreshed successfully"}}catch(a){const u=a instanceof Error?a.message:"Failed to refresh account data.";return e.update(i=>({...i,refreshing:!1,error:u})),{success:!1,message:u}}}return{subscribe:e.subscribe,load:t,save:n,remove:r,refresh:s}}const fo={loading:!1,authorizing:!1,authorized:!1,userEmail:null,error:null};function D_(e){return new Promise((t,n)=>{const r=u=>{const i=u.data;if(!i||typeof i!="object"||i.source!=="spotify-auth")return;a();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},s=window.setInterval(()=>{e.closed&&(a(),n(new Error("The authorization window was closed before completion.")))},500),a=()=>{window.removeEventListener("message",r),window.clearInterval(s)};window.addEventListener("message",r)})}function T_(){const e=Tt({...fo});async function t(){e.update(s=>({...s,loading:!0,error:null}));try{const s=await z0();e.set({loading:!1,authorizing:!1,authorized:s.authorized,userEmail:s.user_email??null,error:null})}catch(s){const a=s instanceof Error?s.message:"Failed to check Spotify authorization status.";e.set({...fo,loading:!1,error:a})}}function n(){e.set({...fo})}async function r(){if(typeof window>"u")return e.update(a=>({...a,error:"Spotify authorization is only available in a browser environment."})),!1;if(nt(e).authorizing)return!1;e.update(a=>({...a,authorizing:!0,error:null}));try{const a=await U0({}),u=window.open(a.auth_url,"spotify-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!u)throw new Error("Popup was blocked. Allow pop-ups and try again.");return u.focus(),await D_(u),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(a){const u=a instanceof Error?a.message:"Failed to start Spotify authorization.";return e.update(i=>({...i,authorizing:!1,error:u})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}var F_=F('<p class="status">Checking Google authorization...</p>'),M_=F('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),P_=F('<p class="status muted"> </p>'),I_=F('<p class="status muted">Access will refresh automatically.</p>'),N_=F('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <!>',1),L_=F('<p class="status">Google services are not connected.</p>'),O_=F("<li> </li>"),$_=F('<p class="status">Checking Spotify authorization...</p>'),R_=F('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),z_=F('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <p class="status muted">Access will refresh automatically.</p>',1),U_=F('<p class="status">Spotify is not connected.</p>'),B_=F('<button type="button" class="btn btn-ghost btn-small">Disconnect</button>'),j_=F('<button type="button" class="btn btn-primary btn-small"> </button>'),q_=F('<p class="status">Checking Monarch status...</p>'),H_=F('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p>'),W_=Go('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),V_=Go('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),G_=F('<p class="status error"> </p>'),K_=F(`<div class="monarch-form"><label>Email <input type="email" class="input-control" placeholder="email@example.com"/></label> <label>Password <div class="password-input-wrapper"><input class="input-control" placeholder="Password"/> <button type="button" class="btn btn-ghost btn-icon btn-small"><!></button></div></label> <label>MFA Secret (Optional) <input type="text" class="input-control" placeholder="MFA Secret"/></label> <p class="status muted" style="margin-top: -0.5rem; margin-bottom: 1rem; font-size: 0.8em;">If you already use an app, you must <strong>reset MFA</strong> in Monarch
              Settings to see the secret key again. Enter the new key here AND in
              your app.</p> <!></div>`),Z_=F('<p class="system-card-caption"> </p>'),Y_=F('<p class="system-card-caption">Toggle integrations available to the assistant.</p>'),J_=F('<p class="status">Loading MCP servers...</p>'),X_=F('<p class="status error"> </p>'),Q_=F('<p class="status">No MCP servers configured.</p>'),e3=F('<span aria-hidden="true">&bull;</span> <span> </span>',1),t3=F('<span aria-hidden="true">&bull;</span> <span> </span>',1),n3=F("<option> </option>"),r3=F(`<div class="shell-server-settings"><div class="shell-setting"><div class="shell-setting__info"><span class="field-label">This machine</span> <span class="field-hint">Select which computer you're on. Sets host profile
                              and storage path.</span></div> <select class="select-control"><option>-- Select machine --</option><!></select></div></div>`),s3=F('<li class="tool-row"><div class="tool-info"><span class="tool-name"> </span> <span class="tool-qualified"> </span></div> <label class="toggle"><input type="checkbox"/> <span> </span></label></li>'),a3=F('<ul class="tool-list"></ul>'),u3=F('<p class="status">Tool list unavailable.</p>'),o3=F('<p class="status warning"> </p>'),i3=F('<div class="tools-dropdown"><!> <!></div>'),l3=F('<li class="server-row"><div class="server-row-header"><div class="server-heading"><h4> </h4> <div class="server-meta"><span> </span> <!></div></div> <div class="server-toggles"><label class="toggle running-toggle" title="Start/stop the server process"><input type="checkbox"/> <span> </span></label> <label><input type="checkbox"/> <span>Frontend</span></label> <label><input type="checkbox"/> <span>Kiosk</span></label> <label><input type="checkbox"/> <span>CLI</span></label></div></div> <div class="server-row-body"><!> <button type="button"><span class="tools-toggle__label"> </span> <svg class="tools-toggle__icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!></div></li>'),c3=F('<ul class="server-list"></ul>'),d3=F('<p class="status error"> </p>'),f3=F('<p class="status warning">Pending changes save when you close this modal.</p>'),p3=F("<!> <!> <!>",1),h3=F(`<article class="system-card"><header class="system-card-header"><div><h3>Google services</h3> <p class="system-card-caption">Connect Calendar, Tasks, Gmail, and Drive with a single consent.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small"> </button></div></header> <div class="system-card-body google-auth-body"><!> <ul class="google-services-list"></ul> <p class="status muted">Click "Connect Google Services" to authorize these integrations for
          the assistant.</p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Spotify</h3> <p class="system-card-caption">Connect Spotify for music control and playback.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small"> </button></div></header> <div class="system-card-body google-auth-body"><!> <p class="status muted">Click "Connect Spotify" to authorize music control and playback
          features.</p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Monarch Money</h3> <p class="system-card-caption">Connect your Monarch Money account.</p></div> <div class="system-card-actions"><!></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Server status</h3> <!></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small"> </button></div></header> <div class="system-card-body"><!></div></article>`,1),m3=F('<h2 id="mcp-settings-title">MCP servers</h2> <p class="model-settings-subtitle">Manage MCP server availability, tools, and client access.</p>',1),v3=F('<p class="status error">Resolve the errors above before closing.</p>'),g3=F('<p class="status">Saving changes...</p>'),b3=F('<p class="status">Pending changes; closing this modal will save.</p>'),_3=F('<p class="status">Changes save when you close this modal.</p>'),y3=F('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function x3(e,t){it(t,!1);const n=()=>at(f,"$mcpServers",u),r=()=>at(d,"$googleAuth",u),s=()=>at(h,"$spotifyAuth",u),a=()=>at(v,"$monarchAuth",u),[u,i]=Hn();let l=oe(t,"open",8,!1);const c=It(),f=C_(),d=S_(),v=A_(),h=T_();let p=R(!1),x=!1,y=R(new Set),_=R(""),E=R(""),S=R(""),b=R(!1);const D=[{id:"xps13",label:"Dell XPS 13",path:"/home/human/GoogleDrive/host_profiles"}];async function A(){await Promise.all([f.load(),d.load(),v.load(),h.load()])}async function P(){if(x||n().saving||r().authorizing)return;x=!0;const z=await f.flushPending(),le=nt(f);z&&!le.saveError&&c("close"),x=!1}function Z(z,le){const xe=D.find(De=>De.id===le);xe&&(J(z,"HOST_PROFILE_ID",xe.id),J(z,"HOST_ROOT_PATH",xe.path))}function Y(){!o(_)||!o(E)||v.save({email:o(_),password:o(E),mfa_secret:o(S)||null})}function T(z,le){n().saving||f.setServerEnabled(z,le)}function N(z,le){n().saving||f.setKioskEnabled(z,le)}function Q(z,le){n().saving||f.setFrontendEnabled(z,le)}function I(z,le){n().saving||f.setCliEnabled(z,le)}function V(z,le,xe){n().saving||f.setToolEnabled(z,le,xe)}function J(z,le,xe){n().saving||f.setServerEnv(z,le,xe)}function se(){const z=nt(f);z.dirty||z.saving||f.refresh()}function de(){r().loading||r().authorizing||d.load()}async function ae(){r().authorizing||await d.authorize()}function ue(){s().loading||s().authorizing||h.load()}async function L(){s().authorizing||await h.authorize()}function U(z){if(!z)return null;try{const le=new Date(z);return Number.isNaN(le.getTime())?z:new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"2-digit"}).format(le)}catch(le){return console.warn("Failed to format timestamp",le),z}}function G(z){const le=new Set(o(y));le.has(z)?le.delete(z):le.add(z),w(y,le)}ve(()=>(O(l()),o(p)),()=>{l()&&!o(p)?(w(p,!0),A()):!l()&&o(p)&&(w(p,!1),d.reset(),h.reset(),w(y,new Set))}),Rt(),dt();var ie=Ae(),H=me(ie);{var q=z=>{{let le=vt(()=>(n(),r(),m(()=>n().saving||r().authorizing)));vr(z,{get open(){return l()},labelledBy:"mcp-settings-title",modalClass:"mcp-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close MCP servers",get closeDisabled(){return o(le)},$$events:{close:()=>void P()},children:(xe,De)=>{var B=h3(),_e=me(B),Ne=g(_e),Be=C(g(Ne),2),Oe=g(Be),ke=g(Oe),We=C(Ne,2),he=g(We);{var ne=Me=>{var Re=F_();k(Me,Re)},ge=Me=>{var Re=Ae(),Mt=me(Re);{var zt=tt=>{var Ge=M_(),mt=me(Ge),Lt=g(mt),Ot=C(mt,2),ot=g(Ot);K(()=>{X(Lt,(r(),m(()=>r().error))),ot.disabled=(r(),m(()=>r().loading||r().authorizing))}),W("click",ot,de),k(tt,Ge)},rn=tt=>{var Ge=Ae(),mt=me(Ge);{var Lt=ot=>{var Pt=N_(),Ce=me(Pt),M=C(g(Ce)),te=g(M),ee=C(Ce,2);{var Ie=re=>{var we=P_(),Pe=g(we);K(Ze=>X(Pe,`Current token expires ${Ze??""}.`),[()=>(r(),m(()=>U(r().expiresAt)??"soon"))]),k(re,we)},j=re=>{var we=I_();k(re,we)};$(ee,re=>{r(),m(()=>r().expiresAt)?re(Ie):re(j,!1)})}K(()=>X(te,(r(),m(()=>r().userEmail)))),k(ot,Pt)},Ot=ot=>{var Pt=L_();k(ot,Pt)};$(mt,ot=>{r(),m(()=>r().authorized)?ot(Lt):ot(Ot,!1)},!0)}k(tt,Ge)};$(Mt,tt=>{r(),m(()=>r().error)?tt(zt):tt(rn,!1)},!0)}k(Me,Re)};$(he,Me=>{r(),m(()=>r().loading)?Me(ne):Me(ge,!1)})}var be=C(he,2);_t(be,5,()=>(r(),m(()=>r().services)),zn,(Me,Re)=>{var Mt=O_(),zt=g(Mt);K(()=>X(zt,o(Re))),k(Me,Mt)});var Te=C(_e,2),qe=g(Te),ce=C(g(qe),2),pe=g(ce),Ee=g(pe),Fe=C(qe,2),et=g(Fe);{var rt=Me=>{var Re=$_();k(Me,Re)},Le=Me=>{var Re=Ae(),Mt=me(Re);{var zt=tt=>{var Ge=R_(),mt=me(Ge),Lt=g(mt),Ot=C(mt,2),ot=g(Ot);K(()=>{X(Lt,(s(),m(()=>s().error))),ot.disabled=(s(),m(()=>s().loading||s().authorizing))}),W("click",ot,ue),k(tt,Ge)},rn=tt=>{var Ge=Ae(),mt=me(Ge);{var Lt=ot=>{var Pt=z_(),Ce=me(Pt),M=C(g(Ce)),te=g(M);K(()=>X(te,(s(),m(()=>s().userEmail)))),k(ot,Pt)},Ot=ot=>{var Pt=U_();k(ot,Pt)};$(mt,ot=>{s(),m(()=>s().authorized)?ot(Lt):ot(Ot,!1)},!0)}k(tt,Ge)};$(Mt,tt=>{s(),m(()=>s().error)?tt(zt):tt(rn,!1)},!0)}k(Me,Re)};$(et,Me=>{s(),m(()=>s().loading)?Me(rt):Me(Le,!1)})}var ze=C(Te,2),je=g(ze),Je=C(g(je),2),ct=g(Je);{var He=Me=>{var Re=B_();K(()=>Re.disabled=(a(),m(()=>a().saving))),W("click",Re,()=>v.remove()),k(Me,Re)},ht=Me=>{var Re=j_(),Mt=g(Re);K(()=>{Re.disabled=(a(),o(_),o(E),m(()=>a().saving||!o(_)||!o(E))),X(Mt,(a(),m(()=>a().saving?"Saving...":"Connect")))}),W("click",Re,Y),k(Me,Re)};$(ct,Me=>{a(),m(()=>a().configured)?Me(He):Me(ht,!1)})}var Bt=C(je,2),bt=g(Bt);{var Zt=Me=>{var Re=q_();k(Me,Re)},jt=Me=>{var Re=Ae(),Mt=me(Re);{var zt=tt=>{var Ge=H_(),mt=C(g(Ge)),Lt=g(mt);K(()=>X(Lt,(a(),m(()=>a().email)))),k(tt,Ge)},rn=tt=>{var Ge=K_(),mt=g(Ge),Lt=C(g(mt)),Ot=C(mt,2),ot=C(g(Ot)),Pt=g(ot),Ce=C(Pt,2),M=g(Ce);{var te=Pe=>{var Ze=W_();k(Pe,Ze)},ee=Pe=>{var Ze=V_();k(Pe,Ze)};$(M,Pe=>{o(b)?Pe(te):Pe(ee,!1)})}var Ie=C(Ot,2),j=C(g(Ie)),re=C(Ie,4);{var we=Pe=>{var Ze=G_(),Et=g(Ze);K(()=>X(Et,(a(),m(()=>a().error)))),k(Pe,Ze)};$(re,Pe=>{a(),m(()=>a().error)&&Pe(we)})}K(()=>{fe(Pt,"type",o(b)?"text":"password"),fe(Ce,"title",o(b)?"Hide password":"Show password")}),pr(Lt,()=>o(_),Pe=>w(_,Pe)),pr(Pt,()=>o(E),Pe=>w(E,Pe)),W("click",Ce,()=>w(b,!o(b))),pr(j,()=>o(S),Pe=>w(S,Pe)),k(tt,Ge)};$(Mt,tt=>{a(),m(()=>a().configured)?tt(zt):tt(rn,!1)},!0)}k(Me,Re)};$(bt,Me=>{a(),m(()=>a().loading)?Me(Zt):Me(jt,!1)})}var qt=C(ze,2),st=g(qt),Ve=g(st),Ft=C(g(Ve),2);{var ye=Me=>{var Re=Z_(),Mt=g(Re);K(zt=>X(Mt,`Last updated ${zt??""}`),[()=>(n(),m(()=>U(n().updatedAt)??""))]),k(Me,Re)},Se=Me=>{var Re=Y_();k(Me,Re)};$(Ft,Me=>{n(),m(()=>n().updatedAt)?Me(ye):Me(Se,!1)})}var ut=C(Ve,2),Yt=g(ut),At=g(Yt),Nt=C(st,2),bn=g(Nt);{var ur=Me=>{var Re=J_();k(Me,Re)},In=Me=>{var Re=Ae(),Mt=me(Re);{var zt=tt=>{var Ge=X_(),mt=g(Ge);K(()=>X(mt,(n(),m(()=>n().error)))),k(tt,Ge)},rn=tt=>{var Ge=p3(),mt=me(Ge);{var Lt=te=>{var ee=Q_();k(te,ee)},Ot=te=>{var ee=c3();_t(ee,5,()=>(n(),m(()=>n().servers)),zn,(Ie,j)=>{var re=l3(),we=g(re),Pe=g(we),Ze=g(Pe),Et=g(Ze),Ue=C(Ze,2),ft=g(Ue);let St;var $e=g(ft),mn=C(ft,2);{var $t=Xe=>{var Xt=e3(),Nn=C(me(Xt),2),an=g(Nn);K(()=>{fe(Nn,"title",(o(j),m(()=>o(j).module))),X(an,`Module: ${o(j),m(()=>o(j).module)??""}`)}),k(Xe,Xt)},_n=Xe=>{var Xt=Ae(),Nn=me(Xt);{var an=Ln=>{var yr=t3(),Rr=C(me(yr),2),Qt=g(Rr);K((en,Vn)=>{fe(Rr,"title",en),X(Qt,`Command: ${Vn??""}`)},[()=>(o(j),m(()=>o(j).command.join(" "))),()=>(o(j),m(()=>o(j).command.join(" ")))]),k(Ln,yr)};$(Nn,Ln=>{o(j),m(()=>o(j).command?.length)&&Ln(an)},!0)}k(Xe,Xt)};$(mn,Xe=>{o(j),m(()=>o(j).module)?Xe($t):Xe(_n,!1)})}var gr=C(Pe,2),br=g(gr),as=g(br),Tu=C(as,2),Fu=g(Tu),us=C(br,2);let $s;var Rs=g(us),os=C(us,2);let zs;var Us=g(os),Bs=C(os,2);let Ia;var js=g(Bs),Lr=C(we,2),Na=g(Lr);{var Or=Xe=>{var Xt=r3(),Nn=g(Xt),an=C(g(Nn),2),Ln=g(an);Ln.value=Ln.__value="";var yr=C(Ln);_t(yr,1,()=>D,zn,(Qt,en)=>{var Vn=n3(),un=g(Vn),is={};K(()=>{X(un,(o(en),m(()=>o(en).label))),is!==(is=(o(en),m(()=>o(en).id)))&&(Vn.value=(Vn.__value=(o(en),m(()=>o(en).id)))??"")}),k(Qt,Vn)});var Rr;jn(an),K(()=>{an.disabled=(n(),o(j),m(()=>n().pending[o(j).id]||n().saving)),Rr!==(Rr=(o(j),m(()=>o(j).env?.HOST_PROFILE_ID??"")))&&(an.value=(an.__value=(o(j),m(()=>o(j).env?.HOST_PROFILE_ID??"")))??"",kn(an,(o(j),m(()=>o(j).env?.HOST_PROFILE_ID??""))))}),W("change",an,Qt=>Z(o(j).id,Qt.target.value)),k(Xe,Xt)};$(Na,Xe=>{o(j),m(()=>o(j).id==="shell-control")&&Xe(Or)})}var _r=C(Na,2);let qs;var Mu=g(_r),$r=g(Mu),Pu=C(_r,2);{var sn=Xe=>{var Xt=i3(),Nn=g(Xt);{var an=Qt=>{var en=a3();_t(en,5,()=>(o(j),m(()=>o(j).tools)),zn,(Vn,un)=>{var is=s3(),fi=g(is),pi=g(fi),Dd=g(pi),Td=C(pi,2),Fd=g(Td),Md=C(fi,2),La=g(Md),Pd=C(La,2),Id=g(Pd);K(()=>{fe(is,"data-disabled",(o(un),m(()=>!o(un).enabled))),X(Dd,(o(un),m(()=>o(un).name))),X(Fd,(o(un),m(()=>o(un).qualified_name))),Gt(La,(o(un),m(()=>o(un).enabled))),La.disabled=(o(j),n(),m(()=>!o(j).enabled||n().pending[o(j).id]||n().saving)),X(Id,(o(un),m(()=>o(un).enabled?"Enabled":"Disabled")))}),W("change",La,Nd=>V(o(j).id,o(un).name,Nd.target.checked)),k(Vn,is)}),k(Qt,en)},Ln=Qt=>{var en=u3();k(Qt,en)};$(Nn,Qt=>{o(j),m(()=>o(j).tools.length)?Qt(an):Qt(Ln,!1)})}var yr=C(Nn,2);{var Rr=Qt=>{var en=o3(),Vn=g(en);K(un=>X(Vn,`Disabled tool ids: ${un??""}`),[()=>(o(j),m(()=>o(j).disabled_tools.join(", ")))]),k(Qt,en)};$(yr,Qt=>{o(j),m(()=>o(j).disabled_tools.length)&&Qt(Rr)})}K(()=>fe(Xt,"id",`tools-${o(j),m(()=>o(j).id)??""}`)),k(Xe,Xt)};$(Pu,Xe=>{o(y),o(j),m(()=>o(y).has(o(j).id))&&Xe(sn)})}K((Xe,Xt,Nn,an,Ln,yr)=>{fe(re,"data-connected",(o(j),m(()=>o(j).connected))),fe(re,"data-pending",(n(),o(j),m(()=>n().pending[o(j).id]?"true":"false"))),fe(re,"data-dirty",(n(),o(j),m(()=>n().pendingChanges[o(j).id]?"true":"false"))),X(Et,(o(j),m(()=>o(j).id))),St=Ct(ft,1,"",null,St,Xe),X($e,(o(j),m(()=>o(j).connected?"Connected":"Offline"))),Gt(as,(o(j),m(()=>o(j).enabled))),as.disabled=(n(),o(j),m(()=>n().pending[o(j).id]||n().saving)),X(Fu,(o(j),m(()=>o(j).enabled?"Running":"Stopped"))),$s=Ct(us,1,"toggle frontend-toggle",null,$s,Xt),fe(us,"title",(o(j),m(()=>o(j).enabled?"Enable for main web frontend":"Server must be running"))),Gt(Rs,(o(j),m(()=>o(j).client_enabled?.svelte??!0))),Rs.disabled=(o(j),n(),m(()=>!o(j).enabled||n().pending[o(j).id]||n().saving)),zs=Ct(os,1,"toggle kiosk-toggle",null,zs,Nn),fe(os,"title",(o(j),m(()=>o(j).enabled?"Enable for kiosk voice assistant":"Server must be running"))),Gt(Us,(o(j),m(()=>o(j).client_enabled?.kiosk??!1))),Us.disabled=(o(j),n(),m(()=>!o(j).enabled||n().pending[o(j).id]||n().saving)),Ia=Ct(Bs,1,"toggle cli-toggle",null,Ia,an),fe(Bs,"title",(o(j),m(()=>o(j).enabled?"Enable for CLI client":"Server must be running"))),Gt(js,(o(j),m(()=>o(j).client_enabled?.cli??!1))),js.disabled=(o(j),n(),m(()=>!o(j).enabled||n().pending[o(j).id]||n().saving)),qs=Ct(_r,1,"tools-toggle",null,qs,Ln),fe(_r,"aria-expanded",yr),fe(_r,"aria-controls",`tools-${o(j),m(()=>o(j).id)??""}`),X($r,`${o(j),m(()=>o(j).tool_count)??""} tool${o(j),m(()=>o(j).tool_count===1?"":"s")??""} available`)},[()=>({connected:o(j).connected,offline:!o(j).connected}),()=>({"toggle-disabled":!o(j).enabled}),()=>({"toggle-disabled":!o(j).enabled}),()=>({"toggle-disabled":!o(j).enabled}),()=>({open:o(y).has(o(j).id)}),()=>(o(y),o(j),m(()=>o(y).has(o(j).id)))]),W("change",as,Xe=>T(o(j).id,Xe.target.checked)),W("change",Rs,Xe=>Q(o(j).id,Xe.target.checked)),W("change",Us,Xe=>N(o(j).id,Xe.target.checked)),W("change",js,Xe=>I(o(j).id,Xe.target.checked)),W("click",_r,()=>G(o(j).id)),k(Ie,re)}),k(te,ee)};$(mt,te=>{n(),m(()=>!n().servers.length)?te(Lt):te(Ot,!1)})}var ot=C(mt,2);{var Pt=te=>{var ee=d3(),Ie=g(ee);K(()=>X(Ie,(n(),m(()=>n().saveError)))),k(te,ee)};$(ot,te=>{n(),m(()=>n().saveError)&&te(Pt)})}var Ce=C(ot,2);{var M=te=>{var ee=f3();k(te,ee)};$(Ce,te=>{n(),m(()=>n().dirty)&&te(M)})}k(tt,Ge)};$(Mt,tt=>{n(),m(()=>n().error)?tt(zt):tt(rn,!1)},!0)}k(Me,Re)};$(bn,Me=>{n(),m(()=>n().loading)?Me(ur):Me(In,!1)})}K(()=>{Oe.disabled=(r(),m(()=>r().loading||r().authorizing)),X(ke,(r(),m(()=>r().authorizing?"Authorizing...":r().authorized?"Reconnect Google Services":"Connect Google Services"))),pe.disabled=(s(),m(()=>s().loading||s().authorizing)),X(Ee,(s(),m(()=>s().authorizing?"Authorizing...":s().authorized?"Reconnect Spotify":"Connect Spotify"))),Yt.disabled=(n(),m(()=>n().refreshing||n().saving||n().dirty)),X(At,(n(),m(()=>n().refreshing?"Refreshing...":"Refresh")))}),W("click",Oe,()=>void ae()),W("click",pe,()=>void L()),W("click",Yt,se),k(xe,B)},$$slots:{default:!0,heading:(xe,De)=>{var B=m3();k(xe,B)},footer:(xe,De)=>{var B=y3(),_e=g(B);{var Ne=Oe=>{var ke=v3();k(Oe,ke)},Be=Oe=>{var ke=Ae(),We=me(ke);{var he=ge=>{var be=g3();k(ge,be)},ne=ge=>{var be=Ae(),Te=me(be);{var qe=pe=>{var Ee=b3();k(pe,Ee)},ce=pe=>{var Ee=_3();k(pe,Ee)};$(Te,pe=>{n(),m(()=>n().dirty)?pe(qe):pe(ce,!1)},!0)}k(ge,be)};$(We,ge=>{n(),m(()=>n().saving)?ge(he):ge(ne,!1)},!0)}k(Oe,ke)};$(_e,Oe=>{n(),m(()=>n().saveError)?Oe(Ne):Oe(Be,!1)})}k(xe,B)}}})}};$(H,z=>{l()&&z(q)})}k(e,ie),lt(),i()}var k3=F('<section><header class="svelte-10u46cr"><button type="button"><span class="title svelte-10u46cr"> </span> <span class="chevron svelte-10u46cr" aria-hidden="true"></span></button></header> <div class="content svelte-10u46cr"><!></div></section>');function No(e,t){it(t,!1);let n=oe(t,"title",8),r=oe(t,"startOpen",8,!1),s=oe(t,"forceOpen",8,!1),a=R(r()),u=R(!1);const i=c(n());function l(){s()||w(a,!o(a))}function c(E){const S=E.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"section",b=Math.abs(Array.from(E).reduce((D,A)=>D*31+A.charCodeAt(0),7)).toString(36);return`filter-section-${S}-${b}`}ve(()=>(O(s()),o(a),o(u),O(r())),()=>{s()?(o(a)||w(a,!0),w(u,!0)):o(u)&&(w(a,r()),w(u,!1))}),Rt(),dt();var f=k3(),d=g(f),v=g(d);let h;var p=g(v),x=g(p),y=C(d,2),_=g(y);tn(_,t,"default",{}),K(E=>{Ct(f,1,`filter-section ${o(a)?"expanded":"collapsed"}`,"svelte-10u46cr"),h=Ct(v,1,"toggle svelte-10u46cr",null,h,E),fe(v,"aria-expanded",o(a)),fe(v,"aria-controls",i),fe(v,"aria-disabled",s()),X(x,n()),fe(y,"id",i),fe(y,"hidden",!o(a))},[()=>({locked:s()})]),W("click",v,l),k(e,f),lt()}var w3=F('<div class="range-slider svelte-1q5g18c"><div class="track svelte-1q5g18c"></div> <div class="range svelte-1q5g18c" aria-hidden="true"></div> <input class="thumb thumb-min svelte-1q5g18c" type="range"/> <input class="thumb thumb-max svelte-1q5g18c" type="range"/></div>');function E3(e,t){it(t,!1);const n=R(),r=R(),s=R(),a=R(),u=R(),i=R(),l=It();let c=oe(t,"id",8),f=oe(t,"min",8,0),d=oe(t,"max",8,100),v=oe(t,"step",8,1),h=oe(t,"value",24,()=>({min:f(),max:d()})),p=oe(t,"disabled",8,!1),x=oe(t,"ariaLabelMin",8,"Minimum value"),y=oe(t,"ariaLabelMax",8,"Maximum value");const _=6;function E(N,Q,I){return!Number.isFinite(N)||N<Q?Q:N>I?I:Number(N.toFixed(_))}function S(N,Q,I){const V=I-Q;return!Number.isFinite(V)||V<=0?0:(N-Q)/V*100}function b(N,Q){const I={min:N,max:Q};l("input",I),l("change",I)}function D(N){const Q=N.target,I=E(Number(Q.value),o(n),o(a));if(I>o(a)){b(o(a),o(a));return}b(I,o(a))}function A(N){const Q=N.target,I=E(Number(Q.value),o(s),o(r));if(I<o(s)){b(o(s),o(s));return}b(o(s),I)}ve(()=>O(f()),()=>{w(n,Number.isFinite(f())?f():0)}),ve(()=>(O(d()),o(n)),()=>{w(r,Number.isFinite(d())?d():o(n))}),ve(()=>(O(h()),o(n),o(r)),()=>{w(s,E(h()?.min??o(n),o(n),o(r)))}),ve(()=>(O(h()),o(r),o(n)),()=>{w(a,E(h()?.max??o(r),o(n),o(r)))}),ve(()=>(o(s),o(a)),()=>{o(s)>o(a)&&w(s,o(a))}),ve(()=>(o(s),o(n),o(r)),()=>{w(u,S(o(s),o(n),o(r)))}),ve(()=>(o(a),o(n),o(r)),()=>{w(i,S(o(a),o(n),o(r)))}),Rt(),dt();var P=w3(),Z=C(g(P),2),Y=C(Z,2),T=C(Y,2);K(()=>{fe(P,"data-disabled",p()),xn(Z,`left: ${o(u)}%; right: ${100-o(i)}%;`),fe(Y,"id",c()?`${c()}-min`:void 0),fe(Y,"min",o(n)),fe(Y,"max",o(a)),fe(Y,"step",v()),Dt(Y,o(s)),fe(Y,"aria-label",x()),Y.disabled=p(),fe(T,"id",c()?`${c()}-max`:void 0),fe(T,"min",o(s)),fe(T,"max",o(r)),fe(T,"step",v()),Dt(T,o(a)),fe(T,"aria-label",y()),T.disabled=p()}),W("input",Y,D),W("input",T,A),k(e,P),lt()}var S3=F('<p class="empty svelte-2m3fny"> </p>'),C3=F('<button type="button"><span class="label svelte-2m3fny"> </span> <span class="indicator svelte-2m3fny" aria-hidden="true"></span></button>'),A3=F('<div class="options svelte-2m3fny"><!></div>');function gs(e,t){it(t,!1);let n=oe(t,"title",8),r=oe(t,"options",24,()=>[]),s=oe(t,"selected",24,()=>[]),a=oe(t,"excluded",24,()=>[]),u=oe(t,"emptyMessage",8,"No options available."),i=oe(t,"variant",8,"default");const l=It();let c=R([]);function f(p){l("toggle",p)}function d(p){return p.trim().toLowerCase()}function v(p,x){if(p.length===0)return!1;const y=d(x);return y?p.some(_=>d(_)===y):!1}function h(p){return v(s(),p)?"include":v(a(),p)?"exclude":"neutral"}ve(()=>O(r()),()=>{w(c,r().map(p=>{const x=h(p);return{value:p,state:x,pressed:x==="include"?"true":x==="exclude"?"mixed":"false"}}))}),Rt(),dt();{let p=vt(()=>(O(s()),O(a()),m(()=>s().length+a().length>0)));No(e,{get title(){return n()},get forceOpen(){return o(p)},children:(x,y)=>{var _=A3(),E=g(_);{var S=D=>{var A=S3(),P=g(A);K(()=>X(P,u())),k(D,A)},b=D=>{var A=Ae(),P=me(A);_t(P,1,()=>o(c),({value:Z,state:Y,pressed:T})=>Z,(Z,Y)=>{let T=()=>o(Y).value,N=()=>o(Y).state,Q=()=>o(Y).pressed;var I=C3();let V;var J=g(I),se=g(J);K(de=>{V=Ct(I,1,"pill svelte-2m3fny",null,V,de),fe(I,"aria-pressed",Q()),fe(I,"data-state",N()),X(se,T())},[()=>({active:N()==="include",exclude:N()==="exclude"})]),W("click",I,()=>f(T())),k(Z,I)}),k(D,A)};$(E,D=>{O(r()),m(()=>r().length===0)?D(S):D(b,!1)})}K(()=>fe(_,"data-variant",i())),k(x,_)},$$slots:{default:!0}})}lt()}const di=1e-9,Pa=[4e3,16e3,32e3,64e3,128e3,256e3,1e6],xa=Pa.length,pa=0;function D3(e){return!Number.isFinite(e)||e<=0?"Any":e>=1e6?"1M":e>=1e3?`${Math.round(e/1e3)}K`:`${e}`}const Ml=["Any",...Pa.map(e=>D3(e))],ss=[0,.1,.2,.5,1,5,10],Gr=ss.length,ws=Gr,Pl="$10+";function ua(e){if(e<=0)return"FREE";const t=Math.abs(e),n=t>=10||t>=1?0:t>=.1?1:t>=.01?2:3;return`$${e.toFixed(n).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")}`}const po=ss.map(e=>ua(e));function ra(e,t,n){return!Number.isFinite(e)||e<t?t:e>n?n:Math.round(e)}function Ad(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<Gr;r+=1){const s=Math.abs(ss[r]-e);s<n&&(n=s,t=r)}return t}function T3(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<xa;r+=1){const s=Math.abs(Pa[r]-e);s<n&&(n=s,t=r)}return t+1}function F3(e){if(e===null||e<=0)return 0;const t=ss.findIndex(n=>Math.abs(n-e)<=di);return t>=0?t:Ad(e)}function M3(e){if(e===null)return ws;const t=ss.findIndex(n=>Math.abs(n-e)<=di);return t>=0?t:Ad(e)}function P3(e){if(e===null||e<=0)return pa;for(let t=0;t<xa;t+=1)if(Math.abs(Pa[t]-e)<=di)return t+1;return T3(e)}function I3(e){if(e<=pa)return null;const t=Math.min(Math.max(e-1,0),xa-1);return Pa[t]}function N3(e){if(e<=0)return null;const t=Math.min(e,Gr-1);return ss[t]}function L3(e){if(e>=ws)return null;const t=Math.min(Math.max(e,0),Gr-1);return ss[t]}function O3(e){if(!e)return 0;let t=0;e.search.trim()&&(t+=1);const n=r=>{t+=r.include.length+r.exclude.length};return n(e.inputModalities),n(e.outputModalities),n(e.series),n(e.providers),n(e.supportedParameters),n(e.moderation),e.minContext!==null&&(t+=1),e.minPromptPrice!==null&&(t+=1),e.maxPromptPrice!==null&&(t+=1),t}var $3=F('<p class="hint svelte-1247vns">No context metadata available.</p>'),R3=F('<p class="hint svelte-1247vns"> </p>'),z3=F('<span class="svelte-1247vns"> </span>'),U3=F('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Minimum tokens</span> <span class="slider-value svelte-1247vns"> </span></div> <input class="slider svelte-1247vns" type="range" aria-label="Minimum context tokens"/> <div class="slider-scale context-scale svelte-1247vns"></div></div>'),B3=F('<p class="hint svelte-1247vns">No pricing metadata available.</p>'),j3=F('<p class="hint svelte-1247vns"> </p>'),q3=F('<span class="svelte-1247vns"> </span>'),H3=F('<div class="slider-scale price-scale svelte-1247vns"></div>'),W3=F('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Prompt price (per 1M tokens)</span> <span class="slider-value svelte-1247vns"> </span></div> <!> <!></div>'),V3=F('<aside class="filters-panel svelte-1247vns" aria-label="Filter models"><header class="filters-header svelte-1247vns"><div><h3 class="svelte-1247vns">Filters</h3> <p> </p></div> <button type="button" class="btn btn-ghost btn-small">Clear all</button></header> <div class="filters-content svelte-1247vns"><!> <!> <!> <!> <!> <!> <!> <!></div></aside>');function G3(e,t){it(t,!1);const n=()=>at(i,"$facets",a),r=()=>at(l,"$filters",a),s=()=>at(S,"$activeFilters",a),[a,u]=Hn(),{facets:i,filters:l,toggleInputModality:c,toggleOutputModality:f,toggleSeries:d,toggleProvider:v,toggleSupportedParameter:h,toggleModeration:p,setMinContext:x,setMinPromptPrice:y,setMaxPromptPrice:_,resetFilters:E,activeFilters:S}=Qn,b="context-length-slider",D="prompt-price-slider";let A=R(),P=R(null),Z=R(),Y=R(0),T=R(""),N=R(null),Q=R(!1),I=R(0),V=R([]),J=R(!1),se=R({min:0,max:0}),de=R(""),ae=R([]);function ue(he){if(o(Q)){x(null);return}const ne=ra(he,pa,xa);x(I3(ne))}function L(he){if(o(J)){y(null),_(null);return}const ne=he.detail,ge=ra(ne.min,0,Gr-1),be=ra(ne.max,0,ws);y(N3(ge)),_(L3(be))}ve(()=>n(),()=>{w(P,n())}),ve(()=>r(),()=>{w(A,r())}),ve(()=>s(),()=>{w(Z,s())}),ve(()=>o(A),()=>{w(Y,O3(o(A)))}),ve(()=>o(Y),()=>{w(T,o(Y)>0?`${o(Y)} active filter${o(Y)===1?"":"s"}`:"All models shown.")}),ve(()=>(o(P),o(Q),o(A),Ml),()=>{const he=o(P)?.maxContext??null;w(N,he),w(Q,he===null),w(I,o(Q)?pa:P3(o(A)?.minContext??null)),w(V,o(Q)?[]:Ml)}),ve(()=>o(P),()=>{const he=o(P)?.maxPromptPrice??null;w(J,he===null)}),ve(()=>(o(J),o(A),Gr),()=>{w(se,(()=>{if(o(J))return{min:0,max:ws};const he=F3(o(A)?.minPromptPrice??null),ne=M3(o(A)?.maxPromptPrice??null),ge=ra(he,0,Gr-1),be=ra(ne,0,ws);return ge>be?{min:be,max:be}:{min:ge,max:be}})())}),ve(()=>(o(A),Pl),()=>{w(de,(()=>{const he=o(A)?.minPromptPrice,ne=o(A)?.maxPromptPrice,ge=he===null?po[0]:ua(he),be=ne===null?Pl:ua(ne);return`${ge} â ${be}`})())}),ve(()=>(o(J),po),()=>{w(ae,o(J)?[]:po)}),Rt(),dt();var U=V3(),G=g(U),ie=g(G),H=C(g(ie),2);let q;var z=g(H),le=C(ie,2),xe=C(G,2),De=g(xe);{let he=vt(()=>(o(P),m(()=>o(P)?.inputModalities??[]))),ne=vt(()=>(o(A),m(()=>o(A)?.inputModalities?.include??[]))),ge=vt(()=>(o(A),m(()=>o(A)?.inputModalities?.exclude??[])));gs(De,{title:"Input modalities",get options(){return o(he)},get selected(){return o(ne)},get excluded(){return o(ge)},emptyMessage:"No modality data available.",$$events:{toggle:be=>c(be.detail)}})}var B=C(De,2);{let he=vt(()=>(o(P),m(()=>o(P)?.outputModalities??[]))),ne=vt(()=>(o(A),m(()=>o(A)?.outputModalities?.include??[]))),ge=vt(()=>(o(A),m(()=>o(A)?.outputModalities?.exclude??[])));gs(B,{title:"Output modalities",get options(){return o(he)},get selected(){return o(ne)},get excluded(){return o(ge)},emptyMessage:"No modality data available.",$$events:{toggle:be=>f(be.detail)}})}var _e=C(B,2);{let he=vt(()=>(o(A),m(()=>o(A)?.minContext!==null)));No(_e,{title:"Context length",get forceOpen(){return o(he)},children:(ne,ge)=>{var be=Ae(),Te=me(be);{var qe=pe=>{var Ee=Ae(),Fe=me(Ee);{var et=Le=>{var ze=$3();k(Le,ze)},rt=Le=>{var ze=R3(),je=g(ze);K(Je=>X(je,`All models offer ${Je??""} context.`),[()=>(O($a),o(N),m(()=>$a(o(N))))]),k(Le,ze)};$(Fe,Le=>{o(P),m(()=>o(P)?.maxContext===null||o(P)?.maxContext===void 0)?Le(et):Le(rt,!1)})}k(pe,Ee)},ce=pe=>{var Ee=U3(),Fe=g(Ee),et=C(g(Fe),2),rt=g(et),Le=C(Fe,2);fe(Le,"id",b),fe(Le,"step",1);var ze=C(Le,2);_t(ze,7,()=>o(V),(je,Je)=>je+Je,(je,Je)=>{var ct=z3(),He=g(ct);K(()=>X(He,o(Je))),k(je,ct)}),K(je=>{X(rt,je),fe(Le,"min",pa),fe(Le,"max",xa),Dt(Le,o(I))},[()=>(o(A),O($a),m(()=>o(A)?.minContext===null?"Any":$a(o(A)?.minContext??0)))]),W("input",Le,je=>ue(Number(je.target.value))),k(pe,Ee)};$(Te,pe=>{o(Q)?pe(qe):pe(ce,!1)})}k(ne,be)},$$slots:{default:!0}})}var Ne=C(_e,2);{let he=vt(()=>(o(A),m(()=>o(A)?.minPromptPrice!==null||o(A)?.maxPromptPrice!==null)));No(Ne,{title:"Prompt pricing",get forceOpen(){return o(he)},children:(ne,ge)=>{var be=Ae(),Te=me(be);{var qe=pe=>{var Ee=Ae(),Fe=me(Ee);{var et=Le=>{var ze=B3();k(Le,ze)},rt=Le=>{var ze=j3(),je=g(ze);K(Je=>X(je,`All models share ${Je??""} pricing.`),[()=>(O(ua),o(P),m(()=>ua(o(P)?.maxPromptPrice??0)))]),k(Le,ze)};$(Fe,Le=>{o(P),m(()=>o(P)?.maxPromptPrice===null||o(P)?.maxPromptPrice===void 0)?Le(et):Le(rt,!1)})}k(pe,Ee)},ce=pe=>{var Ee=W3(),Fe=g(Ee),et=C(g(Fe),2),rt=g(et),Le=C(Fe,2);E3(Le,{id:D,min:0,get max(){return ws},step:1,get value(){return o(se)},ariaLabelMin:"Minimum prompt price",ariaLabelMax:"Maximum prompt price",get disabled(){return o(J)},$$events:{input:L,change:L}});var ze=C(Le,2);{var je=Je=>{var ct=H3();_t(ct,7,()=>o(ae),(He,ht)=>He+ht,(He,ht)=>{var Bt=q3(),bt=g(Bt);K(()=>X(bt,o(ht))),k(He,Bt)}),k(Je,ct)};$(ze,Je=>{o(ae),m(()=>o(ae).length>0)&&Je(je)})}K(()=>X(rt,o(de))),k(pe,Ee)};$(Te,pe=>{o(J)?pe(qe):pe(ce,!1)})}k(ne,be)},$$slots:{default:!0}})}var Be=C(Ne,2);{let he=vt(()=>(o(P),m(()=>o(P)?.series??[]))),ne=vt(()=>(o(A),m(()=>o(A)?.series?.include??[]))),ge=vt(()=>(o(A),m(()=>o(A)?.series?.exclude??[])));gs(Be,{title:"Series",get options(){return o(he)},get selected(){return o(ne)},get excluded(){return o(ge)},emptyMessage:"Series information unavailable.",$$events:{toggle:be=>d(be.detail)}})}var Oe=C(Be,2);{let he=vt(()=>(o(P),m(()=>o(P)?.supportedParameters??[]))),ne=vt(()=>(o(A),m(()=>o(A)?.supportedParameters?.include??[]))),ge=vt(()=>(o(A),m(()=>o(A)?.supportedParameters?.exclude??[])));gs(Oe,{title:"Supported parameters",get options(){return o(he)},get selected(){return o(ne)},get excluded(){return o(ge)},variant:"columns",emptyMessage:"No parameter metadata available.",$$events:{toggle:be=>h(be.detail)}})}var ke=C(Oe,2);{let he=vt(()=>(o(P),m(()=>o(P)?.providers??[]))),ne=vt(()=>(o(A),m(()=>o(A)?.providers?.include??[]))),ge=vt(()=>(o(A),m(()=>o(A)?.providers?.exclude??[])));gs(ke,{title:"Providers",get options(){return o(he)},get selected(){return o(ne)},get excluded(){return o(ge)},emptyMessage:"No provider data available.",$$events:{toggle:be=>v(be.detail)}})}var We=C(ke,2);{let he=vt(()=>(o(P),m(()=>o(P)?.moderation??[]))),ne=vt(()=>(o(A),m(()=>o(A)?.moderation?.include??[]))),ge=vt(()=>(o(A),m(()=>o(A)?.moderation?.exclude??[])));gs(We,{title:"Moderation",get options(){return o(he)},get selected(){return o(ne)},get excluded(){return o(ge)},variant:"compact",emptyMessage:"No moderation metadata available.",$$events:{toggle:be=>p(be.detail)}})}K(he=>{q=Ct(H,1,"filters-status svelte-1247vns",null,q,he),X(z,o(T)),le.disabled=!o(Z)},[()=>({muted:o(Y)===0})]),W("click",le,E),k(e,U),lt(),u()}var K3=F("<option> </option>"),Z3=F('<div class="sort svelte-3bn1bu"><label for="sort-select" class="sort-label svelte-3bn1bu">Sort by</label> <select id="sort-select" class="select-control sort-select svelte-3bn1bu"></select></div>');function Y3(e,t){it(t,!1);let n=oe(t,"selected",8),r=oe(t,"onSelect",8);const s=[{label:"Newest",value:"newness"},{label:"Lowest price",value:"price"},{label:"Longest context",value:"context"}];function a(c){const f=c.target;r()(f.value)}dt();var u=Z3(),i=C(g(u),2);_t(i,5,()=>s,zn,(c,f)=>{var d=K3(),v=g(d),h={};K(()=>{X(v,(o(f),m(()=>o(f).label))),h!==(h=(o(f),m(()=>o(f).value)))&&(d.value=(d.__value=(o(f),m(()=>o(f).value)))??"")}),k(c,d)});var l;jn(i),K(()=>{l!==(l=n())&&(i.value=(i.__value=n())??"",kn(i,n()))}),W("change",i,a),k(e,u),lt()}const J3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M400-240%20160-480l240-240%2056%2058-142%20142h486v80H314l142%20142-56%2058Z'/%3e%3c/svg%3e";var X3=F('<header class="explorer-header svelte-d2gcy1"><div class="title-group svelte-d2gcy1"><a class="btn btn-ghost btn-small chat-link svelte-d2gcy1" href="/chat" aria-label="Return to chat"><img alt="" aria-hidden="true" class="icon svelte-d2gcy1"/> <span class="label svelte-d2gcy1">Chat</span></a> <h2 id="model-explorer-title" class="svelte-d2gcy1">Model Explorer</h2></div> <div class="header-controls svelte-d2gcy1"><label class="search svelte-d2gcy1"><span class="visually-hidden svelte-d2gcy1">Search models</span> <input class="input-control svelte-d2gcy1" type="search" placeholder="Search by name, provider, description, or tags"/></label> <div class="meta-row svelte-d2gcy1"><p class="summary svelte-d2gcy1" aria-live="polite"> </p> <!></div></div></header>');function Q3(e,t){it(t,!1);let n=oe(t,"resultCount",8,0),r=oe(t,"searchValue",8,""),s=oe(t,"onSearch",8),a=oe(t,"sort",8),u=oe(t,"onSort",8),i=oe(t,"onClose",8);function l(b){const D=b.target;D&&s()(D.value)}dt();var c=X3(),f=g(c),d=g(f),v=g(d),h=C(f,2),p=g(h),x=C(g(p),2),y=C(p,2),_=g(y),E=g(_),S=C(_,2);Y3(S,{get selected(){return a()},get onSelect(){return u()}}),K(()=>{fe(v,"src",J3),Dt(x,r()),X(E,`${n()??""} result${n()===1?"":"s"}`)}),W("click",d,Ko(function(...b){i()?.apply(this,b)})),W("input",x,l),k(e,c),lt()}var ey=F('<div class="info-item svelte-b7ahyp"><dt class="svelte-b7ahyp"> </dt> <dd class="svelte-b7ahyp"> </dd></div>'),ty=F('<article class="model-card svelte-b7ahyp" role="button" tabindex="0"><header class="svelte-b7ahyp"><h4 class="svelte-b7ahyp"> </h4></header> <section class="info-section svelte-b7ahyp"><dl class="info-grid svelte-b7ahyp"></dl></section></article>');function ny(e,t){it(t,!1);const n=R(),r=R(),s=R(),a=R(),u=R(),i=R(),l=R(),c=R(),f=R(),d=R(),v=R(),h=R(),p=R(),x=R(),y=R();let _=oe(t,"model",8),E=oe(t,"onSelect",8);const S=1e6;function b(L){return L&&L.split(/[\s_/-]+/).filter(Boolean).map(U=>U.charAt(0).toUpperCase()+U.slice(1)).join(" ")}function D(L){const U=new Set,G=[];for(const ie of L){const H=b(ie.trim());if(!H)continue;const q=H.toLowerCase();U.has(q)||(U.add(q),G.push(H))}return G}function A(L){if(L===null)return"Unknown";const U=L/S,G=U>=10?0:1;return`${U.toFixed(G).replace(/\.0$/,"")}M tokens`}function P(L){return L.length?L.join(", "):null}function Z(L,U){if(L===null)return null;const G=cp(L);return G==="FREE"?"FREE":`${G} ${U}`}const Y="/ 1M tokens";function T(L,U,G,ie){const H=Z(G,ie);return H?{key:L,label:U,value:H}:null}function N(L,U,G){return G?{key:L,label:U,value:G}:null}function Q(){E()(_())}function I(L){(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),E()(_()))}ve(()=>O(_()),()=>{w(n,_().name??_().id)}),ve(()=>O(_()),()=>{w(r,Nc(_()))}),ve(()=>O(_()),()=>{w(s,lp(_()))}),ve(()=>O(_()),()=>{w(a,ca(_()))}),ve(()=>o(a),()=>{w(u,A(o(a)))}),ve(()=>O(_()),()=>{w(i,Jo(_()).map(L=>L.toLowerCase()))}),ve(()=>O(_()),()=>{w(l,Xo(_()).map(L=>L.toLowerCase()))}),ve(()=>o(r),()=>{w(c,o(r)!==null)}),ve(()=>o(s),()=>{w(f,o(s)!==null)}),ve(()=>o(i),()=>{w(d,D(o(i)))}),ve(()=>o(l),()=>{w(v,D(o(l)))}),ve(()=>O(_()),()=>{w(h,(()=>{const L=_().provider;if(L&&typeof L=="object"){if(L.display_name)return L.display_name;if(L.slug)return L.slug}const U=_().id?.split("/")??[];return U.length>1?U[U.length-2]:null})())}),ve(()=>(o(u),o(h),o(d),o(v)),()=>{w(p,[N("context","Context",o(u)),N("provider","Provider",o(h)),N("input-modalities","Input",P(o(d))),N("output-modalities","Output",P(o(v)))].filter(L=>!!L))}),ve(()=>(o(c),o(r),o(f),o(s)),()=>{w(x,[o(c)?T("input-price","Input price",o(r),Y):null,o(f)?T("output-price","Output price",o(s),Y):null].filter(L=>!!L))}),ve(()=>(o(p),o(x)),()=>{w(y,[...o(p),...o(x)])}),Rt(),dt();var V=ty(),J=g(V),se=g(J),de=g(se),ae=C(J,2),ue=g(ae);_t(ue,5,()=>o(y),L=>L.key,(L,U)=>{var G=ey(),ie=g(G),H=g(ie),q=C(ie,2),z=g(q);K(()=>{X(H,(o(U),m(()=>o(U).label))),X(z,(o(U),m(()=>o(U).value)))}),k(L,G)}),K(()=>{fe(V,"aria-label",`Use model ${o(n)}`),X(de,o(n))}),W("click",V,Q),W("keydown",V,I),k(e,V),lt()}var ry=F('<button type="button"><span class="chip-label svelte-v6y1b4"><span class="chip-category svelte-v6y1b4"> </span> <span class="chip-separator" aria-hidden="true">Â·</span> <span class="chip-value svelte-v6y1b4"> </span></span> <span class="chip-remove svelte-v6y1b4" aria-hidden="true">Ã</span></button>'),sy=F('<section class="active-filters svelte-v6y1b4" aria-label="Active filters"><h3 class="title svelte-v6y1b4">Active filters</h3> <div class="chip-list svelte-v6y1b4"></div></section>');function ay(e,t){it(t,!1);let n=oe(t,"chips",24,()=>[]);const r=It();function s(l){r("clear",l)}dt();var a=Ae(),u=me(a);{var i=l=>{var c=sy(),f=C(g(c),2);_t(f,5,n,d=>d.id,(d,v)=>{var h=ry();let p;var x=g(h),y=g(x),_=g(y),E=C(y,4),S=g(E);K(b=>{p=Ct(h,1,"chip svelte-v6y1b4",null,p,b),fe(h,"aria-label",(o(v),m(()=>`Remove ${o(v).state==="exclude"?"excluded":"included"} filter ${o(v).categoryLabel} ${o(v).valueLabel}`))),X(_,(o(v),m(()=>o(v).categoryLabel))),X(S,`${o(v),m(()=>o(v).state==="exclude"?"Not ":"")??""}${o(v),m(()=>o(v).valueLabel)??""}`)},[()=>({include:o(v).state==="include",exclude:o(v).state==="exclude"})]),W("click",h,()=>s(o(v))),k(d,h)}),k(l,c)};$(u,l=>{O(n()),m(()=>n().length>0)&&l(i)})}k(e,a),lt()}var uy=F('<p class="empty svelte-6ipifh"><!></p>'),oy=F("<li><!></li>"),iy=F('<ul class="model-grid svelte-6ipifh"></ul>'),ly=F('<section class="results svelte-6ipifh" aria-live="polite"><!> <!></section>');function cy(e,t){it(t,!1);let n=oe(t,"models",24,()=>[]),r=oe(t,"filtersActive",8,!1),s=oe(t,"onSelect",8),a=oe(t,"filterChips",24,()=>[]);const u=It();function i(h){u("clearFilter",h.detail)}dt();var l=ly(),c=g(l);ay(c,{get chips(){return a()},$$events:{clear:i}});var f=C(c,2);{var d=h=>{var p=uy(),x=g(p);{var y=E=>{var S=Bn("No models match your current filters.");k(E,S)},_=E=>{var S=Bn("No models available.");k(E,S)};$(x,E=>{r()?E(y):E(_,!1)})}k(h,p)},v=h=>{var p=iy();_t(p,5,n,x=>x.id,(x,y)=>{var _=oy(),E=g(_);ny(E,{get model(){return o(y)},get onSelect(){return s()}}),k(x,_)}),k(h,p)};$(f,h=>{O(n()),m(()=>n().length===0)?h(d):h(v,!1)})}k(e,l),lt()}var dy=F('<span class="filters-toggle__status svelte-drtqmy">Active</span>'),fy=F('<div class="body-toolbar svelte-drtqmy"><button type="button" aria-controls="model-explorer-filters"><span class="filters-toggle__label">Filters</span> <!></button></div>'),py=F('<div class="modal-backdrop svelte-drtqmy" role="presentation"></div> <div class="model-explorer svelte-drtqmy" role="dialog" aria-modal="true" aria-labelledby="model-explorer-title"><!> <div class="body svelte-drtqmy"><!> <div id="model-explorer-filters" class="filters-panel-container svelte-drtqmy"><!></div> <!></div></div>',1);function hy(e,t){it(t,!1);const n=()=>at(v,"$filtered",a),r=()=>at(y,"$activeFilters",a),s=()=>at(h,"$filters",a),[a,u]=Hn(),i=R(),l=R(),c=R();let f=oe(t,"open",12,!1);const d=It(),{filtered:v,filters:h,setSearch:p,setSort:x,activeFilters:y,setSelectionState:_}=Qn,E={inputModalities:{label:"Input"},outputModalities:{label:"Output"},series:{label:"Series"},providers:{label:"Provider"},supportedParameters:{label:"Parameter"},moderation:{label:"Moderation"}},S=["inputModalities","outputModalities","series","providers","supportedParameters","moderation"],b="(max-width: 1024px)";let D=R(!1),A=R(!0),P=!1,Z=R([]);const Y="modal-open";let T=()=>{typeof document<"u"&&document.body.classList.remove(Y)};Da(()=>T());function N(){f(!1),d("close")}function Q(H){d("select",{id:H.id}),N()}function I(H){x(H)}function V(H){p(H)}function J(H){const q=[];for(const z of S){const le=H[z];if(!le)continue;const De=E[z]?.label??z;for(const B of le.include)q.push(se(z,De,B,"include"));for(const B of le.exclude)q.push(se(z,De,B,"exclude"))}return q}function se(H,q,z,le){const xe=z.trim();return{id:`${H}:${le}:${xe}`,category:H,categoryLabel:q,value:xe,valueLabel:de(xe),state:le}}function de(H){return H.replace(/[_-]/g," ")||H}function ae(H){w(D,H),H?P||w(A,!1):(w(A,!0),P=!1)}function ue(){w(A,!o(A)),P=!0}function L(H){const q=H.detail;_(q.category,q.value,"neutral")}Aa(()=>{if(typeof window>"u")return;const H=window.matchMedia(b);ae(H.matches);const q=z=>{ae(z.matches)};return typeof H.addEventListener=="function"?(H.addEventListener("change",q),()=>H.removeEventListener("change",q)):(H.addListener(q),()=>H.removeListener(q))}),ve(()=>O(f()),()=>{typeof document<"u"&&(f()?document.body.classList.add(Y):document.body.classList.remove(Y))}),ve(()=>n(),()=>{w(i,n())}),ve(()=>r(),()=>{w(l,r())}),ve(()=>s(),()=>{w(c,s())}),ve(()=>o(c),()=>{w(Z,o(c)?J(o(c)):[])}),Rt(),dt();var U=Ae(),G=me(U);{var ie=H=>{var q=py(),z=me(q),le=C(z,2),xe=g(le);Q3(xe,{get resultCount(){return o(i),m(()=>o(i).length)},get searchValue(){return s(),m(()=>s().search)},onSearch:V,get sort(){return s(),m(()=>s().sort)},onSort:I,onClose:N});var De=C(xe,2),B=g(De);{var _e=ke=>{var We=fy(),he=g(We);let ne;var ge=C(g(he),2);{var be=Te=>{var qe=dy();k(Te,qe)};$(ge,Te=>{o(l)&&Te(be)})}K(Te=>{ne=Ct(he,1,"filters-toggle svelte-drtqmy",null,ne,Te),fe(he,"aria-expanded",o(A))},[()=>({open:o(A)})]),W("click",he,ue),k(ke,We)};$(B,ke=>{o(D)&&ke(_e)})}var Ne=C(B,2),Be=g(Ne);G3(Be,{});var Oe=C(Ne,2);cy(Oe,{get models(){return o(i)},get filtersActive(){return o(l)},get filterChips(){return o(Z)},onSelect:Q,$$events:{clearFilter:L}}),K(()=>{fe(le,"data-compact",o(D)),fe(De,"data-compact",o(D)),fe(Ne,"data-compact",o(D)),fe(Ne,"data-open",o(A))}),W("click",z,N),k(H,q)};$(G,H=>{f()&&H(ie)})}k(e,U),lt(),u()}var my=F('<div class="chat-error svelte-1n46o8q" role="alert"><span class="svelte-1n46o8q"> </span> <button type="button" class="svelte-1n46o8q">Dismiss</button></div>'),vy=F('<main class="chat-app svelte-1n46o8q"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></main>');function gy(e,t){it(t,!1);const n=()=>at(A,"$selectable",c),r=()=>at(va,"$chatStore",c),s=()=>at(P,"$activeFor",c),a=()=>at(Uc,"$speechState",c),u=()=>at(b,"$modelsLoading",c),i=()=>at(D,"$modelsError",c),l=()=>at(_s,"$suggestionsStore",c),[c,f]=Hn(),{sendMessage:d,cancelStream:v,clearConversation:h,deleteMessage:p,retryMessage:x,editMessage:y,clearError:_,setModel:E}=va,{loadModels:S,loading:b,error:D,selectable:A,activeFor:P}=Qn;let Z=R(""),Y=R([]),T=R(),N=R(!1),Q=R(!1),I=R(!1),V=R(!1),J=R(!1),se=R(!1),de=R(!1),ae=R(0),ue=R(!1),L=R(null),U=R(null),G=R(null),ie=R([]),H=R(null);const q=Cc;let z=R(null),le=R(""),xe=R(""),De=R(!1);Aa(async()=>{await S(),await _s.load();const ye=await Kn.loadDefault();if(ye){const Se=await Kn.apply(ye.name);Se?.model&&E(Se.model),await _s.load()}});async function B(){if(!o(T))return;const ye=o(T).getNewSuggestion();ye&&await _s.add(ye.label,ye.text)}async function _e(ye){await _s.remove(ye.detail.index)}Da(()=>{typeof document<"u"&&document.body.classList.remove("modal-open")});function Ne(ye){E(ye)}function Be(){Xp()}function Oe(ye){E(ye.detail.id)}function ke(ye){w(Z,ye)}function We(ye){r().isStreaming||p(ye.detail.id)}function he(ye){x(ye)}function ne(ye){if(!ye?.attachment)return;Te();const Se={...ye.attachment,metadata:ye.attachment.metadata?{...ye.attachment.metadata}:null},ut=o(Y)??[],At=ut.some(Nt=>Nt.id===Se.id||Nt.displayUrl===Se.displayUrl||Nt.deliveryUrl===Se.deliveryUrl)?ut:[...ut,Se];w(Y,At)}function ge(ye){const Se=r().messages.find(ut=>ut.id===ye&&ut.role==="user");Se&&(w(De,!1),w(z,ye),w(le,Se.text),w(xe,Se.text))}function be(){w(z,null),w(le,""),w(xe,"")}function Te(){o(De)||be()}function qe(){Te()}function ce(ye){if(!o(z))return;const Se=ye.trim();if(!Se)return;const ut=o(z);w(De,!0),be(),y(ut,Se).catch(At=>{console.error("Failed to apply message edit",At)}).finally(()=>{w(De,!1)})}async function pe(ye){if(ye){w(Q,!0),w(ue,!0),w(L,null),w(U,null),w(G,ye);try{const Se=await C0(ye);w(U,Se?.data??null)}catch(Se){const ut=Se instanceof Error?Se.message:"Failed to load details.";w(L,ut)}finally{w(ue,!1)}}}function Ee(){w(Q,!1),w(G,null),w(U,null),w(L,null)}async function Fe(ye){const Se=ye.trim();if(Se){w(Z,Se);try{await d({text:Se,attachments:[]}),w(Z,"")}catch(ut){console.error("Failed to send speech transcription",ut)}}}ve(()=>(o(N),o(Q),o(I),o(V),o(J),o(se),o(de)),()=>{typeof document<"u"&&document.body.classList.toggle("modal-open",o(N)||o(Q)||o(I)||o(V)||o(J)||o(se)||o(de))}),ve(()=>(n(),r()),()=>{w(ie,n()(r().selectedModel))}),ve(()=>(s(),r()),()=>{w(H,s()(r().selectedModel))}),ve(()=>(a(),o(ae)),()=>{a().promptVersion!==o(ae)&&(w(ae,a().promptVersion),w(Z,a().promptText))}),ve(()=>(a(),r(),qi),()=>{if(a().pendingSubmit&&!r().isStreaming){const ye=qi();ye&&Fe(ye.text)}}),ve(()=>(o(z),ji),()=>{o(z)&&ji()}),Rt(),dt();var et=vy(),rt=g(et);{let ye=vt(()=>(r(),m(()=>r().messages.length>0)));Dp(rt,{get selectableModels(){return o(ie)},get selectedModel(){return r(),m(()=>r().selectedModel)},get modelsLoading(){return u()},get modelsError(){return i()},get hasMessages(){return o(ye)},$$events:{openExplorer:()=>w(N,!0),clear:()=>{w(Y,[]),w(Z,""),h()},modelChange:Se=>Ne(Se.detail.id),openModelSettings:()=>w(I,!0),openSystemSettings:()=>w(V,!0),openMcpServers:()=>w(J,!0),openKioskSettings:()=>w(se,!0),openCliSettings:()=>w(de,!0)}})}var Le=C(rt,2);{var ze=ye=>{Xr(Y2(ye,{get suggestions(){return l(),m(()=>l().items)},get deleting(){return l(),m(()=>l().deleting)},$$events:{add:B,delete:_e,select:Se=>ke(Se.detail.text)},$$legacy:!0}),Se=>w(T,Se),()=>o(T))};$(Le,ye=>{r(),m(()=>!r().messages.length)&&ye(ze)})}var je=C(Le,2);t2(je,{get messages(){return r(),m(()=>r().messages)},get disableDelete(){return r(),m(()=>r().isStreaming)},$$events:{openGenerationDetails:ye=>pe(ye.detail.id),deleteMessage:We,retryMessage:ye=>he(ye.detail.id),editMessage:ye=>ge(ye.detail.id),editAssistantAttachment:ye=>ne(ye.detail)}});var Je=C(je,2);{var ct=ye=>{var Se=my(),ut=g(Se),Yt=g(ut),At=C(ut,2);K(()=>X(Yt,(r(),m(()=>r().error)))),W("click",At,_),k(ye,Se)};$(Je,ye=>{r(),m(()=>r().error)&&ye(ct)})}var He=C(Je,2);{var ht=ye=>{I1(ye,{get originalValue(){return o(xe)},get saving(){return o(De)},get disabled(){return o(De)},get value(){return o(le)},set value(Se){w(le,Se)},$$events:{cancel:qe,submit:Se=>ce(Se.detail.text)},$$legacy:!0})},Bt=ye=>{y1(ye,{get presetAttachments(){return o(Y)},get isStreaming(){return r(),m(()=>r().isStreaming)},get prompt(){return o(Z)},set prompt(Se){w(Z,Se)},$$events:{submit:Se=>d(Se.detail),cancel:v,startDictation:Be},$$legacy:!0})};$(He,ye=>{o(z)?ye(ht):ye(Bt,!1)})}var bt=C(He,2);F1(bt,{get open(){return o(Q)},get generationId(){return o(G)},get loading(){return o(ue)},get error(){return o(L)},get data(){return o(U)},get fields(){return q},$$events:{close:Ee}});var Zt=C(bt,2);W2(Zt,{get open(){return o(I)},get selectedModel(){return r(),m(()=>r().selectedModel)},get model(){return o(H)},$$events:{close:()=>w(I,!1)}});var jt=C(Zt,2);Eb(jt,{get open(){return o(V)},$$events:{close:()=>w(V,!1)}});var qt=C(jt,2);x3(qt,{get open(){return o(J)},$$events:{close:()=>w(J,!1)}});var st=C(qt,2);s_(st,{get open(){return o(se)},$$events:{close:()=>w(se,!1)}});var Ve=C(st,2);w_(Ve,{get open(){return o(de)},$$events:{close:()=>w(de,!1)}});var Ft=C(Ve,2);hy(Ft,{get open(){return o(N)},set open(ye){w(N,ye)},$$events:{select:Oe},$$legacy:!0}),k(e,et),lt(),f()}r0(gy,{target:document.getElementById("app")});export{Hn as A,Ac as B,R as C,w as D,C as E,fe as F,jn as G,kn as H,Dt as I,oe as a,$ as b,It as c,yy as d,W as e,F as f,k as g,lt as h,dt as i,g as j,_y as k,Ae as l,me as m,O as n,_t as o,it as p,o as q,Aa as r,X as s,K as t,m as u,Da as v,ve as w,at as x,Rt as y,Xr as z};
