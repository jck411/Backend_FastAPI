const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModelPicker-4fPCNJmJ.js","assets/ModelPicker-Cn_xB6on.css","assets/WebSearchMenu-BDryiaZE.js","assets/WebSearchMenu-CawX--ca.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const ac=!1;var Sa=Array.isArray,af=Array.prototype.indexOf,ni=Array.from,pu=Object.defineProperty,_r=Object.getOwnPropertyDescriptor,uc=Object.getOwnPropertyDescriptors,uf=Object.prototype,of=Array.prototype,ri=Object.getPrototypeOf,Bi=Object.isExtensible;function Vs(e){return typeof e=="function"}const Lr=()=>{};function lf(e){return e()}function va(e){for(var t=0;t<e.length;t++)e[t]()}function cf(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}function df(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const In=2,si=4,Au=8,zs=16,xr=32,ss=64,ai=128,Rn=256,hu=512,pn=1024,Bn=2048,kr=4096,Gn=8192,as=16384,ui=32768,Bs=65536,Ui=1<<17,ff=1<<18,Us=1<<19,oc=1<<20,Lo=1<<21,oi=1<<22,Zr=1<<23,ir=Symbol("$state"),ic=Symbol("legacy props"),pf=Symbol(""),ii=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Tu(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function mf(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function vf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gf(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _f(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bf(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function yf(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function xf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function kf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function wf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Sf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Du=1,Fu=2,lc=4,Ef=8,Cf=16,Af=1,Tf=2,cc=4,Df=8,Ff=16,Mf=1,Pf=2,on=Symbol(),If="http://www.w3.org/1999/xhtml",Nf="http://www.w3.org/2000/svg",Lf="@attach";function Of(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function $f(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Rf=!1;function dc(e){return e===this.v}function li(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fc(e){return!li(e,this.v)}let js=!1,zf=!1;function Bf(){js=!0}let At=null;function Is(e){At=e}function vt(e,t=!1,n){At={p:At,c:null,e:null,s:e,x:null,l:js&&!t?{s:null,u:null,$:[]}:null}}function gt(e){var t=At,n=t.e;if(n!==null){t.e=null;for(var r of n)Tc(r)}return e!==void 0&&(t.x=e),At=t.p,e??{}}function Ea(){return!js||At!==null&&At.l===null}let Pr=[],mu=[];function pc(){var e=Pr;Pr=[],va(e)}function Uf(){var e=mu;mu=[],va(e)}function jf(){return Pr.length>0||mu.length>0}function us(e){if(Pr.length===0&&!la){var t=Pr;queueMicrotask(()=>{t===Pr&&pc()})}Pr.push(e)}function qf(){Pr.length>0&&pc(),mu.length>0&&Uf()}const Hf=new WeakMap;function hc(e){var t=st;if(t===null)return dt.f|=Zr,e;if((t.f&ui)===0){if((t.f&ai)===0)throw!t.parent&&e instanceof Error&&mc(e),e;t.b.error(e)}else Ns(e,t)}function Ns(e,t){for(;t!==null;){if((t.f&ai)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&mc(e),e}function mc(e){const t=Hf.get(e);t&&(pu(e,"message",{value:t.message}),pu(e,"stack",{value:t.stack}))}const Qu=new Set;let Lt=null,au=null,Oo=new Set,es=[],Mu=null,$o=!1,la=!1;class br{current=new Map;#a=new Map;#t=new Set;#f=0;#u=null;#c=!1;#s=[];#n=[];#e=[];#r=[];#o=[];#d=[];#l=[];skipped_effects=new Set;process(t){es=[],au=null;for(const s of t)this.#p(s);if(this.#s.length===0&&this.#f===0){this.#h();var n=this.#e,r=this.#r;this.#e=[],this.#r=[],this.#o=[],au=Lt,Lt=null,ji(n),ji(r),Lt===null?Lt=this:Qu.delete(this),this.#u?.resolve()}else this.#i(this.#e),this.#i(this.#r),this.#i(this.#o);for(const s of this.#s)Yr(s);for(const s of this.#n)Yr(s);this.#s=[],this.#n=[]}#p(t){t.f^=pn;for(var n=t.first;n!==null;){var r=n.f,s=(r&(xr|ss))!==0,a=s&&(r&pn)!==0,o=a||(r&Gn)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(s)n.f^=pn;else if((r&si)!==0)this.#r.push(n);else if((r&pn)===0)if((r&oi)!==0){var i=n.b?.is_pending()?this.#n:this.#s;i.push(n)}else Ta(n)&&((n.f&zs)!==0&&this.#o.push(n),Yr(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#i(t){for(const n of t)((n.f&Bn)!==0?this.#d:this.#l).push(n),xn(n,pn);t.length=0}capture(t,n){this.#a.has(t)||this.#a.set(t,n),this.current.set(t,t.v)}activate(){Lt=this}deactivate(){Lt=null,au=null;for(const t of Oo)if(Oo.delete(t),t(),Lt!==null)break}neuter(){this.#c=!0}flush(){es.length>0?vc():this.#h(),Lt===this&&(this.#f===0&&Qu.delete(this),this.deactivate())}#h(){if(!this.#c)for(const t of this.#t)t();this.#t.clear()}increment(){this.#f+=1}decrement(){if(this.#f-=1,this.#f===0){for(const t of this.#d)xn(t,Bn),Ls(t);for(const t of this.#l)xn(t,kr),Ls(t);this.#e=[],this.#r=[],this.flush()}else this.deactivate()}add_callback(t){this.#t.add(t)}settled(){return(this.#u??=cf()).promise}static ensure(){if(Lt===null){const t=Lt=new br;Qu.add(Lt),la||br.enqueue(()=>{Lt===t&&t.flush()})}return Lt}static enqueue(t){us(t)}}function Wf(e){var t=la;la=!0;try{for(var n;;){if(qf(),es.length===0&&!jf()&&(Lt?.flush(),es.length===0))return Mu=null,n;vc()}}finally{la=t}}function vc(){var e=Ms;$o=!0;try{var t=0;for(Vi(!0);es.length>0;){var n=br.ensure();if(t++>1e3){var r,s;Vf()}n.process(es),Or.clear()}}finally{$o=!1,Vi(e),Mu=null}}function Vf(){try{_f()}catch(e){Ns(e,Mu)}}let Vr=null;function ji(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(as|Gn))===0&&Ta(r)&&(Vr=[],Yr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Pc(r):r.fn=null),Vr?.length>0)){Or.clear();for(const s of Vr)Yr(s);Vr=[]}}Vr=null}}function Ls(e){for(var t=Mu=e;t.parent!==null;){t=t.parent;var n=t.f;if($o&&t===st&&(n&zs)!==0)return;if((n&(ss|xr))!==0){if((n&pn)===0)return;t.f^=pn}}es.push(t)}function Gf(e){let t=0,n=Rr(0),r;return()=>{i0()&&(u(n),qs(()=>(t===0&&(r=m(()=>e(()=>ca(n)))),t+=1,()=>{us(()=>{t-=1,t===0&&(r?.(),r=void 0,ca(n))})})))}}var Zf=Bs|Us|ai;function Kf(e,t,n){new Yf(e,t,n)}class Yf{parent;#a=!1;#t;#f=null;#u;#c;#s;#n=null;#e=null;#r=null;#o=null;#d=0;#l=0;#p=!1;#i=null;#h=()=>{this.#i&&ts(this.#i,this.#d)};#_=Gf(()=>(this.#i=Rr(this.#d),()=>{this.#i=null}));constructor(t,n,r){this.#t=t,this.#u=n,this.#c=r,this.parent=st.b,this.#a=!!this.#u.pending,this.#s=os(()=>{st.b=this;{try{this.#n=bn(()=>r(this.#t))}catch(s){this.error(s)}this.#l>0?this.#v():this.#a=!1}},Zf)}#b(){try{this.#n=bn(()=>this.#c(this.#t))}catch(t){this.error(t)}this.#a=!1}#y(){const t=this.#u.pending;t&&(this.#e=bn(()=>t(this.#t)),br.enqueue(()=>{this.#n=this.#m(()=>(br.ensure(),bn(()=>this.#c(this.#t)))),this.#l>0?this.#v():($r(this.#e,()=>{this.#e=null}),this.#a=!1)}))}is_pending(){return this.#a||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#u.pending}#m(t){var n=st,r=dt,s=At;Un(this.#s),An(this.#s),Is(this.#s.ctx);try{return t()}catch(a){return hc(a),null}finally{Un(n),An(r),Is(s)}}#v(){const t=this.#u.pending;this.#n!==null&&(this.#o=document.createDocumentFragment(),Jf(this.#n,this.#o)),this.#e===null&&(this.#e=bn(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#l+=t,this.#l===0&&(this.#a=!1,this.#e&&$r(this.#e,()=>{this.#e=null}),this.#o&&(this.#t.before(this.#o),this.#o=null))}update_pending_count(t){this.#g(t),this.#d+=t,Oo.add(this.#h)}get_effect_pending(){return this.#_(),u(this.#i)}error(t){var n=this.#u.onerror;let r=this.#u.failed;if(this.#p||!n&&!r)throw t;this.#n&&(mn(this.#n),this.#n=null),this.#e&&(mn(this.#e),this.#e=null),this.#r&&(mn(this.#r),this.#r=null);var s=!1,a=!1;const o=()=>{if(s){$f();return}s=!0,a&&Sf(),br.ensure(),this.#d=0,this.#r!==null&&$r(this.#r,()=>{this.#r=null}),this.#a=this.has_pending_snippet(),this.#n=this.#m(()=>(this.#p=!1,bn(()=>this.#c(this.#t)))),this.#l>0?this.#v():this.#a=!1};var i=dt;try{An(null),a=!0,n?.(t,o),a=!1}catch(l){Ns(l,this.#s&&this.#s.parent)}finally{An(i)}r&&us(()=>{this.#r=this.#m(()=>{this.#p=!0;try{return bn(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return Ns(l,this.#s.parent),null}finally{this.#p=!1}})})}}function Jf(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:Aa(n);t.append(n),n=s}}function gc(e,t,n){const r=Ea()?Ca:Ct;if(t.length===0){n(e.map(r));return}var s=Lt,a=st,o=Xf();Promise.all(t.map(i=>Qf(i))).then(i=>{s?.activate(),o();try{n([...e.map(r),...i])}catch(l){(a.f&as)===0&&Ns(l,a)}s?.deactivate(),_c()}).catch(i=>{Ns(i,a)})}function Xf(){var e=st,t=dt,n=At,r=Lt;return function(){Un(e),An(t),Is(n),r?.activate()}}function _c(){Un(null),An(null),Is(null)}function Ca(e){var t=In|Bn,n=dt!==null&&(dt.f&In)!==0?dt:null;return st===null||n!==null&&(n.f&Rn)!==0?t|=Rn:st.f|=Us,{ctx:At,deps:null,effects:null,equals:dc,f:t,fn:e,reactions:null,rv:0,v:on,wv:0,parent:n??st,ac:null}}function Qf(e,t){let n=st;n===null&&hf();var r=n.b,s=void 0,a=Rr(on),o=null,i=!dt;return d0(()=>{try{var l=e();o&&Promise.resolve(l).catch(()=>{})}catch(h){l=Promise.reject(h)}var c=()=>l;s=o?.then(c,c)??Promise.resolve(l),o=s;var f=Lt,d=r.is_pending();i&&(r.update_pending_count(1),d||f.increment());const v=(h,p=void 0)=>{o=null,d||f.activate(),p?p!==ii&&(a.f|=Zr,ts(a,p)):((a.f&Zr)!==0&&(a.f^=Zr),ts(a,h)),i&&(r.update_pending_count(-1),d||f.decrement()),_c()};if(s.then(v,h=>v(null,h||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(l=>{function c(f){function d(){f===s?l(a):c(s)}f.then(d,d)}c(s)})}function e0(e){const t=Ca(e);return Lc(t),t}function Ct(e){const t=Ca(e);return t.equals=fc,t}function bc(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)mn(t[n])}}function t0(e){for(var t=e.parent;t!==null;){if((t.f&In)===0)return t;t=t.parent}return null}function ci(e){var t,n=st;Un(t0(e));try{bc(e),t=zc(e)}finally{Un(n)}return t}function yc(e){var t=ci(e);if(e.equals(t)||(e.v=t,e.wv=$c()),!is){var n=(Ir||(e.f&Rn)!==0)&&e.deps!==null?kr:pn;xn(e,n)}}const Or=new Map;function Rr(e,t){var n={f:0,v:e,reactions:null,equals:dc,rv:0,wv:0};return n}function Tr(e,t){const n=Rr(e);return Lc(n),n}function $(e,t=!1,n=!0){const r=Rr(e);return t||(r.equals=fc),js&&n&&At!==null&&At.l!==null&&(At.l.s??=[]).push(r),r}function xc(e,t){return b(e,m(()=>u(e))),t}function b(e,t,n=!1){dt!==null&&(!Vn||(dt.f&Ui)!==0)&&Ea()&&(dt.f&(In|zs|oi|Ui))!==0&&!yr?.includes(e)&&wf();let r=n?As(t):t;return ts(e,r)}function ts(e,t){if(!e.equals(t)){var n=e.v;is?Or.set(e,t):Or.set(e,n),e.v=t;var r=br.ensure();r.capture(e,n),(e.f&In)!==0&&((e.f&Bn)!==0&&ci(e),xn(e,(e.f&Rn)===0?pn:kr)),e.wv=$c(),kc(e,Bn),Ea()&&st!==null&&(st.f&pn)!==0&&(st.f&(xr|ss))===0&&(On===null?h0([e]):On.push(e))}return t}function qi(e,t=1){var n=u(e),r=t===1?n++:n--;return b(e,n),r}function ca(e){b(e,e.v+1)}function kc(e,t){var n=e.reactions;if(n!==null)for(var r=Ea(),s=n.length,a=0;a<s;a++){var o=n[a],i=o.f;if(!(!r&&o===st)){var l=(i&Bn)===0;l&&xn(o,t),(i&In)!==0?kc(o,kr):l&&((i&zs)!==0&&Vr!==null&&Vr.push(o),Ls(o))}}}function As(e){if(typeof e!="object"||e===null||ir in e)return e;const t=ri(e);if(t!==uf&&t!==of)return e;var n=new Map,r=Sa(e),s=Tr(0),a=Kr,o=i=>{if(Kr===a)return i();var l=dt,c=Kr;An(null),Zi(a);var f=i();return An(l),Zi(c),f};return r&&n.set("length",Tr(e.length)),new Proxy(e,{defineProperty(i,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&xf();var f=n.get(l);return f===void 0?f=o(()=>{var d=Tr(c.value);return n.set(l,d),d}):b(f,c.value,!0),!0},deleteProperty(i,l){var c=n.get(l);if(c===void 0){if(l in i){const f=o(()=>Tr(on));n.set(l,f),ca(s)}}else b(c,on),ca(s);return!0},get(i,l,c){if(l===ir)return e;var f=n.get(l),d=l in i;if(f===void 0&&(!d||_r(i,l)?.writable)&&(f=o(()=>{var h=As(d?i[l]:on),p=Tr(h);return p}),n.set(l,f)),f!==void 0){var v=u(f);return v===on?void 0:v}return Reflect.get(i,l,c)},getOwnPropertyDescriptor(i,l){var c=Reflect.getOwnPropertyDescriptor(i,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=u(f))}else if(c===void 0){var d=n.get(l),v=d?.v;if(d!==void 0&&v!==on)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(i,l){if(l===ir)return!0;var c=n.get(l),f=c!==void 0&&c.v!==on||Reflect.has(i,l);if(c!==void 0||st!==null&&(!f||_r(i,l)?.writable)){c===void 0&&(c=o(()=>{var v=f?As(i[l]):on,h=Tr(v);return h}),n.set(l,c));var d=u(c);if(d===on)return!1}return f},set(i,l,c,f){var d=n.get(l),v=l in i;if(r&&l==="length")for(var h=c;h<d.v;h+=1){var p=n.get(h+"");p!==void 0?b(p,on):h in i&&(p=o(()=>Tr(on)),n.set(h+"",p))}if(d===void 0)(!v||_r(i,l)?.writable)&&(d=o(()=>Tr(void 0)),b(d,As(c)),n.set(l,d));else{v=d.v!==on;var k=o(()=>As(c));b(d,k)}var C=Reflect.getOwnPropertyDescriptor(i,l);if(C?.set&&C.set.call(f,c),!v){if(r&&typeof l=="string"){var y=n.get("length"),A=Number(l);Number.isInteger(A)&&A>=y.v&&b(y,A+1)}ca(s)}return!0},ownKeys(i){u(s);var l=Reflect.ownKeys(i).filter(d=>{var v=n.get(d);return v===void 0||v.v!==on});for(var[c,f]of n)f.v!==on&&!(c in i)&&l.push(c);return l},setPrototypeOf(){kf()}})}function Hi(e){try{if(e!==null&&typeof e=="object"&&ir in e)return e[ir]}catch{}return e}function n0(e,t){return Object.is(Hi(e),Hi(t))}var vu,wc,Sc,Ec;function r0(){if(vu===void 0){vu=window,wc=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Sc=_r(t,"firstChild").get,Ec=_r(t,"nextSibling").get,Bi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Bi(n)&&(n.__t=void 0)}}function Ur(e=""){return document.createTextNode(e)}function nr(e){return Sc.call(e)}function Aa(e){return Ec.call(e)}function g(e,t){return nr(e)}function pe(e,t=!1){{var n=nr(e);return n instanceof Comment&&n.data===""?Aa(n):n}}function x(e,t=1,n=!1){let r=e;for(;t--;)r=Aa(r);return r}function s0(e){e.textContent=""}function di(){return!1}function a0(e,t){if(t){const n=document.body;e.autofocus=!0,us(()=>{document.activeElement===n&&e.focus()})}}let Wi=!1;function u0(){Wi||(Wi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Pu(e){var t=dt,n=st;An(null),Un(null);try{return e()}finally{An(t),Un(n)}}function Cc(e,t,n,r=n){e.addEventListener(t,()=>Pu(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),u0()}function Ac(e){st===null&&dt===null&&gf(),dt!==null&&(dt.f&Rn)!==0&&st===null&&vf(),is&&mf()}function o0(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function cr(e,t,n,r=!0){var s=st;s!==null&&(s.f&Gn)!==0&&(e|=Gn);var a={ctx:At,deps:null,nodes_start:null,nodes_end:null,f:e|Bn,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Yr(a),a.f|=ui}catch(l){throw mn(a),l}else t!==null&&Ls(a);if(r){var o=a;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&Us)===0&&(o=o.first),o!==null&&(o.parent=s,s!==null&&o0(o,s),dt!==null&&(dt.f&In)!==0&&(e&ss)===0)){var i=dt;(i.effects??=[]).push(o)}}return a}function i0(){return dt!==null&&!Vn}function Iu(e){const t=cr(Au,null,!1);return xn(t,pn),t.teardown=e,t}function Ro(e){Ac();var t=st.f,n=!dt&&(t&xr)!==0&&(t&ui)===0;if(n){var r=At;(r.e??=[]).push(e)}else return Tc(e)}function Tc(e){return cr(si|oc,e,!1)}function l0(e){return Ac(),cr(Au|oc,e,!0)}function c0(e){br.ensure();const t=cr(ss|Us,e,!0);return(n={})=>new Promise(r=>{n.outro?$r(t,()=>{mn(t),r(void 0)}):(mn(t),r(void 0))})}function zn(e){return cr(si,e,!1)}function ve(e,t){var n=At,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=qs(()=>{e(),!r.ran&&(r.ran=!0,m(t))})}function Zt(){var e=At;qs(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&pn)!==0&&xn(n,kr),Ta(n)&&Yr(n),t.ran=!1}})}function d0(e){return cr(oi|Us,e,!0)}function qs(e,t=0){return cr(Au|t,e,!0)}function H(e,t=[],n=[]){gc(t,n,r=>{cr(Au,()=>e(...r.map(u)),!0)})}function os(e,t=0){var n=cr(zs|t,e,!0);return n}function bn(e,t=!0){return cr(xr|Us,e,!0,t)}function Dc(e){var t=e.teardown;if(t!==null){const n=is,r=dt;Gi(!0),An(null);try{t.call(null)}finally{Gi(n),An(r)}}}function Fc(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Pu(()=>{s.abort(ii)});var r=n.next;(n.f&ss)!==0?n.parent=null:mn(n,t),n=r}}function f0(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&xr)===0&&mn(t),t=n}}function mn(e,t=!0){var n=!1;(t||(e.f&ff)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Mc(e.nodes_start,e.nodes_end),n=!0),Fc(e,t&&!n),gu(e,0),xn(e,as);var r=e.transitions;if(r!==null)for(const a of r)a.stop();Dc(e);var s=e.parent;s!==null&&s.first!==null&&Pc(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Mc(e,t){for(;e!==null;){var n=e===t?null:Aa(e);e.remove(),e=n}}function Pc(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function $r(e,t){var n=[];fi(e,n,!0),Ic(n,()=>{mn(e),t&&t()})}function Ic(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function fi(e,t,n){if((e.f&Gn)===0){if(e.f^=Gn,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var s=r.next,a=(r.f&Bs)!==0||(r.f&xr)!==0;fi(r,t,a?n:!1),r=s}}}function Nu(e){Nc(e,!0)}function Nc(e,t){if((e.f&Gn)!==0){e.f^=Gn,(e.f&pn)===0&&(xn(e,Bn),Ls(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Bs)!==0||(n.f&xr)!==0;Nc(n,s?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Ss=null;function p0(e){var t=Ss;try{if(Ss=new Set,m(e),t!==null)for(var n of Ss)t.add(n);return Ss}finally{Ss=t}}function l6(e){for(var t of p0(e))ts(t,t.v)}let Ms=!1;function Vi(e){Ms=e}let is=!1;function Gi(e){is=e}let dt=null,Vn=!1;function An(e){dt=e}let st=null;function Un(e){st=e}let yr=null;function Lc(e){dt!==null&&(yr===null?yr=[e]:yr.push(e))}let _n=null,Mn=0,On=null;function h0(e){On=e}let Oc=1,ga=0,Kr=ga;function Zi(e){Kr=e}let Ir=!1;function $c(){return++Oc}function Ta(e){var t=e.f;if((t&Bn)!==0)return!0;if((t&kr)!==0){var n=e.deps,r=(t&Rn)!==0;if(n!==null){var s,a,o=(t&hu)!==0,i=r&&st!==null&&!Ir,l=n.length;if((o||i)&&(st===null||(st.f&as)===0)){var c=e,f=c.parent;for(s=0;s<l;s++)a=n[s],(o||!a?.reactions?.includes(c))&&(a.reactions??=[]).push(c);o&&(c.f^=hu),i&&f!==null&&(f.f&Rn)===0&&(c.f^=Rn)}for(s=0;s<l;s++)if(a=n[s],Ta(a)&&yc(a),a.wv>e.wv)return!0}(!r||st!==null&&!Ir)&&xn(e,pn)}return!1}function Rc(e,t,n=!0){var r=e.reactions;if(r!==null&&!yr?.includes(e))for(var s=0;s<r.length;s++){var a=r[s];(a.f&In)!==0?Rc(a,t,!1):t===a&&(n?xn(a,Bn):(a.f&pn)!==0&&xn(a,kr),Ls(a))}}function zc(e){var t=_n,n=Mn,r=On,s=dt,a=Ir,o=yr,i=At,l=Vn,c=Kr,f=e.f;_n=null,Mn=0,On=null,Ir=(f&Rn)!==0&&(Vn||!Ms||dt===null),dt=(f&(xr|ss))===0?e:null,yr=null,Is(e.ctx),Vn=!1,Kr=++ga,e.ac!==null&&(Pu(()=>{e.ac.abort(ii)}),e.ac=null);try{e.f|=Lo;var d=e.fn,v=d(),h=e.deps;if(_n!==null){var p;if(gu(e,Mn),h!==null&&Mn>0)for(h.length=Mn+_n.length,p=0;p<_n.length;p++)h[Mn+p]=_n[p];else e.deps=h=_n;if(!Ir||(f&In)!==0&&e.reactions!==null)for(p=Mn;p<h.length;p++)(h[p].reactions??=[]).push(e)}else h!==null&&Mn<h.length&&(gu(e,Mn),h.length=Mn);if(Ea()&&On!==null&&!Vn&&h!==null&&(e.f&(In|kr|Bn))===0)for(p=0;p<On.length;p++)Rc(On[p],e);return s!==null&&s!==e&&(ga++,On!==null&&(r===null?r=On:r.push(...On))),(e.f&Zr)!==0&&(e.f^=Zr),v}catch(k){return hc(k)}finally{e.f^=Lo,_n=t,Mn=n,On=r,dt=s,Ir=a,yr=o,Is(i),Vn=l,Kr=c}}function m0(e,t){let n=t.reactions;if(n!==null){var r=af.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&In)!==0&&(_n===null||!_n.includes(t))&&(xn(t,kr),(t.f&(Rn|hu))===0&&(t.f^=hu),bc(t),gu(t,0))}function gu(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)m0(e,n[r])}function Yr(e){var t=e.f;if((t&as)===0){xn(e,pn);var n=st,r=Ms;st=e,Ms=!0;try{(t&zs)!==0?f0(e):Fc(e),Dc(e);var s=zc(e);e.teardown=typeof s=="function"?s:null,e.wv=Oc;var a;ac&&zf&&(e.f&Bn)!==0&&e.deps}finally{Ms=r,st=n}}}async function v0(){await Promise.resolve(),Wf()}function u(e){var t=e.f,n=(t&In)!==0;if(Ss?.add(e),dt!==null&&!Vn){var r=st!==null&&(st.f&as)!==0;if(!r&&!yr?.includes(e)){var s=dt.deps;if((dt.f&Lo)!==0)e.rv<ga&&(e.rv=ga,_n===null&&s!==null&&s[Mn]===e?Mn++:_n===null?_n=[e]:(!Ir||!_n.includes(e))&&_n.push(e));else{(dt.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[dt]:a.includes(dt)||a.push(dt)}}}else if(n&&e.deps===null&&e.effects===null){var o=e,i=o.parent;i!==null&&(i.f&Rn)===0&&(o.f^=Rn)}if(is){if(Or.has(e))return Or.get(e);if(n){o=e;var l=o.v;return((o.f&pn)===0&&o.reactions!==null||Bc(o))&&(l=ci(o)),Or.set(o,l),l}}else n&&(o=e,Ta(o)&&yc(o));if((e.f&Zr)!==0)throw e.v;return e.v}function Bc(e){if(e.v===on)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Or.has(t)||(t.f&In)!==0&&Bc(t))return!0;return!1}function m(e){var t=Vn;try{return Vn=!0,e()}finally{Vn=t}}const g0=-7169;function xn(e,t){e.f=e.f&g0|t}function R(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ir in e)zo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&ir in n&&zo(n)}}}function zo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{zo(e[r],t)}catch{}const n=ri(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=uc(n);for(let s in r){const a=r[s].get;if(a)try{a.call(e)}catch{}}}}}function _0(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const b0=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function y0(e){return b0.includes(e)}const x0={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function k0(e){return e=e.toLowerCase(),x0[e]??e}const w0=["touchstart","touchmove"];function S0(e){return w0.includes(e)}const Uc=new Set,Bo=new Set;function jc(e,t,n,r={}){function s(a){if(r.capture||ua.call(t,a),!a.cancelBubble)return Pu(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?us(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function B(e,t,n,r,s){var a={capture:r,passive:s},o=jc(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Iu(()=>{t.removeEventListener(e,o,a)})}function E0(e){for(var t=0;t<e.length;t++)Uc.add(e[t]);for(var n of Bo)n(e)}let Ki=null;function ua(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;Ki=e;var o=0,i=Ki===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;l<=c&&(o=l)}if(a=s[o]||e.target,a!==t){pu(e,"currentTarget",{configurable:!0,get(){return a||n}});var f=dt,d=st;An(null),Un(null);try{for(var v,h=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var k=a["__"+r];if(k!=null&&(!a.disabled||e.target===a))if(Sa(k)){var[C,...y]=k;C.apply(a,[e,...y])}else k.call(a,e)}catch(A){v?h.push(A):v=A}if(e.cancelBubble||p===t||p===null)break;a=p}if(v){for(let A of h)queueMicrotask(()=>{throw A});throw v}}finally{e.__root=t,delete e.currentTarget,An(f),Un(d)}}}function pi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ns(e,t){var n=st;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function M(e,t){var n=(t&Mf)!==0,r=(t&Pf)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=pi(a?e:"<!>"+e),n||(s=nr(s)));var o=r||wc?document.importNode(s,!0):s.cloneNode(!0);if(n){var i=nr(o),l=o.lastChild;ns(i,l)}else ns(o,o);return o}}function C0(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var o=pi(s),i=nr(o);a=nr(i)}var l=a.cloneNode(!0);return ns(l,l),l}}function Da(e,t){return C0(e,t,"svg")}function kn(e=""){{var t=Ur(e+"");return ns(t,t),t}}function xe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ur();return e.append(t,n),ns(t,n),e}function S(e,t){e!==null&&e.before(t)}function V(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function A0(e,t){return T0(e,t)}const hs=new Map;function T0(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:o=!0}){r0();var i=new Set,l=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!i.has(h)){i.add(h);var p=S0(h);t.addEventListener(h,ua,{passive:p});var k=hs.get(h);k===void 0?(document.addEventListener(h,ua,{passive:p}),hs.set(h,1)):hs.set(h,k+1)}}};l(ni(Uc)),Bo.add(l);var c=void 0,f=c0(()=>{var d=n??t.appendChild(Ur());return Kf(d,{pending:()=>{}},v=>{if(a){vt({});var h=At;h.c=a}s&&(r.$$events=s),c=e(v,r)||{},a&&gt()}),()=>{for(var v of i){t.removeEventListener(v,ua);var h=hs.get(v);--h===0?(document.removeEventListener(v,ua),hs.delete(v)):hs.set(v,h)}Bo.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return D0.set(c,f),c}let D0=new WeakMap;function O(e,t,n=!1){var r=e,s=null,a=null,o=on,i=n?Bs:0,l=!1;const c=(h,p=!0)=>{l=!0,v(p,h)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var h=o?s:a,p=o?a:s;h&&Nu(h),p&&$r(p,()=>{o?a=null:s=null})}const v=(h,p)=>{if(o!==(o=h)){var k=di(),C=r;if(k&&(f=document.createDocumentFragment(),f.append(C=Ur())),o?s??=p&&bn(()=>p(C)):a??=p&&bn(()=>p(C)),k){var y=Lt,A=o?s:a,E=o?a:s;A&&y.skipped_effects.delete(A),E&&y.skipped_effects.add(E),y.add_callback(d)}else d()}};os(()=>{l=!1,t(c),l||v(null,null)},i)}function rr(e,t){return t}function F0(e,t,n){for(var r=e.items,s=[],a=t.length,o=0;o<a;o++)fi(t[o].e,s,!0);var i=a>0&&s.length===0&&n!==null;if(i){var l=n.parentNode;s0(l),l.append(n),r.clear(),er(e,t[0].prev,t[a-1].next)}Ic(s,()=>{for(var c=0;c<a;c++){var f=t[c];i||(r.delete(f.k),er(e,f.prev,f.next)),mn(f.e,!i)}})}function Dt(e,t,n,r,s,a=null){var o=e,i={flags:t,items:new Map,first:null},l=(t&lc)!==0;if(l){var c=e;o=c.appendChild(Ur())}var f=null,d=!1,v=new Map,h=Ct(()=>{var y=n();return Sa(y)?y:y==null?[]:ni(y)}),p,k;function C(){M0(k,p,i,v,o,s,t,r,n),a!==null&&(p.length===0?f?Nu(f):f=bn(()=>a(o)):f!==null&&$r(f,()=>{f=null}))}os(()=>{k??=st,p=u(h);var y=p.length;if(!(d&&y===0)){d=y===0;var A,E,_,T;if(di()){var w=new Set,F=Lt;for(E=0;E<y;E+=1){_=p[E],T=r(_,E);var W=i.items.get(T)??v.get(T);W?(t&(Du|Fu))!==0&&qc(W,_,E,t):(A=Hc(null,i,null,null,_,T,E,s,t,n,!0),v.set(T,A)),w.add(T)}for(const[U,D]of i.items)w.has(U)||F.skipped_effects.add(D.e);F.add_callback(C)}else C();u(h)}})}function M0(e,t,n,r,s,a,o,i,l){var c=(o&Ef)!==0,f=(o&(Du|Fu))!==0,d=t.length,v=n.items,h=n.first,p=h,k,C=null,y,A=[],E=[],_,T,w,F;if(c)for(F=0;F<d;F+=1)_=t[F],T=i(_,F),w=v.get(T),w!==void 0&&(w.a?.measure(),(y??=new Set).add(w));for(F=0;F<d;F+=1){if(_=t[F],T=i(_,F),w=v.get(T),w===void 0){var W=r.get(T);if(W!==void 0){r.delete(T),v.set(T,W);var U=C?C.next:p;er(n,C,W),er(n,W,U),eo(W,U,s),C=W}else{var D=p?p.e.nodes_start:s;C=Hc(D,n,C,C===null?n.first:C.next,_,T,F,a,o,l)}v.set(T,C),A=[],E=[],p=C.next;continue}if(f&&qc(w,_,F,o),(w.e.f&Gn)!==0&&(Nu(w.e),c&&(w.a?.unfix(),(y??=new Set).delete(w))),w!==p){if(k!==void 0&&k.has(w)){if(A.length<E.length){var N=E[0],G;C=N.prev;var I=A[0],Y=A[A.length-1];for(G=0;G<A.length;G+=1)eo(A[G],N,s);for(G=0;G<E.length;G+=1)k.delete(E[G]);er(n,I.prev,Y.next),er(n,C,I),er(n,Y,N),p=N,C=Y,F-=1,A=[],E=[]}else k.delete(w),eo(w,p,s),er(n,w.prev,w.next),er(n,w,C===null?n.first:C.next),er(n,C,w),C=w;continue}for(A=[],E=[];p!==null&&p.k!==T;)(p.e.f&Gn)===0&&(k??=new Set).add(p),E.push(p),p=p.next;if(p===null)continue;w=p}A.push(w),C=w,p=w.next}if(p!==null||k!==void 0){for(var Z=k===void 0?[]:ni(k);p!==null;)(p.e.f&Gn)===0&&Z.push(p),p=p.next;var X=Z.length;if(X>0){var fe=(o&lc)!==0&&d===0?s:null;if(c){for(F=0;F<X;F+=1)Z[F].a?.measure();for(F=0;F<X;F+=1)Z[F].a?.fix()}F0(n,Z,fe)}}c&&us(()=>{if(y!==void 0)for(w of y)w.a?.apply()}),e.first=n.first&&n.first.e,e.last=C&&C.e;for(var ne of r.values())mn(ne.e);r.clear()}function qc(e,t,n,r){(r&Du)!==0&&ts(e.v,t),(r&Fu)!==0?ts(e.i,n):e.i=n}function Hc(e,t,n,r,s,a,o,i,l,c,f){var d=(l&Du)!==0,v=(l&Cf)===0,h=d?v?$(s,!1,!1):Rr(s):s,p=(l&Fu)===0?o:Rr(o),k={i:p,v:h,k:a,a:null,e:null,prev:n,next:r};try{if(e===null){var C=document.createDocumentFragment();C.append(e=Ur())}return k.e=bn(()=>i(e,h,p,c),Rf),k.e.prev=n&&n.e,k.e.next=r&&r.e,n===null?f||(t.first=k):(n.next=k,n.e.next=k.e),r!==null&&(r.prev=k,r.e.prev=k.e),k}finally{}}function eo(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var o=Aa(a);s.before(a),a=o}}function er(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Uo(e,t,n=!1,r=!1,s=!1){var a=e,o="";H(()=>{var i=st;if(o!==(o=t()??"")&&(i.nodes_start!==null&&(Mc(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),o!=="")){var l=o+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var c=pi(l);if((n||r)&&(c=nr(c)),ns(nr(c),c.lastChild),n||r)for(;nr(c);)a.before(nr(c));else a.before(c)}})}function hn(e,t,n,r,s){var a=t.$$slots?.[n],o=!1;a===!0&&(a=t[n==="default"?"children":n],o=!0),a===void 0||a(e,o?()=>r:r)}function Yi(e,t,n){var r=e,s,a,o=null,i=null;function l(){a&&($r(a),a=null),o&&(o.lastChild.remove(),r.before(o),o=null),a=i,i=null}os(()=>{if(s!==(s=t())){var c=di();if(s){var f=r;c&&(o=document.createDocumentFragment(),o.append(f=Ur()),a&&Lt.skipped_effects.add(a)),i=bn(()=>n(f,s))}c?Lt.add_callback(l):l()}},Bs)}function P0(e,t,n,r,s,a){var o,i,l=null,c=e,f;os(()=>{const d=t()||null;var v=Nf;d!==o&&(f&&(d===null?$r(f,()=>{f=null,i=null}):d===i?Nu(f):mn(f)),d&&d!==i&&(f=bn(()=>{if(l=document.createElementNS(v,d),ns(l,l),r){var h=l.appendChild(Ur());r(l,h)}st.nodes_end=l,c.before(l)})),o=d,o&&(i=o))},Bs)}function rs(e,t,n){zn(()=>{var r=m(()=>t(e,n?.())||{});if(n&&r?.update){var s=!1,a={};qs(()=>{var o=n();R(o),s&&li(a,o)&&(a=o,r.update(o))}),s=!0}if(r?.destroy)return()=>r.destroy()})}function I0(e,t){var n=void 0,r;os(()=>{n!==(n=t())&&(r&&(mn(r),r=null),n&&(r=bn(()=>{zn(()=>n(e))})))})}function Wc(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Wc(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function N0(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Wc(e))&&(r&&(r+=" "),r+=t);return r}function uu(e){return typeof e=="object"?N0(e):e??""}const Ji=[...` 	
\r\fÂ \v\uFEFF`];function L0(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,o=0;(o=r.indexOf(s,o))>=0;){var i=o+a;(o===0||Ji.includes(r[o-1]))&&(i===r.length||Ji.includes(r[i]))?r=(o===0?"":r.substring(0,o))+r.substring(i+1):o=i}}return r===""?null:r}function Xi(e,t=!1){var n=t?" !important;":";",r="";for(var s in e){var a=e[s];a!=null&&a!==""&&(r+=" "+s+": "+a+n)}return r}function to(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function O0(e,t){if(t){var n="",r,s;if(Array.isArray(t)?(r=t[0],s=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,o=0,i=!1,l=[];r&&l.push(...Object.keys(r).map(to)),s&&l.push(...Object.keys(s).map(to));var c=0,f=-1;const k=e.length;for(var d=0;d<k;d++){var v=e[d];if(i?v==="/"&&e[d-1]==="*"&&(i=!1):a?a===v&&(a=!1):v==="/"&&e[d+1]==="*"?i=!0:v==='"'||v==="'"?a=v:v==="("?o++:v===")"&&o--,!i&&a===!1&&o===0){if(v===":"&&f===-1)f=d;else if(v===";"||d===k-1){if(f!==-1){var h=to(e.substring(c,f).trim());if(!l.includes(h)){v!==";"&&d++;var p=e.substring(c,d).trim();n+=" "+p+";"}}c=d+1,f=-1}}}}return r&&(n+=Xi(r)),s&&(n+=Xi(s,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function zt(e,t,n,r,s,a){var o=e.__className;if(o!==n||o===void 0){var i=L0(n,r,a);i==null?e.removeAttribute("class"):t?e.className=i:e.setAttribute("class",i),e.__className=n}else if(a&&s!==a)for(var l in a){var c=!!a[l];(s==null||c!==!!s[l])&&e.classList.toggle(l,c)}return a}function no(e,t={},n,r){for(var s in n){var a=n[s];t[s]!==a&&(n[s]==null?e.style.removeProperty(s):e.style.setProperty(s,a,r))}}function fn(e,t,n,r){var s=e.__style;if(s!==t){var a=O0(t,r);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}else r&&(Array.isArray(r)?(no(e,n?.[0],r[0]),no(e,n?.[1],r[1],"important")):no(e,n,r));return r}function yn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Sa(t))return Of();for(var r of e.options)r.selected=t.includes(da(r));return}for(r of e.options){var s=da(r);if(n0(s,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Pn(e){var t=new MutationObserver(()=>{yn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Iu(()=>{t.disconnect()})}function c6(e,t,n=t){var r=!0;Cc(e,"change",s=>{var a=s?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(a),da);else{var i=e.querySelector(a)??e.querySelector("option:not([disabled])");o=i&&da(i)}n(o)}),zn(()=>{var s=t();if(yn(e,s,r),r&&s===void 0){var a=e.querySelector(":checked");a!==null&&(s=da(a),n(s))}e.__value=s,r=!1}),Pn(e)}function da(e){return"__value"in e?e.__value:e.value}const Gs=Symbol("class"),Zs=Symbol("style"),Vc=Symbol("is custom element"),Gc=Symbol("is html");function St(e,t){var n=Lu(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Cn(e,t){var n=Lu(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function $0(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function de(e,t,n,r){var s=Lu(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[pf]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Zc(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function R0(e,t,n,r,s=!1,a=!1){var o=Lu(e),i=o[Vc],l=!o[Gc],c=t||{},f=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=uu(n.class):n[Gs]&&(n.class=null),n[Zs]&&(n.style??=null);var v=Zc(e);for(const E in n){let _=n[E];if(f&&E==="value"&&_==null){e.value=e.__value="",c[E]=_;continue}if(E==="class"){var h=e.namespaceURI==="http://www.w3.org/1999/xhtml";zt(e,h,_,r,t?.[Gs],n[Gs]),c[E]=_,c[Gs]=n[Gs];continue}if(E==="style"){fn(e,_,t?.[Zs],n[Zs]),c[E]=_,c[Zs]=n[Zs];continue}var p=c[E];if(!(_===p&&!(_===void 0&&e.hasAttribute(E)))){c[E]=_;var k=E[0]+E[1];if(k!=="$$")if(k==="on"){const T={},w="$$"+E;let F=E.slice(2);var C=y0(F);if(_0(F)&&(F=F.slice(0,-7),T.capture=!0),!C&&p){if(_!=null)continue;e.removeEventListener(F,c[w],T),c[w]=null}if(_!=null)if(C)e[`__${F}`]=_,E0([F]);else{let W=function(U){c[E].call(this,U)};c[w]=jc(F,e,W,T)}else C&&(e[`__${F}`]=void 0)}else if(E==="style")de(e,E,_);else if(E==="autofocus")a0(e,!!_);else if(!i&&(E==="__value"||E==="value"&&_!=null))e.value=e.__value=_;else if(E==="selected"&&f)$0(e,_);else{var y=E;l||(y=k0(y));var A=y==="defaultValue"||y==="defaultChecked";if(_==null&&!i&&!A)if(o[E]=null,y==="value"||y==="checked"){let T=e;const w=t===void 0;if(y==="value"){let F=T.defaultValue;T.removeAttribute(y),T.defaultValue=F,T.value=T.__value=w?F:null}else{let F=T.defaultChecked;T.removeAttribute(y),T.defaultChecked=F,T.checked=w?F:!1}}else e.removeAttribute(E);else A||v.includes(y)&&(i||typeof _!="string")?(e[y]=_,y in o&&(o[y]=on)):typeof _!="function"&&de(e,y,_)}}}return c}function Qi(e,t,n=[],r=[],s,a=!1,o=!1){gc(n,r,i=>{var l=void 0,c={},f=e.nodeName==="SELECT",d=!1;if(os(()=>{var h=t(...i.map(u)),p=R0(e,l,h,s,a,o);d&&f&&"value"in h&&yn(e,h.value);for(let C of Object.getOwnPropertySymbols(c))h[C]||mn(c[C]);for(let C of Object.getOwnPropertySymbols(h)){var k=h[C];C.description===Lf&&(!l||k!==l[C])&&(c[C]&&mn(c[C]),c[C]=bn(()=>I0(e,()=>k))),p[C]=k}l=p}),f){var v=e;zn(()=>{yn(v,l.value,!0),Pn(v)})}d=!0})}function Lu(e){return e.__attributes??={[Vc]:e.nodeName.includes("-"),[Gc]:e.namespaceURI===If}}var el=new Map;function Zc(e){var t=e.getAttribute("is")||e.nodeName,n=el.get(t);if(n)return n;el.set(t,n=[]);for(var r,s=e,a=Element.prototype;a!==s;){r=uc(s);for(var o in r)r[o].set&&n.push(o);s=ri(s)}return n}function sr(e,t,n=t){var r=new WeakSet;Cc(e,"input",async s=>{var a=s?e.defaultValue:e.value;if(a=ro(e)?so(a):a,n(a),Lt!==null&&r.add(Lt),await v0(),a!==(a=t())){var o=e.selectionStart,i=e.selectionEnd;e.value=a??"",i!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(i,e.value.length))}}),m(t)==null&&e.value&&(n(ro(e)?so(e.value):e.value),Lt!==null&&r.add(Lt)),qs(()=>{var s=t();if(e===document.activeElement){var a=au??Lt;if(r.has(a))return}ro(e)&&s===so(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ro(e){var t=e.type;return t==="number"||t==="range"}function so(e){return e===""?null:+e}function z0(e,t,n){var r=_r(e,t);r&&r.set&&(e[t]=n,Iu(()=>{e[t]=null}))}function tl(e,t){return e===t||e?.[ir]===t}function zr(e={},t,n,r){return zn(()=>{var s,a;return qs(()=>{s=a,a=[],m(()=>{e!==n(...a)&&(t(e,...a),s&&tl(n(...s),e)&&t(null,...s))})}),()=>{us(()=>{a&&tl(n(...a),e)&&t(null,...a)})}}),e}function hi(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}function bt(e=!1){const t=At,n=t.l.u;if(!n)return;let r=()=>R(t.s);if(e){let s=0,a={};const o=Ca(()=>{let i=!1;const l=t.s;for(const c in l)l[c]!==a[c]&&(a[c]=l[c],i=!0);return i&&s++,s});r=()=>u(o)}n.b.length&&l0(()=>{nl(t,r),va(n.b)}),Ro(()=>{const s=m(()=>n.m.map(lf));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&Ro(()=>{nl(t,r),va(n.a)})}function nl(e,t){if(e.l.s)for(const n of e.l.s)u(n);t()}function mi(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Lr;const r=m(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const ms=[];function B0(e,t){return{subscribe:jt(e,t).subscribe}}function jt(e,t=Lr){let n=null;const r=new Set;function s(i){if(li(e,i)&&(e=i,n)){const l=!ms.length;for(const c of r)c[1](),ms.push(c,e);if(l){for(let c=0;c<ms.length;c+=2)ms[c][0](ms[c+1]);ms.length=0}}}function a(i){s(i(e))}function o(i,l=Lr){const c=[i,l];return r.add(c),r.size===1&&(n=t(s,a)||Lr),i(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:o}}function tn(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return B0(n,(o,i)=>{let l=!1;const c=[];let f=0,d=Lr;const v=()=>{if(f)return;d();const p=t(r?c[0]:c,o,i);a?o(p):d=typeof p=="function"?p:Lr},h=s.map((p,k)=>mi(p,C=>{c[k]=C,f&=~(1<<k),l&&v()},()=>{f|=1<<k}));return l=!0,v(),function(){va(h),d(),l=!1}})}function rt(e){let t;return mi(e,n=>t=n)(),t}let Ga=!1,jo=Symbol();function ht(e,t,n){const r=n[t]??={store:null,source:$(void 0),unsubscribe:Lr};if(r.store!==e&&!(jo in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Lr;else{var s=!0;r.unsubscribe=mi(e,a=>{s?r.source.v=a:b(r.source,a)}),s=!1}return e&&jo in n?rt(e):u(r.source)}function Kn(){const e={};function t(){Iu(()=>{for(var n in e)e[n].unsubscribe();pu(e,jo,{enumerable:!1,value:!0})})}return[e,t]}function U0(e,t,n){return e.set(n),t}function j0(e){var t=Ga;try{return Ga=!1,[e(),Ga]}finally{Ga=t}}const q0={get(e,t){if(!e.exclude.includes(t))return u(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){if(!(t in e.special)){var r=st;try{Un(e.parent_effect),e.special[t]=se({get[t](){return e.props[t]}},t,cc)}finally{Un(r)}}return e.special[t](n),qi(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),qi(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function jn(e,t){return new Proxy({props:e,exclude:t,special:{},version:Rr(0),parent_effect:st},q0)}const H0={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Vs(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let s=e.props[r];Vs(s)&&(s=s());const a=_r(s,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Vs(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const s=_r(r,t);return s&&!s.configurable&&(s.configurable=!0),s}}},has(e,t){if(t===ir||t===ic)return!1;for(let n of e.props)if(Vs(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Vs(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function dr(...e){return new Proxy({props:e},H0)}function se(e,t,n,r){var s=!js||(n&Tf)!==0,a=(n&Df)!==0,o=(n&Ff)!==0,i=r,l=!0,c=()=>(l&&(l=!1,i=o?m(r):r),i),f;if(a){var d=ir in e||ic in e;f=_r(e,t)?.set??(d&&t in e?E=>e[t]=E:void 0)}var v,h=!1;a?[v,h]=j0(()=>e[t]):v=e[t],v===void 0&&r!==void 0&&(v=c(),f&&(s&&yf(),f(v)));var p;if(s?p=()=>{var E=e[t];return E===void 0?c():(l=!0,E)}:p=()=>{var E=e[t];return E!==void 0&&(i=void 0),E===void 0?i:E},s&&(n&cc)===0)return p;if(f){var k=e.$$legacy;return(function(E,_){return arguments.length>0?((!s||!_||k||h)&&f(_?p():E),E):p()})}var C=!1,y=((n&Af)!==0?Ca:Ct)(()=>(C=!1,p()));a&&u(y);var A=st;return(function(E,_){if(arguments.length>0){const T=_?u(y):s&&a?As(E):E;return b(y,T),C=!0,i!==void 0&&(i=T),E}return is&&C||(A.f&as)!==0?y.v:u(y)})}function Fa(e){At===null&&Tu(),js&&At.l!==null?Yc(At).m.push(e):Ro(()=>{const t=m(e);if(typeof t=="function")return t})}function Os(e){At===null&&Tu(),Fa(()=>()=>m(e))}function W0(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Ht(){const e=At;return e===null&&Tu(),(t,n,r)=>{const s=e.s.$$events?.[t];if(s){const a=Sa(s)?s.slice():[s],o=W0(t,n,r);for(const i of a)i.call(e.x,o);return!o.defaultPrevented}return!0}}function Kc(e){At===null&&Tu(),At.l===null&&bf(),Yc(At).a.push(e)}function Yc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const V0="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(V0);Bf();const Ft="";function ft(e){return e.startsWith("/")?`${Ft}${e}`:`${Ft}/${e}`}const G0=/\r?\n/;function rl(e){const t=[],n=e.split(/\n\n|\r\r|\r\n\r\n/);for(const r of n){const s=r.trim();if(!s)continue;const a=s.split(G0);let o="message",i=[],l;for(const c of a)if(c&&!c.startsWith(":")){if(c.startsWith("event:")){o=c.slice(6).trim()||"message";continue}if(c.startsWith("data:")){i.push(c.slice(5).trimStart());continue}if(c.startsWith("id:")){l=c.slice(3).trim();continue}}t.push({event:o,data:i.length?i.join(`
`):void 0,id:l})}return t}class Zn extends Error{status;constructor(t,n){super(n),this.status=t}}async function yt(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const s=await n.json();r=s.detail||s.message||JSON.stringify(s)}catch{}throw new Zn(n.status,r)}return await n.json()}async function vi(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const s=await n.json();r=s.detail||s.message||JSON.stringify(s)}catch{}throw new Zn(n.status,r)}}async function Z0(){return yt(ft("/api/models"))}async function K0(e){const t=`/api/chat/generation/${encodeURIComponent(e)}`;return yt(ft(t))}async function sl(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}/messages/${encodeURIComponent(t)}`;await vi(ft(n),{method:"DELETE"})}async function Y0(){return yt(ft("/api/clients/svelte/llm"))}async function al(e){return yt(ft("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify(e)})}async function J0(){return{system_prompt:(await yt(ft("/api/clients/svelte/llm"))).system_prompt}}async function X0(e){return{system_prompt:(await yt(ft("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify({system_prompt:e.system_prompt})})).system_prompt}}async function ao(){return yt(ft("/api/mcp/servers/"))}async function Q0(e){return yt(ft("/api/mcp/servers/connect"),{method:"POST",body:JSON.stringify({url:e})})}async function ep(e){await vi(ft(`/api/mcp/servers/${encodeURIComponent(e)}`),{method:"DELETE"})}async function tp(e,t){const n=`/api/mcp/servers/${encodeURIComponent(e)}`;return yt(ft(n),{method:"PATCH",body:JSON.stringify(t)})}async function np(){return yt(ft("/api/mcp/servers/refresh"),{method:"POST",body:JSON.stringify({})})}async function rp(e){return yt(ft(`/api/mcp/preferences/${encodeURIComponent(e)}`))}async function ul(e,t){return yt(ft(`/api/mcp/preferences/${encodeURIComponent(e)}`),{method:"PUT",body:JSON.stringify({enabled_servers:t})})}async function sp(){return yt(ft("/api/google-auth/status"))}async function ap(e){return yt(ft("/api/google-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function up(){return yt(ft("/api/monarch-auth/status"))}async function op(e){return yt(ft("/api/monarch-auth/credentials"),{method:"POST",body:JSON.stringify(e)})}async function ip(){return yt(ft("/api/monarch-auth/credentials"),{method:"DELETE"})}async function lp(){return yt(ft("/api/spotify-auth/status"))}async function cp(e){return yt(ft("/api/spotify-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function dp(e,t){const n=new FormData;n.append("file",e),n.append("session_id",t);const r=await fetch(ft("/api/uploads"),{method:"POST",body:n});if(!r.ok){let s=r.statusText||"Upload failed";try{s=(await r.json())?.detail??s}catch{}throw new Zn(r.status||0,s)}return await r.json()}const fp=/\n\n|\r\r|\r\n\r\n/;async function pp(e,{onChunk:t,onDone:n,onError:r,onSession:s,onNotice:a,signal:o}={}){const i=await fetch(ft("/api/chat/stream"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(e),signal:o});if(!i.ok||!i.body){const d=i.statusText||"Failed to connect to chat stream",v=new Zn(i.status||0,d);throw r?.(v),v}const l=i.body.getReader(),c=new TextDecoder;let f="";try{for(;;){const{value:d,done:v}=await l.read();if(v)break;f+=c.decode(d,{stream:!0});const h=f.split(fp);f=h.pop()??"";for(const p of h){const k=rl(p);for(const C of k){if(C.event==="session"&&C.data){try{const y=JSON.parse(C.data);y.session_id&&s?.(y.session_id)}catch(y){console.warn("Failed to parse session payload",y)}continue}if(C.event==="notice"){if(C.data)try{const y=JSON.parse(C.data);a?.(y)}catch(y){console.warn("Failed to parse notice payload",y,C.data)}continue}if(C.event!=="message"){t?.({choices:[],object:"event",meta:{event:C.event,data:C.data}},C);continue}if(C.data==="[DONE]"){n?.();return}if(C.data)try{const y=JSON.parse(C.data);t?.(y,C)}catch(y){console.warn("Failed to parse SSE chunk",y,C.data)}}}}if(f.trim()){const d=rl(f);for(const v of d)if(v.event==="session"&&v.data)try{const h=JSON.parse(v.data);h.session_id&&s?.(h.session_id)}catch(h){console.warn("Failed to parse session payload",h)}else if(v.event==="notice"){if(v.data)try{const h=JSON.parse(v.data);a?.(h)}catch(h){console.warn("Failed to parse notice payload",h,v.data)}}else if(v.event==="message"){if(v.data==="[DONE]")n?.();else if(v.data)try{const h=JSON.parse(v.data);t?.(h,v)}catch(h){console.warn("Failed to parse SSE chunk",h,v.data)}}}n?.()}catch(d){if(d instanceof DOMException&&d.name==="AbortError")return;const v=d instanceof Error?d:new Error(String(d));throw r?.(v),v}finally{l.releaseLock()}}function Ma(e,t){return{name:e.name,model:e.llm?.model??"unknown",provider:null,parameters:null,supports_tools:e.llm?.supports_tools??null,system_prompt:e.llm?.system_prompt??null,suggestions:null,model_filters:e.model_filters??null,is_default:t,created_at:e.created_at??new Date().toISOString(),updated_at:e.updated_at??new Date().toISOString()}}function hp(e,t){return{name:e.name,model:e.llm?.model??"unknown",is_default:t,has_filters:!!e.model_filters,created_at:e.created_at??new Date().toISOString(),updated_at:e.updated_at??new Date().toISOString()}}async function Ks(){const e=await yt(ft("/api/clients/svelte/presets"));return e.presets.map((t,n)=>hp(t,n===e.active_index))}async function mp(e){const t=await yt(ft("/api/clients/svelte/presets")),n=t.presets.find(s=>s.name===e);if(!n)throw new Zn(404,`Preset not found: ${e}`);const r=t.presets.indexOf(n);return Ma(n,r===t.active_index)}async function vp(e){const t=await yt(ft("/api/clients/svelte/llm")),n={name:e.name,llm:t,model_filters:e.model_filters},r=await yt(ft("/api/clients/svelte/presets"),{method:"POST",body:JSON.stringify(n)}),s=r.presets.find(o=>o.name===e.name);if(!s)throw new Zn(500,"Failed to create preset");const a=r.presets.indexOf(s);return Ma(s,a===r.active_index)}async function gp(e,t){const r=(await yt(ft("/api/clients/svelte/presets"))).presets.findIndex(i=>i.name===e);if(r===-1)throw new Zn(404,`Preset not found: ${e}`);const s=await yt(ft("/api/clients/svelte/llm")),a=await yt(ft(`/api/clients/svelte/presets/${r}`),{method:"PUT",body:JSON.stringify({llm:s,model_filters:t?.model_filters??null})}),o=a.presets[r];if(!o)throw new Zn(500,"Failed to save preset snapshot");return Ma(o,r===a.active_index)}async function _p(e){return await vi(ft(`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}`),{method:"DELETE"}),{deleted:!0}}async function bp(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/apply`;return await yt(ft(t),{method:"POST",body:JSON.stringify({})}),mp(e)}async function yp(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/set-active`,n=await yt(ft(t),{method:"POST",body:JSON.stringify({})}),r=n.presets.find(a=>a.name===e);if(!r)throw new Zn(404,`Preset not found: ${e}`);const s=n.presets.indexOf(r);return Ma(r,s===n.active_index)}async function xp(){const e=await yt(ft("/api/clients/svelte/presets"));return e.active_index!==null&&e.presets[e.active_index]?Ma(e.presets[e.active_index],!0):null}async function Jc(){return yt(ft("/api/clients/svelte/stt"))}async function kp(e){return yt(ft("/api/clients/svelte/stt"),{method:"PUT",body:JSON.stringify(e)})}const Xc=[{key:"total_cost",label:"Total cost"},{key:"created_at",label:"Created"},{key:"model",label:"Model"},{key:"origin",label:"Origin"},{key:"usage",label:"Usage"},{key:"is_byok",label:"Self-hosted"},{key:"cache_discount",label:"Cache discount"},{key:"upstream_inference_cost",label:"Upstream inference cost"},{key:"cancelled",label:"Cancelled"},{key:"provider_name",label:"Provider"},{key:"latency",label:"Latency (ms)"},{key:"moderation_latency",label:"Moderation latency (ms)"},{key:"generation_time",label:"Generation time (ms)"},{key:"finish_reason",label:"Finish reason"},{key:"native_finish_reason",label:"Native finish reason"},{key:"tokens_prompt",label:"Prompt tokens"},{key:"tokens_completion",label:"Completion tokens"},{key:"native_tokens_prompt",label:"Native prompt tokens"},{key:"native_tokens_completion",label:"Native completion tokens"},{key:"native_tokens_reasoning",label:"Native reasoning tokens"},{key:"num_media_prompt",label:"Prompt media"},{key:"num_media_completion",label:"Completion media"},{key:"num_search_results",label:"Search results"}];function ol(e){if(e==null||e==="")return{text:"â",isMultiline:!1};if(typeof e=="boolean")return{text:e?"Yes":"No",isMultiline:!1};if(typeof e=="number")return{text:Number.isFinite(e)?e.toString():String(e),isMultiline:!1};if(typeof e=="object")try{const n=JSON.stringify(e,null,2);return{text:n,isMultiline:n.includes(`
`)}}catch(n){console.warn("Failed to stringify generation detail value",n,e);const r=String(e);return{text:r,isMultiline:r.includes(`
`)}}const t=String(e);return{text:t,isMultiline:t.includes(`
`)}}const wp="modulepreload",Sp=function(e){return"/"+e},il={},ll=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=o?.nonce||o?.getAttribute("nonce");s=l(n.map(c=>{if(c=Sp(c),c in il)return;il[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":wp,f||(v.as="script"),v.crossOrigin="",v.href=c,i&&v.setAttribute("nonce",i),document.head.appendChild(v),f)return new Promise((h,p)=>{v.addEventListener("load",h),v.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return s.then(o=>{for(const i of o||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})},cl={enabled:!1,engine:null,maxResults:5,searchPrompt:"",contextSize:null};function dl(e,t){const n={...t};if(Object.prototype.hasOwnProperty.call(e,"enabled")&&(n.enabled=!!e.enabled),Object.prototype.hasOwnProperty.call(e,"engine")){const r=e.engine;n.engine=r==="native"||r==="exa"?r:null}if(Object.prototype.hasOwnProperty.call(e,"maxResults")){const r=e.maxResults;if(r==null)n.maxResults=null;else{const s=Number(r);Number.isFinite(s)&&s>0?n.maxResults=Math.min(Math.round(s),25):n.maxResults=t.maxResults}}if(Object.prototype.hasOwnProperty.call(e,"searchPrompt")){const r=e.searchPrompt;n.searchPrompt=typeof r=="string"?r:t.searchPrompt}if(Object.prototype.hasOwnProperty.call(e,"contextSize")){const r=e.contextSize;n.contextSize=r==="low"||r==="medium"||r==="high"?r:null}return n}function Ep(e=cl){const t=jt({...e});function n(o){t.update(i=>dl(o,i))}function r(o){t.update(i=>dl({enabled:o},i))}function s(){t.set({...cl})}const a=tn(t,o=>o.enabled);return{subscribe:t.subscribe,get current(){return rt(t)},update:n,setEnabled:r,reset:s,isEnabled:a}}const Qc=Ep(),Cp=[{label:"GPT",keywords:["gpt","openai","o1","o3"]},{label:"Claude",keywords:["claude"]},{label:"Gemini",keywords:["gemini","palm-2","palm2"]},{label:"Grok",keywords:["grok"]},{label:"Cohere",keywords:["cohere","command"]},{label:"Nova",keywords:["nova"]},{label:"Qwen",keywords:["qwen"]},{label:"Yi",keywords:["yi"]},{label:"DeepSeek",keywords:["deepseek"]},{label:"Mistral",keywords:["mistral","mixtral"]},{label:"Llama4",keywords:["llama-4"]},{label:"Llama3",keywords:["llama-3"]},{label:"Llama2",keywords:["llama-2"]},{label:"RWKV",keywords:["rwkv"]},{label:"Router",keywords:["router"]},{label:"Media",keywords:["media"]},{label:"Other",keywords:[]}];function ed(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function gi(e){const t=[];if(Array.isArray(e)){for(const n of e)typeof n=="string"&&n.trim()&&t.push(n.trim().toLowerCase());return t}if(typeof e=="string"&&e.trim())return e.split(/[,/]/).map(n=>n.trim().toLowerCase()).filter(Boolean);if(e&&typeof e=="object"){const n=Object.values(e);for(const r of n)t.push(...gi(r))}return t}function _i(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const a=n;for(const o of["input_modalities","input","modalities","inputs"])s(a[o])}return s(e.input_modalities),s(r),Array.from(t);function s(a){for(const o of gi(a))t.add(o)}}function bi(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const a=n;for(const i of["output_modalities","output","outputs"])s(a[i]);const o=a.modalities;o&&(s(o.output),s(o.outputs))}return s(e.output_modalities),s(r),Array.from(t);function s(a){for(const o of gi(a))t.add(o)}}const td=1e6,nd=6,Ap=["prompt_price_per_million","input_price_per_million","input_token_price_per_million"],Tp=["prompt_price","input_price","input_token_price"],Dp=["prompt","input","input_tokens","prompt_tokens"],Fp=["completion_price_per_million","output_price_per_million","output_token_price_per_million"],Mp=["completion_price","output_price","output_token_price"],Pp=["completion","output","output_tokens","completion_tokens"];function rd(e,t){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number(e.toFixed(t))}function sd(e,t,n){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number((e*t).toFixed(n))}function _u(e,t){for(const n of t){if(!(n in e))continue;const r=ed(e[n]);if(r!==null)return r}return null}function Ip(e){const t=[],n=s=>{s&&typeof s=="object"&&t.push(s)};n(e.pricing),e.provider&&typeof e.provider=="object"&&n(e.provider.pricing);const r=e.top_provider;return r&&typeof r=="object"&&n(r.pricing),t}function Np(e,t,n,r,s){const a=_u(e,t),o=rd(a,s);if(o!==null)return o;const i=_u(e,n),l=sd(i,r,s);return l!==null?l:null}function Lp(e,t,n,r,s){if(!e)return null;const a=e,o=_u(a,t),i=rd(o,s);if(i!==null)return i;const l=_u(a,n),c=sd(l,r,s);return c!==null?c:null}function ad(e,t,n,r,s,a){const i=Np(e,t,n,s,a);if(i!==null)return i;const l=[...r,...n];for(const c of Ip(e)){const f=Lp(c,t,l,s,a);if(f!==null)return f}return null}function ud(e){return ad(e,Ap,Tp,Dp,td,nd)}function Op(e){return ad(e,Fp,Mp,Pp,td,nd)}function ou(e){return ud(e)}function fa(e){const t=[e.max_context,e.context_length,e.context_window,e.context_tokens,e.stats?.context_length];for(const n of t){const r=ed(n);if(r!==null)return r}return null}function $p(e){return e===null?"â":e===0?"FREE":e>=100?`$${e.toFixed(0)}`:e>=10?`$${e.toFixed(1)}`:e>=1?`$${e.toFixed(2)}`:e>=.1?`$${e.toFixed(2)}`:`$${e.toFixed(3)}`}function Za(e){return e===null?"Unknown":e>=1e3?`${(e/1e3).toFixed(1)}k tokens`:`${e} tokens`}function od(e){const t=e.provider;if(t&&typeof t=="object"){const r=t,s=r.display_name;if(typeof s=="string"&&s.trim())return s.trim();const a=r.name??r.id??r.slug;if(typeof a=="string"&&a.trim())return a.trim()}if(typeof e.provider=="string")return e.provider.trim()||null;const n=e.id?.split("/")??[];return n.length>=2?n[n.length-2]??null:null}function id(e){const t=new Set,n=[];typeof e.id=="string"&&n.push(e.id.toLowerCase()),typeof e.name=="string"&&n.push(e.name.toLowerCase()),Array.isArray(e.tags)&&n.push(...e.tags.map(s=>String(s).toLowerCase()));const r=n.join(" ");for(const s of Cp)s.label!=="Other"&&s.keywords.some(a=>r.includes(a))&&t.add(s.label);return t.size===0&&t.add("Other"),Array.from(t)}function yi(e){const t=new Set,n=[],r=e;if(n.push(r.parameters,r.supported_parameters),e.capabilities&&typeof e.capabilities=="object"){const s=e.capabilities;n.push(s.parameters,s.supports_parameters)}for(const s of n)if(s){if(Array.isArray(s)){for(const a of s){const o=uo(a);o&&t.add(o)}continue}if(typeof s=="object")for(const a of Object.keys(s)){const o=uo(a);o&&t.add(o)}if(typeof s=="string"){const a=uo(s);a&&t.add(a)}}return Array.from(t)}function ld(e){const t=e,n=[t.is_moderated,t.moderation,t.requires_moderation],r=e.capabilities;r&&typeof r=="object"&&(n.push(r.is_moderated),n.push(r.requires_moderation));const s=e.provider;s&&typeof s=="object"&&n.push(s.is_moderated);const a=t.top_provider;a&&typeof a=="object"&&n.push(a.is_moderated);const o=t.metadata;o&&typeof o=="object"&&n.push(o.is_moderated);for(const i of n)if(typeof i=="boolean")return i?"moderated":"unmoderated";return null}function uo(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function vs(){return{include:[],exclude:[]}}function qo(){return{search:"",inputModalities:vs(),outputModalities:vs(),minContext:null,minPromptPrice:null,maxPromptPrice:null,sort:"newness",series:vs(),providers:vs(),supportedParameters:vs(),moderation:vs()}}const Rp={inputModalities:[],outputModalities:[],minContext:null,maxContext:null,minPromptPrice:null,maxPromptPrice:null,series:[],providers:[],supportedParameters:[],moderation:[]},zp={models:[],loading:!1,error:null,filters:qo(),facets:{...Rp}};function Bp(e){const t=new Set,n=new Set;let r=null,s=null,a=null,o=null;const i=new Set,l=new Set,c=new Set,f=new Set;for(const d of e){for(const C of _i(d))t.add(C);for(const C of bi(d))n.add(C);const v=fa(d);v!==null&&(r=r===null?v:Math.min(r,v),s=s===null?v:Math.max(s,v));const h=ou(d);h!==null&&(a=a===null?h:Math.min(a,h),o=o===null?h:Math.max(o,h));for(const C of id(d))i.add(C);const p=od(d);p&&l.add(p);for(const C of yi(d))c.add(C);const k=ld(d);k&&f.add(k)}return{inputModalities:Array.from(t).sort(),outputModalities:Array.from(n).sort(),minContext:r,maxContext:s,minPromptPrice:a,maxPromptPrice:o,series:Array.from(i).sort(),providers:Array.from(l).sort(),supportedParameters:Array.from(c).sort(),moderation:Array.from(f).sort()}}function xi(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t||null}function oo(e){const t=[];for(const n of e){const r=xi(n);r&&t.push(r)}return t}function Up(e,t){return e.include.includes(t)?"include":e.exclude.includes(t)?"exclude":"neutral"}function cd(e,t,n){const r=e.include.filter(a=>a!==t),s=e.exclude.filter(a=>a!==t);return n==="include"?{include:[...r,t],exclude:s}:n==="exclude"?{include:r,exclude:[...s,t]}:{include:r,exclude:s}}function jp(e,t,n){const r=xi(t);return r?cd(e,r,n):e}function gs(e,t){const n=oo(e.include),r=oo(e.exclude);if(n.length===0&&r.length===0)return!0;const s=new Set(oo(t));if(n.length>0){for(const a of n)if(!s.has(a))return!1}if(r.length>0){for(const a of r)if(s.has(a))return!1}return!0}function qp(e){const{models:t,filters:n}=e;if(!Array.isArray(t)||t.length===0)return[];const r=n.search.toLowerCase().split(/\s+/).filter(Boolean),s=t.filter(i=>{if(r.length>0){const v=[i.id,i.name,i.description,(i.tags??[]).join(" ")].join(" ").toLowerCase();if(!r.every(p=>v.includes(p)))return!1}if(!gs(n.inputModalities,_i(i))||!gs(n.outputModalities,bi(i)))return!1;const l=fa(i);if(n.minContext!==null&&(l===null||l<n.minContext))return!1;const c=ou(i);if(n.minPromptPrice!==null&&(c===null||c<n.minPromptPrice)||n.maxPromptPrice!==null&&(c===null||c>n.maxPromptPrice)||!gs(n.series,id(i)))return!1;const f=od(i);if(!gs(n.providers,f?[f]:[])||!gs(n.supportedParameters,yi(i)))return!1;const d=ld(i);return!!gs(n.moderation,d?[d]:[])}),a={newness:(i,l)=>{const c=Date.parse(i.created_at??"")||0;return(Date.parse(l.created_at??"")||0)-c},price:(i,l)=>{const c=ou(i),f=ou(l),d=c??Number.POSITIVE_INFINITY,v=f??Number.POSITIVE_INFINITY;return d===v?0:d<v?-1:1},context:(i,l)=>{const c=fa(i),f=fa(l),d=c??-1/0,v=f??-1/0;return d===v?0:v-d}},o=a[n.sort]??a.newness;return s.slice().sort(o)}function _s(e,t){const n=xi(t);if(!n)return e;const r=Up(e,n);return cd(e,n,r==="include"?"exclude":r==="exclude"?"neutral":"include")}function Hp(e,t,n,r){const s={...e};return s[t]=jp(e[t],n,r),s}function bs(e){return e===null||Number.isNaN(e)||!Number.isFinite(e)||e<0?null:e}function $n(e){return e.include.length>0||e.exclude.length>0}function Wp(e){return!!(e.search.trim()||$n(e.inputModalities)||$n(e.outputModalities)||$n(e.series)||$n(e.providers)||$n(e.supportedParameters)||$n(e.moderation)||e.minContext!==null||e.minPromptPrice!==null||e.maxPromptPrice!==null)}function Vp(e,t,n){if(!Array.isArray(e)||e.length===0)return[];if(!n||e.some(s=>s.id===n))return e;const r=t.find(s=>s.id===n);return r?[r,...e]:e}function Gp(e,t){return!Array.isArray(e)||e.length===0||!t?null:e.find(r=>r.id===t)??null}function Zp(){const e=jt({...zp});async function t(){e.update(D=>({...D,loading:!0,error:null}));try{const D=await Z0(),N=Array.isArray(D.data)?D.data:[],G=Bp(N);return e.update(I=>({...I,models:N,facets:G,loading:!1,error:null})),D}catch(D){const N=D instanceof Error?D.message:String(D);e.update(G=>({...G,loading:!1,error:N}))}}function n(D){e.update(N=>({...N,filters:{...N.filters,search:D}}))}function r(D){e.update(N=>({...N,filters:{...N.filters,inputModalities:_s(N.filters.inputModalities,D)}}))}function s(D){e.update(N=>({...N,filters:{...N.filters,outputModalities:_s(N.filters.outputModalities,D)}}))}function a(D){e.update(N=>({...N,filters:{...N.filters,series:_s(N.filters.series,D)}}))}function o(D){e.update(N=>({...N,filters:{...N.filters,providers:_s(N.filters.providers,D)}}))}function i(D){e.update(N=>({...N,filters:{...N.filters,supportedParameters:_s(N.filters.supportedParameters,D)}}))}function l(D){e.update(N=>({...N,filters:{...N.filters,moderation:_s(N.filters.moderation,D)}}))}function c(D,N,G){e.update(I=>({...I,filters:Hp(I.filters,D,N,G)}))}function f(D){e.update(N=>({...N,filters:{...N.filters,minContext:bs(D)}}))}function d(D){e.update(N=>({...N,filters:{...N.filters,minPromptPrice:bs(D)}}))}function v(D){e.update(N=>({...N,filters:{...N.filters,maxPromptPrice:bs(D)}}))}function h(D){e.update(N=>({...N,filters:{...N.filters,sort:D}}))}function p(){e.update(D=>{const N=qo();return N.sort=D.filters.sort,{...D,filters:N}})}function k(){const D=rt(e).filters,N={};return $n(D.inputModalities)&&(N.inputModalities=D.inputModalities),$n(D.outputModalities)&&(N.outputModalities=D.outputModalities),D.minContext!==null&&(N.minContext=D.minContext),D.minPromptPrice!==null&&(N.minPromptPrice=D.minPromptPrice),D.maxPromptPrice!==null&&(N.maxPromptPrice=D.maxPromptPrice),$n(D.series)&&(N.series=D.series),$n(D.providers)&&(N.providers=D.providers),$n(D.supportedParameters)&&(N.supportedParameters=D.supportedParameters),$n(D.moderation)&&(N.moderation=D.moderation),N.sort=D.sort,N}function C(D){e.update(N=>{const G=qo();return G.search=N.filters.search,D.inputModalities&&(G.inputModalities=D.inputModalities),D.outputModalities&&(G.outputModalities=D.outputModalities),D.minContext!==void 0&&(G.minContext=bs(D.minContext)),D.minPromptPrice!==void 0&&(G.minPromptPrice=bs(D.minPromptPrice)),D.maxPromptPrice!==void 0&&(G.maxPromptPrice=bs(D.maxPromptPrice)),D.series&&(G.series=D.series),D.providers&&(G.providers=D.providers),D.supportedParameters&&(G.supportedParameters=D.supportedParameters),D.moderation&&(G.moderation=D.moderation),D.sort&&(G.sort=D.sort),{...N,filters:G}})}const y=tn(e,D=>D.models),A=tn(e,D=>D.loading),E=tn(e,D=>D.error),_=tn(e,D=>D.filters),T=tn(e,D=>D.facets),w=tn(e,D=>qp(D)),F=tn(e,D=>Wp(D.filters)),W=tn([w,y,F],([D,N,G])=>{const I=G?D:N;return Y=>Vp(I,N,Y)}),U=tn(y,D=>N=>Gp(D,N));return{subscribe:e.subscribe,loadModels:t,setSearch:n,toggleInputModality:r,toggleOutputModality:s,toggleSeries:a,toggleProvider:o,toggleSupportedParameter:i,toggleModeration:l,setSelectionState:c,setMinContext:f,setMinPromptPrice:d,setMaxPromptPrice:v,setSort:h,resetFilters:p,getFilters:k,setFilters:C,models:y,loading:A,error:E,filters:_,facets:T,filtered:w,activeFilters:F,selectable:W,activeFor:U}}const lr=Zp(),Ka={loading:!1,saving:!1,applying:null,deleting:null,creating:!1,settingDefault:null,error:null,items:[],lastApplied:null,lastResult:null};function Kp(){const e=jt({...Ka});async function t(){e.set({...Ka,loading:!0});try{const c=await Ks();e.set({...Ka,loading:!1,items:c})}catch(c){const f=c instanceof Error?c.message:"Failed to load presets.";e.set({...Ka,loading:!1,error:f})}}async function n(c){const f={name:c.trim(),model_filters:lr.getFilters()};if(!f.name)return e.update(d=>({...d,error:"Preset name is required."})),null;e.update(d=>({...d,creating:!0,error:null,lastResult:null}));try{const d=await vp(f),v=await Ks();return e.update(h=>({...h,creating:!1,error:null,items:v,lastResult:d})),d}catch(d){const v=d instanceof Error?d.message:"Failed to create preset.";return e.update(h=>({...h,creating:!1,error:v})),null}}async function r(c,f){e.update(d=>({...d,saving:!0,error:null,lastResult:null}));try{const d={...f,model_filters:lr.getFilters()},v=await gp(c,d),h=await Ks();return e.update(p=>({...p,saving:!1,error:null,items:h,lastResult:v})),v}catch(d){const v=d instanceof Error?d.message:"Failed to save snapshot.";return e.update(h=>({...h,saving:!1,error:v})),null}}async function s(c){e.update(f=>({...f,deleting:c,error:null}));try{const f=await _p(c),d=await Ks();return e.update(v=>({...v,deleting:null,items:d})),!!f?.deleted}catch(f){const d=f instanceof Error?f.message:"Failed to delete preset.";return e.update(v=>({...v,deleting:null,error:d})),!1}}async function a(c){e.update(f=>({...f,applying:c,error:null,lastApplied:null,lastResult:null}));try{const f=await bp(c);return f?.model_filters&&lr.setFilters(f.model_filters),e.update(d=>({...d,applying:null,lastApplied:c,lastResult:f})),f}catch(f){const d=f instanceof Error?f.message:"Failed to apply preset.";return e.update(v=>({...v,applying:null,error:d})),null}}async function o(c){e.update(f=>({...f,settingDefault:c,error:null}));try{const f=await yp(c),d=await Ks();return e.update(v=>({...v,settingDefault:null,items:d,lastResult:f})),f}catch(f){const d=f instanceof Error?f.message:"Failed to set default preset.";return e.update(v=>({...v,settingDefault:null,error:d})),null}}async function i(){try{return await xp()}catch(c){return console.error("Failed to load default preset:",c),null}}function l(){e.update(c=>({...c,error:null}))}return{subscribe:e.subscribe,load:t,create:n,saveSnapshot:r,remove:s,apply:a,setDefault:o,loadDefault:i,clearError:l}}const tr=Kp();var Yp=Da('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>'),Jp=Da('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>'),Xp=M('<div class="model-picker-loading svelte-1vc4gmw" aria-hidden="true"><select disabled><option>Loadingâ¦</option></select></div>'),Qp=M('<div class="web-search-loading svelte-1vc4gmw" aria-hidden="true"><button class="btn btn-ghost btn-small web-search-summary" type="button" disabled><span>Web search</span> <span class="status svelte-1vc4gmw"> </span></button></div>'),e1=M('<button class="preset-badge applying svelte-1vc4gmw" type="button" aria-live="polite"><span class="spinner svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button>'),t1=M('<button class="preset-badge svelte-1vc4gmw" type="button" aria-live="polite"><span class="dot svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button>'),n1=M('<button class="drawer-backdrop svelte-1vc4gmw" type="button" aria-label="Close menu" tabindex="-1"></button>'),r1=M('<header class="topbar chat-header svelte-1vc4gmw"><div class="mobile-bar svelte-1vc4gmw"><button class="hamburger-btn svelte-1vc4gmw" type="button" aria-controls="chat-header-controls"><!></button> <span class="mobile-model-name svelte-1vc4gmw"><!></span> <button class="btn btn-ghost btn-small mobile-clear svelte-1vc4gmw" type="button" aria-label="Clear conversation">Clear</button></div> <div class="topbar-content svelte-1vc4gmw"><div class="controls svelte-1vc4gmw" id="chat-header-controls"><button class="btn btn-ghost btn-small explorer svelte-1vc4gmw" type="button">Explorer</button> <!> <!> <button class="btn btn-ghost btn-small svelte-1vc4gmw" type="button" aria-label="Model settings" title="Model settings"><span>Model</span> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.89 3.31.876 2.42 2.42a1.724 1.724 0 0 0 1.066 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.572c.89 1.543-.876 3.31-2.42 2.42a1.724 1.724 0 0 0-2.572 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.89-3.31-.876-2.42-2.42a1.724 1.724 0 0 0-1.066-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.572c-.89-1.543.876-3.31 2.42-2.42.965.557 2.185.21 2.573-1.066Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!> <div class="icon-row svelte-1vc4gmw"><button class="btn btn-ghost btn-small settings-icon mcp-btn" type="button" aria-label="MCP servers" title="MCP servers"><svg width="18" height="18" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M25 97.8528L92.8823 29.9706C102.255 20.598 117.451 20.598 126.823 29.9706V29.9706C136.196 39.3431 136.196 54.5391 126.823 63.9117L75.5581 115.177" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M76.2653 114.47L126.823 63.9117C136.196 54.5391 151.392 54.5391 160.765 63.9117L161.118 64.2652C170.491 73.6378 170.491 88.8338 161.118 98.2063L99.7248 159.6C96.6006 162.724 96.6006 167.789 99.7248 170.913L112.331 183.52" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M109.853 46.9411L59.6482 97.1457C50.2757 106.518 50.2757 121.714 59.6482 131.087V131.087C69.0208 140.459 84.2168 140.459 93.5894 131.087L143.794 80.8822" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon system-settings" type="button" aria-label="System settings" title="System settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M8 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M3 8h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon kiosk-btn" type="button" aria-label="Kiosk settings" title="Kiosk settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="4" y="2" width="16" height="12" rx="1.5" stroke="currentColor" stroke-width="1.5"></rect><path d="M12 14v4M8 22h8M8 18h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon cli-btn" type="button" aria-label="CLI settings" title="CLI settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4 17l6-6-6-6M12 19h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="btn btn-ghost btn-small" type="button">Clear</button></div></div></div> <!></header>');function s1(e,t){vt(t,!1);const n=()=>ht(Qc,"$webSearchStore",s),r=()=>ht(tr,"$presetsStore",s),[s,a]=Kn(),o=Ht();let i=se(t,"selectableModels",24,()=>[]),l=se(t,"selectedModel",8,""),c=se(t,"modelsLoading",8,!1),f=se(t,"modelsError",8,null),d=se(t,"hasMessages",8,!1),v=se(t,"pwaMode",8,!1),h=$(null),p=$(null),k=$(!1),C=$(!1),y=$(!1);function A(){b(y,!1)}async function E(){if(!u(h)){b(k,!0);try{const Q=await ll(()=>import("./ModelPicker-4fPCNJmJ.js"),__vite__mapDeps([0,1]));b(h,Q.default)}catch(Q){console.error("Failed to load ModelPicker",Q)}finally{b(k,!1)}}}async function _(){if(!u(p)){b(C,!0);try{const Q=await ll(()=>import("./WebSearchMenu-BDryiaZE.js"),__vite__mapDeps([2,3]));b(p,Q.default)}catch(Q){console.error("Failed to load WebSearchMenu",Q)}finally{b(C,!1)}}}Fa(()=>{E(),_()});function T(){A(),o("openExplorer")}function w(){A(),o("clear")}function F(Q){o("modelChange",Q.detail)}function W(){A(),o("openModelSettings")}function U(){A(),o("openSystemSettings")}function D(){A(),o("openKioskSettings")}function N(){A(),o("openCliSettings")}function G(){A(),o("openMcpServers")}bt();var I=r1(),Y=g(I),Z=g(Y),X=g(Z);{var fe=Q=>{var ae=Yp();S(Q,ae)},ne=Q=>{var ae=Jp();S(Q,ae)};O(X,Q=>{u(y)?Q(fe):Q(ne,!1)})}var ue=x(Z,2),L=g(ue);{var j=Q=>{var ae=kn();H(Pe=>V(ae,Pe),[()=>(R(i()),R(l()),m(()=>i().find(Pe=>Pe.id===l())?.name??l().split("/").pop()??"Chat"))]),S(Q,ae)},ce=Q=>{var ae=kn("Chat");S(Q,ae)};O(L,Q=>{l()?Q(j):Q(ce,!1)})}var ge=x(ue,2),K=x(Y,2),z=g(K),J=g(z),_e=x(J,2);{var oe=Q=>{var ae=xe(),Pe=pe(ae);Yi(Pe,()=>u(h),(Ue,Se)=>{Se(Ue,{get selectableModels(){return i()},get selectedModel(){return l()},get modelsLoading(){return c()},get modelsError(){return f()},$$events:{modelChange:F}})}),S(Q,ae)},be=Q=>{var ae=Xp();H(()=>de(ae,"data-loading",u(k))),S(Q,ae)};O(_e,Q=>{u(h)?Q(oe):Q(be,!1)})}var te=x(_e,2);{var Te=Q=>{var ae=xe(),Pe=pe(ae);Yi(Pe,()=>u(p),(Ue,Se)=>{Se(Ue,{})}),S(Q,ae)},$e=Q=>{var ae=Qp(),Pe=g(ae),Ue=x(g(Pe),2),Se=g(Ue);H(()=>{de(ae,"data-loading",u(C)),de(Ue,"data-enabled",(n(),m(()=>n().enabled))),V(Se,(n(),m(()=>n().enabled?"On":"Off")))}),S(Q,ae)};O(te,Q=>{u(p)?Q(Te):Q($e,!1)})}var Re=x(te,2),Xe=x(Re,2);{var Fe=Q=>{var ae=e1(),Pe=x(g(ae),4),Ue=g(Pe);H(()=>{de(ae,"title",(r(),m(()=>`Applying ${r().applying}â¦ (open system settings to manage presets)`))),de(Pe,"title",(r(),m(()=>r().applying))),V(Ue,(r(),m(()=>r().applying)))}),B("click",ae,U),S(Q,ae)},Qe=Q=>{var ae=xe(),Pe=pe(ae);{var Ue=Se=>{var Ve=t1(),He=x(g(Ve),4),qe=g(He);H(()=>{de(Ve,"title",(r(),m(()=>`Active preset: ${r().lastApplied} (open system settings to manage)`))),de(He,"title",(r(),m(()=>r().lastApplied))),V(qe,(r(),m(()=>r().lastApplied)))}),B("click",Ve,U),S(Se,Ve)};O(Pe,Se=>{r(),m(()=>r().lastApplied)&&Se(Ue)},!0)}S(Q,ae)};O(Xe,Q=>{r(),m(()=>r().applying)?Q(Fe):Q(Qe,!1)})}var he=x(Xe,2),ke=g(he),Ne=x(ke,2),re=x(Ne,2),Ee=x(re,2),ze=x(Ee,2),q=x(K,2);{var le=Q=>{var ae=n1();B("click",ae,()=>b(y,!1)),S(Q,ae)};O(q,Q=>{u(y)&&Q(le)})}H(()=>{de(I,"data-pwa-mode",v()),de(I,"data-drawer-open",u(y)),de(Z,"aria-label",u(y)?"Close menu":"Open menu"),de(Z,"aria-expanded",u(y)),ge.disabled=!d(),Re.disabled=c()||!l(),ze.disabled=!d()}),B("click",Z,()=>b(y,!u(y))),B("click",ge,w),B("click",J,T),B("click",Re,W),B("click",ke,G),B("click",Ne,U),B("click",re,D),B("click",Ee,N),B("click",ze,w),S(e,I),gt(),a()}/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const a1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var u1=Da("<svg><!><!></svg>");function fr(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]),r=jn(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);vt(t,!1);let s=se(t,"name",8,void 0),a=se(t,"color",8,"currentColor"),o=se(t,"size",8,24),i=se(t,"strokeWidth",8,2),l=se(t,"absoluteStrokeWidth",8,!1),c=se(t,"iconNode",24,()=>[]);const f=(...p)=>p.filter((k,C,y)=>!!k&&y.indexOf(k)===C).join(" ");bt();var d=u1();Qi(d,(p,k)=>({...a1,...r,width:o(),height:o(),stroke:a(),"stroke-width":p,class:k}),[()=>(R(l()),R(i()),R(o()),m(()=>l()?Number(i())*24/Number(o()):i())),()=>(R(s()),R(n),m(()=>f("lucide-icon","lucide",s()?`lucide-${s()}`:"",n.class)))]);var v=g(d);Dt(v,1,c,rr,(p,k)=>{var C=e0(()=>df(u(k),2));let y=()=>u(C)[0],A=()=>u(C)[1];var E=xe(),_=pe(E);P0(_,y,!0,(T,w)=>{Qi(T,()=>({...A()}))}),S(p,E)});var h=x(v);hn(h,t,"default",{}),S(e,d),gt()}function o1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];fr(e,dr({name:"brain"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function i1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M5 21v-6"}],["path",{d:"M12 21V9"}],["path",{d:"M19 21V3"}]];fr(e,dr({name:"chart-no-axes-column-increasing"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function l1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M20 6 9 17l-5-5"}]];fr(e,dr({name:"check"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function c1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4"}],["path",{d:"M21 14H11"}],["path",{d:"m15 10-4 4 4 4"}]];fr(e,dr({name:"clipboard-copy"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function d1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];fr(e,dr({name:"globe"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function fl(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];fr(e,dr({name:"pencil"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function f1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}],["path",{d:"M16 16h5v5"}]];fr(e,dr({name:"refresh-ccw"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function p1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];fr(e,dr({name:"send"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function h1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];fr(e,dr({name:"trash-2"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function m1(e,t){const n=jn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];fr(e,dr({name:"wrench"},()=>n,{get iconNode(){return r},children:(s,a)=>{var o=xe(),i=pe(o);hn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function v1(e,t=null){let n=0,r=2;function s(c){if(typeof c=="number")r=Number.isFinite(c)&&c>0?c:2;else if(c&&typeof c=="object"&&"maxMultiplier"in c){const f=c.maxMultiplier;typeof f=="number"&&Number.isFinite(f)&&f>0&&(r=f)}}s(t);function a(){const c=e.style.height;if(e.style.height="auto",n=e.clientHeight||e.scrollHeight||0,e.style.height=c,!n){const f=getComputedStyle(e);n=parseFloat(f.lineHeight||"0")||24}}function o(){const c=Math.max(1,Math.round(n*r));e.style.height="auto";const f=e.scrollHeight,d=Math.min(f,c);e.style.height=`${d}px`,e.style.overflowY=f>c?"auto":"hidden",e.style.maxHeight=`${c}px`}function i(){o()}const l=requestAnimationFrame(()=>{a(),o()});return e.addEventListener("input",i),{update(c){s(c),a(),o()},destroy(){cancelAnimationFrame(l),e.removeEventListener("input",i),e.style.overflowY="",e.style.maxHeight=""}}}const ki="speech.settings.v2",g1={fast:{label:"Fast",autoSubmitDelayMs:0},normal:{label:"Normal",autoSubmitDelayMs:300},slow:{label:"Slow",autoSubmitDelayMs:800}},_1={stt:{autoSubmit:!0,autoSubmitDelayMs:0},updatedAt:null};function b1(e){return JSON.parse(JSON.stringify(e))}function Jr(){return b1(_1)}function y1(e,t,n){return Math.min(Math.max(Math.round(e),t),n)}function x1(e,t){return typeof e=="boolean"?e:t}function k1(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Ho(e){const t=Jr(),n={stt:{...t.stt},updatedAt:t.updatedAt};if(!e||typeof e!="object")return n;const r=e,s=r.stt??r.stt;if(s&&typeof s=="object"){const o=s;n.stt.autoSubmit=x1(o.autoSubmit??o.auto_submit,t.stt.autoSubmit);const i=k1(o.autoSubmitDelayMs??o.auto_submit_delay_ms);i!==null&&(n.stt.autoSubmitDelayMs=y1(i,0,1e4))}const a=r.updatedAt??r.updated_at;return n.updatedAt=typeof a=="string"&&a?a:null,n}function pl(){if(typeof window>"u"||!window.localStorage)return Jr();try{const e=window.localStorage.getItem(ki);if(!e)return Jr();const t=JSON.parse(e);return Ho(t)}catch(e){return console.warn("Failed to read speech settings from storage",e),Jr()}}function w1(e){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(ki,JSON.stringify(e))}catch(t){console.warn("Failed to persist speech settings",t)}}function S1(){const e=pl(),t=jt(e);function n(o){const i=Ho(o),l={...i,stt:{...i.stt},updatedAt:new Date().toISOString()};return t.set(l),w1(l),l}function r(o){const i=rt(t),l={...i,stt:{...i.stt},updatedAt:i.updatedAt};return o.stt&&(l.stt={...l.stt,...o.stt}),o.updatedAt!==void 0&&(l.updatedAt=o.updatedAt),n(l)}function s(){return n(Jr())}function a(){const o=pl();t.set(o)}return typeof window<"u"&&window.addEventListener("storage",o=>{if(o.key===ki)try{const i=o.newValue?JSON.parse(o.newValue):null,l=Ho(i);t.set(l)}catch(i){console.warn("Failed to synchronize speech settings from storage",i)}}),{subscribe:t.subscribe,save:n,update:r,reset:s,refresh:a,get current(){return rt(t)}}}const pa=S1(),bu=16e3,E1=4096,C1="audio-capture",A1=new URL("data:text/javascript;base64,LyoqCiAqIEF1ZGlvV29ya2xldCBwcm9jZXNzb3IgZm9yIGNhcHR1cmluZyBtaWNyb3Bob25lIGF1ZGlvLgogKiBTZW5kcyBGbG9hdDMyQXJyYXkgc2FtcGxlcyB0byB0aGUgbWFpbiB0aHJlYWQgZm9yIHByb2Nlc3NpbmcuCiAqLwpjbGFzcyBBdWRpb0NhcHR1cmVQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgc3VwZXIoKTsKICAgICAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7CiAgICAgICAgdGhpcy5wb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4gewogICAgICAgICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YSB8fCB7fTsKICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3BhdXNlJykgewogICAgICAgICAgICAgICAgdGhpcy5pc1BhdXNlZCA9IEJvb2xlYW4oZGF0YS52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIHByb2Nlc3MoaW5wdXRzKSB7CiAgICAgICAgaWYgKHRoaXMuaXNQYXVzZWQpIHJldHVybiB0cnVlOwogICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgICAgIGlmICghaW5wdXQgfHwgIWlucHV0WzBdIHx8IGlucHV0WzBdLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gQ29weSBzYW1wbGVzIGFuZCB0cmFuc2ZlciBidWZmZXIgdG8gbWFpbiB0aHJlYWQKICAgICAgICBjb25zdCBzYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheShpbnB1dFswXSk7CiAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHNhbXBsZXMsIFtzYW1wbGVzLmJ1ZmZlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgpyZWdpc3RlclByb2Nlc3NvcignYXVkaW8tY2FwdHVyZScsIEF1ZGlvQ2FwdHVyZVByb2Nlc3Nvcik7Cg==",import.meta.url),T1={mode:"idle",recording:!1,connecting:!1,error:null,promptText:"",promptVersion:0,keepPromptSynced:!1,pendingSubmit:null,sttMode:"command",conversationActive:!1},cn=jt({...T1});let iu=null,lu=null,Es=null,Xr=null,gr=0,Dr="",cu=null,Wo=0;function Pa(){cu&&(clearTimeout(cu),cu=null),Wo++}function yu(e,t){cn.update(n=>({...n,promptText:e,promptVersion:n.promptVersion+1,keepPromptSynced:t?!0:n.keepPromptSynced}))}function Ya(e){cn.update(t=>({...t,error:e,recording:!1,connecting:!1,keepPromptSynced:!1,mode:"idle"}))}function D1(){let e=window.location.origin;return e=e.replace(/^http/,"ws"),`${e}/api/stt/stream`}function F1(e,t,n){if(!e||e.length===0||!t||!n||t===n)return e;const r=t/n,s=Math.max(1,Math.round(e.length/r)),a=new Float32Array(s);for(let o=0;o<s;o++){const i=o*r,l=Math.floor(i),c=Math.min(l+1,e.length-1),f=i-l;a[o]=e[l]+(e[c]-e[l])*f}return a}function M1(e){const t=new Int16Array(e.length);for(let s=0;s<e.length;s++)t[s]=Math.max(-32768,Math.min(32767,Math.floor(e[s]*32768)));const n=new Uint8Array(t.buffer);let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return btoa(r)}function io(e,t){if(!e||e.length===0||!Xr||Xr.readyState!==WebSocket.OPEN)return;const n=t!==bu?F1(e,t,bu):e,r=M1(n);Xr.send(JSON.stringify({type:"audio_chunk",data:{audio:r}}))}function P1(){if(Xr)try{Xr.close()}catch(e){console.warn("Failed to close WebSocket",e)}Xr=null}function dd(){if(Es)try{Es.disconnect(),"port"in Es&&(Es.port.onmessage=null)}catch{}if(Es=null,lu)try{lu.close()}catch{}if(lu=null,iu)try{iu.getTracks().forEach(e=>e.stop())}catch{}iu=null}function ar(e={}){dd(),P1(),Pa(),cn.update(t=>({...t,recording:!1,connecting:!1,keepPromptSynced:!1,pendingSubmit:e.submitText?{text:e.submitText}:null,mode:"idle",conversationActive:e.preserveConversation?t.conversationActive:!1}))}function I1(e){const t=e.trim(),r=rt(cn).sttMode==="conversation",s=pa.current,a=r?!0:s?.stt.autoSubmit??!0,o=r?0:Math.max(s?.stt.autoSubmitDelayMs??0,0);if(Pa(),!t){ar({submitText:null,preserveConversation:r});return}if(a){if(o<=0){ar({submitText:t,preserveConversation:r});return}ar({preserveConversation:r}),yu(t,!1);const i=++Wo;cu=setTimeout(()=>{i===Wo&&cn.update(l=>({...l,pendingSubmit:{text:t}}))},o)}else ar({preserveConversation:!1}),yu(t,!1)}async function N1(e,t,n,r){let s=null;if(e.audioWorklet)try{await e.audioWorklet.addModule(A1);const a=new AudioWorkletNode(e,C1);a.port.onmessage=o=>{if(r!==gr)return;const i=o.data,l=i&&i.samples?i.samples:i;l instanceof Float32Array?io(l,n):l instanceof ArrayBuffer&&io(new Float32Array(l),n)},s=a}catch(a){console.warn("AudioWorklet unavailable, falling back to ScriptProcessor:",a)}if(!s){const a=e.createScriptProcessor(E1,1,1);a.onaudioprocess=o=>{r===gr&&io(o.inputBuffer.getChannelData(0),n)},s=a}t.connect(s),s.connect(e.destination),Es=s}let Ys=null,lo=!1;async function L1(){if(Ys)return Ys;if(lo)return await new Promise(e=>setTimeout(e,100)),Ys;lo=!0;try{return Ys=await Jc(),Ys}catch(e){return console.warn("Failed to fetch server STT settings",e),null}finally{lo=!1}}async function fd(e,t=!1){const n=rt(cn);if((n.connecting||n.recording)&&ar(),Pa(),!pa.current){Ya("Speech settings unavailable");return}const a=(await L1())?.mode==="conversation"?"conversation":"command",o=a==="conversation",i=++gr;Dr="",cn.set({...n,mode:e,connecting:!0,recording:!1,error:null,keepPromptSynced:!0,pendingSubmit:null,sttMode:a,conversationActive:o||t});let l;try{l=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:bu,echoCancellation:!0,noiseSuppression:!0},video:!1})}catch(p){if(i!==gr)return;ar();const k=p instanceof Error?p.message:"Microphone access denied";Ya(k);return}if(i!==gr){l.getTracks().forEach(p=>p.stop());return}iu=l;const c=new AudioContext({sampleRate:bu});lu=c;const f=c.sampleRate,d=c.createMediaStreamSource(l),v=D1(),h=new WebSocket(v);Xr=h,h.addEventListener("open",()=>{}),h.addEventListener("message",p=>{if(i!==gr||typeof p.data!="string")return;let k;try{k=JSON.parse(p.data)}catch{return}const C=k.type;if(C==="stt_session_ready")N1(c,d,f,i),cn.update(y=>({...y,connecting:!1,recording:!0,error:null,keepPromptSynced:!0}));else if(C==="transcript"){const y=String(k.text??""),A=k.is_final===!0;if(y)if(A)Dr=Dr?`${Dr} ${y}`.trim():y,yu(Dr,!0),I1(Dr);else{const E=Dr?`${Dr} ${y}`.trim():y;yu(E,!0)}}else if(C==="error"){const y=String(k.message??"STT error");console.error("STT error:",y),Ya(y),ar()}}),h.addEventListener("error",p=>{console.warn("WebSocket error",p),i===gr&&(Ya("Connection error"),ar())}),h.addEventListener("close",()=>{i===gr&&(dd(),cn.update(p=>({...p,recording:!1,connecting:!1,keepPromptSynced:!1})))})}async function O1(){Pa();const e=rt(cn);if(e.mode==="dictation"&&(e.recording||e.connecting)){ar(),cn.update(n=>({...n,mode:"idle",keepPromptSynced:!1,conversationActive:!1}));return}cn.update(n=>({...n,mode:"dictation"})),await fd("dictation")}async function hl(){const e=rt(cn);e.conversationActive&&(e.recording||e.connecting||(cn.update(t=>({...t,mode:"dictation"})),await fd("dictation",!0)))}function ml(){Pa(),ar(),cn.update(e=>({...e,mode:"idle",conversationActive:!1}))}function vl(){const e=rt(cn);if(!e.pendingSubmit)return null;const t=e.pendingSubmit;return cn.update(n=>({...n,pendingSubmit:null})),t}const pd={subscribe:cn.subscribe};function oa(e){return typeof e=="object"&&e!==null}function mr(e){if(typeof e!="string")return;const t=e.trim();return t||void 0}function gl(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=e.trim();if(!t)return;const n=Number.parseInt(t,10);if(Number.isFinite(n))return n}}function Ts(e){if(!oa(e))return null;const t=mr(e.url);if(!t)return null;const n={url:t},r=mr(e.title)??mr(e.name)??mr(e.label);r&&(n.title=r);const s=mr(e.content)??mr(e.snippet)??mr(e.text)??mr(e.description);s&&(n.content=s);const a=gl(e.startIndex??e.start_index);a!==void 0&&(n.startIndex=a);const o=gl(e.endIndex??e.end_index);return o!==void 0&&(n.endIndex=o),n}function $1(e){const t=mr(e.type),n=t?t.toLowerCase():null,r=[];"url_citation"in e&&r.push(e.url_citation),"urlCitation"in e&&r.push(e.urlCitation),"citation"in e&&r.push(e.citation),"payload"in e&&r.push(e.payload),"data"in e&&r.push(e.data);for(const s of r){const a=Ts(s);if(a)return a}return n==="url_citation"||n==="url-citation"?Ts(e):null}function ys(e,t,n){const r=`${n.url}|${n.startIndex??""}|${n.endIndex??""}`;t.has(r)||(t.add(r),e.push(n))}function R1(e){const t=[],n=new Set,r=/\[([^\]]+)\]\(([^)]+)\)/g;let s;for(;(s=r.exec(e))!==null;){const a=s[1].trim(),o=s[2].trim();o&&!n.has(o)&&(n.add(o),t.push({url:o,title:a||void 0,startIndex:s.index,endIndex:s.index+s[0].length}))}return t}function Gr(...e){const t=[],n=new Set,r=new WeakSet,s=[];function a(o){if(o!=null){if(Array.isArray(o)||oa(o)){const i=o;if(r.has(i))return;r.add(i)}s.push(o)}}for(e.forEach(a);s.length>0;){const o=s.shift();if(o==null)continue;if(Array.isArray(o)){for(const c of o){if(c==null)continue;if(Array.isArray(c)||oa(c)){a(c);continue}const f=Ts(c);f&&ys(t,n,f)}continue}if(!oa(o)){const c=Ts(o);c&&ys(t,n,c);continue}const i=$1(o);if(i)ys(t,n,i);else{const c=Ts(o);c&&ys(t,n,c)}a(o.meta),a(o.metadata),a(o.annotations),a(o.citations),a(o.url_citation),a(o.urlCitation),a(o.payload),a(o.data),a(o.message);const l=o.content??o.text;if(typeof l=="string"&&l.length>0){const c=R1(l);for(const f of c)ys(t,n,f)}for(const c of Object.values(o))if(c!=null)if(Array.isArray(c)||oa(c))a(c);else{const f=Ts(c);f&&ys(t,n,f)}}return t}function z1(e,t){const n=e.trim(),r=[];n&&r.push({type:"text",text:n});for(const s of t)r.push({type:"image_url",image_url:{url:s.deliveryUrl},metadata:{attachment_id:s.id,display_url:s.displayUrl,mime_type:s.mimeType,size_bytes:s.sizeBytes,filename:s.metadata?.filename,session_id:s.sessionId,uploaded_at:s.uploadedAt,expires_at:s.expiresAt}});return r.length===1&&r[0].type==="text"?r[0].text:r.length>0?r:""}function Vo(e){if(typeof e=="string"){const s=e;return{parts:s?[{type:"text",text:s}]:[],text:s}}const t=[],n=[];for(const s of e){if(s?.type==="text"&&typeof s.text=="string"){const a=s.text;t.push({type:"text",text:a}),n.push(a);continue}if(s?.type==="image_url"&&"image_url"in s){const a=s.image_url;if(!a||typeof a.url!="string")continue;const o=s.metadata??{},i=typeof o.display_url=="string"&&o.display_url?o.display_url:a.url,l=typeof o.attachment_id=="string"&&o.attachment_id?o.attachment_id:void 0,c=typeof o.mime_type=="string"&&o.mime_type?o.mime_type:void 0,f=typeof o.size_bytes=="number"&&Number.isFinite(o.size_bytes)?Number(o.size_bytes):void 0,d=typeof o.filename=="string"&&o.filename?o.filename:void 0,v=typeof o.session_id=="string"&&o.session_id?o.session_id:void 0,h=typeof o.uploaded_at=="string"&&o.uploaded_at?o.uploaded_at:void 0,p=typeof o.expires_at=="string"&&o.expires_at?o.expires_at:null;t.push({type:"image",url:a.url,displayUrl:i,attachmentId:l,mimeType:c,sizeBytes:f,fileName:d,sessionId:v,uploadedAt:h,expiresAt:p,metadata:s.metadata??null})}}const r=n.join(`
`).trim();return{parts:t,text:r}}function xu(e){if(e==null)return[];if(Array.isArray(e))return e.flatMap(t=>xu(t));if(typeof e=="string")return e.length>0?[{text:e}]:[];if(typeof e=="object"){const t=e,n=t.text,r=t.type,s=[];if(typeof n=="string"&&n.length>0){const o={text:n};typeof r=="string"&&r.length>0&&(o.type=r),s.push(o)}const a=["segments","segment","messages","message","content","contents","parts","steps","items"];for(const o of a){const i=t[o];i!==void 0&&s.push(...xu(i))}return s}return[]}function B1(e){if(!e||typeof e!="object")return{segments:[],hasPayload:!1};const t=e.choices;if(!Array.isArray(t))return{segments:[],hasPayload:!1};const n=[];let r=!1;for(const s of t){if(!s||typeof s!="object")continue;const a=s.delta;if(!(!a||typeof a!="object")&&"reasoning"in a){r=!0;const o=a.reasoning;n.push(...xu(o))}}return{segments:n,hasPayload:r}}function U1(e,t){const n=t.filter(o=>o.text.length>0);if(n.length===0)return e??[];if(!e||e.length===0)return n;const r=e.map(o=>o.text).join(""),s=n.map(o=>o.text).join("");if(s.startsWith(r)){const o=s.slice(r.length);if(o.length===0)return e;const i=[...e],l=i.length-1,c=n[n.length-1];return i[l]={text:`${i[l].text}${o}`,type:c.type??i[l].type},i}const a=[...e];for(const o of n)a.some(l=>l.text===o.text&&l.type===o.type)||a.push(o);return a}function _l(e){return e?.reduce((t,n)=>t+n.text.length,0)??0}async function j1(e,t={}){const{signal:n,onSession:r,onMessageDelta:s,onMetadata:a,onToolEvent:o,onDone:i,onError:l}=t,{onNotice:c}=t;await pp(e,{signal:n,onSession:r,onDone:i,onError:l,onNotice:c,onChunk(f,d){const v=d?.event??"message";if(v==="message"){const{text:h,fragments:p}=q1(f),{segments:k,hasPayload:C}=B1(f);if(!h&&p.length===0&&k.length===0&&!C)return;s?.({text:h,fragments:p,reasoningSegments:k,hasReasoningPayload:C,chunk:f});return}if(v==="metadata"&&d?.data){try{const h=JSON.parse(d.data);a?.(h)}catch(h){console.warn("Failed to parse metadata payload",h,d.data)}return}if(v==="tool"&&d?.data)try{const h=JSON.parse(d.data);o?.(h)}catch(h){console.warn("Failed to parse tool payload",h,d.data)}}})}function q1(e){const t=[],n=[],r=e.choices??[];for(const s of r){const a=s.delta??{},o=a.content;if(typeof o=="string")o&&t.push(o);else if(Array.isArray(o))for(const l of o)l&&typeof l=="object"&&n.push(l);const i=a.images;if(Array.isArray(i))for(const l of i)l&&typeof l=="object"&&n.push(l)}return{text:t.join(""),fragments:n}}const co={loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:null,lastSyncedModel:null,lastSavedAt:null,version:0};function H1(e){if(!e)return;const t={};for(const[n,r]of Object.entries(e))if(r!=null&&!(typeof r=="string"&&r.trim()==="")){if(Array.isArray(r)){if(r.length===0)continue;t[n]=r;continue}if(typeof r=="object"){if(Object.entries(r).length===0)continue;t[n]=r;continue}t[n]=r}return Object.keys(t).length>0?t:void 0}function W1(){const e=jt({...co});let t=0;async function n(){const l=rt(e);if(!l.dirty||!l.data)return l.dirty&&e.update(v=>({...v,dirty:!1})),!0;const c=l.version,f={model:l.data.model,provider:l.data.provider??null};"supports_tools"in l.data&&(f.supports_tools=l.data.supports_tools===void 0?null:l.data.supports_tools);const d=H1(l.data.parameters);d?f.parameters=d:f.parameters=null,e.update(v=>({...v,saving:!0,saveError:null}));try{const v=await al(f);return e.update(h=>{const p=Date.now();return h.version!==c?{...h,saving:!1,saveError:null,lastSavedAt:p,lastSyncedModel:v.model}:{...h,saving:!1,saveError:null,dirty:!1,data:v,lastSyncedModel:v.model,lastSavedAt:p}}),!0}catch(v){const h=v instanceof Error?v.message:"Failed to save model settings.";return e.update(p=>({...p,saving:!1,saveError:h})),!1}}async function r(l){const c=++t;e.set({...co,loading:!0});try{const f=await Y0();let d=f;if(l&&f.model!==l&&(d=await al({model:l,parameters:null,provider:null})),c!==t)return;e.set({loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:d,lastSyncedModel:d.model,lastSavedAt:Date.now(),version:0})}catch(f){if(c!==t)return;const d=f instanceof Error?f.message:"Failed to load model settings.";e.set({...co,error:d})}}function s(l,c){e.update(f=>{if(!f.data)return f;const d={...f.data.parameters??{}};c==null?delete d[l]:d[l]=c;const v={...f.data,parameters:Object.keys(d).length>0?d:null};return{...f,data:v,dirty:!0,saveError:null,version:f.version+1}})}function a(l){e.update(c=>{if(!c.data||c.data.model===l)return c;const f={...c.data,model:l};return{...c,data:f,dirty:!0,saveError:null,version:c.version+1}})}function o(){e.update(l=>{if(!l.data)return l;const c={...l.data,parameters:null};return{...l,data:c,dirty:!0,saveError:null,version:l.version+1}})}function i(){e.update(l=>({...l,error:null,saveError:null}))}return{subscribe:e.subscribe,load:r,updateParameter:s,setModel:a,resetToDefaults:o,clearErrors:i,flushSave:n}}const Jt=W1();function V1(e){return typeof e=="object"&&e!==null}const bl={messages:[],sessionId:null,isStreaming:!1,error:null,selectedModel:"openrouter/auto"};function Js(e){let t=null;const n=typeof globalThis<"u"?globalThis.crypto:void 0;if(n?.randomUUID)try{t=n.randomUUID()}catch(r){console.warn("Failed to generate UUID via crypto.randomUUID",r)}if(!t&&n?.getRandomValues){const r=new Uint32Array(4);n.getRandomValues(r),t=Array.from(r,s=>s.toString(16).padStart(8,"0")).join("")}return t||(t=`${Date.now().toString(36)}${Math.random().toString(36).slice(2,12)}`),`${e}_${t.replace(/-/g,"")}`}function hd(e,t){const n=[],r=new Set;for(const s of e){if(s.type!=="image")continue;const a=s.attachmentId??s.displayUrl??s.url;!a||r.has(a)||(r.add(a),n.push({id:s.attachmentId??a,sessionId:s.sessionId??t??"",mimeType:s.mimeType??"image/png",sizeBytes:s.sizeBytes??0,displayUrl:s.displayUrl||s.url,deliveryUrl:s.displayUrl||s.url,uploadedAt:s.uploadedAt??new Date().toISOString(),expiresAt:s.expiresAt??null,metadata:s.metadata??null}))}return n}function G1(e,t,n,r,s){if(!(Array.isArray(e)||r.length>0)){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const o=Array.isArray(e)?[...e]:[];if(!Array.isArray(e)){const c=typeof e=="string"?e:t;c&&o.push({type:"text",text:c})}if(r.length>0)o.push(...r);else if(n){const c=o[o.length-1];c&&c.type==="text"&&typeof c.text=="string"?c.text+=n:o.push({type:"text",text:n})}if(o.length===0){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const i=Vo(o),l=hd(i.parts,s);return{content:o,text:i.text,attachments:l}}function yl(e){const t=[],n=new Set,r=e.details?.serverMessageId;if(typeof r=="number"){const s=String(r);t.push(s),n.add(s)}return e.id&&!n.has(e.id)&&t.push(e.id),t}function Z1(e,t,n,r,s){const a={model:e.selectedModel,session_id:e.sessionId??void 0,messages:[{role:"user",content:t,client_message_id:r}],metadata:{client_assistant_message_id:s,client_parent_message_id:r}};if(n.enabled){const o={id:"web"};n.engine&&(o.engine=n.engine),n.maxResults!==null&&n.maxResults!==void 0&&(o.max_results=n.maxResults);const i=n.searchPrompt.trim();i&&(o.search_prompt=i),a.plugins=[o],n.contextSize&&(a.web_search_options={search_context_size:n.contextSize})}return a}function K1(){const e=jt({...bl});let t=null;function n(...p){for(const k of p)if(typeof k=="string"&&k)return k;return null}async function r(p){const k=p.text??"",C=(p.attachments??[]).map(I=>({...I})),y=k.trim(),A=rt(e);if(A.isStreaming&&t?.abort(),!y&&C.length===0)return;const E=Js("user"),_=Js("assistant"),T=z1(y,C),w=Vo(T),F=C,W=Qc.current,U=Z1(A,T,W,E,_),D=new Date().toISOString();e.update(I=>({...I,messages:[...I.messages,{id:E,role:"user",content:T,text:w.text,attachments:F,createdAt:D,createdAtUtc:D},{id:_,role:"assistant",content:"",text:"",attachments:[],pending:!0,createdAt:null,createdAtUtc:null,details:W.enabled?{webSearchConfig:{engine:W.engine,maxResults:W.maxResults,contextSize:W.contextSize,searchPrompt:W.searchPrompt}}:void 0}],isStreaming:!0,error:null}));const N=new AbortController;t=N;const G=new Map;try{await j1(U,{signal:N.signal,onSession(I){e.update(Y=>({...Y,sessionId:I}))},onNotice(I){if(console.log("[NOTICE] Received notice:",I),!I||typeof I!="object"){console.warn("[NOTICE] Invalid payload:",I);return}const Y=I.type;console.log("[NOTICE] Notice type:",Y),console.log("[NOTICE] No handler for notice type:",Y)},onMessageDelta({text:I,fragments:Y,reasoningSegments:Z,hasReasoningPayload:X,chunk:fe}){e.update(ne=>{const ue=ne.messages.map(L=>{if(L.id!==_)return L;const j=G1(L.content,L.text,I,Y,ne.sessionId),ce=j.attachments.length>0?j.attachments:L.attachments,ge={...L,content:j.content,text:j.text,attachments:ce??[]};if(Z.length>0||X){const z=L.details??{},J={...z,reasoningStatus:"streaming"};Z.length>0&&(J.reasoning=U1(z.reasoning,Z)),ge.details=J}const K=fe?Gr(fe):[];if(K.length>0){let z=ge.details;z||(z=L.details?{...L.details}:{});const J=Gr(z?.citations??null,K);J.length>0&&(z.citations=J,ge.details=z)}return ge});return{...ne,messages:ue}})},onMetadata(I){e.update(Y=>{const Z=Y.messages.map(X=>{if(X.id!==_)return X;const fe=X.details??{},ne=xu(I.reasoning),ue=ne.length>0;let L=fe.reasoning;ue&&(L=_l(ne)>=_l(fe.reasoning)?ne:fe.reasoning??ne);const j=ue?X.pending?"streaming":"complete":fe.reasoningStatus??null,ce=typeof I.message_id=="number"?I.message_id:fe.serverMessageId??null;let ge=fe.meta??null,K=fe.citations??null;if(I.meta===null)ge=null,K=null;else if(V1(I.meta)){ge=I.meta;const _e=Gr(I.meta,I);_e.length>0&&(K=_e)}else{const _e=Gr(I);_e.length>0&&(K=_e)}const z=n(I.created_at,I.created_at_utc,X.createdAt??null),J=n(I.created_at_utc,X.createdAtUtc??null);return{...X,details:{...fe,model:typeof I.model=="string"?I.model:fe.model??null,finishReason:typeof I.finish_reason=="string"?I.finish_reason:fe.finishReason??null,reasoning:L,reasoningStatus:j,usage:I.usage&&typeof I.usage=="object"?I.usage:fe.usage??null,routing:I.routing&&typeof I.routing=="object"?I.routing:fe.routing??null,toolCalls:Array.isArray(I.tool_calls)?I.tool_calls:fe.toolCalls??null,generationId:typeof I.generation_id=="string"?I.generation_id:fe.generationId??null,serverMessageId:ce,meta:ge,citations:K},createdAt:z,createdAtUtc:J}});return{...Y,messages:Z}})},onToolEvent(I){const Y=typeof I.call_id=="string"?I.call_id:Js("tool"),Z=typeof I.status=="string"?I.status:"started",X=typeof I.name=="string"?I.name:"tool",fe=I.result,ne=typeof fe=="string"?fe:fe&&typeof fe=="object"?JSON.stringify(fe):null,ue=typeof I.message_id=="number"?I.message_id:null,L=I.content,j=rt(e);let ce,ge,K=[];if(Array.isArray(L)){const J=Vo(L);K=hd(J.parts,j.sessionId),ce=L,ge=J.text}else Z==="started"?(ce=`Running ${X}â¦`,ge=`Running ${X}â¦`):(ce=ne??`Tool ${X} responded.`,ge=ne??`Tool ${X} responded.`);let z=G.get(Y);if(z)e.update(J=>{const _e=J.messages.map(oe=>{if(oe.id!==z)return oe;const be={...oe.details??{},toolName:X,toolStatus:Z,toolResult:ne??oe.details?.toolResult??null,serverMessageId:ue??oe.details?.serverMessageId??null},te=n(I.created_at,I.created_at_utc,oe.createdAt??null),Te=n(I.created_at_utc,oe.createdAtUtc??null);return{...oe,content:ce,text:ge,attachments:K.length>0?K:oe.attachments??[],pending:Z==="started",details:be,createdAt:te,createdAtUtc:Te??te??oe.createdAtUtc??null}});return{...J,messages:_e}});else{z=Js("tool"),G.set(Y,z);const J=new Date().toISOString(),_e=n(I.created_at,I.created_at_utc,J),oe=n(I.created_at_utc,_e??J);e.update(be=>({...be,messages:[...be.messages,{id:z,role:"tool",content:ce,text:ge,attachments:K,pending:Z==="started",details:{toolName:X,toolStatus:Z,toolResult:ne??null,serverMessageId:ue},createdAt:_e,createdAtUtc:oe}]}))}},onDone(){e.update(I=>{const Y=I.messages.map(Z=>{if(Z.id!==_)return Z;const X=Z.details?{...Z.details,reasoningStatus:Z.details.reasoning?"complete":Z.details.reasoningStatus??null}:void 0,fe=new Date().toISOString(),ne=Z.createdAt??fe;return{...Z,pending:!1,details:X,createdAt:ne,createdAtUtc:Z.createdAtUtc??ne}});return{...I,isStreaming:!1,messages:Y}})},onError(I){console.error("Chat stream error",I),e.update(Y=>({...Y,isStreaming:!1,error:I.message??"Unknown error",messages:Y.messages.filter(Z=>Z.id!==_&&!(Z.role==="tool"&&Z.pending))}))}})}catch(I){if(I instanceof DOMException&&I.name==="AbortError")return;const Y=I instanceof Error?I.message:String(I);e.update(Z=>({...Z,isStreaming:!1,error:Y,messages:Z.messages.filter(X=>X.id!==_&&!(X.role==="tool"&&X.pending))}))}finally{t=null}}function s(){t&&(t.abort(),t=null,e.update(p=>{const k=p.messages.filter(C=>!(C.role==="assistant"&&C.pending&&!C.text||C.role==="tool"&&C.pending));return{...p,isStreaming:!1,messages:k}}))}function a(){t?.abort(),t=null,e.update(p=>({...bl,selectedModel:p.selectedModel}))}function o(p,k){const C=p.messages.findIndex(_=>_.id===k);if(C===-1)return p;const y=p.messages.slice(),A=[],[E]=y.splice(C,1);if(!E)return p;if(E.role==="assistant")for(A.push(E.id);C<y.length&&y[C].role==="tool";)y.splice(C,1);else if(E.role==="user")for(;C<y.length&&y[C].role!=="user"&&y[C].role!=="system";){const[_]=y.splice(C,1);_?.role==="assistant"&&_.id&&A.push(_.id)}return{...p,messages:y}}async function i(p,k){let C=null;const y=new Set;for(const A of k){if(A.role==="assistant"||A.role==="tool")continue;const E=yl(A);let _=!1;for(const T of E)if(!(!T||y.has(T))){y.add(T);try{await sl(p,T),_=!0;break}catch(w){if(w instanceof Zn&&w.status===404)continue;C||(C=w instanceof Error?w.message:"Failed to delete previous message.");break}}}return C}async function l(p){const k=rt(e);if(k.isStreaming)return;const C=k.messages.find(y=>y.id===p);if(C){if(k.sessionId){const y=yl(C);let A=null;for(const E of y)try{await sl(k.sessionId,E),A=null;break}catch(_){if(_ instanceof Zn&&_.status===404)continue;A=_ instanceof Error?_.message:"Failed to delete message.";break}A&&e.update(E=>({...E,error:A}))}e.update(y=>o(y,p))}}async function c(p){const k=rt(e),C=k.messages.findIndex(_=>_.id===p);if(C===-1)return;const y=k.messages[C];if(y.role!=="user")return;k.isStreaming&&(t?.abort(),t=null);const A=k.messages.slice(C),E=k.messages.slice(0,C);if(e.update(_=>({..._,messages:E,isStreaming:!1,error:null})),k.sessionId){const _=await i(k.sessionId,A);_&&e.update(T=>({...T,error:_}))}await r({text:y.text,attachments:(y.attachments??[]).map(_=>({..._}))})}async function f(p,k){const C=k.trim();if(!C)return;const y=rt(e),A=y.messages.findIndex(w=>w.id===p);if(A===-1)return;const E=y.messages[A];if(E.role!=="user")return;y.isStreaming&&(t?.abort(),t=null);const _=y.messages.slice(A),T=y.messages.slice(0,A);if(e.update(w=>({...w,messages:T,isStreaming:!1,error:null})),y.sessionId){const w=await i(y.sessionId,_);w&&e.update(F=>({...F,error:w}))}await r({text:C,attachments:(E.attachments??[]).map(w=>({...w}))})}function d(){e.update(p=>({...p,error:null}))}function v(p){e.update(k=>({...k,selectedModel:p}));try{Jt.clearErrors(),Jt.load(p)}catch{}}function h(){const p=rt(e);if(p.sessionId)return p.sessionId;const k=Js("session");return e.update(C=>({...C,sessionId:k})),k}return{subscribe:e.subscribe,sendMessage:r,cancelStream:s,clearConversation:a,deleteMessage:l,retryMessage:c,editMessage:f,clearError:d,setModel:v,ensureSessionId:h}}const _a=K1();var Y1=M('<span class="chip-status svelte-1ct3ltt">Uploadingâ¦</span>'),J1=M('<span class="chip-status svelte-1ct3ltt"> </span>'),X1=M('<div><img alt="Attachment preview" loading="lazy" class="svelte-1ct3ltt"/> <!> <!> <button type="button" class="remove-attachment svelte-1ct3ltt" aria-label="Remove image">Ã</button></div>'),Q1=M('<div class="attachment-strip svelte-1ct3ltt"></div>'),eh=M('<div class="composer-error svelte-1ct3ltt" role="alert"> </div>'),th=M('<div class="composer-error voice svelte-1ct3ltt" role="alert"> </div>'),nh=M('<button type="button" class="stop-inline svelte-1ct3ltt"><span aria-hidden="true" class="stop-indicator svelte-1ct3ltt"></span> Stop</button>'),rh=M('<form class="composer svelte-1ct3ltt"><div class="composer-content svelte-1ct3ltt"><!> <!> <!> <div class="input-shell svelte-1ct3ltt"><button type="button" class="icon-button leading svelte-1ct3ltt" aria-label="Attach image"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 2v14M2 9h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <input class="sr-only svelte-1ct3ltt" type="file" accept="image/png,image/jpeg,image/webp,image/gif" multiple/> <textarea rows="1" class="svelte-1ct3ltt"></textarea> <div class="composer-actions svelte-1ct3ltt"><!> <button type="button" class="icon-button svelte-1ct3ltt" aria-label="Start dictation" title="Start dictation"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 3a2 2 0 0 1 2 2v4a2 2 0 1 1-4 0V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.5"></path><path d="M5 8.5a4 4 0 0 0 8 0M9 12.5V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button type="submit" class="send-button svelte-1ct3ltt" title="Send message"><span class="send-label svelte-1ct3ltt">Send</span> <!></button></div></div></div></form>');function sh(e,t){vt(t,!1);const n=()=>ht(pd,"$speechState",r),[r,s]=Kn(),a=$(),o=$(),i=$(),l=$(),c=$(),f=$(),d=$(),v=$();let h=se(t,"prompt",12,""),p=se(t,"isStreaming",8,!1),k=se(t,"presetAttachments",24,()=>[]);const C=Ht(),y=new Set(["image/png","image/jpeg","image/webp","image/gif"]),A=10*1024*1024,E=4;let _=$([]),T=$(null),w=$(null),F=$(null),W=$(null);function U(){return globalThis.crypto?.randomUUID?`attachment_${globalThis.crypto.randomUUID().replace(/-/g,"")}`:`attachment_${Date.now().toString(36)}${Math.random().toString(36).slice(2,10)}`}function D(re){if(!(!re||typeof re!="string")&&re.startsWith("blob:"))try{URL.revokeObjectURL(re)}catch{}}function N(re){if(j(),!re||re.length===0){b(T,null);return}const Ee=[];for(const ze of re){if(!ze)continue;const q=ze.displayUrl??ze.deliveryUrl??null;q&&Ee.push({id:ze.id??U(),file:null,previewUrl:q,status:"ready",resource:{...ze,metadata:ze.metadata?{...ze.metadata}:null}})}b(_,Ee),b(T,null)}function G(){if(p())return;const re=h().trim();if(u(_).some(le=>le.status==="uploading")){b(T,"Please wait for uploads to finish.");return}if(u(_).some(le=>le.status==="error")){b(T,"Remove failed uploads before sending.");return}const q=u(_).filter(le=>le.status==="ready"&&le.resource).map(le=>le.resource);!re&&q.length===0||(C("submit",{text:re,attachments:q}),h(""),b(T,null),j())}function I(re){re.key==="Enter"&&!re.shiftKey&&(re.preventDefault(),G())}function Y(){C("cancel")}function Z(){p()&&n().mode!=="dictation"||n().connecting&&!n().recording&&n().mode!=="dictation"||C("startDictation")}function X(){typeof window>"u"||!u(F)||window.setTimeout(()=>{u(F)?.scrollIntoView({block:"nearest",inline:"nearest"})},80)}function fe(){p()||(b(T,null),u(w)?.click())}function ne(re){const Ee=re.target,ze=Ee.files?Array.from(Ee.files):[];if(Ee.value="",!ze.length)return;const q=E-u(_).length;if(q<=0){b(T,`You can attach up to ${E} images.`);return}const le=_a.ensureSessionId(),Q=ze.slice(0,q);ze.length>q&&b(T,`Only ${E} images allowed per message.`);for(const ae of Q){if(!y.has(ae.type)){b(T,"Unsupported image format.");continue}if(ae.size>A){b(T,"Images must be 10 MB or less.");continue}const Pe=URL.createObjectURL(ae),Ue={id:U(),file:ae,previewUrl:Pe,status:"uploading"};b(_,[...u(_),Ue]),ue(Ue,le)}}async function ue(re,Ee){if(re.file)try{const{attachment:ze}=await dp(re.file,Ee);b(_,u(_).map(q=>q.id===re.id?{...q,status:"ready",resource:ze}:q))}catch(ze){const q=ze instanceof Error?ze.message:"Failed to upload image.";b(_,u(_).map(le=>le.id===re.id?{...le,status:"error",error:q}:le))}}function L(re){b(_,u(_).filter(Ee=>Ee.id===re?(D(Ee.previewUrl),!1):!0)),u(_).length||b(T,null)}function j(){u(_).forEach(re=>{D(re.previewUrl)}),b(_,[])}Os(()=>{j()}),ve(()=>R(h()),()=>{b(a,h().trim())}),ve(()=>u(_),()=>{b(o,u(_).some(re=>re.status==="uploading"))}),ve(()=>u(_),()=>{b(i,u(_).some(re=>re.status==="error"))}),ve(()=>u(_),()=>{b(l,u(_).some(re=>re.status==="ready"))}),ve(()=>(R(p()),u(o),u(i),u(a),u(l)),()=>{b(c,p()||u(o)||u(i)||!u(a)&&!u(l))}),ve(()=>(R(k()),u(W)),()=>{k()!==u(W)&&(N(k()),b(W,k()))}),ve(()=>n(),()=>{b(f,n().mode==="dictation"&&(n().recording||n().connecting))}),ve(()=>n(),()=>{b(d,n().connecting&&!n().recording)}),ve(()=>n(),()=>{b(v,n().error)}),Zt(),bt();var ce=rh(),ge=g(ce),K=g(ge);{var z=re=>{var Ee=Q1();Dt(Ee,5,()=>u(_),ze=>ze.id,(ze,q)=>{var le=X1();let Q;var ae=g(le),Pe=x(ae,2);{var Ue=qe=>{var at=Y1();S(qe,at)};O(Pe,qe=>{u(q),m(()=>u(q).status==="uploading")&&qe(Ue)})}var Se=x(Pe,2);{var Ve=qe=>{var at=J1(),Ye=g(at);H(()=>V(Ye,(u(q),m(()=>u(q).error??"Upload failed.")))),S(qe,at)};O(Se,qe=>{u(q),m(()=>u(q).status==="error")&&qe(Ve)})}var He=x(Se,2);H(qe=>{Q=zt(le,1,"attachment-chip svelte-1ct3ltt",null,Q,qe),de(ae,"src",(u(q),m(()=>u(q).previewUrl??u(q).resource?.displayUrl??u(q).resource?.deliveryUrl??"")))},[()=>({uploading:u(q).status==="uploading",error:u(q).status==="error"})]),B("click",He,()=>L(u(q).id)),S(ze,le)}),S(re,Ee)};O(K,re=>{u(_),m(()=>u(_).length)&&re(z)})}var J=x(K,2);{var _e=re=>{var Ee=eh(),ze=g(Ee);H(()=>V(ze,u(T))),S(re,Ee)};O(J,re=>{u(T)&&re(_e)})}var oe=x(J,2);{var be=re=>{var Ee=th(),ze=g(Ee);H(()=>V(ze,u(v))),S(re,Ee)};O(oe,re=>{u(v)&&re(be)})}var te=x(oe,2),Te=g(te),$e=x(Te,2);zr($e,re=>b(w,re),()=>u(w));var Re=x($e,2);zr(Re,re=>b(F,re),()=>u(F)),zn(()=>sr(Re,h)),zn(()=>B("keydown",Re,I)),zn(()=>B("focus",Re,X)),rs(Re,(re,Ee)=>v1?.(re,Ee),h);var Xe=x(Re,2),Fe=g(Xe);{var Qe=re=>{var Ee=nh();B("click",Ee,Y),S(re,Ee)};O(Fe,re=>{p()&&re(Qe)})}var he=x(Fe,2),ke=x(he,2),Ne=x(g(ke),2);p1(Ne,{size:16,"aria-hidden":"true","stroke-width":2}),H(()=>{Te.disabled=(R(p()),u(_),m(()=>p()||u(_).length>=E)),de(Re,"placeholder",p()?"Waiting for responseâ¦":"Type hereâ¦"),de(Re,"aria-disabled",p()),he.disabled=p()&&!u(f)||u(d)&&!u(f),de(he,"aria-pressed",u(f)?"true":"false"),de(he,"data-active",u(f)?"true":"false"),ke.disabled=u(c)}),B("click",Te,fe),B("change",$e,ne),B("click",he,Z),B("submit",ce,hi(G)),S(e,ce),gt(),s()}var ah=M('<div><button type="button" class="model-settings-backdrop"></button> <div role="dialog" aria-modal="true" tabindex="-1"><header class="model-settings-header"><div class="model-settings-heading"><!></div> <div class="model-settings-actions"><!> <button type="button" class="btn btn-ghost btn-small">Close</button></div></header> <section><!></section> <!></div></div>');function wr(e,t){vt(t,!1);let n=se(t,"open",8,!1),r=se(t,"labelledBy",8,null),s=se(t,"modalClass",8,""),a=se(t,"bodyClass",8,""),o=se(t,"layerClass",8,""),i=se(t,"closeLabel",8,"Close modal"),l=se(t,"closeOnBackdrop",8,!0),c=se(t,"focusOnOpen",8,!0),f=se(t,"closeDisabled",8,!1);const d=Ht();let v=$(null),h=$(!1);function p(_){!l()||f()||_.target===_.currentTarget&&d("close")}function k(){f()||d("close")}function C(_){!n()||f()||_.key==="Escape"&&(_.preventDefault(),d("close"))}ve(()=>(R(n()),u(h),R(c()),u(v)),()=>{n()&&!u(h)?(b(h,!0),c()&&u(v)&&u(v).focus()):!n()&&u(h)&&b(h,!1)}),Zt(),bt();var y=xe();B("keydown",vu,C);var A=pe(y);{var E=_=>{var T=ah(),w=g(T),F=x(w,2),W=g(F),U=g(W),D=g(U);hn(D,t,"heading",{});var N=x(U,2),G=g(N);hn(G,t,"actions",{});var I=x(G,2),Y=x(W,2),Z=g(Y);hn(Z,t,"default",{});var X=x(Y,2);hn(X,t,"footer",{}),zr(F,fe=>b(v,fe),()=>u(v)),H((fe,ne,ue)=>{zt(T,1,fe),de(w,"aria-label",i()),zt(F,1,ne),de(F,"aria-labelledby",r()||void 0),de(I,"aria-label",i()),I.disabled=f(),zt(Y,1,ue)},[()=>uu((R(o()),m(()=>`model-settings-layer ${o()}`.trim()))),()=>uu((R(s()),m(()=>`model-settings-modal ${s()}`.trim()))),()=>uu((R(a()),m(()=>`model-settings-body ${a()}`.trim())))]),B("click",w,p),B("click",I,k),S(_,T)};O(A,_=>{n()&&_(E)})}S(e,y),gt()}var uh=M('<p class="status">Loadingâ¦</p>'),oh=M('<p class="status error"> </p>'),ih=M('<pre class="svelte-1uwhn5q"> </pre>'),lh=M('<div class="generation-detail-row svelte-1uwhn5q"><dt class="svelte-1uwhn5q"> </dt> <dd class="svelte-1uwhn5q"><!></dd></div>'),ch=M('<dl class="generation-modal-details svelte-1uwhn5q"></dl>'),dh=M('<p class="status">No details available.</p>'),fh=M('<p class="model-settings-subtitle"> </p>'),ph=M('<h2 id="generation-modal-title">Generation details</h2> <!>',1);function hh(e,t){vt(t,!1);const n=Ht();let r=se(t,"open",8,!1),s=se(t,"generationId",8,null),a=se(t,"loading",8,!1),o=se(t,"error",8,null),i=se(t,"data",8,null),l=se(t,"fields",8,Xc),c=$([]);function f(){n("close")}ve(()=>(R(i()),R(l()),ol),()=>{b(c,i()?l().map(p=>({field:p,display:ol(i()?.[p.key])})):[])}),Zt(),bt();var d=xe(),v=pe(d);{var h=p=>{wr(p,{get open(){return r()},labelledBy:"generation-modal-title",modalClass:"generation-modal",closeLabel:"Close generation details",$$events:{close:f},children:(k,C)=>{var y=xe(),A=pe(y);{var E=T=>{var w=uh();S(T,w)},_=T=>{var w=xe(),F=pe(w);{var W=D=>{var N=oh(),G=g(N);H(()=>V(G,o())),S(D,N)},U=D=>{var N=xe(),G=pe(N);{var I=Z=>{var X=ch();Dt(X,5,()=>u(c),fe=>fe.field.key,(fe,ne)=>{var ue=lh(),L=g(ue),j=g(L),ce=x(L,2),ge=g(ce);{var K=J=>{var _e=ih(),oe=g(_e);H(()=>V(oe,(u(ne),m(()=>u(ne).display.text)))),S(J,_e)},z=J=>{var _e=kn();H(()=>V(_e,(u(ne),m(()=>u(ne).display.text)))),S(J,_e)};O(ge,J=>{u(ne),m(()=>u(ne).display.isMultiline)?J(K):J(z,!1)})}H(()=>V(j,(u(ne),m(()=>u(ne).field.label)))),S(fe,ue)}),S(Z,X)},Y=Z=>{var X=dh();S(Z,X)};O(G,Z=>{i()?Z(I):Z(Y,!1)},!0)}S(D,N)};O(F,D=>{o()?D(W):D(U,!1)},!0)}S(T,w)};O(A,T=>{a()?T(E):T(_,!1)})}S(k,y)},$$slots:{default:!0,heading:(k,C)=>{var y=ph(),A=x(pe(y),2);{var E=_=>{var T=fh(),w=g(T);H(()=>V(w,`ID: ${s()??""}`)),S(_,T)};O(A,_=>{s()&&_(E)})}S(k,y)}}})};O(v,p=>{r()&&p(h)})}S(e,d),gt()}var mh=M('<span class="editor-status svelte-hszu4t">Updated</span>'),vh=M('<form class="message-editor svelte-hszu4t"><div class="editor-shell svelte-hszu4t"><div class="editor-header svelte-hszu4t"><span>Edit message</span> <!></div> <textarea rows="3" placeholder="Update your message..." class="svelte-hszu4t"></textarea> <div class="editor-actions svelte-hszu4t"><button type="button" class="button secondary svelte-hszu4t">Cancel</button> <button type="submit" class="button primary svelte-hszu4t"><!></button></div></div></form>');function gh(e,t){vt(t,!1);const n=$(),r=$(),s=$();let a=se(t,"value",12,""),o=se(t,"originalValue",8,""),i=se(t,"saving",8,!1),l=se(t,"disabled",8,!1);const c=Ht();let f=$(null);Fa(()=>{u(f)&&(u(f).focus(),u(f).setSelectionRange(0,u(f).value.length))});function d(){u(r)&&c("submit",{text:u(n)})}function v(){i()||c("cancel")}function h(D){D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),d())}ve(()=>R(a()),()=>{b(n,a().trim())}),ve(()=>(u(n),R(i()),R(l())),()=>{b(r,!!u(n)&&!i()&&!l())}),ve(()=>(u(n),R(o())),()=>{b(s,u(n)!==o().trim())}),Zt(),bt();var p=vh(),k=g(p),C=g(k),y=x(g(C),2);{var A=D=>{var N=mh();S(D,N)};O(y,D=>{u(s)&&D(A)})}var E=x(C,2);zr(E,D=>b(f,D),()=>u(f));var _=x(E,2),T=g(_),w=x(T,2),F=g(w);{var W=D=>{var N=kn("Sendingâ¦");S(D,N)},U=D=>{var N=kn("Save & Send");S(D,N)};O(F,D=>{i()?D(W):D(U,!1)})}H(()=>{E.disabled=i()||l(),T.disabled=i(),w.disabled=!u(r)}),sr(E,a),B("keydown",E,h),B("click",T,v),B("submit",p,hi(d)),S(e,p),gt()}const xl={open:!1,messageId:null,citations:[]};function md(){const{subscribe:e,set:t,update:n}=jt(xl);function r(a,o){t({open:!0,messageId:a,citations:o})}function s(){t(xl)}return{subscribe:e,openWithCitations:r,close:s}}md();const fo={open:!1,messageId:null,segments:[],status:null};function _h(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n],s=t[n];if(r.text!==s.text||r.type!==s.type)return!1}return!0}function bh(){const{subscribe:e,set:t,update:n}=jt(fo);function r(i,l,c){t({open:!0,messageId:i,segments:l??[],status:c??null})}function s(i){r(i.id,i.details?.reasoning,i.details?.reasoningStatus)}function a(){t(fo)}function o(i){n(l=>{if(!l.open||!l.messageId)return l;const c=i.find(v=>v.id===l.messageId);if(!c)return fo;const f=c.details?.reasoning??[],d=c.details?.reasoningStatus??null;return _h(f,l.segments)&&d===l.status?l:{...l,segments:f,status:d}})}return{subscribe:e,openWithDetails:r,openForMessage:s,close:a,syncFromMessages:o}}const vd="tool",yh=["prompt_tokens","input_tokens","prompt","input","promptTokens","inputTokens"],xh=["completion_tokens","output_tokens","completion","output","completionTokens","outputTokens"],kh=["total_tokens","total","totalTokens"];function wh(e,t=vd){const n=[],r={},s={};for(let a=0;a<e.length;a+=1){const o=e[a];if(s[o.id]=a,o.role==="assistant"){const i=o.details?.toolCalls,l=Array.isArray(i)&&i.length>0;let c=0,f=a+1;for(;gd(e[f],t);)c+=1,f+=1;const d=l?i.length:0,v=Math.max(d,c),h=v>0,p=Sh(o.details?.usage);r[o.id]={used:h,count:v,tokens:p}}o.role!==t&&n.push(o)}return{visibleMessages:n,assistantToolUsage:r,messageIndexMap:s}}function kl(e,t,n,r=vd){const s=t[n];if(typeof s!="number")return[];const a=e[s];if(!a||a.role!=="assistant")return[];const o=[],i=Array.isArray(a.details?.toolCalls)?a.details?.toolCalls:[];let l=s+1;for(;gd(e[l],r);){const c=e[l],f=c.details??{},d=i[o.length],h=(typeof f?.toolName=="string"?f.toolName:null)??po(d)??"Tool",p=typeof f?.toolStatus=="string"?f.toolStatus:null,k=typeof f?.toolResult=="string"?f.toolResult:null,C=typeof c.content=="string"?c.content:null,y=k??C??ho(d),A=mo(d);o.push({id:c.id,name:h,status:p,input:A,result:y}),l+=1}return o.length===0&&i.length>0?i.forEach((c,f)=>{o.push({id:`${a.id}-metadata-${f}`,name:po(c)??`Tool ${f+1}`,status:null,input:mo(c),result:ho(c)})}):o.length>0&&i.length>0&&o.forEach((c,f)=>{const d=i[f];d&&((!c.name||c.name==="Tool")&&(c.name=po(d)??c.name),c.input||(c.input=mo(d)),c.result||(c.result=ho(d)))}),o}function gd(e,t){return e?.role===t}function po(e){if(!e)return null;const t=e.name;if(typeof t=="string"&&t.trim().length>0)return t;const n=e.function;if(n&&typeof n=="object"){const r=n.name;if(typeof r=="string"&&r.trim().length>0)return r}return null}function ho(e){if(!e)return null;const t=e.result;if(typeof t=="string")return t;if(t&&typeof t=="object")try{return JSON.stringify(t,null,2)}catch(r){console.warn("Failed to stringify tool result",r)}const n=e.function;if(n&&typeof n=="object"){const r=n.arguments;if(typeof r=="string")return r;if(r&&typeof r=="object")try{return JSON.stringify(r,null,2)}catch(s){console.warn("Failed to stringify tool arguments",s)}}return null}function mo(e){if(!e)return null;const t=e.arguments,n=wl(t);if(n)return n;const r=e.function;if(r&&typeof r=="object"){const s=wl(r.arguments);if(s)return s}return null}function Sh(e){if(!e||typeof e!="object")return null;const t=e,n=vo(t,yh),r=vo(t,xh);let s=vo(t,kh);return s==null&&(n!=null||r!=null)&&(s=(n??0)+(r??0)),n==null&&r==null&&s==null?null:{inputTokens:n,outputTokens:r,totalTokens:s}}function vo(e,t){for(const n of t){if(!(n in e))continue;const r=Eh(e[n]);if(r!=null)return r}return null}function Eh(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function wl(e){if(typeof e=="string"){const t=e.trim();if(!t)return null;try{const n=JSON.parse(t);return typeof n=="string"?n:JSON.stringify(n,null,2)}catch{return t}}if(e&&typeof e=="object")try{return JSON.stringify(e,null,2)}catch(t){console.warn("Failed to stringify tool arguments",t,e)}return null}const Sl={open:!1,messageId:null,tools:[]};function Ch(){const{subscribe:e,set:t,update:n}=jt(Sl);function r(i,l){t({open:!0,messageId:i,tools:l})}function s(i,l,c,f){const d=kl(i,l,c,f);r(c,d)}function a(){t(Sl)}function o(i,l,c){n(f=>{if(!f.open||!f.messageId)return f;const d=kl(i,l,f.messageId,c);return d.length===f.tools.length&&d.every((h,p)=>{const k=f.tools[p];return k?.id===h.id&&k?.name===h.name&&k?.status===h.status&&k?.input===h.input&&k?.result===h.result})?f:{...f,tools:d}})}return{subscribe:e,openWithEntries:r,openForMessage:s,close:a,syncEntries:o}}const El={open:!1,messageId:null,details:null};function Ah(){const{subscribe:e,set:t,update:n}=jt(El);function r(o,i){t({open:!0,messageId:o,details:i??{engine:null,maxResults:null,contextSize:null,searchPrompt:null}})}function s(o){const i=o.details?.webSearchConfig;if(i&&typeof i=="object"){const l={engine:i.engine??null,maxResults:i.maxResults??null,contextSize:i.contextSize??null,searchPrompt:i.searchPrompt??null};r(o.id,l)}else r(o.id,null)}function a(){t(El)}return{subscribe:e,openWithDetails:r,openForMessage:s,close:a}}var Th=M('<p class="status svelte-15rpl30">No web citations found.</p>'),Dh=M('<h3 class="citations-modal-title svelte-15rpl30"> </h3>'),Fh=M('<p class="citations-modal-content svelte-15rpl30"> </p>'),Mh=M("<span> </span>"),Ph=M("<span> </span>"),Ih=M('<div class="citations-modal-meta svelte-15rpl30"><!> <!></div>'),Nh=M('<li class="citations-modal-item svelte-15rpl30"><div class="citations-modal-header svelte-15rpl30"><span class="citations-modal-number svelte-15rpl30"></span> <a class="citations-modal-link svelte-15rpl30" target="_blank" rel="noreferrer">Visit source</a></div> <!> <div class="citations-modal-url svelte-15rpl30"> </div> <!> <!></li>'),Lh=M('<ul class="citations-modal-list svelte-15rpl30"></ul>'),Oh=M('<p class="model-settings-subtitle"> </p>'),$h=M('<h2 id="citations-modal-title">Web Citations</h2> <!>',1);function Rh(e,t){vt(t,!1);const n=Ht();let r=se(t,"open",8,!1),s=se(t,"messageId",8,null),a=se(t,"citations",24,()=>[]);function o(){n("close")}bt();var i=xe(),l=pe(i);{var c=f=>{wr(f,{get open(){return r()},labelledBy:"citations-modal-title",modalClass:"citations-modal",bodyClass:"citations-modal-body",closeLabel:"Close web citations",$$events:{close:o},children:(d,v)=>{var h=xe(),p=pe(h);{var k=y=>{var A=Th();S(y,A)},C=y=>{var A=Lh();Dt(A,5,a,rr,(E,_,T)=>{var w=Nh(),F=g(w),W=g(F);W.textContent=`Citation ${T+1}`;var U=x(W,2),D=x(F,2);{var N=ne=>{var ue=Dh(),L=g(ue);H(()=>V(L,(u(_),m(()=>u(_).title)))),S(ne,ue)};O(D,ne=>{u(_),m(()=>u(_).title)&&ne(N)})}var G=x(D,2),I=g(G),Y=x(G,2);{var Z=ne=>{var ue=Fh(),L=g(ue);H(()=>V(L,(u(_),m(()=>u(_).content)))),S(ne,ue)};O(Y,ne=>{u(_),m(()=>u(_).content)&&ne(Z)})}var X=x(Y,2);{var fe=ne=>{var ue=Ih(),L=g(ue);{var j=K=>{var z=Mh(),J=g(z);H(()=>V(J,`Start: ${u(_),m(()=>u(_).startIndex)??""}`)),S(K,z)};O(L,K=>{u(_),m(()=>u(_).startIndex!==void 0)&&K(j)})}var ce=x(L,2);{var ge=K=>{var z=Ph(),J=g(z);H(()=>V(J,`End: ${u(_),m(()=>u(_).endIndex)??""}`)),S(K,z)};O(ce,K=>{u(_),m(()=>u(_).endIndex!==void 0)&&K(ge)})}S(ne,ue)};O(X,ne=>{u(_),m(()=>u(_).startIndex!==void 0||u(_).endIndex!==void 0)&&ne(fe)})}H(()=>{de(U,"href",(u(_),m(()=>u(_).url))),V(I,(u(_),m(()=>u(_).url)))}),S(E,w)}),S(y,A)};O(p,y=>{R(a()),m(()=>a().length===0)?y(k):y(C,!1)})}S(d,h)},$$slots:{default:!0,heading:(d,v)=>{var h=$h(),p=x(pe(h),2);{var k=C=>{var y=Oh(),A=g(y);H(()=>V(A,`Message ID: ${s()??""}`)),S(C,y)};O(p,C=>{s()&&C(k)})}S(d,h)}}})};O(l,f=>{r()&&f(c)})}S(e,i),gt()}const Cl='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path><path d="M16 4h2a2 2 0 0 1 2 2v4"></path><path d="M21 14H11"></path><path d="m15 10-4 4 4 4"></path></svg>',zh='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>',Bh=2e3,Uh="copy-code-button",Al="copy-code-block";function jh(e){e.classList.add(Al);const t=document.createElement("button");t.type="button",t.className=Uh,t.setAttribute("aria-label","Copy code"),t.setAttribute("title","Copy code"),t.innerHTML=Cl;let n=null;const r=async()=>{const a=e.querySelector("code")?.textContent??e.textContent??"";if(a){if(!navigator?.clipboard?.writeText){console.warn("Clipboard API unavailable; cannot copy code block");return}try{await navigator.clipboard.writeText(a)}catch(o){console.error("Failed to copy code block",o);return}n!==null&&window.clearTimeout(n),t.classList.add("copied"),t.setAttribute("aria-label","Code copied"),t.innerHTML=zh,n=window.setTimeout(()=>{e.isConnected&&(t.classList.remove("copied"),t.setAttribute("aria-label","Copy code"),t.innerHTML=Cl,n=null)},Bh)}};return t.addEventListener("click",r),e.appendChild(t),{cleanup:()=>{t.removeEventListener("click",r),n!==null&&window.clearTimeout(n),t.remove(),e.classList.remove(Al)}}}function Tl(e,t){e.querySelectorAll("pre").forEach(r=>{t.has(r)||t.set(r,jh(r))}),Array.from(t.keys()).forEach(r=>{if(!e.contains(r)){const s=t.get(r);s&&(s.cleanup(),t.delete(r))}})}function Go(e){const t=new Map,n=new MutationObserver(()=>{Tl(e,t)});return n.observe(e,{childList:!0,subtree:!0}),Tl(e,t),{destroy:()=>{n.disconnect(),Array.from(t.values()).forEach(r=>r.cleanup()),t.clear()}}}const Dl={};function qh(e){let t=Dl[e];if(t)return t;t=Dl[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function $s(e,t){typeof t!="string"&&(t=$s.defaultChars);const n=qh(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let s="";for(let a=0,o=r.length;a<o;a+=3){const i=parseInt(r.slice(a+1,a+3),16);if(i<128){s+=n[i];continue}if((i&224)===192&&a+3<o){const l=parseInt(r.slice(a+4,a+6),16);if((l&192)===128){const c=i<<6&1984|l&63;c<128?s+="ï¿½ï¿½":s+=String.fromCharCode(c),a+=3;continue}}if((i&240)===224&&a+6<o){const l=parseInt(r.slice(a+4,a+6),16),c=parseInt(r.slice(a+7,a+9),16);if((l&192)===128&&(c&192)===128){const f=i<<12&61440|l<<6&4032|c&63;f<2048||f>=55296&&f<=57343?s+="ï¿½ï¿½ï¿½":s+=String.fromCharCode(f),a+=6;continue}}if((i&248)===240&&a+9<o){const l=parseInt(r.slice(a+4,a+6),16),c=parseInt(r.slice(a+7,a+9),16),f=parseInt(r.slice(a+10,a+12),16);if((l&192)===128&&(c&192)===128&&(f&192)===128){let d=i<<18&1835008|l<<12&258048|c<<6&4032|f&63;d<65536||d>1114111?s+="ï¿½ï¿½ï¿½ï¿½":(d-=65536,s+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),a+=9;continue}}s+="ï¿½"}return s})}$s.defaultChars=";/?:@&=+$,#";$s.componentChars="";const Fl={};function Hh(e){let t=Fl[e];if(t)return t;t=Fl[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Ia(e,t,n){typeof t!="string"&&(n=t,t=Ia.defaultChars),typeof n>"u"&&(n=!0);const r=Hh(t);let s="";for(let a=0,o=e.length;a<o;a++){const i=e.charCodeAt(a);if(n&&i===37&&a+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3))){s+=e.slice(a,a+3),a+=2;continue}if(i<128){s+=r[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&a+1<o){const l=e.charCodeAt(a+1);if(l>=56320&&l<=57343){s+=encodeURIComponent(e[a]+e[a+1]),a++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[a])}return s}Ia.defaultChars=";/?:@&=+$,-_.!~*'()#";Ia.componentChars="-_.!~*'()";function wi(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function ku(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Wh=/^([a-z0-9.+-]+:)/i,Vh=/:[0-9]*$/,Gh=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Zh=["<",">",'"',"`"," ","\r",`
`,"	"],Kh=["{","}","|","\\","^","`"].concat(Zh),Yh=["'"].concat(Kh),Ml=["%","/","?",";","#"].concat(Yh),Pl=["/","?","#"],Jh=255,Il=/^[+a-z0-9A-Z_-]{0,63}$/,Xh=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Nl={javascript:!0,"javascript:":!0},Ll={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Si(e,t){if(e&&e instanceof ku)return e;const n=new ku;return n.parse(e,t),n}ku.prototype.parse=function(e,t){let n,r,s,a=e;if(a=a.trim(),!t&&e.split("#").length===1){const c=Gh.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=Wh.exec(a);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,a=a.substr(o.length)),(t||o||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(o&&Nl[o])&&(a=a.substr(2),this.slashes=!0)),!Nl[o]&&(s||o&&!Ll[o])){let c=-1;for(let p=0;p<Pl.length;p++)r=a.indexOf(Pl[p]),r!==-1&&(c===-1||r<c)&&(c=r);let f,d;c===-1?d=a.lastIndexOf("@"):d=a.lastIndexOf("@",c),d!==-1&&(f=a.slice(0,d),a=a.slice(d+1),this.auth=f),c=-1;for(let p=0;p<Ml.length;p++)r=a.indexOf(Ml[p]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=a.length),a[c-1]===":"&&c--;const v=a.slice(0,c);a=a.slice(c),this.parseHost(v),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let k=0,C=p.length;k<C;k++){const y=p[k];if(y&&!y.match(Il)){let A="";for(let E=0,_=y.length;E<_;E++)y.charCodeAt(E)>127?A+="x":A+=y[E];if(!A.match(Il)){const E=p.slice(0,k),_=p.slice(k+1),T=y.match(Xh);T&&(E.push(T[1]),_.unshift(T[2])),_.length&&(a=_.join(".")+a),this.hostname=E.join(".");break}}}}this.hostname.length>Jh&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const i=a.indexOf("#");i!==-1&&(this.hash=a.substr(i),a=a.slice(0,i));const l=a.indexOf("?");return l!==-1&&(this.search=a.substr(l),a=a.slice(0,l)),a&&(this.pathname=a),Ll[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};ku.prototype.parseHost=function(e){let t=Vh.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Qh=Object.freeze(Object.defineProperty({__proto__:null,decode:$s,encode:Ia,format:wi,parse:Si},Symbol.toStringTag,{value:"Module"})),_d=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,bd=/[\0-\x1F\x7F-\x9F]/,em=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Ei=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,yd=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,xd=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,tm=Object.freeze(Object.defineProperty({__proto__:null,Any:_d,Cc:bd,Cf:em,P:Ei,S:yd,Z:xd},Symbol.toStringTag,{value:"Module"})),nm=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(e=>e.charCodeAt(0))),rm=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(e=>e.charCodeAt(0)));var go;const sm=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),am=(go=String.fromCodePoint)!==null&&go!==void 0?go:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function um(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=sm.get(e))!==null&&t!==void 0?t:e}var ln;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ln||(ln={}));const om=32;var Nr;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Nr||(Nr={}));function Zo(e){return e>=ln.ZERO&&e<=ln.NINE}function im(e){return e>=ln.UPPER_A&&e<=ln.UPPER_F||e>=ln.LOWER_A&&e<=ln.LOWER_F}function lm(e){return e>=ln.UPPER_A&&e<=ln.UPPER_Z||e>=ln.LOWER_A&&e<=ln.LOWER_Z||Zo(e)}function cm(e){return e===ln.EQUALS||lm(e)}var un;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(un||(un={}));var Mr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Mr||(Mr={}));class dm{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=un.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Mr.Strict}startEntity(t){this.decodeMode=t,this.state=un.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case un.EntityStart:return t.charCodeAt(n)===ln.NUM?(this.state=un.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=un.NamedEntity,this.stateNamedEntity(t,n));case un.NumericStart:return this.stateNumericStart(t,n);case un.NumericDecimal:return this.stateNumericDecimal(t,n);case un.NumericHex:return this.stateNumericHex(t,n);case un.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|om)===ln.LOWER_X?(this.state=un.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=un.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const a=r-n;this.result=this.result*Math.pow(s,a)+parseInt(t.substr(n,a),s),this.consumed+=a}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Zo(s)||im(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Zo(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ln.SEMI)this.consumed+=1;else if(this.decodeMode===Mr.Strict)return 0;return this.emitCodePoint(um(this.result),this.consumed),this.errors&&(t!==ln.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],a=(s&Nr.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=fm(r,s,this.treeIndex+Math.max(1,a),o),this.treeIndex<0)return this.result===0||this.decodeMode===Mr.Attribute&&(a===0||cm(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],a=(s&Nr.VALUE_LENGTH)>>14,a!==0){if(o===ln.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Mr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&Nr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~Nr.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case un.NamedEntity:return this.result!==0&&(this.decodeMode!==Mr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case un.NumericDecimal:return this.emitNumericEntity(0,2);case un.NumericHex:return this.emitNumericEntity(0,3);case un.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case un.EntityStart:return 0}}}function kd(e){let t="";const n=new dm(e,r=>t+=am(r));return function(s,a){let o=0,i=0;for(;(i=s.indexOf("&",i))>=0;){t+=s.slice(o,i),n.startEntity(a);const c=n.write(s,i+1);if(c<0){o=i+n.end();break}o=i+c,i=c===0?o+1:o}const l=t+s.slice(o);return t="",l}}function fm(e,t,n,r){const s=(t&Nr.BRANCH_LENGTH)>>7,a=t&Nr.JUMP_TABLE;if(s===0)return a!==0&&r===a?n:-1;if(a){const l=r-a;return l<0||l>=s?-1:e[n+l]-1}let o=n,i=o+s-1;for(;o<=i;){const l=o+i>>>1,c=e[l];if(c<r)o=l+1;else if(c>r)i=l-1;else return e[l+s]}return-1}const pm=kd(nm);kd(rm);function wd(e,t=Mr.Legacy){return pm(e,t)}function hm(e){return Object.prototype.toString.call(e)}function Ci(e){return hm(e)==="[object String]"}const mm=Object.prototype.hasOwnProperty;function vm(e,t){return mm.call(e,t)}function Ou(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function Sd(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Ai(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function wu(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Ed=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,gm=/&([a-z#][a-z0-9]{1,31});/gi,_m=new RegExp(Ed.source+"|"+gm.source,"gi"),bm=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function ym(e,t){if(t.charCodeAt(0)===35&&bm.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Ai(r)?wu(r):e}const n=wd(e);return n!==e?n:e}function xm(e){return e.indexOf("\\")<0?e:e.replace(Ed,"$1")}function Rs(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(_m,function(t,n,r){return n||ym(t,r)})}const km=/[&<>"]/,wm=/[&<>"]/g,Sm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Em(e){return Sm[e]}function Br(e){return km.test(e)?e.replace(wm,Em):e}const Cm=/[.?*+^$[\]\\(){}|-]/g;function Am(e){return e.replace(Cm,"\\$&")}function Ot(e){switch(e){case 9:case 32:return!0}return!1}function ba(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ya(e){return Ei.test(e)||yd.test(e)}function xa(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function $u(e){return e=e.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(e=e.replace(/áº/g,"Ã")),e.toLowerCase().toUpperCase()}const Tm={mdurl:Qh,ucmicro:tm},Dm=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Sd,assign:Ou,escapeHtml:Br,escapeRE:Am,fromCodePoint:wu,has:vm,isMdAsciiPunct:xa,isPunctChar:ya,isSpace:Ot,isString:Ci,isValidEntityCode:Ai,isWhiteSpace:ba,lib:Tm,normalizeReference:$u,unescapeAll:Rs,unescapeMd:xm},Symbol.toStringTag,{value:"Module"}));function Fm(e,t,n){let r,s,a,o;const i=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<i;){if(a=e.src.charCodeAt(e.pos),a===93&&(r--,r===0)){s=!0;break}if(o=e.pos,e.md.inline.skipToken(e),a===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return s&&(c=e.pos),e.pos=l,c}function Mm(e,t,n){let r,s=t;const a={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(r=e.charCodeAt(s),r===10||r===60)return a;if(r===62)return a.pos=s+1,a.str=Rs(e.slice(t+1,s)),a.ok=!0,a;if(r===92&&s+1<n){s+=2;continue}s++}return a}let o=0;for(;s<n&&(r=e.charCodeAt(s),!(r===32||r<32||r===127));){if(r===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(r===40&&(o++,o>32))return a;if(r===41){if(o===0)break;o--}s++}return t===s||o!==0||(a.str=Rs(e.slice(t,s)),a.pos=s,a.ok=!0),a}function Pm(e,t,n,r){let s,a=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(a>=n)return o;let i=e.charCodeAt(a);if(i!==34&&i!==39&&i!==40)return o;t++,a++,i===40&&(i=41),o.marker=i}for(;a<n;){if(s=e.charCodeAt(a),s===o.marker)return o.pos=a+1,o.str+=Rs(e.slice(t,a)),o.ok=!0,o;if(s===40&&o.marker===41)return o;s===92&&a+1<n&&a++,a++}return o.can_continue=!0,o.str+=Rs(e.slice(t,a)),o}const Im=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Mm,parseLinkLabel:Fm,parseLinkTitle:Pm},Symbol.toStringTag,{value:"Module"})),pr={};pr.code_inline=function(e,t,n,r,s){const a=e[t];return"<code"+s.renderAttrs(a)+">"+Br(a.content)+"</code>"};pr.code_block=function(e,t,n,r,s){const a=e[t];return"<pre"+s.renderAttrs(a)+"><code>"+Br(e[t].content)+`</code></pre>
`};pr.fence=function(e,t,n,r,s){const a=e[t],o=a.info?Rs(a.info).trim():"";let i="",l="";if(o){const f=o.split(/(\s+)/g);i=f[0],l=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(a.content,i,l)||Br(a.content):c=Br(a.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=a.attrIndex("class"),d=a.attrs?a.attrs.slice():[];f<0?d.push(["class",n.langPrefix+i]):(d[f]=d[f].slice(),d[f][1]+=" "+n.langPrefix+i);const v={attrs:d};return`<pre><code${s.renderAttrs(v)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(a)}>${c}</code></pre>
`};pr.image=function(e,t,n,r,s){const a=e[t];return a.attrs[a.attrIndex("alt")][1]=s.renderInlineAsText(a.children,n,r),s.renderToken(e,t,n)};pr.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};pr.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};pr.text=function(e,t){return Br(e[t].content)};pr.html_block=function(e,t){return e[t].content};pr.html_inline=function(e,t){return e[t].content};function Hs(){this.rules=Ou({},pr)}Hs.prototype.renderAttrs=function(t){let n,r,s;if(!t.attrs)return"";for(s="",n=0,r=t.attrs.length;n<r;n++)s+=" "+Br(t.attrs[n][0])+'="'+Br(t.attrs[n][1])+'"';return s};Hs.prototype.renderToken=function(t,n,r){const s=t[n];let a="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(a+=`
`),a+=(s.nesting===-1?"</":"<")+s.tag,a+=this.renderAttrs(s),s.nesting===0&&r.xhtmlOut&&(a+=" /");let o=!1;if(s.block&&(o=!0,s.nesting===1&&n+1<t.length)){const i=t[n+1];(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===s.tag)&&(o=!1)}return a+=o?`>
`:">",a};Hs.prototype.renderInline=function(e,t,n){let r="";const s=this.rules;for(let a=0,o=e.length;a<o;a++){const i=e[a].type;typeof s[i]<"u"?r+=s[i](e,a,t,n,this):r+=this.renderToken(e,a,t)}return r};Hs.prototype.renderInlineAsText=function(e,t,n){let r="";for(let s=0,a=e.length;s<a;s++)switch(e[s].type){case"text":r+=e[s].content;break;case"image":r+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":r+=e[s].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Hs.prototype.render=function(e,t,n){let r="";const s=this.rules;for(let a=0,o=e.length;a<o;a++){const i=e[a].type;i==="inline"?r+=this.renderInline(e[a].children,t,n):typeof s[i]<"u"?r+=s[i](e,a,t,n,this):r+=this.renderToken(e,a,t,n)}return r};function Tn(){this.__rules__=[],this.__cache__=null}Tn.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Tn.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Tn.prototype.at=function(e,t,n){const r=this.__find__(e),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=s.alt||[],this.__cache__=null};Tn.prototype.before=function(e,t,n,r){const s=this.__find__(e),a=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};Tn.prototype.after=function(e,t,n,r){const s=this.__find__(e),a=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};Tn.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Tn.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};Tn.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Tn.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};Tn.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Yn(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Yn.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,s=n.length;r<s;r++)if(n[r][0]===t)return r;return-1};Yn.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Yn.prototype.attrSet=function(t,n){const r=this.attrIndex(t),s=[t,n];r<0?this.attrPush(s):this.attrs[r]=s};Yn.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Yn.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Cd(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Cd.prototype.Token=Yn;const Nm=/\r\n?|\n/g,Lm=/\0/g;function Om(e){let t;t=e.src.replace(Nm,`
`),t=t.replace(Lm,"ï¿½"),e.src=t}function $m(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Rm(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function zm(e){return/^<a[>\s]/i.test(e)}function Bm(e){return/^<\/a\s*>/i.test(e)}function Um(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,a=0;for(let o=s.length-1;o>=0;o--){const i=s[o];if(i.type==="link_close"){for(o--;s[o].level!==i.level&&s[o].type!=="link_open";)o--;continue}if(i.type==="html_inline"&&(zm(i.content)&&a>0&&a--,Bm(i.content)&&a++),!(a>0)&&i.type==="text"&&e.md.linkify.test(i.content)){const l=i.content;let c=e.md.linkify.match(l);const f=[];let d=i.level,v=0;c.length>0&&c[0].index===0&&o>0&&s[o-1].type==="text_special"&&(c=c.slice(1));for(let h=0;h<c.length;h++){const p=c[h].url,k=e.md.normalizeLink(p);if(!e.md.validateLink(k))continue;let C=c[h].text;c[h].schema?c[h].schema==="mailto:"&&!/^mailto:/i.test(C)?C=e.md.normalizeLinkText("mailto:"+C).replace(/^mailto:/,""):C=e.md.normalizeLinkText(C):C=e.md.normalizeLinkText("http://"+C).replace(/^http:\/\//,"");const y=c[h].index;if(y>v){const T=new e.Token("text","",0);T.content=l.slice(v,y),T.level=d,f.push(T)}const A=new e.Token("link_open","a",1);A.attrs=[["href",k]],A.level=d++,A.markup="linkify",A.info="auto",f.push(A);const E=new e.Token("text","",0);E.content=C,E.level=d,f.push(E);const _=new e.Token("link_close","a",-1);_.level=--d,_.markup="linkify",_.info="auto",f.push(_),v=c[h].lastIndex}if(v<l.length){const h=new e.Token("text","",0);h.content=l.slice(v),h.level=d,f.push(h)}t[n].children=s=Sd(s,o,f)}}}}const Ad=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,jm=/\((c|tm|r)\)/i,qm=/\((c|tm|r)\)/ig,Hm={c:"Â©",r:"Â®",tm:"â¢"};function Wm(e,t){return Hm[t.toLowerCase()]}function Vm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(qm,Wm)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Gm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&Ad.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Zm(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(jm.test(e.tokens[t].content)&&Vm(e.tokens[t].children),Ad.test(e.tokens[t].content)&&Gm(e.tokens[t].children))}const Km=/['"]/,Ol=/['"]/g,$l="â";function Ja(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Ym(e,t){let n;const r=[];for(let s=0;s<e.length;s++){const a=e[s],o=e[s].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,a.type!=="text")continue;let i=a.content,l=0,c=i.length;e:for(;l<c;){Ol.lastIndex=l;const f=Ol.exec(i);if(!f)break;let d=!0,v=!0;l=f.index+1;const h=f[0]==="'";let p=32;if(f.index-1>=0)p=i.charCodeAt(f.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let k=32;if(l<c)k=i.charCodeAt(l);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){k=e[n].content.charCodeAt(0);break}const C=xa(p)||ya(String.fromCharCode(p)),y=xa(k)||ya(String.fromCharCode(k)),A=ba(p),E=ba(k);if(E?d=!1:y&&(A||C||(d=!1)),A?v=!1:C&&(E||y||(v=!1)),k===34&&f[0]==='"'&&p>=48&&p<=57&&(v=d=!1),d&&v&&(d=C,v=y),!d&&!v){h&&(a.content=Ja(a.content,f.index,$l));continue}if(v)for(n=r.length-1;n>=0;n--){let _=r[n];if(r[n].level<o)break;if(_.single===h&&r[n].level===o){_=r[n];let T,w;h?(T=t.md.options.quotes[2],w=t.md.options.quotes[3]):(T=t.md.options.quotes[0],w=t.md.options.quotes[1]),a.content=Ja(a.content,f.index,w),e[_.token].content=Ja(e[_.token].content,_.pos,T),l+=w.length-1,_.token===s&&(l+=T.length-1),i=a.content,c=i.length,r.length=n;continue e}}d?r.push({token:s,pos:f.index,single:h,level:o}):v&&h&&(a.content=Ja(a.content,f.index,$l))}}}function Jm(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Km.test(e.tokens[t].content)||Ym(e.tokens[t].children,e)}function Xm(e){let t,n;const r=e.tokens,s=r.length;for(let a=0;a<s;a++){if(r[a].type!=="inline")continue;const o=r[a].children,i=o.length;for(t=0;t<i;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<i;t++)o[t].type==="text"&&t+1<i&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const _o=[["normalize",Om],["block",$m],["inline",Rm],["linkify",Um],["replacements",Zm],["smartquotes",Jm],["text_join",Xm]];function Ti(){this.ruler=new Tn;for(let e=0;e<_o.length;e++)this.ruler.push(_o[e][0],_o[e][1])}Ti.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Ti.prototype.State=Cd;function hr(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let a=0,o=0,i=0,l=0,c=s.length,f=!1;o<c;o++){const d=s.charCodeAt(o);if(!f)if(Ot(d)){i++,d===9?l+=4-l%4:l++;continue}else f=!0;(d===10||o===c-1)&&(d!==10&&o++,this.bMarks.push(a),this.eMarks.push(o),this.tShift.push(i),this.sCount.push(l),this.bsCount.push(0),f=!1,i=0,l=0,a=o+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}hr.prototype.push=function(e,t,n){const r=new Yn(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};hr.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};hr.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};hr.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ot(r))break}return t};hr.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ot(this.src.charCodeAt(--t)))return t+1;return t};hr.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};hr.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};hr.prototype.getLines=function(t,n,r,s){if(t>=n)return"";const a=new Array(n-t);for(let o=0,i=t;i<n;i++,o++){let l=0;const c=this.bMarks[i];let f=c,d;for(i+1<n||s?d=this.eMarks[i]+1:d=this.eMarks[i];f<d&&l<r;){const v=this.src.charCodeAt(f);if(Ot(v))v===9?l+=4-(l+this.bsCount[i])%4:l++;else if(f-c<this.tShift[i])l++;else break;f++}l>r?a[o]=new Array(l-r+1).join(" ")+this.src.slice(f,d):a[o]=this.src.slice(f,d)}return a.join("")};hr.prototype.Token=Yn;const Qm=65536;function bo(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Rl(e){const t=[],n=e.length;let r=0,s=e.charCodeAt(r),a=!1,o=0,i="";for(;r<n;)s===124&&(a?(i+=e.substring(o,r-1),o=r):(t.push(i+e.substring(o,r)),i="",o=r+1)),a=s===92,r++,s=e.charCodeAt(r);return t.push(i+e.substring(o)),t}function ev(e,t,n,r){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let a=e.bMarks[s]+e.tShift[s];if(a>=e.eMarks[s])return!1;const o=e.src.charCodeAt(a++);if(o!==124&&o!==45&&o!==58||a>=e.eMarks[s])return!1;const i=e.src.charCodeAt(a++);if(i!==124&&i!==45&&i!==58&&!Ot(i)||o===45&&Ot(i))return!1;for(;a<e.eMarks[s];){const _=e.src.charCodeAt(a);if(_!==124&&_!==45&&_!==58&&!Ot(_))return!1;a++}let l=bo(e,t+1),c=l.split("|");const f=[];for(let _=0;_<c.length;_++){const T=c[_].trim();if(!T){if(_===0||_===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(T))return!1;T.charCodeAt(T.length-1)===58?f.push(T.charCodeAt(0)===58?"center":"right"):T.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=bo(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Rl(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==f.length)return!1;if(r)return!0;const v=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),k=[t,0];p.map=k;const C=e.push("thead_open","thead",1);C.map=[t,t+1];const y=e.push("tr_open","tr",1);y.map=[t,t+1];for(let _=0;_<c.length;_++){const T=e.push("th_open","th",1);f[_]&&(T.attrs=[["style","text-align:"+f[_]]]);const w=e.push("inline","",0);w.content=c[_].trim(),w.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let A,E=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let _=!1;for(let w=0,F=h.length;w<F;w++)if(h[w](e,s,n,!0)){_=!0;break}if(_||(l=bo(e,s).trim(),!l)||e.sCount[s]-e.blkIndent>=4||(c=Rl(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=d-c.length,E>Qm))break;if(s===t+2){const w=e.push("tbody_open","tbody",1);w.map=A=[t+2,0]}const T=e.push("tr_open","tr",1);T.map=[s,s+1];for(let w=0;w<d;w++){const F=e.push("td_open","td",1);f[w]&&(F.attrs=[["style","text-align:"+f[w]]]);const W=e.push("inline","",0);W.content=c[w]?c[w].trim():"",W.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return A&&(e.push("tbody_close","tbody",-1),A[1]=s),e.push("table_close","table",-1),k[1]=s,e.parentType=v,e.line=s,!0}function tv(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,s=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,s=r;continue}break}e.line=s;const a=e.push("code_block","code",0);return a.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,a.map=[t,e.line],!0}function nv(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>a)return!1;const o=e.src.charCodeAt(s);if(o!==126&&o!==96)return!1;let i=s;s=e.skipChars(s,o);let l=s-i;if(l<3)return!1;const c=e.src.slice(i,s),f=e.src.slice(s,a);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let d=t,v=!1;for(;d++,!(d>=n||(s=i=e.bMarks[d]+e.tShift[d],a=e.eMarks[d],s<a&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(s)===o&&!(e.sCount[d]-e.blkIndent>=4)&&(s=e.skipChars(s,o),!(s-i<l)&&(s=e.skipSpaces(s),!(s<a)))){v=!0;break}l=e.sCount[t],e.line=d+(v?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,d,l,!0),h.markup=c,h.map=[t,e.line],!0}function rv(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(r)return!0;const i=[],l=[],c=[],f=[],d=e.md.block.ruler.getRules("blockquote"),v=e.parentType;e.parentType="blockquote";let h=!1,p;for(p=t;p<n;p++){const E=e.sCount[p]<e.blkIndent;if(s=e.bMarks[p]+e.tShift[p],a=e.eMarks[p],s>=a)break;if(e.src.charCodeAt(s++)===62&&!E){let T=e.sCount[p]+1,w,F;e.src.charCodeAt(s)===32?(s++,T++,F=!1,w=!0):e.src.charCodeAt(s)===9?(w=!0,(e.bsCount[p]+T)%4===3?(s++,T++,F=!1):F=!0):w=!1;let W=T;for(i.push(e.bMarks[p]),e.bMarks[p]=s;s<a;){const U=e.src.charCodeAt(s);if(Ot(U))U===9?W+=4-(W+e.bsCount[p]+(F?1:0))%4:W++;else break;s++}h=s>=a,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(w?1:0),c.push(e.sCount[p]),e.sCount[p]=W-T,f.push(e.tShift[p]),e.tShift[p]=s-e.bMarks[p];continue}if(h)break;let _=!1;for(let T=0,w=d.length;T<w;T++)if(d[T](e,p,n,!0)){_=!0;break}if(_){e.lineMax=p,e.blkIndent!==0&&(i.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}i.push(e.bMarks[p]),l.push(e.bsCount[p]),f.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const k=e.blkIndent;e.blkIndent=0;const C=e.push("blockquote_open","blockquote",1);C.markup=">";const y=[t,0];C.map=y,e.md.block.tokenize(e,t,p);const A=e.push("blockquote_close","blockquote",-1);A.markup=">",e.lineMax=o,e.parentType=v,y[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=i[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=l[E];return e.blkIndent=k,!0}function sv(e,t,n,r){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(a++);if(o!==42&&o!==45&&o!==95)return!1;let i=1;for(;a<s;){const c=e.src.charCodeAt(a++);if(c!==o&&!Ot(c))return!1;c===o&&i++}if(i<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(i+1).join(String.fromCharCode(o)),!0}function zl(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(r++);if(s!==42&&s!==45&&s!==43)return-1;if(r<n){const a=e.src.charCodeAt(r);if(!Ot(a))return-1}return r}function Bl(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let s=n;if(s+1>=r)return-1;let a=e.src.charCodeAt(s++);if(a<48||a>57)return-1;for(;;){if(s>=r)return-1;if(a=e.src.charCodeAt(s++),a>=48&&a<=57){if(s-n>=10)return-1;continue}if(a===41||a===46)break;return-1}return s<r&&(a=e.src.charCodeAt(s),!Ot(a))?-1:s}function av(e,t){const n=e.level+2;for(let r=t+2,s=e.tokens.length-2;r<s;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function uv(e,t,n,r){let s,a,o,i,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let d,v,h;if((h=Bl(e,l))>=0){if(d=!0,o=e.bMarks[l]+e.tShift[l],v=Number(e.src.slice(o,h-1)),f&&v!==1)return!1}else if((h=zl(e,l))>=0)d=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const p=e.src.charCodeAt(h-1),k=e.tokens.length;d?(i=e.push("ordered_list_open","ol",1),v!==1&&(i.attrs=[["start",v]])):i=e.push("bullet_list_open","ul",1);const C=[l,0];i.map=C,i.markup=String.fromCharCode(p);let y=!1;const A=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){a=h,s=e.eMarks[l];const _=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let T=_;for(;a<s;){const Z=e.src.charCodeAt(a);if(Z===9)T+=4-(T+e.bsCount[l])%4;else if(Z===32)T++;else break;a++}const w=a;let F;w>=s?F=1:F=T-_,F>4&&(F=1);const W=_+F;i=e.push("list_item_open","li",1),i.markup=String.fromCharCode(p);const U=[l,0];i.map=U,d&&(i.info=e.src.slice(o,h-1));const D=e.tight,N=e.tShift[l],G=e.sCount[l],I=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=W,e.tight=!0,e.tShift[l]=w-e.bMarks[l],e.sCount[l]=T,w>=s&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||y)&&(c=!1),y=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=I,e.tShift[l]=N,e.sCount[l]=G,e.tight=D,i=e.push("list_item_close","li",-1),i.markup=String.fromCharCode(p),l=e.line,U[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let Y=!1;for(let Z=0,X=A.length;Z<X;Z++)if(A[Z](e,l,n,!0)){Y=!0;break}if(Y)break;if(d){if(h=Bl(e,l),h<0)break;o=e.bMarks[l]+e.tShift[l]}else if(h=zl(e,l),h<0)break;if(p!==e.src.charCodeAt(h-1))break}return d?i=e.push("ordered_list_close","ol",-1):i=e.push("bullet_list_close","ul",-1),i.markup=String.fromCharCode(p),C[1]=l,e.line=l,e.parentType=E,c&&av(e,k),!0}function ov(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function i(A){const E=e.lineMax;if(A>=E||e.isEmpty(A))return null;let _=!1;if(e.sCount[A]-e.blkIndent>3&&(_=!0),e.sCount[A]<0&&(_=!0),!_){const F=e.md.block.ruler.getRules("reference"),W=e.parentType;e.parentType="reference";let U=!1;for(let D=0,N=F.length;D<N;D++)if(F[D](e,A,E,!0)){U=!0;break}if(e.parentType=W,U)return null}const T=e.bMarks[A]+e.tShift[A],w=e.eMarks[A];return e.src.slice(T,w+1)}let l=e.src.slice(s,a+1);a=l.length;let c=-1;for(s=1;s<a;s++){const A=l.charCodeAt(s);if(A===91)return!1;if(A===93){c=s;break}else if(A===10){const E=i(o);E!==null&&(l+=E,a=l.length,o++)}else if(A===92&&(s++,s<a&&l.charCodeAt(s)===10)){const E=i(o);E!==null&&(l+=E,a=l.length,o++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<a;s++){const A=l.charCodeAt(s);if(A===10){const E=i(o);E!==null&&(l+=E,a=l.length,o++)}else if(!Ot(A))break}const f=e.md.helpers.parseLinkDestination(l,s,a);if(!f.ok)return!1;const d=e.md.normalizeLink(f.str);if(!e.md.validateLink(d))return!1;s=f.pos;const v=s,h=o,p=s;for(;s<a;s++){const A=l.charCodeAt(s);if(A===10){const E=i(o);E!==null&&(l+=E,a=l.length,o++)}else if(!Ot(A))break}let k=e.md.helpers.parseLinkTitle(l,s,a);for(;k.can_continue;){const A=i(o);if(A===null)break;l+=A,s=a,a=l.length,o++,k=e.md.helpers.parseLinkTitle(l,s,a,k)}let C;for(s<a&&p!==s&&k.ok?(C=k.str,s=k.pos):(C="",s=v,o=h);s<a;){const A=l.charCodeAt(s);if(!Ot(A))break;s++}if(s<a&&l.charCodeAt(s)!==10&&C)for(C="",s=v,o=h;s<a;){const A=l.charCodeAt(s);if(!Ot(A))break;s++}if(s<a&&l.charCodeAt(s)!==10)return!1;const y=$u(l.slice(1,c));return y?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:C,href:d}),e.line=o),!0):!1}const iv=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lv="[a-zA-Z_:][a-zA-Z0-9:._-]*",cv="[^\"'=<>`\\x00-\\x20]+",dv="'[^']*'",fv='"[^"]*"',pv="(?:"+cv+"|"+dv+"|"+fv+")",hv="(?:\\s+"+lv+"(?:\\s*=\\s*"+pv+")?)",Td="<[A-Za-z][A-Za-z0-9\\-]*"+hv+"*\\s*\\/?>",Dd="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",mv="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",vv="<[?][\\s\\S]*?[?]>",gv="<![A-Za-z][^>]*>",_v="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",bv=new RegExp("^(?:"+Td+"|"+Dd+"|"+mv+"|"+vv+"|"+gv+"|"+_v+")"),yv=new RegExp("^(?:"+Td+"|"+Dd+")"),xs=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+iv.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yv.source+"\\s*$"),/^$/,!1]];function xv(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let o=e.src.slice(s,a),i=0;for(;i<xs.length&&!xs[i][0].test(o);i++);if(i===xs.length)return!1;if(r)return xs[i][2];let l=t+1;if(!xs[i][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(s=e.bMarks[l]+e.tShift[l],a=e.eMarks[l],o=e.src.slice(s,a),xs[i][1].test(o)){o.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function kv(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(s);if(o!==35||s>=a)return!1;let i=1;for(o=e.src.charCodeAt(++s);o===35&&s<a&&i<=6;)i++,o=e.src.charCodeAt(++s);if(i>6||s<a&&!Ot(o))return!1;if(r)return!0;a=e.skipSpacesBack(a,s);const l=e.skipCharsBack(a,35,s);l>s&&Ot(e.src.charCodeAt(l-1))&&(a=l),e.line=t+1;const c=e.push("heading_open","h"+String(i),1);c.markup="########".slice(0,i),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(s,a).trim(),f.map=[t,e.line],f.children=[];const d=e.push("heading_close","h"+String(i),-1);return d.markup="########".slice(0,i),!0}function wv(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let a=0,o,i=t+1;for(;i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3)continue;if(e.sCount[i]>=e.blkIndent){let h=e.bMarks[i]+e.tShift[i];const p=e.eMarks[i];if(h<p&&(o=e.src.charCodeAt(h),(o===45||o===61)&&(h=e.skipChars(h,o),h=e.skipSpaces(h),h>=p))){a=o===61?1:2;break}}if(e.sCount[i]<0)continue;let v=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](e,i,n,!0)){v=!0;break}if(v)break}if(!a)return!1;const l=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i+1;const c=e.push("heading_open","h"+String(a),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const d=e.push("heading_close","h"+String(a),-1);return d.markup=String.fromCharCode(o),e.parentType=s,!0}function Sv(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let a=t+1;for(e.parentType="paragraph";a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)continue;let c=!1;for(let f=0,d=r.length;f<d;f++)if(r[f](e,a,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a;const i=e.push("paragraph_open","p",1);i.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const Xa=[["table",ev,["paragraph","reference"]],["code",tv],["fence",nv,["paragraph","reference","blockquote","list"]],["blockquote",rv,["paragraph","reference","blockquote","list"]],["hr",sv,["paragraph","reference","blockquote","list"]],["list",uv,["paragraph","reference","blockquote"]],["reference",ov],["html_block",xv,["paragraph","reference","blockquote"]],["heading",kv,["paragraph","reference","blockquote"]],["lheading",wv],["paragraph",Sv]];function Ru(){this.ruler=new Tn;for(let e=0;e<Xa.length;e++)this.ruler.push(Xa[e][0],Xa[e][1],{alt:(Xa[e][2]||[]).slice()})}Ru.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),s=r.length,a=e.md.options.maxNesting;let o=t,i=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=a){e.line=n;break}const l=e.line;let c=!1;for(let f=0;f<s;f++)if(c=r[f](e,o,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!i,e.isEmpty(e.line-1)&&(i=!0),o=e.line,o<n&&e.isEmpty(o)&&(i=!0,o++,e.line=o)}};Ru.prototype.parse=function(e,t,n,r){if(!e)return;const s=new this.State(e,t,n,r);this.tokenize(s,s.line,s.lineMax)};Ru.prototype.State=hr;function Na(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Na.prototype.pushPending=function(){const e=new Yn("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Na.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Yn(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};Na.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let a=e;for(;a<n&&this.src.charCodeAt(a)===r;)a++;const o=a-e,i=a<n?this.src.charCodeAt(a):32,l=xa(s)||ya(String.fromCharCode(s)),c=xa(i)||ya(String.fromCharCode(i)),f=ba(s),d=ba(i),v=!d&&(!c||f||l),h=!f&&(!l||d||c);return{can_open:v&&(t||!h||l),can_close:h&&(t||!v||c),length:o}};Na.prototype.Token=Yn;function Ev(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Cv(e,t){let n=e.pos;for(;n<e.posMax&&!Ev(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Av=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Tv(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(Av);if(!s)return!1;const a=s[1],o=e.md.linkify.matchAtStart(e.src.slice(n-a.length));if(!o)return!1;let i=o.url;if(i.length<=a.length)return!1;i=i.replace(/\*+$/,"");const l=e.md.normalizeLink(i);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-a.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(i);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=i.length-a.length,!0}function Dv(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,s=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let a=r-1;for(;a>=1&&e.pending.charCodeAt(a-1)===32;)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&Ot(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Di=[];for(let e=0;e<256;e++)Di.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Di[e.charCodeAt(0)]=1});function Fv(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(s=e.src.charCodeAt(n),!!Ot(s));)n++;return e.pos=n,!0}let a=e.src[n];if(s>=55296&&s<=56319&&n+1<r){const i=e.src.charCodeAt(n+1);i>=56320&&i<=57343&&(a+=e.src[n+1],n++)}const o="\\"+a;if(!t){const i=e.push("text_special","",0);s<256&&Di[s]!==0?i.content=a:i.content=o,i.markup=o,i.info="escape"}return e.pos=n+1,!0}function Mv(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const a=e.posMax;for(;n<a&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(s,n),i=o.length;if(e.backticksScanned&&(e.backticks[i]||0)<=s)return t||(e.pending+=o),e.pos+=i,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<a&&e.src.charCodeAt(l)===96;)l++;const f=l-c;if(f===i){if(!t){const d=e.push("code_inline","code",0);d.markup=o,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=i,!0}function Pv(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const s=e.scanDelims(e.pos,!0);let a=s.length;const o=String.fromCharCode(r);if(a<2)return!1;let i;a%2&&(i=e.push("text","",0),i.content=o,a--);for(let l=0;l<a;l+=2)i=e.push("text","",0),i.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function Ul(e,t){let n;const r=[],s=t.length;for(let a=0;a<s;a++){const o=t[a];if(o.marker!==126||o.end===-1)continue;const i=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[i.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[i.token-1].type==="text"&&e.tokens[i.token-1].content==="~"&&r.push(i.token-1)}for(;r.length;){const a=r.pop();let o=a+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,a!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[a],e.tokens[a]=n)}}function Iv(e){const t=e.tokens_meta,n=e.tokens_meta.length;Ul(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Ul(e,t[r].delimiters)}const Fd={tokenize:Pv,postProcess:Iv};function Nv(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const s=e.scanDelims(e.pos,r===42);for(let a=0;a<s.length;a++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function jl(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const s=t[r];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const a=t[s.end],o=r>0&&t[r-1].end===s.end+1&&t[r-1].marker===s.marker&&t[r-1].token===s.token-1&&t[s.end+1].token===a.token+1,i=String.fromCharCode(s.marker),l=e.tokens[s.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?i+i:i,l.content="";const c=e.tokens[a.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?i+i:i,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[s.end+1].token].content="",r--)}}function Lv(e){const t=e.tokens_meta,n=e.tokens_meta.length;jl(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&jl(e,t[r].delimiters)}const Md={tokenize:Nv,postProcess:Lv};function Ov(e,t){let n,r,s,a,o="",i="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,d=e.posMax,v=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let p=h+1;if(p<d&&e.src.charCodeAt(p)===40){for(c=!1,p++;p<d&&(n=e.src.charCodeAt(p),!(!Ot(n)&&n!==10));p++);if(p>=d)return!1;if(l=p,s=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),s.ok){for(o=e.md.normalizeLink(s.str),e.md.validateLink(o)?p=s.pos:o="",l=p;p<d&&(n=e.src.charCodeAt(p),!(!Ot(n)&&n!==10));p++);if(s=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<d&&l!==p&&s.ok)for(i=s.str,p=s.pos;p<d&&(n=e.src.charCodeAt(p),!(!Ot(n)&&n!==10));p++);}(p>=d||e.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<d&&e.src.charCodeAt(p)===91?(l=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?r=e.src.slice(l,p++):p=h+1):p=h+1,r||(r=e.src.slice(v,h)),a=e.env.references[$u(r)],!a)return e.pos=f,!1;o=a.href,i=a.title}if(!t){e.pos=v,e.posMax=h;const k=e.push("link_open","a",1),C=[["href",o]];k.attrs=C,i&&C.push(["title",i]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=d,!0}function $v(e,t){let n,r,s,a,o,i,l,c,f="";const d=e.pos,v=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(a=p+1,a<v&&e.src.charCodeAt(a)===40){for(a++;a<v&&(n=e.src.charCodeAt(a),!(!Ot(n)&&n!==10));a++);if(a>=v)return!1;for(c=a,i=e.md.helpers.parseLinkDestination(e.src,a,e.posMax),i.ok&&(f=e.md.normalizeLink(i.str),e.md.validateLink(f)?a=i.pos:f=""),c=a;a<v&&(n=e.src.charCodeAt(a),!(!Ot(n)&&n!==10));a++);if(i=e.md.helpers.parseLinkTitle(e.src,a,e.posMax),a<v&&c!==a&&i.ok)for(l=i.str,a=i.pos;a<v&&(n=e.src.charCodeAt(a),!(!Ot(n)&&n!==10));a++);else l="";if(a>=v||e.src.charCodeAt(a)!==41)return e.pos=d,!1;a++}else{if(typeof e.env.references>"u")return!1;if(a<v&&e.src.charCodeAt(a)===91?(c=a+1,a=e.md.helpers.parseLinkLabel(e,a),a>=0?s=e.src.slice(c,a++):a=p+1):a=p+1,s||(s=e.src.slice(h,p)),o=e.env.references[$u(s)],!o)return e.pos=d,!1;f=o.href,l=o.title}if(!t){r=e.src.slice(h,p);const k=[];e.md.inline.parse(r,e.md,e.env,k);const C=e.push("image","img",0),y=[["src",f],["alt",""]];C.attrs=y,C.children=k,C.content=r,l&&y.push(["title",l])}return e.pos=a,e.posMax=v,!0}const Rv=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,zv=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Bv(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const a=e.src.slice(r+1,n);if(zv.test(a)){const o=e.md.normalizeLink(a);if(!e.md.validateLink(o))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",o]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=a.length+2,!0}if(Rv.test(a)){const o=e.md.normalizeLink("mailto:"+a);if(!e.md.validateLink(o))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",o]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=a.length+2,!0}return!1}function Uv(e){return/^<a[>\s]/i.test(e)}function jv(e){return/^<\/a\s*>/i.test(e)}function qv(e){const t=e|32;return t>=97&&t<=122}function Hv(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const s=e.src.charCodeAt(r+1);if(s!==33&&s!==63&&s!==47&&!qv(s))return!1;const a=e.src.slice(r).match(bv);if(!a)return!1;if(!t){const o=e.push("html_inline","",0);o.content=a[0],Uv(o.content)&&e.linkLevel++,jv(o.content)&&e.linkLevel--}return e.pos+=a[0].length,!0}const Wv=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Vv=/^&([a-z][a-z0-9]{1,31});/i;function Gv(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const a=e.src.slice(n).match(Wv);if(a){if(!t){const o=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),i=e.push("text_special","",0);i.content=Ai(o)?wu(o):wu(65533),i.markup=a[0],i.info="entity"}return e.pos+=a[0].length,!0}}else{const a=e.src.slice(n).match(Vv);if(a){const o=wd(a[0]);if(o!==a[0]){if(!t){const i=e.push("text_special","",0);i.content=o,i.markup=a[0],i.info="entity"}return e.pos+=a[0].length,!0}}}return!1}function ql(e){const t={},n=e.length;if(!n)return;let r=0,s=-2;const a=[];for(let o=0;o<n;o++){const i=e[o];if(a.push(0),(e[r].marker!==i.marker||s!==i.token-1)&&(r=o),s=i.token,i.length=i.length||0,!i.close)continue;t.hasOwnProperty(i.marker)||(t[i.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[i.marker][(i.open?3:0)+i.length%3];let c=r-a[r]-1,f=c;for(;c>l;c-=a[c]+1){const d=e[c];if(d.marker===i.marker&&d.open&&d.end<0){let v=!1;if((d.close||i.open)&&(d.length+i.length)%3===0&&(d.length%3!==0||i.length%3!==0)&&(v=!0),!v){const h=c>0&&!e[c-1].open?a[c-1]+1:0;a[o]=o-c+h,a[c]=h,i.open=!1,d.end=o,d.close=!1,f=-1,s=-2;break}}}f!==-1&&(t[i.marker][(i.open?3:0)+(i.length||0)%3]=f)}}function Zv(e){const t=e.tokens_meta,n=e.tokens_meta.length;ql(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&ql(t[r].delimiters)}function Kv(e){let t,n,r=0;const s=e.tokens,a=e.tokens.length;for(t=n=0;t<a;t++)s[t].nesting<0&&r--,s[t].level=r,s[t].nesting>0&&r++,s[t].type==="text"&&t+1<a&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const yo=[["text",Cv],["linkify",Tv],["newline",Dv],["escape",Fv],["backticks",Mv],["strikethrough",Fd.tokenize],["emphasis",Md.tokenize],["link",Ov],["image",$v],["autolink",Bv],["html_inline",Hv],["entity",Gv]],xo=[["balance_pairs",Zv],["strikethrough",Fd.postProcess],["emphasis",Md.postProcess],["fragments_join",Kv]];function La(){this.ruler=new Tn;for(let e=0;e<yo.length;e++)this.ruler.push(yo[e][0],yo[e][1]);this.ruler2=new Tn;for(let e=0;e<xo.length;e++)this.ruler2.push(xo[e][0],xo[e][1])}La.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,s=e.md.options.maxNesting,a=e.cache;if(typeof a[t]<"u"){e.pos=a[t];return}let o=!1;if(e.level<s){for(let i=0;i<r;i++)if(e.level++,o=n[i](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,a[t]=e.pos};La.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,s=e.md.options.maxNesting;for(;e.pos<r;){const a=e.pos;let o=!1;if(e.level<s){for(let i=0;i<n;i++)if(o=t[i](e,!1),o){if(a>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};La.prototype.parse=function(e,t,n,r){const s=new this.State(e,t,n,r);this.tokenize(s);const a=this.ruler2.getRules(""),o=a.length;for(let i=0;i<o;i++)a[i](s)};La.prototype.State=Na;function Yv(e){const t={};e=e||{},t.src_Any=_d.source,t.src_Cc=bd.source,t.src_Z=xd.source,t.src_P=Ei.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><ï½]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Ko(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function zu(e){return Object.prototype.toString.call(e)}function Jv(e){return zu(e)==="[object String]"}function Xv(e){return zu(e)==="[object Object]"}function Qv(e){return zu(e)==="[object RegExp]"}function Hl(e){return zu(e)==="[object Function]"}function eg(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Pd={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function tg(e){return Object.keys(e||{}).reduce(function(t,n){return t||Pd.hasOwnProperty(n)},!1)}const ng={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},rg="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",sg="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function ag(e){e.__index__=-1,e.__text_cache__=""}function ug(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Wl(){return function(e,t){t.normalize(e)}}function Su(e){const t=e.re=Yv(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(rg),n.push(t.src_xn),t.src_tlds=n.join("|");function r(i){return i.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function a(i,l){throw new Error('(LinkifyIt) Invalid schema "'+i+'": '+l)}Object.keys(e.__schemas__).forEach(function(i){const l=e.__schemas__[i];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[i]=c,Xv(l)){Qv(l.validate)?c.validate=ug(l.validate):Hl(l.validate)?c.validate=l.validate:a(i,l),Hl(l.normalize)?c.normalize=l.normalize:l.normalize?a(i,l):c.normalize=Wl();return}if(Jv(l)){s.push(i);return}a(i,l)}),s.forEach(function(i){e.__compiled__[e.__schemas__[i]]&&(e.__compiled__[i].validate=e.__compiled__[e.__schemas__[i]].validate,e.__compiled__[i].normalize=e.__compiled__[e.__schemas__[i]].normalize)}),e.__compiled__[""]={validate:null,normalize:Wl()};const o=Object.keys(e.__compiled__).filter(function(i){return i.length>0&&e.__compiled__[i]}).map(eg).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),ag(e)}function og(e,t){const n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function Yo(e,t){const n=new og(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Nn(e,t){if(!(this instanceof Nn))return new Nn(e,t);t||tg(e)&&(t=e,e={}),this.__opts__=Ko({},Pd,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ko({},ng,e),this.__compiled__={},this.__tlds__=sg,this.__tlds_replaced__=!1,this.re={},Su(this)}Nn.prototype.add=function(t,n){return this.__schemas__[t]=n,Su(this),this};Nn.prototype.set=function(t){return this.__opts__=Ko(this.__opts__,t),this};Nn.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,s,a,o,i,l,c,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(a=this.testSchemaAt(t,n[2],l.lastIndex),a){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(o=s.index+s[1].length,i=s.index+s[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=i))),this.__index__>=0};Nn.prototype.pretest=function(t){return this.re.pretest.test(t)};Nn.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Nn.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Yo(this,r)),r=this.__last_index__);let s=r?t.slice(r):t;for(;this.test(s);)n.push(Yo(this,r)),s=s.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Nn.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Yo(this,0)):null};Nn.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,s,a){return r!==a[s-1]}).reverse(),Su(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Su(this),this)};Nn.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Nn.prototype.onCompile=function(){};const Ps=2147483647,ur=36,Fi=1,ka=26,ig=38,lg=700,Id=72,Nd=128,Ld="-",cg=/^xn--/,dg=/[^\0-\x7F]/,fg=/[\x2E\u3002\uFF0E\uFF61]/g,pg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ko=ur-Fi,or=Math.floor,wo=String.fromCharCode;function Fr(e){throw new RangeError(pg[e])}function hg(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function Od(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(fg,".");const s=e.split("."),a=hg(s,t).join(".");return r+a}function $d(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const a=e.charCodeAt(n++);(a&64512)==56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const mg=e=>String.fromCodePoint(...e),vg=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ur},Vl=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Rd=function(e,t,n){let r=0;for(e=n?or(e/lg):e>>1,e+=or(e/t);e>ko*ka>>1;r+=ur)e=or(e/ko);return or(r+(ko+1)*e/(e+ig))},zd=function(e){const t=[],n=e.length;let r=0,s=Nd,a=Id,o=e.lastIndexOf(Ld);o<0&&(o=0);for(let i=0;i<o;++i)e.charCodeAt(i)>=128&&Fr("not-basic"),t.push(e.charCodeAt(i));for(let i=o>0?o+1:0;i<n;){const l=r;for(let f=1,d=ur;;d+=ur){i>=n&&Fr("invalid-input");const v=vg(e.charCodeAt(i++));v>=ur&&Fr("invalid-input"),v>or((Ps-r)/f)&&Fr("overflow"),r+=v*f;const h=d<=a?Fi:d>=a+ka?ka:d-a;if(v<h)break;const p=ur-h;f>or(Ps/p)&&Fr("overflow"),f*=p}const c=t.length+1;a=Rd(r-l,c,l==0),or(r/c)>Ps-s&&Fr("overflow"),s+=or(r/c),r%=c,t.splice(r++,0,s)}return String.fromCodePoint(...t)},Bd=function(e){const t=[];e=$d(e);const n=e.length;let r=Nd,s=0,a=Id;for(const l of e)l<128&&t.push(wo(l));const o=t.length;let i=o;for(o&&t.push(Ld);i<n;){let l=Ps;for(const f of e)f>=r&&f<l&&(l=f);const c=i+1;l-r>or((Ps-s)/c)&&Fr("overflow"),s+=(l-r)*c,r=l;for(const f of e)if(f<r&&++s>Ps&&Fr("overflow"),f===r){let d=s;for(let v=ur;;v+=ur){const h=v<=a?Fi:v>=a+ka?ka:v-a;if(d<h)break;const p=d-h,k=ur-h;t.push(wo(Vl(h+p%k,0))),d=or(p/k)}t.push(wo(Vl(d,0))),a=Rd(s,c,i===o),s=0,++i}++s,++r}return t.join("")},gg=function(e){return Od(e,function(t){return cg.test(t)?zd(t.slice(4).toLowerCase()):t})},_g=function(e){return Od(e,function(t){return dg.test(t)?"xn--"+Bd(t):t})},Ud={version:"2.3.1",ucs2:{decode:$d,encode:mg},decode:zd,encode:Bd,toASCII:_g,toUnicode:gg},bg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},yg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},xg={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},kg={default:bg,zero:yg,commonmark:xg},wg=/^(vbscript|javascript|file|data):/,Sg=/^data:image\/(gif|png|jpeg|webp);/;function Eg(e){const t=e.trim().toLowerCase();return wg.test(t)?Sg.test(t):!0}const jd=["http:","https:","mailto:"];function Cg(e){const t=Si(e,!0);if(t.hostname&&(!t.protocol||jd.indexOf(t.protocol)>=0))try{t.hostname=Ud.toASCII(t.hostname)}catch{}return Ia(wi(t))}function Ag(e){const t=Si(e,!0);if(t.hostname&&(!t.protocol||jd.indexOf(t.protocol)>=0))try{t.hostname=Ud.toUnicode(t.hostname)}catch{}return $s(wi(t),$s.defaultChars+"%")}function qn(e,t){if(!(this instanceof qn))return new qn(e,t);t||Ci(e)||(t=e||{},e="default"),this.inline=new La,this.block=new Ru,this.core=new Ti,this.renderer=new Hs,this.linkify=new Nn,this.validateLink=Eg,this.normalizeLink=Cg,this.normalizeLinkText=Ag,this.utils=Dm,this.helpers=Ou({},Im),this.options={},this.configure(e),t&&this.set(t)}qn.prototype.set=function(e){return Ou(this.options,e),this};qn.prototype.configure=function(e){const t=this;if(Ci(e)){const n=e;if(e=kg[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};qn.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};qn.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};qn.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};qn.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};qn.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};qn.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};qn.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:qd,setPrototypeOf:Gl,isFrozen:Tg,getPrototypeOf:Dg,getOwnPropertyDescriptor:Fg}=Object;let{freeze:wn,seal:Hn,create:Hd}=Object,{apply:Jo,construct:Xo}=typeof Reflect<"u"&&Reflect;wn||(wn=function(t){return t});Hn||(Hn=function(t){return t});Jo||(Jo=function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];return t.apply(n,s)});Xo||(Xo=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return new t(...r)});const Qa=Sn(Array.prototype.forEach),Mg=Sn(Array.prototype.lastIndexOf),Zl=Sn(Array.prototype.pop),Xs=Sn(Array.prototype.push),Pg=Sn(Array.prototype.splice),du=Sn(String.prototype.toLowerCase),So=Sn(String.prototype.toString),Eo=Sn(String.prototype.match),Qs=Sn(String.prototype.replace),Ig=Sn(String.prototype.indexOf),Ng=Sn(String.prototype.trim),Wn=Sn(Object.prototype.hasOwnProperty),gn=Sn(RegExp.prototype.test),ea=Lg(TypeError);function Sn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Jo(e,t,r)}}function Lg(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xo(e,n)}}function ct(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:du;Gl&&Gl(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const a=n(s);a!==s&&(Tg(t)||(t[r]=a),s=a)}e[s]=!0}return e}function Og(e){for(let t=0;t<e.length;t++)Wn(e,t)||(e[t]=null);return e}function vr(e){const t=Hd(null);for(const[n,r]of qd(e))Wn(e,n)&&(Array.isArray(r)?t[n]=Og(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=vr(r):t[n]=r);return t}function ta(e,t){for(;e!==null;){const r=Fg(e,t);if(r){if(r.get)return Sn(r.get);if(typeof r.value=="function")return Sn(r.value)}e=Dg(e)}function n(){return null}return n}const Kl=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Co=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ao=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$g=wn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),To=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Rg=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Yl=wn(["#text"]),Jl=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Do=wn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xl=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),eu=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zg=Hn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Bg=Hn(/<%[\w\W]*|[\w\W]*%>/gm),Ug=Hn(/\$\{[\w\W]*/gm),jg=Hn(/^data-[\-\w.\u00B7-\uFFFF]+$/),qg=Hn(/^aria-[\-\w]+$/),Wd=Hn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Hg=Hn(/^(?:\w+script|data):/i),Wg=Hn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Vd=Hn(/^html$/i),Vg=Hn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ql=Object.freeze({__proto__:null,ARIA_ATTR:qg,ATTR_WHITESPACE:Wg,CUSTOM_ELEMENT:Vg,DATA_ATTR:jg,DOCTYPE_NAME:Vd,ERB_EXPR:Bg,IS_ALLOWED_URI:Wd,IS_SCRIPT_OR_DATA:Hg,MUSTACHE_EXPR:zg,TMPLIT_EXPR:Ug});const na={element:1,text:3,progressingInstruction:7,comment:8,document:9},Gg=function(){return typeof window>"u"?null:window},Zg=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},ec=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Gd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gg();const t=we=>Gd(we);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==na.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:i,Element:l,NodeFilter:c,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:v,trustedTypes:h}=e,p=l.prototype,k=ta(p,"cloneNode"),C=ta(p,"remove"),y=ta(p,"nextSibling"),A=ta(p,"childNodes"),E=ta(p,"parentNode");if(typeof o=="function"){const we=n.createElement("template");we.content&&we.content.ownerDocument&&(n=we.content.ownerDocument)}let _,T="";const{implementation:w,createNodeIterator:F,createDocumentFragment:W,getElementsByTagName:U}=n,{importNode:D}=r;let N=ec();t.isSupported=typeof qd=="function"&&typeof E=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:I,TMPLIT_EXPR:Y,DATA_ATTR:Z,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:fe,ATTR_WHITESPACE:ne,CUSTOM_ELEMENT:ue}=Ql;let{IS_ALLOWED_URI:L}=Ql,j=null;const ce=ct({},[...Kl,...Co,...Ao,...To,...Yl]);let ge=null;const K=ct({},[...Jl,...Do,...Xl,...eu]);let z=Object.seal(Hd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),J=null,_e=null,oe=!0,be=!0,te=!1,Te=!0,$e=!1,Re=!0,Xe=!1,Fe=!1,Qe=!1,he=!1,ke=!1,Ne=!1,re=!0,Ee=!1;const ze="user-content-";let q=!0,le=!1,Q={},ae=null;const Pe=ct({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ue=null;const Se=ct({},["audio","video","img","source","image","track"]);let Ve=null;const He=ct({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qe="http://www.w3.org/1998/Math/MathML",at="http://www.w3.org/2000/svg",Ye="http://www.w3.org/1999/xhtml";let xt=Ye,Tt=!1,Mt=null;const vn=ct({},[qe,at,Ye],So);let Xt=ct({},["mi","mo","mn","ms","mtext"]),Qt=ct({},["annotation-xml"]);const mt=ct({},["title","style","font","a","script"]);let tt=null;const Le=["application/xhtml+xml","text/html"],it="text/html";let Je=null,$t=null;const en=n.createElement("form"),We=function(P){return P instanceof RegExp||P instanceof Function},ut=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!($t&&$t===P)){if((!P||typeof P!="object")&&(P={}),P=vr(P),tt=Le.indexOf(P.PARSER_MEDIA_TYPE)===-1?it:P.PARSER_MEDIA_TYPE,Je=tt==="application/xhtml+xml"?So:du,j=Wn(P,"ALLOWED_TAGS")?ct({},P.ALLOWED_TAGS,Je):ce,ge=Wn(P,"ALLOWED_ATTR")?ct({},P.ALLOWED_ATTR,Je):K,Mt=Wn(P,"ALLOWED_NAMESPACES")?ct({},P.ALLOWED_NAMESPACES,So):vn,Ve=Wn(P,"ADD_URI_SAFE_ATTR")?ct(vr(He),P.ADD_URI_SAFE_ATTR,Je):He,Ue=Wn(P,"ADD_DATA_URI_TAGS")?ct(vr(Se),P.ADD_DATA_URI_TAGS,Je):Se,ae=Wn(P,"FORBID_CONTENTS")?ct({},P.FORBID_CONTENTS,Je):Pe,J=Wn(P,"FORBID_TAGS")?ct({},P.FORBID_TAGS,Je):vr({}),_e=Wn(P,"FORBID_ATTR")?ct({},P.FORBID_ATTR,Je):vr({}),Q=Wn(P,"USE_PROFILES")?P.USE_PROFILES:!1,oe=P.ALLOW_ARIA_ATTR!==!1,be=P.ALLOW_DATA_ATTR!==!1,te=P.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$e=P.SAFE_FOR_TEMPLATES||!1,Re=P.SAFE_FOR_XML!==!1,Xe=P.WHOLE_DOCUMENT||!1,he=P.RETURN_DOM||!1,ke=P.RETURN_DOM_FRAGMENT||!1,Ne=P.RETURN_TRUSTED_TYPE||!1,Qe=P.FORCE_BODY||!1,re=P.SANITIZE_DOM!==!1,Ee=P.SANITIZE_NAMED_PROPS||!1,q=P.KEEP_CONTENT!==!1,le=P.IN_PLACE||!1,L=P.ALLOWED_URI_REGEXP||Wd,xt=P.NAMESPACE||Ye,Xt=P.MATHML_TEXT_INTEGRATION_POINTS||Xt,Qt=P.HTML_INTEGRATION_POINTS||Qt,z=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&We(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&We(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$e&&(be=!1),ke&&(he=!0),Q&&(j=ct({},Yl),ge=[],Q.html===!0&&(ct(j,Kl),ct(ge,Jl)),Q.svg===!0&&(ct(j,Co),ct(ge,Do),ct(ge,eu)),Q.svgFilters===!0&&(ct(j,Ao),ct(ge,Do),ct(ge,eu)),Q.mathMl===!0&&(ct(j,To),ct(ge,Xl),ct(ge,eu))),P.ADD_TAGS&&(j===ce&&(j=vr(j)),ct(j,P.ADD_TAGS,Je)),P.ADD_ATTR&&(ge===K&&(ge=vr(ge)),ct(ge,P.ADD_ATTR,Je)),P.ADD_URI_SAFE_ATTR&&ct(Ve,P.ADD_URI_SAFE_ATTR,Je),P.FORBID_CONTENTS&&(ae===Pe&&(ae=vr(ae)),ct(ae,P.FORBID_CONTENTS,Je)),q&&(j["#text"]=!0),Xe&&ct(j,["html","head","body"]),j.table&&(ct(j,["tbody"]),delete J.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw ea('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ea('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=P.TRUSTED_TYPES_POLICY,T=_.createHTML("")}else _===void 0&&(_=Zg(h,s)),_!==null&&typeof T=="string"&&(T=_.createHTML(""));wn&&wn(P),$t=P}},kt=ct({},[...Co,...Ao,...$g]),De=ct({},[...To,...Rg]),Ie=function(P){let ie=E(P);(!ie||!ie.tagName)&&(ie={namespaceURI:xt,tagName:"template"});const ye=du(P.tagName),nt=du(ie.tagName);return Mt[P.namespaceURI]?P.namespaceURI===at?ie.namespaceURI===Ye?ye==="svg":ie.namespaceURI===qe?ye==="svg"&&(nt==="annotation-xml"||Xt[nt]):!!kt[ye]:P.namespaceURI===qe?ie.namespaceURI===Ye?ye==="math":ie.namespaceURI===at?ye==="math"&&Qt[nt]:!!De[ye]:P.namespaceURI===Ye?ie.namespaceURI===at&&!Qt[nt]||ie.namespaceURI===qe&&!Xt[nt]?!1:!De[ye]&&(mt[ye]||!kt[ye]):!!(tt==="application/xhtml+xml"&&Mt[P.namespaceURI]):!1},Ae=function(P){Xs(t.removed,{element:P});try{E(P).removeChild(P)}catch{C(P)}},ee=function(P,ie){try{Xs(t.removed,{attribute:ie.getAttributeNode(P),from:ie})}catch{Xs(t.removed,{attribute:null,from:ie})}if(ie.removeAttribute(P),P==="is")if(he||ke)try{Ae(ie)}catch{}else try{ie.setAttribute(P,"")}catch{}},Ce=function(P){let ie=null,ye=null;if(Qe)P="<remove></remove>"+P;else{const Me=Eo(P,/^[\r\n\t ]+/);ye=Me&&Me[0]}tt==="application/xhtml+xml"&&xt===Ye&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");const nt=_?_.createHTML(P):P;if(xt===Ye)try{ie=new v().parseFromString(nt,tt)}catch{}if(!ie||!ie.documentElement){ie=w.createDocument(xt,"template",null);try{ie.documentElement.innerHTML=Tt?T:nt}catch{}}const Be=ie.body||ie.documentElement;return P&&ye&&Be.insertBefore(n.createTextNode(ye),Be.childNodes[0]||null),xt===Ye?U.call(ie,Xe?"html":"body")[0]:Xe?ie.documentElement:Be},Ge=function(P){return F.call(P.ownerDocument||P,P,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ze=function(P){return P instanceof d&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof f)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},Ke=function(P){return typeof i=="function"&&P instanceof i};function et(we,P,ie){Qa(we,ye=>{ye.call(t,P,ie,$t)})}const Rt=function(P){let ie=null;if(et(N.beforeSanitizeElements,P,null),Ze(P))return Ae(P),!0;const ye=Je(P.nodeName);if(et(N.uponSanitizeElement,P,{tagName:ye,allowedTags:j}),Re&&P.hasChildNodes()&&!Ke(P.firstElementChild)&&gn(/<[/\w!]/g,P.innerHTML)&&gn(/<[/\w!]/g,P.textContent)||P.nodeType===na.progressingInstruction||Re&&P.nodeType===na.comment&&gn(/<[/\w]/g,P.data))return Ae(P),!0;if(!j[ye]||J[ye]){if(!J[ye]&&lt(ye)&&(z.tagNameCheck instanceof RegExp&&gn(z.tagNameCheck,ye)||z.tagNameCheck instanceof Function&&z.tagNameCheck(ye)))return!1;if(q&&!ae[ye]){const nt=E(P)||P.parentNode,Be=A(P)||P.childNodes;if(Be&&nt){const Me=Be.length;for(let je=Me-1;je>=0;--je){const me=k(Be[je],!0);me.__removalCount=(P.__removalCount||0)+1,nt.insertBefore(me,y(P))}}}return Ae(P),!0}return P instanceof l&&!Ie(P)||(ye==="noscript"||ye==="noembed"||ye==="noframes")&&gn(/<\/no(script|embed|frames)/i,P.innerHTML)?(Ae(P),!0):($e&&P.nodeType===na.text&&(ie=P.textContent,Qa([G,I,Y],nt=>{ie=Qs(ie,nt," ")}),P.textContent!==ie&&(Xs(t.removed,{element:P.cloneNode()}),P.textContent=ie)),et(N.afterSanitizeElements,P,null),!1)},ot=function(P,ie,ye){if(re&&(ie==="id"||ie==="name")&&(ye in n||ye in en))return!1;if(!(be&&!_e[ie]&&gn(Z,ie))){if(!(oe&&gn(X,ie))){if(!ge[ie]||_e[ie]){if(!(lt(P)&&(z.tagNameCheck instanceof RegExp&&gn(z.tagNameCheck,P)||z.tagNameCheck instanceof Function&&z.tagNameCheck(P))&&(z.attributeNameCheck instanceof RegExp&&gn(z.attributeNameCheck,ie)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(ie,P))||ie==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&gn(z.tagNameCheck,ye)||z.tagNameCheck instanceof Function&&z.tagNameCheck(ye))))return!1}else if(!Ve[ie]){if(!gn(L,Qs(ye,ne,""))){if(!((ie==="src"||ie==="xlink:href"||ie==="href")&&P!=="script"&&Ig(ye,"data:")===0&&Ue[P])){if(!(te&&!gn(fe,Qs(ye,ne,"")))){if(ye)return!1}}}}}}return!0},lt=function(P){return P!=="annotation-xml"&&Eo(P,ue)},Pt=function(P){et(N.beforeSanitizeAttributes,P,null);const{attributes:ie}=P;if(!ie||Ze(P))return;const ye={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ge,forceKeepAttr:void 0};let nt=ie.length;for(;nt--;){const Be=ie[nt],{name:Me,namespaceURI:je,value:me}=Be,qt=Je(Me),Kt=me;let Et=Me==="value"?Kt:Ng(Kt);if(ye.attrName=qt,ye.attrValue=Et,ye.keepAttr=!0,ye.forceKeepAttr=void 0,et(N.uponSanitizeAttribute,P,ye),Et=ye.attrValue,Ee&&(qt==="id"||qt==="name")&&(ee(Me,P),Et=ze+Et),Re&&gn(/((--!?|])>)|<\/(style|title|textarea)/i,Et)){ee(Me,P);continue}if(qt==="attributename"&&Eo(Et,"href")){ee(Me,P);continue}if(ye.forceKeepAttr)continue;if(!ye.keepAttr){ee(Me,P);continue}if(!Te&&gn(/\/>/i,Et)){ee(Me,P);continue}$e&&Qa([G,I,Y],Wt=>{Et=Qs(Et,Wt," ")});const Bt=Je(P.nodeName);if(!ot(Bt,qt,Et)){ee(Me,P);continue}if(_&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!je)switch(h.getAttributeType(Bt,qt)){case"TrustedHTML":{Et=_.createHTML(Et);break}case"TrustedScriptURL":{Et=_.createScriptURL(Et);break}}if(Et!==Kt)try{je?P.setAttributeNS(je,Me,Et):P.setAttribute(Me,Et),Ze(P)?Ae(P):Zl(t.removed)}catch{ee(Me,P)}}et(N.afterSanitizeAttributes,P,null)},It=function we(P){let ie=null;const ye=Ge(P);for(et(N.beforeSanitizeShadowDOM,P,null);ie=ye.nextNode();)et(N.uponSanitizeShadowNode,ie,null),Rt(ie),Pt(ie),ie.content instanceof a&&we(ie.content);et(N.afterSanitizeShadowDOM,P,null)};return t.sanitize=function(we){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=null,ye=null,nt=null,Be=null;if(Tt=!we,Tt&&(we="<!-->"),typeof we!="string"&&!Ke(we))if(typeof we.toString=="function"){if(we=we.toString(),typeof we!="string")throw ea("dirty is not a string, aborting")}else throw ea("toString is not a function");if(!t.isSupported)return we;if(Fe||ut(P),t.removed=[],typeof we=="string"&&(le=!1),le){if(we.nodeName){const me=Je(we.nodeName);if(!j[me]||J[me])throw ea("root node is forbidden and cannot be sanitized in-place")}}else if(we instanceof i)ie=Ce("<!---->"),ye=ie.ownerDocument.importNode(we,!0),ye.nodeType===na.element&&ye.nodeName==="BODY"||ye.nodeName==="HTML"?ie=ye:ie.appendChild(ye);else{if(!he&&!$e&&!Xe&&we.indexOf("<")===-1)return _&&Ne?_.createHTML(we):we;if(ie=Ce(we),!ie)return he?null:Ne?T:""}ie&&Qe&&Ae(ie.firstChild);const Me=Ge(le?we:ie);for(;nt=Me.nextNode();)Rt(nt),Pt(nt),nt.content instanceof a&&It(nt.content);if(le)return we;if(he){if(ke)for(Be=W.call(ie.ownerDocument);ie.firstChild;)Be.appendChild(ie.firstChild);else Be=ie;return(ge.shadowroot||ge.shadowrootmode)&&(Be=D.call(r,Be,!0)),Be}let je=Xe?ie.outerHTML:ie.innerHTML;return Xe&&j["!doctype"]&&ie.ownerDocument&&ie.ownerDocument.doctype&&ie.ownerDocument.doctype.name&&gn(Vd,ie.ownerDocument.doctype.name)&&(je="<!DOCTYPE "+ie.ownerDocument.doctype.name+`>
`+je),$e&&Qa([G,I,Y],me=>{je=Qs(je,me," ")}),_&&Ne?_.createHTML(je):je},t.setConfig=function(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut(we),Fe=!0},t.clearConfig=function(){$t=null,Fe=!1},t.isValidAttribute=function(we,P,ie){$t||ut({});const ye=Je(we),nt=Je(P);return ot(ye,nt,ie)},t.addHook=function(we,P){typeof P=="function"&&Xs(N[we],P)},t.removeHook=function(we,P){if(P!==void 0){const ie=Mg(N[we],P);return ie===-1?void 0:Pg(N[we],ie,1)[0]}return Zl(N[we])},t.removeHooks=function(we){N[we]=[]},t.removeAllHooks=function(){N=ec()},t}var Zd=Gd();const Kg=new qn({html:!1,linkify:!0,typographer:!0,breaks:!0}),Yg={USE_PROFILES:{html:!0},ADD_ATTR:["target","rel","class","colspan","rowspan","scope"],ADD_TAGS:["table","thead","tbody","tfoot","tr","th","td"]};Zd.addHook("afterSanitizeAttributes",e=>{const t=e;if(!t||typeof t.tagName!="string"||t.tagName.toUpperCase()!=="A")return;t.setAttribute("target","_blank");const n=(t.getAttribute("rel")||"").split(/\s+/).filter(Boolean),r=["noopener","noreferrer","nofollow","ugc"],s=Array.from(new Set([...n,...r]));t.setAttribute("rel",s.join(" "))});function Ds(e){if(!e)return"";const t=Kg.render(e);return Zd.sanitize(t,Yg)}var Jg=M('<span class="sender-model-text svelte-1cnmaqf"> </span>'),Xg=M('<span class="sender-token-count svelte-1cnmaqf" aria-label="Total tokens used" title="Total tokens used"> </span>'),Qg=M('<button type="button" aria-label="View reasoning trace"><!></button>'),e2=M('<button type="button" class="sender-citation-indicator svelte-1cnmaqf" aria-label="View web search details" title="View web search details"><!></button>'),t2=M('<span class="sender-tool-count svelte-1cnmaqf"> </span>'),n2=M('<span class="sender-tool-tokens svelte-1cnmaqf"> </span>'),r2=M('<button type="button" class="sender-tool-indicator svelte-1cnmaqf"><!> <!> <!></button>'),s2=M('<span class="sender-model svelte-1cnmaqf"><!> <!> <!> <!> <!></span>'),a2=M('<span class="sender svelte-1cnmaqf"><span class="sender-label svelte-1cnmaqf"> <!></span></span>'),u2=M('<button type="button" class="attachment-edit svelte-1cnmaqf" aria-label="Edit and resend image" title="Edit and resend image"><!> <span class="attachment-edit-label svelte-1cnmaqf">Edit &amp; send</span></button>'),o2=M('<figure class="attachment-card svelte-1cnmaqf"><div class="attachment-shell svelte-1cnmaqf"><a class="attachment-link svelte-1cnmaqf" target="_blank" rel="noreferrer"><img loading="lazy" class="svelte-1cnmaqf"/></a> <!></div></figure>'),i2=M('<div class="message-attachments svelte-1cnmaqf"></div>'),l2=M('<div class="message-meta svelte-1cnmaqf"><time class="svelte-1cnmaqf"> </time></div>'),c2=M('<button type="button" class="message-action svelte-1cnmaqf" aria-label="Edit message"><!></button> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Retry message"><!></button>',1),d2=M('<button type="button" class="message-action svelte-1cnmaqf" aria-label="View usage details"><!></button>'),f2=M('<article><div><!> <div class="message-content svelte-1cnmaqf"><!> <!></div> <!> <div class="message-actions svelte-1cnmaqf"><button type="button"><!></button> <!> <!> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Delete message"><!></button></div></div></article>');function p2(e,t){vt(t,!1);const n=$(),r=$(),s=$(),a=$();let o=se(t,"message",8),i=se(t,"toolSummary",8),l=se(t,"copied",8,!1),c=se(t,"disableDelete",8,!1);const f=Ht();let d=$(!1),v=$([]),h=$(!1),p=$(!1),k=$("View tool usage"),C=$(null),y=$(null),A=$(null);const E=new Intl.NumberFormat(void 0,{maximumFractionDigits:0});function _(){f("copy",{message:o()})}function T(){f("openReasoning",{message:o()})}function w(){f("openTool",{message:o()})}function F(){f("openWebSearchDetails",{message:o()})}function W(){const q=o().details?.generationId;q&&f("openUsage",{id:q})}function U(){f("edit",{message:o()})}function D(){f("retry",{message:o()})}function N(){c()||f("delete",{message:o()})}function G(q){f("editAttachment",{message:o(),attachment:q})}function I(q){const le=q.metadata?.filename;return typeof le=="string"&&le.trim()?le:null}function Y(q){const le=I(q);return le?`Open attachment ${le}`:"Open attachment"}function Z(q){return I(q)??"Attachment preview"}const X="America/New_York";function fe(q){if(!q)return null;const le=new Date(q);if(Number.isNaN(le.getTime()))return null;const Q=new Intl.DateTimeFormat("en-US",{timeZone:"UTC",weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(le),ae=Ye=>Q.find(xt=>xt.type===Ye)?.value??"",Pe=ae("weekday"),Ue=ae("month"),Se=ae("day"),Ve=ae("year"),He=ae("hour"),qe=ae("minute"),at=ae("second");return`${Pe} ${Ue} ${Se} ${Ve} ${He}:${qe}:${at} UTC`.replace(/\s+/g," ")}function ne(q,le){if(!q)return null;const Q=typeof q=="string"&&q?q:String(q),ae=new Date(Q);if(Number.isNaN(ae.getTime()))return{iso:Q,display:Q,tooltip:Q};try{const Ue=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:X,timeZoneName:"short"}).formatToParts(ae),Se=mt=>Ue.find(tt=>tt.type===mt)?.value??"",Ve=Se("hour"),He=Se("minute"),qe=Se("second"),at=Se("dayPeriod"),Ye=Se("timeZoneName"),xt=`${Ve}:${He} ${at}${Ye?` ${Ye}`:""}`.trim(),Tt=`${Ve}:${He}:${qe} ${at}${Ye?` ${Ye}`:""}`.trim(),Mt=new Intl.DateTimeFormat(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:X,timeZoneName:"short"}),vn=fe(le??q),Xt=`${Mt.format(ae)} (${Tt})`,Qt=vn?`${Xt}
${vn}`:Xt;return{iso:Q,display:xt,tooltip:Qt}}catch(Pe){console.warn("Failed to format timestamp",Pe);const Ue=fe(le??q);return{iso:Q,display:ae.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),tooltip:Ue??Q}}}ve(()=>R(i()),()=>{b(n,i()?.tokens?.totalTokens??null)}),ve(()=>u(n),()=>{b(A,u(n)!=null?`${E.format(u(n))} tokens`:null)}),ve(()=>R(i()),()=>{b(C,i()?.count&&i().count>0?`Ã${i().count}`:null)}),ve(()=>R(i()),()=>{b(p,!!i()?.used)}),ve(()=>{},()=>{b(y,null)}),ve(()=>(R(i()),u(A)),()=>{b(k,(()=>{const q=[];return i()?.count&&i().count>0&&q.push(`${i().count} ${i().count===1?"hop":"hops"}`),u(A)&&q.push(`${u(A)}`),q.length===0?"View tool usage":`View tool usage â ${q.join(", ")}`})())}),ve(()=>R(o()),()=>{b(d,(o().details?.reasoning?.length??0)>0||!!o().details?.reasoningStatus)}),ve(()=>(R(o()),u(v),Gr),()=>{const q=o().details?.meta?.web_search_results;o().role==="assistant"&&(console.log("=== FULL MESSAGE DEBUG ==="),console.log("Message ID:",o().id),console.log("Message role:",o().role),console.log("Message.details:",JSON.stringify(o().details,null,2)),console.log("webSearchResults:",q),console.log("Is Array?",Array.isArray(q)),console.log("Length:",Array.isArray(q)?q.length:0),console.log("========================")),Array.isArray(q)&&q.length>0?(b(v,q.map(le=>({url:le.url||"",title:le.title||le.name||"",content:le.snippet||le.content||le.description||""})).filter(le=>le.url)),console.log("Citations extracted:",u(v))):(b(v,Gr(o().details?.citations??null,o().details?.meta??null,o().details??null,o().content??null,{content:typeof o().content=="string"?o().content:null})),console.log("Citations from collectCitations:",u(v)))}),ve(()=>u(v),()=>{b(r,u(v).length>0)}),ve(()=>R(o()),()=>{b(h,!!o().details?.webSearchConfig)}),ve(()=>R(o()),()=>{b(s,(o().attachments?.length??0)>0)}),ve(()=>R(o()),()=>{b(a,ne(o().createdAt,o().createdAtUtc))}),Zt(),bt();var ue=f2(),L=g(ue);let j;var ce=g(L);{var ge=q=>{var le=a2(),Q=g(le),ae=g(Q),Pe=x(ae);{var Ue=Se=>{var Ve=s2(),He=g(Ve);{var qe=mt=>{var tt=Jg(),Le=g(tt);H(()=>V(Le,`â ${R(o()),m(()=>o().details.model)??""}`)),S(mt,tt)};O(He,mt=>{R(o()),m(()=>o().details?.model)&&mt(qe)})}var at=x(He,2);{var Ye=mt=>{var tt=Xg(),Le=g(tt);H(()=>V(Le,u(A))),S(mt,tt)};O(at,mt=>{u(A)&&mt(Ye)})}var xt=x(at,2);{var Tt=mt=>{var tt=Qg();let Le;var it=g(tt);o1(it,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),H(Je=>{Le=zt(tt,1,"sender-reasoning-indicator svelte-1cnmaqf",null,Le,Je),de(tt,"title",(R(o()),m(()=>o().details?.reasoningStatus==="streaming"?"Reasoning stream in progress":"View reasoning trace")))},[()=>({streaming:o().details?.reasoningStatus==="streaming"})]),B("click",tt,T),S(mt,tt)};O(xt,mt=>{u(d)&&mt(Tt)})}var Mt=x(xt,2);{var vn=mt=>{var tt=e2(),Le=g(tt);d1(Le,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),B("click",tt,F),S(mt,tt)};O(Mt,mt=>{u(h)&&mt(vn)})}var Xt=x(Mt,2);{var Qt=mt=>{var tt=r2(),Le=g(tt);m1(Le,{size:14,strokeWidth:1.8,"aria-hidden":"true"});var it=x(Le,2);{var Je=We=>{var ut=t2(),kt=g(ut);H(()=>V(kt,u(C))),S(We,ut)};O(it,We=>{u(C)&&We(Je)})}var $t=x(it,2);{var en=We=>{var ut=n2(),kt=g(ut);H(()=>V(kt,u(y))),S(We,ut)};O($t,We=>{u(y)&&We(en)})}H(()=>{de(tt,"aria-label",u(k)),de(tt,"title",u(k))}),B("click",tt,w),S(mt,tt)};O(Xt,mt=>{u(p)&&mt(Qt)})}S(Se,Ve)};O(Pe,Se=>{R(o()),m(()=>o().role==="assistant")&&Se(Ue)})}H(()=>V(ae,`${R(o()),m(()=>o().role)??""} `)),S(q,le)};O(ce,q=>{R(o()),m(()=>o().role!=="user")&&q(ge)})}var K=x(ce,2),z=g(K);{var J=q=>{var le=xe(),Q=pe(le);Uo(Q,()=>(R(Ds),R(o()),m(()=>Ds(o().text)))),S(q,le)};O(z,q=>{R(o()),m(()=>o().text)&&q(J)})}var _e=x(z,2);{var oe=q=>{var le=i2();Dt(le,5,()=>(R(o()),m(()=>o().attachments)),Q=>Q.id??Q.displayUrl??Q.deliveryUrl,(Q,ae)=>{var Pe=o2(),Ue=g(Pe),Se=g(Ue),Ve=g(Se),He=x(Se,2);{var qe=at=>{var Ye=u2(),xt=g(Ye);fl(xt,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),B("click",Ye,()=>G(u(ae))),S(at,Ye)};O(He,at=>{R(o()),m(()=>o().role==="assistant")&&at(qe)})}H((at,Ye)=>{de(Se,"href",(u(ae),m(()=>u(ae).displayUrl||u(ae).deliveryUrl))),de(Se,"aria-label",at),de(Ve,"src",(u(ae),m(()=>u(ae).displayUrl||u(ae).deliveryUrl))),de(Ve,"alt",Ye)},[()=>(u(ae),m(()=>Y(u(ae)))),()=>(u(ae),m(()=>Z(u(ae))))]),S(Q,Pe)}),S(q,le)};O(_e,q=>{R(o()),m(()=>o().attachments?.length)&&q(oe)})}rs(K,q=>Go?.(q));var be=x(K,2);{var te=q=>{var le=l2(),Q=g(le),ae=g(Q);H(()=>{de(Q,"datetime",(u(a),m(()=>u(a).iso))),de(Q,"title",(u(a),m(()=>u(a).tooltip))),V(ae,(u(a),m(()=>u(a).display)))}),S(q,le)};O(be,q=>{u(a)&&q(te)})}var Te=x(be,2),$e=g(Te);let Re;var Xe=g($e);{var Fe=q=>{l1(q,{size:16,strokeWidth:1.6,"aria-hidden":"true"})},Qe=q=>{c1(q,{size:16,strokeWidth:1.6,"aria-hidden":"true"})};O(Xe,q=>{l()?q(Fe):q(Qe,!1)})}var he=x($e,2);{var ke=q=>{var le=c2(),Q=pe(le),ae=g(Q);fl(ae,{size:16,strokeWidth:1.6,"aria-hidden":"true"});var Pe=x(Q,2),Ue=g(Pe);f1(Ue,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),B("click",Q,U),B("click",Pe,D),S(q,le)};O(he,q=>{R(o()),m(()=>o().role==="user")&&q(ke)})}var Ne=x(he,2);{var re=q=>{var le=d2(),Q=g(le);i1(Q,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),B("click",le,W),S(q,le)};O(Ne,q=>{R(o()),m(()=>o().role==="assistant"&&o().details?.generationId)&&q(re)})}var Ee=x(Ne,2),ze=g(Ee);h1(ze,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),H((q,le)=>{zt(ue,1,(R(o()),m(()=>`message ${o().role}`)),"svelte-1cnmaqf"),j=zt(L,1,"bubble svelte-1cnmaqf",null,j,q),Re=zt($e,1,"message-action svelte-1cnmaqf",null,Re,le),de($e,"aria-label",l()?"Message copied":"Copy message"),Ee.disabled=c()},[()=>({"has-attachments":u(s)}),()=>({copied:l()})]),B("click",$e,_),B("click",Ee,N),S(e,ue),gt()}var h2=M('<p class="reasoning-modal-subtitle svelte-2cxve6"> </p>'),m2=M('<span aria-live="polite"><span class="reasoning-status-indicator svelte-2cxve6" aria-hidden="true"></span> </span>'),v2=M('<p class="reasoning-modal-status svelte-2cxve6">No reasoning data received yet.</p>'),g2=M('<pre class="reasoning-modal-text svelte-2cxve6"> </pre>'),_2=M('<div class="reasoning-modal-layer svelte-2cxve6"><button type="button" class="reasoning-modal-backdrop svelte-2cxve6" aria-label="Close reasoning details"></button> <div class="reasoning-modal svelte-2cxve6" role="dialog" aria-modal="true" aria-labelledby="reasoning-modal-title" tabindex="-1"><header class="reasoning-modal-header svelte-2cxve6"><div class="svelte-2cxve6"><h2 id="reasoning-modal-title" class="svelte-2cxve6">Reasoning trace</h2> <!></div> <div class="reasoning-modal-actions svelte-2cxve6"><!> <button type="button" class="modal-close svelte-2cxve6" aria-label="Close reasoning details">Close</button></div></header> <section class="reasoning-modal-body svelte-2cxve6"><!></section></div></div>');function b2(e,t){vt(t,!1);const n=Ht();let r=se(t,"open",8,!1),s=se(t,"messageId",8,null),a=se(t,"segments",24,()=>[]),o=se(t,"status",8,null),i=$(null),l=$(null),c=$("");const f=12;let d=!0,v=!1;function h(_){if(!_||_.length===0)return"";let T="",w;for(const F of _){if(!F||typeof F.text!="string"||F.text.length===0)continue;const W=F.text;w&&F.type&&w!==F.type&&(T.endsWith(`
`)||(T+=`
`),T+=`
`),T.length>0&&!T.endsWith(" ")&&!T.endsWith(`
`)&&!T.endsWith("	")&&!T.endsWith("(")&&!T.endsWith("[")&&!T.endsWith("{")&&!T.endsWith("/")&&!T.endsWith("'")&&!T.endsWith("â")&&!/^[\s,.!?;:)/\]\}'"âºÂ»]/u.test(W)&&W[0]!=="'"&&W[0]!=="â"&&(T+=" "),T+=W,w=F.type??w}return T}Kc(()=>{r()&&!v&&(d=!0),v=r(),r()&&u(i)&&u(i).focus(),r()&&u(l)&&o()==="streaming"&&d&&xc(l,u(l).scrollTop=u(l).scrollHeight)});function p(){if(!u(l))return;const{scrollTop:_,scrollHeight:T,clientHeight:w}=u(l);d=T-(_+w)<=f}function k(){n("close")}function C(_){r()&&_.key==="Escape"&&(_.preventDefault(),k())}ve(()=>R(a()),()=>{b(c,h(a()))}),Zt(),bt();var y=xe();B("keydown",vu,C);var A=pe(y);{var E=_=>{var T=_2(),w=g(T),F=x(w,2),W=g(F),U=g(W),D=x(g(U),2);{var N=L=>{var j=h2(),ce=g(j);H(()=>V(ce,`Message ID: ${s()??""}`)),S(L,j)};O(D,L=>{s()&&L(N)})}var G=x(U,2),I=g(G);{var Y=L=>{var j=m2(),ce=x(g(j));H(()=>{zt(j,1,`reasoning-status ${o()}`,"svelte-2cxve6"),V(ce,` ${o()==="streaming"?"Streaming":"Complete"}`)}),S(L,j)};O(I,L=>{o()&&L(Y)})}var Z=x(I,2),X=x(W,2),fe=g(X);{var ne=L=>{var j=v2();S(L,j)},ue=L=>{var j=g2(),ce=g(j);H(()=>V(ce,u(c))),S(L,j)};O(fe,L=>{u(c),m(()=>u(c).length===0)?L(ne):L(ue,!1)})}zr(X,L=>b(l,L),()=>u(l)),zr(F,L=>b(i,L),()=>u(i)),B("click",w,k),B("click",Z,k),B("scroll",X,p),S(_,T)};O(A,_=>{r()&&_(E)})}S(e,y),gt()}var y2=M('<p class="status">No tool activity recorded.</p>'),x2=M('<span class="tool-usage-modal-status-pill svelte-12mixwl"> </span>'),k2=M('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Input</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),w2=M('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Output</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),S2=M('<p class="status tool-usage-status svelte-12mixwl">No details provided.</p>'),E2=M('<li class="tool-usage-modal-item svelte-12mixwl"><div class="tool-usage-modal-item-header svelte-12mixwl"><span class="tool-usage-modal-name svelte-12mixwl"> </span> <!></div> <details class="tool-usage-modal-details svelte-12mixwl"><summary class="tool-usage-modal-summary svelte-12mixwl">Show input &amp; output</summary> <!> <!> <!></details></li>'),C2=M('<ul class="tool-usage-modal-list svelte-12mixwl"></ul>'),A2=M('<p class="model-settings-subtitle"> </p>'),T2=M('<h2 id="tool-usage-modal-title">Tools used</h2> <!>',1);function D2(e,t){vt(t,!1);const n=Ht();let r=se(t,"open",8,!1),s=se(t,"messageId",8,null),a=se(t,"tools",24,()=>[]);function o(){n("close")}bt();var i=xe(),l=pe(i);{var c=f=>{wr(f,{get open(){return r()},labelledBy:"tool-usage-modal-title",modalClass:"tool-usage-modal",bodyClass:"tool-usage-body",closeLabel:"Close tool usage details",$$events:{close:o},children:(d,v)=>{var h=xe(),p=pe(h);{var k=y=>{var A=y2();S(y,A)},C=y=>{var A=C2();Dt(A,5,a,E=>E.id,(E,_)=>{var T=E2(),w=g(T),F=g(w),W=g(F),U=x(F,2);{var D=ne=>{var ue=x2(),L=g(ue);H(()=>V(L,(u(_),m(()=>u(_).status)))),S(ne,ue)};O(U,ne=>{u(_),m(()=>u(_).status)&&ne(D)})}var N=x(w,2),G=x(g(N),2);{var I=ne=>{var ue=k2(),L=x(g(ue),2),j=g(L);Uo(j,()=>(R(Ds),u(_),m(()=>Ds(u(_).input)))),rs(L,ce=>Go?.(ce)),S(ne,ue)};O(G,ne=>{u(_),m(()=>u(_).input)&&ne(I)})}var Y=x(G,2);{var Z=ne=>{var ue=w2(),L=x(g(ue),2),j=g(L);Uo(j,()=>(R(Ds),u(_),m(()=>Ds(u(_).result)))),rs(L,ce=>Go?.(ce)),S(ne,ue)};O(Y,ne=>{u(_),m(()=>u(_).result)&&ne(Z)})}var X=x(Y,2);{var fe=ne=>{var ue=S2();S(ne,ue)};O(X,ne=>{u(_),m(()=>!u(_).input&&!u(_).result)&&ne(fe)})}H(()=>V(W,(u(_),m(()=>u(_).name)))),S(E,T)}),S(y,A)};O(p,y=>{R(a()),m(()=>a().length===0)?y(k):y(C,!1)})}S(d,h)},$$slots:{default:!0,heading:(d,v)=>{var h=T2(),p=x(pe(h),2);{var k=C=>{var y=A2(),A=g(y);H(()=>V(A,`Message ID: ${s()??""}`)),S(C,y)};O(p,C=>{s()&&C(k)})}S(d,h)}}})};O(l,f=>{r()&&f(c)})}S(e,i),gt()}var F2=M('<p class="status svelte-1oswcu0">No web search details available.</p>'),M2=M('<div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Context Size</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Amount of search context provided to the model</div></div>'),P2=M('<div class="detail-item full-width svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Custom Search Prompt</div> <div class="detail-value prompt svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Instructions for how to incorporate search results</div></div>'),I2=M('<div class="details-grid svelte-1oswcu0"><div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Search Engine</div> <div class="detail-value engine svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0"><!></div></div> <div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Max Results</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Number of search results retrieved</div></div> <!> <!></div>'),N2=M('<p class="model-settings-subtitle"> </p>'),L2=M('<h2 id="web-search-details-modal-title">Web Search Details</h2> <!>',1);function O2(e,t){vt(t,!1);const n=Ht();let r=se(t,"open",8,!1),s=se(t,"messageId",8,null),a=se(t,"details",8,null);function o(){n("close")}function i(v){return v?v==="native"?"Native (OpenAI/Anthropic)":v==="exa"?"Exa":v:"Auto"}function l(v){return v?v.charAt(0).toUpperCase()+v.slice(1):"Default"}bt();var c=xe(),f=pe(c);{var d=v=>{wr(v,{get open(){return r()},labelledBy:"web-search-details-modal-title",modalClass:"web-search-details-modal",bodyClass:"web-search-details-modal-body",closeLabel:"Close web search details",$$events:{close:o},children:(h,p)=>{var k=xe(),C=pe(k);{var y=E=>{var _=F2();S(E,_)},A=E=>{var _=I2(),T=g(_),w=x(g(T),2),F=g(w),W=x(w,2),U=g(W);{var D=ue=>{var L=kn("Automatic selection based on model provider");S(ue,L)},N=ue=>{var L=xe(),j=pe(L);{var ce=K=>{var z=kn("Using provider's built-in web search");S(K,z)},ge=K=>{var z=xe(),J=pe(z);{var _e=oe=>{var be=kn("Using Exa's AI-powered search API");S(oe,be)};O(J,oe=>{R(a()),m(()=>a().engine==="exa")&&oe(_e)},!0)}S(K,z)};O(j,K=>{R(a()),m(()=>a().engine==="native")?K(ce):K(ge,!1)},!0)}S(ue,L)};O(U,ue=>{R(a()),m(()=>!a().engine||a().engine===null)?ue(D):ue(N,!1)})}var G=x(T,2),I=x(g(G),2),Y=g(I),Z=x(G,2);{var X=ue=>{var L=M2(),j=x(g(L),2),ce=g(j);H(ge=>V(ce,ge),[()=>(R(a()),m(()=>l(a().contextSize)))]),S(ue,L)};O(Z,ue=>{R(a()),m(()=>a().contextSize)&&ue(X)})}var fe=x(Z,2);{var ne=ue=>{var L=P2(),j=x(g(L),2),ce=g(j);H(()=>V(ce,(R(a()),m(()=>a().searchPrompt)))),S(ue,L)};O(fe,ue=>{R(a()),m(()=>a().searchPrompt&&a().searchPrompt.trim())&&ue(ne)})}H(ue=>{V(F,ue),V(Y,(R(a()),m(()=>a().maxResults??5)))},[()=>(R(a()),m(()=>i(a().engine)))]),S(E,_)};O(C,E=>{a()?E(A,!1):E(y)})}S(h,k)},$$slots:{default:!0,heading:(h,p)=>{var k=L2(),C=x(pe(k),2);{var y=A=>{var E=N2(),_=g(E);H(()=>V(_,`Message ID: ${s()??""}`)),S(A,E)};O(C,A=>{s()&&A(y)})}S(h,k)}}})};O(f,v=>{r()&&v(d)})}S(e,c),gt()}var $2=M('<div class="conversation-item svelte-26wxji"><!></div>'),R2=M('<section class="conversation svelte-26wxji" aria-live="polite"></section> <!> <!> <!> <!>',1);function z2(e,t){vt(t,!1);const n=()=>ht(_,"$toolUsageModal",o),r=()=>ht(T,"$reasoningModal",o),s=()=>ht(w,"$citationsModal",o),a=()=>ht(F,"$webSearchDetailsModal",o),[o,i]=Kn();let l=se(t,"messages",24,()=>[]),c=se(t,"disableDelete",8,!1),f=$(null),d=$(null),v=null,h=$([]),p=$({}),k=$({});const C="tool";let y=!1;const A=12;let E=!0;const _=Ch(),T=bh(),w=md(),F=Ah(),W=Ht();Kc(()=>{if(u(f)){if(y){y=!1;return}E&&xc(f,u(f).scrollTop=u(f).scrollHeight)}});function U(){if(!u(f))return;const{scrollTop:te,scrollHeight:Te,clientHeight:$e}=u(f);E=Te-(te+$e)<=A}function D(te){te&&W("openGenerationDetails",{id:te})}async function N(te){try{await navigator.clipboard.writeText(te.text??"")}catch(Te){console.error("Failed to copy message",Te);return}b(d,te.id),y=!0,v&&clearTimeout(v),v=setTimeout(()=>{y=!0,b(d,null),v=null},2e3)}Os(()=>{v&&clearTimeout(v)});function G(te){_.openForMessage(l(),u(k),te.id,C)}function I(){_.close()}function Y(te){T.openForMessage(te)}function Z(){T.close()}function X(te){const Te=Gr(te.details?.citations??null,te.details?.meta??null,te.details??null);w.openWithCitations(te.id,Te)}function fe(){w.close()}function ne(te){F.openForMessage(te)}function ue(){F.close()}function L(te){te&&W("deleteMessage",{id:te.id})}function j(te){te&&W("retryMessage",{id:te.id})}function ce(te){te&&W("editMessage",{id:te.id})}function ge(te){!te?.message||!te?.attachment||W("editAssistantAttachment",te)}ve(()=>R(l()),()=>{const te=wh(l(),C);b(h,te.visibleMessages),b(p,te.assistantToolUsage),b(k,te.messageIndexMap)}),ve(()=>(R(l()),u(k)),()=>{_.syncEntries(l(),u(k),C)}),ve(()=>R(l()),()=>{T.syncFromMessages(l())}),Zt(),bt();var K=R2(),z=pe(K);Dt(z,5,()=>u(h),te=>te.id,(te,Te)=>{var $e=$2(),Re=g($e);{let Xe=Ct(()=>(u(d),u(Te),m(()=>u(d)===u(Te).id)));p2(Re,{get message(){return u(Te)},get toolSummary(){return u(p),u(Te),m(()=>u(p)[u(Te).id])},get copied(){return u(Xe)},get disableDelete(){return c()},$$events:{copy:Fe=>N(Fe.detail.message),openTool:Fe=>G(Fe.detail.message),openReasoning:Fe=>Y(Fe.detail.message),openCitations:Fe=>X(Fe.detail.message),openWebSearchDetails:Fe=>ne(Fe.detail.message),openUsage:Fe=>D(Fe.detail.id),delete:Fe=>L(Fe.detail.message),retry:Fe=>j(Fe.detail.message),edit:Fe=>ce(Fe.detail.message),editAttachment:Fe=>ge(Fe.detail)}})}S(te,$e)}),zr(z,te=>b(f,te),()=>u(f));var J=x(z,2);D2(J,{get open(){return n(),m(()=>n().open)},get messageId(){return n(),m(()=>n().messageId)},get tools(){return n(),m(()=>n().tools)},$$events:{close:I}});var _e=x(J,2);b2(_e,{get open(){return r(),m(()=>r().open)},get messageId(){return r(),m(()=>r().messageId)},get segments(){return r(),m(()=>r().segments)},get status(){return r(),m(()=>r().status)},$$events:{close:Z}});var oe=x(_e,2);Rh(oe,{get open(){return s(),m(()=>s().open)},get messageId(){return s(),m(()=>s().messageId)},get citations(){return s(),m(()=>s().citations)},$$events:{close:fe}});var be=x(oe,2);O2(be,{get open(){return a(),m(()=>a().open)},get messageId(){return a(),m(()=>a().messageId)},get details(){return a(),m(()=>a().details)},$$events:{close:ue}}),B("scroll",z,U),S(e,K),gt(),i()}const B2=[{key:"temperature",aliases:["temperature"],label:"Temperature",description:"Higher values increase randomness.",fallback:{type:"number",min:0,max:2,step:.1}},{key:"top_p",aliases:["top_p"],label:"Top P",description:"Limits sampling to a cumulative probability mass.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_k",aliases:["top_k"],label:"Top K",description:"Restrict sampling to the top K tokens.",fallback:{type:"integer",min:1,max:400,step:1}},{key:"min_p",aliases:["min_p"],label:"Min P",description:"Nucleus sampling floor; smaller values widen sampling.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_a",aliases:["top_a"],label:"Top A",description:"Alternative nucleus control for certain models.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"max_tokens",aliases:["max_tokens","max_output_tokens"],label:"Max completion tokens",description:"Upper bound on tokens generated in the response.",fallback:{type:"integer",min:1,max:32768,step:1}},{key:"frequency_penalty",aliases:["frequency_penalty"],label:"Frequency penalty",description:"Penalize frequent tokens; useful to reduce repetition.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"presence_penalty",aliases:["presence_penalty"],label:"Presence penalty",description:"Encourage introducing new topics by penalizing seen tokens.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"repetition_penalty",aliases:["repetition_penalty"],label:"Repetition penalty",description:"Higher values push the model away from repeating itself.",fallback:{type:"number",min:0,max:2,step:.05}},{key:"top_logprobs",aliases:["top_logprobs"],label:"Top logprobs",description:"Return log probabilities for the top N tokens per step.",fallback:{type:"integer",min:0,max:20,step:1}},{key:"seed",aliases:["seed"],label:"Seed",description:"Deterministic seed (when supported).",fallback:{type:"integer",min:0,step:1}},{key:"parallel_tool_calls",aliases:["parallel_tool_calls"],label:"Parallel tool calls",description:"Allow the model to invoke multiple tools simultaneously.",fallback:{type:"boolean"}},{key:"structured_outputs",aliases:["structured_outputs","json_schema","response_format"],label:"Structured outputs",description:"Favor structured responses when supported by the provider.",fallback:{type:"boolean"}},{key:"safe_prompt",aliases:["safe_prompt"],label:"Safe prompt",description:"Ask the provider to apply additional safety prompting.",fallback:{type:"boolean"}},{key:"raw_mode",aliases:["raw_mode"],label:"Raw mode",description:"Bypass guardrails when the provider allows it.",fallback:{type:"boolean"}}];function ha(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function Fo(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);if(Number.isFinite(t))return t}}function Kd(e){const t={};if(!e||!e.capabilities)return t;const r=e.capabilities.parameters;if(!r||typeof r!="object")return t;function s(a,o){const i=ha(a);if(!i||!o||typeof o!="object")return;const l=o,c={},f=l.type??l.datatype??l.kind;typeof f=="string"&&(c.type=f.toLowerCase());const d=l.min??l.minimum??l.lower_bound??l.minimum_value,v=l.max??l.maximum??l.upper_bound??l.maximum_value,h=l.step??l.increment??l.resolution,p=Fo(d),k=Fo(v),C=Fo(h);p!==void 0&&(c.min=p),k!==void 0&&(c.max=k),C!==void 0&&(c.step=C),t[i]=c;const y=l.properties;if(y&&typeof y=="object")for(const[A,E]of Object.entries(y))s(`${a}.${A}`,E)}for(const[a,o]of Object.entries(r))s(a,o);return t}function Yd(e){const t=new Set;if(!e)return t;const n=e.supported_parameters_normalized;if(Array.isArray(n))for(const s of n){const a=ha(s);a&&t.add(a)}const r=e.supported_parameters;if(Array.isArray(r))for(const s of r){const a=ha(s);a&&t.add(a)}if(t.size===0)for(const s of yi(e)){const a=ha(s);a&&t.add(a)}return t}function U2(e,t){const n=e.fallback;if(n.type==="boolean")return{key:e.key,label:e.label,description:e.description,type:"boolean"};const r={key:e.key,label:e.label,description:e.description,type:n.type,min:n.min,max:n.max,step:n.step};if(!t)return r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r;const s=t.type?.toLowerCase();return s==="boolean"?{key:e.key,label:e.label,description:e.description,type:"boolean"}:(s==="integer"||s==="int"?r.type="integer":(s==="number"||s==="float"||s==="double")&&(r.type="number"),t.min!==void 0&&(r.min=t.min),t.max!==void 0&&(r.max=t.max),t.step!==void 0&&(r.step=t.step),r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r)}function j2(e,t){const n=Yd(e),r=new Set(t?Object.keys(t):[]),s=Kd(e),a=[],o=new Set;for(const i of B2){if(!i.aliases.some(d=>n.has(d))&&!r.has(i.key)||o.has(i.key))continue;const c=i.aliases.map(d=>s[d]).find(d=>d!==void 0),f=U2(i,c);"min"in f&&"max"in f&&f.min!==void 0&&f.max!==void 0&&f.min>=f.max&&(f.min=void 0,f.max=void 0),a.push(f),o.add(i.key)}return a}function Jd(e,t){const n=e?.[t];return typeof n=="number"&&Number.isFinite(n)?n:void 0}function Eu(e,t){let n=e;return t.min!==void 0&&(n=Math.max(n,t.min)),t.max!==void 0&&(n=Math.min(n,t.max)),n}function Xd(e){const t=e.min??0,n=e.max??t;if(t<=0&&n>=0)return Eu(0,e);const r=t+(n-t)/2;return Eu(r,e)}function q2(e,t){const n=Jd(t,e.key);return n!==void 0?Eu(n,e):Xd(e)}function tc(e){if(e.step&&e.step>0)return e.step;if(e.type==="integer")return 1;const t=e.min??0,r=(e.max??t+1)-t;if(!Number.isFinite(r)||r<=0)return .01;const s=r/100;return s>0?s:.01}function H2(e,t){const n=e.min??0,s=(e.max??n)-n;if(!Number.isFinite(s)||s===0)return"0%";const o=(Eu(t??Xd(e),e)-n)/s*100;return`${Math.min(100,Math.max(0,o))}%`}const W2=new Intl.NumberFormat(void 0,{maximumFractionDigits:4});function Cu(e){return typeof e=="number"&&Number.isFinite(e)?String(e):""}function ra(e,t){return t.type==="integer"?String(Math.round(e)):W2.format(e)}var V2=M('<div class="setting-range"><div class="setting-range-header"><span> </span> <button type="button" class="range-reset">Use default</button></div> <input class="range-input" type="range"/> <div class="range-extents"><span> </span> <span> </span></div></div>');function G2(e,t){vt(t,!1);const n=$(),r=$(),s=$(),a=$(),o=$();let i=se(t,"field",8),l=se(t,"parameters",8),c=se(t,"numericValue",8),f=se(t,"hasCustom",8,!1),d=se(t,"handlers",8);ve(()=>(R(i()),R(l())),()=>{b(n,q2(i(),l()))}),ve(()=>(R(i()),R(c())),()=>{b(r,H2(i(),c()))}),ve(()=>(R(c()),R(i())),()=>{b(s,c()!==void 0?ra(c(),i()):"Provider default")}),ve(()=>(R(i()),u(n)),()=>{b(a,i().min??u(n))}),ve(()=>(R(i()),u(n)),()=>{b(o,i().max??u(n))}),Zt(),bt();var v=V2(),h=g(v),p=g(h);let k;var C=g(p),y=x(p,2),A=x(h,2),E=x(A,2),_=g(E),T=g(_),w=x(_,2),F=g(w);H((W,U,D,N)=>{k=zt(p,1,"range-value",null,k,W),V(C,u(s)),y.disabled=!f(),de(A,"min",(R(i()),m(()=>i().min))),de(A,"max",(R(i()),m(()=>i().max))),de(A,"step",U),St(A,u(n)),fn(A,`--slider-fill:${u(r)};`),de(A,"aria-valuemin",(R(i()),m(()=>i().min))),de(A,"aria-valuemax",(R(i()),m(()=>i().max))),de(A,"aria-valuenow",c()??void 0),de(A,"aria-valuetext",u(s)),V(T,D),V(F,N)},[()=>({default:!f()}),()=>(R(tc),R(i()),m(()=>tc(i()))),()=>(R(ra),u(a),R(i()),m(()=>ra(u(a),i()))),()=>(R(ra),u(o),R(i()),m(()=>ra(u(o),i())))]),B("click",y,()=>d().onRangeReset(i().key)),B("input",A,W=>d().onSliderInput(i().key,W)),S(e,v),gt()}var Z2=M('<span class="setting-hint"> </span>'),K2=M('<input class="input-control" type="number" placeholder="Default"/>'),Y2=M('<div class="setting-boolean"><input type="checkbox"/> <span>Enabled</span></div>'),J2=M('<label class="setting"><div class="setting-header"><span class="setting-label"> </span> <!></div> <!></label>');function X2(e,t){vt(t,!1);let n=se(t,"field",8),r=se(t,"parameters",8),s=se(t,"handlers",8);const a=y=>y.type==="number"||y.type==="integer";let o=$(),i=$(!1);ve(()=>(R(n()),R(r())),()=>{a(n())?b(o,Jd(r(),n().key)):b(o,void 0)}),ve(()=>(R(r()),R(n())),()=>{b(i,r()?.[n().key]!=null)}),Zt(),bt();var l=J2(),c=g(l),f=g(c),d=g(f),v=x(f,2);{var h=y=>{var A=Z2(),E=g(A);H(()=>V(E,(R(n()),m(()=>n().description)))),S(y,A)};O(v,y=>{R(n()),m(()=>n().description)&&y(h)})}var p=x(c,2);{var k=y=>{var A=xe(),E=pe(A);{var _=w=>{G2(w,{get field(){return n()},get parameters(){return r()},get numericValue(){return u(o)},get hasCustom(){return u(i)},get handlers(){return s()}})},T=w=>{var F=K2();H(W=>{de(F,"inputmode",(R(n()),m(()=>n().type==="integer"?"numeric":"decimal"))),de(F,"step",(R(n()),m(()=>n().step??(n().type==="integer"?1:"any")))),de(F,"min",(R(n()),m(()=>n().min??void 0))),de(F,"max",(R(n()),m(()=>n().max??void 0))),St(F,W)},[()=>(R(Cu),R(r()),R(n()),m(()=>Cu(r()?.[n().key])))]),B("change",F,W=>s().onNumberChange(n().key,W)),S(w,F)};O(E,w=>{R(n()),m(()=>n().min!==void 0&&n().max!==void 0)?w(_):w(T,!1)})}S(y,A)},C=y=>{var A=xe(),E=pe(A);{var _=T=>{var w=Y2(),F=g(w);H(()=>{de(F,"id",(R(n()),m(()=>`field-${n().key}`))),Cn(F,(R(r()),R(n()),m(()=>r()?.[n().key]===!0)))}),B("change",F,W=>s().onBooleanChange(n().key,W)),S(T,w)};O(E,T=>{R(n()),m(()=>n().type==="boolean")&&T(_)},!0)}S(y,A)};O(p,y=>{R(n()),m(()=>a(n()))?y(k):y(C,!1)})}H(()=>V(d,(R(n()),m(()=>n().label)))),S(e,l),gt()}var Q2=M("<option> </option>"),e_=M('<label class="reasoning-field"><span>Effort</span> <select class="select-control"><option>Provider default</option><!></select></label>'),t_=M('<label class="reasoning-field"><span>Max reasoning tokens</span> <input class="input-control" type="number" inputmode="numeric" placeholder="Default"/></label>'),n_=M('<section class="setting reasoning"><div class="setting-header"><span class="setting-label">Reasoning tokens</span> <span class="setting-hint">Adjust effort, budget, or output visibility when the provider supports reasoning traces.</span></div> <div class="reasoning-controls"><label class="reasoning-field"><span>Enabled behavior</span> <select class="select-control"><option>Use provider default</option><option>Force enabled</option><option>Disable reasoning</option></select></label> <!> <!> <label class="reasoning-toggle"><input type="checkbox"/> <span>Exclude reasoning from responses</span></label></div></section>');function r_(e,t){vt(t,!1);let n=se(t,"reasoning",8),r=se(t,"handlers",8);bt();var s=n_(),a=x(g(s),2),o=g(a),i=x(g(o),2),l=g(i);l.value=l.__value="default";var c=x(l);c.value=c.__value="on";var f=x(c);f.value=f.__value="off";var d;Pn(i);var v=x(o,2);{var h=A=>{var E=e_(),_=x(g(E),2),T=g(_);T.value=T.__value="";var w=x(T);Dt(w,1,()=>(R(n()),m(()=>n().options)),rr,(W,U)=>{var D=Q2(),N=g(D),G={};H(I=>{V(N,I),G!==(G=u(U))&&(D.value=(D.__value=u(U))??"")},[()=>(u(U),m(()=>u(U).charAt(0).toUpperCase()+u(U).slice(1)))]),S(W,D)});var F;Pn(_),H(()=>{de(E,"aria-disabled",(R(n()),m(()=>!n().effort.supported))),_.disabled=(R(n()),m(()=>!n().effort.supported)),F!==(F=(R(n()),m(()=>n().effort.supported?n().effort.value??"":"")))&&(_.value=(_.__value=(R(n()),m(()=>n().effort.supported?n().effort.value??"":"")))??"",yn(_,(R(n()),m(()=>n().effort.supported?n().effort.value??"":""))))}),B("change",_,function(...W){r().onEffortChange?.apply(this,W)}),S(A,E)};O(v,A=>{R(n()),m(()=>n().effort.showField)&&A(h)})}var p=x(v,2);{var k=A=>{var E=t_(),_=x(g(E),2);H(T=>{de(E,"aria-disabled",(R(n()),m(()=>!n().maxTokens.supported))),de(_,"min",(R(n()),m(()=>n().schemas.maxTokens?.min??void 0))),de(_,"max",(R(n()),m(()=>n().schemas.maxTokens?.max??void 0))),de(_,"step",(R(n()),m(()=>n().schemas.maxTokens?.step??1))),_.disabled=(R(n()),m(()=>!n().maxTokens.supported)),St(_,T)},[()=>(R(Cu),R(n()),m(()=>Cu(n().maxTokens.value)))]),B("change",_,function(...T){r().onMaxTokensChange?.apply(this,T)}),S(A,E)};O(p,A=>{R(n()),m(()=>n().maxTokens.showField)&&A(k)})}var C=x(p,2),y=g(C);H(()=>{d!==(d=(R(n()),m(()=>n().enabledSelection)))&&(i.value=(i.__value=(R(n()),m(()=>n().enabledSelection)))??"",yn(i,(R(n()),m(()=>n().enabledSelection)))),Cn(y,(R(n()),m(()=>n().exclude)))}),B("change",i,function(...A){r().onEnabledChange?.apply(this,A)}),B("change",y,function(...A){r().onExcludeChange?.apply(this,A)}),S(e,s),gt()}const s_=["reasoning","reasoning_effort","reasoning_max_tokens","reasoning_exclude","reasoning_enabled","include_reasoning"],tu={effort:["reasoning.effort","reasoning_effort"],maxTokens:["reasoning.max_tokens","reasoning_max_tokens","thinking_budget"],exclude:["reasoning.exclude","reasoning_exclude","include_reasoning"],enabled:["reasoning.enabled","reasoning_enabled"]};function a_(e){if(!e)return!1;const t=["openai/o1","openai/o3","openai/gpt-5","gpt-5","/grok","grok-"],n=[],r=a=>{if(typeof a!="string")return;const o=a.trim().toLowerCase();o&&n.push(o)};if(r(e.id),r(e.name),Array.isArray(e.tags))for(const a of e.tags)r(a);const s=e;return r(s.series),r(s.family),n.some(a=>t.some(o=>a.includes(o)))}function u_(e){const t=[];for(const n of e){const r=ha(n);r&&t.push(r)}return t}function o_(){return tn(Jt,e=>e.data?.parameters??null)}function i_(e,t){return tn([e,t],([n,r])=>j2(n,r))}function l_(e){return tn(e,t=>!!(t&&Object.keys(t).length>0))}function c_(e){return tn(e,t=>Kd(t))}function d_(e){return tn(e,t=>Yd(t))}function f_(e){return tn(e,t=>{const n=r=>{for(const s of u_(r)){const a=t[s];if(a)return a}};return{effort:n(tu.effort),maxTokens:n(tu.maxTokens),exclude:n(tu.exclude),enabled:n(tu.enabled)}})}function p_(e){return tn(e,t=>t?.reasoning??null)}function h_(e,t,n,r,s){const a=["low","medium","high"];return tn([e,t,n,r,s],([o,i,l,c,f])=>{const d=i?.effort??null,v=i?.max_tokens??null,h=i?.exclude===!0,p=i?i.enabled===!0?"on":i.enabled===!1?"off":"default":"default",k=(()=>{if(o?.reasoning&&Object.keys(o.reasoning).length>0)return!0;for(const W of s_)if(l.has(W))return!0;for(const W of Object.values(c))if(W)return!0;return!1})(),C=!!(c.effort||l.has("reasoning_effort")||a_(f)),y=!!(c.maxTokens||l.has("reasoning_max_tokens")),A=d!==null,E=v!==null;return{supported:k,schemas:c,enabledSelection:p,options:a,effort:{value:d,supported:k&&(C||A),showField:C||A},maxTokens:{value:v,supported:k&&(y||E),showField:y||E},exclude:h}})}function m_(){return jt(null)}function v_(){const e=jt(!1),t=jt(""),n=m_(),r=o_(),s=i_(n,r),a=l_(r),o=c_(n),i=d_(n),l=f_(o),c=p_(r),f=h_(r,c,i,l,n);let d=null;const h=tn([e,t,Jt],([E,_,T])=>({open:E,selectedModel:_,settingsState:T})).subscribe(({open:E,selectedModel:_,settingsState:T})=>{!E||!_||(T.data&&T.data.model!==_&&Jt.setModel(_),d!==_&&(d=_,Jt.clearErrors(),Jt.load(_)))});Os(()=>{h()});const p={onSliderInput:(E,_)=>{const T=_.currentTarget;if(!T)return;const w=Number(T.value);Number.isFinite(w)&&Jt.updateParameter(E,w)},onRangeReset:E=>{Jt.updateParameter(E,null)},onNumberChange:(E,_)=>{const T=_.currentTarget;if(!T)return;const w=T.value.trim();if(!w){Jt.updateParameter(E,null);return}const F=Number(w);if(!Number.isFinite(F)){Jt.updateParameter(E,null);return}Jt.updateParameter(E,F)},onBooleanChange:(E,_)=>{const T=_.currentTarget;T&&Jt.updateParameter(E,T.checked)}};function k(E){const _=rt(c)?{...rt(c)}:{};E(_);for(const T of Object.keys(_)){const w=_[T];(w==null||typeof w=="string"&&w.trim()==="")&&delete _[T]}Object.keys(_).length===0?Jt.updateParameter("reasoning",null):Jt.updateParameter("reasoning",_)}const C={onEnabledChange:E=>{const _=E.currentTarget;if(!_)return;const T=_.value;k(w=>{T==="on"?w.enabled=!0:T==="off"?w.enabled=!1:delete w.enabled})},onEffortChange:E=>{const _=E.currentTarget;if(!_)return;const T=_.value;k(w=>{T?w.effort=T:delete w.effort})},onMaxTokensChange:E=>{const _=E.currentTarget;if(!_)return;const T=_.value.trim();if(!T){k(F=>{delete F.max_tokens});return}const w=Number(T);if(!Number.isFinite(w)||w<=0){k(F=>{delete F.max_tokens});return}k(F=>{F.max_tokens=w})},onExcludeChange:E=>{const _=E.currentTarget;if(!_)return;const T=_.checked;k(w=>{T?w.exclude=!0:delete w.exclude})}};let y={open:!1,selectedModel:"",model:null};function A(E){E.open!==y.open&&(e.set(E.open),y.open=E.open),E.selectedModel!==y.selectedModel&&(t.set(E.selectedModel),y.selectedModel=E.selectedModel),E.model!==y.model&&(n.set(E.model),y.model=E.model)}return{settingsState:Jt,parameters:r,fields:s,hasCustomParameters:a,reasoning:f,parameterHandlers:p,reasoningHandlers:C,resetToDefaults:()=>Jt.resetToDefaults(),flushSave:()=>Jt.flushSave(),sync:A}}var g_=M('<p class="status">Loading settingsâ¦</p>'),__=M('<p class="status error"> </p>'),b_=M('<p class="status">This model does not expose configurable parameters.</p>'),y_=M('<form class="settings-grid"></form>'),x_=M('<div class="settings-stack" aria-live="polite"><!> <!></div>'),k_=M('<h2 id="model-settings-title">Model settings</h2> <p class="model-settings-subtitle"><!></p>',1),w_=M('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),S_=M('<span class="status error"> </span>'),E_=M('<span class="status">Saving changesâ¦</span>'),C_=M('<span class="status">Pending changes; closing this modal will save.</span>'),A_=M('<span class="status">Changes save when you close this modal.</span>'),T_=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function D_(e,t){vt(t,!1);const n=()=>ht(h,"$settingsState",i),r=()=>ht(C,"$hasCustomParameters",i),s=()=>ht(y,"$reasoning",i),a=()=>ht(k,"$fields",i),o=()=>ht(p,"$parameters",i),[i,l]=Kn();let c=se(t,"open",8,!1),f=se(t,"selectedModel",8,""),d=se(t,"model",8,null);const v=Ht(),{settingsState:h,parameters:p,fields:k,hasCustomParameters:C,reasoning:y,parameterHandlers:A,reasoningHandlers:E,resetToDefaults:_,flushSave:T,sync:w}=v_();let F=!1;async function W(){if(F||n().saving)return;F=!0,await T()&&v("close"),F=!1}ve(()=>(R(c()),R(f()),R(d())),()=>{w({open:c(),selectedModel:f(),model:d()})}),Zt(),bt();var U=xe(),D=pe(U);{var N=G=>{wr(G,{get open(){return c()},labelledBy:"model-settings-title",closeLabel:"Close model settings",$$events:{close:()=>void W()},children:(I,Y)=>{var Z=xe(),X=pe(Z);{var fe=ue=>{var L=g_();S(ue,L)},ne=ue=>{var L=xe(),j=pe(L);{var ce=K=>{var z=__(),J=g(z);H(()=>V(J,(n(),m(()=>n().error)))),S(K,z)},ge=K=>{var z=xe(),J=pe(z);{var _e=be=>{var te=b_();S(be,te)},oe=be=>{var te=x_(),Te=g(te);{var $e=Fe=>{r_(Fe,{get reasoning(){return s()},get handlers(){return E}})};O(Te,Fe=>{s(),m(()=>s().supported)&&Fe($e)})}var Re=x(Te,2);{var Xe=Fe=>{var Qe=y_();Dt(Qe,5,a,he=>he.key,(he,ke)=>{X2(he,{get field(){return u(ke)},get parameters(){return o()},get handlers(){return A}})}),S(Fe,Qe)};O(Re,Fe=>{a(),m(()=>a().length)&&Fe(Xe)})}S(be,te)};O(J,be=>{s(),a(),m(()=>!s().supported&&!a().length)?be(_e):be(oe,!1)})}S(K,z)};O(j,K=>{n(),m(()=>n().error)?K(ce):K(ge,!1)},!0)}S(ue,L)};O(X,ue=>{n(),m(()=>n().loading)?ue(fe):ue(ne,!1)})}S(I,Z)},$$slots:{default:!0,heading:(I,Y)=>{var Z=k_(),X=x(pe(Z),2),fe=g(X);{var ne=L=>{var j=kn();H(()=>V(j,(R(d()),m(()=>d().name)))),S(L,j)},ue=L=>{var j=xe(),ce=pe(j);{var ge=z=>{var J=kn();H(()=>V(J,(R(d()),m(()=>d().id)))),S(z,J)},K=z=>{var J=kn();H(()=>V(J,f())),S(z,J)};O(ce,z=>{R(d()),m(()=>d()?.id)?z(ge):z(K,!1)},!0)}S(L,j)};O(fe,L=>{R(d()),m(()=>d()?.name)?L(ne):L(ue,!1)})}S(I,Z)},actions:(I,Y)=>{var Z=w_();H(()=>Z.disabled=(r(),n(),m(()=>!r()||n().saving))),B("click",Z,_),S(I,Z)},footer:(I,Y)=>{var Z=T_(),X=g(Z);{var fe=ue=>{var L=S_(),j=g(L);H(()=>V(j,(n(),m(()=>n().saveError)))),S(ue,L)},ne=ue=>{var L=xe(),j=pe(L);{var ce=K=>{var z=E_();S(K,z)},ge=K=>{var z=xe(),J=pe(z);{var _e=be=>{var te=C_();S(be,te)},oe=be=>{var te=A_();S(be,te)};O(J,be=>{n(),m(()=>n().dirty)?be(_e):be(oe,!1)},!0)}S(K,z)};O(j,K=>{n(),m(()=>n().saving)?K(ce):K(ge,!1)},!0)}S(ue,L)};O(X,ue=>{n(),m(()=>n().saveError)?ue(fe):ue(ne,!1)})}S(I,Z)}}})};O(D,G=>{c()&&G(N)})}S(e,U),gt(),l()}var F_=M('<div class="suggestion-item svelte-1r3jne1"><button type="button" class="suggestion-btn svelte-1r3jne1"> </button> <button type="button" class="delete-btn svelte-1r3jne1" title="Delete suggestion">Ã</button></div>'),M_=M('<div class="add-form svelte-1r3jne1"><input type="text" placeholder="Label" class="svelte-1r3jne1"/> <input type="text" placeholder="Prompt text" class="svelte-1r3jne1"/> <button type="button" class="add-submit-btn svelte-1r3jne1">Add</button> <button type="button" class="add-cancel-btn svelte-1r3jne1">Cancel</button></div>'),P_=M('<button type="button" class="add-btn svelte-1r3jne1" aria-label="Add suggested prompt">+</button>'),I_=M("<section><!> <!></section>");function N_(e,t){vt(t,!1);const n=Ht();let r=se(t,"suggestions",24,()=>[]),s=se(t,"deleting",8,null),a=se(t,"pwaMode",8,!1),o=$(!1),i=$(""),l=$("");function c(T){n("select",{text:T})}function f(T,w){w.stopPropagation(),n("delete",{index:T})}function d(){b(o,!0)}function v(){u(i).trim()&&u(l).trim()&&(n("add"),b(i,""),b(l,""),b(o,!1))}function h(){b(i,""),b(l,""),b(o,!1)}function p(){const T=u(i).trim(),w=u(l).trim();return T&&w?{label:T,text:w}:null}var k={getNewSuggestion:p};bt();var C=I_();let y;var A=g(C);Dt(A,3,r,T=>T.text,(T,w,F)=>{var W=F_(),U=g(W),D=g(U),N=x(U,2);H(()=>{V(D,(u(w),m(()=>u(w).label))),N.disabled=s()===u(F)}),B("click",U,()=>c(u(w).text)),B("click",N,G=>f(u(F),G)),S(T,W)});var E=x(A,2);{var _=T=>{var w=xe(),F=pe(w);{var W=D=>{var N=M_(),G=g(N),I=x(G,2),Y=x(I,2),Z=x(Y,2);sr(G,()=>u(i),X=>b(i,X)),B("keydown",G,X=>X.key==="Enter"&&v()),sr(I,()=>u(l),X=>b(l,X)),B("keydown",I,X=>X.key==="Enter"&&v()),B("click",Y,v),B("click",Z,h),S(D,N)},U=D=>{var N=P_();B("click",N,d),S(D,N)};O(F,D=>{u(o)?D(W):D(U,!1)})}S(T,w)};O(E,T=>{a()||T(_)})}return H(T=>y=zt(C,1,"suggestions svelte-1r3jne1",null,y,T),[()=>({"pwa-layout":a()})]),S(e,C),z0(t,"getNewSuggestion",p),gt(k)}const L_=[{id:"nova-3",name:"Nova 3 (Latest)"},{id:"nova-2",name:"Nova 2 (General)"},{id:"nova-2-medical",name:"Nova 2 Medical"},{id:"nova-2-phonecall",name:"Nova 2 Phone Call"},{id:"nova-2-meeting",name:"Nova 2 Meeting"},{id:"nova-2-finance",name:"Nova 2 Finance"},{id:"nova-2-conversationalai",name:"Nova 2 Conversational AI"},{id:"nova-2-drivethru",name:"Nova 2 Drive-Thru"}],O_={loading:!1,adding:!1,deleting:null,error:null,items:[]};function $_(){const e=jt({...O_});async function t(){e.update(a=>({...a,loading:!0,error:null}));try{const a=await fetch(`${Ft}/api/suggestions`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const o=await a.json();e.update(i=>({...i,loading:!1,items:o.suggestions}))}catch(a){const o=a instanceof Error?a.message:"Failed to load suggestions.";e.update(i=>({...i,loading:!1,error:o}))}}async function n(a,o){e.update(i=>({...i,adding:!0,error:null}));try{const i=await fetch(`${Ft}/api/suggestions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:a,text:o})});if(!i.ok)throw new Error(`HTTP ${i.status}`);const l=await i.json();return e.update(c=>({...c,adding:!1,items:l.suggestions})),l.suggestions}catch(i){const l=i instanceof Error?i.message:"Failed to add suggestion.";return e.update(c=>({...c,adding:!1,error:l})),null}}async function r(a){e.update(o=>({...o,deleting:a,error:null}));try{const o=await fetch(`${Ft}/api/suggestions/${a}`,{method:"DELETE"});if(!o.ok)throw new Error(`HTTP ${o.status}`);const i=await o.json();return e.update(l=>({...l,deleting:null,items:i.suggestions})),i.suggestions}catch(o){const i=o instanceof Error?o.message:"Failed to delete suggestion.";return e.update(l=>({...l,deleting:null,error:i})),null}}function s(){e.update(a=>({...a,error:null}))}return{subscribe:e.subscribe,load:t,add:n,remove:r,clearError:s}}const Cs=$_(),Mo={loading:!1,saving:!1,error:null,saveError:null,value:"",initialValue:"",dirty:!1};function R_(){const e=jt({...Mo});function t(i,l){return i.trim()!==l.trim()}function n(i){return i.system_prompt?.trim()??""}async function r(){e.set({...Mo,loading:!0});try{const i=await J0(),l=n(i);e.set({loading:!1,saving:!1,error:null,saveError:null,value:l,initialValue:l,dirty:!1})}catch(i){const l=i instanceof Error?i.message:"Failed to load system prompt.";e.set({...Mo,loading:!1,error:l})}}function s(i){e.update(l=>{const c=i;return{...l,value:c,dirty:t(c,l.initialValue),saveError:null}})}async function a(){let i="";e.update(c=>(i=c.value,{...c,saving:!0,saveError:null}));const l={system_prompt:i.trim()||null};try{const c=await X0(l),f=n(c);e.set({loading:!1,saving:!1,error:null,saveError:null,value:f,initialValue:f,dirty:!1})}catch(c){const f=c instanceof Error?c.message:"Failed to save system prompt.";e.update(d=>({...d,saving:!1,saveError:f}))}}function o(){e.update(i=>({...i,value:i.initialValue,dirty:!1,saveError:null}))}return{subscribe:e.subscribe,load:r,save:a,reset:o,updateValue:s}}function Mi(e,t){const n=()=>{e.style.height="auto",e.style.height=`${e.scrollHeight}px`},r=()=>n();return n(),e.addEventListener("input",r),{update:()=>n(),destroy:()=>{e.removeEventListener("input",r)}}}var z_=M('<p class="status">Loading system promptâ¦</p>'),B_=M('<p class="status error"> </p>'),U_=M('<p class="status error"> </p>'),j_=M('<textarea class="system-prompt textarea-control" rows="6" placeholder="Provide guidance for the assistant to follow at the start of new conversations."></textarea> <!>',1),q_=M('<p class="status error"> </p>'),H_=M('<p class="status">Loading presetsâ¦</p>'),W_=M('<p class="status">No presets saved yet.</p>'),V_=M('<span class="default-badge" title="Default preset">Default</span>'),G_=M('<span class="filters-badge" title="Contains model explorer filters"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> Filters</span>'),Z_=M('<button type="button" class="btn btn-ghost btn-small" title="Set as default preset to load on startup"> </button>'),K_=M('<li class="preset-item"><div class="meta"><div class="name"> <!> <!></div> <div class="details"><span class="model"> </span> <span class="timestamps"><span title="Created at"> </span> <span aria-hidden="true">Â·</span> <span title="Updated at"> </span></span></div></div> <div class="actions"><button type="button" class="btn btn-ghost btn-small" title="Apply this preset (model, settings, system prompt, MCP servers)"> </button> <button type="button" class="btn btn-ghost btn-small" title="Overwrite preset with current configuration"> </button> <!> <button type="button" class="btn btn-danger btn-small"> </button></div></li>'),Y_=M('<ul class="preset-list" aria-live="polite"></ul>'),J_=M('<p class="status muted"> </p>'),X_=M('<p class="status muted"> </p>'),Q_=M('<p class="status muted">Create, update, or apply a preset.</p>'),eb=M('<p class="status error"> </p>'),tb=M('<p class="status">Loading STT settingsâ¦</p>'),nb=M("<option> </option>"),rb=M('<div class="speech-field"><span class="field-label">Submit delay</span> <div class="speech-presets"><button class="btn btn-soft btn-small" type="button">Instant</button> <button class="btn btn-soft btn-small" type="button">Normal (300ms)</button> <button class="btn btn-soft btn-small" type="button">Slow (800ms)</button></div></div> <div class="speech-field"><label class="field-label" for="auto-submit-delay-input">Custom delay (ms)</label> <input id="auto-submit-delay-input" class="input-control" type="number" min="0" max="10000" step="50"/></div>',1),sb=M('<div class="speech-field"><label class="field-label" for="stt-model-select">Model</label> <select id="stt-model-select" class="input-control"></select></div> <div class="speech-field"><label class="inline-checkbox"><input class="input-control" type="checkbox"/> <span class="field-label">Auto-submit after speaking</span></label></div> <!>',1),ab=M('<div class="speech-field"><label class="field-label" for="stt-mode-select">Recognition mode</label> <select id="stt-mode-select" class="input-control"><option>Conversation (Flux)</option><option>Command (Nova)</option></select> <p class="speech-hint"><!></p></div> <!>',1),ub=M(`<article class="system-card"><header class="system-card-header"><div><h3>System prompt</h3> <p class="system-card-caption">Applied to new chat sessions when no custom prompt is present.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Presets</h3> <p class="system-card-caption">Save and manage snapshots of the current configuration.</p></div></header> <div class="system-card-body"><div class="create-row"><input type="text" class="input-control" placeholder="Preset name" aria-label="Preset name"/> <button type="button" class="btn btn-primary"> </button></div> <!> <!> <!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Speech recognition</h3> <p class="system-card-caption">Configure speech-to-text engine and behavior.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Account</h3> <p class="system-card-caption">Session and authentication settings.</p></div></header> <div class="system-card-body"><div class="account-actions"><a href="/cdn-cgi/access/logout" class="btn btn-danger" title="End your session and require re-authentication"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> Logout</a> <p class="speech-hint">Ends your Cloudflare Access session. You'll need to re-authenticate with your email.</p></div></div></article>`,1),ob=M('<h2 id="system-settings-title">System settings</h2> <p class="model-settings-subtitle">Configure orchestration defaults, presets, and speech settings.</p>',1),ib=M('<p class="status error">Resolve the errors above before closing.</p>'),lb=M('<p class="status error"> </p>'),cb=M('<p class="status error"> </p>'),db=M('<p class="status">Saving changesâ¦</p>'),fb=M('<p class="status">Pending changes; closing this modal will save.</p>'),pb=M('<p class="status">Changes save when you close this modal.</p>'),hb=M('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function mb(e,t){vt(t,!1);const n=()=>ht(c,"$systemPrompt",a),r=()=>ht(_a,"$chatStore",a),s=()=>ht(tr,"$presetsStore",a),[a,o]=Kn();let i=se(t,"open",8,!1);const l=Ht(),c=R_();let f=$(!1),d=!1;async function v(){await Promise.all([c.load(),tr.load(),h()])}async function h(){try{b(F,await Jc()),b(D,null)}catch(oe){b(D,oe instanceof Error?oe.message:"Failed to load STT settings")}}async function p(){return rt(c).dirty?(await c.save(),!rt(c).saveError):!0}async function k(){if(d||n().saving||u(T)||u(U))return;d=!0;const oe=await p(),be=await ge(),te=await C(),Te=rt(c);oe&&be&&te&&!Te.saveError&&l("close"),d=!1}async function C(){if(!u(W)||!u(F))return!0;b(U,!0);try{return b(F,await kp({mode:u(F).mode,command_model:u(F).command_model})),b(W,!1),b(D,null),!0}catch(oe){return b(D,oe instanceof Error?oe.message:"Failed to save STT settings"),!1}finally{b(U,!1)}}let y=$(""),A=$(null),E=$(ne()),_=$(!1),T=$(!1),w=$(null),F=$(null),W=$(!1),U=$(!1),D=$(null);function N(oe){const be=oe.target;c.updateValue(be?.value??"")}function G(){b(y,""),b(A,null)}async function I(){const oe=u(y).trim();if(!oe||!await p())return;await Jt.load(r().selectedModel),await tr.create(oe)&&b(y,"")}async function Y(oe){const be=await tr.apply(oe.name);be?.model&&_a.setModel(be.model),await Cs.load(),l("close")}async function Z(oe){await p()&&(await Jt.load(r().selectedModel),await tr.saveSnapshot(oe.name))}async function X(oe){if(!oe.is_default){if(u(A)===oe.name){await tr.remove(oe.name),b(A,null);return}b(A,oe.name),setTimeout(()=>{u(A)===oe.name&&b(A,null)},3e3)}}async function fe(oe){await tr.setDefault(oe.name)}function ne(){const oe=pa.current??Jr();return{...oe,stt:{...oe.stt}}}function ue(){pa.refresh(),b(E,ne()),b(_,!1),b(T,!1),b(w,null),b(F,null),b(W,!1),b(U,!1),b(D,null)}function L(oe,be){b(E,{...u(E),stt:{...u(E).stt,[oe]:be}}),b(_,!0),b(w,null)}function j(oe,be){const te=oe.target;if(!te)return;const Te=Number(te.value);Number.isFinite(Te)&&be(Te)}function ce(oe){const be=g1[oe];b(E,{...u(E),stt:{...u(E).stt,autoSubmitDelayMs:be.autoSubmitDelayMs}}),b(_,!0),b(w,null)}async function ge(){if(!u(_))return!0;b(T,!0);try{const oe=pa.save(u(E));return b(E,{...oe,stt:{...oe.stt}}),b(_,!1),b(w,null),!0}catch(oe){const be=oe instanceof Error?oe.message:"Failed to save speech settings.";return b(w,be),!1}finally{b(T,!1)}}function K(){b(E,Jr()),b(_,!0),b(w,null)}ve(()=>(R(i()),u(f)),()=>{i()&&!u(f)?(b(f,!0),v(),ue(),G()):!i()&&u(f)&&(b(f,!1),c.reset(),ue(),G())}),Zt(),bt();var z=xe(),J=pe(z);{var _e=oe=>{{let be=Ct(()=>(n(),u(T),m(()=>n().saving||u(T))));wr(oe,{get open(){return i()},labelledBy:"system-settings-title",modalClass:"system-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close system settings",get closeDisabled(){return u(be)},$$events:{close:()=>void k()},children:(te,Te)=>{var $e=ub(),Re=pe($e),Xe=g(Re),Fe=x(g(Xe),2),Qe=g(Fe),he=x(Xe,2),ke=g(he);{var Ne=Le=>{var it=z_();S(Le,it)},re=Le=>{var it=xe(),Je=pe(it);{var $t=We=>{var ut=B_(),kt=g(ut);H(()=>V(kt,(n(),m(()=>n().error)))),S(We,ut)},en=We=>{var ut=j_(),kt=pe(ut);zn(()=>sr(kt,()=>n().value,Ae=>U0(c,m(n).value=Ae,m(n)))),zn(()=>B("input",kt,N)),rs(kt,(Ae,ee)=>Mi?.(Ae),()=>n().value);var De=x(kt,2);{var Ie=Ae=>{var ee=U_(),Ce=g(ee);H(()=>V(Ce,(n(),m(()=>n().saveError)))),S(Ae,ee)};O(De,Ae=>{n(),m(()=>n().saveError)&&Ae(Ie)})}H(()=>kt.disabled=(n(),m(()=>n().saving))),S(We,ut)};O(Je,We=>{n(),m(()=>n().error)?We($t):We(en,!1)},!0)}S(Le,it)};O(ke,Le=>{n(),m(()=>n().loading)?Le(Ne):Le(re,!1)})}var Ee=x(Re,2),ze=x(g(Ee),2),q=g(ze),le=g(q),Q=x(le,2),ae=g(Q),Pe=x(q,2);{var Ue=Le=>{var it=q_(),Je=g(it);H(()=>V(Je,(s(),m(()=>s().error)))),S(Le,it)};O(Pe,Le=>{s(),m(()=>s().error)&&Le(Ue)})}var Se=x(Pe,2);{var Ve=Le=>{var it=H_();S(Le,it)},He=Le=>{var it=xe(),Je=pe(it);{var $t=We=>{var ut=W_();S(We,ut)},en=We=>{var ut=Y_();Dt(ut,5,()=>(s(),m(()=>s().items)),kt=>kt.name,(kt,De)=>{var Ie=K_(),Ae=g(Ie),ee=g(Ae),Ce=g(ee),Ge=x(Ce);{var Ze=Bt=>{var Wt=V_();S(Bt,Wt)};O(Ge,Bt=>{u(De),m(()=>u(De).is_default)&&Bt(Ze)})}var Ke=x(Ge,2);{var et=Bt=>{var Wt=G_();S(Bt,Wt)};O(Ke,Bt=>{u(De),m(()=>u(De).has_filters)&&Bt(et)})}var Rt=x(ee,2),ot=g(Rt),lt=g(ot),Pt=x(ot,2),It=g(Pt),we=g(It),P=x(It,4),ie=g(P),ye=x(Ae,2),nt=g(ye),Be=g(nt),Me=x(nt,2),je=g(Me),me=x(Me,2);{var qt=Bt=>{var Wt=Z_(),Jn=g(Wt);H(()=>{Wt.disabled=(s(),u(De),m(()=>s().settingDefault===u(De).name)),de(Wt,"aria-busy",(s(),u(De),m(()=>s().settingDefault===u(De).name))),V(Jn,(s(),u(De),m(()=>s().settingDefault===u(De).name?"Settingâ¦":"Set as default")))}),B("click",Wt,()=>fe(u(De))),S(Bt,Wt)};O(me,Bt=>{u(De),m(()=>!u(De).is_default)&&Bt(qt)})}var Kt=x(me,2),Et=g(Kt);H((Bt,Wt)=>{V(Ce,`${u(De),m(()=>u(De).name)??""} `),V(lt,(u(De),m(()=>u(De).model))),V(we,Bt),V(ie,Wt),nt.disabled=(s(),u(De),m(()=>s().applying===u(De).name)),de(nt,"aria-busy",(s(),u(De),m(()=>s().applying===u(De).name))),V(Be,(s(),u(De),m(()=>s().applying===u(De).name?"Applyingâ¦":"Apply"))),Me.disabled=(s(),m(()=>s().saving)),de(Me,"aria-busy",(s(),m(()=>s().saving))),V(je,(s(),m(()=>s().saving?"Savingâ¦":"Save snapshot"))),Kt.disabled=(u(De),s(),m(()=>u(De).is_default||s().deleting===u(De).name)),de(Kt,"aria-busy",(s(),u(De),m(()=>s().deleting===u(De).name))),de(Kt,"title",(u(De),m(()=>u(De).is_default?"Cannot delete default preset":"Delete preset"))),V(Et,(u(A),u(De),s(),m(()=>u(A)===u(De).name?"Confirm delete":s().deleting===u(De).name?"Deletingâ¦":"Delete")))},[()=>(u(De),m(()=>new Date(u(De).created_at).toLocaleString())),()=>(u(De),m(()=>new Date(u(De).updated_at).toLocaleString()))]),B("click",nt,()=>Y(u(De))),B("click",Me,()=>Z(u(De))),B("click",Kt,()=>X(u(De))),S(kt,Ie)}),S(We,ut)};O(Je,We=>{s(),m(()=>!s().items.length)?We($t):We(en,!1)},!0)}S(Le,it)};O(Se,Le=>{s(),m(()=>s().loading)?Le(Ve):Le(He,!1)})}var qe=x(Se,2);{var at=Le=>{var it=J_(),Je=g(it);H(()=>V(Je,`Applied preset: ${s(),m(()=>s().lastApplied)??""}`)),S(Le,it)},Ye=Le=>{var it=xe(),Je=pe(it);{var $t=We=>{var ut=X_(),kt=g(ut);H(()=>V(kt,`Saved: ${s(),m(()=>s().lastResult.name)??""}`)),S(We,ut)},en=We=>{var ut=Q_();S(We,ut)};O(Je,We=>{s(),m(()=>s().lastResult)?We($t):We(en,!1)},!0)}S(Le,it)};O(qe,Le=>{s(),m(()=>s().lastApplied)?Le(at):Le(Ye,!1)})}var xt=x(Ee,2),Tt=g(xt),Mt=x(g(Tt),2),vn=g(Mt),Xt=x(Tt,2),Qt=g(Xt);{var mt=Le=>{var it=eb(),Je=g(it);H(()=>V(Je,u(D))),S(Le,it)},tt=Le=>{var it=xe(),Je=pe(it);{var $t=We=>{var ut=tb();S(We,ut)},en=We=>{var ut=ab(),kt=pe(ut),De=x(g(kt),2),Ie=g(De);Ie.value=Ie.__value="conversation";var Ae=x(Ie);Ae.value=Ae.__value="command";var ee;Pn(De);var Ce=x(De,2),Ge=g(Ce);{var Ze=ot=>{var lt=kn(`AI-based turn detection for natural dialogue. Auto-submits when
                you finish speaking.`);S(ot,lt)},Ke=ot=>{var lt=kn("Silence-based detection with specialized vocabulary models.");S(ot,lt)};O(Ge,ot=>{u(F),m(()=>u(F).mode==="conversation")?ot(Ze):ot(Ke,!1)})}var et=x(kt,2);{var Rt=ot=>{var lt=sb(),Pt=pe(lt),It=x(g(Pt),2);Dt(It,5,()=>L_,Me=>Me.id,(Me,je)=>{var me=nb(),qt=g(me),Kt={};H(()=>{V(qt,(u(je),m(()=>u(je).name))),Kt!==(Kt=(u(je),m(()=>u(je).id)))&&(me.value=(me.__value=(u(je),m(()=>u(je).id)))??"")}),S(Me,me)});var we;Pn(It);var P=x(Pt,2),ie=g(P),ye=g(ie),nt=x(P,2);{var Be=Me=>{var je=rb(),me=pe(je),qt=x(g(me),2),Kt=g(qt),Et=x(Kt,2),Bt=x(Et,2),Wt=x(me,2),Jn=x(g(Wt),2);H(()=>St(Jn,(u(E),m(()=>u(E).stt.autoSubmitDelayMs)))),B("click",Kt,()=>ce("fast")),B("click",Et,()=>ce("normal")),B("click",Bt,()=>ce("slow")),B("change",Jn,jr=>j(jr,cs=>L("autoSubmitDelayMs",cs))),S(Me,je)};O(nt,Me=>{u(E),m(()=>u(E).stt.autoSubmit)&&Me(Be)})}H(()=>{It.disabled=u(U),we!==(we=(u(F),m(()=>u(F).command_model)))&&(It.value=(It.__value=(u(F),m(()=>u(F).command_model)))??"",yn(It,(u(F),m(()=>u(F).command_model)))),Cn(ye,(u(E),m(()=>u(E).stt.autoSubmit)))}),B("change",It,Me=>{u(F)&&(b(F,{...u(F),command_model:Me.target.value}),b(W,!0))}),B("change",ye,Me=>L("autoSubmit",Me.target.checked)),S(ot,lt)};O(et,ot=>{u(F),m(()=>u(F).mode==="command")&&ot(Rt)})}H(()=>{De.disabled=u(U),ee!==(ee=(u(F),m(()=>u(F).mode)))&&(De.value=(De.__value=(u(F),m(()=>u(F).mode)))??"",yn(De,(u(F),m(()=>u(F).mode))))}),B("change",De,ot=>{u(F)&&(b(F,{...u(F),mode:ot.target.value}),b(W,!0))}),S(We,ut)};O(Je,We=>{u(F)?We(en,!1):We($t)},!0)}S(Le,it)};O(Qt,Le=>{u(D)?Le(mt):Le(tt,!1)})}H(Le=>{Qe.disabled=(n(),m(()=>!n().dirty||n().saving)),Q.disabled=Le,de(Q,"aria-busy",(s(),m(()=>s().creating))),V(ae,(s(),m(()=>s().creating?"Creatingâ¦":"Create from current"))),vn.disabled=u(T)||u(U)},[()=>(u(y),s(),m(()=>!u(y).trim()||s().creating))]),B("click",Qe,()=>c.reset()),sr(le,()=>u(y),Le=>b(y,Le)),B("keydown",le,Le=>Le.key==="Enter"?I():null),B("click",Q,I),B("click",vn,K),S(te,$e)},$$slots:{default:!0,heading:(te,Te)=>{var $e=ob();S(te,$e)},footer:(te,Te)=>{var $e=hb(),Re=g($e);{var Xe=Qe=>{var he=ib();S(Qe,he)},Fe=Qe=>{var he=xe(),ke=pe(he);{var Ne=Ee=>{var ze=lb(),q=g(ze);H(()=>V(q,u(w))),S(Ee,ze)},re=Ee=>{var ze=xe(),q=pe(ze);{var le=ae=>{var Pe=cb(),Ue=g(Pe);H(()=>V(Ue,u(D))),S(ae,Pe)},Q=ae=>{var Pe=xe(),Ue=pe(Pe);{var Se=He=>{var qe=db();S(He,qe)},Ve=He=>{var qe=xe(),at=pe(qe);{var Ye=Tt=>{var Mt=fb();S(Tt,Mt)},xt=Tt=>{var Mt=pb();S(Tt,Mt)};O(at,Tt=>{n(),u(_),u(W),m(()=>n().dirty||u(_)||u(W))?Tt(Ye):Tt(xt,!1)},!0)}S(He,qe)};O(Ue,He=>{n(),u(T),u(U),m(()=>n().saving||u(T)||u(U))?He(Se):He(Ve,!1)},!0)}S(ae,Pe)};O(q,ae=>{u(D)?ae(le):ae(Q,!1)},!0)}S(Ee,ze)};O(ke,Ee=>{u(w)?Ee(Ne):Ee(re,!1)},!0)}S(Qe,he)};O(Re,Qe=>{n(),m(()=>n().saveError)?Qe(Xe):Qe(Fe,!1)})}S(te,$e)}}})}};O(J,oe=>{i()&&oe(_e)})}S(e,z),gt(),o()}async function vb(){const e=await fetch(`${Ft}/api/clients/cli/llm`);if(!e.ok)throw new Error(`Failed to fetch CLI LLM settings: ${e.statusText}`);return e.json()}async function gb(e){const t=await fetch(`${Ft}/api/clients/cli/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update CLI LLM settings: ${t.statusText}`);return t.json()}async function _b(){const e=await fetch(`${Ft}/api/clients/cli/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset CLI settings: ${e.statusText}`);return e.json()}async function bb(){const e=await fetch(`${Ft}/api/clients/cli/presets`);if(!e.ok)throw new Error(`Failed to fetch CLI presets: ${e.statusText}`);return e.json()}async function yb(e){const t=await fetch(`${Ft}/api/clients/cli/presets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to create CLI preset: ${t.statusText}`);return t.json()}async function xb(e){const t=await fetch(`${Ft}/api/clients/cli/presets/by-name/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete CLI preset: ${t.statusText}`)}async function kb(e){const t=await fetch(`${Ft}/api/clients/cli/presets/by-name/${e}/apply`,{method:"POST"});if(!t.ok)throw new Error(`Failed to apply CLI preset: ${t.statusText}`);return t.json()}const Qo={model:"openai/gpt-4o-mini",system_prompt:`You control this system via shell. Use the available tools to execute user commands.

RULES:
1. ACT directly - execute commands yourself, don't instruct the user.
2. Use shell_execute for commands. Use background=true for GUI apps.
3. If unsure about the system, call host_get_profile first.
4. READ before WRITE - query state before changing it.`,temperature:.7,max_tokens:1e3};function wb(){const e=jt(Qo);let t=!1,n=!1;async function r(){if(n)return rt(e);n=!0;try{const i=await vb(),l={model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens};return e.set(l),t=!0,l}catch(i){return console.error("Failed to load CLI settings:",i),rt(e)}finally{n=!1}}async function s(i){const l=rt(e);e.set({...l,...i,model:i.model??l.model,system_prompt:i.system_prompt??l.system_prompt,temperature:i.temperature??l.temperature,max_tokens:i.max_tokens??l.max_tokens});try{const c=await gb(i);e.update(f=>({...f,model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens}))}catch(c){throw console.error("Failed to update CLI LLM settings:",c),e.set(l),c}}async function a(){try{try{await kb("default"),await r();return}catch{console.log("No user default found, performing hard reset")}await _b(),await r(),await s(Qo)}catch(i){throw console.error("Failed to reset CLI settings:",i),i}}async function o(){const i=rt(e);try{(await bb()).presets.some(c=>c.name==="default")&&await xb("default"),await yb({name:"default",llm:{model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens}})}catch(l){throw console.error("Failed to save as default:",l),l}}return{subscribe:e.subscribe,load:r,updateLlm:s,reset:a,saveAsDefault:o}}const sa=wb();var Sb=M('<p class="status">Loading settingsâ¦</p>'),Eb=M("<option> </option>"),Cb=M('<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior for the CLI.</span></div> <div class="reasoning-controls"><div class="setting-select svelte-17wvx4j" style="grid-column: 1 / -1;"><label class="setting-label" for="cli-llm-model" title="Select the language model for CLI responses.">Model</label> <select id="cli-llm-model" class="select-input svelte-17wvx4j"></select></div> <div class="system-prompt-row svelte-17wvx4j"><label class="setting-label" for="cli-system-prompt" title="Instructions that define how the CLI assistant behaves.">System Prompt</label> <textarea id="cli-system-prompt" class="keyterms-input system-prompt svelte-17wvx4j" rows="6" placeholder="You are a helpful CLI assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="4000" step="50"/> <div class="range-extents"><span>50</span> <span>4000</span></div></div></div></div></div></div>'),Ab=M('<h2 id="cli-settings-title">CLI Settings</h2> <p class="model-settings-subtitle">Configure the command-line assistant.</p>',1),Tb=M('<div slot="actions" style="display: flex; gap: 0.5rem;"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button> <button type="button" class="btn btn-primary btn-small"> </button></div>'),Db=M("<span> </span>"),Fb=M('<span class="status">Saving changesâ¦</span>'),Mb=M('<span class="status">Pending changes; closing this modal will save.</span>'),Pb=M('<span class="status">Changes save on close. "Set as default" updates the reset target.</span>'),Ib=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function Nb(e,t){vt(t,!1);const n=()=>ht(a,"$filtered",r),[r,s]=Kn(),{filtered:a}=lr;let o=se(t,"open",8,!1);const i=Ht();let l=$({...Qo}),c=$(!1),f=$(!1),d=$(!0),v=$(null),h=$(!1),p=!1;async function k(){b(d,!0);try{const[U]=await Promise.all([sa.load(),lr.loadModels()]);b(l,{...U})}catch{b(v,"Failed to load settings")}finally{b(d,!1)}}function C(){p||u(f)||(p=!0,(async()=>(await A()&&i("close"),p=!1))())}function y(){b(c,!0),b(v,null)}async function A(){if(!u(c))return!0;b(f,!0),b(v,null);try{return await sa.updateLlm({model:u(l).model,system_prompt:u(l).system_prompt,temperature:u(l).temperature,max_tokens:u(l).max_tokens}),b(c,!1),!0}catch(U){const D=U instanceof Error?U.message:"Failed to save settings.";return b(v,D),!1}finally{b(f,!1)}}async function E(){b(f,!0);try{await sa.reset();const U=await sa.load();b(l,{...U}),b(c,!1),b(v,null)}catch{b(v,"Failed to reset settings")}finally{b(f,!1)}}async function _(){b(f,!0);try{u(c)&&await A(),await sa.saveAsDefault(),b(v,"Settings saved as new default")}catch{b(v,"Failed to save as default")}finally{b(f,!1)}}function T(U,D,N){return`${(U-D)/(N-D)*100}%`}ve(()=>(R(o()),u(h),u(c),u(f)),()=>{o()&&!u(h)?(b(h,!0),b(c,!1),b(f,!1),b(v,null),k()):!o()&&u(h)&&(b(h,!1),u(c)&&!u(f)&&A())}),Zt(),bt();var w=xe(),F=pe(w);{var W=U=>{wr(U,{get open(){return o()},labelledBy:"cli-settings-title",closeLabel:"Close CLI settings",$$events:{close:()=>void C()},children:(D,N)=>{var G=xe(),I=pe(G);{var Y=X=>{var fe=Sb();S(X,fe)},Z=X=>{var fe=Cb(),ne=g(fe),ue=x(g(ne),2),L=g(ue),j=x(g(L),2);Dt(j,5,n,he=>he.id,(he,ke)=>{var Ne=Eb(),re=g(Ne),Ee={};H(()=>{V(re,(u(ke),m(()=>u(ke).name??u(ke).id))),Ee!==(Ee=(u(ke),m(()=>u(ke).id)))&&(Ne.value=(Ne.__value=(u(ke),m(()=>u(ke).id)))??"")}),S(he,Ne)});var ce;Pn(j);var ge=x(L,2),K=x(g(ge),2);rs(K,(he,ke)=>Mi?.(he),()=>u(l).system_prompt),zn(()=>B("input",K,he=>{b(l,{...u(l),system_prompt:he.target.value||null}),y()}));var z=x(ge,2),J=g(z),_e=g(J),oe=x(g(_e),2),be=g(oe),te=x(_e,2),Te=x(z,2),$e=g(Te),Re=g($e),Xe=x(g(Re),2),Fe=g(Xe),Qe=x(Re,2);H((he,ke,Ne)=>{j.disabled=u(f),ce!==(ce=(u(l),m(()=>u(l).model)))&&(j.value=(j.__value=(u(l),m(()=>u(l).model)))??"",yn(j,(u(l),m(()=>u(l).model)))),K.disabled=u(f),St(K,(u(l),m(()=>u(l).system_prompt??""))),V(be,he),St(te,(u(l),m(()=>u(l).temperature??.7))),te.disabled=u(f),fn(te,`--slider-fill: ${ke??""}`),V(Fe,(u(l),m(()=>u(l).max_tokens??1e3))),St(Qe,(u(l),m(()=>u(l).max_tokens??1e3))),Qe.disabled=u(f),fn(Qe,`--slider-fill: ${Ne??""}`)},[()=>(u(l),m(()=>u(l).temperature?.toFixed(1)??"0.7")),()=>(u(l),m(()=>T(u(l).temperature??.7,0,2))),()=>(u(l),m(()=>T(u(l).max_tokens??1e3,50,4e3)))]),B("change",j,he=>{b(l,{...u(l),model:he.target.value}),y()}),B("input",te,he=>{b(l,{...u(l),temperature:parseFloat(he.target.value)}),y()}),B("input",Qe,he=>{b(l,{...u(l),max_tokens:parseInt(he.target.value,10)}),y()}),S(X,fe)};O(I,X=>{u(d)?X(Y):X(Z,!1)})}S(D,G)},$$slots:{default:!0,heading:(D,N)=>{var G=Ab();S(D,G)},actions:(D,N)=>{var G=Tb(),I=g(G),Y=x(I,2),Z=g(Y);H(()=>{I.disabled=u(f)||u(d),Y.disabled=u(f)||u(d),V(Z,u(f)?"Savingâ¦":"Set as default")}),B("click",I,E),B("click",Y,()=>void _()),S(D,G)},footer:(D,N)=>{var G=Ib(),I=g(G);{var Y=X=>{var fe=Db();let ne;var ue=g(fe);H(L=>{ne=zt(fe,1,"status",null,ne,L),V(ue,u(v))},[()=>({error:u(v).includes("Failed")})]),S(X,fe)},Z=X=>{var fe=xe(),ne=pe(fe);{var ue=j=>{var ce=Fb();S(j,ce)},L=j=>{var ce=xe(),ge=pe(ce);{var K=J=>{var _e=Mb();S(J,_e)},z=J=>{var _e=Pb();S(J,_e)};O(ge,J=>{u(c)?J(K):J(z,!1)},!0)}S(j,ce)};O(ne,j=>{u(f)?j(ue):j(L,!1)},!0)}S(X,fe)};O(I,X=>{u(v)?X(Y):X(Z,!1)})}S(D,G)}}})};O(F,U=>{o()&&U(W)})}S(e,w),gt(),s()}async function Lb(){const e=await fetch(`${Ft}/api/clients/kiosk/stt`);if(!e.ok)throw new Error(`Failed to fetch kiosk STT settings: ${e.statusText}`);return e.json()}async function Ob(e){const t=await fetch(`${Ft}/api/clients/kiosk/stt`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk STT settings: ${t.statusText}`);return t.json()}async function $b(){const e=await fetch(`${Ft}/api/clients/kiosk/stt/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk STT settings: ${e.statusText}`);return e.json()}async function Rb(){const e=await fetch(`${Ft}/api/clients/kiosk/tts`);if(!e.ok)throw new Error(`Failed to fetch kiosk TTS settings: ${e.statusText}`);return e.json()}async function zb(e){const t=await fetch(`${Ft}/api/clients/kiosk/tts`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk TTS settings: ${t.statusText}`);return t.json()}async function Bb(){const e=await fetch(`${Ft}/api/clients/kiosk/tts/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk TTS settings: ${e.statusText}`);return e.json()}async function Ub(e="openai"){const t=await fetch(`${Ft}/api/clients/kiosk/tts/voices?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Failed to fetch TTS voices: ${t.statusText}`);return t.json()}async function jb(){const e=await fetch(`${Ft}/api/clients/kiosk/ui`);if(!e.ok)throw new Error(`Failed to fetch kiosk UI settings: ${e.statusText}`);return e.json()}async function qb(e){const t=await fetch(`${Ft}/api/clients/kiosk/ui`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk UI settings: ${t.statusText}`);return t.json()}async function Hb(){const e=await fetch(`${Ft}/api/clients/kiosk/llm`);if(!e.ok)throw new Error(`Failed to fetch kiosk LLM settings: ${e.statusText}`);return e.json()}async function Wb(e){const t=await fetch(`${Ft}/api/clients/kiosk/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk LLM settings: ${t.statusText}`);return t.json()}async function Vb(){const e=await fetch(`${Ft}/api/clients/kiosk/llm/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk LLM settings: ${e.statusText}`);return e.json()}async function Gb(){const e=await fetch(`${Ft}/api/clients/kiosk/presets`);if(!e.ok)throw new Error(`Failed to fetch kiosk presets: ${e.statusText}`);return e.json()}async function Zb(e){const t=await fetch(`${Ft}/api/clients/kiosk/presets/${e}/activate`,{method:"POST"});if(!t.ok)throw new Error(`Failed to activate kiosk preset: ${t.statusText}`);return t.json()}async function Kb(e,t){const n=await fetch(`${Ft}/api/clients/kiosk/presets/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update kiosk preset: ${n.statusText}`);return n.json()}const Yb={eot_threshold:.7,eot_timeout_ms:5e3,eager_eot_threshold:null,keyterms:[],enabled:!0,provider:"openai",voice:"alloy",model:"tts-1",speed:1,response_format:"pcm",sample_rate:24e3,stream_chunk_bytes:4096,use_segmentation:!0,delimiters:[`
`,". ","? ","! ","* ",", ",": "],segmentation_logging_enabled:!1,first_phrase_min_chars:10,buffering_enabled:!1,startup_delay_enabled:!1,low_latency_audio:!0,initial_buffer_sec:0,max_ahead_sec:1.5,min_chunk_sec:.1,idle_return_delay_ms:1e4,slideshow_max_photos:30,llm_model:"openai/gpt-4o-mini",system_prompt:"You are a helpful voice assistant who replies succinctly.",temperature:.7,max_tokens:500,conversation_mode:!1,conversation_timeout_seconds:10};function Jb(e){return JSON.parse(JSON.stringify(e))}function Qd(){return Jb(Yb)}function Xb(){const e=jt(Qd());let t=!1,n=!1;async function r(){if(n)return rt(e);n=!0;try{const[o,i,l,c]=await Promise.all([Lb(),Rb(),jb(),Hb()]),f={eot_threshold:o.eot_threshold,eot_timeout_ms:o.eot_timeout_ms,eager_eot_threshold:o.eager_eot_threshold??null,keyterms:o.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,response_format:i.response_format,sample_rate:i.sample_rate,stream_chunk_bytes:i.stream_chunk_bytes,use_segmentation:i.use_segmentation,delimiters:i.delimiters,segmentation_logging_enabled:i.segmentation_logging_enabled,first_phrase_min_chars:i.first_phrase_min_chars,buffering_enabled:i.buffering_enabled,startup_delay_enabled:i.startup_delay_enabled,low_latency_audio:i.low_latency_audio,initial_buffer_sec:i.initial_buffer_sec,max_ahead_sec:i.max_ahead_sec,min_chunk_sec:i.min_chunk_sec,idle_return_delay_ms:l.idle_return_delay_ms,slideshow_max_photos:l.slideshow_max_photos,llm_model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens,conversation_mode:c.conversation_mode,conversation_timeout_seconds:c.conversation_timeout_seconds};return e.set(f),t=!0,f}catch(o){return console.error("Failed to load kiosk settings:",o),rt(e)}finally{n=!1}}async function s(o){try{const i={},l={},c={},f={};o.eot_threshold!==void 0&&(i.eot_threshold=o.eot_threshold),o.eot_timeout_ms!==void 0&&(i.eot_timeout_ms=o.eot_timeout_ms),o.eager_eot_threshold!==void 0&&(i.eager_eot_threshold=o.eager_eot_threshold),o.keyterms!==void 0&&(i.keyterms=o.keyterms),o.enabled!==void 0&&(l.enabled=o.enabled),o.provider!==void 0&&(l.provider=o.provider),o.voice!==void 0&&(l.voice=o.voice),o.model!==void 0&&(l.model=o.model),o.speed!==void 0&&(l.speed=o.speed),o.response_format!==void 0&&(l.response_format=o.response_format),o.sample_rate!==void 0&&(l.sample_rate=o.sample_rate),o.stream_chunk_bytes!==void 0&&(l.stream_chunk_bytes=o.stream_chunk_bytes),o.use_segmentation!==void 0&&(l.use_segmentation=o.use_segmentation),o.delimiters!==void 0&&(l.delimiters=o.delimiters),o.first_phrase_min_chars!==void 0&&(l.first_phrase_min_chars=o.first_phrase_min_chars),o.segmentation_logging_enabled!==void 0&&(l.segmentation_logging_enabled=o.segmentation_logging_enabled),o.buffering_enabled!==void 0&&(l.buffering_enabled=o.buffering_enabled),o.startup_delay_enabled!==void 0&&(l.startup_delay_enabled=o.startup_delay_enabled),o.low_latency_audio!==void 0&&(l.low_latency_audio=o.low_latency_audio),o.initial_buffer_sec!==void 0&&(l.initial_buffer_sec=o.initial_buffer_sec),o.max_ahead_sec!==void 0&&(l.max_ahead_sec=o.max_ahead_sec),o.min_chunk_sec!==void 0&&(l.min_chunk_sec=o.min_chunk_sec),o.idle_return_delay_ms!==void 0&&(c.idle_return_delay_ms=o.idle_return_delay_ms),o.slideshow_max_photos!==void 0&&(c.slideshow_max_photos=o.slideshow_max_photos),o.llm_model!==void 0&&(f.model=o.llm_model),o.system_prompt!==void 0&&(f.system_prompt=o.system_prompt),o.temperature!==void 0&&(f.temperature=o.temperature),o.max_tokens!==void 0&&(f.max_tokens=o.max_tokens),o.conversation_mode!==void 0&&(f.conversation_mode=o.conversation_mode),o.conversation_timeout_seconds!==void 0&&(f.conversation_timeout_seconds=o.conversation_timeout_seconds);const d=[];return Object.keys(i).length>0&&d.push(Ob(i)),Object.keys(l).length>0&&d.push(zb(l)),Object.keys(c).length>0&&d.push(qb(c)),Object.keys(f).length>0&&d.push(Wb(f)),await Promise.all(d),await r()}catch(i){throw console.error("Failed to save kiosk settings:",i),i}}async function a(){try{const[o,i,l]=await Promise.all([$b(),Bb(),Vb()]),c=rt(e),f={eot_threshold:o.eot_threshold,eot_timeout_ms:o.eot_timeout_ms,eager_eot_threshold:o.eager_eot_threshold??null,keyterms:o.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,response_format:i.response_format,sample_rate:i.sample_rate,stream_chunk_bytes:i.stream_chunk_bytes,use_segmentation:i.use_segmentation,delimiters:i.delimiters,segmentation_logging_enabled:i.segmentation_logging_enabled,first_phrase_min_chars:i.first_phrase_min_chars,buffering_enabled:i.buffering_enabled,startup_delay_enabled:i.startup_delay_enabled,low_latency_audio:i.low_latency_audio,initial_buffer_sec:i.initial_buffer_sec,max_ahead_sec:i.max_ahead_sec,min_chunk_sec:i.min_chunk_sec,idle_return_delay_ms:c.idle_return_delay_ms,slideshow_max_photos:c.slideshow_max_photos,llm_model:l.model,system_prompt:l.system_prompt,temperature:l.temperature,max_tokens:l.max_tokens,conversation_mode:l.conversation_mode,conversation_timeout_seconds:l.conversation_timeout_seconds};return e.set(f),f}catch(o){throw console.error("Failed to reset kiosk settings:",o),o}}return{subscribe:e.subscribe,load:r,save:s,reset:a,get isLoaded(){return t},get current(){return rt(e)}}}const nu=Xb();var Qb=M('<p class="status">Loading settingsâ¦</p>'),e3=M("<option> </option>"),t3=M("<option> </option>"),n3=M('<div class="presets-container svelte-10jke8k"><label class="setting-label" for="preset-select">Preset</label> <div class="preset-select-row svelte-10jke8k"><select id="preset-select" class="select-input svelte-10jke8k"></select> <button type="button" class="btn btn-ghost btn-small" title="Save current settings to the selected preset">ð¾ Save</button></div></div>'),r3=M('<div class="setting-range" style="margin-top: 0.75rem;"><div class="setting-range-header"><span class="setting-label" title="Confidence level for triggering early processing. Lower = starts processing sooner (more false starts). Higher = waits longer before speculating.">Eager EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="0.9" step="0.05"/> <div class="range-extents"><span>0.3 (eager)</span> <span>0.9 (conservative)</span></div></div>'),s3=M("<option> </option>"),a3=M('<div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-voice" title="Select the OpenAI voice for text-to-speech synthesis.">Voice</label> <select id="tts-voice" class="select-input svelte-10jke8k"></select></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-model" title="Select the OpenAI TTS model.">Model</label> <select id="tts-model" class="select-input svelte-10jke8k"><option>tts-1 (faster)</option><option>tts-1-hd (higher quality)</option></select></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-response-format" title="Audio format returned by the TTS service.">Response format</label> <select id="tts-response-format" class="select-input svelte-10jke8k"><option>pcm</option><option>mp3</option><option>opus</option><option>aac</option><option>flac</option><option>wav</option></select></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Speech speed multiplier. 1.0 is normal speed.">Speed</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="2.0" step="0.1"/> <div class="range-extents"><span>0.5x (slow)</span> <span>2x (fast)</span></div></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-sample-rate" title="Sample rate in Hz for TTS audio.">Sample rate (Hz)</label> <input id="tts-sample-rate" class="select-input svelte-10jke8k" type="number" min="8000" max="48000" step="1000"/></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-stream-chunk-bytes" title="Chunk size (bytes) when streaming TTS audio from OpenAI. At 24kHz 16-bit PCM: 2048 bytes = ~43ms, 4096 bytes = ~85ms (recommended), 8192 bytes = ~170ms, 32768 bytes = ~683ms. Smaller = lower latency but more network overhead.">Stream chunk bytes</label> <input id="tts-stream-chunk-bytes" class="select-input svelte-10jke8k" type="number" min="512" max="65536" step="256"/></div></div> <label class="setting-boolean" title="Split text at delimiters to start audio sooner." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Enable text segmentation</span></label> <div style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="Minimum characters to accumulate before the first segmented phrase is emitted.">Minimum first phrase length</span> <span class="setting-hint">Set a floor so the first spoken chunk feels complete.</span></div> <input class="select-input svelte-10jke8k" type="number" min="0" max="500" step="1"/></div> <label title="Log when segmentation is waiting for a delimiter after the minimum is reached." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Log segmentation boundary decisions</span></label> <div style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="One delimiter per line. Use \\\\n for newline.">Delimiters</span> <span class="setting-hint">Whitespace matters; each line becomes a delimiter.</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="4" placeholder="\\\\n .  ?  ! "></textarea></div>',1),u3=M('<div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Minimum audio (seconds) to buffer before playback starts.">Initial Buffer</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.05" max="2.0" step="0.05"/> <div class="range-extents"><span>0.05s (fast start)</span> <span>2.0s (smooth)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum audio (seconds) to schedule ahead of current time.">Max Ahead</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="5.0" step="0.1"/> <div class="range-extents"><span>0.3s (tight)</span> <span>5.0s (buffered)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Minimum duration (seconds) for each audio chunk.">Min Chunk Duration</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.02" max="0.5" step="0.01"/> <div class="range-extents"><span>0.02s (responsive)</span> <span>0.5s (chunky)</span></div></div></div>',1),o3=M(`<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior.</span></div> <div class="reasoning-controls"><div class="model-presets-row svelte-10jke8k"><div class="setting-select model-select-compact svelte-10jke8k"><label class="setting-label" for="llm-model" title="Select the language model for generating responses.">Model</label> <select id="llm-model" class="select-input svelte-10jke8k"></select></div> <!></div> <div class="system-prompt-row svelte-10jke8k"><label class="setting-label" for="system-prompt" title="Instructions that define how the assistant behaves.">System Prompt</label> <textarea id="system-prompt" class="keyterms-input system-prompt svelte-10jke8k" rows="4" placeholder="You are a helpful voice assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses. Lower = more focused, higher = more creative. Note: Some models don't support this parameter.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens. Keep low for voice interactions.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="2000" step="50"/> <div class="range-extents"><span>50 (short)</span> <span>2000 (long)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Speech Recognition</span> <span class="setting-hint">Deepgram Flux end-of-turn detection settings.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Confidence level (0.5-0.9) required before the system considers you've finished speaking. Lower = faster response but may cut you off. Higher = waits longer to be sure you're done.">EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="0.9" step="0.05"/> <div class="range-extents"><span>0.5 (fast)</span> <span>0.9 (reliable)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum time (ms) to wait after speech before forcing end-of-turn, regardless of confidence. Shorter = faster response. Longer = allows for natural pauses.">EOT Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="500" max="10000" step="250"/> <div class="range-extents"><span>500ms</span> <span>10s</span></div></div></div> <div class="reasoning-field" style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="Words or phrases the speech recognition should pay extra attention to. Useful for device names, product terms, or commands specific to your home automation setup.">Keyterms</span> <span class="setting-hint">Words to boost recognition (one per line, up to 100).</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="3" placeholder="lights thermostat turn on"></textarea></div></div></div> <div class="setting"><div class="setting-header"><span class="setting-label">Advanced</span> <span class="setting-hint">Optional fine-tuning options.</span></div> <label class="setting-boolean" title="When enabled, the system can speculatively start processing before you fully finish speaking. This reduces latency but may cause 'false starts' if you pause mid-sentence."><input type="checkbox"/> <span>Enable eager end-of-turn</span></label> <!></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Display</span> <span class="setting-hint">Kiosk screen behavior settings.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="When enabled, the microphone re-opens after the assistant speaks, allowing continuous conversation without needing the wake word." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Continuous conversation mode</span></label> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait on the transcription screen after going IDLE before returning to the clock screen.">Return to Clock</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1000" max="60000" step="1000"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait for speech before ending the conversation session and returning to the clock.">Conversation Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1" max="60" step="1"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum number of photos to sync for the slideshow. Lower values reduce memory usage on the Echo device. Changes apply on next sync.">Slideshow Photos</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="5" max="100" step="5"/> <div class="range-extents"><span>5 (low memory)</span> <span>100 (more variety)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Text-to-Speech</span> <span class="setting-hint">Voice synthesis settings for assistant responses.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="Enable or disable audio playback of assistant responses."><input type="checkbox"/> <span>Enable TTS</span></label> <!></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label" title="Low latency mode optimizes for fastest time-to-first-audio. Enable all toggles for maximum speed on fast devices. Disable for smoother playback on slow devices/networks.">Low Latency Mode</span> <span class="setting-hint">Enable all toggles for fastest response. Disable for smoother
              playback.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Skip audio buffering - plays immediately as chunks arrive. Best for fast devices/networks.">Disable Buffering</span> <span class="toggle-value"> </span></div></div> <div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Skip 60ms startup delay before first audio. Faster but may cause glitches on slow devices.">Skip Startup Delay</span> <span class="toggle-value"> </span></div></div> <div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Use low-latency audio mode (interactive). Faster response but may cause stuttering on slow devices.">Low Latency Audio</span> <span class="toggle-value"> </span></div></div> <!></div></div></div>`),i3=M('<h2 id="kiosk-settings-title">Kiosk settings</h2> <p class="model-settings-subtitle">Configure the voice assistant kiosk.</p>',1),l3=M('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),c3=M('<span class="status error"> </span>'),d3=M('<span class="status">Saving changesâ¦</span>'),f3=M('<span class="status">Pending changes; closing this modal will save.</span>'),p3=M('<span class="status">Changes save when you close this modal.</span>'),h3=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function m3(e,t){vt(t,!1);const n=()=>ht(a,"$filtered",r),[r,s]=Kn(),{filtered:a}=lr;let o=$([]),i=$(null),l=$(!1),c=se(t,"open",8,!1);const f=Ht();let d=$(Qd()),v=$(!1),h=$(!1),p=$(!0),k=$(null),C=$(!1),y=!1;async function A(){b(p,!0);try{const[I,Y]=await Promise.all([nu.load(),Gb(),lr.loadModels()]);b(d,{...I}),b(o,await Ub("openai")),b(i,Y)}catch{b(k,"Failed to load settings")}finally{b(p,!1)}}async function E(I){if(!u(l)){b(l,!0);try{b(i,await Zb(I));const Y=await nu.load();b(d,{...Y}),b(v,!1)}catch{b(k,"Failed to activate preset")}finally{b(l,!1)}}}async function _(){if(!(!u(i)||u(l))){b(l,!0);try{const I=u(i).active_index,Y=u(i).presets[I],Z={name:Y.name,model:u(d).llm_model,system_prompt:u(d).system_prompt??"",temperature:u(d).temperature,max_tokens:u(d).max_tokens,eot_threshold:u(d).eot_threshold,eot_timeout_ms:u(d).eot_timeout_ms,keyterms:u(d).keyterms,tts_enabled:u(d).enabled,tts_voice:u(d).voice,tts_model:u(d).model,tts_sample_rate:u(d).sample_rate};b(i,await Kb(I,Z)),b(k,`Saved to "${Y.name}"`),setTimeout(()=>{u(k)?.startsWith("Saved")&&b(k,null)},2e3)}catch{b(k,"Failed to save preset")}finally{b(l,!1)}}}function T(){y||u(h)||(y=!0,(async()=>(await F()&&f("close"),y=!1))())}function w(){b(v,!0),b(k,null)}async function F(){if(!u(v))return!0;b(h,!0),b(k,null);try{const I=await nu.save(u(d));return b(d,{...I}),b(v,!1),!0}catch(I){const Y=I instanceof Error?I.message:"Failed to save settings.";return b(k,Y),!1}finally{b(h,!1)}}async function W(){b(h,!0);try{const I=await nu.reset();b(d,{...I}),b(v,!1),b(k,null)}catch{b(k,"Failed to reset settings")}finally{b(h,!1)}}function U(I,Y,Z){return`${(I-Y)/(Z-Y)*100}%`}ve(()=>(R(c()),u(C),u(v),u(h)),()=>{c()&&!u(C)?(b(C,!0),b(v,!1),b(h,!1),b(k,null),A()):!c()&&u(C)&&(b(C,!1),u(v)&&!u(h)&&F())}),Zt(),bt();var D=xe(),N=pe(D);{var G=I=>{wr(I,{get open(){return c()},labelledBy:"kiosk-settings-title",closeLabel:"Close kiosk settings",$$events:{close:()=>void T()},children:(Y,Z)=>{var X=xe(),fe=pe(X);{var ne=L=>{var j=Qb();S(L,j)},ue=L=>{var j=o3(),ce=g(j),ge=x(g(ce),2),K=g(ge),z=g(K),J=x(g(z),2);Dt(J,5,n,Oe=>Oe.id,(Oe,wt)=>{var Vt=e3(),_t=g(Vt),pt={};H(()=>{V(_t,(u(wt),m(()=>u(wt).name??u(wt).id))),pt!==(pt=(u(wt),m(()=>u(wt).id)))&&(Vt.value=(Vt.__value=(u(wt),m(()=>u(wt).id)))??"")}),S(Oe,Vt)});var _e;Pn(J);var oe=x(z,2);{var be=Oe=>{var wt=n3(),Vt=x(g(wt),2),_t=g(Vt);Dt(_t,5,()=>(u(i),m(()=>u(i).presets)),rr,(Gt,dn,nn)=>{var rn=t3(),Yt=g(rn);rn.value=rn.__value=nn,H(()=>V(Yt,(u(dn),m(()=>u(dn).name)))),S(Gt,rn)});var pt;Pn(_t);var Ut=x(_t,2);H(()=>{_t.disabled=u(h)||u(l),pt!==(pt=(u(i),m(()=>u(i).active_index)))&&(_t.value=(_t.__value=(u(i),m(()=>u(i).active_index)))??"",yn(_t,(u(i),m(()=>u(i).active_index)))),Ut.disabled=u(h)||u(l)}),B("change",_t,Gt=>E(parseInt(Gt.target.value,10))),B("click",Ut,_),S(Oe,wt)};O(oe,Oe=>{u(i)&&Oe(be)})}var te=x(K,2),Te=x(g(te),2);rs(Te,(Oe,wt)=>Mi?.(Oe),()=>u(d).system_prompt),zn(()=>B("input",Te,Oe=>{b(d,{...u(d),system_prompt:Oe.target.value||null}),w()}));var $e=x(te,2),Re=g($e),Xe=g(Re),Fe=x(g(Xe),2),Qe=g(Fe),he=x(Xe,2),ke=x($e,2),Ne=g(ke),re=g(Ne),Ee=x(g(re),2),ze=g(Ee),q=x(re,2),le=x(ce,2),Q=x(g(le),2),ae=g(Q),Pe=g(ae),Ue=g(Pe),Se=x(g(Ue),2),Ve=g(Se),He=x(Ue,2),qe=x(ae,2),at=g(qe),Ye=g(at),xt=x(g(Ye),2),Tt=g(xt),Mt=x(Ye,2),vn=x(qe,2),Xt=x(g(vn),2),Qt=x(le,2),mt=x(g(Qt),2),tt=g(mt),Le=x(mt,2);{var it=Oe=>{var wt=r3(),Vt=g(wt),_t=x(g(Vt),2),pt=g(_t),Ut=x(Vt,2);H((Gt,dn)=>{V(pt,Gt),St(Ut,(u(d),m(()=>u(d).eager_eot_threshold??.5))),Ut.disabled=u(h),fn(Ut,`--slider-fill: ${dn??""}`)},[()=>(u(d),m(()=>u(d).eager_eot_threshold?.toFixed(2)??"â")),()=>(u(d),m(()=>U(u(d).eager_eot_threshold??.5,.3,.9)))]),B("input",Ut,Gt=>{b(d,{...u(d),eager_eot_threshold:parseFloat(Gt.target.value)}),w()}),S(Oe,wt)};O(Le,Oe=>{u(d),m(()=>u(d).eager_eot_threshold!==null)&&Oe(it)})}var Je=x(Qt,2),$t=x(g(Je),2),en=g($t),We=g(en),ut=x(en,2),kt=g(ut),De=g(kt),Ie=x(g(De),2),Ae=g(Ie),ee=x(De,2),Ce=x(ut,2);let Ge;var Ze=g(Ce),Ke=g(Ze),et=x(g(Ke),2),Rt=g(et),ot=x(Ke,2),lt=x(Ce,2),Pt=g(lt),It=g(Pt),we=x(g(It),2),P=g(we),ie=x(It,2),ye=x(Je,2),nt=x(g(ye),2),Be=g(nt),Me=g(Be),je=x(Be,2);{var me=Oe=>{var wt=a3(),Vt=pe(wt),_t=g(Vt),pt=x(g(_t),2);Dt(pt,5,()=>u(o),rr,(Nt,an)=>{var Ar=s3(),Qn=g(Ar),Va={};H(()=>{V(Qn,(u(an),m(()=>u(an).name))),Va!==(Va=(u(an),m(()=>u(an).id)))&&(Ar.value=(Ar.__value=(u(an),m(()=>u(an).id)))??"")}),S(Nt,Ar)});var Ut;Pn(pt);var Gt=x(Vt,2),dn=g(Gt),nn=x(g(dn),2),rn=g(nn);rn.value=rn.__value="tts-1";var Yt=x(rn);Yt.value=Yt.__value="tts-1-hd";var En;Pn(nn);var Xn=x(Gt,2),sn=g(Xn),Dn=x(g(sn),2),Er=g(Dn);Er.value=Er.__value="pcm";var Cr=x(Er);Cr.value=Cr.__value="mp3";var Hr=x(Cr);Hr.value=Hr.__value="opus";var Wr=x(Hr);Wr.value=Wr.__value="aac";var Fn=x(Wr);Fn.value=Fn.__value="flac";var Ln=x(Fn);Ln.value=Ln.__value="wav";var fs;Pn(Dn);var ps=x(Xn,2),qu=g(ps),Ha=g(qu),Hu=x(g(Ha),2),tf=g(Hu),Wa=x(Ha,2),Ii=x(ps,2),nf=g(Ii),Wu=x(g(nf),2),Ni=x(Ii,2),rf=g(Ni),Vu=x(g(rf),2),Li=x(Ni,2),Gu=g(Li),Zu=x(Li,2);let Oi;var Ku=x(g(Zu),2),Yu=x(Zu,2);let $i;var Ju=g(Yu),Ri=x(Yu,2);let zi;var Xu=x(g(Ri),2);H((Nt,an,Ar,Qn,Va,sf)=>{pt.disabled=u(h),Ut!==(Ut=(u(d),m(()=>u(d).voice)))&&(pt.value=(pt.__value=(u(d),m(()=>u(d).voice)))??"",yn(pt,(u(d),m(()=>u(d).voice)))),nn.disabled=u(h),En!==(En=(u(d),m(()=>u(d).model)))&&(nn.value=(nn.__value=(u(d),m(()=>u(d).model)))??"",yn(nn,(u(d),m(()=>u(d).model)))),Dn.disabled=u(h),fs!==(fs=(u(d),m(()=>u(d).response_format)))&&(Dn.value=(Dn.__value=(u(d),m(()=>u(d).response_format)))??"",yn(Dn,(u(d),m(()=>u(d).response_format)))),V(tf,`${Nt??""}x`),St(Wa,(u(d),m(()=>u(d).speed))),Wa.disabled=u(h),fn(Wa,`--slider-fill: ${an??""}`),St(Wu,(u(d),m(()=>u(d).sample_rate))),Wu.disabled=u(h),St(Vu,(u(d),m(()=>u(d).stream_chunk_bytes))),Vu.disabled=u(h),Cn(Gu,(u(d),m(()=>u(d).use_segmentation))),Gu.disabled=u(h),Oi=zt(Zu,1,"reasoning-field svelte-10jke8k",null,Oi,Ar),St(Ku,(u(d),m(()=>u(d).first_phrase_min_chars))),Ku.disabled=(u(h),u(d),m(()=>u(h)||!u(d).use_segmentation)),$i=zt(Yu,1,"setting-boolean svelte-10jke8k",null,$i,Qn),Cn(Ju,(u(d),m(()=>u(d).segmentation_logging_enabled))),Ju.disabled=(u(h),u(d),m(()=>u(h)||!u(d).use_segmentation)),zi=zt(Ri,1,"reasoning-field svelte-10jke8k",null,zi,Va),Xu.disabled=(u(h),u(d),m(()=>u(h)||!u(d).use_segmentation)),St(Xu,sf)},[()=>(u(d),m(()=>u(d).speed.toFixed(1))),()=>(u(d),m(()=>U(u(d).speed,.5,2))),()=>({"disabled-field":!u(d).use_segmentation}),()=>({"disabled-field":!u(d).use_segmentation}),()=>({"disabled-field":!u(d).use_segmentation}),()=>(u(d),m(()=>u(d).delimiters.map(Nt=>Nt===`
`?"\\n":Nt).join(`
`)))]),B("change",pt,Nt=>{b(d,{...u(d),voice:Nt.target.value}),w()}),B("change",nn,Nt=>{b(d,{...u(d),model:Nt.target.value}),w()}),B("change",Dn,Nt=>{b(d,{...u(d),response_format:Nt.target.value}),w()}),B("input",Wa,Nt=>{b(d,{...u(d),speed:parseFloat(Nt.target.value)}),w()}),B("input",Wu,Nt=>{const an=parseInt(Nt.target.value,10);Number.isFinite(an)&&(b(d,{...u(d),sample_rate:Math.max(8e3,Math.min(48e3,an))}),w())}),B("input",Vu,Nt=>{const an=parseInt(Nt.target.value,10);Number.isFinite(an)&&(b(d,{...u(d),stream_chunk_bytes:Math.max(512,Math.min(65536,an))}),w())}),B("change",Gu,Nt=>{b(d,{...u(d),use_segmentation:Nt.target.checked}),w()}),B("input",Ku,Nt=>{const an=parseInt(Nt.target.value,10);Number.isFinite(an)&&(b(d,{...u(d),first_phrase_min_chars:Math.max(0,Math.min(500,an))}),w())}),B("change",Ju,Nt=>{b(d,{...u(d),segmentation_logging_enabled:Nt.target.checked}),w()}),B("input",Xu,Nt=>{const Ar=Nt.target.value.split(`
`).map(Qn=>Qn.replace(/\r/g,"")).map(Qn=>Qn==="\\n"?`
`:Qn).filter(Qn=>Qn.trim().length>0);b(d,{...u(d),delimiters:Ar}),w()}),S(Oe,wt)};O(je,Oe=>{u(d),m(()=>u(d).enabled)&&Oe(me)})}var qt=x(ye,2),Kt=x(g(qt),2),Et=g(Kt),Bt=g(Et),Wt=g(Bt),Jn=g(Wt),jr=x(Wt,4),cs=g(jr),$a=x(Et,2),Ra=g($a),za=g(Ra),Ws=g(za),Ba=x(za,4),Ua=g(Ba),qr=x($a,2),Bu=g(qr),ja=g(Bu),ds=g(ja),Uu=x(ja,4),Sr=g(Uu),qa=x(qr,2);{var ju=Oe=>{var wt=u3(),Vt=pe(wt),_t=g(Vt),pt=g(_t),Ut=x(g(pt),2),Gt=g(Ut),dn=x(pt,2),nn=x(Vt,2),rn=g(nn),Yt=g(rn),En=x(g(Yt),2),Xn=g(En),sn=x(Yt,2),Dn=x(nn,2),Er=g(Dn),Cr=g(Er),Hr=x(g(Cr),2),Wr=g(Hr),Fn=x(Cr,2);H((Ln,fs,ps,qu,Ha,Hu)=>{V(Gt,`${Ln??""}s`),St(dn,(u(d),m(()=>u(d).initial_buffer_sec))),dn.disabled=u(h),fn(dn,`--slider-fill: ${fs??""}`),V(Xn,`${ps??""}s`),St(sn,(u(d),m(()=>u(d).max_ahead_sec))),sn.disabled=u(h),fn(sn,`--slider-fill: ${qu??""}`),V(Wr,`${Ha??""}s`),St(Fn,(u(d),m(()=>u(d).min_chunk_sec))),Fn.disabled=u(h),fn(Fn,`--slider-fill: ${Hu??""}`)},[()=>(u(d),m(()=>u(d).initial_buffer_sec.toFixed(2))),()=>(u(d),m(()=>U(u(d).initial_buffer_sec,.05,2))),()=>(u(d),m(()=>u(d).max_ahead_sec.toFixed(1))),()=>(u(d),m(()=>U(u(d).max_ahead_sec,.3,5))),()=>(u(d),m(()=>u(d).min_chunk_sec.toFixed(2))),()=>(u(d),m(()=>U(u(d).min_chunk_sec,.02,.5)))]),B("input",dn,Ln=>{b(d,{...u(d),initial_buffer_sec:parseFloat(Ln.target.value)}),w()}),B("input",sn,Ln=>{b(d,{...u(d),max_ahead_sec:parseFloat(Ln.target.value)}),w()}),B("input",Fn,Ln=>{b(d,{...u(d),min_chunk_sec:parseFloat(Ln.target.value)}),w()}),S(Oe,wt)};O(qa,Oe=>{u(d),m(()=>u(d).buffering_enabled)&&Oe(ju)})}H((Oe,wt,Vt,_t,pt,Ut,Gt,dn,nn,rn,Yt,En,Xn)=>{J.disabled=u(h),_e!==(_e=(u(d),m(()=>u(d).llm_model)))&&(J.value=(J.__value=(u(d),m(()=>u(d).llm_model)))??"",yn(J,(u(d),m(()=>u(d).llm_model)))),Te.disabled=u(h),St(Te,(u(d),m(()=>u(d).system_prompt??""))),V(Qe,Oe),St(he,(u(d),m(()=>u(d).temperature))),he.disabled=u(h),fn(he,`--slider-fill: ${wt??""}`),V(ze,(u(d),m(()=>u(d).max_tokens))),St(q,(u(d),m(()=>u(d).max_tokens))),q.disabled=u(h),fn(q,`--slider-fill: ${Vt??""}`),V(Ve,_t),St(He,(u(d),m(()=>u(d).eot_threshold))),He.disabled=u(h),fn(He,`--slider-fill: ${pt??""}`),V(Tt,`${u(d),m(()=>u(d).eot_timeout_ms)??""}ms`),St(Mt,(u(d),m(()=>u(d).eot_timeout_ms))),Mt.disabled=u(h),fn(Mt,`--slider-fill: ${Ut??""}`),Xt.disabled=u(h),St(Xt,Gt),Cn(tt,(u(d),m(()=>u(d).eager_eot_threshold!==null))),tt.disabled=u(h),Cn(We,(u(d),m(()=>u(d).conversation_mode))),We.disabled=u(h),V(Ae,`${dn??""}s`),St(ee,(u(d),m(()=>u(d).idle_return_delay_ms))),ee.disabled=u(h),fn(ee,`--slider-fill: ${nn??""}`),Ge=zt(Ce,1,"reasoning-field svelte-10jke8k",null,Ge,rn),V(Rt,`${Yt??""}s`),St(ot,(u(d),m(()=>u(d).conversation_timeout_seconds))),ot.disabled=(u(h),u(d),m(()=>u(h)||!u(d).conversation_mode)),fn(ot,`--slider-fill: ${En??""}`),V(P,(u(d),m(()=>u(d).slideshow_max_photos))),St(ie,(u(d),m(()=>u(d).slideshow_max_photos))),ie.disabled=u(h),fn(ie,`--slider-fill: ${Xn??""}`),Cn(Me,(u(d),m(()=>u(d).enabled))),Me.disabled=u(h),Cn(Jn,(u(d),m(()=>!u(d).buffering_enabled))),Jn.disabled=u(h),V(cs,(u(d),m(()=>u(d).buffering_enabled?"Off (buffered)":"On (instant)"))),Cn(Ws,(u(d),m(()=>!u(d).startup_delay_enabled))),Ws.disabled=u(h),V(Ua,(u(d),m(()=>u(d).startup_delay_enabled?"Off (60ms delay)":"On (instant)"))),Cn(ds,(u(d),m(()=>u(d).low_latency_audio))),ds.disabled=u(h),V(Sr,(u(d),m(()=>u(d).low_latency_audio?"On (interactive)":"Off (smooth)")))},[()=>(u(d),m(()=>u(d).temperature.toFixed(1))),()=>(u(d),m(()=>U(u(d).temperature,0,2))),()=>(u(d),m(()=>U(u(d).max_tokens,50,2e3))),()=>(u(d),m(()=>u(d).eot_threshold.toFixed(2))),()=>(u(d),m(()=>U(u(d).eot_threshold,.5,.9))),()=>(u(d),m(()=>U(u(d).eot_timeout_ms,500,1e4))),()=>(u(d),m(()=>u(d).keyterms.join(`
`))),()=>(u(d),m(()=>(u(d).idle_return_delay_ms/1e3).toFixed(0))),()=>(u(d),m(()=>U(u(d).idle_return_delay_ms,1e3,6e4))),()=>({"disabled-field":!u(d).conversation_mode}),()=>(u(d),m(()=>u(d).conversation_timeout_seconds.toFixed(0))),()=>(u(d),m(()=>U(u(d).conversation_timeout_seconds,1,60))),()=>(u(d),m(()=>U(u(d).slideshow_max_photos,5,100)))]),B("change",J,Oe=>{b(d,{...u(d),llm_model:Oe.target.value}),w()}),B("input",he,Oe=>{b(d,{...u(d),temperature:parseFloat(Oe.target.value)}),w()}),B("input",q,Oe=>{b(d,{...u(d),max_tokens:parseInt(Oe.target.value,10)}),w()}),B("input",He,Oe=>{b(d,{...u(d),eot_threshold:parseFloat(Oe.target.value)}),w()}),B("input",Mt,Oe=>{b(d,{...u(d),eot_timeout_ms:parseInt(Oe.target.value,10)}),w()}),B("input",Xt,Oe=>{const Vt=Oe.target.value.split(`
`).map(_t=>_t.trim()).filter(_t=>_t.length>0).slice(0,100);b(d,{...u(d),keyterms:Vt}),w()}),B("change",tt,Oe=>{const wt=Oe.target.checked;b(d,{...u(d),eager_eot_threshold:wt?.5:null}),w()}),B("change",We,Oe=>{b(d,{...u(d),conversation_mode:Oe.target.checked}),w()}),B("input",ee,Oe=>{b(d,{...u(d),idle_return_delay_ms:parseInt(Oe.target.value,10)}),w()}),B("input",ot,Oe=>{b(d,{...u(d),conversation_timeout_seconds:parseFloat(Oe.target.value)}),w()}),B("input",ie,Oe=>{b(d,{...u(d),slideshow_max_photos:parseInt(Oe.target.value,10)}),w()}),B("change",Me,Oe=>{b(d,{...u(d),enabled:Oe.target.checked}),w()}),B("change",Jn,Oe=>{const wt=Oe.target.checked;b(d,{...u(d),buffering_enabled:!wt,initial_buffer_sec:wt?0:u(d).initial_buffer_sec||.3}),w()}),B("change",Ws,Oe=>{b(d,{...u(d),startup_delay_enabled:!Oe.target.checked}),w()}),B("change",ds,Oe=>{b(d,{...u(d),low_latency_audio:Oe.target.checked}),w()}),S(L,j)};O(fe,L=>{u(p)?L(ne):L(ue,!1)})}S(Y,X)},$$slots:{default:!0,heading:(Y,Z)=>{var X=i3();S(Y,X)},actions:(Y,Z)=>{var X=l3();H(()=>X.disabled=u(h)||u(p)),B("click",X,W),S(Y,X)},footer:(Y,Z)=>{var X=h3(),fe=g(X);{var ne=L=>{var j=c3(),ce=g(j);H(()=>V(ce,u(k))),S(L,j)},ue=L=>{var j=xe(),ce=pe(j);{var ge=z=>{var J=d3();S(z,J)},K=z=>{var J=xe(),_e=pe(J);{var oe=te=>{var Te=f3();S(te,Te)},be=te=>{var Te=p3();S(te,Te)};O(_e,te=>{u(v)?te(oe):te(be,!1)},!0)}S(z,J)};O(ce,z=>{u(h)?z(ge):z(K,!1)},!0)}S(L,j)};O(fe,L=>{u(k)?L(ne):L(ue,!1)})}S(Y,X)}}})};O(N,I=>{c()&&I(G)})}S(e,D),gt(),s()}const fu=["Google Calendar","Google Tasks","Gmail","Google Drive"],Po={loading:!1,authorizing:!1,authorized:!1,userEmail:null,expiresAt:null,services:[...fu],error:null};function v3(e){return new Promise((t,n)=>{const r=o=>{const i=o.data;if(!i||typeof i!="object"||i.source!=="google-auth")return;a();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},s=window.setInterval(()=>{e.closed&&(a(),n(new Error("The authorization window was closed before completion.")))},500),a=()=>{window.removeEventListener("message",r),window.clearInterval(s)};window.addEventListener("message",r)})}function g3(){const e=jt({...Po});async function t(){e.update(s=>({...s,loading:!0,error:null}));try{const s=await sp();e.set({loading:!1,authorizing:!1,authorized:s.authorized,userEmail:s.user_email??null,expiresAt:s.expires_at??null,services:s.services&&s.services.length>0?s.services:[...fu],error:null})}catch(s){const a=s instanceof Error?s.message:"Failed to check Google authorization status.";e.set({...Po,services:[...fu],loading:!1,error:a})}}function n(){e.set({...Po,services:[...fu]})}async function r(){if(typeof window>"u")return e.update(a=>({...a,error:"Google authorization is only available in a browser environment."})),!1;if(rt(e).authorizing)return!1;e.update(a=>({...a,authorizing:!0,error:null}));try{const a=await ap({}),o=window.open(a.auth_url,"google-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!o)throw new Error("Popup was blocked. Allow pop-ups and try again.");return o.focus(),await v3(o),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(a){const o=a instanceof Error?a.message:"Failed to start Google authorization.";return e.update(i=>({...i,authorizing:!1,error:o})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}const ei=["svelte","voice","kiosk","cli"],ru={svelte:"Main",voice:"Voice",kiosk:"Kiosk",cli:"CLI"},su={loading:!1,refreshing:!1,saving:!1,dirty:!1,error:null,saveError:null,servers:[],updatedAt:null,pending:{},pendingChanges:{},clientPreferences:{svelte:null,voice:null,kiosk:null,cli:null},prefsLoaded:!1};function ks(e,t){return{...e,servers:t.servers??[],updatedAt:t.updated_at??null,error:null,saveError:null}}function _3(){const e=jt({...su});async function t(){e.set({...su,loading:!0});try{const[v,...h]=await Promise.all([ao(),...ei.map(k=>rp(k))]),p={svelte:null,voice:null,kiosk:null,cli:null};ei.forEach((k,C)=>{const y=h[C];p[k]=y.enabled_servers.length>0?y.enabled_servers:null}),e.set({...su,servers:v.servers,updatedAt:v.updated_at??null,clientPreferences:p,prefsLoaded:!0,loading:!1})}catch(v){const h=v instanceof Error?v.message:"Failed to load MCP servers.";e.set({...su,loading:!1,error:h})}}function n(v,h){e.update(p=>{const k=p.servers.map(y=>y.id===v?{...y,enabled:h}:y),C={...p.pendingChanges,[v]:{...p.pendingChanges[v]??{},enabled:h}};return{...p,servers:k,dirty:!0,saveError:null,pendingChanges:C}})}function r(v,h,p){e.update(k=>{const C=k.servers.find(T=>T.id===v);if(!C)return k;const y=new Set(C.disabled_tools??[]);p?y.delete(h):y.add(h);const A=Array.from(y).sort(),E=k.servers.map(T=>T.id!==v?T:{...T,disabled_tools:A,tools:T.tools.map(w=>w.name===h?{...w,enabled:p}:w)}),_={...k.pendingChanges,[v]:{...k.pendingChanges[v]??{},disabled_tools:A}};return{...k,servers:E,dirty:!0,saveError:null,pendingChanges:_}})}async function s(){e.update(v=>({...v,refreshing:!0,error:null}));try{const v=await np();e.update(h=>({...ks(h,v),refreshing:!1}))}catch(v){const h=v instanceof Error?v.message:"Failed to refresh MCP servers.";e.update(p=>({...p,refreshing:!1,saveError:h}))}}function a(v){return rt(e).servers.find(p=>p.id===v)}function o(v){return!!rt(e).pending[v]}async function i(){const v=rt(e);if(!v.dirty)return!0;const h=Object.entries(v.pendingChanges);if(!h.length)return e.update(k=>({...k,dirty:!1})),!0;e.update(k=>({...k,saving:!0,saveError:null}));let p=!0;for(const[k,C]of h){e.update(y=>({...y,pending:{...y.pending,[k]:!0}}));try{const y=await tp(k,C);e.update(A=>{const E={...A.pending};delete E[k];const _={...A.pendingChanges};delete _[k];const T=ks(A,y),w=Object.keys(_).length>0;return{...T,pending:E,pendingChanges:_,dirty:w}})}catch(y){let A="Failed to update MCP server.";if(y instanceof Error)A=y.message;else if(typeof y=="object"&&y!==null){const E=y;A=String(E.detail||E.message||E.error||JSON.stringify(y))}else typeof y=="string"&&(A=y);A.includes("[object Object]")&&(A="Failed to save MCP server settings. Check server logs for details."),e.update(E=>{const _={...E.pending};return delete _[k],{...E,pending:_,saving:!1,saveError:A}}),p=!1;break}}return p?(e.update(k=>({...k,saving:!1,dirty:!1})),!0):(e.update(k=>({...k,saving:!1,dirty:!0})),!1)}async function l(v){e.update(h=>({...h,saving:!0,saveError:null}));try{const h=await Q0(v),p=await ao(),C=rt(e).clientPreferences.svelte??p.servers.map(y=>y.id);if(C.includes(h.id))e.update(y=>({...ks(y,p),saving:!1}));else{const y=[...C,h.id];try{const A=await ul("svelte",y);e.update(E=>({...ks(E,p),clientPreferences:{...E.clientPreferences,svelte:A.enabled_servers.length>0?A.enabled_servers:null},saving:!1}))}catch{e.update(A=>({...ks(A,p),saving:!1}))}}return h}catch(h){const p=h instanceof Error?h.message:"Failed to connect to MCP server.";return e.update(k=>({...k,saving:!1,saveError:p})),null}}async function c(v){e.update(h=>({...h,saving:!0,saveError:null,pending:{...h.pending,[v]:!0}}));try{await ep(v);const h=await ao();return e.update(p=>{const k={...p.pending};return delete k[v],{...ks(p,h),saving:!1,pending:k}}),!0}catch(h){const p=h instanceof Error?h.message:"Failed to remove MCP server.";return e.update(k=>{const C={...k.pending};return delete C[v],{...k,saving:!1,saveError:p,pending:C}}),!1}}async function f(v,h,p){const k=rt(e),C=k.clientPreferences[v]??k.servers.map(A=>A.id);let y;p?y=C.includes(h)?C:[...C,h]:y=C.filter(A=>A!==h),e.update(A=>({...A,clientPreferences:{...A.clientPreferences,[v]:y},saving:!0,saveError:null}));try{const A=await ul(v,y);e.update(E=>({...E,clientPreferences:{...E.clientPreferences,[v]:A.enabled_servers.length>0?A.enabled_servers:null},saving:!1}))}catch(A){const E=A instanceof Error?A.message:"Failed to update preferences.";e.update(_=>({..._,clientPreferences:{..._.clientPreferences,[v]:C.length>0?C:null},saving:!1,saveError:E}))}}function d(v,h){const k=rt(e).clientPreferences[v];return k===null?!0:k.includes(h)}return{subscribe:e.subscribe,load:t,refresh:s,setServerEnabled:n,setToolEnabled:r,connectServer:l,removeServer:c,setClientServerEnabled:f,isServerEnabledForClient:d,getServer:a,isPending:o,flushPending:i}}const nc={loading:!1,saving:!1,refreshing:!1,configured:!1,email:null,error:null};function b3(){const e=jt({...nc});async function t(){e.update(a=>({...a,loading:!0,error:null}));try{const a=await up();e.set({loading:!1,saving:!1,refreshing:!1,configured:a.configured,email:a.email,error:null})}catch(a){const o=a instanceof Error?a.message:"Failed to check Monarch status.";e.set({...nc,loading:!1,error:o})}}async function n(a){e.update(o=>({...o,saving:!0,error:null}));try{const o=await op(a);return e.set({loading:!1,saving:!1,refreshing:!1,configured:o.configured,email:o.email,error:null}),!0}catch(o){const i=o instanceof Error?o.message:"Failed to save Monarch credentials.";return e.update(l=>({...l,saving:!1,error:i})),!1}}async function r(){e.update(a=>({...a,saving:!0,error:null}));try{const a=await ip();return e.set({loading:!1,saving:!1,refreshing:!1,configured:a.configured,email:a.email,error:null}),!0}catch(a){const o=a instanceof Error?a.message:"Failed to remove Monarch credentials.";return e.update(i=>({...i,saving:!1,error:o})),!1}}async function s(){e.update(a=>({...a,refreshing:!0,error:null}));try{return await new Promise(a=>setTimeout(a,2e3)),e.update(a=>({...a,refreshing:!1})),{success:!0,message:"Account data refreshed successfully"}}catch(a){const o=a instanceof Error?a.message:"Failed to refresh account data.";return e.update(i=>({...i,refreshing:!1,error:o})),{success:!1,message:o}}}return{subscribe:e.subscribe,load:t,save:n,remove:r,refresh:s}}const Io={loading:!1,authorizing:!1,authorized:!1,userEmail:null,error:null};function y3(e){return new Promise((t,n)=>{const r=o=>{const i=o.data;if(!i||typeof i!="object"||i.source!=="spotify-auth")return;a();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},s=window.setInterval(()=>{e.closed&&(a(),n(new Error("The authorization window was closed before completion.")))},500),a=()=>{window.removeEventListener("message",r),window.clearInterval(s)};window.addEventListener("message",r)})}function x3(){const e=jt({...Io});async function t(){e.update(s=>({...s,loading:!0,error:null}));try{const s=await lp();e.set({loading:!1,authorizing:!1,authorized:s.authorized,userEmail:s.user_email??null,error:null})}catch(s){const a=s instanceof Error?s.message:"Failed to check Spotify authorization status.";e.set({...Io,loading:!1,error:a})}}function n(){e.set({...Io})}async function r(){if(typeof window>"u")return e.update(a=>({...a,error:"Spotify authorization is only available in a browser environment."})),!1;if(rt(e).authorizing)return!1;e.update(a=>({...a,authorizing:!0,error:null}));try{const a=await cp({}),o=window.open(a.auth_url,"spotify-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!o)throw new Error("Popup was blocked. Allow pop-ups and try again.");return o.focus(),await y3(o),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(a){const o=a instanceof Error?a.message:"Failed to start Spotify authorization.";return e.update(i=>({...i,authorizing:!1,error:o})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}var k3=M('<p class="status">Checking Google authorization...</p>'),w3=M('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),S3=M('<p class="status muted"> </p>'),E3=M('<p class="status muted">Access will refresh automatically.</p>'),C3=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <!>',1),A3=M('<p class="status">Google services are not connected.</p>'),T3=M("<li> </li>"),D3=M('<p class="status">Checking Spotify authorization...</p>'),F3=M('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),M3=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <p class="status muted">Access will refresh automatically.</p>',1),P3=M('<p class="status">Spotify is not connected.</p>'),I3=M('<button type="button" class="btn btn-ghost btn-small">Disconnect</button>'),N3=M('<button type="button" class="btn btn-primary btn-small"> </button>'),L3=M('<p class="status">Checking Monarch status...</p>'),O3=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p>'),$3=Da('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),R3=Da('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),z3=M('<p class="status error"> </p>'),B3=M(`<div class="monarch-form"><label>Email <input type="email" class="input-control" placeholder="email@example.com"/></label> <label>Password <div class="password-input-wrapper"><input class="input-control" placeholder="Password"/> <button type="button" class="btn btn-ghost btn-icon btn-small"><!></button></div></label> <label>MFA Secret (Optional) <input type="text" class="input-control" placeholder="MFA Secret"/></label> <p class="status muted" style="margin-top: -0.5rem; margin-bottom: 1rem; font-size: 0.8em;">If you already use an app, you must <strong>reset MFA</strong> in Monarch
              Settings to see the secret key again. Enter the new key here AND in
              your app.</p> <!></div>`),U3=M('<p class="system-card-caption"> </p>'),j3=M('<p class="system-card-caption">Toggle integrations available to the assistant.</p>'),q3=M('<p class="status">Loading MCP servers...</p>'),H3=M('<p class="status error"> </p>'),W3=M('<p class="status">No MCP servers configured.</p>'),V3=M('<label class="toggle client-toggle"><input type="checkbox"/> <span> </span></label>'),G3=M('<li class="tool-row"><div class="tool-info"><span class="tool-name"> </span></div> <label class="toggle"><input type="checkbox"/> <span> </span></label></li>'),Z3=M('<ul class="tool-list"></ul>'),K3=M('<p class="status">Tool list unavailable.</p>'),Y3=M('<p class="status warning"> </p>'),J3=M('<div class="tools-dropdown"><!> <!></div>'),X3=M('<li class="server-row"><div class="server-row-header"><div class="server-heading"><h4> </h4> <div class="server-meta"><span> </span> <span aria-hidden="true">&bull;</span> <span class="server-url"> </span></div></div> <div class="server-toggles"><div class="client-toggles-group"></div> <label class="toggle running-toggle" title="Enable or disable this server globally"><input type="checkbox"/> <span> </span></label> <button type="button" class="btn btn-ghost btn-small btn-danger" title="Remove this server">Remove</button></div></div> <div class="server-row-body"><button type="button"><span class="tools-toggle__label"> </span> <svg class="tools-toggle__icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!></div></li>'),Q3=M('<ul class="server-list"></ul>'),ey=M('<p class="status error"> </p>'),ty=M('<p class="status warning">Pending changes save when you close this modal.</p>'),ny=M('<div class="add-server-row"><input type="url" class="input-control" placeholder="http://192.168.1.110:9003/mcp"/> <button type="button" class="btn btn-primary btn-small"> </button></div> <!> <!> <!>',1),ry=M(`<article class="system-card"><header class="system-card-header"><div><h3>Google services</h3> <p class="system-card-caption">Connect Calendar, Tasks, Gmail, and Drive with a single consent.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small"> </button></div></header> <div class="system-card-body google-auth-body"><!> <ul class="google-services-list"></ul> <p class="status muted">Click "Connect Google Services" to authorize these integrations for
          the assistant.</p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Spotify</h3> <p class="system-card-caption">Connect Spotify for music control and playback.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small"> </button></div></header> <div class="system-card-body google-auth-body"><!> <p class="status muted">Click "Connect Spotify" to authorize music control and playback
          features.</p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Monarch Money</h3> <p class="system-card-caption">Connect your Monarch Money account.</p></div> <div class="system-card-actions"><!></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Server status</h3> <!></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small"> </button></div></header> <div class="system-card-body"><!></div></article>`,1),sy=M('<h2 id="mcp-settings-title">MCP servers</h2> <p class="model-settings-subtitle">Manage MCP server availability, tools, and client access.</p>',1),ay=M('<p class="status error">Resolve the errors above before closing.</p>'),uy=M('<p class="status">Saving changes...</p>'),oy=M('<p class="status">Pending changes; closing this modal will save.</p>'),iy=M('<p class="status">Changes save when you close this modal.</p>'),ly=M('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function cy(e,t){vt(t,!1);const n=()=>ht(f,"$mcpServers",o),r=()=>ht(d,"$googleAuth",o),s=()=>ht(h,"$spotifyAuth",o),a=()=>ht(v,"$monarchAuth",o),[o,i]=Kn();let l=se(t,"open",8,!1);const c=Ht(),f=_3(),d=g3(),v=b3(),h=x3();let p=$(!1),k=!1,C=$(new Set),y=$(""),A=$(""),E=$(""),_=$(!1),T=$(""),w=$(!1);async function F(){await Promise.all([f.load(),d.load(),v.load(),h.load()])}async function W(){if(k||n().saving||r().authorizing)return;k=!0;const z=await f.flushPending(),J=rt(f);z&&!J.saveError&&c("close"),k=!1}function U(){!u(y)||!u(A)||v.save({email:u(y),password:u(A),mfa_secret:u(E)||null})}function D(z,J){n().saving||f.setServerEnabled(z,J)}function N(z,J,_e){n().saving||f.setClientServerEnabled(z,J,_e)}function G(z,J,_e){n().saving||f.setToolEnabled(z,J,_e)}async function I(){const z=u(T).trim();!z||u(w)||(b(w,!0),await f.connectServer(z),b(w,!1),b(T,""))}async function Y(z){n().saving||await f.removeServer(z)}function Z(){const z=rt(f);z.dirty||z.saving||f.refresh()}function X(){r().loading||r().authorizing||d.load()}async function fe(){r().authorizing||await d.authorize()}function ne(){s().loading||s().authorizing||h.load()}async function ue(){s().authorizing||await h.authorize()}function L(z){if(!z)return null;try{const J=new Date(z);return Number.isNaN(J.getTime())?z:new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"2-digit"}).format(J)}catch(J){return console.warn("Failed to format timestamp",J),z}}function j(z){const J=new Set(u(C));J.has(z)?J.delete(z):J.add(z),b(C,J)}ve(()=>(R(l()),u(p)),()=>{l()&&!u(p)?(b(p,!0),F()):!l()&&u(p)&&(b(p,!1),d.reset(),h.reset(),b(C,new Set),b(T,""))}),Zt(),bt();var ce=xe(),ge=pe(ce);{var K=z=>{{let J=Ct(()=>(n(),r(),m(()=>n().saving||r().authorizing)));wr(z,{get open(){return l()},labelledBy:"mcp-settings-title",modalClass:"mcp-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close MCP servers",get closeDisabled(){return u(J)},$$events:{close:()=>void W()},children:(_e,oe)=>{var be=ry(),te=pe(be),Te=g(te),$e=x(g(Te),2),Re=g($e),Xe=g(Re),Fe=x(Te,2),Qe=g(Fe);{var he=Ie=>{var Ae=k3();S(Ie,Ae)},ke=Ie=>{var Ae=xe(),ee=pe(Ae);{var Ce=Ze=>{var Ke=w3(),et=pe(Ke),Rt=g(et),ot=x(et,2),lt=g(ot);H(()=>{V(Rt,(r(),m(()=>r().error))),lt.disabled=(r(),m(()=>r().loading||r().authorizing))}),B("click",lt,X),S(Ze,Ke)},Ge=Ze=>{var Ke=xe(),et=pe(Ke);{var Rt=lt=>{var Pt=C3(),It=pe(Pt),we=x(g(It)),P=g(we),ie=x(It,2);{var ye=Be=>{var Me=S3(),je=g(Me);H(me=>V(je,`Current token expires ${me??""}.`),[()=>(r(),m(()=>L(r().expiresAt)??"soon"))]),S(Be,Me)},nt=Be=>{var Me=E3();S(Be,Me)};O(ie,Be=>{r(),m(()=>r().expiresAt)?Be(ye):Be(nt,!1)})}H(()=>V(P,(r(),m(()=>r().userEmail)))),S(lt,Pt)},ot=lt=>{var Pt=A3();S(lt,Pt)};O(et,lt=>{r(),m(()=>r().authorized)?lt(Rt):lt(ot,!1)},!0)}S(Ze,Ke)};O(ee,Ze=>{r(),m(()=>r().error)?Ze(Ce):Ze(Ge,!1)},!0)}S(Ie,Ae)};O(Qe,Ie=>{r(),m(()=>r().loading)?Ie(he):Ie(ke,!1)})}var Ne=x(Qe,2);Dt(Ne,5,()=>(r(),m(()=>r().services)),rr,(Ie,Ae)=>{var ee=T3(),Ce=g(ee);H(()=>V(Ce,u(Ae))),S(Ie,ee)});var re=x(te,2),Ee=g(re),ze=x(g(Ee),2),q=g(ze),le=g(q),Q=x(Ee,2),ae=g(Q);{var Pe=Ie=>{var Ae=D3();S(Ie,Ae)},Ue=Ie=>{var Ae=xe(),ee=pe(Ae);{var Ce=Ze=>{var Ke=F3(),et=pe(Ke),Rt=g(et),ot=x(et,2),lt=g(ot);H(()=>{V(Rt,(s(),m(()=>s().error))),lt.disabled=(s(),m(()=>s().loading||s().authorizing))}),B("click",lt,ne),S(Ze,Ke)},Ge=Ze=>{var Ke=xe(),et=pe(Ke);{var Rt=lt=>{var Pt=M3(),It=pe(Pt),we=x(g(It)),P=g(we);H(()=>V(P,(s(),m(()=>s().userEmail)))),S(lt,Pt)},ot=lt=>{var Pt=P3();S(lt,Pt)};O(et,lt=>{s(),m(()=>s().authorized)?lt(Rt):lt(ot,!1)},!0)}S(Ze,Ke)};O(ee,Ze=>{s(),m(()=>s().error)?Ze(Ce):Ze(Ge,!1)},!0)}S(Ie,Ae)};O(ae,Ie=>{s(),m(()=>s().loading)?Ie(Pe):Ie(Ue,!1)})}var Se=x(re,2),Ve=g(Se),He=x(g(Ve),2),qe=g(He);{var at=Ie=>{var Ae=I3();H(()=>Ae.disabled=(a(),m(()=>a().saving))),B("click",Ae,()=>v.remove()),S(Ie,Ae)},Ye=Ie=>{var Ae=N3(),ee=g(Ae);H(()=>{Ae.disabled=(a(),u(y),u(A),m(()=>a().saving||!u(y)||!u(A))),V(ee,(a(),m(()=>a().saving?"Saving...":"Connect")))}),B("click",Ae,U),S(Ie,Ae)};O(qe,Ie=>{a(),m(()=>a().configured)?Ie(at):Ie(Ye,!1)})}var xt=x(Ve,2),Tt=g(xt);{var Mt=Ie=>{var Ae=L3();S(Ie,Ae)},vn=Ie=>{var Ae=xe(),ee=pe(Ae);{var Ce=Ze=>{var Ke=O3(),et=x(g(Ke)),Rt=g(et);H(()=>V(Rt,(a(),m(()=>a().email)))),S(Ze,Ke)},Ge=Ze=>{var Ke=B3(),et=g(Ke),Rt=x(g(et)),ot=x(et,2),lt=x(g(ot)),Pt=g(lt),It=x(Pt,2),we=g(It);{var P=je=>{var me=$3();S(je,me)},ie=je=>{var me=R3();S(je,me)};O(we,je=>{u(_)?je(P):je(ie,!1)})}var ye=x(ot,2),nt=x(g(ye)),Be=x(ye,4);{var Me=je=>{var me=z3(),qt=g(me);H(()=>V(qt,(a(),m(()=>a().error)))),S(je,me)};O(Be,je=>{a(),m(()=>a().error)&&je(Me)})}H(()=>{de(Pt,"type",u(_)?"text":"password"),de(It,"title",u(_)?"Hide password":"Show password")}),sr(Rt,()=>u(y),je=>b(y,je)),sr(Pt,()=>u(A),je=>b(A,je)),B("click",It,()=>b(_,!u(_))),sr(nt,()=>u(E),je=>b(E,je)),S(Ze,Ke)};O(ee,Ze=>{a(),m(()=>a().configured)?Ze(Ce):Ze(Ge,!1)},!0)}S(Ie,Ae)};O(Tt,Ie=>{a(),m(()=>a().loading)?Ie(Mt):Ie(vn,!1)})}var Xt=x(Se,2),Qt=g(Xt),mt=g(Qt),tt=x(g(mt),2);{var Le=Ie=>{var Ae=U3(),ee=g(Ae);H(Ce=>V(ee,`Last updated ${Ce??""}`),[()=>(n(),m(()=>L(n().updatedAt)??""))]),S(Ie,Ae)},it=Ie=>{var Ae=j3();S(Ie,Ae)};O(tt,Ie=>{n(),m(()=>n().updatedAt)?Ie(Le):Ie(it,!1)})}var Je=x(mt,2),$t=g(Je),en=g($t),We=x(Qt,2),ut=g(We);{var kt=Ie=>{var Ae=q3();S(Ie,Ae)},De=Ie=>{var Ae=xe(),ee=pe(Ae);{var Ce=Ze=>{var Ke=H3(),et=g(Ke);H(()=>V(et,(n(),m(()=>n().error)))),S(Ze,Ke)},Ge=Ze=>{var Ke=ny(),et=pe(Ke),Rt=g(et),ot=x(Rt,2),lt=g(ot),Pt=x(et,2);{var It=Be=>{var Me=W3();S(Be,Me)},we=Be=>{var Me=Q3();Dt(Me,5,()=>(n(),m(()=>n().servers)),rr,(je,me)=>{var qt=X3(),Kt=g(qt),Et=g(Kt),Bt=g(Et),Wt=g(Bt),Jn=x(Bt,2),jr=g(Jn);let cs;var $a=g(jr),Ra=x(jr,4),za=g(Ra),Ws=x(Et,2),Ba=g(Ws);Dt(Ba,5,()=>ei,rr,(_t,pt)=>{var Ut=V3(),Gt=g(Ut),dn=x(Gt,2),nn=g(dn);H(rn=>{de(Ut,"title",`Enable for ${R(ru),u(pt),m(()=>ru[u(pt)])??""} client`),Cn(Gt,rn),Gt.disabled=(u(me),n(),m(()=>!u(me).enabled||!u(me).connected||n().pending[u(me).id]||n().saving)),V(nn,(R(ru),u(pt),m(()=>ru[u(pt)])))},[()=>(n(),u(pt),u(me),m(()=>n().clientPreferences[u(pt)]===null||n().clientPreferences[u(pt)]?.includes(u(me).id)))]),B("change",Gt,rn=>N(u(pt),u(me).id,rn.target.checked)),S(_t,Ut)});var Ua=x(Ba,2),qr=g(Ua),Bu=x(qr,2),ja=g(Bu),ds=x(Ua,2),Uu=x(Kt,2),Sr=g(Uu);let qa;var ju=g(Sr),Oe=g(ju),wt=x(Sr,2);{var Vt=_t=>{var pt=J3(),Ut=g(pt);{var Gt=Yt=>{var En=Z3();Dt(En,5,()=>(u(me),m(()=>u(me).tools)),rr,(Xn,sn)=>{var Dn=G3(),Er=g(Dn),Cr=g(Er),Hr=g(Cr),Wr=x(Er,2),Fn=g(Wr),Ln=x(Fn,2),fs=g(Ln);H(()=>{de(Dn,"data-disabled",(u(sn),m(()=>!u(sn).enabled))),V(Hr,(u(sn),m(()=>u(sn).name))),Cn(Fn,(u(sn),m(()=>u(sn).enabled))),Fn.disabled=(u(me),n(),m(()=>!u(me).enabled||n().pending[u(me).id]||n().saving)),V(fs,(u(sn),m(()=>u(sn).enabled?"Enabled":"Disabled")))}),B("change",Fn,ps=>G(u(me).id,u(sn).name,ps.target.checked)),S(Xn,Dn)}),S(Yt,En)},dn=Yt=>{var En=K3();S(Yt,En)};O(Ut,Yt=>{u(me),m(()=>u(me).tools.length)?Yt(Gt):Yt(dn,!1)})}var nn=x(Ut,2);{var rn=Yt=>{var En=Y3(),Xn=g(En);H(sn=>V(Xn,`Disabled tool ids: ${sn??""}`),[()=>(u(me),m(()=>u(me).disabled_tools.join(", ")))]),S(Yt,En)};O(nn,Yt=>{u(me),m(()=>u(me).disabled_tools.length)&&Yt(rn)})}H(()=>de(pt,"id",`tools-${u(me),m(()=>u(me).id)??""}`)),S(_t,pt)};O(wt,_t=>{u(C),u(me),m(()=>u(C).has(u(me).id))&&_t(Vt)})}H((_t,pt,Ut)=>{de(qt,"data-connected",(u(me),m(()=>u(me).connected))),de(qt,"data-pending",(n(),u(me),m(()=>n().pending[u(me).id]?"true":"false"))),de(qt,"data-dirty",(n(),u(me),m(()=>n().pendingChanges[u(me).id]?"true":"false"))),V(Wt,(u(me),m(()=>u(me).id))),cs=zt(jr,1,"",null,cs,_t),V($a,(u(me),m(()=>u(me).connected?"Connected":"Offline"))),de(Ra,"title",(u(me),m(()=>u(me).url))),V(za,(u(me),m(()=>u(me).url))),Cn(qr,(u(me),m(()=>u(me).enabled))),qr.disabled=(n(),u(me),m(()=>n().pending[u(me).id]||n().saving)),V(ja,(u(me),m(()=>u(me).enabled?"Enabled":"Disabled"))),ds.disabled=(n(),u(me),m(()=>n().pending[u(me).id]||n().saving)),qa=zt(Sr,1,"tools-toggle",null,qa,pt),de(Sr,"aria-expanded",Ut),de(Sr,"aria-controls",`tools-${u(me),m(()=>u(me).id)??""}`),V(Oe,`${u(me),m(()=>u(me).tool_count)??""} tool${u(me),m(()=>u(me).tool_count===1?"":"s")??""} available`)},[()=>({connected:u(me).connected,offline:!u(me).connected}),()=>({open:u(C).has(u(me).id)}),()=>(u(C),u(me),m(()=>u(C).has(u(me).id)))]),B("change",qr,_t=>D(u(me).id,_t.target.checked)),B("click",ds,()=>void Y(u(me).id)),B("click",Sr,()=>j(u(me).id)),S(je,qt)}),S(Be,Me)};O(Pt,Be=>{n(),m(()=>!n().servers.length)?Be(It):Be(we,!1)})}var P=x(Pt,2);{var ie=Be=>{var Me=ey(),je=g(Me);H(()=>V(je,(n(),m(()=>n().saveError)))),S(Be,Me)};O(P,Be=>{n(),m(()=>n().saveError)&&Be(ie)})}var ye=x(P,2);{var nt=Be=>{var Me=ty();S(Be,Me)};O(ye,Be=>{n(),m(()=>n().dirty)&&Be(nt)})}H(Be=>{Rt.disabled=(u(w),n(),m(()=>u(w)||n().saving)),ot.disabled=Be,V(lt,u(w)?"Connecting...":"Connect")},[()=>(u(w),u(T),n(),m(()=>u(w)||!u(T).trim()||n().saving))]),sr(Rt,()=>u(T),Be=>b(T,Be)),B("keydown",Rt,Be=>{Be.key==="Enter"&&I()}),B("click",ot,()=>void I()),S(Ze,Ke)};O(ee,Ze=>{n(),m(()=>n().error)?Ze(Ce):Ze(Ge,!1)},!0)}S(Ie,Ae)};O(ut,Ie=>{n(),m(()=>n().loading)?Ie(kt):Ie(De,!1)})}H(()=>{Re.disabled=(r(),m(()=>r().loading||r().authorizing)),V(Xe,(r(),m(()=>r().authorizing?"Authorizing...":r().authorized?"Reconnect Google Services":"Connect Google Services"))),q.disabled=(s(),m(()=>s().loading||s().authorizing)),V(le,(s(),m(()=>s().authorizing?"Authorizing...":s().authorized?"Reconnect Spotify":"Connect Spotify"))),$t.disabled=(n(),m(()=>n().refreshing||n().saving||n().dirty)),V(en,(n(),m(()=>n().refreshing?"Refreshing...":"Refresh")))}),B("click",Re,()=>void fe()),B("click",q,()=>void ue()),B("click",$t,Z),S(_e,be)},$$slots:{default:!0,heading:(_e,oe)=>{var be=sy();S(_e,be)},footer:(_e,oe)=>{var be=ly(),te=g(be);{var Te=Re=>{var Xe=ay();S(Re,Xe)},$e=Re=>{var Xe=xe(),Fe=pe(Xe);{var Qe=ke=>{var Ne=uy();S(ke,Ne)},he=ke=>{var Ne=xe(),re=pe(Ne);{var Ee=q=>{var le=oy();S(q,le)},ze=q=>{var le=iy();S(q,le)};O(re,q=>{n(),m(()=>n().dirty)?q(Ee):q(ze,!1)},!0)}S(ke,Ne)};O(Fe,ke=>{n(),m(()=>n().saving)?ke(Qe):ke(he,!1)},!0)}S(Re,Xe)};O(te,Re=>{n(),m(()=>n().saveError)?Re(Te):Re($e,!1)})}S(_e,be)}}})}};O(ge,z=>{l()&&z(K)})}S(e,ce),gt(),i()}var dy=M('<section><header class="svelte-10u46cr"><button type="button"><span class="title svelte-10u46cr"> </span> <span class="chevron svelte-10u46cr" aria-hidden="true"></span></button></header> <div class="content svelte-10u46cr"><!></div></section>');function ti(e,t){vt(t,!1);let n=se(t,"title",8),r=se(t,"startOpen",8,!1),s=se(t,"forceOpen",8,!1),a=$(r()),o=$(!1);const i=c(n());function l(){s()||b(a,!u(a))}function c(A){const E=A.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"section",_=Math.abs(Array.from(A).reduce((T,w)=>T*31+w.charCodeAt(0),7)).toString(36);return`filter-section-${E}-${_}`}ve(()=>(R(s()),u(a),u(o),R(r())),()=>{s()?(u(a)||b(a,!0),b(o,!0)):u(o)&&(b(a,r()),b(o,!1))}),Zt(),bt();var f=dy(),d=g(f),v=g(d);let h;var p=g(v),k=g(p),C=x(d,2),y=g(C);hn(y,t,"default",{}),H(A=>{zt(f,1,`filter-section ${u(a)?"expanded":"collapsed"}`,"svelte-10u46cr"),h=zt(v,1,"toggle svelte-10u46cr",null,h,A),de(v,"aria-expanded",u(a)),de(v,"aria-controls",i),de(v,"aria-disabled",s()),V(k,n()),de(C,"id",i),de(C,"hidden",!u(a))},[()=>({locked:s()})]),B("click",v,l),S(e,f),gt()}var fy=M('<div class="range-slider svelte-1q5g18c"><div class="track svelte-1q5g18c"></div> <div class="range svelte-1q5g18c" aria-hidden="true"></div> <input class="thumb thumb-min svelte-1q5g18c" type="range"/> <input class="thumb thumb-max svelte-1q5g18c" type="range"/></div>');function py(e,t){vt(t,!1);const n=$(),r=$(),s=$(),a=$(),o=$(),i=$(),l=Ht();let c=se(t,"id",8),f=se(t,"min",8,0),d=se(t,"max",8,100),v=se(t,"step",8,1),h=se(t,"value",24,()=>({min:f(),max:d()})),p=se(t,"disabled",8,!1),k=se(t,"ariaLabelMin",8,"Minimum value"),C=se(t,"ariaLabelMax",8,"Maximum value");const y=6;function A(N,G,I){return!Number.isFinite(N)||N<G?G:N>I?I:Number(N.toFixed(y))}function E(N,G,I){const Y=I-G;return!Number.isFinite(Y)||Y<=0?0:(N-G)/Y*100}function _(N,G){const I={min:N,max:G};l("input",I),l("change",I)}function T(N){const G=N.target,I=A(Number(G.value),u(n),u(a));if(I>u(a)){_(u(a),u(a));return}_(I,u(a))}function w(N){const G=N.target,I=A(Number(G.value),u(s),u(r));if(I<u(s)){_(u(s),u(s));return}_(u(s),I)}ve(()=>R(f()),()=>{b(n,Number.isFinite(f())?f():0)}),ve(()=>(R(d()),u(n)),()=>{b(r,Number.isFinite(d())?d():u(n))}),ve(()=>(R(h()),u(n),u(r)),()=>{b(s,A(h()?.min??u(n),u(n),u(r)))}),ve(()=>(R(h()),u(r),u(n)),()=>{b(a,A(h()?.max??u(r),u(n),u(r)))}),ve(()=>(u(s),u(a)),()=>{u(s)>u(a)&&b(s,u(a))}),ve(()=>(u(s),u(n),u(r)),()=>{b(o,E(u(s),u(n),u(r)))}),ve(()=>(u(a),u(n),u(r)),()=>{b(i,E(u(a),u(n),u(r)))}),Zt(),bt();var F=fy(),W=x(g(F),2),U=x(W,2),D=x(U,2);H(()=>{de(F,"data-disabled",p()),fn(W,`left: ${u(o)}%; right: ${100-u(i)}%;`),de(U,"id",c()?`${c()}-min`:void 0),de(U,"min",u(n)),de(U,"max",u(a)),de(U,"step",v()),St(U,u(s)),de(U,"aria-label",k()),U.disabled=p(),de(D,"id",c()?`${c()}-max`:void 0),de(D,"min",u(s)),de(D,"max",u(r)),de(D,"step",v()),St(D,u(a)),de(D,"aria-label",C()),D.disabled=p()}),B("input",U,T),B("input",D,w),S(e,F),gt()}var hy=M('<p class="empty svelte-2m3fny"> </p>'),my=M('<button type="button"><span class="label svelte-2m3fny"> </span> <span class="indicator svelte-2m3fny" aria-hidden="true"></span></button>'),vy=M('<div class="options svelte-2m3fny"><!></div>');function ws(e,t){vt(t,!1);let n=se(t,"title",8),r=se(t,"options",24,()=>[]),s=se(t,"selected",24,()=>[]),a=se(t,"excluded",24,()=>[]),o=se(t,"emptyMessage",8,"No options available."),i=se(t,"variant",8,"default");const l=Ht();let c=$([]);function f(p){l("toggle",p)}function d(p){return p.trim().toLowerCase()}function v(p,k){if(p.length===0)return!1;const C=d(k);return C?p.some(y=>d(y)===C):!1}function h(p){return v(s(),p)?"include":v(a(),p)?"exclude":"neutral"}ve(()=>R(r()),()=>{b(c,r().map(p=>{const k=h(p);return{value:p,state:k,pressed:k==="include"?"true":k==="exclude"?"mixed":"false"}}))}),Zt(),bt();{let p=Ct(()=>(R(s()),R(a()),m(()=>s().length+a().length>0)));ti(e,{get title(){return n()},get forceOpen(){return u(p)},children:(k,C)=>{var y=vy(),A=g(y);{var E=T=>{var w=hy(),F=g(w);H(()=>V(F,o())),S(T,w)},_=T=>{var w=xe(),F=pe(w);Dt(F,1,()=>u(c),({value:W,state:U,pressed:D})=>W,(W,U)=>{let D=()=>u(U).value,N=()=>u(U).state,G=()=>u(U).pressed;var I=my();let Y;var Z=g(I),X=g(Z);H(fe=>{Y=zt(I,1,"pill svelte-2m3fny",null,Y,fe),de(I,"aria-pressed",G()),de(I,"data-state",N()),V(X,D())},[()=>({active:N()==="include",exclude:N()==="exclude"})]),B("click",I,()=>f(D())),S(W,I)}),S(T,w)};O(A,T=>{R(r()),m(()=>r().length===0)?T(E):T(_,!1)})}H(()=>de(y,"data-variant",i())),S(k,y)},$$slots:{default:!0}})}gt()}const Pi=1e-9,Oa=[4e3,16e3,32e3,64e3,128e3,256e3,1e6],wa=Oa.length,ma=0;function gy(e){return!Number.isFinite(e)||e<=0?"Any":e>=1e6?"1M":e>=1e3?`${Math.round(e/1e3)}K`:`${e}`}const rc=["Any",...Oa.map(e=>gy(e))],ls=[0,.1,.2,.5,1,5,10],Qr=ls.length,Fs=Qr,sc="$10+";function ia(e){if(e<=0)return"FREE";const t=Math.abs(e),n=t>=10||t>=1?0:t>=.1?1:t>=.01?2:3;return`$${e.toFixed(n).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")}`}const No=ls.map(e=>ia(e));function aa(e,t,n){return!Number.isFinite(e)||e<t?t:e>n?n:Math.round(e)}function ef(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<Qr;r+=1){const s=Math.abs(ls[r]-e);s<n&&(n=s,t=r)}return t}function _y(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<wa;r+=1){const s=Math.abs(Oa[r]-e);s<n&&(n=s,t=r)}return t+1}function by(e){if(e===null||e<=0)return 0;const t=ls.findIndex(n=>Math.abs(n-e)<=Pi);return t>=0?t:ef(e)}function yy(e){if(e===null)return Fs;const t=ls.findIndex(n=>Math.abs(n-e)<=Pi);return t>=0?t:ef(e)}function xy(e){if(e===null||e<=0)return ma;for(let t=0;t<wa;t+=1)if(Math.abs(Oa[t]-e)<=Pi)return t+1;return _y(e)}function ky(e){if(e<=ma)return null;const t=Math.min(Math.max(e-1,0),wa-1);return Oa[t]}function wy(e){if(e<=0)return null;const t=Math.min(e,Qr-1);return ls[t]}function Sy(e){if(e>=Fs)return null;const t=Math.min(Math.max(e,0),Qr-1);return ls[t]}function Ey(e){if(!e)return 0;let t=0;e.search.trim()&&(t+=1);const n=r=>{t+=r.include.length+r.exclude.length};return n(e.inputModalities),n(e.outputModalities),n(e.series),n(e.providers),n(e.supportedParameters),n(e.moderation),e.minContext!==null&&(t+=1),e.minPromptPrice!==null&&(t+=1),e.maxPromptPrice!==null&&(t+=1),t}var Cy=M('<p class="hint svelte-1247vns">No context metadata available.</p>'),Ay=M('<p class="hint svelte-1247vns"> </p>'),Ty=M('<span class="svelte-1247vns"> </span>'),Dy=M('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Minimum tokens</span> <span class="slider-value svelte-1247vns"> </span></div> <input class="slider svelte-1247vns" type="range" aria-label="Minimum context tokens"/> <div class="slider-scale context-scale svelte-1247vns"></div></div>'),Fy=M('<p class="hint svelte-1247vns">No pricing metadata available.</p>'),My=M('<p class="hint svelte-1247vns"> </p>'),Py=M('<span class="svelte-1247vns"> </span>'),Iy=M('<div class="slider-scale price-scale svelte-1247vns"></div>'),Ny=M('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Prompt price (per 1M tokens)</span> <span class="slider-value svelte-1247vns"> </span></div> <!> <!></div>'),Ly=M('<aside class="filters-panel svelte-1247vns" aria-label="Filter models"><header class="filters-header svelte-1247vns"><div><h3 class="svelte-1247vns">Filters</h3> <p> </p></div> <button type="button" class="btn btn-ghost btn-small">Clear all</button></header> <div class="filters-content svelte-1247vns"><!> <!> <!> <!> <!> <!> <!> <!></div></aside>');function Oy(e,t){vt(t,!1);const n=()=>ht(i,"$facets",a),r=()=>ht(l,"$filters",a),s=()=>ht(E,"$activeFilters",a),[a,o]=Kn(),{facets:i,filters:l,toggleInputModality:c,toggleOutputModality:f,toggleSeries:d,toggleProvider:v,toggleSupportedParameter:h,toggleModeration:p,setMinContext:k,setMinPromptPrice:C,setMaxPromptPrice:y,resetFilters:A,activeFilters:E}=lr,_="context-length-slider",T="prompt-price-slider";let w=$(),F=$(null),W=$(),U=$(0),D=$(""),N=$(null),G=$(!1),I=$(0),Y=$([]),Z=$(!1),X=$({min:0,max:0}),fe=$(""),ne=$([]);function ue(he){if(u(G)){k(null);return}const ke=aa(he,ma,wa);k(ky(ke))}function L(he){if(u(Z)){C(null),y(null);return}const ke=he.detail,Ne=aa(ke.min,0,Qr-1),re=aa(ke.max,0,Fs);C(wy(Ne)),y(Sy(re))}ve(()=>n(),()=>{b(F,n())}),ve(()=>r(),()=>{b(w,r())}),ve(()=>s(),()=>{b(W,s())}),ve(()=>u(w),()=>{b(U,Ey(u(w)))}),ve(()=>u(U),()=>{b(D,u(U)>0?`${u(U)} active filter${u(U)===1?"":"s"}`:"All models shown.")}),ve(()=>(u(F),u(G),u(w),rc),()=>{const he=u(F)?.maxContext??null;b(N,he),b(G,he===null),b(I,u(G)?ma:xy(u(w)?.minContext??null)),b(Y,u(G)?[]:rc)}),ve(()=>u(F),()=>{const he=u(F)?.maxPromptPrice??null;b(Z,he===null)}),ve(()=>(u(Z),u(w),Qr),()=>{b(X,(()=>{if(u(Z))return{min:0,max:Fs};const he=by(u(w)?.minPromptPrice??null),ke=yy(u(w)?.maxPromptPrice??null),Ne=aa(he,0,Qr-1),re=aa(ke,0,Fs);return Ne>re?{min:re,max:re}:{min:Ne,max:re}})())}),ve(()=>(u(w),sc),()=>{b(fe,(()=>{const he=u(w)?.minPromptPrice,ke=u(w)?.maxPromptPrice,Ne=he===null?No[0]:ia(he),re=ke===null?sc:ia(ke);return`${Ne} â ${re}`})())}),ve(()=>(u(Z),No),()=>{b(ne,u(Z)?[]:No)}),Zt(),bt();var j=Ly(),ce=g(j),ge=g(ce),K=x(g(ge),2);let z;var J=g(K),_e=x(ge,2),oe=x(ce,2),be=g(oe);{let he=Ct(()=>(u(F),m(()=>u(F)?.inputModalities??[]))),ke=Ct(()=>(u(w),m(()=>u(w)?.inputModalities?.include??[]))),Ne=Ct(()=>(u(w),m(()=>u(w)?.inputModalities?.exclude??[])));ws(be,{title:"Input modalities",get options(){return u(he)},get selected(){return u(ke)},get excluded(){return u(Ne)},emptyMessage:"No modality data available.",$$events:{toggle:re=>c(re.detail)}})}var te=x(be,2);{let he=Ct(()=>(u(F),m(()=>u(F)?.outputModalities??[]))),ke=Ct(()=>(u(w),m(()=>u(w)?.outputModalities?.include??[]))),Ne=Ct(()=>(u(w),m(()=>u(w)?.outputModalities?.exclude??[])));ws(te,{title:"Output modalities",get options(){return u(he)},get selected(){return u(ke)},get excluded(){return u(Ne)},emptyMessage:"No modality data available.",$$events:{toggle:re=>f(re.detail)}})}var Te=x(te,2);{let he=Ct(()=>(u(w),m(()=>u(w)?.minContext!==null)));ti(Te,{title:"Context length",get forceOpen(){return u(he)},children:(ke,Ne)=>{var re=xe(),Ee=pe(re);{var ze=le=>{var Q=xe(),ae=pe(Q);{var Pe=Se=>{var Ve=Cy();S(Se,Ve)},Ue=Se=>{var Ve=Ay(),He=g(Ve);H(qe=>V(He,`All models offer ${qe??""} context.`),[()=>(R(Za),u(N),m(()=>Za(u(N))))]),S(Se,Ve)};O(ae,Se=>{u(F),m(()=>u(F)?.maxContext===null||u(F)?.maxContext===void 0)?Se(Pe):Se(Ue,!1)})}S(le,Q)},q=le=>{var Q=Dy(),ae=g(Q),Pe=x(g(ae),2),Ue=g(Pe),Se=x(ae,2);de(Se,"id",_),de(Se,"step",1);var Ve=x(Se,2);Dt(Ve,7,()=>u(Y),(He,qe)=>He+qe,(He,qe)=>{var at=Ty(),Ye=g(at);H(()=>V(Ye,u(qe))),S(He,at)}),H(He=>{V(Ue,He),de(Se,"min",ma),de(Se,"max",wa),St(Se,u(I))},[()=>(u(w),R(Za),m(()=>u(w)?.minContext===null?"Any":Za(u(w)?.minContext??0)))]),B("input",Se,He=>ue(Number(He.target.value))),S(le,Q)};O(Ee,le=>{u(G)?le(ze):le(q,!1)})}S(ke,re)},$$slots:{default:!0}})}var $e=x(Te,2);{let he=Ct(()=>(u(w),m(()=>u(w)?.minPromptPrice!==null||u(w)?.maxPromptPrice!==null)));ti($e,{title:"Prompt pricing",get forceOpen(){return u(he)},children:(ke,Ne)=>{var re=xe(),Ee=pe(re);{var ze=le=>{var Q=xe(),ae=pe(Q);{var Pe=Se=>{var Ve=Fy();S(Se,Ve)},Ue=Se=>{var Ve=My(),He=g(Ve);H(qe=>V(He,`All models share ${qe??""} pricing.`),[()=>(R(ia),u(F),m(()=>ia(u(F)?.maxPromptPrice??0)))]),S(Se,Ve)};O(ae,Se=>{u(F),m(()=>u(F)?.maxPromptPrice===null||u(F)?.maxPromptPrice===void 0)?Se(Pe):Se(Ue,!1)})}S(le,Q)},q=le=>{var Q=Ny(),ae=g(Q),Pe=x(g(ae),2),Ue=g(Pe),Se=x(ae,2);py(Se,{id:T,min:0,get max(){return Fs},step:1,get value(){return u(X)},ariaLabelMin:"Minimum prompt price",ariaLabelMax:"Maximum prompt price",get disabled(){return u(Z)},$$events:{input:L,change:L}});var Ve=x(Se,2);{var He=qe=>{var at=Iy();Dt(at,7,()=>u(ne),(Ye,xt)=>Ye+xt,(Ye,xt)=>{var Tt=Py(),Mt=g(Tt);H(()=>V(Mt,u(xt))),S(Ye,Tt)}),S(qe,at)};O(Ve,qe=>{u(ne),m(()=>u(ne).length>0)&&qe(He)})}H(()=>V(Ue,u(fe))),S(le,Q)};O(Ee,le=>{u(Z)?le(ze):le(q,!1)})}S(ke,re)},$$slots:{default:!0}})}var Re=x($e,2);{let he=Ct(()=>(u(F),m(()=>u(F)?.series??[]))),ke=Ct(()=>(u(w),m(()=>u(w)?.series?.include??[]))),Ne=Ct(()=>(u(w),m(()=>u(w)?.series?.exclude??[])));ws(Re,{title:"Series",get options(){return u(he)},get selected(){return u(ke)},get excluded(){return u(Ne)},emptyMessage:"Series information unavailable.",$$events:{toggle:re=>d(re.detail)}})}var Xe=x(Re,2);{let he=Ct(()=>(u(F),m(()=>u(F)?.supportedParameters??[]))),ke=Ct(()=>(u(w),m(()=>u(w)?.supportedParameters?.include??[]))),Ne=Ct(()=>(u(w),m(()=>u(w)?.supportedParameters?.exclude??[])));ws(Xe,{title:"Supported parameters",get options(){return u(he)},get selected(){return u(ke)},get excluded(){return u(Ne)},variant:"columns",emptyMessage:"No parameter metadata available.",$$events:{toggle:re=>h(re.detail)}})}var Fe=x(Xe,2);{let he=Ct(()=>(u(F),m(()=>u(F)?.providers??[]))),ke=Ct(()=>(u(w),m(()=>u(w)?.providers?.include??[]))),Ne=Ct(()=>(u(w),m(()=>u(w)?.providers?.exclude??[])));ws(Fe,{title:"Providers",get options(){return u(he)},get selected(){return u(ke)},get excluded(){return u(Ne)},emptyMessage:"No provider data available.",$$events:{toggle:re=>v(re.detail)}})}var Qe=x(Fe,2);{let he=Ct(()=>(u(F),m(()=>u(F)?.moderation??[]))),ke=Ct(()=>(u(w),m(()=>u(w)?.moderation?.include??[]))),Ne=Ct(()=>(u(w),m(()=>u(w)?.moderation?.exclude??[])));ws(Qe,{title:"Moderation",get options(){return u(he)},get selected(){return u(ke)},get excluded(){return u(Ne)},variant:"compact",emptyMessage:"No moderation metadata available.",$$events:{toggle:re=>p(re.detail)}})}H(he=>{z=zt(K,1,"filters-status svelte-1247vns",null,z,he),V(J,u(D)),_e.disabled=!u(W)},[()=>({muted:u(U)===0})]),B("click",_e,A),S(e,j),gt(),o()}var $y=M("<option> </option>"),Ry=M('<div class="sort svelte-3bn1bu"><label for="sort-select" class="sort-label svelte-3bn1bu">Sort by</label> <select id="sort-select" class="select-control sort-select svelte-3bn1bu"></select></div>');function zy(e,t){vt(t,!1);let n=se(t,"selected",8),r=se(t,"onSelect",8);const s=[{label:"Newest",value:"newness"},{label:"Lowest price",value:"price"},{label:"Longest context",value:"context"}];function a(c){const f=c.target;r()(f.value)}bt();var o=Ry(),i=x(g(o),2);Dt(i,5,()=>s,rr,(c,f)=>{var d=$y(),v=g(d),h={};H(()=>{V(v,(u(f),m(()=>u(f).label))),h!==(h=(u(f),m(()=>u(f).value)))&&(d.value=(d.__value=(u(f),m(()=>u(f).value)))??"")}),S(c,d)});var l;Pn(i),H(()=>{l!==(l=n())&&(i.value=(i.__value=n())??"",yn(i,n()))}),B("change",i,a),S(e,o),gt()}const By="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M400-240%20160-480l240-240%2056%2058-142%20142h486v80H314l142%20142-56%2058Z'/%3e%3c/svg%3e";var Uy=M('<header class="explorer-header svelte-d2gcy1"><div class="title-group svelte-d2gcy1"><a class="btn btn-ghost btn-small chat-link svelte-d2gcy1" href="/chat" aria-label="Return to chat"><img alt="" aria-hidden="true" class="icon svelte-d2gcy1"/> <span class="label svelte-d2gcy1">Chat</span></a> <h2 id="model-explorer-title" class="svelte-d2gcy1">Model Explorer</h2></div> <div class="header-controls svelte-d2gcy1"><label class="search svelte-d2gcy1"><span class="visually-hidden svelte-d2gcy1">Search models</span> <input class="input-control svelte-d2gcy1" type="search" placeholder="Search by name, provider, description, or tags"/></label> <div class="meta-row svelte-d2gcy1"><p class="summary svelte-d2gcy1" aria-live="polite"> </p> <!></div></div></header>');function jy(e,t){vt(t,!1);let n=se(t,"resultCount",8,0),r=se(t,"searchValue",8,""),s=se(t,"onSearch",8),a=se(t,"sort",8),o=se(t,"onSort",8),i=se(t,"onClose",8);function l(_){const T=_.target;T&&s()(T.value)}bt();var c=Uy(),f=g(c),d=g(f),v=g(d),h=x(f,2),p=g(h),k=x(g(p),2),C=x(p,2),y=g(C),A=g(y),E=x(y,2);zy(E,{get selected(){return a()},get onSelect(){return o()}}),H(()=>{de(v,"src",By),St(k,r()),V(A,`${n()??""} result${n()===1?"":"s"}`)}),B("click",d,hi(function(..._){i()?.apply(this,_)})),B("input",k,l),S(e,c),gt()}var qy=M('<div class="info-item svelte-b7ahyp"><dt class="svelte-b7ahyp"> </dt> <dd class="svelte-b7ahyp"> </dd></div>'),Hy=M('<article class="model-card svelte-b7ahyp" role="button" tabindex="0"><header class="svelte-b7ahyp"><h4 class="svelte-b7ahyp"> </h4></header> <section class="info-section svelte-b7ahyp"><dl class="info-grid svelte-b7ahyp"></dl></section></article>');function Wy(e,t){vt(t,!1);const n=$(),r=$(),s=$(),a=$(),o=$(),i=$(),l=$(),c=$(),f=$(),d=$(),v=$(),h=$(),p=$(),k=$(),C=$();let y=se(t,"model",8),A=se(t,"onSelect",8);const E=1e6;function _(L){return L&&L.split(/[\s_/-]+/).filter(Boolean).map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" ")}function T(L){const j=new Set,ce=[];for(const ge of L){const K=_(ge.trim());if(!K)continue;const z=K.toLowerCase();j.has(z)||(j.add(z),ce.push(K))}return ce}function w(L){if(L===null)return"Unknown";const j=L/E,ce=j>=10?0:1;return`${j.toFixed(ce).replace(/\.0$/,"")}M tokens`}function F(L){return L.length?L.join(", "):null}function W(L,j){if(L===null)return null;const ce=$p(L);return ce==="FREE"?"FREE":`${ce} ${j}`}const U="/ 1M tokens";function D(L,j,ce,ge){const K=W(ce,ge);return K?{key:L,label:j,value:K}:null}function N(L,j,ce){return ce?{key:L,label:j,value:ce}:null}function G(){A()(y())}function I(L){(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),A()(y()))}ve(()=>R(y()),()=>{b(n,y().name??y().id)}),ve(()=>R(y()),()=>{b(r,ud(y()))}),ve(()=>R(y()),()=>{b(s,Op(y()))}),ve(()=>R(y()),()=>{b(a,fa(y()))}),ve(()=>u(a),()=>{b(o,w(u(a)))}),ve(()=>R(y()),()=>{b(i,_i(y()).map(L=>L.toLowerCase()))}),ve(()=>R(y()),()=>{b(l,bi(y()).map(L=>L.toLowerCase()))}),ve(()=>u(r),()=>{b(c,u(r)!==null)}),ve(()=>u(s),()=>{b(f,u(s)!==null)}),ve(()=>u(i),()=>{b(d,T(u(i)))}),ve(()=>u(l),()=>{b(v,T(u(l)))}),ve(()=>R(y()),()=>{b(h,(()=>{const L=y().provider;if(L&&typeof L=="object"){if(L.display_name)return L.display_name;if(L.slug)return L.slug}const j=y().id?.split("/")??[];return j.length>1?j[j.length-2]:null})())}),ve(()=>(u(o),u(h),u(d),u(v)),()=>{b(p,[N("context","Context",u(o)),N("provider","Provider",u(h)),N("input-modalities","Input",F(u(d))),N("output-modalities","Output",F(u(v)))].filter(L=>!!L))}),ve(()=>(u(c),u(r),u(f),u(s)),()=>{b(k,[u(c)?D("input-price","Input price",u(r),U):null,u(f)?D("output-price","Output price",u(s),U):null].filter(L=>!!L))}),ve(()=>(u(p),u(k)),()=>{b(C,[...u(p),...u(k)])}),Zt(),bt();var Y=Hy(),Z=g(Y),X=g(Z),fe=g(X),ne=x(Z,2),ue=g(ne);Dt(ue,5,()=>u(C),L=>L.key,(L,j)=>{var ce=qy(),ge=g(ce),K=g(ge),z=x(ge,2),J=g(z);H(()=>{V(K,(u(j),m(()=>u(j).label))),V(J,(u(j),m(()=>u(j).value)))}),S(L,ce)}),H(()=>{de(Y,"aria-label",`Use model ${u(n)}`),V(fe,u(n))}),B("click",Y,G),B("keydown",Y,I),S(e,Y),gt()}var Vy=M('<button type="button"><span class="chip-label svelte-v6y1b4"><span class="chip-category svelte-v6y1b4"> </span> <span class="chip-separator" aria-hidden="true">Â·</span> <span class="chip-value svelte-v6y1b4"> </span></span> <span class="chip-remove svelte-v6y1b4" aria-hidden="true">Ã</span></button>'),Gy=M('<section class="active-filters svelte-v6y1b4" aria-label="Active filters"><h3 class="title svelte-v6y1b4">Active filters</h3> <div class="chip-list svelte-v6y1b4"></div></section>');function Zy(e,t){vt(t,!1);let n=se(t,"chips",24,()=>[]);const r=Ht();function s(l){r("clear",l)}bt();var a=xe(),o=pe(a);{var i=l=>{var c=Gy(),f=x(g(c),2);Dt(f,5,n,d=>d.id,(d,v)=>{var h=Vy();let p;var k=g(h),C=g(k),y=g(C),A=x(C,4),E=g(A);H(_=>{p=zt(h,1,"chip svelte-v6y1b4",null,p,_),de(h,"aria-label",(u(v),m(()=>`Remove ${u(v).state==="exclude"?"excluded":"included"} filter ${u(v).categoryLabel} ${u(v).valueLabel}`))),V(y,(u(v),m(()=>u(v).categoryLabel))),V(E,`${u(v),m(()=>u(v).state==="exclude"?"Not ":"")??""}${u(v),m(()=>u(v).valueLabel)??""}`)},[()=>({include:u(v).state==="include",exclude:u(v).state==="exclude"})]),B("click",h,()=>s(u(v))),S(d,h)}),S(l,c)};O(o,l=>{R(n()),m(()=>n().length>0)&&l(i)})}S(e,a),gt()}var Ky=M('<p class="empty svelte-6ipifh"><!></p>'),Yy=M("<li><!></li>"),Jy=M('<ul class="model-grid svelte-6ipifh"></ul>'),Xy=M('<section class="results svelte-6ipifh" aria-live="polite"><!> <!></section>');function Qy(e,t){vt(t,!1);let n=se(t,"models",24,()=>[]),r=se(t,"filtersActive",8,!1),s=se(t,"onSelect",8),a=se(t,"filterChips",24,()=>[]);const o=Ht();function i(h){o("clearFilter",h.detail)}bt();var l=Xy(),c=g(l);Zy(c,{get chips(){return a()},$$events:{clear:i}});var f=x(c,2);{var d=h=>{var p=Ky(),k=g(p);{var C=A=>{var E=kn("No models match your current filters.");S(A,E)},y=A=>{var E=kn("No models available.");S(A,E)};O(k,A=>{r()?A(C):A(y,!1)})}S(h,p)},v=h=>{var p=Jy();Dt(p,5,n,k=>k.id,(k,C)=>{var y=Yy(),A=g(y);Wy(A,{get model(){return u(C)},get onSelect(){return s()}}),S(k,y)}),S(h,p)};O(f,h=>{R(n()),m(()=>n().length===0)?h(d):h(v,!1)})}S(e,l),gt()}var e6=M('<span class="filters-toggle__status svelte-drtqmy">Active</span>'),t6=M('<div class="body-toolbar svelte-drtqmy"><button type="button" aria-controls="model-explorer-filters"><span class="filters-toggle__label">Filters</span> <!></button></div>'),n6=M('<div class="modal-backdrop svelte-drtqmy" role="presentation"></div> <div class="model-explorer svelte-drtqmy" role="dialog" aria-modal="true" aria-labelledby="model-explorer-title"><!> <div class="body svelte-drtqmy"><!> <div id="model-explorer-filters" class="filters-panel-container svelte-drtqmy"><!></div> <!></div></div>',1);function r6(e,t){vt(t,!1);const n=()=>ht(v,"$filtered",a),r=()=>ht(C,"$activeFilters",a),s=()=>ht(h,"$filters",a),[a,o]=Kn(),i=$(),l=$(),c=$();let f=se(t,"open",12,!1);const d=Ht(),{filtered:v,filters:h,setSearch:p,setSort:k,activeFilters:C,setSelectionState:y}=lr,A={inputModalities:{label:"Input"},outputModalities:{label:"Output"},series:{label:"Series"},providers:{label:"Provider"},supportedParameters:{label:"Parameter"},moderation:{label:"Moderation"}},E=["inputModalities","outputModalities","series","providers","supportedParameters","moderation"],_="(max-width: 1024px)";let T=$(!1),w=$(!0),F=!1,W=$([]);const U="modal-open";let D=()=>{typeof document<"u"&&document.body.classList.remove(U)};Os(()=>D());function N(){f(!1),d("close")}function G(K){d("select",{id:K.id}),N()}function I(K){k(K)}function Y(K){p(K)}function Z(K){const z=[];for(const J of E){const _e=K[J];if(!_e)continue;const be=A[J]?.label??J;for(const te of _e.include)z.push(X(J,be,te,"include"));for(const te of _e.exclude)z.push(X(J,be,te,"exclude"))}return z}function X(K,z,J,_e){const oe=J.trim();return{id:`${K}:${_e}:${oe}`,category:K,categoryLabel:z,value:oe,valueLabel:fe(oe),state:_e}}function fe(K){return K.replace(/[_-]/g," ")||K}function ne(K){b(T,K),K?F||b(w,!1):(b(w,!0),F=!1)}function ue(){b(w,!u(w)),F=!0}function L(K){const z=K.detail;y(z.category,z.value,"neutral")}Fa(()=>{if(typeof window>"u")return;const K=window.matchMedia(_);ne(K.matches);const z=J=>{ne(J.matches)};return typeof K.addEventListener=="function"?(K.addEventListener("change",z),()=>K.removeEventListener("change",z)):(K.addListener(z),()=>K.removeListener(z))}),ve(()=>R(f()),()=>{typeof document<"u"&&(f()?document.body.classList.add(U):document.body.classList.remove(U))}),ve(()=>n(),()=>{b(i,n())}),ve(()=>r(),()=>{b(l,r())}),ve(()=>s(),()=>{b(c,s())}),ve(()=>u(c),()=>{b(W,u(c)?Z(u(c)):[])}),Zt(),bt();var j=xe(),ce=pe(j);{var ge=K=>{var z=n6(),J=pe(z),_e=x(J,2),oe=g(_e);jy(oe,{get resultCount(){return u(i),m(()=>u(i).length)},get searchValue(){return s(),m(()=>s().search)},onSearch:Y,get sort(){return s(),m(()=>s().sort)},onSort:I,onClose:N});var be=x(oe,2),te=g(be);{var Te=Fe=>{var Qe=t6(),he=g(Qe);let ke;var Ne=x(g(he),2);{var re=Ee=>{var ze=e6();S(Ee,ze)};O(Ne,Ee=>{u(l)&&Ee(re)})}H(Ee=>{ke=zt(he,1,"filters-toggle svelte-drtqmy",null,ke,Ee),de(he,"aria-expanded",u(w))},[()=>({open:u(w)})]),B("click",he,ue),S(Fe,Qe)};O(te,Fe=>{u(T)&&Fe(Te)})}var $e=x(te,2),Re=g($e);Oy(Re,{});var Xe=x($e,2);Qy(Xe,{get models(){return u(i)},get filtersActive(){return u(l)},get filterChips(){return u(W)},onSelect:G,$$events:{clearFilter:L}}),H(()=>{de(_e,"data-compact",u(T)),de(be,"data-compact",u(T)),de($e,"data-compact",u(T)),de($e,"data-open",u(w))}),B("click",J,N),S(K,z)};O(ce,K=>{f()&&K(ge)})}S(e,j),gt(),o()}var s6=M('<div class="chat-error svelte-1n46o8q" role="alert"><span class="svelte-1n46o8q"> </span> <button type="button" class="svelte-1n46o8q">Dismiss</button></div>'),a6=M('<div class="install-banner svelte-1n46o8q" role="alertdialog" aria-labelledby="install-title"><div class="install-content svelte-1n46o8q"><span id="install-title" class="svelte-1n46o8q">Install this app for a better experience</span> <div class="install-actions svelte-1n46o8q"><button class="install-btn install-btn-primary svelte-1n46o8q" type="button">Install</button> <button class="install-btn install-btn-dismiss svelte-1n46o8q" type="button">Not now</button></div></div></div>'),u6=M('<main class="chat-app svelte-1n46o8q"><!> <section class="chat-main svelte-1n46o8q"><!> <!></section> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></main>');function o6(e,t){vt(t,!1);const n=()=>ht(w,"$selectable",c),r=()=>ht(_a,"$chatStore",c),s=()=>ht(F,"$activeFor",c),a=()=>ht(pd,"$speechState",c),o=()=>ht(_,"$modelsLoading",c),i=()=>ht(T,"$modelsError",c),l=()=>ht(Cs,"$suggestionsStore",c),[c,f]=Kn(),{sendMessage:d,cancelStream:v,clearConversation:h,deleteMessage:p,retryMessage:k,editMessage:C,clearError:y,setModel:A}=_a,{loadModels:E,loading:_,error:T,selectable:w,activeFor:F}=lr;let W=$(""),U=$([]),D=$(),N=$(!1),G=$(!1),I=$(!1),Y=$(!1),Z=$(!1),X=$(!1),fe=$(!1),ne=$(0),ue=$(!1),L=$(!1),j=$(null),ce=$(null),ge=$(null),K=$([]),z=$(null);const J=Xc;let _e=$(null),oe=$(""),be=$(""),te=$(!1),Te=null,$e=$(!1),Re=$(!1);function Xe(){if(typeof window>"u"||typeof document>"u")return;const ee=window.visualViewport?.height??window.innerHeight;document.documentElement.style.setProperty("--app-vh",`${Math.round(ee)}px`)}Fa(async()=>{if(typeof window<"u"){const Ge=()=>{Xe()};Xe(),window.addEventListener("resize",Ge),window.visualViewport?.addEventListener("resize",Ge),window.visualViewport?.addEventListener("scroll",Ge),b(Re,window.matchMedia("(display-mode: standalone)").matches||"standalone"in navigator&&navigator.standalone===!0);const Ze=Ke=>{Ke.preventDefault(),Te=Ke,b($e,!0)};window.addEventListener("beforeinstallprompt",Ze),window.addEventListener("appinstalled",()=>{b($e,!1),Te=null}),Os(()=>{window.removeEventListener("beforeinstallprompt",Ze),window.removeEventListener("resize",Ge),window.visualViewport?.removeEventListener("resize",Ge),window.visualViewport?.removeEventListener("scroll",Ge),typeof document<"u"&&document.documentElement.style.removeProperty("--app-vh")})}await E(),await Cs.load();const ee=await tr.loadDefault();if(ee){const Ge=await tr.apply(ee.name);Ge?.model&&A(Ge.model),await Cs.load()}new URLSearchParams(window.location.search).get("mcp")==="1"&&(b(Z,!0),window.history.replaceState({},"",window.location.pathname))});async function Fe(){if(!u(D))return;const ee=u(D).getNewSuggestion();ee&&await Cs.add(ee.label,ee.text)}async function Qe(ee){await Cs.remove(ee.detail.index)}Os(()=>{typeof document<"u"&&document.body.classList.remove("modal-open")});function he(ee){A(ee)}function ke(){O1()}function Ne(ee){A(ee.detail.id)}function re(ee){b(W,ee)}function Ee(ee){r().isStreaming||p(ee.detail.id)}function ze(ee){k(ee)}function q(ee){if(!ee?.attachment)return;ae();const Ce={...ee.attachment,metadata:ee.attachment.metadata?{...ee.attachment.metadata}:null},Ge=u(U)??[],Ke=Ge.some(et=>et.id===Ce.id||et.displayUrl===Ce.displayUrl||et.deliveryUrl===Ce.deliveryUrl)?Ge:[...Ge,Ce];b(U,Ke)}function le(ee){const Ce=r().messages.find(Ge=>Ge.id===ee&&Ge.role==="user");Ce&&(b(te,!1),b(_e,ee),b(oe,Ce.text),b(be,Ce.text))}function Q(){b(_e,null),b(oe,""),b(be,"")}function ae(){u(te)||Q()}function Pe(){ae()}function Ue(ee){if(!u(_e))return;const Ce=ee.trim();if(!Ce)return;const Ge=u(_e);b(te,!0),Q(),C(Ge,Ce).catch(Ke=>{console.error("Failed to apply message edit",Ke)}).finally(()=>{b(te,!1)})}async function Se(ee){if(ee){b(G,!0),b(L,!0),b(j,null),b(ce,null),b(ge,ee);try{const Ce=await K0(ee);b(ce,Ce?.data??null)}catch(Ce){const Ge=Ce instanceof Error?Ce.message:"Failed to load details.";b(j,Ge)}finally{b(L,!1)}}}function Ve(){b(G,!1),b(ge,null),b(ce,null),b(j,null)}async function He(ee){const Ce=ee.trim();if(Ce){b(W,Ce);try{await d({text:Ce,attachments:[]}),b(W,"")}catch(Ge){console.error("Failed to send speech transcription",Ge)}}}async function qe(){if(!Te)return;await Te.prompt();const{outcome:ee}=await Te.userChoice;ee==="accepted"&&b($e,!1),Te=null}function at(){b($e,!1)}ve(()=>(u(N),u(G),u(I),u(Y),u(Z),u(X),u(fe)),()=>{typeof document<"u"&&document.body.classList.toggle("modal-open",u(N)||u(G)||u(I)||u(Y)||u(Z)||u(X)||u(fe))}),ve(()=>(n(),r()),()=>{b(K,n()(r().selectedModel))}),ve(()=>(s(),r()),()=>{b(z,s()(r().selectedModel))}),ve(()=>(a(),u(ne)),()=>{a().promptVersion!==u(ne)&&(b(ne,a().promptVersion),b(W,a().promptText))}),ve(()=>(a(),r(),vl),()=>{if(a().pendingSubmit&&!r().isStreaming){const ee=vl();ee&&He(ee.text)}}),ve(()=>(r(),u(ue),a(),hl),()=>{const ee=r().isStreaming;u(ue)&&!ee&&a().conversationActive&&hl(),b(ue,ee)}),ve(()=>(u(_e),ml),()=>{u(_e)&&ml()}),Zt(),bt();var Ye=u6(),xt=g(Ye);{let ee=Ct(()=>(r(),m(()=>r().messages.length>0)));s1(xt,{get selectableModels(){return u(K)},get selectedModel(){return r(),m(()=>r().selectedModel)},get modelsLoading(){return o()},get modelsError(){return i()},get hasMessages(){return u(ee)},get pwaMode(){return u(Re)},$$events:{openExplorer:()=>b(N,!0),clear:()=>{b(U,[]),b(W,""),h()},modelChange:Ce=>he(Ce.detail.id),openModelSettings:()=>b(I,!0),openSystemSettings:()=>b(Y,!0),openMcpServers:()=>b(Z,!0),openKioskSettings:()=>b(X,!0),openCliSettings:()=>b(fe,!0)}})}var Tt=x(xt,2),Mt=g(Tt);{var vn=ee=>{zr(N_(ee,{get suggestions(){return l(),m(()=>l().items)},get deleting(){return l(),m(()=>l().deleting)},get pwaMode(){return u(Re)},$$events:{add:Fe,delete:Qe,select:Ce=>re(Ce.detail.text)},$$legacy:!0}),Ce=>b(D,Ce),()=>u(D))};O(Mt,ee=>{r(),m(()=>!r().messages.length)&&ee(vn)})}var Xt=x(Mt,2);z2(Xt,{get messages(){return r(),m(()=>r().messages)},get disableDelete(){return r(),m(()=>r().isStreaming)},$$events:{openGenerationDetails:ee=>Se(ee.detail.id),deleteMessage:Ee,retryMessage:ee=>ze(ee.detail.id),editMessage:ee=>le(ee.detail.id),editAssistantAttachment:ee=>q(ee.detail)}});var Qt=x(Tt,2);{var mt=ee=>{var Ce=s6(),Ge=g(Ce),Ze=g(Ge),Ke=x(Ge,2);H(()=>V(Ze,(r(),m(()=>r().error)))),B("click",Ke,y),S(ee,Ce)};O(Qt,ee=>{r(),m(()=>r().error)&&ee(mt)})}var tt=x(Qt,2);{var Le=ee=>{gh(ee,{get originalValue(){return u(be)},get saving(){return u(te)},get disabled(){return u(te)},get value(){return u(oe)},set value(Ce){b(oe,Ce)},$$events:{cancel:Pe,submit:Ce=>Ue(Ce.detail.text)},$$legacy:!0})},it=ee=>{sh(ee,{get presetAttachments(){return u(U)},get isStreaming(){return r(),m(()=>r().isStreaming)},get prompt(){return u(W)},set prompt(Ce){b(W,Ce)},$$events:{submit:Ce=>d(Ce.detail),cancel:v,startDictation:ke},$$legacy:!0})};O(tt,ee=>{u(_e)?ee(Le):ee(it,!1)})}var Je=x(tt,2);hh(Je,{get open(){return u(G)},get generationId(){return u(ge)},get loading(){return u(L)},get error(){return u(j)},get data(){return u(ce)},get fields(){return J},$$events:{close:Ve}});var $t=x(Je,2);D_($t,{get open(){return u(I)},get selectedModel(){return r(),m(()=>r().selectedModel)},get model(){return u(z)},$$events:{close:()=>b(I,!1)}});var en=x($t,2);mb(en,{get open(){return u(Y)},$$events:{close:()=>b(Y,!1)}});var We=x(en,2);cy(We,{get open(){return u(Z)},$$events:{close:()=>b(Z,!1)}});var ut=x(We,2);m3(ut,{get open(){return u(X)},$$events:{close:()=>b(X,!1)}});var kt=x(ut,2);Nb(kt,{get open(){return u(fe)},$$events:{close:()=>b(fe,!1)}});var De=x(kt,2);r6(De,{get open(){return u(N)},set open(ee){b(N,ee)},$$events:{select:Ne},$$legacy:!0});var Ie=x(De,2);{var Ae=ee=>{var Ce=a6(),Ge=g(Ce),Ze=x(g(Ge),2),Ke=g(Ze),et=x(Ke,2);B("click",Ke,qe),B("click",et,at),S(ee,Ce)};O(Ie,ee=>{u($e)&&ee(Ae)})}S(e,Ye),gt(),f()}A0(o6,{target:document.getElementById("app")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(e=>{console.error("Service worker registration failed",e)})});export{Kn as A,Qc as B,$ as C,b as D,x as E,de as F,Pn as G,yn as H,St as I,se as a,O as b,Ht as c,c6 as d,B as e,M as f,S as g,gt as h,bt as i,g as j,l6 as k,xe as l,pe as m,R as n,Dt as o,vt as p,u as q,Fa as r,V as s,H as t,m as u,Os as v,ve as w,ht as x,Zt as y,zr as z};
