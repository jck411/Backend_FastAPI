const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModelPicker-DfnHEWTR.js","assets/ModelPicker-Cn_xB6on.css","assets/WebSearchMenu-DVOS3pPe.js","assets/WebSearchMenu-BRUUScyU.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();const ic=!1;var Na=Array.isArray,uf=Array.prototype.indexOf,ii=Array.from,bu=Object.defineProperty,Cr=Object.getOwnPropertyDescriptor,lc=Object.getOwnPropertyDescriptors,of=Object.prototype,lf=Array.prototype,li=Object.getPrototypeOf,qi=Object.isExtensible;function na(e){return typeof e=="function"}const qr=()=>{};function cf(e){return e()}function Ea(e){for(var t=0;t<e.length;t++)e[t]()}function df(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}function ff(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const zn=2,ci=4,Pu=8,Hs=16,Mr=32,cs=64,di=128,Hn=256,yu=512,gn=1024,Vn=2048,Fr=4096,tr=8192,ds=16384,fi=32768,Ws=65536,Hi=1<<17,pf=1<<18,Vs=1<<19,cc=1<<20,Uo=1<<21,pi=1<<22,es=1<<23,hr=Symbol("$state"),dc=Symbol("legacy props"),hf=Symbol(""),hi=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Iu(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function mf(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _f(e){throw new Error("https://svelte.dev/e/effect_orphan")}function bf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yf(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function xf(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function kf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Sf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ef(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Nu=1,Lu=2,fc=4,Cf=8,Af=16,Tf=1,Df=2,pc=4,Mf=8,Ff=16,Pf=1,If=2,pn=Symbol(),Nf="http://www.w3.org/1999/xhtml",Lf="http://www.w3.org/2000/svg",Of="@attach";function $f(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Rf(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let zf=!1;function hc(e){return e===this.v}function vi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function vc(e){return!vi(e,this.v)}let Gs=!1,Bf=!1;function Uf(){Gs=!0}let It=null;function Rs(e){It=e}function wt(e,t=!1,n){It={p:It,c:null,e:null,s:e,x:null,l:Gs&&!t?{s:null,u:null,$:[]}:null}}function St(e){var t=It,n=t.e;if(n!==null){t.e=null;for(var r of n)Fc(r)}return e!==void 0&&(t.x=e),It=t.p,e??{}}function La(){return!Gs||It!==null&&It.l===null}let Br=[],xu=[];function mc(){var e=Br;Br=[],Ea(e)}function jf(){var e=xu;xu=[],Ea(e)}function qf(){return Br.length>0||xu.length>0}function fs(e){if(Br.length===0&&!_a){var t=Br;queueMicrotask(()=>{t===Br&&mc()})}Br.push(e)}function Hf(){Br.length>0&&mc(),xu.length>0&&jf()}const Wf=new WeakMap;function gc(e){var t=ut;if(t===null)return vt.f|=es,e;if((t.f&fi)===0){if((t.f&di)===0)throw!t.parent&&e instanceof Error&&_c(e),e;t.b.error(e)}else zs(e,t)}function zs(e,t){for(;t!==null;){if((t.f&di)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&_c(e),e}function _c(e){const t=Wf.get(e);t&&(bu(e,"message",{value:t.message}),bu(e,"stack",{value:t.stack}))}const so=new Set;let Ut=null,du=null,jo=new Set,us=[],Ou=null,qo=!1,_a=!1;class Ar{current=new Map;#a=new Map;#t=new Set;#f=0;#u=null;#c=!1;#s=[];#n=[];#e=[];#r=[];#o=[];#d=[];#l=[];skipped_effects=new Set;process(t){us=[],du=null;for(const s of t)this.#p(s);if(this.#s.length===0&&this.#f===0){this.#h();var n=this.#e,r=this.#r;this.#e=[],this.#r=[],this.#o=[],du=Ut,Ut=null,Wi(n),Wi(r),Ut===null?Ut=this:so.delete(this),this.#u?.resolve()}else this.#i(this.#e),this.#i(this.#r),this.#i(this.#o);for(const s of this.#s)ns(s);for(const s of this.#n)ns(s);this.#s=[],this.#n=[]}#p(t){t.f^=gn;for(var n=t.first;n!==null;){var r=n.f,s=(r&(Mr|cs))!==0,u=s&&(r&gn)!==0,o=u||(r&tr)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(s)n.f^=gn;else if((r&ci)!==0)this.#r.push(n);else if((r&gn)===0)if((r&pi)!==0){var i=n.b?.is_pending()?this.#n:this.#s;i.push(n)}else Ra(n)&&((n.f&Hs)!==0&&this.#o.push(n),ns(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#i(t){for(const n of t)((n.f&Vn)!==0?this.#d:this.#l).push(n),Dn(n,gn);t.length=0}capture(t,n){this.#a.has(t)||this.#a.set(t,n),this.current.set(t,t.v)}activate(){Ut=this}deactivate(){Ut=null,du=null;for(const t of jo)if(jo.delete(t),t(),Ut!==null)break}neuter(){this.#c=!0}flush(){us.length>0?bc():this.#h(),Ut===this&&(this.#f===0&&so.delete(this),this.deactivate())}#h(){if(!this.#c)for(const t of this.#t)t();this.#t.clear()}increment(){this.#f+=1}decrement(){if(this.#f-=1,this.#f===0){for(const t of this.#d)Dn(t,Vn),Bs(t);for(const t of this.#l)Dn(t,Fr),Bs(t);this.#e=[],this.#r=[],this.flush()}else this.deactivate()}add_callback(t){this.#t.add(t)}settled(){return(this.#u??=df()).promise}static ensure(){if(Ut===null){const t=Ut=new Ar;so.add(Ut),_a||Ar.enqueue(()=>{Ut===t&&t.flush()})}return Ut}static enqueue(t){fs(t)}}function Vf(e){var t=_a;_a=!0;try{for(var n;;){if(Hf(),us.length===0&&!qf()&&(Ut?.flush(),us.length===0))return Ou=null,n;bc()}}finally{_a=t}}function bc(){var e=Os;qo=!0;try{var t=0;for(Ki(!0);us.length>0;){var n=Ar.ensure();if(t++>1e3){var r,s;Gf()}n.process(us),Hr.clear()}}finally{qo=!1,Ki(e),Ou=null}}function Gf(){try{bf()}catch(e){zs(e,Ou)}}let Xr=null;function Wi(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(ds|tr))===0&&Ra(r)&&(Xr=[],ns(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Lc(r):r.fn=null),Xr?.length>0)){Hr.clear();for(const s of Xr)ns(s);Xr=[]}}Xr=null}}function Bs(e){for(var t=Ou=e;t.parent!==null;){t=t.parent;var n=t.f;if(qo&&t===ut&&(n&Hs)!==0)return;if((n&(cs|Mr))!==0){if((n&gn)===0)return;t.f^=gn}}us.push(t)}function Zf(e){let t=0,n=Vr(0),r;return()=>{l0()&&(a(n),Zs(()=>(t===0&&(r=p(()=>e(()=>ba(n)))),t+=1,()=>{fs(()=>{t-=1,t===0&&(r?.(),r=void 0,ba(n))})})))}}var Kf=Ws|Vs|di;function Yf(e,t,n){new Jf(e,t,n)}class Jf{parent;#a=!1;#t;#f=null;#u;#c;#s;#n=null;#e=null;#r=null;#o=null;#d=0;#l=0;#p=!1;#i=null;#h=()=>{this.#i&&os(this.#i,this.#d)};#_=Zf(()=>(this.#i=Vr(this.#d),()=>{this.#i=null}));constructor(t,n,r){this.#t=t,this.#u=n,this.#c=r,this.parent=ut.b,this.#a=!!this.#u.pending,this.#s=ps(()=>{ut.b=this;{try{this.#n=An(()=>r(this.#t))}catch(s){this.error(s)}this.#l>0?this.#m():this.#a=!1}},Kf)}#b(){try{this.#n=An(()=>this.#c(this.#t))}catch(t){this.error(t)}this.#a=!1}#y(){const t=this.#u.pending;t&&(this.#e=An(()=>t(this.#t)),Ar.enqueue(()=>{this.#n=this.#v(()=>(Ar.ensure(),An(()=>this.#c(this.#t)))),this.#l>0?this.#m():(Wr(this.#e,()=>{this.#e=null}),this.#a=!1)}))}is_pending(){return this.#a||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#u.pending}#v(t){var n=ut,r=vt,s=It;Gn(this.#s),Nn(this.#s),Rs(this.#s.ctx);try{return t()}catch(u){return gc(u),null}finally{Gn(n),Nn(r),Rs(s)}}#m(){const t=this.#u.pending;this.#n!==null&&(this.#o=document.createDocumentFragment(),Xf(this.#n,this.#o)),this.#e===null&&(this.#e=An(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#l+=t,this.#l===0&&(this.#a=!1,this.#e&&Wr(this.#e,()=>{this.#e=null}),this.#o&&(this.#t.before(this.#o),this.#o=null))}update_pending_count(t){this.#g(t),this.#d+=t,jo.add(this.#h)}get_effect_pending(){return this.#_(),a(this.#i)}error(t){var n=this.#u.onerror;let r=this.#u.failed;if(this.#p||!n&&!r)throw t;this.#n&&(Sn(this.#n),this.#n=null),this.#e&&(Sn(this.#e),this.#e=null),this.#r&&(Sn(this.#r),this.#r=null);var s=!1,u=!1;const o=()=>{if(s){Rf();return}s=!0,u&&Ef(),Ar.ensure(),this.#d=0,this.#r!==null&&Wr(this.#r,()=>{this.#r=null}),this.#a=this.has_pending_snippet(),this.#n=this.#v(()=>(this.#p=!1,An(()=>this.#c(this.#t)))),this.#l>0?this.#m():this.#a=!1};var i=vt;try{Nn(null),u=!0,n?.(t,o),u=!1}catch(l){zs(l,this.#s&&this.#s.parent)}finally{Nn(i)}r&&fs(()=>{this.#r=this.#v(()=>{this.#p=!0;try{return An(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return zs(l,this.#s.parent),null}finally{this.#p=!1}})})}}function Xf(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:$a(n);t.append(n),n=s}}function yc(e,t,n){const r=La()?Oa:Ft;if(t.length===0){n(e.map(r));return}var s=Ut,u=ut,o=Qf();Promise.all(t.map(i=>e0(i))).then(i=>{s?.activate(),o();try{n([...e.map(r),...i])}catch(l){(u.f&ds)===0&&zs(l,u)}s?.deactivate(),xc()}).catch(i=>{zs(i,u)})}function Qf(){var e=ut,t=vt,n=It,r=Ut;return function(){Gn(e),Nn(t),Rs(n),r?.activate()}}function xc(){Gn(null),Nn(null),Rs(null)}function Oa(e){var t=zn|Vn,n=vt!==null&&(vt.f&zn)!==0?vt:null;return ut===null||n!==null&&(n.f&Hn)!==0?t|=Hn:ut.f|=Vs,{ctx:It,deps:null,effects:null,equals:hc,f:t,fn:e,reactions:null,rv:0,v:pn,wv:0,parent:n??ut,ac:null}}function e0(e,t){let n=ut;n===null&&vf();var r=n.b,s=void 0,u=Vr(pn),o=null,i=!vt;return f0(()=>{try{var l=e();o&&Promise.resolve(l).catch(()=>{})}catch(h){l=Promise.reject(h)}var c=()=>l;s=o?.then(c,c)??Promise.resolve(l),o=s;var f=Ut,d=r.is_pending();i&&(r.update_pending_count(1),d||f.increment());const g=(h,v=void 0)=>{o=null,d||f.activate(),v?v!==hi&&(u.f|=es,os(u,v)):((u.f&es)!==0&&(u.f^=es),os(u,h)),i&&(r.update_pending_count(-1),d||f.decrement()),xc()};if(s.then(g,h=>g(null,h||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(l=>{function c(f){function d(){f===s?l(u):c(s)}f.then(d,d)}c(s)})}function t0(e){const t=Oa(e);return Rc(t),t}function Ft(e){const t=Oa(e);return t.equals=vc,t}function kc(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Sn(t[n])}}function n0(e){for(var t=e.parent;t!==null;){if((t.f&zn)===0)return t;t=t.parent}return null}function mi(e){var t,n=ut;Gn(n0(e));try{kc(e),t=jc(e)}finally{Gn(n)}return t}function wc(e){var t=mi(e);if(e.equals(t)||(e.v=t,e.wv=Bc()),!hs){var n=(Ur||(e.f&Hn)!==0)&&e.deps!==null?Fr:gn;Dn(e,n)}}const Hr=new Map;function Vr(e,t){var n={f:0,v:e,reactions:null,equals:hc,rv:0,wv:0};return n}function Or(e,t){const n=Vr(e);return Rc(n),n}function $(e,t=!1,n=!0){const r=Vr(e);return t||(r.equals=vc),Gs&&n&&It!==null&&It.l!==null&&(It.l.s??=[]).push(r),r}function Sc(e,t){return _(e,p(()=>a(e))),t}function _(e,t,n=!1){vt!==null&&(!er||(vt.f&Hi)!==0)&&La()&&(vt.f&(zn|Hs|pi|Hi))!==0&&!Tr?.includes(e)&&Sf();let r=n?Ps(t):t;return os(e,r)}function os(e,t){if(!e.equals(t)){var n=e.v;hs?Hr.set(e,t):Hr.set(e,n),e.v=t;var r=Ar.ensure();r.capture(e,n),(e.f&zn)!==0&&((e.f&Vn)!==0&&mi(e),Dn(e,(e.f&Hn)===0?gn:Fr)),e.wv=Bc(),Ec(e,Vn),La()&&ut!==null&&(ut.f&gn)!==0&&(ut.f&(Mr|cs))===0&&(jn===null?v0([e]):jn.push(e))}return t}function Vi(e,t=1){var n=a(e),r=t===1?n++:n--;return _(e,n),r}function ba(e){_(e,e.v+1)}function Ec(e,t){var n=e.reactions;if(n!==null)for(var r=La(),s=n.length,u=0;u<s;u++){var o=n[u],i=o.f;if(!(!r&&o===ut)){var l=(i&Vn)===0;l&&Dn(o,t),(i&zn)!==0?Ec(o,Fr):l&&((i&Hs)!==0&&Xr!==null&&Xr.push(o),Bs(o))}}}function Ps(e){if(typeof e!="object"||e===null||hr in e)return e;const t=li(e);if(t!==of&&t!==lf)return e;var n=new Map,r=Na(e),s=Or(0),u=ts,o=i=>{if(ts===u)return i();var l=vt,c=ts;Nn(null),Ji(u);var f=i();return Nn(l),Ji(c),f};return r&&n.set("length",Or(e.length)),new Proxy(e,{defineProperty(i,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&kf();var f=n.get(l);return f===void 0?f=o(()=>{var d=Or(c.value);return n.set(l,d),d}):_(f,c.value,!0),!0},deleteProperty(i,l){var c=n.get(l);if(c===void 0){if(l in i){const f=o(()=>Or(pn));n.set(l,f),ba(s)}}else _(c,pn),ba(s);return!0},get(i,l,c){if(l===hr)return e;var f=n.get(l),d=l in i;if(f===void 0&&(!d||Cr(i,l)?.writable)&&(f=o(()=>{var h=Ps(d?i[l]:pn),v=Or(h);return v}),n.set(l,f)),f!==void 0){var g=a(f);return g===pn?void 0:g}return Reflect.get(i,l,c)},getOwnPropertyDescriptor(i,l){var c=Reflect.getOwnPropertyDescriptor(i,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=a(f))}else if(c===void 0){var d=n.get(l),g=d?.v;if(d!==void 0&&g!==pn)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return c},has(i,l){if(l===hr)return!0;var c=n.get(l),f=c!==void 0&&c.v!==pn||Reflect.has(i,l);if(c!==void 0||ut!==null&&(!f||Cr(i,l)?.writable)){c===void 0&&(c=o(()=>{var g=f?Ps(i[l]):pn,h=Or(g);return h}),n.set(l,c));var d=a(c);if(d===pn)return!1}return f},set(i,l,c,f){var d=n.get(l),g=l in i;if(r&&l==="length")for(var h=c;h<d.v;h+=1){var v=n.get(h+"");v!==void 0?_(v,pn):h in i&&(v=o(()=>Or(pn)),n.set(h+"",v))}if(d===void 0)(!g||Cr(i,l)?.writable)&&(d=o(()=>Or(void 0)),_(d,Ps(c)),n.set(l,d));else{g=d.v!==pn;var T=o(()=>Ps(c));_(d,T)}var A=Reflect.getOwnPropertyDescriptor(i,l);if(A?.set&&A.set.call(f,c),!g){if(r&&typeof l=="string"){var b=n.get("length"),C=Number(l);Number.isInteger(C)&&C>=b.v&&_(b,C+1)}ba(s)}return!0},ownKeys(i){a(s);var l=Reflect.ownKeys(i).filter(d=>{var g=n.get(d);return g===void 0||g.v!==pn});for(var[c,f]of n)f.v!==pn&&!(c in i)&&l.push(c);return l},setPrototypeOf(){wf()}})}function Gi(e){try{if(e!==null&&typeof e=="object"&&hr in e)return e[hr]}catch{}return e}function r0(e,t){return Object.is(Gi(e),Gi(t))}var Ca,Cc,Ac,Tc;function s0(){if(Ca===void 0){Ca=window,Cc=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ac=Cr(t,"firstChild").get,Tc=Cr(t,"nextSibling").get,qi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),qi(n)&&(n.__t=void 0)}}function Zr(e=""){return document.createTextNode(e)}function lr(e){return Ac.call(e)}function $a(e){return Tc.call(e)}function m(e,t){return lr(e)}function ce(e,t=!1){{var n=lr(e);return n instanceof Comment&&n.data===""?$a(n):n}}function x(e,t=1,n=!1){let r=e;for(;t--;)r=$a(r);return r}function a0(e){e.textContent=""}function gi(){return!1}function u0(e,t){if(t){const n=document.body;e.autofocus=!0,fs(()=>{document.activeElement===n&&e.focus()})}}let Zi=!1;function o0(){Zi||(Zi=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function $u(e){var t=vt,n=ut;Nn(null),Gn(null);try{return e()}finally{Nn(t),Gn(n)}}function Dc(e,t,n,r=n){e.addEventListener(t,()=>$u(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),o0()}function Mc(e){ut===null&&vt===null&&_f(),vt!==null&&(vt.f&Hn)!==0&&ut===null&&gf(),hs&&mf()}function i0(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function mr(e,t,n,r=!0){var s=ut;s!==null&&(s.f&tr)!==0&&(e|=tr);var u={ctx:It,deps:null,nodes_start:null,nodes_end:null,f:e|Vn,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ns(u),u.f|=fi}catch(l){throw Sn(u),l}else t!==null&&Bs(u);if(r){var o=u;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&Vs)===0&&(o=o.first),o!==null&&(o.parent=s,s!==null&&i0(o,s),vt!==null&&(vt.f&zn)!==0&&(e&cs)===0)){var i=vt;(i.effects??=[]).push(o)}}return u}function l0(){return vt!==null&&!er}function Ru(e){const t=mr(Pu,null,!1);return Dn(t,gn),t.teardown=e,t}function Ho(e){Mc();var t=ut.f,n=!vt&&(t&Mr)!==0&&(t&fi)===0;if(n){var r=It;(r.e??=[]).push(e)}else return Fc(e)}function Fc(e){return mr(ci|cc,e,!1)}function c0(e){return Mc(),mr(Pu|cc,e,!0)}function d0(e){Ar.ensure();const t=mr(cs|Vs,e,!0);return(n={})=>new Promise(r=>{n.outro?Wr(t,()=>{Sn(t),r(void 0)}):(Sn(t),r(void 0))})}function Wn(e){return mr(ci,e,!1)}function ye(e,t){var n=It,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=Zs(()=>{e(),!r.ran&&(r.ran=!0,p(t))})}function Yt(){var e=It;Zs(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&gn)!==0&&Dn(n,Fr),Ra(n)&&ns(n),t.ran=!1}})}function f0(e){return mr(pi|Vs,e,!0)}function Zs(e,t=0){return mr(Pu|t,e,!0)}function j(e,t=[],n=[]){yc(t,n,r=>{mr(Pu,()=>e(...r.map(a)),!0)})}function ps(e,t=0){var n=mr(Hs|t,e,!0);return n}function An(e,t=!0){return mr(Mr|Vs,e,!0,t)}function Pc(e){var t=e.teardown;if(t!==null){const n=hs,r=vt;Yi(!0),Nn(null);try{t.call(null)}finally{Yi(n),Nn(r)}}}function Ic(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&$u(()=>{s.abort(hi)});var r=n.next;(n.f&cs)!==0?n.parent=null:Sn(n,t),n=r}}function p0(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Mr)===0&&Sn(t),t=n}}function Sn(e,t=!0){var n=!1;(t||(e.f&pf)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Nc(e.nodes_start,e.nodes_end),n=!0),Ic(e,t&&!n),ku(e,0),Dn(e,ds);var r=e.transitions;if(r!==null)for(const u of r)u.stop();Pc(e);var s=e.parent;s!==null&&s.first!==null&&Lc(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Nc(e,t){for(;e!==null;){var n=e===t?null:$a(e);e.remove(),e=n}}function Lc(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Wr(e,t){var n=[];_i(e,n,!0),Oc(n,()=>{Sn(e),t&&t()})}function Oc(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function _i(e,t,n){if((e.f&tr)===0){if(e.f^=tr,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var s=r.next,u=(r.f&Ws)!==0||(r.f&Mr)!==0;_i(r,t,u?n:!1),r=s}}}function zu(e){$c(e,!0)}function $c(e,t){if((e.f&tr)!==0){e.f^=tr,(e.f&gn)===0&&(Dn(e,Vn),Bs(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Ws)!==0||(n.f&Mr)!==0;$c(n,s?t:!1),n=r}if(e.transitions!==null)for(const u of e.transitions)(u.is_global||t)&&u.in()}}let Ds=null;function h0(e){var t=Ds;try{if(Ds=new Set,p(e),t!==null)for(var n of Ds)t.add(n);return Ds}finally{Ds=t}}function A6(e){for(var t of h0(e))os(t,t.v)}let Os=!1;function Ki(e){Os=e}let hs=!1;function Yi(e){hs=e}let vt=null,er=!1;function Nn(e){vt=e}let ut=null;function Gn(e){ut=e}let Tr=null;function Rc(e){vt!==null&&(Tr===null?Tr=[e]:Tr.push(e))}let Cn=null,$n=0,jn=null;function v0(e){jn=e}let zc=1,Aa=0,ts=Aa;function Ji(e){ts=e}let Ur=!1;function Bc(){return++zc}function Ra(e){var t=e.f;if((t&Vn)!==0)return!0;if((t&Fr)!==0){var n=e.deps,r=(t&Hn)!==0;if(n!==null){var s,u,o=(t&yu)!==0,i=r&&ut!==null&&!Ur,l=n.length;if((o||i)&&(ut===null||(ut.f&ds)===0)){var c=e,f=c.parent;for(s=0;s<l;s++)u=n[s],(o||!u?.reactions?.includes(c))&&(u.reactions??=[]).push(c);o&&(c.f^=yu),i&&f!==null&&(f.f&Hn)===0&&(c.f^=Hn)}for(s=0;s<l;s++)if(u=n[s],Ra(u)&&wc(u),u.wv>e.wv)return!0}(!r||ut!==null&&!Ur)&&Dn(e,gn)}return!1}function Uc(e,t,n=!0){var r=e.reactions;if(r!==null&&!Tr?.includes(e))for(var s=0;s<r.length;s++){var u=r[s];(u.f&zn)!==0?Uc(u,t,!1):t===u&&(n?Dn(u,Vn):(u.f&gn)!==0&&Dn(u,Fr),Bs(u))}}function jc(e){var t=Cn,n=$n,r=jn,s=vt,u=Ur,o=Tr,i=It,l=er,c=ts,f=e.f;Cn=null,$n=0,jn=null,Ur=(f&Hn)!==0&&(er||!Os||vt===null),vt=(f&(Mr|cs))===0?e:null,Tr=null,Rs(e.ctx),er=!1,ts=++Aa,e.ac!==null&&($u(()=>{e.ac.abort(hi)}),e.ac=null);try{e.f|=Uo;var d=e.fn,g=d(),h=e.deps;if(Cn!==null){var v;if(ku(e,$n),h!==null&&$n>0)for(h.length=$n+Cn.length,v=0;v<Cn.length;v++)h[$n+v]=Cn[v];else e.deps=h=Cn;if(!Ur||(f&zn)!==0&&e.reactions!==null)for(v=$n;v<h.length;v++)(h[v].reactions??=[]).push(e)}else h!==null&&$n<h.length&&(ku(e,$n),h.length=$n);if(La()&&jn!==null&&!er&&h!==null&&(e.f&(zn|Fr|Vn))===0)for(v=0;v<jn.length;v++)Uc(jn[v],e);return s!==null&&s!==e&&(Aa++,jn!==null&&(r===null?r=jn:r.push(...jn))),(e.f&es)!==0&&(e.f^=es),g}catch(T){return gc(T)}finally{e.f^=Uo,Cn=t,$n=n,jn=r,vt=s,Ur=u,Tr=o,Rs(i),er=l,ts=c}}function m0(e,t){let n=t.reactions;if(n!==null){var r=uf.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&zn)!==0&&(Cn===null||!Cn.includes(t))&&(Dn(t,Fr),(t.f&(Hn|yu))===0&&(t.f^=yu),kc(t),ku(t,0))}function ku(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)m0(e,n[r])}function ns(e){var t=e.f;if((t&ds)===0){Dn(e,gn);var n=ut,r=Os;ut=e,Os=!0;try{(t&Hs)!==0?p0(e):Ic(e),Pc(e);var s=jc(e);e.teardown=typeof s=="function"?s:null,e.wv=zc;var u;ic&&Bf&&(e.f&Vn)!==0&&e.deps}finally{Os=r,ut=n}}}async function g0(){await Promise.resolve(),Vf()}function a(e){var t=e.f,n=(t&zn)!==0;if(Ds?.add(e),vt!==null&&!er){var r=ut!==null&&(ut.f&ds)!==0;if(!r&&!Tr?.includes(e)){var s=vt.deps;if((vt.f&Uo)!==0)e.rv<Aa&&(e.rv=Aa,Cn===null&&s!==null&&s[$n]===e?$n++:Cn===null?Cn=[e]:(!Ur||!Cn.includes(e))&&Cn.push(e));else{(vt.deps??=[]).push(e);var u=e.reactions;u===null?e.reactions=[vt]:u.includes(vt)||u.push(vt)}}}else if(n&&e.deps===null&&e.effects===null){var o=e,i=o.parent;i!==null&&(i.f&Hn)===0&&(o.f^=Hn)}if(hs){if(Hr.has(e))return Hr.get(e);if(n){o=e;var l=o.v;return((o.f&gn)===0&&o.reactions!==null||qc(o))&&(l=mi(o)),Hr.set(o,l),l}}else n&&(o=e,Ra(o)&&wc(o));if((e.f&es)!==0)throw e.v;return e.v}function qc(e){if(e.v===pn)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Hr.has(t)||(t.f&zn)!==0&&qc(t))return!0;return!1}function p(e){var t=er;try{return er=!0,e()}finally{er=t}}const _0=-7169;function Dn(e,t){e.f=e.f&_0|t}function R(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(hr in e)Wo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&hr in n&&Wo(n)}}}function Wo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Wo(e[r],t)}catch{}const n=li(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=lc(n);for(let s in r){const u=r[s].get;if(u)try{u.call(e)}catch{}}}}}function b0(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const y0=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function x0(e){return y0.includes(e)}const k0={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function w0(e){return e=e.toLowerCase(),k0[e]??e}const S0=["touchstart","touchmove"];function E0(e){return S0.includes(e)}const Hc=new Set,Vo=new Set;function Wc(e,t,n,r={}){function s(u){if(r.capture||va.call(t,u),!u.cancelBubble)return $u(()=>n?.call(this,u))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?fs(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function z(e,t,n,r,s){var u={capture:r,passive:s},o=Wc(e,t,n,u);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ru(()=>{t.removeEventListener(e,o,u)})}function C0(e){for(var t=0;t<e.length;t++)Hc.add(e[t]);for(var n of Vo)n(e)}let Xi=null;function va(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],u=s[0]||e.target;Xi=e;var o=0,i=Xi===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;l<=c&&(o=l)}if(u=s[o]||e.target,u!==t){bu(e,"currentTarget",{configurable:!0,get(){return u||n}});var f=vt,d=ut;Nn(null),Gn(null);try{for(var g,h=[];u!==null;){var v=u.assignedSlot||u.parentNode||u.host||null;try{var T=u["__"+r];if(T!=null&&(!u.disabled||e.target===u))if(Na(T)){var[A,...b]=T;A.apply(u,[e,...b])}else T.call(u,e)}catch(C){g?h.push(C):g=C}if(e.cancelBubble||v===t||v===null)break;u=v}if(g){for(let C of h)queueMicrotask(()=>{throw C});throw g}}finally{e.__root=t,delete e.currentTarget,Nn(f),Gn(d)}}}function bi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function is(e,t){var n=ut;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function M(e,t){var n=(t&Pf)!==0,r=(t&If)!==0,s,u=!e.startsWith("<!>");return()=>{s===void 0&&(s=bi(u?e:"<!>"+e),n||(s=lr(s)));var o=r||Cc?document.importNode(s,!0):s.cloneNode(!0);if(n){var i=lr(o),l=o.lastChild;is(i,l)}else is(o,o);return o}}function A0(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,u;return()=>{if(!u){var o=bi(s),i=lr(o);u=lr(i)}var l=u.cloneNode(!0);return is(l,l),l}}function za(e,t){return A0(e,t,"svg")}function un(e=""){{var t=Zr(e+"");return is(t,t),t}}function Ee(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Zr();return e.append(t,n),is(t,n),e}function S(e,t){e!==null&&e.before(t)}function H(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function T0(e,t){return D0(e,t)}const _s=new Map;function D0(e,{target:t,anchor:n,props:r={},events:s,context:u,intro:o=!0}){s0();var i=new Set,l=d=>{for(var g=0;g<d.length;g++){var h=d[g];if(!i.has(h)){i.add(h);var v=E0(h);t.addEventListener(h,va,{passive:v});var T=_s.get(h);T===void 0?(document.addEventListener(h,va,{passive:v}),_s.set(h,1)):_s.set(h,T+1)}}};l(ii(Hc)),Vo.add(l);var c=void 0,f=d0(()=>{var d=n??t.appendChild(Zr());return Yf(d,{pending:()=>{}},g=>{if(u){wt({});var h=It;h.c=u}s&&(r.$$events=s),c=e(g,r)||{},u&&St()}),()=>{for(var g of i){t.removeEventListener(g,va);var h=_s.get(g);--h===0?(document.removeEventListener(g,va),_s.delete(g)):_s.set(g,h)}Vo.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return M0.set(c,f),c}let M0=new WeakMap;function L(e,t,n=!1){var r=e,s=null,u=null,o=pn,i=n?Ws:0,l=!1;const c=(h,v=!0)=>{l=!0,g(v,h)};var f=null;function d(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var h=o?s:u,v=o?u:s;h&&zu(h),v&&Wr(v,()=>{o?u=null:s=null})}const g=(h,v)=>{if(o!==(o=h)){var T=gi(),A=r;if(T&&(f=document.createDocumentFragment(),f.append(A=Zr())),o?s??=v&&An(()=>v(A)):u??=v&&An(()=>v(A)),T){var b=Ut,C=o?s:u,w=o?u:s;C&&b.skipped_effects.delete(C),w&&b.skipped_effects.add(w),b.add_callback(d)}else d()}};ps(()=>{l=!1,t(c),l||g(null,null)},i)}function Ln(e,t){return t}function F0(e,t,n){for(var r=e.items,s=[],u=t.length,o=0;o<u;o++)_i(t[o].e,s,!0);var i=u>0&&s.length===0&&n!==null;if(i){var l=n.parentNode;a0(l),l.append(n),r.clear(),or(e,t[0].prev,t[u-1].next)}Oc(s,()=>{for(var c=0;c<u;c++){var f=t[c];i||(r.delete(f.k),or(e,f.prev,f.next)),Sn(f.e,!i)}})}function Tt(e,t,n,r,s,u=null){var o=e,i={flags:t,items:new Map,first:null},l=(t&fc)!==0;if(l){var c=e;o=c.appendChild(Zr())}var f=null,d=!1,g=new Map,h=Ft(()=>{var b=n();return Na(b)?b:b==null?[]:ii(b)}),v,T;function A(){P0(T,v,i,g,o,s,t,r,n),u!==null&&(v.length===0?f?zu(f):f=An(()=>u(o)):f!==null&&Wr(f,()=>{f=null}))}ps(()=>{T??=ut,v=a(h);var b=v.length;if(!(d&&b===0)){d=b===0;var C,w,y,E;if(gi()){var k=new Set,D=Ut;for(w=0;w<b;w+=1){y=v[w],E=r(y,w);var W=i.items.get(E)??g.get(E);W?(t&(Nu|Lu))!==0&&Vc(W,y,w,t):(C=Gc(null,i,null,null,y,E,w,s,t,n,!0),g.set(E,C)),k.add(E)}for(const[U,F]of i.items)k.has(U)||D.skipped_effects.add(F.e);D.add_callback(A)}else A();a(h)}})}function P0(e,t,n,r,s,u,o,i,l){var c=(o&Cf)!==0,f=(o&(Nu|Lu))!==0,d=t.length,g=n.items,h=n.first,v=h,T,A=null,b,C=[],w=[],y,E,k,D;if(c)for(D=0;D<d;D+=1)y=t[D],E=i(y,D),k=g.get(E),k!==void 0&&(k.a?.measure(),(b??=new Set).add(k));for(D=0;D<d;D+=1){if(y=t[D],E=i(y,D),k=g.get(E),k===void 0){var W=r.get(E);if(W!==void 0){r.delete(E),g.set(E,W);var U=A?A.next:v;or(n,A,W),or(n,W,U),ao(W,U,s),A=W}else{var F=v?v.e.nodes_start:s;A=Gc(F,n,A,A===null?n.first:A.next,y,E,D,u,o,l)}g.set(E,A),C=[],w=[],v=A.next;continue}if(f&&Vc(k,y,D,o),(k.e.f&tr)!==0&&(zu(k.e),c&&(k.a?.unfix(),(b??=new Set).delete(k))),k!==v){if(T!==void 0&&T.has(k)){if(C.length<w.length){var I=w[0],Y;A=I.prev;var G=C[0],ie=C[C.length-1];for(Y=0;Y<C.length;Y+=1)ao(C[Y],I,s);for(Y=0;Y<w.length;Y+=1)T.delete(w[Y]);or(n,G.prev,ie.next),or(n,A,G),or(n,ie,I),v=I,A=ie,D-=1,C=[],w=[]}else T.delete(k),ao(k,v,s),or(n,k.prev,k.next),or(n,k,A===null?n.first:A.next),or(n,A,k),A=k;continue}for(C=[],w=[];v!==null&&v.k!==E;)(v.e.f&tr)===0&&(T??=new Set).add(v),w.push(v),v=v.next;if(v===null)continue;k=v}C.push(k),A=k,v=k.next}if(v!==null||T!==void 0){for(var O=T===void 0?[]:ii(T);v!==null;)(v.e.f&tr)===0&&O.push(v),v=v.next;var ee=O.length;if(ee>0){var le=(o&fc)!==0&&d===0?s:null;if(c){for(D=0;D<ee;D+=1)O[D].a?.measure();for(D=0;D<ee;D+=1)O[D].a?.fix()}F0(n,O,le)}}c&&fs(()=>{if(b!==void 0)for(k of b)k.a?.apply()}),e.first=n.first&&n.first.e,e.last=A&&A.e;for(var te of r.values())Sn(te.e);r.clear()}function Vc(e,t,n,r){(r&Nu)!==0&&os(e.v,t),(r&Lu)!==0?os(e.i,n):e.i=n}function Gc(e,t,n,r,s,u,o,i,l,c,f){var d=(l&Nu)!==0,g=(l&Af)===0,h=d?g?$(s,!1,!1):Vr(s):s,v=(l&Lu)===0?o:Vr(o),T={i:v,v:h,k:u,a:null,e:null,prev:n,next:r};try{if(e===null){var A=document.createDocumentFragment();A.append(e=Zr())}return T.e=An(()=>i(e,h,v,c),zf),T.e.prev=n&&n.e,T.e.next=r&&r.e,n===null?f||(t.first=T):(n.next=T,n.e.next=T.e),r!==null&&(r.prev=T,r.e.prev=T.e),T}finally{}}function ao(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,u=e.e.nodes_start;u!==null&&u!==r;){var o=$a(u);s.before(u),u=o}}function or(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Go(e,t,n=!1,r=!1,s=!1){var u=e,o="";j(()=>{var i=ut;if(o!==(o=t()??"")&&(i.nodes_start!==null&&(Nc(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),o!=="")){var l=o+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var c=bi(l);if((n||r)&&(c=lr(c)),is(lr(c),c.lastChild),n||r)for(;lr(c);)u.before(lr(c));else u.before(c)}})}function wn(e,t,n,r,s){var u=t.$$slots?.[n],o=!1;u===!0&&(u=t[n==="default"?"children":n],o=!0),u===void 0||u(e,o?()=>r:r)}function Qi(e,t,n){var r=e,s,u,o=null,i=null;function l(){u&&(Wr(u),u=null),o&&(o.lastChild.remove(),r.before(o),o=null),u=i,i=null}ps(()=>{if(s!==(s=t())){var c=gi();if(s){var f=r;c&&(o=document.createDocumentFragment(),o.append(f=Zr()),u&&Ut.skipped_effects.add(u)),i=An(()=>n(f,s))}c?Ut.add_callback(l):l()}},Ws)}function I0(e,t,n,r,s,u){var o,i,l=null,c=e,f;ps(()=>{const d=t()||null;var g=Lf;d!==o&&(f&&(d===null?Wr(f,()=>{f=null,i=null}):d===i?zu(f):Sn(f)),d&&d!==i&&(f=An(()=>{if(l=document.createElementNS(g,d),is(l,l),r){var h=l.appendChild(Zr());r(l,h)}ut.nodes_end=l,c.before(l)})),o=d,o&&(i=o))},Ws)}function ls(e,t,n){Wn(()=>{var r=p(()=>t(e,n?.())||{});if(n&&r?.update){var s=!1,u={};Zs(()=>{var o=n();R(o),s&&vi(u,o)&&(u=o,r.update(o))}),s=!0}if(r?.destroy)return()=>r.destroy()})}function N0(e,t){var n=void 0,r;ps(()=>{n!==(n=t())&&(r&&(Sn(r),r=null),n&&(r=An(()=>{Wn(()=>n(e))})))})}function Zc(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Zc(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function L0(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Zc(e))&&(r&&(r+=" "),r+=t);return r}function fu(e){return typeof e=="object"?L0(e):e??""}const el=[...` 	
\r\fÂ \v\uFEFF`];function O0(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var u=s.length,o=0;(o=r.indexOf(s,o))>=0;){var i=o+u;(o===0||el.includes(r[o-1]))&&(i===r.length||el.includes(r[i]))?r=(o===0?"":r.substring(0,o))+r.substring(i+1):o=i}}return r===""?null:r}function tl(e,t=!1){var n=t?" !important;":";",r="";for(var s in e){var u=e[s];u!=null&&u!==""&&(r+=" "+s+": "+u+n)}return r}function uo(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function $0(e,t){if(t){var n="",r,s;if(Array.isArray(t)?(r=t[0],s=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var u=!1,o=0,i=!1,l=[];r&&l.push(...Object.keys(r).map(uo)),s&&l.push(...Object.keys(s).map(uo));var c=0,f=-1;const T=e.length;for(var d=0;d<T;d++){var g=e[d];if(i?g==="/"&&e[d-1]==="*"&&(i=!1):u?u===g&&(u=!1):g==="/"&&e[d+1]==="*"?i=!0:g==='"'||g==="'"?u=g:g==="("?o++:g===")"&&o--,!i&&u===!1&&o===0){if(g===":"&&f===-1)f=d;else if(g===";"||d===T-1){if(f!==-1){var h=uo(e.substring(c,f).trim());if(!l.includes(h)){g!==";"&&d++;var v=e.substring(c,d).trim();n+=" "+v+";"}}c=d+1,f=-1}}}}return r&&(n+=tl(r)),s&&(n+=tl(s,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Pt(e,t,n,r,s,u){var o=e.__className;if(o!==n||o===void 0){var i=O0(n,r,u);i==null?e.removeAttribute("class"):t?e.className=i:e.setAttribute("class",i),e.__className=n}else if(u&&s!==u)for(var l in u){var c=!!u[l];(s==null||c!==!!s[l])&&e.classList.toggle(l,c)}return u}function oo(e,t={},n,r){for(var s in n){var u=n[s];t[s]!==u&&(n[s]==null?e.style.removeProperty(s):e.style.setProperty(s,u,r))}}function hn(e,t,n,r){var s=e.__style;if(s!==t){var u=$0(t,r);u==null?e.removeAttribute("style"):e.style.cssText=u,e.__style=t}else r&&(Array.isArray(r)?(oo(e,n?.[0],r[0]),oo(e,n?.[1],r[1],"important")):oo(e,n,r));return r}function Tn(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Na(t))return $f();for(var r of e.options)r.selected=t.includes(ya(r));return}for(r of e.options){var s=ya(r);if(r0(s,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Rn(e){var t=new MutationObserver(()=>{Tn(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ru(()=>{t.disconnect()})}function T6(e,t,n=t){var r=!0;Dc(e,"change",s=>{var u=s?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(u),ya);else{var i=e.querySelector(u)??e.querySelector("option:not([disabled])");o=i&&ya(i)}n(o)}),Wn(()=>{var s=t();if(Tn(e,s,r),r&&s===void 0){var u=e.querySelector(":checked");u!==null&&(s=ya(u),n(s))}e.__value=s,r=!1}),Rn(e)}function ya(e){return"__value"in e?e.__value:e.value}const ra=Symbol("class"),sa=Symbol("style"),Kc=Symbol("is custom element"),Yc=Symbol("is html");function Mt(e,t){var n=Bu(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function In(e,t){var n=Bu(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function R0(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function oe(e,t,n,r){var s=Bu(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[hf]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Jc(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function z0(e,t,n,r,s=!1,u=!1){var o=Bu(e),i=o[Kc],l=!o[Yc],c=t||{},f=e.tagName==="OPTION";for(var d in t)d in n||(n[d]=null);n.class?n.class=fu(n.class):n[ra]&&(n.class=null),n[sa]&&(n.style??=null);var g=Jc(e);for(const w in n){let y=n[w];if(f&&w==="value"&&y==null){e.value=e.__value="",c[w]=y;continue}if(w==="class"){var h=e.namespaceURI==="http://www.w3.org/1999/xhtml";Pt(e,h,y,r,t?.[ra],n[ra]),c[w]=y,c[ra]=n[ra];continue}if(w==="style"){hn(e,y,t?.[sa],n[sa]),c[w]=y,c[sa]=n[sa];continue}var v=c[w];if(!(y===v&&!(y===void 0&&e.hasAttribute(w)))){c[w]=y;var T=w[0]+w[1];if(T!=="$$")if(T==="on"){const E={},k="$$"+w;let D=w.slice(2);var A=x0(D);if(b0(D)&&(D=D.slice(0,-7),E.capture=!0),!A&&v){if(y!=null)continue;e.removeEventListener(D,c[k],E),c[k]=null}if(y!=null)if(A)e[`__${D}`]=y,C0([D]);else{let W=function(U){c[w].call(this,U)};c[k]=Wc(D,e,W,E)}else A&&(e[`__${D}`]=void 0)}else if(w==="style")oe(e,w,y);else if(w==="autofocus")u0(e,!!y);else if(!i&&(w==="__value"||w==="value"&&y!=null))e.value=e.__value=y;else if(w==="selected"&&f)R0(e,y);else{var b=w;l||(b=w0(b));var C=b==="defaultValue"||b==="defaultChecked";if(y==null&&!i&&!C)if(o[w]=null,b==="value"||b==="checked"){let E=e;const k=t===void 0;if(b==="value"){let D=E.defaultValue;E.removeAttribute(b),E.defaultValue=D,E.value=E.__value=k?D:null}else{let D=E.defaultChecked;E.removeAttribute(b),E.defaultChecked=D,E.checked=k?D:!1}}else e.removeAttribute(w);else C||g.includes(b)&&(i||typeof y!="string")?(e[b]=y,b in o&&(o[b]=pn)):typeof y!="function"&&oe(e,b,y)}}}return c}function nl(e,t,n=[],r=[],s,u=!1,o=!1){yc(n,r,i=>{var l=void 0,c={},f=e.nodeName==="SELECT",d=!1;if(ps(()=>{var h=t(...i.map(a)),v=z0(e,l,h,s,u,o);d&&f&&"value"in h&&Tn(e,h.value);for(let A of Object.getOwnPropertySymbols(c))h[A]||Sn(c[A]);for(let A of Object.getOwnPropertySymbols(h)){var T=h[A];A.description===Of&&(!l||T!==l[A])&&(c[A]&&Sn(c[A]),c[A]=An(()=>N0(e,()=>T))),v[A]=T}l=v}),f){var g=e;Wn(()=>{Tn(g,l.value,!0),Rn(g)})}d=!0})}function Bu(e){return e.__attributes??={[Kc]:e.nodeName.includes("-"),[Yc]:e.namespaceURI===Nf}}var rl=new Map;function Jc(e){var t=e.getAttribute("is")||e.nodeName,n=rl.get(t);if(n)return n;rl.set(t,n=[]);for(var r,s=e,u=Element.prototype;u!==s;){r=lc(s);for(var o in r)r[o].set&&n.push(o);s=li(s)}return n}function cr(e,t,n=t){var r=new WeakSet;Dc(e,"input",async s=>{var u=s?e.defaultValue:e.value;if(u=io(e)?lo(u):u,n(u),Ut!==null&&r.add(Ut),await g0(),u!==(u=t())){var o=e.selectionStart,i=e.selectionEnd;e.value=u??"",i!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(i,e.value.length))}}),p(t)==null&&e.value&&(n(io(e)?lo(e.value):e.value),Ut!==null&&r.add(Ut)),Zs(()=>{var s=t();if(e===document.activeElement){var u=du??Ut;if(r.has(u))return}io(e)&&s===lo(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function io(e){var t=e.type;return t==="number"||t==="range"}function lo(e){return e===""?null:+e}function B0(e,t,n){var r=Cr(e,t);r&&r.set&&(e[t]=n,Ru(()=>{e[t]=null}))}function sl(e,t){return e===t||e?.[hr]===t}function Dr(e={},t,n,r){return Wn(()=>{var s,u;return Zs(()=>{s=u,u=[],p(()=>{e!==n(...u)&&(t(e,...u),s&&sl(n(...s),e)&&t(null,...s))})}),()=>{fs(()=>{u&&sl(n(...u),e)&&t(null,...u)})}}),e}function yi(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}function Ct(e=!1){const t=It,n=t.l.u;if(!n)return;let r=()=>R(t.s);if(e){let s=0,u={};const o=Oa(()=>{let i=!1;const l=t.s;for(const c in l)l[c]!==u[c]&&(u[c]=l[c],i=!0);return i&&s++,s});r=()=>a(o)}n.b.length&&c0(()=>{al(t,r),Ea(n.b)}),Ho(()=>{const s=p(()=>n.m.map(cf));return()=>{for(const u of s)typeof u=="function"&&u()}}),n.a.length&&Ho(()=>{al(t,r),Ea(n.a)})}function al(e,t){if(e.l.s)for(const n of e.l.s)a(n);t()}function xi(e,t,n){if(e==null)return t(void 0),n&&n(void 0),qr;const r=p(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const bs=[];function U0(e,t){return{subscribe:Gt(e,t).subscribe}}function Gt(e,t=qr){let n=null;const r=new Set;function s(i){if(vi(e,i)&&(e=i,n)){const l=!bs.length;for(const c of r)c[1](),bs.push(c,e);if(l){for(let c=0;c<bs.length;c+=2)bs[c][0](bs[c+1]);bs.length=0}}}function u(i){s(i(e))}function o(i,l=qr){const c=[i,l];return r.add(c),r.size===1&&(n=t(s,u)||qr),i(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:u,subscribe:o}}function an(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const u=t.length<2;return U0(n,(o,i)=>{let l=!1;const c=[];let f=0,d=qr;const g=()=>{if(f)return;d();const v=t(r?c[0]:c,o,i);u?o(v):d=typeof v=="function"?v:qr},h=s.map((v,T)=>xi(v,A=>{c[T]=A,f&=~(1<<T),l&&g()},()=>{f|=1<<T}));return l=!0,g(),function(){Ea(h),d(),l=!1}})}function rt(e){let t;return xi(e,n=>t=n)(),t}let Qa=!1,Zo=Symbol();function yt(e,t,n){const r=n[t]??={store:null,source:$(void 0),unsubscribe:qr};if(r.store!==e&&!(Zo in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=qr;else{var s=!0;r.unsubscribe=xi(e,u=>{s?r.source.v=u:_(r.source,u)}),s=!1}return e&&Zo in n?rt(e):a(r.source)}function rr(){const e={};function t(){Ru(()=>{for(var n in e)e[n].unsubscribe();bu(e,Zo,{enumerable:!1,value:!0})})}return[e,t]}function j0(e,t,n){return e.set(n),t}function q0(e){var t=Qa;try{return Qa=!1,[e(),Qa]}finally{Qa=t}}const H0={get(e,t){if(!e.exclude.includes(t))return a(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){if(!(t in e.special)){var r=ut;try{Gn(e.parent_effect),e.special[t]=re({get[t](){return e.props[t]}},t,pc)}finally{Gn(r)}}return e.special[t](n),Vi(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Vi(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Zn(e,t){return new Proxy({props:e,exclude:t,special:{},version:Vr(0),parent_effect:ut},H0)}const W0={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(na(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let s=e.props[r];na(s)&&(s=s());const u=Cr(s,t);if(u&&u.set)return u.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(na(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const s=Cr(r,t);return s&&!s.configurable&&(s.configurable=!0),s}}},has(e,t){if(t===hr||t===dc)return!1;for(let n of e.props)if(na(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(na(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function gr(...e){return new Proxy({props:e},W0)}function re(e,t,n,r){var s=!Gs||(n&Df)!==0,u=(n&Mf)!==0,o=(n&Ff)!==0,i=r,l=!0,c=()=>(l&&(l=!1,i=o?p(r):r),i),f;if(u){var d=hr in e||dc in e;f=Cr(e,t)?.set??(d&&t in e?w=>e[t]=w:void 0)}var g,h=!1;u?[g,h]=q0(()=>e[t]):g=e[t],g===void 0&&r!==void 0&&(g=c(),f&&(s&&xf(),f(g)));var v;if(s?v=()=>{var w=e[t];return w===void 0?c():(l=!0,w)}:v=()=>{var w=e[t];return w!==void 0&&(i=void 0),w===void 0?i:w},s&&(n&pc)===0)return v;if(f){var T=e.$$legacy;return(function(w,y){return arguments.length>0?((!s||!y||T||h)&&f(y?v():w),w):v()})}var A=!1,b=((n&Tf)!==0?Oa:Ft)(()=>(A=!1,v()));u&&a(b);var C=ut;return(function(w,y){if(arguments.length>0){const E=y?a(b):s&&u?Ps(w):w;return _(b,E),A=!0,i!==void 0&&(i=E),w}return hs&&A||(C.f&ds)!==0?b.v:a(b)})}function Ba(e){It===null&&Iu(),Gs&&It.l!==null?Qc(It).m.push(e):Ho(()=>{const t=p(e);if(typeof t=="function")return t})}function Us(e){It===null&&Iu(),Ba(()=>()=>p(e))}function V0(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Jt(){const e=It;return e===null&&Iu(),(t,n,r)=>{const s=e.s.$$events?.[t];if(s){const u=Na(s)?s.slice():[s],o=V0(t,n,r);for(const i of u)i.call(e.x,o);return!o.defaultPrevented}return!0}}function Xc(e){It===null&&Iu(),It.l===null&&yf(),Qc(It).a.push(e)}function Qc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const G0="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(G0);Uf();const $t="";function st(e){return e.startsWith("/")?`${$t}${e}`:`${$t}/${e}`}const Z0=/\r?\n/;function ul(e){const t=[],n=e.split(/\n\n|\r\r|\r\n\r\n/);for(const r of n){const s=r.trim();if(!s)continue;const u=s.split(Z0);let o="message",i=[],l;for(const c of u)if(c&&!c.startsWith(":")){if(c.startsWith("event:")){o=c.slice(6).trim()||"message";continue}if(c.startsWith("data:")){i.push(c.slice(5).trimStart());continue}if(c.startsWith("id:")){l=c.slice(3).trim();continue}}t.push({event:o,data:i.length?i.join(`
`):void 0,id:l})}return t}class nr extends Error{status;constructor(t,n){super(n),this.status=t}}async function _t(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const s=await n.json();r=s.detail||s.message||JSON.stringify(s)}catch{}throw new nr(n.status,r)}return await n.json()}async function Uu(e,t){const n=await fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json",...t?.headers},...t});if(!n.ok){let r=n.statusText;try{const s=await n.json();r=s.detail||s.message||JSON.stringify(s)}catch{}throw new nr(n.status,r)}}async function K0(){return _t(st("/api/models"))}async function Y0(e){const t=`/api/chat/generation/${encodeURIComponent(e)}`;return _t(st(t))}async function ol(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}/messages/${encodeURIComponent(t)}`;await Uu(st(n),{method:"DELETE"})}async function J0(){return _t(st("/api/clients/svelte/llm"))}async function il(e){return _t(st("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify(e)})}async function X0(){return{system_prompt:(await _t(st("/api/clients/svelte/llm"))).system_prompt}}async function Q0(e){return{system_prompt:(await _t(st("/api/clients/svelte/llm"),{method:"PUT",body:JSON.stringify({system_prompt:e.system_prompt})})).system_prompt}}async function co(){return _t(st("/api/mcp/servers/"))}async function ep(e){return _t(st("/api/mcp/servers/connect"),{method:"POST",body:JSON.stringify({url:e})})}async function tp(e){await Uu(st(`/api/mcp/servers/${encodeURIComponent(e)}`),{method:"DELETE"})}async function np(e,t){const n=`/api/mcp/servers/${encodeURIComponent(e)}`;return _t(st(n),{method:"PATCH",body:JSON.stringify(t)})}async function rp(){return _t(st("/api/mcp/servers/refresh"),{method:"POST",body:JSON.stringify({})})}async function sp(e){return _t(st(`/api/mcp/preferences/${encodeURIComponent(e)}`))}async function ll(e,t){return _t(st(`/api/mcp/preferences/${encodeURIComponent(e)}`),{method:"PUT",body:JSON.stringify({enabled_servers:t})})}async function ap(){return _t(st("/api/google-auth/status"))}async function up(e){return _t(st("/api/google-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function op(){return _t(st("/api/monarch-auth/status"))}async function ip(e){return _t(st("/api/monarch-auth/credentials"),{method:"POST",body:JSON.stringify(e)})}async function lp(){return _t(st("/api/monarch-auth/credentials"),{method:"DELETE"})}async function cp(){return _t(st("/api/spotify-auth/status"))}async function dp(e){return _t(st("/api/spotify-auth/authorize"),{method:"POST",body:JSON.stringify(e)})}async function fp(e,t){const n=new FormData;n.append("file",e),n.append("session_id",t);const r=await fetch(st("/api/uploads"),{method:"POST",body:n});if(!r.ok){let s=r.statusText||"Upload failed";try{s=(await r.json())?.detail??s}catch{}throw new nr(r.status||0,s)}return await r.json()}const pp=/\n\n|\r\r|\r\n\r\n/;async function hp(e,{onChunk:t,onDone:n,onError:r,onSession:s,onNotice:u,signal:o}={}){const i=await fetch(st("/api/chat/stream"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(e),signal:o});if(!i.ok||!i.body){const d=i.statusText||"Failed to connect to chat stream",g=new nr(i.status||0,d);throw r?.(g),g}const l=i.body.getReader(),c=new TextDecoder;let f="";try{for(;;){const{value:d,done:g}=await l.read();if(g)break;f+=c.decode(d,{stream:!0});const h=f.split(pp);f=h.pop()??"";for(const v of h){const T=ul(v);for(const A of T){if(A.event==="session"&&A.data){try{const b=JSON.parse(A.data);b.session_id&&s?.(b.session_id)}catch(b){console.warn("Failed to parse session payload",b)}continue}if(A.event==="notice"){if(A.data)try{const b=JSON.parse(A.data);u?.(b)}catch(b){console.warn("Failed to parse notice payload",b,A.data)}continue}if(A.event!=="message"){t?.({choices:[],object:"event",meta:{event:A.event,data:A.data}},A);continue}if(A.data==="[DONE]"){n?.();return}if(A.data)try{const b=JSON.parse(A.data);t?.(b,A)}catch(b){console.warn("Failed to parse SSE chunk",b,A.data)}}}}if(f.trim()){const d=ul(f);for(const g of d)if(g.event==="session"&&g.data)try{const h=JSON.parse(g.data);h.session_id&&s?.(h.session_id)}catch(h){console.warn("Failed to parse session payload",h)}else if(g.event==="notice"){if(g.data)try{const h=JSON.parse(g.data);u?.(h)}catch(h){console.warn("Failed to parse notice payload",h,g.data)}}else if(g.event==="message"){if(g.data==="[DONE]")n?.();else if(g.data)try{const h=JSON.parse(g.data);t?.(h,g)}catch(h){console.warn("Failed to parse SSE chunk",h,g.data)}}}n?.()}catch(d){if(d instanceof DOMException&&d.name==="AbortError")return;const g=d instanceof Error?d:new Error(String(d));throw r?.(g),g}finally{l.releaseLock()}}function Ua(e,t){return{name:e.name,model:e.llm?.model??"unknown",provider:null,parameters:null,supports_tools:e.llm?.supports_tools??null,system_prompt:e.llm?.system_prompt??null,suggestions:null,model_filters:e.model_filters??null,is_default:t,created_at:e.created_at??new Date().toISOString(),updated_at:e.updated_at??new Date().toISOString()}}function vp(e,t){return{name:e.name,model:e.llm?.model??"unknown",is_default:t,has_filters:!!e.model_filters,created_at:e.created_at??new Date().toISOString(),updated_at:e.updated_at??new Date().toISOString()}}async function aa(){const e=await _t(st("/api/clients/svelte/presets"));return e.presets.map((t,n)=>vp(t,n===e.active_index))}async function mp(e){const t=await _t(st("/api/clients/svelte/presets")),n=t.presets.find(s=>s.name===e);if(!n)throw new nr(404,`Preset not found: ${e}`);const r=t.presets.indexOf(n);return Ua(n,r===t.active_index)}async function gp(e){const t=await _t(st("/api/clients/svelte/llm")),n={name:e.name,llm:t,model_filters:e.model_filters},r=await _t(st("/api/clients/svelte/presets"),{method:"POST",body:JSON.stringify(n)}),s=r.presets.find(o=>o.name===e.name);if(!s)throw new nr(500,"Failed to create preset");const u=r.presets.indexOf(s);return Ua(s,u===r.active_index)}async function _p(e,t){const r=(await _t(st("/api/clients/svelte/presets"))).presets.findIndex(i=>i.name===e);if(r===-1)throw new nr(404,`Preset not found: ${e}`);const s=await _t(st("/api/clients/svelte/llm")),u=await _t(st(`/api/clients/svelte/presets/${r}`),{method:"PUT",body:JSON.stringify({llm:s,model_filters:t?.model_filters??null})}),o=u.presets[r];if(!o)throw new nr(500,"Failed to save preset snapshot");return Ua(o,r===u.active_index)}async function bp(e){return await Uu(st(`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}`),{method:"DELETE"}),{deleted:!0}}async function yp(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/apply`;return await _t(st(t),{method:"POST",body:JSON.stringify({})}),mp(e)}async function xp(e){const t=`/api/clients/svelte/presets/by-name/${encodeURIComponent(e)}/set-active`,n=await _t(st(t),{method:"POST",body:JSON.stringify({})}),r=n.presets.find(u=>u.name===e);if(!r)throw new nr(404,`Preset not found: ${e}`);const s=n.presets.indexOf(r);return Ua(r,s===n.active_index)}async function kp(){const e=await _t(st("/api/clients/svelte/presets"));return e.active_index!==null&&e.presets[e.active_index]?Ua(e.presets[e.active_index],!0):null}async function ed(){return _t(st("/api/clients/svelte/stt"))}async function wp(e){return _t(st("/api/clients/svelte/stt"),{method:"PUT",body:JSON.stringify(e)})}async function Sp(e=50,t=0){return(await _t(st(`/api/chat/conversations?limit=${e}&offset=${t}`))).conversations}async function Ep(e){const t=`/api/chat/session/${encodeURIComponent(e)}/messages`;return _t(st(t))}async function cl(e,t){const n=`/api/chat/session/${encodeURIComponent(e)}/save`;return _t(st(n),{method:"POST",body:JSON.stringify({})})}async function Cp(e){const t=`/api/chat/session/${encodeURIComponent(e)}/unsave`;await _t(st(t),{method:"POST"})}async function Ap(e){const t=`/api/chat/conversations/${encodeURIComponent(e)}`;await Uu(st(t),{method:"DELETE"})}const td=[{key:"total_cost",label:"Total cost"},{key:"created_at",label:"Created"},{key:"model",label:"Model"},{key:"origin",label:"Origin"},{key:"usage",label:"Usage"},{key:"is_byok",label:"Self-hosted"},{key:"cache_discount",label:"Cache discount"},{key:"upstream_inference_cost",label:"Upstream inference cost"},{key:"cancelled",label:"Cancelled"},{key:"provider_name",label:"Provider"},{key:"latency",label:"Latency (ms)"},{key:"moderation_latency",label:"Moderation latency (ms)"},{key:"generation_time",label:"Generation time (ms)"},{key:"finish_reason",label:"Finish reason"},{key:"native_finish_reason",label:"Native finish reason"},{key:"tokens_prompt",label:"Prompt tokens"},{key:"tokens_completion",label:"Completion tokens"},{key:"native_tokens_prompt",label:"Native prompt tokens"},{key:"native_tokens_completion",label:"Native completion tokens"},{key:"native_tokens_reasoning",label:"Native reasoning tokens"},{key:"num_media_prompt",label:"Prompt media"},{key:"num_media_completion",label:"Completion media"},{key:"num_search_results",label:"Search results"}];function dl(e){if(e==null||e==="")return{text:"â",isMultiline:!1};if(typeof e=="boolean")return{text:e?"Yes":"No",isMultiline:!1};if(typeof e=="number")return{text:Number.isFinite(e)?e.toString():String(e),isMultiline:!1};if(typeof e=="object")try{const n=JSON.stringify(e,null,2);return{text:n,isMultiline:n.includes(`
`)}}catch(n){console.warn("Failed to stringify generation detail value",n,e);const r=String(e);return{text:r,isMultiline:r.includes(`
`)}}const t=String(e);return{text:t,isMultiline:t.includes(`
`)}}const Tp="modulepreload",Dp=function(e){return"/"+e},fl={},pl=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=o?.nonce||o?.getAttribute("nonce");s=l(n.map(c=>{if(c=Dp(c),c in fl)return;fl[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Tp,f||(g.as="script"),g.crossOrigin="",g.href=c,i&&g.setAttribute("nonce",i),document.head.appendChild(g),f)return new Promise((h,v)=>{g.addEventListener("load",h),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function u(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return s.then(o=>{for(const i of o||[])i.status==="rejected"&&u(i.reason);return t().catch(u)})},hl={enabled:!1,engine:null,maxResults:5,searchPrompt:"",contextSize:null};function vl(e,t){const n={...t};if(Object.prototype.hasOwnProperty.call(e,"enabled")&&(n.enabled=!!e.enabled),Object.prototype.hasOwnProperty.call(e,"engine")){const r=e.engine;n.engine=r==="native"||r==="exa"?r:null}if(Object.prototype.hasOwnProperty.call(e,"maxResults")){const r=e.maxResults;if(r==null)n.maxResults=null;else{const s=Number(r);Number.isFinite(s)&&s>0?n.maxResults=Math.min(Math.round(s),25):n.maxResults=t.maxResults}}if(Object.prototype.hasOwnProperty.call(e,"searchPrompt")){const r=e.searchPrompt;n.searchPrompt=typeof r=="string"?r:t.searchPrompt}if(Object.prototype.hasOwnProperty.call(e,"contextSize")){const r=e.contextSize;n.contextSize=r==="low"||r==="medium"||r==="high"?r:null}return n}function Mp(e=hl){const t=Gt({...e});function n(o){t.update(i=>vl(o,i))}function r(o){t.update(i=>vl({enabled:o},i))}function s(){t.set({...hl})}const u=an(t,o=>o.enabled);return{subscribe:t.subscribe,get current(){return rt(t)},update:n,setEnabled:r,reset:s,isEnabled:u}}const nd=Mp(),Fp=[{label:"GPT",keywords:["gpt","openai","o1","o3"]},{label:"Claude",keywords:["claude"]},{label:"Gemini",keywords:["gemini","palm-2","palm2"]},{label:"Grok",keywords:["grok"]},{label:"Cohere",keywords:["cohere","command"]},{label:"Nova",keywords:["nova"]},{label:"Qwen",keywords:["qwen"]},{label:"Yi",keywords:["yi"]},{label:"DeepSeek",keywords:["deepseek"]},{label:"Mistral",keywords:["mistral","mixtral"]},{label:"Llama4",keywords:["llama-4"]},{label:"Llama3",keywords:["llama-3"]},{label:"Llama2",keywords:["llama-2"]},{label:"RWKV",keywords:["rwkv"]},{label:"Router",keywords:["router"]},{label:"Media",keywords:["media"]},{label:"Other",keywords:[]}];function rd(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function ki(e){const t=[];if(Array.isArray(e)){for(const n of e)typeof n=="string"&&n.trim()&&t.push(n.trim().toLowerCase());return t}if(typeof e=="string"&&e.trim())return e.split(/[,/]/).map(n=>n.trim().toLowerCase()).filter(Boolean);if(e&&typeof e=="object"){const n=Object.values(e);for(const r of n)t.push(...ki(r))}return t}function wi(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const u=n;for(const o of["input_modalities","input","modalities","inputs"])s(u[o])}return s(e.input_modalities),s(r),Array.from(t);function s(u){for(const o of ki(u))t.add(o)}}function Si(e){const t=new Set,{capabilities:n,tags:r}=e;if(n&&typeof n=="object"){const u=n;for(const i of["output_modalities","output","outputs"])s(u[i]);const o=u.modalities;o&&(s(o.output),s(o.outputs))}return s(e.output_modalities),s(r),Array.from(t);function s(u){for(const o of ki(u))t.add(o)}}const sd=1e6,ad=6,Pp=["prompt_price_per_million","input_price_per_million","input_token_price_per_million"],Ip=["prompt_price","input_price","input_token_price"],Np=["prompt","input","input_tokens","prompt_tokens"],Lp=["completion_price_per_million","output_price_per_million","output_token_price_per_million"],Op=["completion_price","output_price","output_token_price"],$p=["completion","output","output_tokens","completion_tokens"];function ud(e,t){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number(e.toFixed(t))}function od(e,t,n){return e===null||!Number.isFinite(e)||e<0?null:e===0?0:Number((e*t).toFixed(n))}function wu(e,t){for(const n of t){if(!(n in e))continue;const r=rd(e[n]);if(r!==null)return r}return null}function Rp(e){const t=[],n=s=>{s&&typeof s=="object"&&t.push(s)};n(e.pricing),e.provider&&typeof e.provider=="object"&&n(e.provider.pricing);const r=e.top_provider;return r&&typeof r=="object"&&n(r.pricing),t}function zp(e,t,n,r,s){const u=wu(e,t),o=ud(u,s);if(o!==null)return o;const i=wu(e,n),l=od(i,r,s);return l!==null?l:null}function Bp(e,t,n,r,s){if(!e)return null;const u=e,o=wu(u,t),i=ud(o,s);if(i!==null)return i;const l=wu(u,n),c=od(l,r,s);return c!==null?c:null}function id(e,t,n,r,s,u){const i=zp(e,t,n,s,u);if(i!==null)return i;const l=[...r,...n];for(const c of Rp(e)){const f=Bp(c,t,l,s,u);if(f!==null)return f}return null}function ld(e){return id(e,Pp,Ip,Np,sd,ad)}function Up(e){return id(e,Lp,Op,$p,sd,ad)}function pu(e){return ld(e)}function xa(e){const t=[e.max_context,e.context_length,e.context_window,e.context_tokens,e.stats?.context_length];for(const n of t){const r=rd(n);if(r!==null)return r}return null}function jp(e){return e===null?"â":e===0?"FREE":e>=100?`$${e.toFixed(0)}`:e>=10?`$${e.toFixed(1)}`:e>=1?`$${e.toFixed(2)}`:e>=.1?`$${e.toFixed(2)}`:`$${e.toFixed(3)}`}function eu(e){return e===null?"Unknown":e>=1e3?`${(e/1e3).toFixed(1)}k tokens`:`${e} tokens`}function cd(e){const t=e.provider;if(t&&typeof t=="object"){const r=t,s=r.display_name;if(typeof s=="string"&&s.trim())return s.trim();const u=r.name??r.id??r.slug;if(typeof u=="string"&&u.trim())return u.trim()}if(typeof e.provider=="string")return e.provider.trim()||null;const n=e.id?.split("/")??[];return n.length>=2?n[n.length-2]??null:null}function dd(e){const t=new Set,n=[];typeof e.id=="string"&&n.push(e.id.toLowerCase()),typeof e.name=="string"&&n.push(e.name.toLowerCase()),Array.isArray(e.tags)&&n.push(...e.tags.map(s=>String(s).toLowerCase()));const r=n.join(" ");for(const s of Fp)s.label!=="Other"&&s.keywords.some(u=>r.includes(u))&&t.add(s.label);return t.size===0&&t.add("Other"),Array.from(t)}function Ei(e){const t=new Set,n=[],r=e;if(n.push(r.parameters,r.supported_parameters),e.capabilities&&typeof e.capabilities=="object"){const s=e.capabilities;n.push(s.parameters,s.supports_parameters)}for(const s of n)if(s){if(Array.isArray(s)){for(const u of s){const o=fo(u);o&&t.add(o)}continue}if(typeof s=="object")for(const u of Object.keys(s)){const o=fo(u);o&&t.add(o)}if(typeof s=="string"){const u=fo(s);u&&t.add(u)}}return Array.from(t)}function fd(e){const t=e,n=[t.is_moderated,t.moderation,t.requires_moderation],r=e.capabilities;r&&typeof r=="object"&&(n.push(r.is_moderated),n.push(r.requires_moderation));const s=e.provider;s&&typeof s=="object"&&n.push(s.is_moderated);const u=t.top_provider;u&&typeof u=="object"&&n.push(u.is_moderated);const o=t.metadata;o&&typeof o=="object"&&n.push(o.is_moderated);for(const i of n)if(typeof i=="boolean")return i?"moderated":"unmoderated";return null}function fo(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function ys(){return{include:[],exclude:[]}}function Ko(){return{search:"",inputModalities:ys(),outputModalities:ys(),minContext:null,minPromptPrice:null,maxPromptPrice:null,sort:"newness",series:ys(),providers:ys(),supportedParameters:ys(),moderation:ys()}}const qp={inputModalities:[],outputModalities:[],minContext:null,maxContext:null,minPromptPrice:null,maxPromptPrice:null,series:[],providers:[],supportedParameters:[],moderation:[]},Hp={models:[],loading:!1,error:null,filters:Ko(),facets:{...qp}};function Wp(e){const t=new Set,n=new Set;let r=null,s=null,u=null,o=null;const i=new Set,l=new Set,c=new Set,f=new Set;for(const d of e){for(const A of wi(d))t.add(A);for(const A of Si(d))n.add(A);const g=xa(d);g!==null&&(r=r===null?g:Math.min(r,g),s=s===null?g:Math.max(s,g));const h=pu(d);h!==null&&(u=u===null?h:Math.min(u,h),o=o===null?h:Math.max(o,h));for(const A of dd(d))i.add(A);const v=cd(d);v&&l.add(v);for(const A of Ei(d))c.add(A);const T=fd(d);T&&f.add(T)}return{inputModalities:Array.from(t).sort(),outputModalities:Array.from(n).sort(),minContext:r,maxContext:s,minPromptPrice:u,maxPromptPrice:o,series:Array.from(i).sort(),providers:Array.from(l).sort(),supportedParameters:Array.from(c).sort(),moderation:Array.from(f).sort()}}function Ci(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t||null}function po(e){const t=[];for(const n of e){const r=Ci(n);r&&t.push(r)}return t}function Vp(e,t){return e.include.includes(t)?"include":e.exclude.includes(t)?"exclude":"neutral"}function pd(e,t,n){const r=e.include.filter(u=>u!==t),s=e.exclude.filter(u=>u!==t);return n==="include"?{include:[...r,t],exclude:s}:n==="exclude"?{include:r,exclude:[...s,t]}:{include:r,exclude:s}}function Gp(e,t,n){const r=Ci(t);return r?pd(e,r,n):e}function xs(e,t){const n=po(e.include),r=po(e.exclude);if(n.length===0&&r.length===0)return!0;const s=new Set(po(t));if(n.length>0){for(const u of n)if(!s.has(u))return!1}if(r.length>0){for(const u of r)if(s.has(u))return!1}return!0}function Zp(e){const{models:t,filters:n}=e;if(!Array.isArray(t)||t.length===0)return[];const r=n.search.toLowerCase().split(/\s+/).filter(Boolean),s=t.filter(i=>{if(r.length>0){const g=[i.id,i.name,i.description,(i.tags??[]).join(" ")].join(" ").toLowerCase();if(!r.every(v=>g.includes(v)))return!1}if(!xs(n.inputModalities,wi(i))||!xs(n.outputModalities,Si(i)))return!1;const l=xa(i);if(n.minContext!==null&&(l===null||l<n.minContext))return!1;const c=pu(i);if(n.minPromptPrice!==null&&(c===null||c<n.minPromptPrice)||n.maxPromptPrice!==null&&(c===null||c>n.maxPromptPrice)||!xs(n.series,dd(i)))return!1;const f=cd(i);if(!xs(n.providers,f?[f]:[])||!xs(n.supportedParameters,Ei(i)))return!1;const d=fd(i);return!!xs(n.moderation,d?[d]:[])}),u={newness:(i,l)=>{const c=Date.parse(i.created_at??"")||0;return(Date.parse(l.created_at??"")||0)-c},price:(i,l)=>{const c=pu(i),f=pu(l),d=c??Number.POSITIVE_INFINITY,g=f??Number.POSITIVE_INFINITY;return d===g?0:d<g?-1:1},context:(i,l)=>{const c=xa(i),f=xa(l),d=c??-1/0,g=f??-1/0;return d===g?0:g-d}},o=u[n.sort]??u.newness;return s.slice().sort(o)}function ks(e,t){const n=Ci(t);if(!n)return e;const r=Vp(e,n);return pd(e,n,r==="include"?"exclude":r==="exclude"?"neutral":"include")}function Kp(e,t,n,r){const s={...e};return s[t]=Gp(e[t],n,r),s}function ws(e){return e===null||Number.isNaN(e)||!Number.isFinite(e)||e<0?null:e}function qn(e){return e.include.length>0||e.exclude.length>0}function Yp(e){return!!(e.search.trim()||qn(e.inputModalities)||qn(e.outputModalities)||qn(e.series)||qn(e.providers)||qn(e.supportedParameters)||qn(e.moderation)||e.minContext!==null||e.minPromptPrice!==null||e.maxPromptPrice!==null)}function Jp(e,t,n){if(!Array.isArray(e)||e.length===0)return[];if(!n||e.some(s=>s.id===n))return e;const r=t.find(s=>s.id===n);return r?[r,...e]:e}function Xp(e,t){return!Array.isArray(e)||e.length===0||!t?null:e.find(r=>r.id===t)??null}function Qp(){const e=Gt({...Hp});async function t(){e.update(F=>({...F,loading:!0,error:null}));try{const F=await K0(),I=Array.isArray(F.data)?F.data:[],Y=Wp(I);return e.update(G=>({...G,models:I,facets:Y,loading:!1,error:null})),F}catch(F){const I=F instanceof Error?F.message:String(F);e.update(Y=>({...Y,loading:!1,error:I}))}}function n(F){e.update(I=>({...I,filters:{...I.filters,search:F}}))}function r(F){e.update(I=>({...I,filters:{...I.filters,inputModalities:ks(I.filters.inputModalities,F)}}))}function s(F){e.update(I=>({...I,filters:{...I.filters,outputModalities:ks(I.filters.outputModalities,F)}}))}function u(F){e.update(I=>({...I,filters:{...I.filters,series:ks(I.filters.series,F)}}))}function o(F){e.update(I=>({...I,filters:{...I.filters,providers:ks(I.filters.providers,F)}}))}function i(F){e.update(I=>({...I,filters:{...I.filters,supportedParameters:ks(I.filters.supportedParameters,F)}}))}function l(F){e.update(I=>({...I,filters:{...I.filters,moderation:ks(I.filters.moderation,F)}}))}function c(F,I,Y){e.update(G=>({...G,filters:Kp(G.filters,F,I,Y)}))}function f(F){e.update(I=>({...I,filters:{...I.filters,minContext:ws(F)}}))}function d(F){e.update(I=>({...I,filters:{...I.filters,minPromptPrice:ws(F)}}))}function g(F){e.update(I=>({...I,filters:{...I.filters,maxPromptPrice:ws(F)}}))}function h(F){e.update(I=>({...I,filters:{...I.filters,sort:F}}))}function v(){e.update(F=>{const I=Ko();return I.sort=F.filters.sort,{...F,filters:I}})}function T(){const F=rt(e).filters,I={};return qn(F.inputModalities)&&(I.inputModalities=F.inputModalities),qn(F.outputModalities)&&(I.outputModalities=F.outputModalities),F.minContext!==null&&(I.minContext=F.minContext),F.minPromptPrice!==null&&(I.minPromptPrice=F.minPromptPrice),F.maxPromptPrice!==null&&(I.maxPromptPrice=F.maxPromptPrice),qn(F.series)&&(I.series=F.series),qn(F.providers)&&(I.providers=F.providers),qn(F.supportedParameters)&&(I.supportedParameters=F.supportedParameters),qn(F.moderation)&&(I.moderation=F.moderation),I.sort=F.sort,I}function A(F){e.update(I=>{const Y=Ko();return Y.search=I.filters.search,F.inputModalities&&(Y.inputModalities=F.inputModalities),F.outputModalities&&(Y.outputModalities=F.outputModalities),F.minContext!==void 0&&(Y.minContext=ws(F.minContext)),F.minPromptPrice!==void 0&&(Y.minPromptPrice=ws(F.minPromptPrice)),F.maxPromptPrice!==void 0&&(Y.maxPromptPrice=ws(F.maxPromptPrice)),F.series&&(Y.series=F.series),F.providers&&(Y.providers=F.providers),F.supportedParameters&&(Y.supportedParameters=F.supportedParameters),F.moderation&&(Y.moderation=F.moderation),F.sort&&(Y.sort=F.sort),{...I,filters:Y}})}const b=an(e,F=>F.models),C=an(e,F=>F.loading),w=an(e,F=>F.error),y=an(e,F=>F.filters),E=an(e,F=>F.facets),k=an(e,F=>Zp(F)),D=an(e,F=>Yp(F.filters)),W=an([k,b,D],([F,I,Y])=>{const G=Y?F:I;return ie=>Jp(G,I,ie)}),U=an(b,F=>I=>Xp(F,I));return{subscribe:e.subscribe,loadModels:t,setSearch:n,toggleInputModality:r,toggleOutputModality:s,toggleSeries:u,toggleProvider:o,toggleSupportedParameter:i,toggleModeration:l,setSelectionState:c,setMinContext:f,setMinPromptPrice:d,setMaxPromptPrice:g,setSort:h,resetFilters:v,getFilters:T,setFilters:A,models:b,loading:C,error:w,filters:y,facets:E,filtered:k,activeFilters:D,selectable:W,activeFor:U}}const vr=Qp(),tu={loading:!1,saving:!1,applying:null,deleting:null,creating:!1,settingDefault:null,error:null,items:[],lastApplied:null,lastResult:null};function e1(){const e=Gt({...tu});async function t(){e.set({...tu,loading:!0});try{const c=await aa();e.set({...tu,loading:!1,items:c})}catch(c){const f=c instanceof Error?c.message:"Failed to load presets.";e.set({...tu,loading:!1,error:f})}}async function n(c){const f={name:c.trim(),model_filters:vr.getFilters()};if(!f.name)return e.update(d=>({...d,error:"Preset name is required."})),null;e.update(d=>({...d,creating:!0,error:null,lastResult:null}));try{const d=await gp(f),g=await aa();return e.update(h=>({...h,creating:!1,error:null,items:g,lastResult:d})),d}catch(d){const g=d instanceof Error?d.message:"Failed to create preset.";return e.update(h=>({...h,creating:!1,error:g})),null}}async function r(c,f){e.update(d=>({...d,saving:!0,error:null,lastResult:null}));try{const d={...f,model_filters:vr.getFilters()},g=await _p(c,d),h=await aa();return e.update(v=>({...v,saving:!1,error:null,items:h,lastResult:g})),g}catch(d){const g=d instanceof Error?d.message:"Failed to save snapshot.";return e.update(h=>({...h,saving:!1,error:g})),null}}async function s(c){e.update(f=>({...f,deleting:c,error:null}));try{const f=await bp(c),d=await aa();return e.update(g=>({...g,deleting:null,items:d})),!!f?.deleted}catch(f){const d=f instanceof Error?f.message:"Failed to delete preset.";return e.update(g=>({...g,deleting:null,error:d})),!1}}async function u(c){e.update(f=>({...f,applying:c,error:null,lastApplied:null,lastResult:null}));try{const f=await yp(c);return f?.model_filters&&vr.setFilters(f.model_filters),e.update(d=>({...d,applying:null,lastApplied:c,lastResult:f})),f}catch(f){const d=f instanceof Error?f.message:"Failed to apply preset.";return e.update(g=>({...g,applying:null,error:d})),null}}async function o(c){e.update(f=>({...f,settingDefault:c,error:null}));try{const f=await xp(c),d=await aa();return e.update(g=>({...g,settingDefault:null,items:d,lastResult:f})),f}catch(f){const d=f instanceof Error?f.message:"Failed to set default preset.";return e.update(g=>({...g,settingDefault:null,error:d})),null}}async function i(){try{return await kp()}catch(c){return console.error("Failed to load default preset:",c),null}}function l(){e.update(c=>({...c,error:null}))}return{subscribe:e.subscribe,load:t,create:n,saveSnapshot:r,remove:s,apply:u,setDefault:o,loadDefault:i,clearError:l}}const ir=e1();var t1=za('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M15 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),n1=za('<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>'),r1=M('<button class="preset-badge applying svelte-1vc4gmw" type="button" aria-live="polite"><span class="spinner svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button>'),s1=M('<button class="preset-badge svelte-1vc4gmw" type="button" aria-live="polite"><span class="dot svelte-1vc4gmw" aria-hidden="true"></span> <span class="label svelte-1vc4gmw">Preset</span> <span class="name svelte-1vc4gmw"> </span></button>'),a1=M('<div class="model-picker-loading svelte-1vc4gmw" aria-hidden="true"><select disabled><option>Loadingâ¦</option></select></div>'),u1=M('<div class="web-search-loading svelte-1vc4gmw" aria-hidden="true"><button class="btn btn-ghost btn-small web-search-summary" type="button" disabled><span>Web search</span> <span class="status svelte-1vc4gmw"> </span></button></div>'),o1=M('<div class="history-empty svelte-1vc4gmw">No saved conversations</div>'),i1=M('<div class="history-item svelte-1vc4gmw" role="menuitem" tabindex="0"><span class="history-item-title svelte-1vc4gmw"> </span> <span class="history-item-meta svelte-1vc4gmw"> </span> <button class="history-item-delete svelte-1vc4gmw" type="button" aria-label="Delete conversation"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div>'),l1=M('<div class="history-group-label svelte-1vc4gmw"> </div> <!>',1),c1=M('<div class="pwa-history-list svelte-1vc4gmw" role="menu"><!></div>'),d1=M('<button class="btn btn-ghost btn-small pwa-full-row mcp-btn svelte-1vc4gmw" type="button" aria-label="MCP servers" title="MCP servers"><svg width="18" height="18" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M25 97.8528L92.8823 29.9706C102.255 20.598 117.451 20.598 126.823 29.9706V29.9706C136.196 39.3431 136.196 54.5391 126.823 63.9117L75.5581 115.177" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M76.2653 114.47L126.823 63.9117C136.196 54.5391 151.392 54.5391 160.765 63.9117L161.118 64.2652C170.491 73.6378 170.491 88.8338 161.118 98.2063L99.7248 159.6C96.6006 162.724 96.6006 167.789 99.7248 170.913L112.331 183.52" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M109.853 46.9411L59.6482 97.1457C50.2757 106.518 50.2757 121.714 59.6482 131.087V131.087C69.0208 140.459 84.2168 140.459 93.5894 131.087L143.794 80.8822" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path></svg> <span>MCP Servers</span></button> <button class="btn btn-ghost btn-small pwa-full-row system-settings svelte-1vc4gmw" type="button" aria-label="System settings" title="System settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M8 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M3 8h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg> <span>System Settings</span></button> <div class="history-wrapper pwa-full-row svelte-1vc4gmw"><button class="btn btn-ghost btn-small pwa-full-row svelte-1vc4gmw" type="button" aria-label="Conversation history" title="Conversation history"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"></circle><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline></svg> <span>History</span></button> <!></div>',1),f1=M('<button class="btn btn-ghost btn-small settings-icon mcp-btn" type="button" aria-label="MCP servers" title="MCP servers"><svg width="18" height="18" viewBox="0 0 195 195" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M25 97.8528L92.8823 29.9706C102.255 20.598 117.451 20.598 126.823 29.9706V29.9706C136.196 39.3431 136.196 54.5391 126.823 63.9117L75.5581 115.177" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M76.2653 114.47L126.823 63.9117C136.196 54.5391 151.392 54.5391 160.765 63.9117L161.118 64.2652C170.491 73.6378 170.491 88.8338 161.118 98.2063L99.7248 159.6C96.6006 162.724 96.6006 167.789 99.7248 170.913L112.331 183.52" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path><path d="M109.853 46.9411L59.6482 97.1457C50.2757 106.518 50.2757 121.714 59.6482 131.087V131.087C69.0208 140.459 84.2168 140.459 93.5894 131.087L143.794 80.8822" stroke="currentColor" stroke-width="12" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon system-settings" type="button" aria-label="System settings" title="System settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M8 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M3 8h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button>',1),p1=M('<div class="history-empty svelte-1vc4gmw">No saved conversations</div>'),h1=M('<div class="history-item svelte-1vc4gmw" role="menuitem" tabindex="0"><span class="history-item-title svelte-1vc4gmw"> </span> <span class="history-item-meta svelte-1vc4gmw"> </span> <button class="history-item-delete svelte-1vc4gmw" type="button" aria-label="Delete conversation"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div>'),v1=M('<div class="history-group-label svelte-1vc4gmw"> </div> <!>',1),m1=M('<div class="history-dropdown svelte-1vc4gmw" role="menu"><!></div>'),g1=M('<button class="btn btn-ghost btn-small settings-icon kiosk-btn" type="button" aria-label="Kiosk settings" title="Kiosk settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="4" y="2" width="16" height="12" rx="1.5" stroke="currentColor" stroke-width="1.5"></rect><path d="M12 14v4M8 22h8M8 18h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button class="btn btn-ghost btn-small settings-icon cli-btn" type="button" aria-label="CLI settings" title="CLI settings"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4 17l6-6-6-6M12 19h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button type="button"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><polyline points="17 21 17 13 7 13 7 21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline><polyline points="7 3 7 8 15 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline></svg></button> <div class="history-wrapper svelte-1vc4gmw"><button class="btn btn-ghost btn-small" type="button" aria-label="Conversation history" title="Conversation history">History</button> <!></div> <button class="btn btn-ghost btn-small" type="button">Clear</button>',1),_1=M('<button class="drawer-backdrop svelte-1vc4gmw" type="button" aria-label="Close menu" tabindex="-1"></button>'),b1=M('<header class="topbar chat-header svelte-1vc4gmw"><div class="mobile-bar svelte-1vc4gmw"><button class="hamburger-btn svelte-1vc4gmw" type="button" aria-controls="chat-header-controls"><!></button> <span class="mobile-model-name svelte-1vc4gmw"><!></span> <button type="button"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><polyline points="17 21 17 13 7 13 7 21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline><polyline points="7 3 7 8 15 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></polyline></svg></button> <button class="btn btn-ghost btn-small mobile-clear svelte-1vc4gmw" type="button" aria-label="Clear conversation">Clear</button></div> <div class="topbar-content svelte-1vc4gmw"><div class="controls svelte-1vc4gmw" id="chat-header-controls"><!> <button class="btn btn-ghost btn-small explorer svelte-1vc4gmw" type="button">Explorer</button> <!> <!> <button class="btn btn-ghost btn-small svelte-1vc4gmw" type="button" aria-label="Model settings" title="Model settings"><span>Model</span> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.89 3.31.876 2.42 2.42a1.724 1.724 0 0 0 1.066 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.572c.89 1.543-.876 3.31-2.42 2.42a1.724 1.724 0 0 0-2.572 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.89-3.31-.876-2.42-2.42a1.724 1.724 0 0 0-1.066-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.572c-.89-1.543.876-3.31 2.42-2.42.965.557 2.185.21 2.573-1.066Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!> <div class="icon-row svelte-1vc4gmw"><!> <!></div></div></div> <!></header>');function y1(e,t){wt(t,!1);const n=()=>yt(ir,"$presetsStore",s),r=()=>yt(nd,"$webSearchStore",s),[s,u]=rr(),o=$(),i=Jt();let l=re(t,"selectableModels",24,()=>[]),c=re(t,"selectedModel",8,""),f=re(t,"modelsLoading",8,!1),d=re(t,"modelsError",8,null),g=re(t,"hasMessages",8,!1),h=re(t,"pwaMode",8,!1),v=re(t,"isSaved",8,!1),T=re(t,"conversations",24,()=>[]),A=$(!1),b=$(),C=$(""),w=$(null),y=$(null),E=$(!1),k=$(!1),D=re(t,"controlsOpen",12,!1),W=$(null);function U(){D(!1)}async function F(){if(!a(w)){_(E,!0);try{const se=await pl(()=>import("./ModelPicker-DfnHEWTR.js"),__vite__mapDeps([0,1]));_(w,se.default)}catch(se){console.error("Failed to load ModelPicker",se)}finally{_(E,!1)}}}async function I(){if(!a(y)){_(k,!0);try{const se=await pl(()=>import("./WebSearchMenu-DVOS3pPe.js"),__vite__mapDeps([2,3]));_(y,se.default)}catch(se){console.error("Failed to load WebSearchMenu",se)}finally{_(k,!1)}}}Ba(()=>{F(),I()});function Y(){U(),i("openExplorer")}function G(){U(),i("clear")}function ie(se){i("modelChange",se.detail)}function O(){h()||U(),i("openModelSettings")}function ee(){h()||U(),i("openSystemSettings")}function le(){h()||U(),i("openKioskSettings")}function te(){h()||U(),i("openCliSettings")}function J(){h()||U(),i("openMcpServers")}function N(){i("toggleSaved")}function q(){if(_(A,!a(A)),a(A)&&a(b)){const se=a(b).getBoundingClientRect(),_e=400,be=4,Oe=320,Ie=window.innerHeight-se.bottom-be,at=se.top-be;let pt,$e;Ie>=200||Ie>=at?(pt=se.bottom+be,$e=Math.min(_e,Ie)):($e=Math.min(_e,at),pt=se.top-be-$e);const We=Math.max(8,Math.min(se.left,window.innerWidth-Oe-8));_(C,`position:fixed;top:${pt}px;left:${We}px;max-height:${$e}px;width:${Math.min(Oe,window.innerWidth-16)}px;`)}}function ae(se){_(A,!1),U(),i("loadConversation",{sessionId:se})}function ke(se,_e){se.stopPropagation(),i("deleteConversation",{sessionId:_e})}function Q(se){const _e=new Date,be=new Date(_e.getFullYear(),_e.getMonth(),_e.getDate()),Oe=new Date(be.getTime()-864e5),Ie=new Date(be.getTime()-7*864e5),at=new Date(be.getTime()-30*864e5),pt={},$e=[];function We(Ve,Ce){pt[Ve]||(pt[Ve]=[],$e.push(Ve)),pt[Ve].push(Ce)}for(const Ve of se){const Ce=Ve.updated_at||Ve.created_at;if(!Ce){We("Older",Ve);continue}const xt=new Date(Ce);if(xt>=be)We("Today",Ve);else if(xt>=Oe)We("Yesterday",Ve);else if(xt>=Ie)We("Previous 7 Days",Ve);else if(xt>=at)We("Previous 30 Days",Ve);else{const it=xt.toLocaleDateString("en-US",{month:"long",year:"numeric"});We(it,Ve)}}return $e.map(Ve=>({label:Ve,items:pt[Ve]}))}function K(se){if(!a(A))return;se.target.closest(".history-wrapper")||_(A,!1)}ye(()=>(a(W),R(D())),()=>{a(W)!==D()&&(_(W,D()),i("drawerToggle",{open:D()}))}),ye(()=>R(T()),()=>{_(o,Q(T()))}),Yt(),Ct();var Z=b1();z("click",Ca,K);var me=m(Z),ne=m(me),xe=m(ne);{var X=se=>{var _e=t1();S(se,_e)},Le=se=>{var _e=n1();S(se,_e)};L(xe,se=>{D()?se(X):se(Le,!1)})}var Re=x(ne,2),et=m(Re);{var Ge=se=>{var _e=un();j(be=>H(_e,be),[()=>(R(l()),R(c()),p(()=>l().find(be=>be.id===c())?.name??c().split("/").pop()??"Chat"))]),S(se,_e)},Ae=se=>{var _e=un("Chat");S(se,_e)};L(et,se=>{c()?se(Ge):se(Ae,!1)})}var Ke=x(Re,2);let ge;var Pe=x(Ke,2),ze=x(me,2),je=m(ze),Je=m(je);{var Dt=se=>{var _e=r1(),be=x(m(_e),4),Oe=m(be);j(()=>{oe(_e,"title",(n(),p(()=>`Applying ${n().applying}â¦ (open system settings to manage presets)`))),oe(be,"title",(n(),p(()=>n().applying))),H(Oe,(n(),p(()=>n().applying)))}),z("click",_e,ee),S(se,_e)},de=se=>{var _e=Ee(),be=ce(_e);{var Oe=Ie=>{var at=s1(),pt=x(m(at),4),$e=m(pt);j(()=>{oe(at,"title",(n(),p(()=>`Active preset: ${n().lastApplied} (open system settings to manage)`))),oe(pt,"title",(n(),p(()=>n().lastApplied))),H($e,(n(),p(()=>n().lastApplied)))}),z("click",at,ee),S(Ie,at)};L(be,Ie=>{n(),p(()=>n().lastApplied)&&Ie(Oe)},!0)}S(se,_e)};L(Je,se=>{n(),p(()=>n().applying)?se(Dt):se(de,!1)})}var B=x(Je,2),ue=x(B,2);{var ve=se=>{var _e=Ee(),be=ce(_e);Qi(be,()=>a(w),(Oe,Ie)=>{Ie(Oe,{get selectableModels(){return l()},get selectedModel(){return c()},get modelsLoading(){return f()},get modelsError(){return d()},$$events:{modelChange:ie}})}),S(se,_e)},Me=se=>{var _e=a1();j(()=>oe(_e,"data-loading",a(E))),S(se,_e)};L(ue,se=>{a(w)?se(ve):se(Me,!1)})}var Be=x(ue,2);{var Ne=se=>{var _e=Ee(),be=ce(_e);Qi(be,()=>a(y),(Oe,Ie)=>{Ie(Oe,{get pwaMode(){return h()}})}),S(se,_e)},Ze=se=>{var _e=u1(),be=m(_e),Oe=x(m(be),2),Ie=m(Oe);j(()=>{oe(_e,"data-loading",a(k)),oe(Oe,"data-enabled",(r(),p(()=>r().enabled))),H(Ie,(r(),p(()=>r().enabled?"On":"Off")))}),S(se,_e)};L(Be,se=>{a(y)?se(Ne):se(Ze,!1)})}var He=x(Be,2),Xe=x(He,2);{var ot=se=>{var _e=d1(),be=ce(_e),Oe=x(be,2),Ie=x(Oe,2),at=m(Ie),pt=x(at,2);{var $e=We=>{var Ve=c1(),Ce=m(Ve);{var xt=ht=>{var Nt=o1();S(ht,Nt)},it=ht=>{var Nt=Ee(),on=ce(Nt);Tt(on,1,()=>a(o),Ln,(Kt,fe)=>{var Fe=l1(),nt=ce(Fe),pe=m(nt),Te=x(nt,2);Tt(Te,1,()=>(a(fe),p(()=>a(fe).items)),Ln,(mt,ct)=>{var we=i1(),P=m(we),V=m(P),he=x(P,2),qe=m(he),tt=x(he,2);j(()=>{H(V,(a(ct),p(()=>a(ct).title||a(ct).preview||"Untitled"))),H(qe,`${a(ct),p(()=>a(ct).message_count)??""} msgs`)}),z("click",tt,Se=>ke(Se,a(ct).session_id)),z("click",we,()=>ae(a(ct).session_id)),z("keydown",we,Se=>{(Se.key==="Enter"||Se.key===" ")&&ae(a(ct).session_id)}),S(mt,we)}),j(()=>H(pe,(a(fe),p(()=>a(fe).label)))),S(Kt,Fe)}),S(ht,Nt)};L(Ce,ht=>{R(T()),p(()=>T().length===0)?ht(xt):ht(it,!1)})}S(We,Ve)};L(pt,We=>{a(A)&&We($e)})}j(()=>oe(at,"aria-expanded",a(A))),z("click",be,J),z("click",Oe,ee),z("click",at,q),S(se,_e)};L(Xe,se=>{h()&&se(ot)})}var Qe=x(Xe,2),bt=m(Qe);{var lt=se=>{var _e=f1(),be=ce(_e),Oe=x(be,2);z("click",be,J),z("click",Oe,ee),S(se,_e)};L(bt,se=>{h()||se(lt)})}var Et=x(bt,2);{var Zt=se=>{var _e=g1(),be=ce(_e),Oe=x(be,2),Ie=x(Oe,2);let at;var pt=x(Ie,2),$e=m(pt),We=x($e,2);{var Ve=xt=>{var it=m1(),ht=m(it);{var Nt=Kt=>{var fe=p1();S(Kt,fe)},on=Kt=>{var fe=Ee(),Fe=ce(fe);Tt(Fe,1,()=>a(o),Ln,(nt,pe)=>{var Te=v1(),mt=ce(Te),ct=m(mt),we=x(mt,2);Tt(we,1,()=>(a(pe),p(()=>a(pe).items)),Ln,(P,V)=>{var he=h1(),qe=m(he),tt=m(qe),Se=x(qe,2),Ye=m(Se),gt=x(Se,2);j(()=>{H(tt,(a(V),p(()=>a(V).title||a(V).preview||"Untitled"))),H(Ye,`${a(V),p(()=>a(V).message_count)??""} msgs`)}),z("click",gt,Lt=>ke(Lt,a(V).session_id)),z("click",he,()=>ae(a(V).session_id)),z("keydown",he,Lt=>{(Lt.key==="Enter"||Lt.key===" ")&&ae(a(V).session_id)}),S(P,he)}),j(()=>H(ct,(a(pe),p(()=>a(pe).label)))),S(nt,Te)}),S(Kt,fe)};L(ht,Kt=>{R(T()),p(()=>T().length===0)?Kt(Nt):Kt(on,!1)})}j(()=>hn(it,a(C))),S(xt,it)};L(We,xt=>{a(A)&&xt(Ve)})}Dr(pt,xt=>_(b,xt),()=>a(b));var Ce=x(pt,2);j(xt=>{at=Pt(Ie,1,"btn btn-ghost btn-small save-toggle svelte-1vc4gmw",null,at,xt),oe(Ie,"aria-label",v()?"Conversation saved":"Save conversation"),oe(Ie,"title",v()?"Conversation saved":"Save conversation"),oe($e,"aria-expanded",a(A)),Ce.disabled=!g()},[()=>({active:v()})]),z("click",be,le),z("click",Oe,te),z("click",Ie,N),z("click",$e,q),z("click",Ce,G),S(se,_e)};L(Et,se=>{h()||se(Zt)})}var Wt=x(ze,2);{var tn=se=>{var _e=_1();z("click",_e,()=>D(!1)),S(se,_e)};L(Wt,se=>{D()&&se(tn)})}j(se=>{oe(Z,"data-pwa-mode",h()),oe(Z,"data-drawer-open",D()),oe(ne,"aria-label",D()?"Close menu":"Open menu"),oe(ne,"aria-expanded",D()),ge=Pt(Ke,1,"btn btn-ghost btn-small mobile-save svelte-1vc4gmw",null,ge,se),oe(Ke,"aria-label",v()?"Conversation saved":"Save conversation"),oe(Ke,"title",v()?"Conversation saved":"Save conversation"),Pe.disabled=!g(),He.disabled=f()||!c()},[()=>({active:v()})]),z("click",ne,()=>D(!D())),z("click",Ke,N),z("click",Pe,G),z("click",B,Y),z("click",He,O),S(e,Z),St(),u()}/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const x1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var k1=za("<svg><!><!></svg>");function _r(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]),r=Zn(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);wt(t,!1);let s=re(t,"name",8,void 0),u=re(t,"color",8,"currentColor"),o=re(t,"size",8,24),i=re(t,"strokeWidth",8,2),l=re(t,"absoluteStrokeWidth",8,!1),c=re(t,"iconNode",24,()=>[]);const f=(...v)=>v.filter((T,A,b)=>!!T&&b.indexOf(T)===A).join(" ");Ct();var d=k1();nl(d,(v,T)=>({...x1,...r,width:o(),height:o(),stroke:u(),"stroke-width":v,class:T}),[()=>(R(l()),R(i()),R(o()),p(()=>l()?Number(i())*24/Number(o()):i())),()=>(R(s()),R(n),p(()=>f("lucide-icon","lucide",s()?`lucide-${s()}`:"",n.class)))]);var g=m(d);Tt(g,1,c,Ln,(v,T)=>{var A=t0(()=>ff(a(T),2));let b=()=>a(A)[0],C=()=>a(A)[1];var w=Ee(),y=ce(w);I0(y,b,!0,(E,k)=>{nl(E,()=>({...C()}))}),S(v,w)});var h=x(g);wn(h,t,"default",{}),S(e,d),St()}function w1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M12 18V5"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77"}]];_r(e,gr({name:"brain"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function S1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M5 21v-6"}],["path",{d:"M12 21V9"}],["path",{d:"M19 21V3"}]];_r(e,gr({name:"chart-no-axes-column-increasing"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function E1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M20 6 9 17l-5-5"}]];_r(e,gr({name:"check"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function C1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4"}],["path",{d:"M21 14H11"}],["path",{d:"m15 10-4 4 4 4"}]];_r(e,gr({name:"clipboard-copy"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function A1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];_r(e,gr({name:"globe"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function ml(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];_r(e,gr({name:"pencil"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function T1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}],["path",{d:"M16 16h5v5"}]];_r(e,gr({name:"refresh-ccw"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function D1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];_r(e,gr({name:"send"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function M1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];_r(e,gr({name:"trash-2"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function F1(e,t){const n=Zn(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];_r(e,gr({name:"wrench"},()=>n,{get iconNode(){return r},children:(s,u)=>{var o=Ee(),i=ce(o);wn(i,t,"default",{}),S(s,o)},$$slots:{default:!0}}))}function P1(e,t=null){let n=0,r=2;function s(c){if(typeof c=="number")r=Number.isFinite(c)&&c>0?c:2;else if(c&&typeof c=="object"&&"maxMultiplier"in c){const f=c.maxMultiplier;typeof f=="number"&&Number.isFinite(f)&&f>0&&(r=f)}}s(t);function u(){const c=e.style.height;if(e.style.height="auto",n=e.clientHeight||e.scrollHeight||0,e.style.height=c,!n){const f=getComputedStyle(e);n=parseFloat(f.lineHeight||"0")||24}}function o(){const c=Math.max(1,Math.round(n*r));e.style.height="auto";const f=e.scrollHeight,d=Math.min(f,c);e.style.height=`${d}px`,e.style.overflowY=f>c?"auto":"hidden",e.style.maxHeight=`${c}px`}function i(){o()}const l=requestAnimationFrame(()=>{u(),o()});return e.addEventListener("input",i),{update(c){s(c),u(),o()},destroy(){cancelAnimationFrame(l),e.removeEventListener("input",i),e.style.overflowY="",e.style.maxHeight=""}}}const Ai="speech.settings.v2",I1={fast:{label:"Fast",autoSubmitDelayMs:0},normal:{label:"Normal",autoSubmitDelayMs:300},slow:{label:"Slow",autoSubmitDelayMs:800}},N1={stt:{autoSubmit:!0,autoSubmitDelayMs:0},updatedAt:null};function L1(e){return JSON.parse(JSON.stringify(e))}function rs(){return L1(N1)}function O1(e,t,n){return Math.min(Math.max(Math.round(e),t),n)}function $1(e,t){return typeof e=="boolean"?e:t}function R1(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Yo(e){const t=rs(),n={stt:{...t.stt},updatedAt:t.updatedAt};if(!e||typeof e!="object")return n;const r=e,s=r.stt??r.stt;if(s&&typeof s=="object"){const o=s;n.stt.autoSubmit=$1(o.autoSubmit??o.auto_submit,t.stt.autoSubmit);const i=R1(o.autoSubmitDelayMs??o.auto_submit_delay_ms);i!==null&&(n.stt.autoSubmitDelayMs=O1(i,0,1e4))}const u=r.updatedAt??r.updated_at;return n.updatedAt=typeof u=="string"&&u?u:null,n}function gl(){if(typeof window>"u"||!window.localStorage)return rs();try{const e=window.localStorage.getItem(Ai);if(!e)return rs();const t=JSON.parse(e);return Yo(t)}catch(e){return console.warn("Failed to read speech settings from storage",e),rs()}}function z1(e){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(Ai,JSON.stringify(e))}catch(t){console.warn("Failed to persist speech settings",t)}}function B1(){const e=gl(),t=Gt(e);function n(o){const i=Yo(o),l={...i,stt:{...i.stt},updatedAt:new Date().toISOString()};return t.set(l),z1(l),l}function r(o){const i=rt(t),l={...i,stt:{...i.stt},updatedAt:i.updatedAt};return o.stt&&(l.stt={...l.stt,...o.stt}),o.updatedAt!==void 0&&(l.updatedAt=o.updatedAt),n(l)}function s(){return n(rs())}function u(){const o=gl();t.set(o)}return typeof window<"u"&&window.addEventListener("storage",o=>{if(o.key===Ai)try{const i=o.newValue?JSON.parse(o.newValue):null,l=Yo(i);t.set(l)}catch(i){console.warn("Failed to synchronize speech settings from storage",i)}}),{subscribe:t.subscribe,save:n,update:r,reset:s,refresh:u,get current(){return rt(t)}}}const ka=B1(),Su=16e3,U1=4096,j1="audio-capture",q1=new URL("data:text/javascript;base64,LyoqCiAqIEF1ZGlvV29ya2xldCBwcm9jZXNzb3IgZm9yIGNhcHR1cmluZyBtaWNyb3Bob25lIGF1ZGlvLgogKiBTZW5kcyBGbG9hdDMyQXJyYXkgc2FtcGxlcyB0byB0aGUgbWFpbiB0aHJlYWQgZm9yIHByb2Nlc3NpbmcuCiAqLwpjbGFzcyBBdWRpb0NhcHR1cmVQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgc3VwZXIoKTsKICAgICAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7CiAgICAgICAgdGhpcy5wb3J0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4gewogICAgICAgICAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YSB8fCB7fTsKICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3BhdXNlJykgewogICAgICAgICAgICAgICAgdGhpcy5pc1BhdXNlZCA9IEJvb2xlYW4oZGF0YS52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIHByb2Nlc3MoaW5wdXRzKSB7CiAgICAgICAgaWYgKHRoaXMuaXNQYXVzZWQpIHJldHVybiB0cnVlOwogICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgICAgIGlmICghaW5wdXQgfHwgIWlucHV0WzBdIHx8IGlucHV0WzBdLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gQ29weSBzYW1wbGVzIGFuZCB0cmFuc2ZlciBidWZmZXIgdG8gbWFpbiB0aHJlYWQKICAgICAgICBjb25zdCBzYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheShpbnB1dFswXSk7CiAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHNhbXBsZXMsIFtzYW1wbGVzLmJ1ZmZlcl0pOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgpyZWdpc3RlclByb2Nlc3NvcignYXVkaW8tY2FwdHVyZScsIEF1ZGlvQ2FwdHVyZVByb2Nlc3Nvcik7Cg==",import.meta.url),H1={mode:"idle",recording:!1,connecting:!1,error:null,promptText:"",promptVersion:0,keepPromptSynced:!1,pendingSubmit:null,sttMode:"command",conversationActive:!1},mn=Gt({...H1});let hu=null,vu=null,Ms=null,ss=null,Er=0,$r="",mu=null,Jo=0;function ja(){mu&&(clearTimeout(mu),mu=null),Jo++}function Eu(e,t){mn.update(n=>({...n,promptText:e,promptVersion:n.promptVersion+1,keepPromptSynced:t?!0:n.keepPromptSynced}))}function nu(e){mn.update(t=>({...t,error:e,recording:!1,connecting:!1,keepPromptSynced:!1,mode:"idle"}))}function W1(){let e=window.location.origin;return e=e.replace(/^http/,"ws"),`${e}/api/stt/stream`}function V1(e,t,n){if(!e||e.length===0||!t||!n||t===n)return e;const r=t/n,s=Math.max(1,Math.round(e.length/r)),u=new Float32Array(s);for(let o=0;o<s;o++){const i=o*r,l=Math.floor(i),c=Math.min(l+1,e.length-1),f=i-l;u[o]=e[l]+(e[c]-e[l])*f}return u}function G1(e){const t=new Int16Array(e.length);for(let s=0;s<e.length;s++)t[s]=Math.max(-32768,Math.min(32767,Math.floor(e[s]*32768)));const n=new Uint8Array(t.buffer);let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return btoa(r)}function ho(e,t){if(!e||e.length===0||!ss||ss.readyState!==WebSocket.OPEN)return;const n=t!==Su?V1(e,t,Su):e,r=G1(n);ss.send(JSON.stringify({type:"audio_chunk",data:{audio:r}}))}function Z1(){if(ss)try{ss.close()}catch(e){console.warn("Failed to close WebSocket",e)}ss=null}function hd(){if(Ms)try{Ms.disconnect(),"port"in Ms&&(Ms.port.onmessage=null)}catch{}if(Ms=null,vu)try{vu.close()}catch{}if(vu=null,hu)try{hu.getTracks().forEach(e=>e.stop())}catch{}hu=null}function dr(e={}){hd(),Z1(),ja(),mn.update(t=>({...t,recording:!1,connecting:!1,keepPromptSynced:!1,pendingSubmit:e.submitText?{text:e.submitText}:null,mode:"idle",conversationActive:e.preserveConversation?t.conversationActive:!1}))}function K1(e){const t=e.trim(),r=rt(mn).sttMode==="conversation",s=ka.current,u=r?!0:s?.stt.autoSubmit??!0,o=r?0:Math.max(s?.stt.autoSubmitDelayMs??0,0);if(ja(),!t){dr({submitText:null,preserveConversation:r});return}if(u){if(o<=0){dr({submitText:t,preserveConversation:r});return}dr({preserveConversation:r}),Eu(t,!1);const i=++Jo;mu=setTimeout(()=>{i===Jo&&mn.update(l=>({...l,pendingSubmit:{text:t}}))},o)}else dr({preserveConversation:!1}),Eu(t,!1)}async function Y1(e,t,n,r){let s=null;if(e.audioWorklet)try{await e.audioWorklet.addModule(q1);const u=new AudioWorkletNode(e,j1);u.port.onmessage=o=>{if(r!==Er)return;const i=o.data,l=i&&i.samples?i.samples:i;l instanceof Float32Array?ho(l,n):l instanceof ArrayBuffer&&ho(new Float32Array(l),n)},s=u}catch(u){console.warn("AudioWorklet unavailable, falling back to ScriptProcessor:",u)}if(!s){const u=e.createScriptProcessor(U1,1,1);u.onaudioprocess=o=>{r===Er&&ho(o.inputBuffer.getChannelData(0),n)},s=u}t.connect(s),s.connect(e.destination),Ms=s}let ua=null,vo=!1;async function J1(){if(ua)return ua;if(vo)return await new Promise(e=>setTimeout(e,100)),ua;vo=!0;try{return ua=await ed(),ua}catch(e){return console.warn("Failed to fetch server STT settings",e),null}finally{vo=!1}}async function vd(e,t=!1){const n=rt(mn);if((n.connecting||n.recording)&&dr(),ja(),!ka.current){nu("Speech settings unavailable");return}const u=(await J1())?.mode==="conversation"?"conversation":"command",o=u==="conversation",i=++Er;$r="",mn.set({...n,mode:e,connecting:!0,recording:!1,error:null,keepPromptSynced:!0,pendingSubmit:null,sttMode:u,conversationActive:o||t});let l;try{l=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:Su,echoCancellation:!0,noiseSuppression:!0},video:!1})}catch(v){if(i!==Er)return;dr();const T=v instanceof Error?v.message:"Microphone access denied";nu(T);return}if(i!==Er){l.getTracks().forEach(v=>v.stop());return}hu=l;const c=new AudioContext({sampleRate:Su});vu=c;const f=c.sampleRate,d=c.createMediaStreamSource(l),g=W1(),h=new WebSocket(g);ss=h,h.addEventListener("open",()=>{}),h.addEventListener("message",v=>{if(i!==Er||typeof v.data!="string")return;let T;try{T=JSON.parse(v.data)}catch{return}const A=T.type;if(A==="stt_session_ready")Y1(c,d,f,i),mn.update(b=>({...b,connecting:!1,recording:!0,error:null,keepPromptSynced:!0}));else if(A==="transcript"){const b=String(T.text??""),C=T.is_final===!0;if(b)if(C)$r=$r?`${$r} ${b}`.trim():b,Eu($r,!0),K1($r);else{const w=$r?`${$r} ${b}`.trim():b;Eu(w,!0)}}else if(A==="error"){const b=String(T.message??"STT error");console.error("STT error:",b),nu(b),dr()}}),h.addEventListener("error",v=>{console.warn("WebSocket error",v),i===Er&&(nu("Connection error"),dr())}),h.addEventListener("close",()=>{i===Er&&(hd(),mn.update(v=>({...v,recording:!1,connecting:!1,keepPromptSynced:!1})))})}async function X1(){ja();const e=rt(mn);if(e.mode==="dictation"&&(e.recording||e.connecting)){dr(),mn.update(n=>({...n,mode:"idle",keepPromptSynced:!1,conversationActive:!1}));return}mn.update(n=>({...n,mode:"dictation"})),await vd("dictation")}async function _l(){const e=rt(mn);e.conversationActive&&(e.recording||e.connecting||(mn.update(t=>({...t,mode:"dictation"})),await vd("dictation",!0)))}function bl(){ja(),dr(),mn.update(e=>({...e,mode:"idle",conversationActive:!1}))}function yl(){const e=rt(mn);if(!e.pendingSubmit)return null;const t=e.pendingSubmit;return mn.update(n=>({...n,pendingSubmit:null})),t}const md={subscribe:mn.subscribe};function ma(e){return typeof e=="object"&&e!==null}function wr(e){if(typeof e!="string")return;const t=e.trim();return t||void 0}function xl(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=e.trim();if(!t)return;const n=Number.parseInt(t,10);if(Number.isFinite(n))return n}}function Is(e){if(!ma(e))return null;const t=wr(e.url);if(!t)return null;const n={url:t},r=wr(e.title)??wr(e.name)??wr(e.label);r&&(n.title=r);const s=wr(e.content)??wr(e.snippet)??wr(e.text)??wr(e.description);s&&(n.content=s);const u=xl(e.startIndex??e.start_index);u!==void 0&&(n.startIndex=u);const o=xl(e.endIndex??e.end_index);return o!==void 0&&(n.endIndex=o),n}function Q1(e){const t=wr(e.type),n=t?t.toLowerCase():null,r=[];"url_citation"in e&&r.push(e.url_citation),"urlCitation"in e&&r.push(e.urlCitation),"citation"in e&&r.push(e.citation),"payload"in e&&r.push(e.payload),"data"in e&&r.push(e.data);for(const s of r){const u=Is(s);if(u)return u}return n==="url_citation"||n==="url-citation"?Is(e):null}function Ss(e,t,n){const r=`${n.url}|${n.startIndex??""}|${n.endIndex??""}`;t.has(r)||(t.add(r),e.push(n))}function eh(e){const t=[],n=new Set,r=/\[([^\]]+)\]\(([^)]+)\)/g;let s;for(;(s=r.exec(e))!==null;){const u=s[1].trim(),o=s[2].trim();o&&!n.has(o)&&(n.add(o),t.push({url:o,title:u||void 0,startIndex:s.index,endIndex:s.index+s[0].length}))}return t}function Qr(...e){const t=[],n=new Set,r=new WeakSet,s=[];function u(o){if(o!=null){if(Array.isArray(o)||ma(o)){const i=o;if(r.has(i))return;r.add(i)}s.push(o)}}for(e.forEach(u);s.length>0;){const o=s.shift();if(o==null)continue;if(Array.isArray(o)){for(const c of o){if(c==null)continue;if(Array.isArray(c)||ma(c)){u(c);continue}const f=Is(c);f&&Ss(t,n,f)}continue}if(!ma(o)){const c=Is(o);c&&Ss(t,n,c);continue}const i=Q1(o);if(i)Ss(t,n,i);else{const c=Is(o);c&&Ss(t,n,c)}u(o.meta),u(o.metadata),u(o.annotations),u(o.citations),u(o.url_citation),u(o.urlCitation),u(o.payload),u(o.data),u(o.message);const l=o.content??o.text;if(typeof l=="string"&&l.length>0){const c=eh(l);for(const f of c)Ss(t,n,f)}for(const c of Object.values(o))if(c!=null)if(Array.isArray(c)||ma(c))u(c);else{const f=Is(c);f&&Ss(t,n,f)}}return t}function th(e,t){const n=e.trim(),r=[];n&&r.push({type:"text",text:n});for(const s of t)r.push({type:"image_url",image_url:{url:s.deliveryUrl},metadata:{attachment_id:s.id,display_url:s.displayUrl,mime_type:s.mimeType,size_bytes:s.sizeBytes,filename:s.metadata?.filename,session_id:s.sessionId,uploaded_at:s.uploadedAt,expires_at:s.expiresAt}});return r.length===1&&r[0].type==="text"?r[0].text:r.length>0?r:""}function Xo(e){if(typeof e=="string"){const s=e;return{parts:s?[{type:"text",text:s}]:[],text:s}}const t=[],n=[];for(const s of e){if(s?.type==="text"&&typeof s.text=="string"){const u=s.text;t.push({type:"text",text:u}),n.push(u);continue}if(s?.type==="image_url"&&"image_url"in s){const u=s.image_url;if(!u||typeof u.url!="string")continue;const o=s.metadata??{},i=typeof o.display_url=="string"&&o.display_url?o.display_url:u.url,l=typeof o.attachment_id=="string"&&o.attachment_id?o.attachment_id:void 0,c=typeof o.mime_type=="string"&&o.mime_type?o.mime_type:void 0,f=typeof o.size_bytes=="number"&&Number.isFinite(o.size_bytes)?Number(o.size_bytes):void 0,d=typeof o.filename=="string"&&o.filename?o.filename:void 0,g=typeof o.session_id=="string"&&o.session_id?o.session_id:void 0,h=typeof o.uploaded_at=="string"&&o.uploaded_at?o.uploaded_at:void 0,v=typeof o.expires_at=="string"&&o.expires_at?o.expires_at:null;t.push({type:"image",url:u.url,displayUrl:i,attachmentId:l,mimeType:c,sizeBytes:f,fileName:d,sessionId:g,uploadedAt:h,expiresAt:v,metadata:s.metadata??null})}}const r=n.join(`
`).trim();return{parts:t,text:r}}function Cu(e){if(e==null)return[];if(Array.isArray(e))return e.flatMap(t=>Cu(t));if(typeof e=="string")return e.length>0?[{text:e}]:[];if(typeof e=="object"){const t=e,n=t.text,r=t.type,s=[];if(typeof n=="string"&&n.length>0){const o={text:n};typeof r=="string"&&r.length>0&&(o.type=r),s.push(o)}const u=["segments","segment","messages","message","content","contents","parts","steps","items"];for(const o of u){const i=t[o];i!==void 0&&s.push(...Cu(i))}return s}return[]}function nh(e){if(!e||typeof e!="object")return{segments:[],hasPayload:!1};const t=e.choices;if(!Array.isArray(t))return{segments:[],hasPayload:!1};const n=[];let r=!1;for(const s of t){if(!s||typeof s!="object")continue;const u=s.delta;if(!(!u||typeof u!="object")&&"reasoning"in u){r=!0;const o=u.reasoning;n.push(...Cu(o))}}return{segments:n,hasPayload:r}}function rh(e,t){const n=t.filter(o=>o.text.length>0);if(n.length===0)return e??[];if(!e||e.length===0)return n;const r=e.map(o=>o.text).join(""),s=n.map(o=>o.text).join("");if(s.startsWith(r)){const o=s.slice(r.length);if(o.length===0)return e;const i=[...e],l=i.length-1,c=n[n.length-1];return i[l]={text:`${i[l].text}${o}`,type:c.type??i[l].type},i}const u=[...e];for(const o of n)u.some(l=>l.text===o.text&&l.type===o.type)||u.push(o);return u}function kl(e){return e?.reduce((t,n)=>t+n.text.length,0)??0}async function sh(e,t={}){const{signal:n,onSession:r,onMessageDelta:s,onMetadata:u,onToolEvent:o,onDone:i,onError:l}=t,{onNotice:c}=t;await hp(e,{signal:n,onSession:r,onDone:i,onError:l,onNotice:c,onChunk(f,d){const g=d?.event??"message";if(g==="message"){const{text:h,fragments:v}=ah(f),{segments:T,hasPayload:A}=nh(f);if(!h&&v.length===0&&T.length===0&&!A)return;s?.({text:h,fragments:v,reasoningSegments:T,hasReasoningPayload:A,chunk:f});return}if(g==="metadata"&&d?.data){try{const h=JSON.parse(d.data);u?.(h)}catch(h){console.warn("Failed to parse metadata payload",h,d.data)}return}if(g==="tool"&&d?.data)try{const h=JSON.parse(d.data);o?.(h)}catch(h){console.warn("Failed to parse tool payload",h,d.data)}}})}function ah(e){const t=[],n=[],r=e.choices??[];for(const s of r){const u=s.delta??{},o=u.content;if(typeof o=="string")o&&t.push(o);else if(Array.isArray(o))for(const l of o)l&&typeof l=="object"&&n.push(l);const i=u.images;if(Array.isArray(i))for(const l of i)l&&typeof l=="object"&&n.push(l)}return{text:t.join(""),fragments:n}}const mo={loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:null,lastSyncedModel:null,lastSavedAt:null,version:0};function uh(e){if(!e)return;const t={};for(const[n,r]of Object.entries(e))if(r!=null&&!(typeof r=="string"&&r.trim()==="")){if(Array.isArray(r)){if(r.length===0)continue;t[n]=r;continue}if(typeof r=="object"){if(Object.entries(r).length===0)continue;t[n]=r;continue}t[n]=r}return Object.keys(t).length>0?t:void 0}function oh(){const e=Gt({...mo});let t=0;async function n(){const l=rt(e);if(!l.dirty||!l.data)return l.dirty&&e.update(g=>({...g,dirty:!1})),!0;const c=l.version,f={model:l.data.model,provider:l.data.provider??null};"supports_tools"in l.data&&(f.supports_tools=l.data.supports_tools===void 0?null:l.data.supports_tools);const d=uh(l.data.parameters);d?f.parameters=d:f.parameters=null,e.update(g=>({...g,saving:!0,saveError:null}));try{const g=await il(f);return e.update(h=>{const v=Date.now();return h.version!==c?{...h,saving:!1,saveError:null,lastSavedAt:v,lastSyncedModel:g.model}:{...h,saving:!1,saveError:null,dirty:!1,data:g,lastSyncedModel:g.model,lastSavedAt:v}}),!0}catch(g){const h=g instanceof Error?g.message:"Failed to save model settings.";return e.update(v=>({...v,saving:!1,saveError:h})),!1}}async function r(l){const c=++t;e.set({...mo,loading:!0});try{const f=await J0();let d=f;if(l&&f.model!==l&&(d=await il({model:l,parameters:null,provider:null})),c!==t)return;e.set({loading:!1,saving:!1,error:null,saveError:null,dirty:!1,data:d,lastSyncedModel:d.model,lastSavedAt:Date.now(),version:0})}catch(f){if(c!==t)return;const d=f instanceof Error?f.message:"Failed to load model settings.";e.set({...mo,error:d})}}function s(l,c){e.update(f=>{if(!f.data)return f;const d={...f.data.parameters??{}};c==null?delete d[l]:d[l]=c;const g={...f.data,parameters:Object.keys(d).length>0?d:null};return{...f,data:g,dirty:!0,saveError:null,version:f.version+1}})}function u(l){e.update(c=>{if(!c.data||c.data.model===l)return c;const f={...c.data,model:l};return{...c,data:f,dirty:!0,saveError:null,version:c.version+1}})}function o(){e.update(l=>{if(!l.data)return l;const c={...l.data,parameters:null};return{...l,data:c,dirty:!0,saveError:null,version:l.version+1}})}function i(){e.update(l=>({...l,error:null,saveError:null}))}return{subscribe:e.subscribe,load:r,updateParameter:s,setModel:u,resetToDefaults:o,clearErrors:i,flushSave:n}}const rn=oh();function ih(e){return typeof e=="object"&&e!==null}const go={messages:[],sessionId:null,isStreaming:!1,error:null,selectedModel:"openrouter/auto",isSaved:!1};function Es(e){let t=null;const n=typeof globalThis<"u"?globalThis.crypto:void 0;if(n?.randomUUID)try{t=n.randomUUID()}catch(r){console.warn("Failed to generate UUID via crypto.randomUUID",r)}if(!t&&n?.getRandomValues){const r=new Uint32Array(4);n.getRandomValues(r),t=Array.from(r,s=>s.toString(16).padStart(8,"0")).join("")}return t||(t=`${Date.now().toString(36)}${Math.random().toString(36).slice(2,12)}`),`${e}_${t.replace(/-/g,"")}`}function gd(e,t){const n=[],r=new Set;for(const s of e){if(s.type!=="image")continue;const u=s.attachmentId??s.displayUrl??s.url;!u||r.has(u)||(r.add(u),n.push({id:s.attachmentId??u,sessionId:s.sessionId??t??"",mimeType:s.mimeType??"image/png",sizeBytes:s.sizeBytes??0,displayUrl:s.displayUrl||s.url,deliveryUrl:s.displayUrl||s.url,uploadedAt:s.uploadedAt??new Date().toISOString(),expiresAt:s.expiresAt??null,metadata:s.metadata??null}))}return n}function lh(e,t,n,r,s){if(!(Array.isArray(e)||r.length>0)){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const o=Array.isArray(e)?[...e]:[];if(!Array.isArray(e)){const c=typeof e=="string"?e:t;c&&o.push({type:"text",text:c})}if(r.length>0)o.push(...r);else if(n){const c=o[o.length-1];c&&c.type==="text"&&typeof c.text=="string"?c.text+=n:o.push({type:"text",text:n})}if(o.length===0){const f=`${(typeof e=="string"?e:t)??""}${n}`;return{content:f,text:f,attachments:[]}}const i=Xo(o),l=gd(i.parts,s);return{content:o,text:i.text,attachments:l}}function wl(e){const t=[],n=new Set,r=e.details?.serverMessageId;if(typeof r=="number"){const s=String(r);t.push(s),n.add(s)}return e.id&&!n.has(e.id)&&t.push(e.id),t}function ch(e,t,n,r,s){const u={model:e.selectedModel,session_id:e.sessionId??void 0,messages:[{role:"user",content:t,client_message_id:r}],metadata:{client_assistant_message_id:s,client_parent_message_id:r}};if(n.enabled){const o={id:"web"};n.engine&&(o.engine=n.engine),n.maxResults!==null&&n.maxResults!==void 0&&(o.max_results=n.maxResults);const i=n.searchPrompt.trim();i&&(o.search_prompt=i),u.plugins=[o],n.contextSize&&(u.web_search_options={search_context_size:n.contextSize})}return u}function dh(){const e=Gt({...go});let t=null;function n(...A){for(const b of A)if(typeof b=="string"&&b)return b;return null}async function r(A){const b=A.text??"",C=(A.attachments??[]).map(O=>({...O})),w=b.trim(),y=rt(e);if(y.isStreaming&&t?.abort(),!w&&C.length===0)return;const E=Es("user"),k=Es("assistant"),D=th(w,C),W=Xo(D),U=C,F=nd.current,I=ch(y,D,F,E,k),Y=new Date().toISOString();e.update(O=>({...O,messages:[...O.messages,{id:E,role:"user",content:D,text:W.text,attachments:U,createdAt:Y,createdAtUtc:Y},{id:k,role:"assistant",content:"",text:"",attachments:[],pending:!0,createdAt:null,createdAtUtc:null,details:F.enabled?{webSearchConfig:{engine:F.engine,maxResults:F.maxResults,contextSize:F.contextSize,searchPrompt:F.searchPrompt}}:void 0}],isStreaming:!0,error:null}));const G=new AbortController;t=G;const ie=new Map;try{await sh(I,{signal:G.signal,onSession(O){e.update(ee=>({...ee,sessionId:O}))},onNotice(O){if(console.log("[NOTICE] Received notice:",O),!O||typeof O!="object"){console.warn("[NOTICE] Invalid payload:",O);return}const ee=O.type;console.log("[NOTICE] Notice type:",ee),console.log("[NOTICE] No handler for notice type:",ee)},onMessageDelta({text:O,fragments:ee,reasoningSegments:le,hasReasoningPayload:te,chunk:J}){e.update(N=>{const q=N.messages.map(ae=>{if(ae.id!==k)return ae;const ke=lh(ae.content,ae.text,O,ee,N.sessionId),Q=ke.attachments.length>0?ke.attachments:ae.attachments,K={...ae,content:ke.content,text:ke.text,attachments:Q??[]};if(le.length>0||te){const me=ae.details??{},ne={...me,reasoningStatus:"streaming"};le.length>0&&(ne.reasoning=rh(me.reasoning,le)),K.details=ne}const Z=J?Qr(J):[];if(Z.length>0){let me=K.details;me||(me=ae.details?{...ae.details}:{});const ne=Qr(me?.citations??null,Z);ne.length>0&&(me.citations=ne,K.details=me)}return K});return{...N,messages:q}})},onMetadata(O){e.update(ee=>{const le=ee.messages.map(te=>{if(te.id!==k)return te;const J=te.details??{},N=Cu(O.reasoning),q=N.length>0;let ae=J.reasoning;q&&(ae=kl(N)>=kl(J.reasoning)?N:J.reasoning??N);const ke=q?te.pending?"streaming":"complete":J.reasoningStatus??null,Q=typeof O.message_id=="number"?O.message_id:J.serverMessageId??null;let K=J.meta??null,Z=J.citations??null;if(O.meta===null)K=null,Z=null;else if(ih(O.meta)){K=O.meta;const xe=Qr(O.meta,O);xe.length>0&&(Z=xe)}else{const xe=Qr(O);xe.length>0&&(Z=xe)}const me=n(O.created_at,O.created_at_utc,te.createdAt??null),ne=n(O.created_at_utc,te.createdAtUtc??null);return{...te,details:{...J,model:typeof O.model=="string"?O.model:J.model??null,finishReason:typeof O.finish_reason=="string"?O.finish_reason:J.finishReason??null,reasoning:ae,reasoningStatus:ke,usage:O.usage&&typeof O.usage=="object"?O.usage:J.usage??null,routing:O.routing&&typeof O.routing=="object"?O.routing:J.routing??null,toolCalls:Array.isArray(O.tool_calls)?O.tool_calls:J.toolCalls??null,generationId:typeof O.generation_id=="string"?O.generation_id:J.generationId??null,serverMessageId:Q,meta:K,citations:Z},createdAt:me,createdAtUtc:ne}});return{...ee,messages:le}})},onToolEvent(O){const ee=typeof O.call_id=="string"?O.call_id:Es("tool"),le=typeof O.status=="string"?O.status:"started",te=typeof O.name=="string"?O.name:"tool",J=O.result,N=typeof J=="string"?J:J&&typeof J=="object"?JSON.stringify(J):null,q=typeof O.message_id=="number"?O.message_id:null,ae=O.content,ke=rt(e);let Q,K,Z=[];if(Array.isArray(ae)){const ne=Xo(ae);Z=gd(ne.parts,ke.sessionId),Q=ae,K=ne.text}else le==="started"?(Q=`Running ${te}â¦`,K=`Running ${te}â¦`):(Q=N??`Tool ${te} responded.`,K=N??`Tool ${te} responded.`);let me=ie.get(ee);if(me)e.update(ne=>{const xe=ne.messages.map(X=>{if(X.id!==me)return X;const Le={...X.details??{},toolName:te,toolStatus:le,toolResult:N??X.details?.toolResult??null,serverMessageId:q??X.details?.serverMessageId??null},Re=n(O.created_at,O.created_at_utc,X.createdAt??null),et=n(O.created_at_utc,X.createdAtUtc??null);return{...X,content:Q,text:K,attachments:Z.length>0?Z:X.attachments??[],pending:le==="started",details:Le,createdAt:Re,createdAtUtc:et??Re??X.createdAtUtc??null}});return{...ne,messages:xe}});else{me=Es("tool"),ie.set(ee,me);const ne=new Date().toISOString(),xe=n(O.created_at,O.created_at_utc,ne),X=n(O.created_at_utc,xe??ne);e.update(Le=>({...Le,messages:[...Le.messages,{id:me,role:"tool",content:Q,text:K,attachments:Z,pending:le==="started",details:{toolName:te,toolStatus:le,toolResult:N??null,serverMessageId:q},createdAt:xe,createdAtUtc:X}]}))}},onDone(){e.update(O=>{const ee=O.messages.map(le=>{if(le.id!==k)return le;const te=le.details?{...le.details,reasoningStatus:le.details.reasoning?"complete":le.details.reasoningStatus??null}:void 0,J=new Date().toISOString(),N=le.createdAt??J;return{...le,pending:!1,details:te,createdAt:N,createdAtUtc:le.createdAtUtc??N}});return{...O,isStreaming:!1,messages:ee}})},onError(O){console.error("Chat stream error",O),e.update(ee=>({...ee,isStreaming:!1,error:O.message??"Unknown error",messages:ee.messages.filter(le=>le.id!==k&&!(le.role==="tool"&&le.pending))}))}})}catch(O){if(O instanceof DOMException&&O.name==="AbortError")return;const ee=O instanceof Error?O.message:String(O);e.update(le=>({...le,isStreaming:!1,error:ee,messages:le.messages.filter(te=>te.id!==k&&!(te.role==="tool"&&te.pending))}))}finally{t=null}}function s(){t&&(t.abort(),t=null,e.update(A=>{const b=A.messages.filter(C=>!(C.role==="assistant"&&C.pending&&!C.text||C.role==="tool"&&C.pending));return{...A,isStreaming:!1,messages:b}}))}function u(){t?.abort(),t=null,e.update(A=>({...go,selectedModel:A.selectedModel}))}async function o(){const A=rt(e);if(!A.sessionId){const C=Es("session");e.update(w=>({...w,sessionId:C,isSaved:!0}));try{await cl(C)}catch(w){console.error("Failed to save conversation",w),e.update(y=>({...y,isSaved:!1}))}return}const b=!A.isSaved;e.update(C=>({...C,isSaved:b}));try{b?await cl(A.sessionId):await Cp(A.sessionId)}catch(C){console.error("Failed to toggle save state",C),e.update(w=>({...w,isSaved:!b}))}}async function i(A){t?.abort(),t=null;try{const b=await Ep(A),C=b.messages.filter(w=>w.role!=="system").map(w=>{const y=w.content??"",E=typeof y=="string"?y:"";return{id:w.client_message_id||`db-${w.message_id??Math.random()}`,role:w.role,content:y,text:E,attachments:[],pending:!1,createdAt:w.created_at??null,createdAtUtc:w.created_at_utc??null,details:w.tool_call_id?{toolName:w.name??void 0}:void 0}});e.update(w=>({...go,selectedModel:w.selectedModel,sessionId:A,messages:C,isSaved:b.metadata.saved}))}catch(b){console.error("Failed to load session",b),e.update(C=>({...C,error:b instanceof Error?b.message:"Failed to load conversation"}))}}function l(A,b){const C=A.messages.findIndex(k=>k.id===b);if(C===-1)return A;const w=A.messages.slice(),y=[],[E]=w.splice(C,1);if(!E)return A;if(E.role==="assistant")for(y.push(E.id);C<w.length&&w[C].role==="tool";)w.splice(C,1);else if(E.role==="user")for(;C<w.length&&w[C].role!=="user"&&w[C].role!=="system";){const[k]=w.splice(C,1);k?.role==="assistant"&&k.id&&y.push(k.id)}return{...A,messages:w}}async function c(A,b){let C=null;const w=new Set;for(const y of b){if(y.role==="assistant"||y.role==="tool")continue;const E=wl(y);let k=!1;for(const D of E)if(!(!D||w.has(D))){w.add(D);try{await ol(A,D),k=!0;break}catch(W){if(W instanceof nr&&W.status===404)continue;C||(C=W instanceof Error?W.message:"Failed to delete previous message.");break}}}return C}async function f(A){const b=rt(e);if(b.isStreaming)return;const C=b.messages.find(w=>w.id===A);if(C){if(b.sessionId){const w=wl(C);let y=null;for(const E of w)try{await ol(b.sessionId,E),y=null;break}catch(k){if(k instanceof nr&&k.status===404)continue;y=k instanceof Error?k.message:"Failed to delete message.";break}y&&e.update(E=>({...E,error:y}))}e.update(w=>l(w,A))}}async function d(A){const b=rt(e),C=b.messages.findIndex(k=>k.id===A);if(C===-1)return;const w=b.messages[C];if(w.role!=="user")return;b.isStreaming&&(t?.abort(),t=null);const y=b.messages.slice(C),E=b.messages.slice(0,C);if(e.update(k=>({...k,messages:E,isStreaming:!1,error:null})),b.sessionId){const k=await c(b.sessionId,y);k&&e.update(D=>({...D,error:k}))}await r({text:w.text,attachments:(w.attachments??[]).map(k=>({...k}))})}async function g(A,b){const C=b.trim();if(!C)return;const w=rt(e),y=w.messages.findIndex(W=>W.id===A);if(y===-1)return;const E=w.messages[y];if(E.role!=="user")return;w.isStreaming&&(t?.abort(),t=null);const k=w.messages.slice(y),D=w.messages.slice(0,y);if(e.update(W=>({...W,messages:D,isStreaming:!1,error:null})),w.sessionId){const W=await c(w.sessionId,k);W&&e.update(U=>({...U,error:W}))}await r({text:C,attachments:(E.attachments??[]).map(W=>({...W}))})}function h(){e.update(A=>({...A,error:null}))}function v(A){e.update(b=>({...b,selectedModel:A}));try{rn.clearErrors(),rn.load(A)}catch{}}function T(){const A=rt(e);if(A.sessionId)return A.sessionId;const b=Es("session");return e.update(C=>({...C,sessionId:b})),b}return{subscribe:e.subscribe,sendMessage:r,cancelStream:s,clearConversation:u,deleteMessage:f,retryMessage:d,editMessage:g,clearError:h,setModel:v,ensureSessionId:T,toggleSaved:o,loadSession:i}}const Ta=dh();var fh=M('<span class="chip-status svelte-1ct3ltt">Uploadingâ¦</span>'),ph=M('<span class="chip-status svelte-1ct3ltt"> </span>'),hh=M('<div><img alt="Attachment preview" loading="lazy" class="svelte-1ct3ltt"/> <!> <!> <button type="button" class="remove-attachment svelte-1ct3ltt" aria-label="Remove image">Ã</button></div>'),vh=M('<div class="attachment-strip svelte-1ct3ltt"></div>'),mh=M('<div class="composer-error svelte-1ct3ltt" role="alert"> </div>'),gh=M('<div class="composer-error voice svelte-1ct3ltt" role="alert"> </div>'),_h=M('<button type="button" class="icon-button leading svelte-1ct3ltt" aria-label="Attach image"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 2v14M2 9h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button>'),bh=M('<button type="button" class="stop-inline svelte-1ct3ltt"><span aria-hidden="true" class="stop-indicator svelte-1ct3ltt"></span> Stop</button>'),yh=M('<button type="button" class="icon-button leading svelte-1ct3ltt" aria-label="Attach image"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 2v14M2 9h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button>'),xh=M('<form class="composer svelte-1ct3ltt"><div class="composer-content svelte-1ct3ltt"><!> <!> <!> <div><!> <input class="sr-only svelte-1ct3ltt" type="file" accept="image/png,image/jpeg,image/webp,image/gif" multiple/> <textarea rows="1" class="svelte-1ct3ltt"></textarea> <div class="composer-actions svelte-1ct3ltt"><!> <!> <button type="button" class="icon-button svelte-1ct3ltt" aria-label="Start dictation" title="Start dictation"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 3a2 2 0 0 1 2 2v4a2 2 0 1 1-4 0V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.5"></path><path d="M5 8.5a4 4 0 0 0 8 0M9 12.5V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></button> <button type="submit" class="send-button svelte-1ct3ltt" title="Send message"><span class="send-label svelte-1ct3ltt">Send</span> <!></button></div></div></div></form>');function kh(e,t){wt(t,!1);const n=()=>yt(md,"$speechState",r),[r,s]=rr(),u=$(),o=$(),i=$(),l=$(),c=$(),f=$(),d=$(),g=$();let h=re(t,"prompt",12,""),v=re(t,"isStreaming",8,!1),T=re(t,"presetAttachments",24,()=>[]),A=re(t,"pwaMode",8,!1);const b=Jt(),C=new Set(["image/png","image/jpeg","image/webp","image/gif"]),w=10*1024*1024,y=4;let E=$([]),k=$(null),D=$(null),W=$(null),U=$(null);function F(){return globalThis.crypto?.randomUUID?`attachment_${globalThis.crypto.randomUUID().replace(/-/g,"")}`:`attachment_${Date.now().toString(36)}${Math.random().toString(36).slice(2,10)}`}function I(B){if(!(!B||typeof B!="string")&&B.startsWith("blob:"))try{URL.revokeObjectURL(B)}catch{}}function Y(B){if(q(),!B||B.length===0){_(k,null);return}const ue=[];for(const ve of B){if(!ve)continue;const Me=ve.displayUrl??ve.deliveryUrl??null;Me&&ue.push({id:ve.id??F(),file:null,previewUrl:Me,status:"ready",resource:{...ve,metadata:ve.metadata?{...ve.metadata}:null}})}_(E,ue),_(k,null)}function G(){if(v())return;const B=h().trim();if(a(E).some(Be=>Be.status==="uploading")){_(k,"Please wait for uploads to finish.");return}if(a(E).some(Be=>Be.status==="error")){_(k,"Remove failed uploads before sending.");return}const Me=a(E).filter(Be=>Be.status==="ready"&&Be.resource).map(Be=>Be.resource);!B&&Me.length===0||(b("submit",{text:B,attachments:Me}),h(""),_(k,null),q())}function ie(B){B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),G())}function O(){b("cancel")}function ee(){v()&&n().mode!=="dictation"||n().connecting&&!n().recording&&n().mode!=="dictation"||b("startDictation")}function le(){v()||(_(k,null),a(D)?.click())}function te(B){const ue=B.target,ve=ue.files?Array.from(ue.files):[];if(ue.value="",!ve.length)return;const Me=y-a(E).length;if(Me<=0){_(k,`You can attach up to ${y} images.`);return}const Be=Ta.ensureSessionId(),Ne=ve.slice(0,Me);ve.length>Me&&_(k,`Only ${y} images allowed per message.`);for(const Ze of Ne){if(!C.has(Ze.type)){_(k,"Unsupported image format.");continue}if(Ze.size>w){_(k,"Images must be 10 MB or less.");continue}const He=URL.createObjectURL(Ze),Xe={id:F(),file:Ze,previewUrl:He,status:"uploading"};_(E,[...a(E),Xe]),J(Xe,Be)}}async function J(B,ue){if(B.file)try{const{attachment:ve}=await fp(B.file,ue);_(E,a(E).map(Me=>Me.id===B.id?{...Me,status:"ready",resource:ve}:Me))}catch(ve){const Me=ve instanceof Error?ve.message:"Failed to upload image.";_(E,a(E).map(Be=>Be.id===B.id?{...Be,status:"error",error:Me}:Be))}}function N(B){_(E,a(E).filter(ue=>ue.id===B?(I(ue.previewUrl),!1):!0)),a(E).length||_(k,null)}function q(){a(E).forEach(B=>{I(B.previewUrl)}),_(E,[])}Us(()=>{q()}),ye(()=>R(h()),()=>{_(u,h().trim())}),ye(()=>a(E),()=>{_(o,a(E).some(B=>B.status==="uploading"))}),ye(()=>a(E),()=>{_(i,a(E).some(B=>B.status==="error"))}),ye(()=>a(E),()=>{_(l,a(E).some(B=>B.status==="ready"))}),ye(()=>(R(v()),a(o),a(i),a(u),a(l)),()=>{_(c,v()||a(o)||a(i)||!a(u)&&!a(l))}),ye(()=>(R(T()),a(U)),()=>{T()!==a(U)&&(Y(T()),_(U,T()))}),ye(()=>n(),()=>{_(f,n().mode==="dictation"&&(n().recording||n().connecting))}),ye(()=>n(),()=>{_(d,n().connecting&&!n().recording)}),ye(()=>n(),()=>{_(g,n().error)}),Yt(),Ct();var ae=xh(),ke=m(ae),Q=m(ke);{var K=B=>{var ue=vh();Tt(ue,5,()=>a(E),ve=>ve.id,(ve,Me)=>{var Be=hh();let Ne;var Ze=m(Be),He=x(Ze,2);{var Xe=lt=>{var Et=fh();S(lt,Et)};L(He,lt=>{a(Me),p(()=>a(Me).status==="uploading")&&lt(Xe)})}var ot=x(He,2);{var Qe=lt=>{var Et=ph(),Zt=m(Et);j(()=>H(Zt,(a(Me),p(()=>a(Me).error??"Upload failed.")))),S(lt,Et)};L(ot,lt=>{a(Me),p(()=>a(Me).status==="error")&&lt(Qe)})}var bt=x(ot,2);j(lt=>{Ne=Pt(Be,1,"attachment-chip svelte-1ct3ltt",null,Ne,lt),oe(Ze,"src",(a(Me),p(()=>a(Me).previewUrl??a(Me).resource?.displayUrl??a(Me).resource?.deliveryUrl??"")))},[()=>({uploading:a(Me).status==="uploading",error:a(Me).status==="error"})]),z("click",bt,()=>N(a(Me).id)),S(ve,Be)}),S(B,ue)};L(Q,B=>{a(E),p(()=>a(E).length)&&B(K)})}var Z=x(Q,2);{var me=B=>{var ue=mh(),ve=m(ue);j(()=>H(ve,a(k))),S(B,ue)};L(Z,B=>{a(k)&&B(me)})}var ne=x(Z,2);{var xe=B=>{var ue=gh(),ve=m(ue);j(()=>H(ve,a(g))),S(B,ue)};L(ne,B=>{a(g)&&B(xe)})}var X=x(ne,2);let Le;var Re=m(X);{var et=B=>{var ue=_h();j(()=>ue.disabled=(R(v()),a(E),p(()=>v()||a(E).length>=y))),z("click",ue,le),S(B,ue)};L(Re,B=>{A()||B(et)})}var Ge=x(Re,2);Dr(Ge,B=>_(D,B),()=>a(D));var Ae=x(Ge,2);Dr(Ae,B=>_(W,B),()=>a(W)),Wn(()=>cr(Ae,h)),Wn(()=>z("keydown",Ae,ie)),Wn(()=>z("focus",Ae,()=>{b("inputFocus")})),ls(Ae,(B,ue)=>P1?.(B,ue),h);var Ke=x(Ae,2),ge=m(Ke);{var Pe=B=>{var ue=bh();z("click",ue,O),S(B,ue)};L(ge,B=>{v()&&B(Pe)})}var ze=x(ge,2);{var je=B=>{var ue=yh();j(()=>ue.disabled=(R(v()),a(E),p(()=>v()||a(E).length>=y))),z("click",ue,le),S(B,ue)};L(ze,B=>{A()&&B(je)})}var Je=x(ze,2),Dt=x(Je,2),de=x(m(Dt),2);D1(de,{size:16,"aria-hidden":"true","stroke-width":2}),j(B=>{Le=Pt(X,1,"input-shell svelte-1ct3ltt",null,Le,B),oe(Ae,"placeholder",v()?"Waiting for responseâ¦":"Type hereâ¦"),oe(Ae,"aria-disabled",v()),Je.disabled=v()&&!a(f)||a(d)&&!a(f),oe(Je,"aria-pressed",a(f)?"true":"false"),oe(Je,"data-active",a(f)?"true":"false"),Dt.disabled=a(c)},[()=>({"pwa-layout":A()})]),z("change",Ge,te),z("click",Je,ee),z("submit",ae,yi(G)),S(e,ae),St(),s()}var wh=M('<div><button type="button" class="model-settings-backdrop"></button> <div role="dialog" aria-modal="true" tabindex="-1"><header class="model-settings-header"><div class="model-settings-heading"><!></div> <div class="model-settings-actions"><!> <button type="button" class="btn btn-ghost btn-small">Close</button></div></header> <section><!></section> <!></div></div>');function Pr(e,t){wt(t,!1);let n=re(t,"open",8,!1),r=re(t,"labelledBy",8,null),s=re(t,"modalClass",8,""),u=re(t,"bodyClass",8,""),o=re(t,"layerClass",8,""),i=re(t,"closeLabel",8,"Close modal"),l=re(t,"closeOnBackdrop",8,!0),c=re(t,"focusOnOpen",8,!0),f=re(t,"closeDisabled",8,!1);const d=Jt();let g=$(null),h=$(!1);function v(y){!l()||f()||y.target===y.currentTarget&&d("close")}function T(){f()||d("close")}function A(y){!n()||f()||y.key==="Escape"&&(y.preventDefault(),d("close"))}ye(()=>(R(n()),a(h),R(c()),a(g)),()=>{n()&&!a(h)?(_(h,!0),c()&&a(g)&&a(g).focus()):!n()&&a(h)&&_(h,!1)}),Yt(),Ct();var b=Ee();z("keydown",Ca,A);var C=ce(b);{var w=y=>{var E=wh(),k=m(E),D=x(k,2),W=m(D),U=m(W),F=m(U);wn(F,t,"heading",{});var I=x(U,2),Y=m(I);wn(Y,t,"actions",{});var G=x(Y,2),ie=x(W,2),O=m(ie);wn(O,t,"default",{});var ee=x(ie,2);wn(ee,t,"footer",{}),Dr(D,le=>_(g,le),()=>a(g)),j((le,te,J)=>{Pt(E,1,le),oe(k,"aria-label",i()),Pt(D,1,te),oe(D,"aria-labelledby",r()||void 0),oe(G,"aria-label",i()),G.disabled=f(),Pt(ie,1,J)},[()=>fu((R(o()),p(()=>`model-settings-layer ${o()}`.trim()))),()=>fu((R(s()),p(()=>`model-settings-modal ${s()}`.trim()))),()=>fu((R(u()),p(()=>`model-settings-body ${u()}`.trim())))]),z("click",k,v),z("click",G,T),S(y,E)};L(C,y=>{n()&&y(w)})}S(e,b),St()}var Sh=M('<p class="status">Loadingâ¦</p>'),Eh=M('<p class="status error"> </p>'),Ch=M('<pre class="svelte-1uwhn5q"> </pre>'),Ah=M('<div class="generation-detail-row svelte-1uwhn5q"><dt class="svelte-1uwhn5q"> </dt> <dd class="svelte-1uwhn5q"><!></dd></div>'),Th=M('<dl class="generation-modal-details svelte-1uwhn5q"></dl>'),Dh=M('<p class="status">No details available.</p>'),Mh=M('<p class="model-settings-subtitle"> </p>'),Fh=M('<h2 id="generation-modal-title">Generation details</h2> <!>',1);function Ph(e,t){wt(t,!1);const n=Jt();let r=re(t,"open",8,!1),s=re(t,"generationId",8,null),u=re(t,"loading",8,!1),o=re(t,"error",8,null),i=re(t,"data",8,null),l=re(t,"fields",8,td),c=$([]);function f(){n("close")}ye(()=>(R(i()),R(l()),dl),()=>{_(c,i()?l().map(v=>({field:v,display:dl(i()?.[v.key])})):[])}),Yt(),Ct();var d=Ee(),g=ce(d);{var h=v=>{Pr(v,{get open(){return r()},labelledBy:"generation-modal-title",modalClass:"generation-modal",closeLabel:"Close generation details",$$events:{close:f},children:(T,A)=>{var b=Ee(),C=ce(b);{var w=E=>{var k=Sh();S(E,k)},y=E=>{var k=Ee(),D=ce(k);{var W=F=>{var I=Eh(),Y=m(I);j(()=>H(Y,o())),S(F,I)},U=F=>{var I=Ee(),Y=ce(I);{var G=O=>{var ee=Th();Tt(ee,5,()=>a(c),le=>le.field.key,(le,te)=>{var J=Ah(),N=m(J),q=m(N),ae=x(N,2),ke=m(ae);{var Q=Z=>{var me=Ch(),ne=m(me);j(()=>H(ne,(a(te),p(()=>a(te).display.text)))),S(Z,me)},K=Z=>{var me=un();j(()=>H(me,(a(te),p(()=>a(te).display.text)))),S(Z,me)};L(ke,Z=>{a(te),p(()=>a(te).display.isMultiline)?Z(Q):Z(K,!1)})}j(()=>H(q,(a(te),p(()=>a(te).field.label)))),S(le,J)}),S(O,ee)},ie=O=>{var ee=Dh();S(O,ee)};L(Y,O=>{i()?O(G):O(ie,!1)},!0)}S(F,I)};L(D,F=>{o()?F(W):F(U,!1)},!0)}S(E,k)};L(C,E=>{u()?E(w):E(y,!1)})}S(T,b)},$$slots:{default:!0,heading:(T,A)=>{var b=Fh(),C=x(ce(b),2);{var w=y=>{var E=Mh(),k=m(E);j(()=>H(k,`ID: ${s()??""}`)),S(y,E)};L(C,y=>{s()&&y(w)})}S(T,b)}}})};L(g,v=>{r()&&v(h)})}S(e,d),St()}var Ih=M('<span class="editor-status svelte-hszu4t">Updated</span>'),Nh=M('<form class="message-editor svelte-hszu4t"><div class="editor-shell svelte-hszu4t"><div class="editor-header svelte-hszu4t"><span>Edit message</span> <!></div> <textarea rows="3" placeholder="Update your message..." class="svelte-hszu4t"></textarea> <div class="editor-actions svelte-hszu4t"><button type="button" class="button secondary svelte-hszu4t">Cancel</button> <button type="submit" class="button primary svelte-hszu4t"><!></button></div></div></form>');function Lh(e,t){wt(t,!1);const n=$(),r=$(),s=$();let u=re(t,"value",12,""),o=re(t,"originalValue",8,""),i=re(t,"saving",8,!1),l=re(t,"disabled",8,!1);const c=Jt();let f=$(null);Ba(()=>{a(f)&&(a(f).focus(),a(f).setSelectionRange(0,a(f).value.length))});function d(){a(r)&&c("submit",{text:a(n)})}function g(){i()||c("cancel")}function h(F){F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),d())}ye(()=>R(u()),()=>{_(n,u().trim())}),ye(()=>(a(n),R(i()),R(l())),()=>{_(r,!!a(n)&&!i()&&!l())}),ye(()=>(a(n),R(o())),()=>{_(s,a(n)!==o().trim())}),Yt(),Ct();var v=Nh(),T=m(v),A=m(T),b=x(m(A),2);{var C=F=>{var I=Ih();S(F,I)};L(b,F=>{a(s)&&F(C)})}var w=x(A,2);Dr(w,F=>_(f,F),()=>a(f));var y=x(w,2),E=m(y),k=x(E,2),D=m(k);{var W=F=>{var I=un("Sendingâ¦");S(F,I)},U=F=>{var I=un("Save & Send");S(F,I)};L(D,F=>{i()?F(W):F(U,!1)})}j(()=>{w.disabled=i()||l(),E.disabled=i(),k.disabled=!a(r)}),cr(w,u),z("keydown",w,h),z("click",E,g),z("submit",v,yi(d)),S(e,v),St()}const Sl={open:!1,messageId:null,citations:[]};function _d(){const{subscribe:e,set:t,update:n}=Gt(Sl);function r(u,o){t({open:!0,messageId:u,citations:o})}function s(){t(Sl)}return{subscribe:e,openWithCitations:r,close:s}}_d();const _o={open:!1,messageId:null,segments:[],status:null};function Oh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n],s=t[n];if(r.text!==s.text||r.type!==s.type)return!1}return!0}function $h(){const{subscribe:e,set:t,update:n}=Gt(_o);function r(i,l,c){t({open:!0,messageId:i,segments:l??[],status:c??null})}function s(i){r(i.id,i.details?.reasoning,i.details?.reasoningStatus)}function u(){t(_o)}function o(i){n(l=>{if(!l.open||!l.messageId)return l;const c=i.find(g=>g.id===l.messageId);if(!c)return _o;const f=c.details?.reasoning??[],d=c.details?.reasoningStatus??null;return Oh(f,l.segments)&&d===l.status?l:{...l,segments:f,status:d}})}return{subscribe:e,openWithDetails:r,openForMessage:s,close:u,syncFromMessages:o}}const bd="tool",Rh=["prompt_tokens","input_tokens","prompt","input","promptTokens","inputTokens"],zh=["completion_tokens","output_tokens","completion","output","completionTokens","outputTokens"],Bh=["total_tokens","total","totalTokens"];function Uh(e,t=bd){const n=[],r={},s={};for(let u=0;u<e.length;u+=1){const o=e[u];if(s[o.id]=u,o.role==="assistant"){const i=o.details?.toolCalls,l=Array.isArray(i)&&i.length>0;let c=0,f=u+1;for(;yd(e[f],t);)c+=1,f+=1;const d=l?i.length:0,g=Math.max(d,c),h=g>0,v=jh(o.details?.usage);r[o.id]={used:h,count:g,tokens:v}}o.role!==t&&n.push(o)}return{visibleMessages:n,assistantToolUsage:r,messageIndexMap:s}}function El(e,t,n,r=bd){const s=t[n];if(typeof s!="number")return[];const u=e[s];if(!u||u.role!=="assistant")return[];const o=[],i=Array.isArray(u.details?.toolCalls)?u.details?.toolCalls:[];let l=s+1;for(;yd(e[l],r);){const c=e[l],f=c.details??{},d=i[o.length],h=(typeof f?.toolName=="string"?f.toolName:null)??bo(d)??"Tool",v=typeof f?.toolStatus=="string"?f.toolStatus:null,T=typeof f?.toolResult=="string"?f.toolResult:null,A=typeof c.content=="string"?c.content:null,b=T??A??yo(d),C=xo(d);o.push({id:c.id,name:h,status:v,input:C,result:b}),l+=1}return o.length===0&&i.length>0?i.forEach((c,f)=>{o.push({id:`${u.id}-metadata-${f}`,name:bo(c)??`Tool ${f+1}`,status:null,input:xo(c),result:yo(c)})}):o.length>0&&i.length>0&&o.forEach((c,f)=>{const d=i[f];d&&((!c.name||c.name==="Tool")&&(c.name=bo(d)??c.name),c.input||(c.input=xo(d)),c.result||(c.result=yo(d)))}),o}function yd(e,t){return e?.role===t}function bo(e){if(!e)return null;const t=e.name;if(typeof t=="string"&&t.trim().length>0)return t;const n=e.function;if(n&&typeof n=="object"){const r=n.name;if(typeof r=="string"&&r.trim().length>0)return r}return null}function yo(e){if(!e)return null;const t=e.result;if(typeof t=="string")return t;if(t&&typeof t=="object")try{return JSON.stringify(t,null,2)}catch(r){console.warn("Failed to stringify tool result",r)}const n=e.function;if(n&&typeof n=="object"){const r=n.arguments;if(typeof r=="string")return r;if(r&&typeof r=="object")try{return JSON.stringify(r,null,2)}catch(s){console.warn("Failed to stringify tool arguments",s)}}return null}function xo(e){if(!e)return null;const t=e.arguments,n=Cl(t);if(n)return n;const r=e.function;if(r&&typeof r=="object"){const s=Cl(r.arguments);if(s)return s}return null}function jh(e){if(!e||typeof e!="object")return null;const t=e,n=ko(t,Rh),r=ko(t,zh);let s=ko(t,Bh);return s==null&&(n!=null||r!=null)&&(s=(n??0)+(r??0)),n==null&&r==null&&s==null?null:{inputTokens:n,outputTokens:r,totalTokens:s}}function ko(e,t){for(const n of t){if(!(n in e))continue;const r=qh(e[n]);if(r!=null)return r}return null}function qh(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);return Number.isFinite(t)?t:null}return null}function Cl(e){if(typeof e=="string"){const t=e.trim();if(!t)return null;try{const n=JSON.parse(t);return typeof n=="string"?n:JSON.stringify(n,null,2)}catch{return t}}if(e&&typeof e=="object")try{return JSON.stringify(e,null,2)}catch(t){console.warn("Failed to stringify tool arguments",t,e)}return null}const Al={open:!1,messageId:null,tools:[]};function Hh(){const{subscribe:e,set:t,update:n}=Gt(Al);function r(i,l){t({open:!0,messageId:i,tools:l})}function s(i,l,c,f){const d=El(i,l,c,f);r(c,d)}function u(){t(Al)}function o(i,l,c){n(f=>{if(!f.open||!f.messageId)return f;const d=El(i,l,f.messageId,c);return d.length===f.tools.length&&d.every((h,v)=>{const T=f.tools[v];return T?.id===h.id&&T?.name===h.name&&T?.status===h.status&&T?.input===h.input&&T?.result===h.result})?f:{...f,tools:d}})}return{subscribe:e,openWithEntries:r,openForMessage:s,close:u,syncEntries:o}}const Tl={open:!1,messageId:null,details:null};function Wh(){const{subscribe:e,set:t,update:n}=Gt(Tl);function r(o,i){t({open:!0,messageId:o,details:i??{engine:null,maxResults:null,contextSize:null,searchPrompt:null}})}function s(o){const i=o.details?.webSearchConfig;if(i&&typeof i=="object"){const l={engine:i.engine??null,maxResults:i.maxResults??null,contextSize:i.contextSize??null,searchPrompt:i.searchPrompt??null};r(o.id,l)}else r(o.id,null)}function u(){t(Tl)}return{subscribe:e,openWithDetails:r,openForMessage:s,close:u}}var Vh=M('<p class="status svelte-15rpl30">No web citations found.</p>'),Gh=M('<h3 class="citations-modal-title svelte-15rpl30"> </h3>'),Zh=M('<p class="citations-modal-content svelte-15rpl30"> </p>'),Kh=M("<span> </span>"),Yh=M("<span> </span>"),Jh=M('<div class="citations-modal-meta svelte-15rpl30"><!> <!></div>'),Xh=M('<li class="citations-modal-item svelte-15rpl30"><div class="citations-modal-header svelte-15rpl30"><span class="citations-modal-number svelte-15rpl30"></span> <a class="citations-modal-link svelte-15rpl30" target="_blank" rel="noreferrer">Visit source</a></div> <!> <div class="citations-modal-url svelte-15rpl30"> </div> <!> <!></li>'),Qh=M('<ul class="citations-modal-list svelte-15rpl30"></ul>'),ev=M('<p class="model-settings-subtitle"> </p>'),tv=M('<h2 id="citations-modal-title">Web Citations</h2> <!>',1);function nv(e,t){wt(t,!1);const n=Jt();let r=re(t,"open",8,!1),s=re(t,"messageId",8,null),u=re(t,"citations",24,()=>[]);function o(){n("close")}Ct();var i=Ee(),l=ce(i);{var c=f=>{Pr(f,{get open(){return r()},labelledBy:"citations-modal-title",modalClass:"citations-modal",bodyClass:"citations-modal-body",closeLabel:"Close web citations",$$events:{close:o},children:(d,g)=>{var h=Ee(),v=ce(h);{var T=b=>{var C=Vh();S(b,C)},A=b=>{var C=Qh();Tt(C,5,u,Ln,(w,y,E)=>{var k=Xh(),D=m(k),W=m(D);W.textContent=`Citation ${E+1}`;var U=x(W,2),F=x(D,2);{var I=te=>{var J=Gh(),N=m(J);j(()=>H(N,(a(y),p(()=>a(y).title)))),S(te,J)};L(F,te=>{a(y),p(()=>a(y).title)&&te(I)})}var Y=x(F,2),G=m(Y),ie=x(Y,2);{var O=te=>{var J=Zh(),N=m(J);j(()=>H(N,(a(y),p(()=>a(y).content)))),S(te,J)};L(ie,te=>{a(y),p(()=>a(y).content)&&te(O)})}var ee=x(ie,2);{var le=te=>{var J=Jh(),N=m(J);{var q=Q=>{var K=Kh(),Z=m(K);j(()=>H(Z,`Start: ${a(y),p(()=>a(y).startIndex)??""}`)),S(Q,K)};L(N,Q=>{a(y),p(()=>a(y).startIndex!==void 0)&&Q(q)})}var ae=x(N,2);{var ke=Q=>{var K=Yh(),Z=m(K);j(()=>H(Z,`End: ${a(y),p(()=>a(y).endIndex)??""}`)),S(Q,K)};L(ae,Q=>{a(y),p(()=>a(y).endIndex!==void 0)&&Q(ke)})}S(te,J)};L(ee,te=>{a(y),p(()=>a(y).startIndex!==void 0||a(y).endIndex!==void 0)&&te(le)})}j(()=>{oe(U,"href",(a(y),p(()=>a(y).url))),H(G,(a(y),p(()=>a(y).url)))}),S(w,k)}),S(b,C)};L(v,b=>{R(u()),p(()=>u().length===0)?b(T):b(A,!1)})}S(d,h)},$$slots:{default:!0,heading:(d,g)=>{var h=tv(),v=x(ce(h),2);{var T=A=>{var b=ev(),C=m(b);j(()=>H(C,`Message ID: ${s()??""}`)),S(A,b)};L(v,A=>{s()&&A(T)})}S(d,h)}}})};L(l,f=>{r()&&f(c)})}S(e,i),St()}const Dl='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path><path d="M16 4h2a2 2 0 0 1 2 2v4"></path><path d="M21 14H11"></path><path d="m15 10-4 4 4 4"></path></svg>',rv='<svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>',sv=2e3,av="copy-code-button",Ml="copy-code-block";function uv(e){e.classList.add(Ml);const t=document.createElement("button");t.type="button",t.className=av,t.setAttribute("aria-label","Copy code"),t.setAttribute("title","Copy code"),t.innerHTML=Dl;let n=null;const r=async()=>{const u=e.querySelector("code")?.textContent??e.textContent??"";if(u){if(!navigator?.clipboard?.writeText){console.warn("Clipboard API unavailable; cannot copy code block");return}try{await navigator.clipboard.writeText(u)}catch(o){console.error("Failed to copy code block",o);return}n!==null&&window.clearTimeout(n),t.classList.add("copied"),t.setAttribute("aria-label","Code copied"),t.innerHTML=rv,n=window.setTimeout(()=>{e.isConnected&&(t.classList.remove("copied"),t.setAttribute("aria-label","Copy code"),t.innerHTML=Dl,n=null)},sv)}};return t.addEventListener("click",r),e.appendChild(t),{cleanup:()=>{t.removeEventListener("click",r),n!==null&&window.clearTimeout(n),t.remove(),e.classList.remove(Ml)}}}function Fl(e,t){e.querySelectorAll("pre").forEach(r=>{t.has(r)||t.set(r,uv(r))}),Array.from(t.keys()).forEach(r=>{if(!e.contains(r)){const s=t.get(r);s&&(s.cleanup(),t.delete(r))}})}function Qo(e){const t=new Map,n=new MutationObserver(()=>{Fl(e,t)});return n.observe(e,{childList:!0,subtree:!0}),Fl(e,t),{destroy:()=>{n.disconnect(),Array.from(t.values()).forEach(r=>r.cleanup()),t.clear()}}}const Pl={};function ov(e){let t=Pl[e];if(t)return t;t=Pl[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function js(e,t){typeof t!="string"&&(t=js.defaultChars);const n=ov(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let s="";for(let u=0,o=r.length;u<o;u+=3){const i=parseInt(r.slice(u+1,u+3),16);if(i<128){s+=n[i];continue}if((i&224)===192&&u+3<o){const l=parseInt(r.slice(u+4,u+6),16);if((l&192)===128){const c=i<<6&1984|l&63;c<128?s+="ï¿½ï¿½":s+=String.fromCharCode(c),u+=3;continue}}if((i&240)===224&&u+6<o){const l=parseInt(r.slice(u+4,u+6),16),c=parseInt(r.slice(u+7,u+9),16);if((l&192)===128&&(c&192)===128){const f=i<<12&61440|l<<6&4032|c&63;f<2048||f>=55296&&f<=57343?s+="ï¿½ï¿½ï¿½":s+=String.fromCharCode(f),u+=6;continue}}if((i&248)===240&&u+9<o){const l=parseInt(r.slice(u+4,u+6),16),c=parseInt(r.slice(u+7,u+9),16),f=parseInt(r.slice(u+10,u+12),16);if((l&192)===128&&(c&192)===128&&(f&192)===128){let d=i<<18&1835008|l<<12&258048|c<<6&4032|f&63;d<65536||d>1114111?s+="ï¿½ï¿½ï¿½ï¿½":(d-=65536,s+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),u+=9;continue}}s+="ï¿½"}return s})}js.defaultChars=";/?:@&=+$,#";js.componentChars="";const Il={};function iv(e){let t=Il[e];if(t)return t;t=Il[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function qa(e,t,n){typeof t!="string"&&(n=t,t=qa.defaultChars),typeof n>"u"&&(n=!0);const r=iv(t);let s="";for(let u=0,o=e.length;u<o;u++){const i=e.charCodeAt(u);if(n&&i===37&&u+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(u+1,u+3))){s+=e.slice(u,u+3),u+=2;continue}if(i<128){s+=r[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&u+1<o){const l=e.charCodeAt(u+1);if(l>=56320&&l<=57343){s+=encodeURIComponent(e[u]+e[u+1]),u++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[u])}return s}qa.defaultChars=";/?:@&=+$,-_.!~*'()#";qa.componentChars="-_.!~*'()";function Ti(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Au(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const lv=/^([a-z0-9.+-]+:)/i,cv=/:[0-9]*$/,dv=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fv=["<",">",'"',"`"," ","\r",`
`,"	"],pv=["{","}","|","\\","^","`"].concat(fv),hv=["'"].concat(pv),Nl=["%","/","?",";","#"].concat(hv),Ll=["/","?","#"],vv=255,Ol=/^[+a-z0-9A-Z_-]{0,63}$/,mv=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$l={javascript:!0,"javascript:":!0},Rl={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Di(e,t){if(e&&e instanceof Au)return e;const n=new Au;return n.parse(e,t),n}Au.prototype.parse=function(e,t){let n,r,s,u=e;if(u=u.trim(),!t&&e.split("#").length===1){const c=dv.exec(u);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=lv.exec(u);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,u=u.substr(o.length)),(t||o||u.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=u.substr(0,2)==="//",s&&!(o&&$l[o])&&(u=u.substr(2),this.slashes=!0)),!$l[o]&&(s||o&&!Rl[o])){let c=-1;for(let v=0;v<Ll.length;v++)r=u.indexOf(Ll[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,d;c===-1?d=u.lastIndexOf("@"):d=u.lastIndexOf("@",c),d!==-1&&(f=u.slice(0,d),u=u.slice(d+1),this.auth=f),c=-1;for(let v=0;v<Nl.length;v++)r=u.indexOf(Nl[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=u.length),u[c-1]===":"&&c--;const g=u.slice(0,c);u=u.slice(c),this.parseHost(g),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const v=this.hostname.split(/\./);for(let T=0,A=v.length;T<A;T++){const b=v[T];if(b&&!b.match(Ol)){let C="";for(let w=0,y=b.length;w<y;w++)b.charCodeAt(w)>127?C+="x":C+=b[w];if(!C.match(Ol)){const w=v.slice(0,T),y=v.slice(T+1),E=b.match(mv);E&&(w.push(E[1]),y.unshift(E[2])),y.length&&(u=y.join(".")+u),this.hostname=w.join(".");break}}}}this.hostname.length>vv&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const i=u.indexOf("#");i!==-1&&(this.hash=u.substr(i),u=u.slice(0,i));const l=u.indexOf("?");return l!==-1&&(this.search=u.substr(l),u=u.slice(0,l)),u&&(this.pathname=u),Rl[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Au.prototype.parseHost=function(e){let t=cv.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const gv=Object.freeze(Object.defineProperty({__proto__:null,decode:js,encode:qa,format:Ti,parse:Di},Symbol.toStringTag,{value:"Module"})),xd=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kd=/[\0-\x1F\x7F-\x9F]/,_v=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Mi=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,wd=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Sd=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,bv=Object.freeze(Object.defineProperty({__proto__:null,Any:xd,Cc:kd,Cf:_v,P:Mi,S:wd,Z:Sd},Symbol.toStringTag,{value:"Module"})),yv=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(e=>e.charCodeAt(0))),xv=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(e=>e.charCodeAt(0)));var wo;const kv=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),wv=(wo=String.fromCodePoint)!==null&&wo!==void 0?wo:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Sv(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=kv.get(e))!==null&&t!==void 0?t:e}var vn;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(vn||(vn={}));const Ev=32;var jr;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(jr||(jr={}));function ei(e){return e>=vn.ZERO&&e<=vn.NINE}function Cv(e){return e>=vn.UPPER_A&&e<=vn.UPPER_F||e>=vn.LOWER_A&&e<=vn.LOWER_F}function Av(e){return e>=vn.UPPER_A&&e<=vn.UPPER_Z||e>=vn.LOWER_A&&e<=vn.LOWER_Z||ei(e)}function Tv(e){return e===vn.EQUALS||Av(e)}var fn;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(fn||(fn={}));var zr;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(zr||(zr={}));class Dv{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=fn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=zr.Strict}startEntity(t){this.decodeMode=t,this.state=fn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case fn.EntityStart:return t.charCodeAt(n)===vn.NUM?(this.state=fn.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=fn.NamedEntity,this.stateNamedEntity(t,n));case fn.NumericStart:return this.stateNumericStart(t,n);case fn.NumericDecimal:return this.stateNumericDecimal(t,n);case fn.NumericHex:return this.stateNumericHex(t,n);case fn.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Ev)===vn.LOWER_X?(this.state=fn.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=fn.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const u=r-n;this.result=this.result*Math.pow(s,u)+parseInt(t.substr(n,u),s),this.consumed+=u}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(ei(s)||Cv(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(ei(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===vn.SEMI)this.consumed+=1;else if(this.decodeMode===zr.Strict)return 0;return this.emitCodePoint(Sv(this.result),this.consumed),this.errors&&(t!==vn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],u=(s&jr.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Mv(r,s,this.treeIndex+Math.max(1,u),o),this.treeIndex<0)return this.result===0||this.decodeMode===zr.Attribute&&(u===0||Tv(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],u=(s&jr.VALUE_LENGTH)>>14,u!==0){if(o===vn.SEMI)return this.emitNamedEntityData(this.treeIndex,u,this.consumed+this.excess);this.decodeMode!==zr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&jr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~jr.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case fn.NamedEntity:return this.result!==0&&(this.decodeMode!==zr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case fn.NumericDecimal:return this.emitNumericEntity(0,2);case fn.NumericHex:return this.emitNumericEntity(0,3);case fn.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case fn.EntityStart:return 0}}}function Ed(e){let t="";const n=new Dv(e,r=>t+=wv(r));return function(s,u){let o=0,i=0;for(;(i=s.indexOf("&",i))>=0;){t+=s.slice(o,i),n.startEntity(u);const c=n.write(s,i+1);if(c<0){o=i+n.end();break}o=i+c,i=c===0?o+1:o}const l=t+s.slice(o);return t="",l}}function Mv(e,t,n,r){const s=(t&jr.BRANCH_LENGTH)>>7,u=t&jr.JUMP_TABLE;if(s===0)return u!==0&&r===u?n:-1;if(u){const l=r-u;return l<0||l>=s?-1:e[n+l]-1}let o=n,i=o+s-1;for(;o<=i;){const l=o+i>>>1,c=e[l];if(c<r)o=l+1;else if(c>r)i=l-1;else return e[l+s]}return-1}const Fv=Ed(yv);Ed(xv);function Cd(e,t=zr.Legacy){return Fv(e,t)}function Pv(e){return Object.prototype.toString.call(e)}function Fi(e){return Pv(e)==="[object String]"}const Iv=Object.prototype.hasOwnProperty;function Nv(e,t){return Iv.call(e,t)}function ju(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function Ad(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Pi(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Tu(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Td=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Lv=/&([a-z#][a-z0-9]{1,31});/gi,Ov=new RegExp(Td.source+"|"+Lv.source,"gi"),$v=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Rv(e,t){if(t.charCodeAt(0)===35&&$v.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Pi(r)?Tu(r):e}const n=Cd(e);return n!==e?n:e}function zv(e){return e.indexOf("\\")<0?e:e.replace(Td,"$1")}function qs(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Ov,function(t,n,r){return n||Rv(t,r)})}const Bv=/[&<>"]/,Uv=/[&<>"]/g,jv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function qv(e){return jv[e]}function Gr(e){return Bv.test(e)?e.replace(Uv,qv):e}const Hv=/[.?*+^$[\]\\(){}|-]/g;function Wv(e){return e.replace(Hv,"\\$&")}function jt(e){switch(e){case 9:case 32:return!0}return!1}function Da(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Ma(e){return Mi.test(e)||wd.test(e)}function Fa(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function qu(e){return e=e.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(e=e.replace(/áº/g,"Ã")),e.toLowerCase().toUpperCase()}const Vv={mdurl:gv,ucmicro:bv},Gv=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Ad,assign:ju,escapeHtml:Gr,escapeRE:Wv,fromCodePoint:Tu,has:Nv,isMdAsciiPunct:Fa,isPunctChar:Ma,isSpace:jt,isString:Fi,isValidEntityCode:Pi,isWhiteSpace:Da,lib:Vv,normalizeReference:qu,unescapeAll:qs,unescapeMd:zv},Symbol.toStringTag,{value:"Module"}));function Zv(e,t,n){let r,s,u,o;const i=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<i;){if(u=e.src.charCodeAt(e.pos),u===93&&(r--,r===0)){s=!0;break}if(o=e.pos,e.md.inline.skipToken(e),u===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return s&&(c=e.pos),e.pos=l,c}function Kv(e,t,n){let r,s=t;const u={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(r=e.charCodeAt(s),r===10||r===60)return u;if(r===62)return u.pos=s+1,u.str=qs(e.slice(t+1,s)),u.ok=!0,u;if(r===92&&s+1<n){s+=2;continue}s++}return u}let o=0;for(;s<n&&(r=e.charCodeAt(s),!(r===32||r<32||r===127));){if(r===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(r===40&&(o++,o>32))return u;if(r===41){if(o===0)break;o--}s++}return t===s||o!==0||(u.str=qs(e.slice(t,s)),u.pos=s,u.ok=!0),u}function Yv(e,t,n,r){let s,u=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(u>=n)return o;let i=e.charCodeAt(u);if(i!==34&&i!==39&&i!==40)return o;t++,u++,i===40&&(i=41),o.marker=i}for(;u<n;){if(s=e.charCodeAt(u),s===o.marker)return o.pos=u+1,o.str+=qs(e.slice(t,u)),o.ok=!0,o;if(s===40&&o.marker===41)return o;s===92&&u+1<n&&u++,u++}return o.can_continue=!0,o.str+=qs(e.slice(t,u)),o}const Jv=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Kv,parseLinkLabel:Zv,parseLinkTitle:Yv},Symbol.toStringTag,{value:"Module"})),br={};br.code_inline=function(e,t,n,r,s){const u=e[t];return"<code"+s.renderAttrs(u)+">"+Gr(u.content)+"</code>"};br.code_block=function(e,t,n,r,s){const u=e[t];return"<pre"+s.renderAttrs(u)+"><code>"+Gr(e[t].content)+`</code></pre>
`};br.fence=function(e,t,n,r,s){const u=e[t],o=u.info?qs(u.info).trim():"";let i="",l="";if(o){const f=o.split(/(\s+)/g);i=f[0],l=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(u.content,i,l)||Gr(u.content):c=Gr(u.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=u.attrIndex("class"),d=u.attrs?u.attrs.slice():[];f<0?d.push(["class",n.langPrefix+i]):(d[f]=d[f].slice(),d[f][1]+=" "+n.langPrefix+i);const g={attrs:d};return`<pre><code${s.renderAttrs(g)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(u)}>${c}</code></pre>
`};br.image=function(e,t,n,r,s){const u=e[t];return u.attrs[u.attrIndex("alt")][1]=s.renderInlineAsText(u.children,n,r),s.renderToken(e,t,n)};br.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};br.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};br.text=function(e,t){return Gr(e[t].content)};br.html_block=function(e,t){return e[t].content};br.html_inline=function(e,t){return e[t].content};function Ks(){this.rules=ju({},br)}Ks.prototype.renderAttrs=function(t){let n,r,s;if(!t.attrs)return"";for(s="",n=0,r=t.attrs.length;n<r;n++)s+=" "+Gr(t.attrs[n][0])+'="'+Gr(t.attrs[n][1])+'"';return s};Ks.prototype.renderToken=function(t,n,r){const s=t[n];let u="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(u+=`
`),u+=(s.nesting===-1?"</":"<")+s.tag,u+=this.renderAttrs(s),s.nesting===0&&r.xhtmlOut&&(u+=" /");let o=!1;if(s.block&&(o=!0,s.nesting===1&&n+1<t.length)){const i=t[n+1];(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===s.tag)&&(o=!1)}return u+=o?`>
`:">",u};Ks.prototype.renderInline=function(e,t,n){let r="";const s=this.rules;for(let u=0,o=e.length;u<o;u++){const i=e[u].type;typeof s[i]<"u"?r+=s[i](e,u,t,n,this):r+=this.renderToken(e,u,t)}return r};Ks.prototype.renderInlineAsText=function(e,t,n){let r="";for(let s=0,u=e.length;s<u;s++)switch(e[s].type){case"text":r+=e[s].content;break;case"image":r+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":r+=e[s].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Ks.prototype.render=function(e,t,n){let r="";const s=this.rules;for(let u=0,o=e.length;u<o;u++){const i=e[u].type;i==="inline"?r+=this.renderInline(e[u].children,t,n):typeof s[i]<"u"?r+=s[i](e,u,t,n,this):r+=this.renderToken(e,u,t,n)}return r};function On(){this.__rules__=[],this.__cache__=null}On.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};On.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};On.prototype.at=function(e,t,n){const r=this.__find__(e),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=s.alt||[],this.__cache__=null};On.prototype.before=function(e,t,n,r){const s=this.__find__(e),u=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:u.alt||[]}),this.__cache__=null};On.prototype.after=function(e,t,n,r){const s=this.__find__(e),u=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:u.alt||[]}),this.__cache__=null};On.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};On.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};On.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};On.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};On.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function sr(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}sr.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,s=n.length;r<s;r++)if(n[r][0]===t)return r;return-1};sr.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};sr.prototype.attrSet=function(t,n){const r=this.attrIndex(t),s=[t,n];r<0?this.attrPush(s):this.attrs[r]=s};sr.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};sr.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Dd(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Dd.prototype.Token=sr;const Xv=/\r\n?|\n/g,Qv=/\0/g;function em(e){let t;t=e.src.replace(Xv,`
`),t=t.replace(Qv,"ï¿½"),e.src=t}function tm(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function nm(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function rm(e){return/^<a[>\s]/i.test(e)}function sm(e){return/^<\/a\s*>/i.test(e)}function am(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,u=0;for(let o=s.length-1;o>=0;o--){const i=s[o];if(i.type==="link_close"){for(o--;s[o].level!==i.level&&s[o].type!=="link_open";)o--;continue}if(i.type==="html_inline"&&(rm(i.content)&&u>0&&u--,sm(i.content)&&u++),!(u>0)&&i.type==="text"&&e.md.linkify.test(i.content)){const l=i.content;let c=e.md.linkify.match(l);const f=[];let d=i.level,g=0;c.length>0&&c[0].index===0&&o>0&&s[o-1].type==="text_special"&&(c=c.slice(1));for(let h=0;h<c.length;h++){const v=c[h].url,T=e.md.normalizeLink(v);if(!e.md.validateLink(T))continue;let A=c[h].text;c[h].schema?c[h].schema==="mailto:"&&!/^mailto:/i.test(A)?A=e.md.normalizeLinkText("mailto:"+A).replace(/^mailto:/,""):A=e.md.normalizeLinkText(A):A=e.md.normalizeLinkText("http://"+A).replace(/^http:\/\//,"");const b=c[h].index;if(b>g){const E=new e.Token("text","",0);E.content=l.slice(g,b),E.level=d,f.push(E)}const C=new e.Token("link_open","a",1);C.attrs=[["href",T]],C.level=d++,C.markup="linkify",C.info="auto",f.push(C);const w=new e.Token("text","",0);w.content=A,w.level=d,f.push(w);const y=new e.Token("link_close","a",-1);y.level=--d,y.markup="linkify",y.info="auto",f.push(y),g=c[h].lastIndex}if(g<l.length){const h=new e.Token("text","",0);h.content=l.slice(g),h.level=d,f.push(h)}t[n].children=s=Ad(s,o,f)}}}}const Md=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,um=/\((c|tm|r)\)/i,om=/\((c|tm|r)\)/ig,im={c:"Â©",r:"Â®",tm:"â¢"};function lm(e,t){return im[t.toLowerCase()]}function cm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(om,lm)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function dm(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&Md.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function fm(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(um.test(e.tokens[t].content)&&cm(e.tokens[t].children),Md.test(e.tokens[t].content)&&dm(e.tokens[t].children))}const pm=/['"]/,zl=/['"]/g,Bl="â";function ru(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function hm(e,t){let n;const r=[];for(let s=0;s<e.length;s++){const u=e[s],o=e[s].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,u.type!=="text")continue;let i=u.content,l=0,c=i.length;e:for(;l<c;){zl.lastIndex=l;const f=zl.exec(i);if(!f)break;let d=!0,g=!0;l=f.index+1;const h=f[0]==="'";let v=32;if(f.index-1>=0)v=i.charCodeAt(f.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let T=32;if(l<c)T=i.charCodeAt(l);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){T=e[n].content.charCodeAt(0);break}const A=Fa(v)||Ma(String.fromCharCode(v)),b=Fa(T)||Ma(String.fromCharCode(T)),C=Da(v),w=Da(T);if(w?d=!1:b&&(C||A||(d=!1)),C?g=!1:A&&(w||b||(g=!1)),T===34&&f[0]==='"'&&v>=48&&v<=57&&(g=d=!1),d&&g&&(d=A,g=b),!d&&!g){h&&(u.content=ru(u.content,f.index,Bl));continue}if(g)for(n=r.length-1;n>=0;n--){let y=r[n];if(r[n].level<o)break;if(y.single===h&&r[n].level===o){y=r[n];let E,k;h?(E=t.md.options.quotes[2],k=t.md.options.quotes[3]):(E=t.md.options.quotes[0],k=t.md.options.quotes[1]),u.content=ru(u.content,f.index,k),e[y.token].content=ru(e[y.token].content,y.pos,E),l+=k.length-1,y.token===s&&(l+=E.length-1),i=u.content,c=i.length,r.length=n;continue e}}d?r.push({token:s,pos:f.index,single:h,level:o}):g&&h&&(u.content=ru(u.content,f.index,Bl))}}}function vm(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!pm.test(e.tokens[t].content)||hm(e.tokens[t].children,e)}function mm(e){let t,n;const r=e.tokens,s=r.length;for(let u=0;u<s;u++){if(r[u].type!=="inline")continue;const o=r[u].children,i=o.length;for(t=0;t<i;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<i;t++)o[t].type==="text"&&t+1<i&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const So=[["normalize",em],["block",tm],["inline",nm],["linkify",am],["replacements",fm],["smartquotes",vm],["text_join",mm]];function Ii(){this.ruler=new On;for(let e=0;e<So.length;e++)this.ruler.push(So[e][0],So[e][1])}Ii.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Ii.prototype.State=Dd;function yr(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let u=0,o=0,i=0,l=0,c=s.length,f=!1;o<c;o++){const d=s.charCodeAt(o);if(!f)if(jt(d)){i++,d===9?l+=4-l%4:l++;continue}else f=!0;(d===10||o===c-1)&&(d!==10&&o++,this.bMarks.push(u),this.eMarks.push(o),this.tShift.push(i),this.sCount.push(l),this.bsCount.push(0),f=!1,i=0,l=0,u=o+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}yr.prototype.push=function(e,t,n){const r=new sr(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};yr.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};yr.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};yr.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!jt(r))break}return t};yr.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!jt(this.src.charCodeAt(--t)))return t+1;return t};yr.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};yr.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};yr.prototype.getLines=function(t,n,r,s){if(t>=n)return"";const u=new Array(n-t);for(let o=0,i=t;i<n;i++,o++){let l=0;const c=this.bMarks[i];let f=c,d;for(i+1<n||s?d=this.eMarks[i]+1:d=this.eMarks[i];f<d&&l<r;){const g=this.src.charCodeAt(f);if(jt(g))g===9?l+=4-(l+this.bsCount[i])%4:l++;else if(f-c<this.tShift[i])l++;else break;f++}l>r?u[o]=new Array(l-r+1).join(" ")+this.src.slice(f,d):u[o]=this.src.slice(f,d)}return u.join("")};yr.prototype.Token=sr;const gm=65536;function Eo(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Ul(e){const t=[],n=e.length;let r=0,s=e.charCodeAt(r),u=!1,o=0,i="";for(;r<n;)s===124&&(u?(i+=e.substring(o,r-1),o=r):(t.push(i+e.substring(o,r)),i="",o=r+1)),u=s===92,r++,s=e.charCodeAt(r);return t.push(i+e.substring(o)),t}function _m(e,t,n,r){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let u=e.bMarks[s]+e.tShift[s];if(u>=e.eMarks[s])return!1;const o=e.src.charCodeAt(u++);if(o!==124&&o!==45&&o!==58||u>=e.eMarks[s])return!1;const i=e.src.charCodeAt(u++);if(i!==124&&i!==45&&i!==58&&!jt(i)||o===45&&jt(i))return!1;for(;u<e.eMarks[s];){const y=e.src.charCodeAt(u);if(y!==124&&y!==45&&y!==58&&!jt(y))return!1;u++}let l=Eo(e,t+1),c=l.split("|");const f=[];for(let y=0;y<c.length;y++){const E=c[y].trim();if(!E){if(y===0||y===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(E))return!1;E.charCodeAt(E.length-1)===58?f.push(E.charCodeAt(0)===58?"center":"right"):E.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=Eo(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Ul(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==f.length)return!1;if(r)return!0;const g=e.parentType;e.parentType="table";const h=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),T=[t,0];v.map=T;const A=e.push("thead_open","thead",1);A.map=[t,t+1];const b=e.push("tr_open","tr",1);b.map=[t,t+1];for(let y=0;y<c.length;y++){const E=e.push("th_open","th",1);f[y]&&(E.attrs=[["style","text-align:"+f[y]]]);const k=e.push("inline","",0);k.content=c[y].trim(),k.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let C,w=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let y=!1;for(let k=0,D=h.length;k<D;k++)if(h[k](e,s,n,!0)){y=!0;break}if(y||(l=Eo(e,s).trim(),!l)||e.sCount[s]-e.blkIndent>=4||(c=Ul(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),w+=d-c.length,w>gm))break;if(s===t+2){const k=e.push("tbody_open","tbody",1);k.map=C=[t+2,0]}const E=e.push("tr_open","tr",1);E.map=[s,s+1];for(let k=0;k<d;k++){const D=e.push("td_open","td",1);f[k]&&(D.attrs=[["style","text-align:"+f[k]]]);const W=e.push("inline","",0);W.content=c[k]?c[k].trim():"",W.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return C&&(e.push("tbody_close","tbody",-1),C[1]=s),e.push("table_close","table",-1),T[1]=s,e.parentType=g,e.line=s,!0}function bm(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,s=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,s=r;continue}break}e.line=s;const u=e.push("code_block","code",0);return u.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,u.map=[t,e.line],!0}function ym(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>u)return!1;const o=e.src.charCodeAt(s);if(o!==126&&o!==96)return!1;let i=s;s=e.skipChars(s,o);let l=s-i;if(l<3)return!1;const c=e.src.slice(i,s),f=e.src.slice(s,u);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let d=t,g=!1;for(;d++,!(d>=n||(s=i=e.bMarks[d]+e.tShift[d],u=e.eMarks[d],s<u&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(s)===o&&!(e.sCount[d]-e.blkIndent>=4)&&(s=e.skipChars(s,o),!(s-i<l)&&(s=e.skipSpaces(s),!(s<u)))){g=!0;break}l=e.sCount[t],e.line=d+(g?1:0);const h=e.push("fence","code",0);return h.info=f,h.content=e.getLines(t+1,d,l,!0),h.markup=c,h.map=[t,e.line],!0}function xm(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(r)return!0;const i=[],l=[],c=[],f=[],d=e.md.block.ruler.getRules("blockquote"),g=e.parentType;e.parentType="blockquote";let h=!1,v;for(v=t;v<n;v++){const w=e.sCount[v]<e.blkIndent;if(s=e.bMarks[v]+e.tShift[v],u=e.eMarks[v],s>=u)break;if(e.src.charCodeAt(s++)===62&&!w){let E=e.sCount[v]+1,k,D;e.src.charCodeAt(s)===32?(s++,E++,D=!1,k=!0):e.src.charCodeAt(s)===9?(k=!0,(e.bsCount[v]+E)%4===3?(s++,E++,D=!1):D=!0):k=!1;let W=E;for(i.push(e.bMarks[v]),e.bMarks[v]=s;s<u;){const U=e.src.charCodeAt(s);if(jt(U))U===9?W+=4-(W+e.bsCount[v]+(D?1:0))%4:W++;else break;s++}h=s>=u,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(k?1:0),c.push(e.sCount[v]),e.sCount[v]=W-E,f.push(e.tShift[v]),e.tShift[v]=s-e.bMarks[v];continue}if(h)break;let y=!1;for(let E=0,k=d.length;E<k;E++)if(d[E](e,v,n,!0)){y=!0;break}if(y){e.lineMax=v,e.blkIndent!==0&&(i.push(e.bMarks[v]),l.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}i.push(e.bMarks[v]),l.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const T=e.blkIndent;e.blkIndent=0;const A=e.push("blockquote_open","blockquote",1);A.markup=">";const b=[t,0];A.map=b,e.md.block.tokenize(e,t,v);const C=e.push("blockquote_close","blockquote",-1);C.markup=">",e.lineMax=o,e.parentType=g,b[1]=e.line;for(let w=0;w<f.length;w++)e.bMarks[w+t]=i[w],e.tShift[w+t]=f[w],e.sCount[w+t]=c[w],e.bsCount[w+t]=l[w];return e.blkIndent=T,!0}function km(e,t,n,r){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let u=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(u++);if(o!==42&&o!==45&&o!==95)return!1;let i=1;for(;u<s;){const c=e.src.charCodeAt(u++);if(c!==o&&!jt(c))return!1;c===o&&i++}if(i<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(i+1).join(String.fromCharCode(o)),!0}function jl(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(r++);if(s!==42&&s!==45&&s!==43)return-1;if(r<n){const u=e.src.charCodeAt(r);if(!jt(u))return-1}return r}function ql(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let s=n;if(s+1>=r)return-1;let u=e.src.charCodeAt(s++);if(u<48||u>57)return-1;for(;;){if(s>=r)return-1;if(u=e.src.charCodeAt(s++),u>=48&&u<=57){if(s-n>=10)return-1;continue}if(u===41||u===46)break;return-1}return s<r&&(u=e.src.charCodeAt(s),!jt(u))?-1:s}function wm(e,t){const n=e.level+2;for(let r=t+2,s=e.tokens.length-2;r<s;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Sm(e,t,n,r){let s,u,o,i,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(f=!0);let d,g,h;if((h=ql(e,l))>=0){if(d=!0,o=e.bMarks[l]+e.tShift[l],g=Number(e.src.slice(o,h-1)),f&&g!==1)return!1}else if((h=jl(e,l))>=0)d=!1;else return!1;if(f&&e.skipSpaces(h)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(h-1),T=e.tokens.length;d?(i=e.push("ordered_list_open","ol",1),g!==1&&(i.attrs=[["start",g]])):i=e.push("bullet_list_open","ul",1);const A=[l,0];i.map=A,i.markup=String.fromCharCode(v);let b=!1;const C=e.md.block.ruler.getRules("list"),w=e.parentType;for(e.parentType="list";l<n;){u=h,s=e.eMarks[l];const y=e.sCount[l]+h-(e.bMarks[l]+e.tShift[l]);let E=y;for(;u<s;){const O=e.src.charCodeAt(u);if(O===9)E+=4-(E+e.bsCount[l])%4;else if(O===32)E++;else break;u++}const k=u;let D;k>=s?D=1:D=E-y,D>4&&(D=1);const W=y+D;i=e.push("list_item_open","li",1),i.markup=String.fromCharCode(v);const U=[l,0];i.map=U,d&&(i.info=e.src.slice(o,h-1));const F=e.tight,I=e.tShift[l],Y=e.sCount[l],G=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=W,e.tight=!0,e.tShift[l]=k-e.bMarks[l],e.sCount[l]=E,k>=s&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||b)&&(c=!1),b=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=G,e.tShift[l]=I,e.sCount[l]=Y,e.tight=F,i=e.push("list_item_close","li",-1),i.markup=String.fromCharCode(v),l=e.line,U[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let ie=!1;for(let O=0,ee=C.length;O<ee;O++)if(C[O](e,l,n,!0)){ie=!0;break}if(ie)break;if(d){if(h=ql(e,l),h<0)break;o=e.bMarks[l]+e.tShift[l]}else if(h=jl(e,l),h<0)break;if(v!==e.src.charCodeAt(h-1))break}return d?i=e.push("ordered_list_close","ol",-1):i=e.push("bullet_list_close","ul",-1),i.markup=String.fromCharCode(v),A[1]=l,e.line=l,e.parentType=w,c&&wm(e,T),!0}function Em(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function i(C){const w=e.lineMax;if(C>=w||e.isEmpty(C))return null;let y=!1;if(e.sCount[C]-e.blkIndent>3&&(y=!0),e.sCount[C]<0&&(y=!0),!y){const D=e.md.block.ruler.getRules("reference"),W=e.parentType;e.parentType="reference";let U=!1;for(let F=0,I=D.length;F<I;F++)if(D[F](e,C,w,!0)){U=!0;break}if(e.parentType=W,U)return null}const E=e.bMarks[C]+e.tShift[C],k=e.eMarks[C];return e.src.slice(E,k+1)}let l=e.src.slice(s,u+1);u=l.length;let c=-1;for(s=1;s<u;s++){const C=l.charCodeAt(s);if(C===91)return!1;if(C===93){c=s;break}else if(C===10){const w=i(o);w!==null&&(l+=w,u=l.length,o++)}else if(C===92&&(s++,s<u&&l.charCodeAt(s)===10)){const w=i(o);w!==null&&(l+=w,u=l.length,o++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<u;s++){const C=l.charCodeAt(s);if(C===10){const w=i(o);w!==null&&(l+=w,u=l.length,o++)}else if(!jt(C))break}const f=e.md.helpers.parseLinkDestination(l,s,u);if(!f.ok)return!1;const d=e.md.normalizeLink(f.str);if(!e.md.validateLink(d))return!1;s=f.pos;const g=s,h=o,v=s;for(;s<u;s++){const C=l.charCodeAt(s);if(C===10){const w=i(o);w!==null&&(l+=w,u=l.length,o++)}else if(!jt(C))break}let T=e.md.helpers.parseLinkTitle(l,s,u);for(;T.can_continue;){const C=i(o);if(C===null)break;l+=C,s=u,u=l.length,o++,T=e.md.helpers.parseLinkTitle(l,s,u,T)}let A;for(s<u&&v!==s&&T.ok?(A=T.str,s=T.pos):(A="",s=g,o=h);s<u;){const C=l.charCodeAt(s);if(!jt(C))break;s++}if(s<u&&l.charCodeAt(s)!==10&&A)for(A="",s=g,o=h;s<u;){const C=l.charCodeAt(s);if(!jt(C))break;s++}if(s<u&&l.charCodeAt(s)!==10)return!1;const b=qu(l.slice(1,c));return b?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[b]>"u"&&(e.env.references[b]={title:A,href:d}),e.line=o),!0):!1}const Cm=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Am="[a-zA-Z_:][a-zA-Z0-9:._-]*",Tm="[^\"'=<>`\\x00-\\x20]+",Dm="'[^']*'",Mm='"[^"]*"',Fm="(?:"+Tm+"|"+Dm+"|"+Mm+")",Pm="(?:\\s+"+Am+"(?:\\s*=\\s*"+Fm+")?)",Fd="<[A-Za-z][A-Za-z0-9\\-]*"+Pm+"*\\s*\\/?>",Pd="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Im="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Nm="<[?][\\s\\S]*?[?]>",Lm="<![A-Za-z][^>]*>",Om="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",$m=new RegExp("^(?:"+Fd+"|"+Pd+"|"+Im+"|"+Nm+"|"+Lm+"|"+Om+")"),Rm=new RegExp("^(?:"+Fd+"|"+Pd+")"),Cs=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Cm.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Rm.source+"\\s*$"),/^$/,!1]];function zm(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let o=e.src.slice(s,u),i=0;for(;i<Cs.length&&!Cs[i][0].test(o);i++);if(i===Cs.length)return!1;if(r)return Cs[i][2];let l=t+1;if(!Cs[i][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(s=e.bMarks[l]+e.tShift[l],u=e.eMarks[l],o=e.src.slice(s,u),Cs[i][1].test(o)){o.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function Bm(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(s);if(o!==35||s>=u)return!1;let i=1;for(o=e.src.charCodeAt(++s);o===35&&s<u&&i<=6;)i++,o=e.src.charCodeAt(++s);if(i>6||s<u&&!jt(o))return!1;if(r)return!0;u=e.skipSpacesBack(u,s);const l=e.skipCharsBack(u,35,s);l>s&&jt(e.src.charCodeAt(l-1))&&(u=l),e.line=t+1;const c=e.push("heading_open","h"+String(i),1);c.markup="########".slice(0,i),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(s,u).trim(),f.map=[t,e.line],f.children=[];const d=e.push("heading_close","h"+String(i),-1);return d.markup="########".slice(0,i),!0}function Um(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let u=0,o,i=t+1;for(;i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3)continue;if(e.sCount[i]>=e.blkIndent){let h=e.bMarks[i]+e.tShift[i];const v=e.eMarks[i];if(h<v&&(o=e.src.charCodeAt(h),(o===45||o===61)&&(h=e.skipChars(h,o),h=e.skipSpaces(h),h>=v))){u=o===61?1:2;break}}if(e.sCount[i]<0)continue;let g=!1;for(let h=0,v=r.length;h<v;h++)if(r[h](e,i,n,!0)){g=!0;break}if(g)break}if(!u)return!1;const l=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i+1;const c=e.push("heading_open","h"+String(u),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=l,f.map=[t,e.line-1],f.children=[];const d=e.push("heading_close","h"+String(u),-1);return d.markup=String.fromCharCode(o),e.parentType=s,!0}function jm(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let u=t+1;for(e.parentType="paragraph";u<n&&!e.isEmpty(u);u++){if(e.sCount[u]-e.blkIndent>3||e.sCount[u]<0)continue;let c=!1;for(let f=0,d=r.length;f<d;f++)if(r[f](e,u,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,u,e.blkIndent,!1).trim();e.line=u;const i=e.push("paragraph_open","p",1);i.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const su=[["table",_m,["paragraph","reference"]],["code",bm],["fence",ym,["paragraph","reference","blockquote","list"]],["blockquote",xm,["paragraph","reference","blockquote","list"]],["hr",km,["paragraph","reference","blockquote","list"]],["list",Sm,["paragraph","reference","blockquote"]],["reference",Em],["html_block",zm,["paragraph","reference","blockquote"]],["heading",Bm,["paragraph","reference","blockquote"]],["lheading",Um],["paragraph",jm]];function Hu(){this.ruler=new On;for(let e=0;e<su.length;e++)this.ruler.push(su[e][0],su[e][1],{alt:(su[e][2]||[]).slice()})}Hu.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),s=r.length,u=e.md.options.maxNesting;let o=t,i=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=u){e.line=n;break}const l=e.line;let c=!1;for(let f=0;f<s;f++)if(c=r[f](e,o,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!i,e.isEmpty(e.line-1)&&(i=!0),o=e.line,o<n&&e.isEmpty(o)&&(i=!0,o++,e.line=o)}};Hu.prototype.parse=function(e,t,n,r){if(!e)return;const s=new this.State(e,t,n,r);this.tokenize(s,s.line,s.lineMax)};Hu.prototype.State=yr;function Ha(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Ha.prototype.pushPending=function(){const e=new sr("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Ha.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new sr(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};Ha.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let u=e;for(;u<n&&this.src.charCodeAt(u)===r;)u++;const o=u-e,i=u<n?this.src.charCodeAt(u):32,l=Fa(s)||Ma(String.fromCharCode(s)),c=Fa(i)||Ma(String.fromCharCode(i)),f=Da(s),d=Da(i),g=!d&&(!c||f||l),h=!f&&(!l||d||c);return{can_open:g&&(t||!h||l),can_close:h&&(t||!g||c),length:o}};Ha.prototype.Token=sr;function qm(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Hm(e,t){let n=e.pos;for(;n<e.posMax&&!qm(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Wm=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Vm(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(Wm);if(!s)return!1;const u=s[1],o=e.md.linkify.matchAtStart(e.src.slice(n-u.length));if(!o)return!1;let i=o.url;if(i.length<=u.length)return!1;i=i.replace(/\*+$/,"");const l=e.md.normalizeLink(i);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-u.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(i);const d=e.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return e.pos+=i.length-u.length,!0}function Gm(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,s=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let u=r-1;for(;u>=1&&e.pending.charCodeAt(u-1)===32;)u--;e.pending=e.pending.slice(0,u),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&jt(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Ni=[];for(let e=0;e<256;e++)Ni.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Ni[e.charCodeAt(0)]=1});function Zm(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(s=e.src.charCodeAt(n),!!jt(s));)n++;return e.pos=n,!0}let u=e.src[n];if(s>=55296&&s<=56319&&n+1<r){const i=e.src.charCodeAt(n+1);i>=56320&&i<=57343&&(u+=e.src[n+1],n++)}const o="\\"+u;if(!t){const i=e.push("text_special","",0);s<256&&Ni[s]!==0?i.content=u:i.content=o,i.markup=o,i.info="escape"}return e.pos=n+1,!0}function Km(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const u=e.posMax;for(;n<u&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(s,n),i=o.length;if(e.backticksScanned&&(e.backticks[i]||0)<=s)return t||(e.pending+=o),e.pos+=i,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<u&&e.src.charCodeAt(l)===96;)l++;const f=l-c;if(f===i){if(!t){const d=e.push("code_inline","code",0);d.markup=o,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=i,!0}function Ym(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const s=e.scanDelims(e.pos,!0);let u=s.length;const o=String.fromCharCode(r);if(u<2)return!1;let i;u%2&&(i=e.push("text","",0),i.content=o,u--);for(let l=0;l<u;l+=2)i=e.push("text","",0),i.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function Hl(e,t){let n;const r=[],s=t.length;for(let u=0;u<s;u++){const o=t[u];if(o.marker!==126||o.end===-1)continue;const i=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[i.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[i.token-1].type==="text"&&e.tokens[i.token-1].content==="~"&&r.push(i.token-1)}for(;r.length;){const u=r.pop();let o=u+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,u!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[u],e.tokens[u]=n)}}function Jm(e){const t=e.tokens_meta,n=e.tokens_meta.length;Hl(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Hl(e,t[r].delimiters)}const Id={tokenize:Ym,postProcess:Jm};function Xm(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const s=e.scanDelims(e.pos,r===42);for(let u=0;u<s.length;u++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function Wl(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const s=t[r];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const u=t[s.end],o=r>0&&t[r-1].end===s.end+1&&t[r-1].marker===s.marker&&t[r-1].token===s.token-1&&t[s.end+1].token===u.token+1,i=String.fromCharCode(s.marker),l=e.tokens[s.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?i+i:i,l.content="";const c=e.tokens[u.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?i+i:i,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[s.end+1].token].content="",r--)}}function Qm(e){const t=e.tokens_meta,n=e.tokens_meta.length;Wl(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Wl(e,t[r].delimiters)}const Nd={tokenize:Xm,postProcess:Qm};function eg(e,t){let n,r,s,u,o="",i="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,d=e.posMax,g=e.pos+1,h=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(h<0)return!1;let v=h+1;if(v<d&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<d&&(n=e.src.charCodeAt(v),!(!jt(n)&&n!==10));v++);if(v>=d)return!1;if(l=v,s=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),s.ok){for(o=e.md.normalizeLink(s.str),e.md.validateLink(o)?v=s.pos:o="",l=v;v<d&&(n=e.src.charCodeAt(v),!(!jt(n)&&n!==10));v++);if(s=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<d&&l!==v&&s.ok)for(i=s.str,v=s.pos;v<d&&(n=e.src.charCodeAt(v),!(!jt(n)&&n!==10));v++);}(v>=d||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<d&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=h+1):v=h+1,r||(r=e.src.slice(g,h)),u=e.env.references[qu(r)],!u)return e.pos=f,!1;o=u.href,i=u.title}if(!t){e.pos=g,e.posMax=h;const T=e.push("link_open","a",1),A=[["href",o]];T.attrs=A,i&&A.push(["title",i]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=d,!0}function tg(e,t){let n,r,s,u,o,i,l,c,f="";const d=e.pos,g=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const h=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(u=v+1,u<g&&e.src.charCodeAt(u)===40){for(u++;u<g&&(n=e.src.charCodeAt(u),!(!jt(n)&&n!==10));u++);if(u>=g)return!1;for(c=u,i=e.md.helpers.parseLinkDestination(e.src,u,e.posMax),i.ok&&(f=e.md.normalizeLink(i.str),e.md.validateLink(f)?u=i.pos:f=""),c=u;u<g&&(n=e.src.charCodeAt(u),!(!jt(n)&&n!==10));u++);if(i=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<g&&c!==u&&i.ok)for(l=i.str,u=i.pos;u<g&&(n=e.src.charCodeAt(u),!(!jt(n)&&n!==10));u++);else l="";if(u>=g||e.src.charCodeAt(u)!==41)return e.pos=d,!1;u++}else{if(typeof e.env.references>"u")return!1;if(u<g&&e.src.charCodeAt(u)===91?(c=u+1,u=e.md.helpers.parseLinkLabel(e,u),u>=0?s=e.src.slice(c,u++):u=v+1):u=v+1,s||(s=e.src.slice(h,v)),o=e.env.references[qu(s)],!o)return e.pos=d,!1;f=o.href,l=o.title}if(!t){r=e.src.slice(h,v);const T=[];e.md.inline.parse(r,e.md,e.env,T);const A=e.push("image","img",0),b=[["src",f],["alt",""]];A.attrs=b,A.children=T,A.content=r,l&&b.push(["title",l])}return e.pos=u,e.posMax=g,!0}const ng=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,rg=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function sg(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const u=e.src.slice(r+1,n);if(rg.test(u)){const o=e.md.normalizeLink(u);if(!e.md.validateLink(o))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",o]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(u);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=u.length+2,!0}if(ng.test(u)){const o=e.md.normalizeLink("mailto:"+u);if(!e.md.validateLink(o))return!1;if(!t){const i=e.push("link_open","a",1);i.attrs=[["href",o]],i.markup="autolink",i.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(u);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=u.length+2,!0}return!1}function ag(e){return/^<a[>\s]/i.test(e)}function ug(e){return/^<\/a\s*>/i.test(e)}function og(e){const t=e|32;return t>=97&&t<=122}function ig(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const s=e.src.charCodeAt(r+1);if(s!==33&&s!==63&&s!==47&&!og(s))return!1;const u=e.src.slice(r).match($m);if(!u)return!1;if(!t){const o=e.push("html_inline","",0);o.content=u[0],ag(o.content)&&e.linkLevel++,ug(o.content)&&e.linkLevel--}return e.pos+=u[0].length,!0}const lg=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,cg=/^&([a-z][a-z0-9]{1,31});/i;function dg(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const u=e.src.slice(n).match(lg);if(u){if(!t){const o=u[1][0].toLowerCase()==="x"?parseInt(u[1].slice(1),16):parseInt(u[1],10),i=e.push("text_special","",0);i.content=Pi(o)?Tu(o):Tu(65533),i.markup=u[0],i.info="entity"}return e.pos+=u[0].length,!0}}else{const u=e.src.slice(n).match(cg);if(u){const o=Cd(u[0]);if(o!==u[0]){if(!t){const i=e.push("text_special","",0);i.content=o,i.markup=u[0],i.info="entity"}return e.pos+=u[0].length,!0}}}return!1}function Vl(e){const t={},n=e.length;if(!n)return;let r=0,s=-2;const u=[];for(let o=0;o<n;o++){const i=e[o];if(u.push(0),(e[r].marker!==i.marker||s!==i.token-1)&&(r=o),s=i.token,i.length=i.length||0,!i.close)continue;t.hasOwnProperty(i.marker)||(t[i.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[i.marker][(i.open?3:0)+i.length%3];let c=r-u[r]-1,f=c;for(;c>l;c-=u[c]+1){const d=e[c];if(d.marker===i.marker&&d.open&&d.end<0){let g=!1;if((d.close||i.open)&&(d.length+i.length)%3===0&&(d.length%3!==0||i.length%3!==0)&&(g=!0),!g){const h=c>0&&!e[c-1].open?u[c-1]+1:0;u[o]=o-c+h,u[c]=h,i.open=!1,d.end=o,d.close=!1,f=-1,s=-2;break}}}f!==-1&&(t[i.marker][(i.open?3:0)+(i.length||0)%3]=f)}}function fg(e){const t=e.tokens_meta,n=e.tokens_meta.length;Vl(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Vl(t[r].delimiters)}function pg(e){let t,n,r=0;const s=e.tokens,u=e.tokens.length;for(t=n=0;t<u;t++)s[t].nesting<0&&r--,s[t].level=r,s[t].nesting>0&&r++,s[t].type==="text"&&t+1<u&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const Co=[["text",Hm],["linkify",Vm],["newline",Gm],["escape",Zm],["backticks",Km],["strikethrough",Id.tokenize],["emphasis",Nd.tokenize],["link",eg],["image",tg],["autolink",sg],["html_inline",ig],["entity",dg]],Ao=[["balance_pairs",fg],["strikethrough",Id.postProcess],["emphasis",Nd.postProcess],["fragments_join",pg]];function Wa(){this.ruler=new On;for(let e=0;e<Co.length;e++)this.ruler.push(Co[e][0],Co[e][1]);this.ruler2=new On;for(let e=0;e<Ao.length;e++)this.ruler2.push(Ao[e][0],Ao[e][1])}Wa.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,s=e.md.options.maxNesting,u=e.cache;if(typeof u[t]<"u"){e.pos=u[t];return}let o=!1;if(e.level<s){for(let i=0;i<r;i++)if(e.level++,o=n[i](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,u[t]=e.pos};Wa.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,s=e.md.options.maxNesting;for(;e.pos<r;){const u=e.pos;let o=!1;if(e.level<s){for(let i=0;i<n;i++)if(o=t[i](e,!1),o){if(u>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Wa.prototype.parse=function(e,t,n,r){const s=new this.State(e,t,n,r);this.tokenize(s);const u=this.ruler2.getRules(""),o=u.length;for(let i=0;i<o;i++)u[i](s)};Wa.prototype.State=Ha;function hg(e){const t={};e=e||{},t.src_Any=xd.source,t.src_Cc=kd.source,t.src_Z=Sd.source,t.src_P=Mi.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><ï½]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function ti(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Wu(e){return Object.prototype.toString.call(e)}function vg(e){return Wu(e)==="[object String]"}function mg(e){return Wu(e)==="[object Object]"}function gg(e){return Wu(e)==="[object RegExp]"}function Gl(e){return Wu(e)==="[object Function]"}function _g(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Ld={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function bg(e){return Object.keys(e||{}).reduce(function(t,n){return t||Ld.hasOwnProperty(n)},!1)}const yg={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},xg="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",kg="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function wg(e){e.__index__=-1,e.__text_cache__=""}function Sg(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Zl(){return function(e,t){t.normalize(e)}}function Du(e){const t=e.re=hg(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(xg),n.push(t.src_xn),t.src_tlds=n.join("|");function r(i){return i.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function u(i,l){throw new Error('(LinkifyIt) Invalid schema "'+i+'": '+l)}Object.keys(e.__schemas__).forEach(function(i){const l=e.__schemas__[i];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[i]=c,mg(l)){gg(l.validate)?c.validate=Sg(l.validate):Gl(l.validate)?c.validate=l.validate:u(i,l),Gl(l.normalize)?c.normalize=l.normalize:l.normalize?u(i,l):c.normalize=Zl();return}if(vg(l)){s.push(i);return}u(i,l)}),s.forEach(function(i){e.__compiled__[e.__schemas__[i]]&&(e.__compiled__[i].validate=e.__compiled__[e.__schemas__[i]].validate,e.__compiled__[i].normalize=e.__compiled__[e.__schemas__[i]].normalize)}),e.__compiled__[""]={validate:null,normalize:Zl()};const o=Object.keys(e.__compiled__).filter(function(i){return i.length>0&&e.__compiled__[i]}).map(_g).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),wg(e)}function Eg(e,t){const n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function ni(e,t){const n=new Eg(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Bn(e,t){if(!(this instanceof Bn))return new Bn(e,t);t||bg(e)&&(t=e,e={}),this.__opts__=ti({},Ld,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ti({},yg,e),this.__compiled__={},this.__tlds__=kg,this.__tlds_replaced__=!1,this.re={},Du(this)}Bn.prototype.add=function(t,n){return this.__schemas__[t]=n,Du(this),this};Bn.prototype.set=function(t){return this.__opts__=ti(this.__opts__,t),this};Bn.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,s,u,o,i,l,c,f;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(u=this.testSchemaAt(t,n[2],l.lastIndex),u){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+u;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(o=s.index+s[1].length,i=s.index+s[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=i))),this.__index__>=0};Bn.prototype.pretest=function(t){return this.re.pretest.test(t)};Bn.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Bn.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(ni(this,r)),r=this.__last_index__);let s=r?t.slice(r):t;for(;this.test(s);)n.push(ni(this,r)),s=s.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Bn.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,ni(this,0)):null};Bn.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,s,u){return r!==u[s-1]}).reverse(),Du(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Du(this),this)};Bn.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Bn.prototype.onCompile=function(){};const $s=2147483647,fr=36,Li=1,Pa=26,Cg=38,Ag=700,Od=72,$d=128,Rd="-",Tg=/^xn--/,Dg=/[^\0-\x7F]/,Mg=/[\x2E\u3002\uFF0E\uFF61]/g,Fg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},To=fr-Li,pr=Math.floor,Do=String.fromCharCode;function Rr(e){throw new RangeError(Fg[e])}function Pg(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function zd(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Mg,".");const s=e.split("."),u=Pg(s,t).join(".");return r+u}function Bd(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const u=e.charCodeAt(n++);(u&64512)==56320?t.push(((s&1023)<<10)+(u&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const Ig=e=>String.fromCodePoint(...e),Ng=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:fr},Kl=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Ud=function(e,t,n){let r=0;for(e=n?pr(e/Ag):e>>1,e+=pr(e/t);e>To*Pa>>1;r+=fr)e=pr(e/To);return pr(r+(To+1)*e/(e+Cg))},jd=function(e){const t=[],n=e.length;let r=0,s=$d,u=Od,o=e.lastIndexOf(Rd);o<0&&(o=0);for(let i=0;i<o;++i)e.charCodeAt(i)>=128&&Rr("not-basic"),t.push(e.charCodeAt(i));for(let i=o>0?o+1:0;i<n;){const l=r;for(let f=1,d=fr;;d+=fr){i>=n&&Rr("invalid-input");const g=Ng(e.charCodeAt(i++));g>=fr&&Rr("invalid-input"),g>pr(($s-r)/f)&&Rr("overflow"),r+=g*f;const h=d<=u?Li:d>=u+Pa?Pa:d-u;if(g<h)break;const v=fr-h;f>pr($s/v)&&Rr("overflow"),f*=v}const c=t.length+1;u=Ud(r-l,c,l==0),pr(r/c)>$s-s&&Rr("overflow"),s+=pr(r/c),r%=c,t.splice(r++,0,s)}return String.fromCodePoint(...t)},qd=function(e){const t=[];e=Bd(e);const n=e.length;let r=$d,s=0,u=Od;for(const l of e)l<128&&t.push(Do(l));const o=t.length;let i=o;for(o&&t.push(Rd);i<n;){let l=$s;for(const f of e)f>=r&&f<l&&(l=f);const c=i+1;l-r>pr(($s-s)/c)&&Rr("overflow"),s+=(l-r)*c,r=l;for(const f of e)if(f<r&&++s>$s&&Rr("overflow"),f===r){let d=s;for(let g=fr;;g+=fr){const h=g<=u?Li:g>=u+Pa?Pa:g-u;if(d<h)break;const v=d-h,T=fr-h;t.push(Do(Kl(h+v%T,0))),d=pr(v/T)}t.push(Do(Kl(d,0))),u=Ud(s,c,i===o),s=0,++i}++s,++r}return t.join("")},Lg=function(e){return zd(e,function(t){return Tg.test(t)?jd(t.slice(4).toLowerCase()):t})},Og=function(e){return zd(e,function(t){return Dg.test(t)?"xn--"+qd(t):t})},Hd={version:"2.3.1",ucs2:{decode:Bd,encode:Ig},decode:jd,encode:qd,toASCII:Og,toUnicode:Lg},$g={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Rg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},zg={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Bg={default:$g,zero:Rg,commonmark:zg},Ug=/^(vbscript|javascript|file|data):/,jg=/^data:image\/(gif|png|jpeg|webp);/;function qg(e){const t=e.trim().toLowerCase();return Ug.test(t)?jg.test(t):!0}const Wd=["http:","https:","mailto:"];function Hg(e){const t=Di(e,!0);if(t.hostname&&(!t.protocol||Wd.indexOf(t.protocol)>=0))try{t.hostname=Hd.toASCII(t.hostname)}catch{}return qa(Ti(t))}function Wg(e){const t=Di(e,!0);if(t.hostname&&(!t.protocol||Wd.indexOf(t.protocol)>=0))try{t.hostname=Hd.toUnicode(t.hostname)}catch{}return js(Ti(t),js.defaultChars+"%")}function Kn(e,t){if(!(this instanceof Kn))return new Kn(e,t);t||Fi(e)||(t=e||{},e="default"),this.inline=new Wa,this.block=new Hu,this.core=new Ii,this.renderer=new Ks,this.linkify=new Bn,this.validateLink=qg,this.normalizeLink=Hg,this.normalizeLinkText=Wg,this.utils=Gv,this.helpers=ju({},Jv),this.options={},this.configure(e),t&&this.set(t)}Kn.prototype.set=function(e){return ju(this.options,e),this};Kn.prototype.configure=function(e){const t=this;if(Fi(e)){const n=e;if(e=Bg[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Kn.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Kn.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Kn.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Kn.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Kn.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Kn.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Kn.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:Vd,setPrototypeOf:Yl,isFrozen:Vg,getPrototypeOf:Gg,getOwnPropertyDescriptor:Zg}=Object;let{freeze:Mn,seal:Yn,create:Gd}=Object,{apply:ri,construct:si}=typeof Reflect<"u"&&Reflect;Mn||(Mn=function(t){return t});Yn||(Yn=function(t){return t});ri||(ri=function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),u=2;u<r;u++)s[u-2]=arguments[u];return t.apply(n,s)});si||(si=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return new t(...r)});const au=Fn(Array.prototype.forEach),Kg=Fn(Array.prototype.lastIndexOf),Jl=Fn(Array.prototype.pop),oa=Fn(Array.prototype.push),Yg=Fn(Array.prototype.splice),gu=Fn(String.prototype.toLowerCase),Mo=Fn(String.prototype.toString),Fo=Fn(String.prototype.match),ia=Fn(String.prototype.replace),Jg=Fn(String.prototype.indexOf),Xg=Fn(String.prototype.trim),Qn=Fn(Object.prototype.hasOwnProperty),En=Fn(RegExp.prototype.test),la=Qg(TypeError);function Fn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return ri(e,t,r)}}function Qg(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return si(e,n)}}function ft(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gu;Yl&&Yl(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const u=n(s);u!==s&&(Vg(t)||(t[r]=u),s=u)}e[s]=!0}return e}function e2(e){for(let t=0;t<e.length;t++)Qn(e,t)||(e[t]=null);return e}function Sr(e){const t=Gd(null);for(const[n,r]of Vd(e))Qn(e,n)&&(Array.isArray(r)?t[n]=e2(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Sr(r):t[n]=r);return t}function ca(e,t){for(;e!==null;){const r=Zg(e,t);if(r){if(r.get)return Fn(r.get);if(typeof r.value=="function")return Fn(r.value)}e=Gg(e)}function n(){return null}return n}const Xl=Mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Po=Mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Io=Mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),t2=Mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),No=Mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),n2=Mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ql=Mn(["#text"]),ec=Mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Lo=Mn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tc=Mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uu=Mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),r2=Yn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),s2=Yn(/<%[\w\W]*|[\w\W]*%>/gm),a2=Yn(/\$\{[\w\W]*/gm),u2=Yn(/^data-[\-\w.\u00B7-\uFFFF]+$/),o2=Yn(/^aria-[\-\w]+$/),Zd=Yn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),i2=Yn(/^(?:\w+script|data):/i),l2=Yn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Kd=Yn(/^html$/i),c2=Yn(/^[a-z][.\w]*(-[.\w]+)+$/i);var nc=Object.freeze({__proto__:null,ARIA_ATTR:o2,ATTR_WHITESPACE:l2,CUSTOM_ELEMENT:c2,DATA_ATTR:u2,DOCTYPE_NAME:Kd,ERB_EXPR:s2,IS_ALLOWED_URI:Zd,IS_SCRIPT_OR_DATA:i2,MUSTACHE_EXPR:r2,TMPLIT_EXPR:a2});const da={element:1,text:3,progressingInstruction:7,comment:8,document:9},d2=function(){return typeof window>"u"?null:window},f2=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},rc=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Yd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d2();const t=we=>Yd(we);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==da.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,s=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:o,Node:i,Element:l,NodeFilter:c,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:g,trustedTypes:h}=e,v=l.prototype,T=ca(v,"cloneNode"),A=ca(v,"remove"),b=ca(v,"nextSibling"),C=ca(v,"childNodes"),w=ca(v,"parentNode");if(typeof o=="function"){const we=n.createElement("template");we.content&&we.content.ownerDocument&&(n=we.content.ownerDocument)}let y,E="";const{implementation:k,createNodeIterator:D,createDocumentFragment:W,getElementsByTagName:U}=n,{importNode:F}=r;let I=rc();t.isSupported=typeof Vd=="function"&&typeof w=="function"&&k&&k.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:G,TMPLIT_EXPR:ie,DATA_ATTR:O,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:le,ATTR_WHITESPACE:te,CUSTOM_ELEMENT:J}=nc;let{IS_ALLOWED_URI:N}=nc,q=null;const ae=ft({},[...Xl,...Po,...Io,...No,...Ql]);let ke=null;const Q=ft({},[...ec,...Lo,...tc,...uu]);let K=Object.seal(Gd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Z=null,me=null,ne=!0,xe=!0,X=!1,Le=!0,Re=!1,et=!0,Ge=!1,Ae=!1,Ke=!1,ge=!1,Pe=!1,ze=!1,je=!0,Je=!1;const Dt="user-content-";let de=!0,B=!1,ue={},ve=null;const Me=ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Be=null;const Ne=ft({},["audio","video","img","source","image","track"]);let Ze=null;const He=ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xe="http://www.w3.org/1998/Math/MathML",ot="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let bt=Qe,lt=!1,Et=null;const Zt=ft({},[Xe,ot,Qe],Mo);let Wt=ft({},["mi","mo","mn","ms","mtext"]),tn=ft({},["annotation-xml"]);const se=ft({},["title","style","font","a","script"]);let _e=null;const be=["application/xhtml+xml","text/html"],Oe="text/html";let Ie=null,at=null;const pt=n.createElement("form"),$e=function(P){return P instanceof RegExp||P instanceof Function},We=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(at&&at===P)){if((!P||typeof P!="object")&&(P={}),P=Sr(P),_e=be.indexOf(P.PARSER_MEDIA_TYPE)===-1?Oe:P.PARSER_MEDIA_TYPE,Ie=_e==="application/xhtml+xml"?Mo:gu,q=Qn(P,"ALLOWED_TAGS")?ft({},P.ALLOWED_TAGS,Ie):ae,ke=Qn(P,"ALLOWED_ATTR")?ft({},P.ALLOWED_ATTR,Ie):Q,Et=Qn(P,"ALLOWED_NAMESPACES")?ft({},P.ALLOWED_NAMESPACES,Mo):Zt,Ze=Qn(P,"ADD_URI_SAFE_ATTR")?ft(Sr(He),P.ADD_URI_SAFE_ATTR,Ie):He,Be=Qn(P,"ADD_DATA_URI_TAGS")?ft(Sr(Ne),P.ADD_DATA_URI_TAGS,Ie):Ne,ve=Qn(P,"FORBID_CONTENTS")?ft({},P.FORBID_CONTENTS,Ie):Me,Z=Qn(P,"FORBID_TAGS")?ft({},P.FORBID_TAGS,Ie):Sr({}),me=Qn(P,"FORBID_ATTR")?ft({},P.FORBID_ATTR,Ie):Sr({}),ue=Qn(P,"USE_PROFILES")?P.USE_PROFILES:!1,ne=P.ALLOW_ARIA_ATTR!==!1,xe=P.ALLOW_DATA_ATTR!==!1,X=P.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Re=P.SAFE_FOR_TEMPLATES||!1,et=P.SAFE_FOR_XML!==!1,Ge=P.WHOLE_DOCUMENT||!1,ge=P.RETURN_DOM||!1,Pe=P.RETURN_DOM_FRAGMENT||!1,ze=P.RETURN_TRUSTED_TYPE||!1,Ke=P.FORCE_BODY||!1,je=P.SANITIZE_DOM!==!1,Je=P.SANITIZE_NAMED_PROPS||!1,de=P.KEEP_CONTENT!==!1,B=P.IN_PLACE||!1,N=P.ALLOWED_URI_REGEXP||Zd,bt=P.NAMESPACE||Qe,Wt=P.MATHML_TEXT_INTEGRATION_POINTS||Wt,tn=P.HTML_INTEGRATION_POINTS||tn,K=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&$e(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&$e(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(xe=!1),Pe&&(ge=!0),ue&&(q=ft({},Ql),ke=[],ue.html===!0&&(ft(q,Xl),ft(ke,ec)),ue.svg===!0&&(ft(q,Po),ft(ke,Lo),ft(ke,uu)),ue.svgFilters===!0&&(ft(q,Io),ft(ke,Lo),ft(ke,uu)),ue.mathMl===!0&&(ft(q,No),ft(ke,tc),ft(ke,uu))),P.ADD_TAGS&&(q===ae&&(q=Sr(q)),ft(q,P.ADD_TAGS,Ie)),P.ADD_ATTR&&(ke===Q&&(ke=Sr(ke)),ft(ke,P.ADD_ATTR,Ie)),P.ADD_URI_SAFE_ATTR&&ft(Ze,P.ADD_URI_SAFE_ATTR,Ie),P.FORBID_CONTENTS&&(ve===Me&&(ve=Sr(ve)),ft(ve,P.FORBID_CONTENTS,Ie)),de&&(q["#text"]=!0),Ge&&ft(q,["html","head","body"]),q.table&&(ft(q,["tbody"]),delete Z.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw la('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw la('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=P.TRUSTED_TYPES_POLICY,E=y.createHTML("")}else y===void 0&&(y=f2(h,s)),y!==null&&typeof E=="string"&&(E=y.createHTML(""));Mn&&Mn(P),at=P}},Ve=ft({},[...Po,...Io,...t2]),Ce=ft({},[...No,...n2]),xt=function(P){let V=w(P);(!V||!V.tagName)&&(V={namespaceURI:bt,tagName:"template"});const he=gu(P.tagName),qe=gu(V.tagName);return Et[P.namespaceURI]?P.namespaceURI===ot?V.namespaceURI===Qe?he==="svg":V.namespaceURI===Xe?he==="svg"&&(qe==="annotation-xml"||Wt[qe]):!!Ve[he]:P.namespaceURI===Xe?V.namespaceURI===Qe?he==="math":V.namespaceURI===ot?he==="math"&&tn[qe]:!!Ce[he]:P.namespaceURI===Qe?V.namespaceURI===ot&&!tn[qe]||V.namespaceURI===Xe&&!Wt[qe]?!1:!Ce[he]&&(se[he]||!Ve[he]):!!(_e==="application/xhtml+xml"&&Et[P.namespaceURI]):!1},it=function(P){oa(t.removed,{element:P});try{w(P).removeChild(P)}catch{A(P)}},ht=function(P,V){try{oa(t.removed,{attribute:V.getAttributeNode(P),from:V})}catch{oa(t.removed,{attribute:null,from:V})}if(V.removeAttribute(P),P==="is")if(ge||Pe)try{it(V)}catch{}else try{V.setAttribute(P,"")}catch{}},Nt=function(P){let V=null,he=null;if(Ke)P="<remove></remove>"+P;else{const Se=Fo(P,/^[\r\n\t ]+/);he=Se&&Se[0]}_e==="application/xhtml+xml"&&bt===Qe&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");const qe=y?y.createHTML(P):P;if(bt===Qe)try{V=new g().parseFromString(qe,_e)}catch{}if(!V||!V.documentElement){V=k.createDocument(bt,"template",null);try{V.documentElement.innerHTML=lt?E:qe}catch{}}const tt=V.body||V.documentElement;return P&&he&&tt.insertBefore(n.createTextNode(he),tt.childNodes[0]||null),bt===Qe?U.call(V,Ge?"html":"body")[0]:Ge?V.documentElement:tt},on=function(P){return D.call(P.ownerDocument||P,P,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Kt=function(P){return P instanceof d&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof f)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},fe=function(P){return typeof i=="function"&&P instanceof i};function Fe(we,P,V){au(we,he=>{he.call(t,P,V,at)})}const nt=function(P){let V=null;if(Fe(I.beforeSanitizeElements,P,null),Kt(P))return it(P),!0;const he=Ie(P.nodeName);if(Fe(I.uponSanitizeElement,P,{tagName:he,allowedTags:q}),et&&P.hasChildNodes()&&!fe(P.firstElementChild)&&En(/<[/\w!]/g,P.innerHTML)&&En(/<[/\w!]/g,P.textContent)||P.nodeType===da.progressingInstruction||et&&P.nodeType===da.comment&&En(/<[/\w]/g,P.data))return it(P),!0;if(!q[he]||Z[he]){if(!Z[he]&&Te(he)&&(K.tagNameCheck instanceof RegExp&&En(K.tagNameCheck,he)||K.tagNameCheck instanceof Function&&K.tagNameCheck(he)))return!1;if(de&&!ve[he]){const qe=w(P)||P.parentNode,tt=C(P)||P.childNodes;if(tt&&qe){const Se=tt.length;for(let Ye=Se-1;Ye>=0;--Ye){const gt=T(tt[Ye],!0);gt.__removalCount=(P.__removalCount||0)+1,qe.insertBefore(gt,b(P))}}}return it(P),!0}return P instanceof l&&!xt(P)||(he==="noscript"||he==="noembed"||he==="noframes")&&En(/<\/no(script|embed|frames)/i,P.innerHTML)?(it(P),!0):(Re&&P.nodeType===da.text&&(V=P.textContent,au([Y,G,ie],qe=>{V=ia(V,qe," ")}),P.textContent!==V&&(oa(t.removed,{element:P.cloneNode()}),P.textContent=V)),Fe(I.afterSanitizeElements,P,null),!1)},pe=function(P,V,he){if(je&&(V==="id"||V==="name")&&(he in n||he in pt))return!1;if(!(xe&&!me[V]&&En(O,V))){if(!(ne&&En(ee,V))){if(!ke[V]||me[V]){if(!(Te(P)&&(K.tagNameCheck instanceof RegExp&&En(K.tagNameCheck,P)||K.tagNameCheck instanceof Function&&K.tagNameCheck(P))&&(K.attributeNameCheck instanceof RegExp&&En(K.attributeNameCheck,V)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(V,P))||V==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&En(K.tagNameCheck,he)||K.tagNameCheck instanceof Function&&K.tagNameCheck(he))))return!1}else if(!Ze[V]){if(!En(N,ia(he,te,""))){if(!((V==="src"||V==="xlink:href"||V==="href")&&P!=="script"&&Jg(he,"data:")===0&&Be[P])){if(!(X&&!En(le,ia(he,te,"")))){if(he)return!1}}}}}}return!0},Te=function(P){return P!=="annotation-xml"&&Fo(P,J)},mt=function(P){Fe(I.beforeSanitizeAttributes,P,null);const{attributes:V}=P;if(!V||Kt(P))return;const he={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke,forceKeepAttr:void 0};let qe=V.length;for(;qe--;){const tt=V[qe],{name:Se,namespaceURI:Ye,value:gt}=tt,Lt=Ie(Se),Rt=gt;let At=Se==="value"?Rt:Xg(Rt);if(he.attrName=Lt,he.attrValue=At,he.keepAttr=!0,he.forceKeepAttr=void 0,Fe(I.uponSanitizeAttribute,P,he),At=he.attrValue,Je&&(Lt==="id"||Lt==="name")&&(ht(Se,P),At=Dt+At),et&&En(/((--!?|])>)|<\/(style|title|textarea)/i,At)){ht(Se,P);continue}if(Lt==="attributename"&&Fo(At,"href")){ht(Se,P);continue}if(he.forceKeepAttr)continue;if(!he.keepAttr){ht(Se,P);continue}if(!Le&&En(/\/>/i,At)){ht(Se,P);continue}Re&&au([Y,G,ie],qt=>{At=ia(At,qt," ")});const Ot=Ie(P.nodeName);if(!pe(Ot,Lt,At)){ht(Se,P);continue}if(y&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Ye)switch(h.getAttributeType(Ot,Lt)){case"TrustedHTML":{At=y.createHTML(At);break}case"TrustedScriptURL":{At=y.createScriptURL(At);break}}if(At!==Rt)try{Ye?P.setAttributeNS(Ye,Se,At):P.setAttribute(Se,At),Kt(P)?it(P):Jl(t.removed)}catch{ht(Se,P)}}Fe(I.afterSanitizeAttributes,P,null)},ct=function we(P){let V=null;const he=on(P);for(Fe(I.beforeSanitizeShadowDOM,P,null);V=he.nextNode();)Fe(I.uponSanitizeShadowNode,V,null),nt(V),mt(V),V.content instanceof u&&we(V.content);Fe(I.afterSanitizeShadowDOM,P,null)};return t.sanitize=function(we){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=null,he=null,qe=null,tt=null;if(lt=!we,lt&&(we="<!-->"),typeof we!="string"&&!fe(we))if(typeof we.toString=="function"){if(we=we.toString(),typeof we!="string")throw la("dirty is not a string, aborting")}else throw la("toString is not a function");if(!t.isSupported)return we;if(Ae||We(P),t.removed=[],typeof we=="string"&&(B=!1),B){if(we.nodeName){const gt=Ie(we.nodeName);if(!q[gt]||Z[gt])throw la("root node is forbidden and cannot be sanitized in-place")}}else if(we instanceof i)V=Nt("<!---->"),he=V.ownerDocument.importNode(we,!0),he.nodeType===da.element&&he.nodeName==="BODY"||he.nodeName==="HTML"?V=he:V.appendChild(he);else{if(!ge&&!Re&&!Ge&&we.indexOf("<")===-1)return y&&ze?y.createHTML(we):we;if(V=Nt(we),!V)return ge?null:ze?E:""}V&&Ke&&it(V.firstChild);const Se=on(B?we:V);for(;qe=Se.nextNode();)nt(qe),mt(qe),qe.content instanceof u&&ct(qe.content);if(B)return we;if(ge){if(Pe)for(tt=W.call(V.ownerDocument);V.firstChild;)tt.appendChild(V.firstChild);else tt=V;return(ke.shadowroot||ke.shadowrootmode)&&(tt=F.call(r,tt,!0)),tt}let Ye=Ge?V.outerHTML:V.innerHTML;return Ge&&q["!doctype"]&&V.ownerDocument&&V.ownerDocument.doctype&&V.ownerDocument.doctype.name&&En(Kd,V.ownerDocument.doctype.name)&&(Ye="<!DOCTYPE "+V.ownerDocument.doctype.name+`>
`+Ye),Re&&au([Y,G,ie],gt=>{Ye=ia(Ye,gt," ")}),y&&ze?y.createHTML(Ye):Ye},t.setConfig=function(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};We(we),Ae=!0},t.clearConfig=function(){at=null,Ae=!1},t.isValidAttribute=function(we,P,V){at||We({});const he=Ie(we),qe=Ie(P);return pe(he,qe,V)},t.addHook=function(we,P){typeof P=="function"&&oa(I[we],P)},t.removeHook=function(we,P){if(P!==void 0){const V=Kg(I[we],P);return V===-1?void 0:Yg(I[we],V,1)[0]}return Jl(I[we])},t.removeHooks=function(we){I[we]=[]},t.removeAllHooks=function(){I=rc()},t}var Jd=Yd();const p2=new Kn({html:!1,linkify:!0,typographer:!0,breaks:!0}),h2={USE_PROFILES:{html:!0},ADD_ATTR:["target","rel","class","colspan","rowspan","scope"],ADD_TAGS:["table","thead","tbody","tfoot","tr","th","td"]};Jd.addHook("afterSanitizeAttributes",e=>{const t=e;if(!t||typeof t.tagName!="string"||t.tagName.toUpperCase()!=="A")return;t.setAttribute("target","_blank");const n=(t.getAttribute("rel")||"").split(/\s+/).filter(Boolean),r=["noopener","noreferrer","nofollow","ugc"],s=Array.from(new Set([...n,...r]));t.setAttribute("rel",s.join(" "))});function Ns(e){if(!e)return"";const t=p2.render(e);return Jd.sanitize(t,h2)}var v2=M('<span class="sender-model-text svelte-1cnmaqf"> </span>'),m2=M('<span class="sender-token-count svelte-1cnmaqf" aria-label="Total tokens used" title="Total tokens used"> </span>'),g2=M('<button type="button" aria-label="View reasoning trace"><!></button>'),_2=M('<button type="button" class="sender-citation-indicator svelte-1cnmaqf" aria-label="View web search details" title="View web search details"><!></button>'),b2=M('<span class="sender-tool-count svelte-1cnmaqf"> </span>'),y2=M('<span class="sender-tool-tokens svelte-1cnmaqf"> </span>'),x2=M('<button type="button" class="sender-tool-indicator svelte-1cnmaqf"><!> <!> <!></button>'),k2=M('<span class="sender-model svelte-1cnmaqf"><!> <!> <!> <!> <!></span>'),w2=M('<span class="sender svelte-1cnmaqf"><span class="sender-label svelte-1cnmaqf"> <!></span></span>'),S2=M('<button type="button" class="attachment-edit svelte-1cnmaqf" aria-label="Edit and resend image" title="Edit and resend image"><!> <span class="attachment-edit-label svelte-1cnmaqf">Edit &amp; send</span></button>'),E2=M('<figure class="attachment-card svelte-1cnmaqf"><div class="attachment-shell svelte-1cnmaqf"><a class="attachment-link svelte-1cnmaqf" target="_blank" rel="noreferrer"><img loading="lazy" class="svelte-1cnmaqf"/></a> <!></div></figure>'),C2=M('<div class="message-attachments svelte-1cnmaqf"></div>'),A2=M('<div class="message-meta svelte-1cnmaqf"><time class="svelte-1cnmaqf"> </time></div>'),T2=M('<button type="button" class="message-action svelte-1cnmaqf" aria-label="Edit message"><!></button> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Retry message"><!></button>',1),D2=M('<button type="button" class="message-action svelte-1cnmaqf" aria-label="View usage details"><!></button>'),M2=M('<article><div><!> <div class="message-content svelte-1cnmaqf"><!> <!></div> <!> <div class="message-actions svelte-1cnmaqf"><button type="button"><!></button> <!> <!> <button type="button" class="message-action svelte-1cnmaqf" aria-label="Delete message"><!></button></div></div></article>');function F2(e,t){wt(t,!1);const n=$(),r=$(),s=$(),u=$();let o=re(t,"message",8),i=re(t,"toolSummary",8),l=re(t,"copied",8,!1),c=re(t,"disableDelete",8,!1);const f=Jt();let d=$(!1),g=$([]),h=$(!1),v=$(!1),T=$("View tool usage"),A=$(null),b=$(null),C=$(null);const w=new Intl.NumberFormat(void 0,{maximumFractionDigits:0});function y(){f("copy",{message:o()})}function E(){f("openReasoning",{message:o()})}function k(){f("openTool",{message:o()})}function D(){f("openWebSearchDetails",{message:o()})}function W(){const de=o().details?.generationId;de&&f("openUsage",{id:de})}function U(){f("edit",{message:o()})}function F(){f("retry",{message:o()})}function I(){c()||f("delete",{message:o()})}function Y(de){f("editAttachment",{message:o(),attachment:de})}function G(de){const B=de.metadata?.filename;return typeof B=="string"&&B.trim()?B:null}function ie(de){const B=G(de);return B?`Open attachment ${B}`:"Open attachment"}function O(de){return G(de)??"Attachment preview"}const ee="America/New_York";function le(de){if(!de)return null;const B=new Date(de);if(Number.isNaN(B.getTime()))return null;const ue=new Intl.DateTimeFormat("en-US",{timeZone:"UTC",weekday:"short",month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(B),ve=Qe=>ue.find(bt=>bt.type===Qe)?.value??"",Me=ve("weekday"),Be=ve("month"),Ne=ve("day"),Ze=ve("year"),He=ve("hour"),Xe=ve("minute"),ot=ve("second");return`${Me} ${Be} ${Ne} ${Ze} ${He}:${Xe}:${ot} UTC`.replace(/\s+/g," ")}function te(de,B){if(!de)return null;const ue=typeof de=="string"&&de?de:String(de),ve=new Date(ue);if(Number.isNaN(ve.getTime()))return{iso:ue,display:ue,tooltip:ue};try{const Be=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:ee,timeZoneName:"short"}).formatToParts(ve),Ne=se=>Be.find(_e=>_e.type===se)?.value??"",Ze=Ne("hour"),He=Ne("minute"),Xe=Ne("second"),ot=Ne("dayPeriod"),Qe=Ne("timeZoneName"),bt=`${Ze}:${He} ${ot}${Qe?` ${Qe}`:""}`.trim(),lt=`${Ze}:${He}:${Xe} ${ot}${Qe?` ${Qe}`:""}`.trim(),Et=new Intl.DateTimeFormat(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:ee,timeZoneName:"short"}),Zt=le(B??de),Wt=`${Et.format(ve)} (${lt})`,tn=Zt?`${Wt}
${Zt}`:Wt;return{iso:ue,display:bt,tooltip:tn}}catch(Me){console.warn("Failed to format timestamp",Me);const Be=le(B??de);return{iso:ue,display:ve.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),tooltip:Be??ue}}}ye(()=>R(i()),()=>{_(n,i()?.tokens?.totalTokens??null)}),ye(()=>a(n),()=>{_(C,a(n)!=null?`${w.format(a(n))} tokens`:null)}),ye(()=>R(i()),()=>{_(A,i()?.count&&i().count>0?`Ã${i().count}`:null)}),ye(()=>R(i()),()=>{_(v,!!i()?.used)}),ye(()=>{},()=>{_(b,null)}),ye(()=>(R(i()),a(C)),()=>{_(T,(()=>{const de=[];return i()?.count&&i().count>0&&de.push(`${i().count} ${i().count===1?"hop":"hops"}`),a(C)&&de.push(`${a(C)}`),de.length===0?"View tool usage":`View tool usage â ${de.join(", ")}`})())}),ye(()=>R(o()),()=>{_(d,(o().details?.reasoning?.length??0)>0||!!o().details?.reasoningStatus)}),ye(()=>(R(o()),a(g),Qr),()=>{const de=o().details?.meta?.web_search_results;o().role==="assistant"&&(console.log("=== FULL MESSAGE DEBUG ==="),console.log("Message ID:",o().id),console.log("Message role:",o().role),console.log("Message.details:",JSON.stringify(o().details,null,2)),console.log("webSearchResults:",de),console.log("Is Array?",Array.isArray(de)),console.log("Length:",Array.isArray(de)?de.length:0),console.log("========================")),Array.isArray(de)&&de.length>0?(_(g,de.map(B=>({url:B.url||"",title:B.title||B.name||"",content:B.snippet||B.content||B.description||""})).filter(B=>B.url)),console.log("Citations extracted:",a(g))):(_(g,Qr(o().details?.citations??null,o().details?.meta??null,o().details??null,o().content??null,{content:typeof o().content=="string"?o().content:null})),console.log("Citations from collectCitations:",a(g)))}),ye(()=>a(g),()=>{_(r,a(g).length>0)}),ye(()=>R(o()),()=>{_(h,!!o().details?.webSearchConfig)}),ye(()=>R(o()),()=>{_(s,(o().attachments?.length??0)>0)}),ye(()=>R(o()),()=>{_(u,te(o().createdAt,o().createdAtUtc))}),Yt(),Ct();var J=M2(),N=m(J);let q;var ae=m(N);{var ke=de=>{var B=w2(),ue=m(B),ve=m(ue),Me=x(ve);{var Be=Ne=>{var Ze=k2(),He=m(Ze);{var Xe=se=>{var _e=v2(),be=m(_e);j(()=>H(be,`â ${R(o()),p(()=>o().details.model)??""}`)),S(se,_e)};L(He,se=>{R(o()),p(()=>o().details?.model)&&se(Xe)})}var ot=x(He,2);{var Qe=se=>{var _e=m2(),be=m(_e);j(()=>H(be,a(C))),S(se,_e)};L(ot,se=>{a(C)&&se(Qe)})}var bt=x(ot,2);{var lt=se=>{var _e=g2();let be;var Oe=m(_e);w1(Oe,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),j(Ie=>{be=Pt(_e,1,"sender-reasoning-indicator svelte-1cnmaqf",null,be,Ie),oe(_e,"title",(R(o()),p(()=>o().details?.reasoningStatus==="streaming"?"Reasoning stream in progress":"View reasoning trace")))},[()=>({streaming:o().details?.reasoningStatus==="streaming"})]),z("click",_e,E),S(se,_e)};L(bt,se=>{a(d)&&se(lt)})}var Et=x(bt,2);{var Zt=se=>{var _e=_2(),be=m(_e);A1(be,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),z("click",_e,D),S(se,_e)};L(Et,se=>{a(h)&&se(Zt)})}var Wt=x(Et,2);{var tn=se=>{var _e=x2(),be=m(_e);F1(be,{size:14,strokeWidth:1.8,"aria-hidden":"true"});var Oe=x(be,2);{var Ie=$e=>{var We=b2(),Ve=m(We);j(()=>H(Ve,a(A))),S($e,We)};L(Oe,$e=>{a(A)&&$e(Ie)})}var at=x(Oe,2);{var pt=$e=>{var We=y2(),Ve=m(We);j(()=>H(Ve,a(b))),S($e,We)};L(at,$e=>{a(b)&&$e(pt)})}j(()=>{oe(_e,"aria-label",a(T)),oe(_e,"title",a(T))}),z("click",_e,k),S(se,_e)};L(Wt,se=>{a(v)&&se(tn)})}S(Ne,Ze)};L(Me,Ne=>{R(o()),p(()=>o().role==="assistant")&&Ne(Be)})}j(()=>H(ve,`${R(o()),p(()=>o().role)??""} `)),S(de,B)};L(ae,de=>{R(o()),p(()=>o().role!=="user")&&de(ke)})}var Q=x(ae,2),K=m(Q);{var Z=de=>{var B=Ee(),ue=ce(B);Go(ue,()=>(R(Ns),R(o()),p(()=>Ns(o().text)))),S(de,B)};L(K,de=>{R(o()),p(()=>o().text)&&de(Z)})}var me=x(K,2);{var ne=de=>{var B=C2();Tt(B,5,()=>(R(o()),p(()=>o().attachments)),ue=>ue.id??ue.displayUrl??ue.deliveryUrl,(ue,ve)=>{var Me=E2(),Be=m(Me),Ne=m(Be),Ze=m(Ne),He=x(Ne,2);{var Xe=ot=>{var Qe=S2(),bt=m(Qe);ml(bt,{size:14,strokeWidth:1.8,"aria-hidden":"true"}),z("click",Qe,()=>Y(a(ve))),S(ot,Qe)};L(He,ot=>{R(o()),p(()=>o().role==="assistant")&&ot(Xe)})}j((ot,Qe)=>{oe(Ne,"href",(a(ve),p(()=>a(ve).displayUrl||a(ve).deliveryUrl))),oe(Ne,"aria-label",ot),oe(Ze,"src",(a(ve),p(()=>a(ve).displayUrl||a(ve).deliveryUrl))),oe(Ze,"alt",Qe)},[()=>(a(ve),p(()=>ie(a(ve)))),()=>(a(ve),p(()=>O(a(ve))))]),S(ue,Me)}),S(de,B)};L(me,de=>{R(o()),p(()=>o().attachments?.length)&&de(ne)})}ls(Q,de=>Qo?.(de));var xe=x(Q,2);{var X=de=>{var B=A2(),ue=m(B),ve=m(ue);j(()=>{oe(ue,"datetime",(a(u),p(()=>a(u).iso))),oe(ue,"title",(a(u),p(()=>a(u).tooltip))),H(ve,(a(u),p(()=>a(u).display)))}),S(de,B)};L(xe,de=>{a(u)&&de(X)})}var Le=x(xe,2),Re=m(Le);let et;var Ge=m(Re);{var Ae=de=>{E1(de,{size:16,strokeWidth:1.6,"aria-hidden":"true"})},Ke=de=>{C1(de,{size:16,strokeWidth:1.6,"aria-hidden":"true"})};L(Ge,de=>{l()?de(Ae):de(Ke,!1)})}var ge=x(Re,2);{var Pe=de=>{var B=T2(),ue=ce(B),ve=m(ue);ml(ve,{size:16,strokeWidth:1.6,"aria-hidden":"true"});var Me=x(ue,2),Be=m(Me);T1(Be,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),z("click",ue,U),z("click",Me,F),S(de,B)};L(ge,de=>{R(o()),p(()=>o().role==="user")&&de(Pe)})}var ze=x(ge,2);{var je=de=>{var B=D2(),ue=m(B);S1(ue,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),z("click",B,W),S(de,B)};L(ze,de=>{R(o()),p(()=>o().role==="assistant"&&o().details?.generationId)&&de(je)})}var Je=x(ze,2),Dt=m(Je);M1(Dt,{size:16,strokeWidth:1.6,"aria-hidden":"true"}),j((de,B)=>{Pt(J,1,(R(o()),p(()=>`message ${o().role}`)),"svelte-1cnmaqf"),q=Pt(N,1,"bubble svelte-1cnmaqf",null,q,de),et=Pt(Re,1,"message-action svelte-1cnmaqf",null,et,B),oe(Re,"aria-label",l()?"Message copied":"Copy message"),Je.disabled=c()},[()=>({"has-attachments":a(s)}),()=>({copied:l()})]),z("click",Re,y),z("click",Je,I),S(e,J),St()}var P2=M('<p class="reasoning-modal-subtitle svelte-2cxve6"> </p>'),I2=M('<span aria-live="polite"><span class="reasoning-status-indicator svelte-2cxve6" aria-hidden="true"></span> </span>'),N2=M('<p class="reasoning-modal-status svelte-2cxve6">No reasoning data received yet.</p>'),L2=M('<pre class="reasoning-modal-text svelte-2cxve6"> </pre>'),O2=M('<div class="reasoning-modal-layer svelte-2cxve6"><button type="button" class="reasoning-modal-backdrop svelte-2cxve6" aria-label="Close reasoning details"></button> <div class="reasoning-modal svelte-2cxve6" role="dialog" aria-modal="true" aria-labelledby="reasoning-modal-title" tabindex="-1"><header class="reasoning-modal-header svelte-2cxve6"><div class="svelte-2cxve6"><h2 id="reasoning-modal-title" class="svelte-2cxve6">Reasoning trace</h2> <!></div> <div class="reasoning-modal-actions svelte-2cxve6"><!> <button type="button" class="modal-close svelte-2cxve6" aria-label="Close reasoning details">Close</button></div></header> <section class="reasoning-modal-body svelte-2cxve6"><!></section></div></div>');function $2(e,t){wt(t,!1);const n=Jt();let r=re(t,"open",8,!1),s=re(t,"messageId",8,null),u=re(t,"segments",24,()=>[]),o=re(t,"status",8,null),i=$(null),l=$(null),c=$("");const f=12;let d=!0,g=!1;function h(y){if(!y||y.length===0)return"";let E="",k;for(const D of y){if(!D||typeof D.text!="string"||D.text.length===0)continue;const W=D.text;k&&D.type&&k!==D.type&&(E.endsWith(`
`)||(E+=`
`),E+=`
`),E.length>0&&!E.endsWith(" ")&&!E.endsWith(`
`)&&!E.endsWith("	")&&!E.endsWith("(")&&!E.endsWith("[")&&!E.endsWith("{")&&!E.endsWith("/")&&!E.endsWith("'")&&!E.endsWith("â")&&!/^[\s,.!?;:)/\]\}'"âºÂ»]/u.test(W)&&W[0]!=="'"&&W[0]!=="â"&&(E+=" "),E+=W,k=D.type??k}return E}Xc(()=>{r()&&!g&&(d=!0),g=r(),r()&&a(i)&&a(i).focus(),r()&&a(l)&&o()==="streaming"&&d&&Sc(l,a(l).scrollTop=a(l).scrollHeight)});function v(){if(!a(l))return;const{scrollTop:y,scrollHeight:E,clientHeight:k}=a(l);d=E-(y+k)<=f}function T(){n("close")}function A(y){r()&&y.key==="Escape"&&(y.preventDefault(),T())}ye(()=>R(u()),()=>{_(c,h(u()))}),Yt(),Ct();var b=Ee();z("keydown",Ca,A);var C=ce(b);{var w=y=>{var E=O2(),k=m(E),D=x(k,2),W=m(D),U=m(W),F=x(m(U),2);{var I=N=>{var q=P2(),ae=m(q);j(()=>H(ae,`Message ID: ${s()??""}`)),S(N,q)};L(F,N=>{s()&&N(I)})}var Y=x(U,2),G=m(Y);{var ie=N=>{var q=I2(),ae=x(m(q));j(()=>{Pt(q,1,`reasoning-status ${o()}`,"svelte-2cxve6"),H(ae,` ${o()==="streaming"?"Streaming":"Complete"}`)}),S(N,q)};L(G,N=>{o()&&N(ie)})}var O=x(G,2),ee=x(W,2),le=m(ee);{var te=N=>{var q=N2();S(N,q)},J=N=>{var q=L2(),ae=m(q);j(()=>H(ae,a(c))),S(N,q)};L(le,N=>{a(c),p(()=>a(c).length===0)?N(te):N(J,!1)})}Dr(ee,N=>_(l,N),()=>a(l)),Dr(D,N=>_(i,N),()=>a(i)),z("click",k,T),z("click",O,T),z("scroll",ee,v),S(y,E)};L(C,y=>{r()&&y(w)})}S(e,b),St()}var R2=M('<p class="status">No tool activity recorded.</p>'),z2=M('<span class="tool-usage-modal-status-pill svelte-12mixwl"> </span>'),B2=M('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Input</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),U2=M('<div class="tool-usage-modal-section svelte-12mixwl"><span class="tool-usage-modal-section-label svelte-12mixwl">Output</span> <div class="tool-usage-modal-block svelte-12mixwl"><!></div></div>'),j2=M('<p class="status tool-usage-status svelte-12mixwl">No details provided.</p>'),q2=M('<li class="tool-usage-modal-item svelte-12mixwl"><div class="tool-usage-modal-item-header svelte-12mixwl"><span class="tool-usage-modal-name svelte-12mixwl"> </span> <!></div> <details class="tool-usage-modal-details svelte-12mixwl"><summary class="tool-usage-modal-summary svelte-12mixwl">Show input &amp; output</summary> <!> <!> <!></details></li>'),H2=M('<ul class="tool-usage-modal-list svelte-12mixwl"></ul>'),W2=M('<p class="model-settings-subtitle"> </p>'),V2=M('<h2 id="tool-usage-modal-title">Tools used</h2> <!>',1);function G2(e,t){wt(t,!1);const n=Jt();let r=re(t,"open",8,!1),s=re(t,"messageId",8,null),u=re(t,"tools",24,()=>[]);function o(){n("close")}Ct();var i=Ee(),l=ce(i);{var c=f=>{Pr(f,{get open(){return r()},labelledBy:"tool-usage-modal-title",modalClass:"tool-usage-modal",bodyClass:"tool-usage-body",closeLabel:"Close tool usage details",$$events:{close:o},children:(d,g)=>{var h=Ee(),v=ce(h);{var T=b=>{var C=R2();S(b,C)},A=b=>{var C=H2();Tt(C,5,u,w=>w.id,(w,y)=>{var E=q2(),k=m(E),D=m(k),W=m(D),U=x(D,2);{var F=te=>{var J=z2(),N=m(J);j(()=>H(N,(a(y),p(()=>a(y).status)))),S(te,J)};L(U,te=>{a(y),p(()=>a(y).status)&&te(F)})}var I=x(k,2),Y=x(m(I),2);{var G=te=>{var J=B2(),N=x(m(J),2),q=m(N);Go(q,()=>(R(Ns),a(y),p(()=>Ns(a(y).input)))),ls(N,ae=>Qo?.(ae)),S(te,J)};L(Y,te=>{a(y),p(()=>a(y).input)&&te(G)})}var ie=x(Y,2);{var O=te=>{var J=U2(),N=x(m(J),2),q=m(N);Go(q,()=>(R(Ns),a(y),p(()=>Ns(a(y).result)))),ls(N,ae=>Qo?.(ae)),S(te,J)};L(ie,te=>{a(y),p(()=>a(y).result)&&te(O)})}var ee=x(ie,2);{var le=te=>{var J=j2();S(te,J)};L(ee,te=>{a(y),p(()=>!a(y).input&&!a(y).result)&&te(le)})}j(()=>H(W,(a(y),p(()=>a(y).name)))),S(w,E)}),S(b,C)};L(v,b=>{R(u()),p(()=>u().length===0)?b(T):b(A,!1)})}S(d,h)},$$slots:{default:!0,heading:(d,g)=>{var h=V2(),v=x(ce(h),2);{var T=A=>{var b=W2(),C=m(b);j(()=>H(C,`Message ID: ${s()??""}`)),S(A,b)};L(v,A=>{s()&&A(T)})}S(d,h)}}})};L(l,f=>{r()&&f(c)})}S(e,i),St()}var Z2=M('<p class="status svelte-1oswcu0">No web search details available.</p>'),K2=M('<div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Context Size</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Amount of search context provided to the model</div></div>'),Y2=M('<div class="detail-item full-width svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Custom Search Prompt</div> <div class="detail-value prompt svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Instructions for how to incorporate search results</div></div>'),J2=M('<div class="details-grid svelte-1oswcu0"><div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Search Engine</div> <div class="detail-value engine svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0"><!></div></div> <div class="detail-item svelte-1oswcu0"><div class="detail-label svelte-1oswcu0">Max Results</div> <div class="detail-value svelte-1oswcu0"> </div> <div class="detail-description svelte-1oswcu0">Number of search results retrieved</div></div> <!> <!></div>'),X2=M('<p class="model-settings-subtitle"> </p>'),Q2=M('<h2 id="web-search-details-modal-title">Web Search Details</h2> <!>',1);function e_(e,t){wt(t,!1);const n=Jt();let r=re(t,"open",8,!1),s=re(t,"messageId",8,null),u=re(t,"details",8,null);function o(){n("close")}function i(g){return g?g==="native"?"Native (OpenAI/Anthropic)":g==="exa"?"Exa":g:"Auto"}function l(g){return g?g.charAt(0).toUpperCase()+g.slice(1):"Default"}Ct();var c=Ee(),f=ce(c);{var d=g=>{Pr(g,{get open(){return r()},labelledBy:"web-search-details-modal-title",modalClass:"web-search-details-modal",bodyClass:"web-search-details-modal-body",closeLabel:"Close web search details",$$events:{close:o},children:(h,v)=>{var T=Ee(),A=ce(T);{var b=w=>{var y=Z2();S(w,y)},C=w=>{var y=J2(),E=m(y),k=x(m(E),2),D=m(k),W=x(k,2),U=m(W);{var F=J=>{var N=un("Automatic selection based on model provider");S(J,N)},I=J=>{var N=Ee(),q=ce(N);{var ae=Q=>{var K=un("Using provider's built-in web search");S(Q,K)},ke=Q=>{var K=Ee(),Z=ce(K);{var me=ne=>{var xe=un("Using Exa's AI-powered search API");S(ne,xe)};L(Z,ne=>{R(u()),p(()=>u().engine==="exa")&&ne(me)},!0)}S(Q,K)};L(q,Q=>{R(u()),p(()=>u().engine==="native")?Q(ae):Q(ke,!1)},!0)}S(J,N)};L(U,J=>{R(u()),p(()=>!u().engine||u().engine===null)?J(F):J(I,!1)})}var Y=x(E,2),G=x(m(Y),2),ie=m(G),O=x(Y,2);{var ee=J=>{var N=K2(),q=x(m(N),2),ae=m(q);j(ke=>H(ae,ke),[()=>(R(u()),p(()=>l(u().contextSize)))]),S(J,N)};L(O,J=>{R(u()),p(()=>u().contextSize)&&J(ee)})}var le=x(O,2);{var te=J=>{var N=Y2(),q=x(m(N),2),ae=m(q);j(()=>H(ae,(R(u()),p(()=>u().searchPrompt)))),S(J,N)};L(le,J=>{R(u()),p(()=>u().searchPrompt&&u().searchPrompt.trim())&&J(te)})}j(J=>{H(D,J),H(ie,(R(u()),p(()=>u().maxResults??5)))},[()=>(R(u()),p(()=>i(u().engine)))]),S(w,y)};L(A,w=>{u()?w(C,!1):w(b)})}S(h,T)},$$slots:{default:!0,heading:(h,v)=>{var T=Q2(),A=x(ce(T),2);{var b=C=>{var w=X2(),y=m(w);j(()=>H(y,`Message ID: ${s()??""}`)),S(C,w)};L(A,C=>{s()&&C(b)})}S(h,T)}}})};L(f,g=>{r()&&g(d)})}S(e,c),St()}var t_=M('<div class="conversation-item svelte-26wxji"><!></div>'),n_=M('<section class="conversation svelte-26wxji" aria-live="polite"></section> <!> <!> <!> <!>',1);function r_(e,t){wt(t,!1);const n=()=>yt(y,"$toolUsageModal",o),r=()=>yt(E,"$reasoningModal",o),s=()=>yt(k,"$citationsModal",o),u=()=>yt(D,"$webSearchDetailsModal",o),[o,i]=rr();let l=re(t,"messages",24,()=>[]),c=re(t,"disableDelete",8,!1),f=$(null),d=$(null),g=null,h=$([]),v=$({}),T=$({});const A="tool";let b=!1;const C=12;let w=!0;const y=Hh(),E=$h(),k=_d(),D=Wh(),W=Jt();Xc(()=>{if(a(f)){if(b){b=!1;return}w&&Sc(f,a(f).scrollTop=a(f).scrollHeight)}});function U(){if(!a(f))return;const{scrollTop:X,scrollHeight:Le,clientHeight:Re}=a(f);w=Le-(X+Re)<=C}function F(X){X&&W("openGenerationDetails",{id:X})}async function I(X){try{await navigator.clipboard.writeText(X.text??"")}catch(Le){console.error("Failed to copy message",Le);return}_(d,X.id),b=!0,g&&clearTimeout(g),g=setTimeout(()=>{b=!0,_(d,null),g=null},2e3)}Us(()=>{g&&clearTimeout(g)});function Y(X){y.openForMessage(l(),a(T),X.id,A)}function G(){y.close()}function ie(X){E.openForMessage(X)}function O(){E.close()}function ee(X){const Le=Qr(X.details?.citations??null,X.details?.meta??null,X.details??null);k.openWithCitations(X.id,Le)}function le(){k.close()}function te(X){D.openForMessage(X)}function J(){D.close()}function N(X){X&&W("deleteMessage",{id:X.id})}function q(X){X&&W("retryMessage",{id:X.id})}function ae(X){X&&W("editMessage",{id:X.id})}function ke(X){!X?.message||!X?.attachment||W("editAssistantAttachment",X)}ye(()=>R(l()),()=>{const X=Uh(l(),A);_(h,X.visibleMessages),_(v,X.assistantToolUsage),_(T,X.messageIndexMap)}),ye(()=>(R(l()),a(T)),()=>{y.syncEntries(l(),a(T),A)}),ye(()=>R(l()),()=>{E.syncFromMessages(l())}),Yt(),Ct();var Q=n_(),K=ce(Q);Tt(K,5,()=>a(h),X=>X.id,(X,Le)=>{var Re=t_(),et=m(Re);{let Ge=Ft(()=>(a(d),a(Le),p(()=>a(d)===a(Le).id)));F2(et,{get message(){return a(Le)},get toolSummary(){return a(v),a(Le),p(()=>a(v)[a(Le).id])},get copied(){return a(Ge)},get disableDelete(){return c()},$$events:{copy:Ae=>I(Ae.detail.message),openTool:Ae=>Y(Ae.detail.message),openReasoning:Ae=>ie(Ae.detail.message),openCitations:Ae=>ee(Ae.detail.message),openWebSearchDetails:Ae=>te(Ae.detail.message),openUsage:Ae=>F(Ae.detail.id),delete:Ae=>N(Ae.detail.message),retry:Ae=>q(Ae.detail.message),edit:Ae=>ae(Ae.detail.message),editAttachment:Ae=>ke(Ae.detail)}})}S(X,Re)}),Dr(K,X=>_(f,X),()=>a(f));var Z=x(K,2);G2(Z,{get open(){return n(),p(()=>n().open)},get messageId(){return n(),p(()=>n().messageId)},get tools(){return n(),p(()=>n().tools)},$$events:{close:G}});var me=x(Z,2);$2(me,{get open(){return r(),p(()=>r().open)},get messageId(){return r(),p(()=>r().messageId)},get segments(){return r(),p(()=>r().segments)},get status(){return r(),p(()=>r().status)},$$events:{close:O}});var ne=x(me,2);nv(ne,{get open(){return s(),p(()=>s().open)},get messageId(){return s(),p(()=>s().messageId)},get citations(){return s(),p(()=>s().citations)},$$events:{close:le}});var xe=x(ne,2);e_(xe,{get open(){return u(),p(()=>u().open)},get messageId(){return u(),p(()=>u().messageId)},get details(){return u(),p(()=>u().details)},$$events:{close:J}}),z("scroll",K,U),S(e,Q),St(),i()}const s_=[{key:"temperature",aliases:["temperature"],label:"Temperature",description:"Higher values increase randomness.",fallback:{type:"number",min:0,max:2,step:.1}},{key:"top_p",aliases:["top_p"],label:"Top P",description:"Limits sampling to a cumulative probability mass.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_k",aliases:["top_k"],label:"Top K",description:"Restrict sampling to the top K tokens.",fallback:{type:"integer",min:1,max:400,step:1}},{key:"min_p",aliases:["min_p"],label:"Min P",description:"Nucleus sampling floor; smaller values widen sampling.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"top_a",aliases:["top_a"],label:"Top A",description:"Alternative nucleus control for certain models.",fallback:{type:"number",min:0,max:1,step:.01}},{key:"max_tokens",aliases:["max_tokens","max_output_tokens"],label:"Max completion tokens",description:"Upper bound on tokens generated in the response.",fallback:{type:"integer",min:1,max:32768,step:1}},{key:"frequency_penalty",aliases:["frequency_penalty"],label:"Frequency penalty",description:"Penalize frequent tokens; useful to reduce repetition.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"presence_penalty",aliases:["presence_penalty"],label:"Presence penalty",description:"Encourage introducing new topics by penalizing seen tokens.",fallback:{type:"number",min:-2,max:2,step:.05}},{key:"repetition_penalty",aliases:["repetition_penalty"],label:"Repetition penalty",description:"Higher values push the model away from repeating itself.",fallback:{type:"number",min:0,max:2,step:.05}},{key:"top_logprobs",aliases:["top_logprobs"],label:"Top logprobs",description:"Return log probabilities for the top N tokens per step.",fallback:{type:"integer",min:0,max:20,step:1}},{key:"seed",aliases:["seed"],label:"Seed",description:"Deterministic seed (when supported).",fallback:{type:"integer",min:0,step:1}},{key:"parallel_tool_calls",aliases:["parallel_tool_calls"],label:"Parallel tool calls",description:"Allow the model to invoke multiple tools simultaneously.",fallback:{type:"boolean"}},{key:"structured_outputs",aliases:["structured_outputs","json_schema","response_format"],label:"Structured outputs",description:"Favor structured responses when supported by the provider.",fallback:{type:"boolean"}},{key:"safe_prompt",aliases:["safe_prompt"],label:"Safe prompt",description:"Ask the provider to apply additional safety prompting.",fallback:{type:"boolean"}},{key:"raw_mode",aliases:["raw_mode"],label:"Raw mode",description:"Bypass guardrails when the provider allows it.",fallback:{type:"boolean"}}];function wa(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t?t.replace(/[^a-z0-9_\-]/g,"_"):null}function Oo(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"&&e.trim()){const t=Number(e);if(Number.isFinite(t))return t}}function Xd(e){const t={};if(!e||!e.capabilities)return t;const r=e.capabilities.parameters;if(!r||typeof r!="object")return t;function s(u,o){const i=wa(u);if(!i||!o||typeof o!="object")return;const l=o,c={},f=l.type??l.datatype??l.kind;typeof f=="string"&&(c.type=f.toLowerCase());const d=l.min??l.minimum??l.lower_bound??l.minimum_value,g=l.max??l.maximum??l.upper_bound??l.maximum_value,h=l.step??l.increment??l.resolution,v=Oo(d),T=Oo(g),A=Oo(h);v!==void 0&&(c.min=v),T!==void 0&&(c.max=T),A!==void 0&&(c.step=A),t[i]=c;const b=l.properties;if(b&&typeof b=="object")for(const[C,w]of Object.entries(b))s(`${u}.${C}`,w)}for(const[u,o]of Object.entries(r))s(u,o);return t}function Qd(e){const t=new Set;if(!e)return t;const n=e.supported_parameters_normalized;if(Array.isArray(n))for(const s of n){const u=wa(s);u&&t.add(u)}const r=e.supported_parameters;if(Array.isArray(r))for(const s of r){const u=wa(s);u&&t.add(u)}if(t.size===0)for(const s of Ei(e)){const u=wa(s);u&&t.add(u)}return t}function a_(e,t){const n=e.fallback;if(n.type==="boolean")return{key:e.key,label:e.label,description:e.description,type:"boolean"};const r={key:e.key,label:e.label,description:e.description,type:n.type,min:n.min,max:n.max,step:n.step};if(!t)return r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r;const s=t.type?.toLowerCase();return s==="boolean"?{key:e.key,label:e.label,description:e.description,type:"boolean"}:(s==="integer"||s==="int"?r.type="integer":(s==="number"||s==="float"||s==="double")&&(r.type="number"),t.min!==void 0&&(r.min=t.min),t.max!==void 0&&(r.max=t.max),t.step!==void 0&&(r.step=t.step),r.type==="integer"&&(!r.step||r.step<=0)&&(r.step=1),r)}function u_(e,t){const n=Qd(e),r=new Set(t?Object.keys(t):[]),s=Xd(e),u=[],o=new Set;for(const i of s_){if(!i.aliases.some(d=>n.has(d))&&!r.has(i.key)||o.has(i.key))continue;const c=i.aliases.map(d=>s[d]).find(d=>d!==void 0),f=a_(i,c);"min"in f&&"max"in f&&f.min!==void 0&&f.max!==void 0&&f.min>=f.max&&(f.min=void 0,f.max=void 0),u.push(f),o.add(i.key)}return u}function ef(e,t){const n=e?.[t];return typeof n=="number"&&Number.isFinite(n)?n:void 0}function Mu(e,t){let n=e;return t.min!==void 0&&(n=Math.max(n,t.min)),t.max!==void 0&&(n=Math.min(n,t.max)),n}function tf(e){const t=e.min??0,n=e.max??t;if(t<=0&&n>=0)return Mu(0,e);const r=t+(n-t)/2;return Mu(r,e)}function o_(e,t){const n=ef(t,e.key);return n!==void 0?Mu(n,e):tf(e)}function sc(e){if(e.step&&e.step>0)return e.step;if(e.type==="integer")return 1;const t=e.min??0,r=(e.max??t+1)-t;if(!Number.isFinite(r)||r<=0)return .01;const s=r/100;return s>0?s:.01}function i_(e,t){const n=e.min??0,s=(e.max??n)-n;if(!Number.isFinite(s)||s===0)return"0%";const o=(Mu(t??tf(e),e)-n)/s*100;return`${Math.min(100,Math.max(0,o))}%`}const l_=new Intl.NumberFormat(void 0,{maximumFractionDigits:4});function Fu(e){return typeof e=="number"&&Number.isFinite(e)?String(e):""}function fa(e,t){return t.type==="integer"?String(Math.round(e)):l_.format(e)}var c_=M('<div class="setting-range"><div class="setting-range-header"><span> </span> <button type="button" class="range-reset">Use default</button></div> <input class="range-input" type="range"/> <div class="range-extents"><span> </span> <span> </span></div></div>');function d_(e,t){wt(t,!1);const n=$(),r=$(),s=$(),u=$(),o=$();let i=re(t,"field",8),l=re(t,"parameters",8),c=re(t,"numericValue",8),f=re(t,"hasCustom",8,!1),d=re(t,"handlers",8);ye(()=>(R(i()),R(l())),()=>{_(n,o_(i(),l()))}),ye(()=>(R(i()),R(c())),()=>{_(r,i_(i(),c()))}),ye(()=>(R(c()),R(i())),()=>{_(s,c()!==void 0?fa(c(),i()):"Provider default")}),ye(()=>(R(i()),a(n)),()=>{_(u,i().min??a(n))}),ye(()=>(R(i()),a(n)),()=>{_(o,i().max??a(n))}),Yt(),Ct();var g=c_(),h=m(g),v=m(h);let T;var A=m(v),b=x(v,2),C=x(h,2),w=x(C,2),y=m(w),E=m(y),k=x(y,2),D=m(k);j((W,U,F,I)=>{T=Pt(v,1,"range-value",null,T,W),H(A,a(s)),b.disabled=!f(),oe(C,"min",(R(i()),p(()=>i().min))),oe(C,"max",(R(i()),p(()=>i().max))),oe(C,"step",U),Mt(C,a(n)),hn(C,`--slider-fill:${a(r)};`),oe(C,"aria-valuemin",(R(i()),p(()=>i().min))),oe(C,"aria-valuemax",(R(i()),p(()=>i().max))),oe(C,"aria-valuenow",c()??void 0),oe(C,"aria-valuetext",a(s)),H(E,F),H(D,I)},[()=>({default:!f()}),()=>(R(sc),R(i()),p(()=>sc(i()))),()=>(R(fa),a(u),R(i()),p(()=>fa(a(u),i()))),()=>(R(fa),a(o),R(i()),p(()=>fa(a(o),i())))]),z("click",b,()=>d().onRangeReset(i().key)),z("input",C,W=>d().onSliderInput(i().key,W)),S(e,g),St()}var f_=M('<span class="setting-hint"> </span>'),p_=M('<input class="input-control" type="number" placeholder="Default"/>'),h_=M('<div class="setting-boolean"><input type="checkbox"/> <span>Enabled</span></div>'),v_=M('<label class="setting"><div class="setting-header"><span class="setting-label"> </span> <!></div> <!></label>');function m_(e,t){wt(t,!1);let n=re(t,"field",8),r=re(t,"parameters",8),s=re(t,"handlers",8);const u=b=>b.type==="number"||b.type==="integer";let o=$(),i=$(!1);ye(()=>(R(n()),R(r())),()=>{u(n())?_(o,ef(r(),n().key)):_(o,void 0)}),ye(()=>(R(r()),R(n())),()=>{_(i,r()?.[n().key]!=null)}),Yt(),Ct();var l=v_(),c=m(l),f=m(c),d=m(f),g=x(f,2);{var h=b=>{var C=f_(),w=m(C);j(()=>H(w,(R(n()),p(()=>n().description)))),S(b,C)};L(g,b=>{R(n()),p(()=>n().description)&&b(h)})}var v=x(c,2);{var T=b=>{var C=Ee(),w=ce(C);{var y=k=>{d_(k,{get field(){return n()},get parameters(){return r()},get numericValue(){return a(o)},get hasCustom(){return a(i)},get handlers(){return s()}})},E=k=>{var D=p_();j(W=>{oe(D,"inputmode",(R(n()),p(()=>n().type==="integer"?"numeric":"decimal"))),oe(D,"step",(R(n()),p(()=>n().step??(n().type==="integer"?1:"any")))),oe(D,"min",(R(n()),p(()=>n().min??void 0))),oe(D,"max",(R(n()),p(()=>n().max??void 0))),Mt(D,W)},[()=>(R(Fu),R(r()),R(n()),p(()=>Fu(r()?.[n().key])))]),z("change",D,W=>s().onNumberChange(n().key,W)),S(k,D)};L(w,k=>{R(n()),p(()=>n().min!==void 0&&n().max!==void 0)?k(y):k(E,!1)})}S(b,C)},A=b=>{var C=Ee(),w=ce(C);{var y=E=>{var k=h_(),D=m(k);j(()=>{oe(D,"id",(R(n()),p(()=>`field-${n().key}`))),In(D,(R(r()),R(n()),p(()=>r()?.[n().key]===!0)))}),z("change",D,W=>s().onBooleanChange(n().key,W)),S(E,k)};L(w,E=>{R(n()),p(()=>n().type==="boolean")&&E(y)},!0)}S(b,C)};L(v,b=>{R(n()),p(()=>u(n()))?b(T):b(A,!1)})}j(()=>H(d,(R(n()),p(()=>n().label)))),S(e,l),St()}var g_=M("<option> </option>"),__=M('<label class="reasoning-field"><span>Effort</span> <select class="select-control"><option>Provider default</option><!></select></label>'),b_=M('<label class="reasoning-field"><span>Max reasoning tokens</span> <input class="input-control" type="number" inputmode="numeric" placeholder="Default"/></label>'),y_=M('<section class="setting reasoning"><div class="setting-header"><span class="setting-label">Reasoning tokens</span> <span class="setting-hint">Adjust effort, budget, or output visibility when the provider supports reasoning traces.</span></div> <div class="reasoning-controls"><label class="reasoning-field"><span>Enabled behavior</span> <select class="select-control"><option>Use provider default</option><option>Force enabled</option><option>Disable reasoning</option></select></label> <!> <!> <label class="reasoning-toggle"><input type="checkbox"/> <span>Exclude reasoning from responses</span></label></div></section>');function x_(e,t){wt(t,!1);let n=re(t,"reasoning",8),r=re(t,"handlers",8);Ct();var s=y_(),u=x(m(s),2),o=m(u),i=x(m(o),2),l=m(i);l.value=l.__value="default";var c=x(l);c.value=c.__value="on";var f=x(c);f.value=f.__value="off";var d;Rn(i);var g=x(o,2);{var h=C=>{var w=__(),y=x(m(w),2),E=m(y);E.value=E.__value="";var k=x(E);Tt(k,1,()=>(R(n()),p(()=>n().options)),Ln,(W,U)=>{var F=g_(),I=m(F),Y={};j(G=>{H(I,G),Y!==(Y=a(U))&&(F.value=(F.__value=a(U))??"")},[()=>(a(U),p(()=>a(U).charAt(0).toUpperCase()+a(U).slice(1)))]),S(W,F)});var D;Rn(y),j(()=>{oe(w,"aria-disabled",(R(n()),p(()=>!n().effort.supported))),y.disabled=(R(n()),p(()=>!n().effort.supported)),D!==(D=(R(n()),p(()=>n().effort.supported?n().effort.value??"":"")))&&(y.value=(y.__value=(R(n()),p(()=>n().effort.supported?n().effort.value??"":"")))??"",Tn(y,(R(n()),p(()=>n().effort.supported?n().effort.value??"":""))))}),z("change",y,function(...W){r().onEffortChange?.apply(this,W)}),S(C,w)};L(g,C=>{R(n()),p(()=>n().effort.showField)&&C(h)})}var v=x(g,2);{var T=C=>{var w=b_(),y=x(m(w),2);j(E=>{oe(w,"aria-disabled",(R(n()),p(()=>!n().maxTokens.supported))),oe(y,"min",(R(n()),p(()=>n().schemas.maxTokens?.min??void 0))),oe(y,"max",(R(n()),p(()=>n().schemas.maxTokens?.max??void 0))),oe(y,"step",(R(n()),p(()=>n().schemas.maxTokens?.step??1))),y.disabled=(R(n()),p(()=>!n().maxTokens.supported)),Mt(y,E)},[()=>(R(Fu),R(n()),p(()=>Fu(n().maxTokens.value)))]),z("change",y,function(...E){r().onMaxTokensChange?.apply(this,E)}),S(C,w)};L(v,C=>{R(n()),p(()=>n().maxTokens.showField)&&C(T)})}var A=x(v,2),b=m(A);j(()=>{d!==(d=(R(n()),p(()=>n().enabledSelection)))&&(i.value=(i.__value=(R(n()),p(()=>n().enabledSelection)))??"",Tn(i,(R(n()),p(()=>n().enabledSelection)))),In(b,(R(n()),p(()=>n().exclude)))}),z("change",i,function(...C){r().onEnabledChange?.apply(this,C)}),z("change",b,function(...C){r().onExcludeChange?.apply(this,C)}),S(e,s),St()}const k_=["reasoning","reasoning_effort","reasoning_max_tokens","reasoning_exclude","reasoning_enabled","include_reasoning"],ou={effort:["reasoning.effort","reasoning_effort"],maxTokens:["reasoning.max_tokens","reasoning_max_tokens","thinking_budget"],exclude:["reasoning.exclude","reasoning_exclude","include_reasoning"],enabled:["reasoning.enabled","reasoning_enabled"]};function w_(e){if(!e)return!1;const t=["openai/o1","openai/o3","openai/gpt-5","gpt-5","/grok","grok-"],n=[],r=u=>{if(typeof u!="string")return;const o=u.trim().toLowerCase();o&&n.push(o)};if(r(e.id),r(e.name),Array.isArray(e.tags))for(const u of e.tags)r(u);const s=e;return r(s.series),r(s.family),n.some(u=>t.some(o=>u.includes(o)))}function S_(e){const t=[];for(const n of e){const r=wa(n);r&&t.push(r)}return t}function E_(){return an(rn,e=>e.data?.parameters??null)}function C_(e,t){return an([e,t],([n,r])=>u_(n,r))}function A_(e){return an(e,t=>!!(t&&Object.keys(t).length>0))}function T_(e){return an(e,t=>Xd(t))}function D_(e){return an(e,t=>Qd(t))}function M_(e){return an(e,t=>{const n=r=>{for(const s of S_(r)){const u=t[s];if(u)return u}};return{effort:n(ou.effort),maxTokens:n(ou.maxTokens),exclude:n(ou.exclude),enabled:n(ou.enabled)}})}function F_(e){return an(e,t=>t?.reasoning??null)}function P_(e,t,n,r,s){const u=["low","medium","high"];return an([e,t,n,r,s],([o,i,l,c,f])=>{const d=i?.effort??null,g=i?.max_tokens??null,h=i?.exclude===!0,v=i?i.enabled===!0?"on":i.enabled===!1?"off":"default":"default",T=(()=>{if(o?.reasoning&&Object.keys(o.reasoning).length>0)return!0;for(const W of k_)if(l.has(W))return!0;for(const W of Object.values(c))if(W)return!0;return!1})(),A=!!(c.effort||l.has("reasoning_effort")||w_(f)),b=!!(c.maxTokens||l.has("reasoning_max_tokens")),C=d!==null,w=g!==null;return{supported:T,schemas:c,enabledSelection:v,options:u,effort:{value:d,supported:T&&(A||C),showField:A||C},maxTokens:{value:g,supported:T&&(b||w),showField:b||w},exclude:h}})}function I_(){return Gt(null)}function N_(){const e=Gt(!1),t=Gt(""),n=I_(),r=E_(),s=C_(n,r),u=A_(r),o=T_(n),i=D_(n),l=M_(o),c=F_(r),f=P_(r,c,i,l,n);let d=null;const h=an([e,t,rn],([w,y,E])=>({open:w,selectedModel:y,settingsState:E})).subscribe(({open:w,selectedModel:y,settingsState:E})=>{!w||!y||(E.data&&E.data.model!==y&&rn.setModel(y),d!==y&&(d=y,rn.clearErrors(),rn.load(y)))});Us(()=>{h()});const v={onSliderInput:(w,y)=>{const E=y.currentTarget;if(!E)return;const k=Number(E.value);Number.isFinite(k)&&rn.updateParameter(w,k)},onRangeReset:w=>{rn.updateParameter(w,null)},onNumberChange:(w,y)=>{const E=y.currentTarget;if(!E)return;const k=E.value.trim();if(!k){rn.updateParameter(w,null);return}const D=Number(k);if(!Number.isFinite(D)){rn.updateParameter(w,null);return}rn.updateParameter(w,D)},onBooleanChange:(w,y)=>{const E=y.currentTarget;E&&rn.updateParameter(w,E.checked)}};function T(w){const y=rt(c)?{...rt(c)}:{};w(y);for(const E of Object.keys(y)){const k=y[E];(k==null||typeof k=="string"&&k.trim()==="")&&delete y[E]}Object.keys(y).length===0?rn.updateParameter("reasoning",null):rn.updateParameter("reasoning",y)}const A={onEnabledChange:w=>{const y=w.currentTarget;if(!y)return;const E=y.value;T(k=>{E==="on"?k.enabled=!0:E==="off"?k.enabled=!1:delete k.enabled})},onEffortChange:w=>{const y=w.currentTarget;if(!y)return;const E=y.value;T(k=>{E?k.effort=E:delete k.effort})},onMaxTokensChange:w=>{const y=w.currentTarget;if(!y)return;const E=y.value.trim();if(!E){T(D=>{delete D.max_tokens});return}const k=Number(E);if(!Number.isFinite(k)||k<=0){T(D=>{delete D.max_tokens});return}T(D=>{D.max_tokens=k})},onExcludeChange:w=>{const y=w.currentTarget;if(!y)return;const E=y.checked;T(k=>{E?k.exclude=!0:delete k.exclude})}};let b={open:!1,selectedModel:"",model:null};function C(w){w.open!==b.open&&(e.set(w.open),b.open=w.open),w.selectedModel!==b.selectedModel&&(t.set(w.selectedModel),b.selectedModel=w.selectedModel),w.model!==b.model&&(n.set(w.model),b.model=w.model)}return{settingsState:rn,parameters:r,fields:s,hasCustomParameters:u,reasoning:f,parameterHandlers:v,reasoningHandlers:A,resetToDefaults:()=>rn.resetToDefaults(),flushSave:()=>rn.flushSave(),sync:C}}var L_=M('<p class="status">Loading settingsâ¦</p>'),O_=M('<p class="status error"> </p>'),$_=M('<p class="status">This model does not expose configurable parameters.</p>'),R_=M('<form class="settings-grid"></form>'),z_=M('<div class="settings-stack" aria-live="polite"><!> <!></div>'),B_=M('<h2 id="model-settings-title">Model settings</h2> <p class="model-settings-subtitle"><!></p>',1),U_=M('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),j_=M('<span class="status error"> </span>'),q_=M('<span class="status">Saving changesâ¦</span>'),H_=M('<span class="status">Pending changes; closing this modal will save.</span>'),W_=M('<span class="status">Changes save when you close this modal.</span>'),V_=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function G_(e,t){wt(t,!1);const n=()=>yt(h,"$settingsState",i),r=()=>yt(A,"$hasCustomParameters",i),s=()=>yt(b,"$reasoning",i),u=()=>yt(T,"$fields",i),o=()=>yt(v,"$parameters",i),[i,l]=rr();let c=re(t,"open",8,!1),f=re(t,"selectedModel",8,""),d=re(t,"model",8,null);const g=Jt(),{settingsState:h,parameters:v,fields:T,hasCustomParameters:A,reasoning:b,parameterHandlers:C,reasoningHandlers:w,resetToDefaults:y,flushSave:E,sync:k}=N_();let D=!1;async function W(){if(D||n().saving)return;D=!0,await E()&&g("close"),D=!1}ye(()=>(R(c()),R(f()),R(d())),()=>{k({open:c(),selectedModel:f(),model:d()})}),Yt(),Ct();var U=Ee(),F=ce(U);{var I=Y=>{Pr(Y,{get open(){return c()},labelledBy:"model-settings-title",closeLabel:"Close model settings",$$events:{close:()=>void W()},children:(G,ie)=>{var O=Ee(),ee=ce(O);{var le=J=>{var N=L_();S(J,N)},te=J=>{var N=Ee(),q=ce(N);{var ae=Q=>{var K=O_(),Z=m(K);j(()=>H(Z,(n(),p(()=>n().error)))),S(Q,K)},ke=Q=>{var K=Ee(),Z=ce(K);{var me=xe=>{var X=$_();S(xe,X)},ne=xe=>{var X=z_(),Le=m(X);{var Re=Ae=>{x_(Ae,{get reasoning(){return s()},get handlers(){return w}})};L(Le,Ae=>{s(),p(()=>s().supported)&&Ae(Re)})}var et=x(Le,2);{var Ge=Ae=>{var Ke=R_();Tt(Ke,5,u,ge=>ge.key,(ge,Pe)=>{m_(ge,{get field(){return a(Pe)},get parameters(){return o()},get handlers(){return C}})}),S(Ae,Ke)};L(et,Ae=>{u(),p(()=>u().length)&&Ae(Ge)})}S(xe,X)};L(Z,xe=>{s(),u(),p(()=>!s().supported&&!u().length)?xe(me):xe(ne,!1)})}S(Q,K)};L(q,Q=>{n(),p(()=>n().error)?Q(ae):Q(ke,!1)},!0)}S(J,N)};L(ee,J=>{n(),p(()=>n().loading)?J(le):J(te,!1)})}S(G,O)},$$slots:{default:!0,heading:(G,ie)=>{var O=B_(),ee=x(ce(O),2),le=m(ee);{var te=N=>{var q=un();j(()=>H(q,(R(d()),p(()=>d().name)))),S(N,q)},J=N=>{var q=Ee(),ae=ce(q);{var ke=K=>{var Z=un();j(()=>H(Z,(R(d()),p(()=>d().id)))),S(K,Z)},Q=K=>{var Z=un();j(()=>H(Z,f())),S(K,Z)};L(ae,K=>{R(d()),p(()=>d()?.id)?K(ke):K(Q,!1)},!0)}S(N,q)};L(le,N=>{R(d()),p(()=>d()?.name)?N(te):N(J,!1)})}S(G,O)},actions:(G,ie)=>{var O=U_();j(()=>O.disabled=(r(),n(),p(()=>!r()||n().saving))),z("click",O,y),S(G,O)},footer:(G,ie)=>{var O=V_(),ee=m(O);{var le=J=>{var N=j_(),q=m(N);j(()=>H(q,(n(),p(()=>n().saveError)))),S(J,N)},te=J=>{var N=Ee(),q=ce(N);{var ae=Q=>{var K=q_();S(Q,K)},ke=Q=>{var K=Ee(),Z=ce(K);{var me=xe=>{var X=H_();S(xe,X)},ne=xe=>{var X=W_();S(xe,X)};L(Z,xe=>{n(),p(()=>n().dirty)?xe(me):xe(ne,!1)},!0)}S(Q,K)};L(q,Q=>{n(),p(()=>n().saving)?Q(ae):Q(ke,!1)},!0)}S(J,N)};L(ee,J=>{n(),p(()=>n().saveError)?J(le):J(te,!1)})}S(G,O)}}})};L(F,Y=>{c()&&Y(I)})}S(e,U),St(),l()}var Z_=M('<div class="suggestion-item svelte-1r3jne1"><button type="button" class="suggestion-btn svelte-1r3jne1"> </button> <button type="button" class="delete-btn svelte-1r3jne1" title="Delete suggestion">Ã</button></div>'),K_=M('<div class="add-form svelte-1r3jne1"><input type="text" placeholder="Label" class="svelte-1r3jne1"/> <input type="text" placeholder="Prompt text" class="svelte-1r3jne1"/> <button type="button" class="add-submit-btn svelte-1r3jne1">Add</button> <button type="button" class="add-cancel-btn svelte-1r3jne1">Cancel</button></div>'),Y_=M('<button type="button" class="add-btn svelte-1r3jne1" aria-label="Add suggested prompt">+</button>'),J_=M("<section><!> <!></section>");function X_(e,t){wt(t,!1);const n=Jt();let r=re(t,"suggestions",24,()=>[]),s=re(t,"deleting",8,null),u=re(t,"pwaMode",8,!1),o=$(!1),i=$(""),l=$("");function c(E){n("select",{text:E})}function f(E,k){k.stopPropagation(),n("delete",{index:E})}function d(){_(o,!0)}function g(){a(i).trim()&&a(l).trim()&&(n("add"),_(i,""),_(l,""),_(o,!1))}function h(){_(i,""),_(l,""),_(o,!1)}function v(){const E=a(i).trim(),k=a(l).trim();return E&&k?{label:E,text:k}:null}var T={getNewSuggestion:v};Ct();var A=J_();let b;var C=m(A);Tt(C,3,r,E=>E.text,(E,k,D)=>{var W=Z_(),U=m(W),F=m(U),I=x(U,2);j(()=>{H(F,(a(k),p(()=>a(k).label))),I.disabled=s()===a(D)}),z("click",U,()=>c(a(k).text)),z("click",I,Y=>f(a(D),Y)),S(E,W)});var w=x(C,2);{var y=E=>{var k=Ee(),D=ce(k);{var W=F=>{var I=K_(),Y=m(I),G=x(Y,2),ie=x(G,2),O=x(ie,2);cr(Y,()=>a(i),ee=>_(i,ee)),z("keydown",Y,ee=>ee.key==="Enter"&&g()),cr(G,()=>a(l),ee=>_(l,ee)),z("keydown",G,ee=>ee.key==="Enter"&&g()),z("click",ie,g),z("click",O,h),S(F,I)},U=F=>{var I=Y_();z("click",I,d),S(F,I)};L(D,F=>{a(o)?F(W):F(U,!1)})}S(E,k)};L(w,E=>{u()||E(y)})}return j(E=>b=Pt(A,1,"suggestions svelte-1r3jne1",null,b,E),[()=>({"pwa-layout":u()})]),S(e,A),B0(t,"getNewSuggestion",v),St(T)}const Q_=[{id:"nova-3",name:"Nova 3 (Latest)"},{id:"nova-2",name:"Nova 2 (General)"},{id:"nova-2-medical",name:"Nova 2 Medical"},{id:"nova-2-phonecall",name:"Nova 2 Phone Call"},{id:"nova-2-meeting",name:"Nova 2 Meeting"},{id:"nova-2-finance",name:"Nova 2 Finance"},{id:"nova-2-conversationalai",name:"Nova 2 Conversational AI"},{id:"nova-2-drivethru",name:"Nova 2 Drive-Thru"}],eb={loading:!1,adding:!1,deleting:null,error:null,items:[]};function tb(){const e=Gt({...eb});async function t(){e.update(u=>({...u,loading:!0,error:null}));try{const u=await fetch(`${$t}/api/suggestions`);if(!u.ok)throw new Error(`HTTP ${u.status}`);const o=await u.json();e.update(i=>({...i,loading:!1,items:o.suggestions}))}catch(u){const o=u instanceof Error?u.message:"Failed to load suggestions.";e.update(i=>({...i,loading:!1,error:o}))}}async function n(u,o){e.update(i=>({...i,adding:!0,error:null}));try{const i=await fetch(`${$t}/api/suggestions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:u,text:o})});if(!i.ok)throw new Error(`HTTP ${i.status}`);const l=await i.json();return e.update(c=>({...c,adding:!1,items:l.suggestions})),l.suggestions}catch(i){const l=i instanceof Error?i.message:"Failed to add suggestion.";return e.update(c=>({...c,adding:!1,error:l})),null}}async function r(u){e.update(o=>({...o,deleting:u,error:null}));try{const o=await fetch(`${$t}/api/suggestions/${u}`,{method:"DELETE"});if(!o.ok)throw new Error(`HTTP ${o.status}`);const i=await o.json();return e.update(l=>({...l,deleting:null,items:i.suggestions})),i.suggestions}catch(o){const i=o instanceof Error?o.message:"Failed to delete suggestion.";return e.update(l=>({...l,deleting:null,error:i})),null}}function s(){e.update(u=>({...u,error:null}))}return{subscribe:e.subscribe,load:t,add:n,remove:r,clearError:s}}const Fs=tb(),$o={loading:!1,saving:!1,error:null,saveError:null,value:"",initialValue:"",dirty:!1};function nb(){const e=Gt({...$o});function t(i,l){return i.trim()!==l.trim()}function n(i){return i.system_prompt?.trim()??""}async function r(){e.set({...$o,loading:!0});try{const i=await X0(),l=n(i);e.set({loading:!1,saving:!1,error:null,saveError:null,value:l,initialValue:l,dirty:!1})}catch(i){const l=i instanceof Error?i.message:"Failed to load system prompt.";e.set({...$o,loading:!1,error:l})}}function s(i){e.update(l=>{const c=i;return{...l,value:c,dirty:t(c,l.initialValue),saveError:null}})}async function u(){let i="";e.update(c=>(i=c.value,{...c,saving:!0,saveError:null}));const l={system_prompt:i.trim()||null};try{const c=await Q0(l),f=n(c);e.set({loading:!1,saving:!1,error:null,saveError:null,value:f,initialValue:f,dirty:!1})}catch(c){const f=c instanceof Error?c.message:"Failed to save system prompt.";e.update(d=>({...d,saving:!1,saveError:f}))}}function o(){e.update(i=>({...i,value:i.initialValue,dirty:!1,saveError:null}))}return{subscribe:e.subscribe,load:r,save:u,reset:o,updateValue:s}}function Oi(e,t){const n=()=>{e.style.height="auto",e.style.height=`${e.scrollHeight}px`},r=()=>n();return n(),e.addEventListener("input",r),{update:()=>n(),destroy:()=>{e.removeEventListener("input",r)}}}var rb=M('<p class="status">Loading system promptâ¦</p>'),sb=M('<p class="status error"> </p>'),ab=M('<p class="status error"> </p>'),ub=M('<textarea class="system-prompt textarea-control" rows="6" placeholder="Provide guidance for the assistant to follow at the start of new conversations."></textarea> <!>',1),ob=M('<p class="status error"> </p>'),ib=M('<p class="status">Loading presetsâ¦</p>'),lb=M('<p class="status">No presets saved yet.</p>'),cb=M('<span class="default-badge" title="Default preset">Default</span>'),db=M('<span class="filters-badge" title="Contains model explorer filters"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> Filters</span>'),fb=M('<button type="button" class="btn btn-ghost btn-small" title="Set as default preset to load on startup"> </button>'),pb=M('<li class="preset-item"><div class="meta"><div class="name"> <!> <!></div> <div class="details"><span class="model"> </span> <span class="timestamps"><span title="Created at"> </span> <span aria-hidden="true">Â·</span> <span title="Updated at"> </span></span></div></div> <div class="actions"><button type="button" class="btn btn-ghost btn-small" title="Apply this preset (model, settings, system prompt, MCP servers)"> </button> <button type="button" class="btn btn-ghost btn-small" title="Overwrite preset with current configuration"> </button> <!> <button type="button" class="btn btn-danger btn-small"> </button></div></li>'),hb=M('<ul class="preset-list" aria-live="polite"></ul>'),vb=M('<p class="status muted"> </p>'),mb=M('<p class="status muted"> </p>'),gb=M('<p class="status muted">Create, update, or apply a preset.</p>'),_b=M('<p class="status error"> </p>'),bb=M('<p class="status">Loading STT settingsâ¦</p>'),yb=M("<option> </option>"),xb=M('<div class="speech-field"><span class="field-label">Submit delay</span> <div class="speech-presets"><button class="btn btn-soft btn-small" type="button">Instant</button> <button class="btn btn-soft btn-small" type="button">Normal (300ms)</button> <button class="btn btn-soft btn-small" type="button">Slow (800ms)</button></div></div> <div class="speech-field"><label class="field-label" for="auto-submit-delay-input">Custom delay (ms)</label> <input id="auto-submit-delay-input" class="input-control" type="number" min="0" max="10000" step="50"/></div>',1),kb=M('<div class="speech-field"><label class="field-label" for="stt-model-select">Model</label> <select id="stt-model-select" class="input-control"></select></div> <div class="speech-field"><label class="inline-checkbox"><input class="input-control" type="checkbox"/> <span class="field-label">Auto-submit after speaking</span></label></div> <!>',1),wb=M('<div class="speech-field"><label class="field-label" for="stt-mode-select">Recognition mode</label> <select id="stt-mode-select" class="input-control"><option>Conversation (Flux)</option><option>Command (Nova)</option></select> <p class="speech-hint"><!></p></div> <!>',1),Sb=M(`<article class="system-card"><header class="system-card-header"><div><h3>System prompt</h3> <p class="system-card-caption">Applied to new chat sessions when no custom prompt is present.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Presets</h3> <p class="system-card-caption">Save and manage snapshots of the current configuration.</p></div></header> <div class="system-card-body"><div class="create-row"><input type="text" class="input-control" placeholder="Preset name" aria-label="Preset name"/> <button type="button" class="btn btn-primary"> </button></div> <!> <!> <!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Speech recognition</h3> <p class="system-card-caption">Configure speech-to-text engine and behavior.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Account</h3> <p class="system-card-caption">Session and authentication settings.</p></div></header> <div class="system-card-body"><div class="account-actions"><a href="/cdn-cgi/access/logout" class="btn btn-danger" title="End your session and require re-authentication"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> Logout</a> <p class="speech-hint">Ends your Cloudflare Access session. You'll need to re-authenticate with your email.</p></div></div></article>`,1),Eb=M('<h2 id="system-settings-title">System settings</h2> <p class="model-settings-subtitle">Configure orchestration defaults, presets, and speech settings.</p>',1),Cb=M('<p class="status error">Resolve the errors above before closing.</p>'),Ab=M('<p class="status error"> </p>'),Tb=M('<p class="status error"> </p>'),Db=M('<p class="status">Saving changesâ¦</p>'),Mb=M('<p class="status">Pending changes; closing this modal will save.</p>'),Fb=M('<p class="status">Changes save when you close this modal.</p>'),Pb=M('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function Ib(e,t){wt(t,!1);const n=()=>yt(c,"$systemPrompt",u),r=()=>yt(Ta,"$chatStore",u),s=()=>yt(ir,"$presetsStore",u),[u,o]=rr();let i=re(t,"open",8,!1);const l=Jt(),c=nb();let f=$(!1),d=!1;async function g(){await Promise.all([c.load(),ir.load(),h()])}async function h(){try{_(D,await ed()),_(F,null)}catch(ne){_(F,ne instanceof Error?ne.message:"Failed to load STT settings")}}async function v(){return rt(c).dirty?(await c.save(),!rt(c).saveError):!0}async function T(){if(d||n().saving||a(E)||a(U))return;d=!0;const ne=await v(),xe=await ke(),X=await A(),Le=rt(c);ne&&xe&&X&&!Le.saveError&&l("close"),d=!1}async function A(){if(!a(W)||!a(D))return!0;_(U,!0);try{return _(D,await wp({mode:a(D).mode,command_model:a(D).command_model})),_(W,!1),_(F,null),!0}catch(ne){return _(F,ne instanceof Error?ne.message:"Failed to save STT settings"),!1}finally{_(U,!1)}}let b=$(""),C=$(null),w=$(te()),y=$(!1),E=$(!1),k=$(null),D=$(null),W=$(!1),U=$(!1),F=$(null);function I(ne){const xe=ne.target;c.updateValue(xe?.value??"")}function Y(){_(b,""),_(C,null)}async function G(){const ne=a(b).trim();if(!ne||!await v())return;await rn.load(r().selectedModel),await ir.create(ne)&&_(b,"")}async function ie(ne){const xe=await ir.apply(ne.name);xe?.model&&Ta.setModel(xe.model),await Fs.load(),l("close")}async function O(ne){await v()&&(await rn.load(r().selectedModel),await ir.saveSnapshot(ne.name))}async function ee(ne){if(!ne.is_default){if(a(C)===ne.name){await ir.remove(ne.name),_(C,null);return}_(C,ne.name),setTimeout(()=>{a(C)===ne.name&&_(C,null)},3e3)}}async function le(ne){await ir.setDefault(ne.name)}function te(){const ne=ka.current??rs();return{...ne,stt:{...ne.stt}}}function J(){ka.refresh(),_(w,te()),_(y,!1),_(E,!1),_(k,null),_(D,null),_(W,!1),_(U,!1),_(F,null)}function N(ne,xe){_(w,{...a(w),stt:{...a(w).stt,[ne]:xe}}),_(y,!0),_(k,null)}function q(ne,xe){const X=ne.target;if(!X)return;const Le=Number(X.value);Number.isFinite(Le)&&xe(Le)}function ae(ne){const xe=I1[ne];_(w,{...a(w),stt:{...a(w).stt,autoSubmitDelayMs:xe.autoSubmitDelayMs}}),_(y,!0),_(k,null)}async function ke(){if(!a(y))return!0;_(E,!0);try{const ne=ka.save(a(w));return _(w,{...ne,stt:{...ne.stt}}),_(y,!1),_(k,null),!0}catch(ne){const xe=ne instanceof Error?ne.message:"Failed to save speech settings.";return _(k,xe),!1}finally{_(E,!1)}}function Q(){_(w,rs()),_(y,!0),_(k,null)}ye(()=>(R(i()),a(f)),()=>{i()&&!a(f)?(_(f,!0),g(),J(),Y()):!i()&&a(f)&&(_(f,!1),c.reset(),J(),Y())}),Yt(),Ct();var K=Ee(),Z=ce(K);{var me=ne=>{{let xe=Ft(()=>(n(),a(E),p(()=>n().saving||a(E))));Pr(ne,{get open(){return i()},labelledBy:"system-settings-title",modalClass:"system-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close system settings",get closeDisabled(){return a(xe)},$$events:{close:()=>void T()},children:(X,Le)=>{var Re=Sb(),et=ce(Re),Ge=m(et),Ae=x(m(Ge),2),Ke=m(Ae),ge=x(Ge,2),Pe=m(ge);{var ze=be=>{var Oe=rb();S(be,Oe)},je=be=>{var Oe=Ee(),Ie=ce(Oe);{var at=$e=>{var We=sb(),Ve=m(We);j(()=>H(Ve,(n(),p(()=>n().error)))),S($e,We)},pt=$e=>{var We=ub(),Ve=ce(We);Wn(()=>cr(Ve,()=>n().value,it=>j0(c,p(n).value=it,p(n)))),Wn(()=>z("input",Ve,I)),ls(Ve,(it,ht)=>Oi?.(it),()=>n().value);var Ce=x(Ve,2);{var xt=it=>{var ht=ab(),Nt=m(ht);j(()=>H(Nt,(n(),p(()=>n().saveError)))),S(it,ht)};L(Ce,it=>{n(),p(()=>n().saveError)&&it(xt)})}j(()=>Ve.disabled=(n(),p(()=>n().saving))),S($e,We)};L(Ie,$e=>{n(),p(()=>n().error)?$e(at):$e(pt,!1)},!0)}S(be,Oe)};L(Pe,be=>{n(),p(()=>n().loading)?be(ze):be(je,!1)})}var Je=x(et,2),Dt=x(m(Je),2),de=m(Dt),B=m(de),ue=x(B,2),ve=m(ue),Me=x(de,2);{var Be=be=>{var Oe=ob(),Ie=m(Oe);j(()=>H(Ie,(s(),p(()=>s().error)))),S(be,Oe)};L(Me,be=>{s(),p(()=>s().error)&&be(Be)})}var Ne=x(Me,2);{var Ze=be=>{var Oe=ib();S(be,Oe)},He=be=>{var Oe=Ee(),Ie=ce(Oe);{var at=$e=>{var We=lb();S($e,We)},pt=$e=>{var We=hb();Tt(We,5,()=>(s(),p(()=>s().items)),Ve=>Ve.name,(Ve,Ce)=>{var xt=pb(),it=m(xt),ht=m(it),Nt=m(ht),on=x(Nt);{var Kt=Ot=>{var qt=cb();S(Ot,qt)};L(on,Ot=>{a(Ce),p(()=>a(Ce).is_default)&&Ot(Kt)})}var fe=x(on,2);{var Fe=Ot=>{var qt=db();S(Ot,qt)};L(fe,Ot=>{a(Ce),p(()=>a(Ce).has_filters)&&Ot(Fe)})}var nt=x(ht,2),pe=m(nt),Te=m(pe),mt=x(pe,2),ct=m(mt),we=m(ct),P=x(ct,4),V=m(P),he=x(it,2),qe=m(he),tt=m(qe),Se=x(qe,2),Ye=m(Se),gt=x(Se,2);{var Lt=Ot=>{var qt=fb(),dt=m(qt);j(()=>{qt.disabled=(s(),a(Ce),p(()=>s().settingDefault===a(Ce).name)),oe(qt,"aria-busy",(s(),a(Ce),p(()=>s().settingDefault===a(Ce).name))),H(dt,(s(),a(Ce),p(()=>s().settingDefault===a(Ce).name?"Settingâ¦":"Set as default")))}),z("click",qt,()=>le(a(Ce))),S(Ot,qt)};L(gt,Ot=>{a(Ce),p(()=>!a(Ce).is_default)&&Ot(Lt)})}var Rt=x(gt,2),At=m(Rt);j((Ot,qt)=>{H(Nt,`${a(Ce),p(()=>a(Ce).name)??""} `),H(Te,(a(Ce),p(()=>a(Ce).model))),H(we,Ot),H(V,qt),qe.disabled=(s(),a(Ce),p(()=>s().applying===a(Ce).name)),oe(qe,"aria-busy",(s(),a(Ce),p(()=>s().applying===a(Ce).name))),H(tt,(s(),a(Ce),p(()=>s().applying===a(Ce).name?"Applyingâ¦":"Apply"))),Se.disabled=(s(),p(()=>s().saving)),oe(Se,"aria-busy",(s(),p(()=>s().saving))),H(Ye,(s(),p(()=>s().saving?"Savingâ¦":"Save snapshot"))),Rt.disabled=(a(Ce),s(),p(()=>a(Ce).is_default||s().deleting===a(Ce).name)),oe(Rt,"aria-busy",(s(),a(Ce),p(()=>s().deleting===a(Ce).name))),oe(Rt,"title",(a(Ce),p(()=>a(Ce).is_default?"Cannot delete default preset":"Delete preset"))),H(At,(a(C),a(Ce),s(),p(()=>a(C)===a(Ce).name?"Confirm delete":s().deleting===a(Ce).name?"Deletingâ¦":"Delete")))},[()=>(a(Ce),p(()=>new Date(a(Ce).created_at).toLocaleString())),()=>(a(Ce),p(()=>new Date(a(Ce).updated_at).toLocaleString()))]),z("click",qe,()=>ie(a(Ce))),z("click",Se,()=>O(a(Ce))),z("click",Rt,()=>ee(a(Ce))),S(Ve,xt)}),S($e,We)};L(Ie,$e=>{s(),p(()=>!s().items.length)?$e(at):$e(pt,!1)},!0)}S(be,Oe)};L(Ne,be=>{s(),p(()=>s().loading)?be(Ze):be(He,!1)})}var Xe=x(Ne,2);{var ot=be=>{var Oe=vb(),Ie=m(Oe);j(()=>H(Ie,`Applied preset: ${s(),p(()=>s().lastApplied)??""}`)),S(be,Oe)},Qe=be=>{var Oe=Ee(),Ie=ce(Oe);{var at=$e=>{var We=mb(),Ve=m(We);j(()=>H(Ve,`Saved: ${s(),p(()=>s().lastResult.name)??""}`)),S($e,We)},pt=$e=>{var We=gb();S($e,We)};L(Ie,$e=>{s(),p(()=>s().lastResult)?$e(at):$e(pt,!1)},!0)}S(be,Oe)};L(Xe,be=>{s(),p(()=>s().lastApplied)?be(ot):be(Qe,!1)})}var bt=x(Je,2),lt=m(bt),Et=x(m(lt),2),Zt=m(Et),Wt=x(lt,2),tn=m(Wt);{var se=be=>{var Oe=_b(),Ie=m(Oe);j(()=>H(Ie,a(F))),S(be,Oe)},_e=be=>{var Oe=Ee(),Ie=ce(Oe);{var at=$e=>{var We=bb();S($e,We)},pt=$e=>{var We=wb(),Ve=ce(We),Ce=x(m(Ve),2),xt=m(Ce);xt.value=xt.__value="conversation";var it=x(xt);it.value=it.__value="command";var ht;Rn(Ce);var Nt=x(Ce,2),on=m(Nt);{var Kt=pe=>{var Te=un(`AI-based turn detection for natural dialogue. Auto-submits when
                you finish speaking.`);S(pe,Te)},fe=pe=>{var Te=un("Silence-based detection with specialized vocabulary models.");S(pe,Te)};L(on,pe=>{a(D),p(()=>a(D).mode==="conversation")?pe(Kt):pe(fe,!1)})}var Fe=x(Ve,2);{var nt=pe=>{var Te=kb(),mt=ce(Te),ct=x(m(mt),2);Tt(ct,5,()=>Q_,Se=>Se.id,(Se,Ye)=>{var gt=yb(),Lt=m(gt),Rt={};j(()=>{H(Lt,(a(Ye),p(()=>a(Ye).name))),Rt!==(Rt=(a(Ye),p(()=>a(Ye).id)))&&(gt.value=(gt.__value=(a(Ye),p(()=>a(Ye).id)))??"")}),S(Se,gt)});var we;Rn(ct);var P=x(mt,2),V=m(P),he=m(V),qe=x(P,2);{var tt=Se=>{var Ye=xb(),gt=ce(Ye),Lt=x(m(gt),2),Rt=m(Lt),At=x(Rt,2),Ot=x(At,2),qt=x(gt,2),dt=x(m(qt),2);j(()=>Mt(dt,(a(w),p(()=>a(w).stt.autoSubmitDelayMs)))),z("click",Rt,()=>ae("fast")),z("click",At,()=>ae("normal")),z("click",Ot,()=>ae("slow")),z("change",dt,nn=>q(nn,zt=>N("autoSubmitDelayMs",zt))),S(Se,Ye)};L(qe,Se=>{a(w),p(()=>a(w).stt.autoSubmit)&&Se(tt)})}j(()=>{ct.disabled=a(U),we!==(we=(a(D),p(()=>a(D).command_model)))&&(ct.value=(ct.__value=(a(D),p(()=>a(D).command_model)))??"",Tn(ct,(a(D),p(()=>a(D).command_model)))),In(he,(a(w),p(()=>a(w).stt.autoSubmit)))}),z("change",ct,Se=>{a(D)&&(_(D,{...a(D),command_model:Se.target.value}),_(W,!0))}),z("change",he,Se=>N("autoSubmit",Se.target.checked)),S(pe,Te)};L(Fe,pe=>{a(D),p(()=>a(D).mode==="command")&&pe(nt)})}j(()=>{Ce.disabled=a(U),ht!==(ht=(a(D),p(()=>a(D).mode)))&&(Ce.value=(Ce.__value=(a(D),p(()=>a(D).mode)))??"",Tn(Ce,(a(D),p(()=>a(D).mode))))}),z("change",Ce,pe=>{a(D)&&(_(D,{...a(D),mode:pe.target.value}),_(W,!0))}),S($e,We)};L(Ie,$e=>{a(D)?$e(pt,!1):$e(at)},!0)}S(be,Oe)};L(tn,be=>{a(F)?be(se):be(_e,!1)})}j(be=>{Ke.disabled=(n(),p(()=>!n().dirty||n().saving)),ue.disabled=be,oe(ue,"aria-busy",(s(),p(()=>s().creating))),H(ve,(s(),p(()=>s().creating?"Creatingâ¦":"Create from current"))),Zt.disabled=a(E)||a(U)},[()=>(a(b),s(),p(()=>!a(b).trim()||s().creating))]),z("click",Ke,()=>c.reset()),cr(B,()=>a(b),be=>_(b,be)),z("keydown",B,be=>be.key==="Enter"?G():null),z("click",ue,G),z("click",Zt,Q),S(X,Re)},$$slots:{default:!0,heading:(X,Le)=>{var Re=Eb();S(X,Re)},footer:(X,Le)=>{var Re=Pb(),et=m(Re);{var Ge=Ke=>{var ge=Cb();S(Ke,ge)},Ae=Ke=>{var ge=Ee(),Pe=ce(ge);{var ze=Je=>{var Dt=Ab(),de=m(Dt);j(()=>H(de,a(k))),S(Je,Dt)},je=Je=>{var Dt=Ee(),de=ce(Dt);{var B=ve=>{var Me=Tb(),Be=m(Me);j(()=>H(Be,a(F))),S(ve,Me)},ue=ve=>{var Me=Ee(),Be=ce(Me);{var Ne=He=>{var Xe=Db();S(He,Xe)},Ze=He=>{var Xe=Ee(),ot=ce(Xe);{var Qe=lt=>{var Et=Mb();S(lt,Et)},bt=lt=>{var Et=Fb();S(lt,Et)};L(ot,lt=>{n(),a(y),a(W),p(()=>n().dirty||a(y)||a(W))?lt(Qe):lt(bt,!1)},!0)}S(He,Xe)};L(Be,He=>{n(),a(E),a(U),p(()=>n().saving||a(E)||a(U))?He(Ne):He(Ze,!1)},!0)}S(ve,Me)};L(de,ve=>{a(F)?ve(B):ve(ue,!1)},!0)}S(Je,Dt)};L(Pe,Je=>{a(k)?Je(ze):Je(je,!1)},!0)}S(Ke,ge)};L(et,Ke=>{n(),p(()=>n().saveError)?Ke(Ge):Ke(Ae,!1)})}S(X,Re)}}})}};L(Z,ne=>{i()&&ne(me)})}S(e,K),St(),o()}async function Nb(){const e=await fetch(`${$t}/api/clients/cli/llm`);if(!e.ok)throw new Error(`Failed to fetch CLI LLM settings: ${e.statusText}`);return e.json()}async function Lb(e){const t=await fetch(`${$t}/api/clients/cli/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update CLI LLM settings: ${t.statusText}`);return t.json()}async function Ob(){const e=await fetch(`${$t}/api/clients/cli/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset CLI settings: ${e.statusText}`);return e.json()}async function $b(){const e=await fetch(`${$t}/api/clients/cli/presets`);if(!e.ok)throw new Error(`Failed to fetch CLI presets: ${e.statusText}`);return e.json()}async function Rb(e){const t=await fetch(`${$t}/api/clients/cli/presets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to create CLI preset: ${t.statusText}`);return t.json()}async function zb(e){const t=await fetch(`${$t}/api/clients/cli/presets/by-name/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete CLI preset: ${t.statusText}`)}async function Bb(e){const t=await fetch(`${$t}/api/clients/cli/presets/by-name/${e}/apply`,{method:"POST"});if(!t.ok)throw new Error(`Failed to apply CLI preset: ${t.statusText}`);return t.json()}const ai={model:"openai/gpt-4o-mini",system_prompt:`You control this system via shell. Use the available tools to execute user commands.

RULES:
1. ACT directly - execute commands yourself, don't instruct the user.
2. Use shell_execute for commands. Use background=true for GUI apps.
3. If unsure about the system, call host_get_profile first.
4. READ before WRITE - query state before changing it.`,temperature:.7,max_tokens:1e3};function Ub(){const e=Gt(ai);let t=!1,n=!1;async function r(){if(n)return rt(e);n=!0;try{const i=await Nb(),l={model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens};return e.set(l),t=!0,l}catch(i){return console.error("Failed to load CLI settings:",i),rt(e)}finally{n=!1}}async function s(i){const l=rt(e);e.set({...l,...i,model:i.model??l.model,system_prompt:i.system_prompt??l.system_prompt,temperature:i.temperature??l.temperature,max_tokens:i.max_tokens??l.max_tokens});try{const c=await Lb(i);e.update(f=>({...f,model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens}))}catch(c){throw console.error("Failed to update CLI LLM settings:",c),e.set(l),c}}async function u(){try{try{await Bb("default"),await r();return}catch{console.log("No user default found, performing hard reset")}await Ob(),await r(),await s(ai)}catch(i){throw console.error("Failed to reset CLI settings:",i),i}}async function o(){const i=rt(e);try{(await $b()).presets.some(c=>c.name==="default")&&await zb("default"),await Rb({name:"default",llm:{model:i.model,system_prompt:i.system_prompt,temperature:i.temperature,max_tokens:i.max_tokens}})}catch(l){throw console.error("Failed to save as default:",l),l}}return{subscribe:e.subscribe,load:r,updateLlm:s,reset:u,saveAsDefault:o}}const pa=Ub();var jb=M('<p class="status">Loading settingsâ¦</p>'),qb=M("<option> </option>"),Hb=M('<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior for the CLI.</span></div> <div class="reasoning-controls"><div class="setting-select svelte-17wvx4j" style="grid-column: 1 / -1;"><label class="setting-label" for="cli-llm-model" title="Select the language model for CLI responses.">Model</label> <select id="cli-llm-model" class="select-input svelte-17wvx4j"></select></div> <div class="system-prompt-row svelte-17wvx4j"><label class="setting-label" for="cli-system-prompt" title="Instructions that define how the CLI assistant behaves.">System Prompt</label> <textarea id="cli-system-prompt" class="keyterms-input system-prompt svelte-17wvx4j" rows="6" placeholder="You are a helpful CLI assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="4000" step="50"/> <div class="range-extents"><span>50</span> <span>4000</span></div></div></div></div></div></div>'),Wb=M('<h2 id="cli-settings-title">CLI Settings</h2> <p class="model-settings-subtitle">Configure the command-line assistant.</p>',1),Vb=M('<div slot="actions" style="display: flex; gap: 0.5rem;"><button type="button" class="btn btn-ghost btn-small">Reset to defaults</button> <button type="button" class="btn btn-primary btn-small"> </button></div>'),Gb=M("<span> </span>"),Zb=M('<span class="status">Saving changesâ¦</span>'),Kb=M('<span class="status">Pending changes; closing this modal will save.</span>'),Yb=M('<span class="status">Changes save on close. "Set as default" updates the reset target.</span>'),Jb=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function Xb(e,t){wt(t,!1);const n=()=>yt(u,"$filtered",r),[r,s]=rr(),{filtered:u}=vr;let o=re(t,"open",8,!1);const i=Jt();let l=$({...ai}),c=$(!1),f=$(!1),d=$(!0),g=$(null),h=$(!1),v=!1;async function T(){_(d,!0);try{const[U]=await Promise.all([pa.load(),vr.loadModels()]);_(l,{...U})}catch{_(g,"Failed to load settings")}finally{_(d,!1)}}function A(){v||a(f)||(v=!0,(async()=>(await C()&&i("close"),v=!1))())}function b(){_(c,!0),_(g,null)}async function C(){if(!a(c))return!0;_(f,!0),_(g,null);try{return await pa.updateLlm({model:a(l).model,system_prompt:a(l).system_prompt,temperature:a(l).temperature,max_tokens:a(l).max_tokens}),_(c,!1),!0}catch(U){const F=U instanceof Error?U.message:"Failed to save settings.";return _(g,F),!1}finally{_(f,!1)}}async function w(){_(f,!0);try{await pa.reset();const U=await pa.load();_(l,{...U}),_(c,!1),_(g,null)}catch{_(g,"Failed to reset settings")}finally{_(f,!1)}}async function y(){_(f,!0);try{a(c)&&await C(),await pa.saveAsDefault(),_(g,"Settings saved as new default")}catch{_(g,"Failed to save as default")}finally{_(f,!1)}}function E(U,F,I){return`${(U-F)/(I-F)*100}%`}ye(()=>(R(o()),a(h),a(c),a(f)),()=>{o()&&!a(h)?(_(h,!0),_(c,!1),_(f,!1),_(g,null),T()):!o()&&a(h)&&(_(h,!1),a(c)&&!a(f)&&C())}),Yt(),Ct();var k=Ee(),D=ce(k);{var W=U=>{Pr(U,{get open(){return o()},labelledBy:"cli-settings-title",closeLabel:"Close CLI settings",$$events:{close:()=>void A()},children:(F,I)=>{var Y=Ee(),G=ce(Y);{var ie=ee=>{var le=jb();S(ee,le)},O=ee=>{var le=Hb(),te=m(le),J=x(m(te),2),N=m(J),q=x(m(N),2);Tt(q,5,n,ge=>ge.id,(ge,Pe)=>{var ze=qb(),je=m(ze),Je={};j(()=>{H(je,(a(Pe),p(()=>a(Pe).name??a(Pe).id))),Je!==(Je=(a(Pe),p(()=>a(Pe).id)))&&(ze.value=(ze.__value=(a(Pe),p(()=>a(Pe).id)))??"")}),S(ge,ze)});var ae;Rn(q);var ke=x(N,2),Q=x(m(ke),2);ls(Q,(ge,Pe)=>Oi?.(ge),()=>a(l).system_prompt),Wn(()=>z("input",Q,ge=>{_(l,{...a(l),system_prompt:ge.target.value||null}),b()}));var K=x(ke,2),Z=m(K),me=m(Z),ne=x(m(me),2),xe=m(ne),X=x(me,2),Le=x(K,2),Re=m(Le),et=m(Re),Ge=x(m(et),2),Ae=m(Ge),Ke=x(et,2);j((ge,Pe,ze)=>{q.disabled=a(f),ae!==(ae=(a(l),p(()=>a(l).model)))&&(q.value=(q.__value=(a(l),p(()=>a(l).model)))??"",Tn(q,(a(l),p(()=>a(l).model)))),Q.disabled=a(f),Mt(Q,(a(l),p(()=>a(l).system_prompt??""))),H(xe,ge),Mt(X,(a(l),p(()=>a(l).temperature??.7))),X.disabled=a(f),hn(X,`--slider-fill: ${Pe??""}`),H(Ae,(a(l),p(()=>a(l).max_tokens??1e3))),Mt(Ke,(a(l),p(()=>a(l).max_tokens??1e3))),Ke.disabled=a(f),hn(Ke,`--slider-fill: ${ze??""}`)},[()=>(a(l),p(()=>a(l).temperature?.toFixed(1)??"0.7")),()=>(a(l),p(()=>E(a(l).temperature??.7,0,2))),()=>(a(l),p(()=>E(a(l).max_tokens??1e3,50,4e3)))]),z("change",q,ge=>{_(l,{...a(l),model:ge.target.value}),b()}),z("input",X,ge=>{_(l,{...a(l),temperature:parseFloat(ge.target.value)}),b()}),z("input",Ke,ge=>{_(l,{...a(l),max_tokens:parseInt(ge.target.value,10)}),b()}),S(ee,le)};L(G,ee=>{a(d)?ee(ie):ee(O,!1)})}S(F,Y)},$$slots:{default:!0,heading:(F,I)=>{var Y=Wb();S(F,Y)},actions:(F,I)=>{var Y=Vb(),G=m(Y),ie=x(G,2),O=m(ie);j(()=>{G.disabled=a(f)||a(d),ie.disabled=a(f)||a(d),H(O,a(f)?"Savingâ¦":"Set as default")}),z("click",G,w),z("click",ie,()=>void y()),S(F,Y)},footer:(F,I)=>{var Y=Jb(),G=m(Y);{var ie=ee=>{var le=Gb();let te;var J=m(le);j(N=>{te=Pt(le,1,"status",null,te,N),H(J,a(g))},[()=>({error:a(g).includes("Failed")})]),S(ee,le)},O=ee=>{var le=Ee(),te=ce(le);{var J=q=>{var ae=Zb();S(q,ae)},N=q=>{var ae=Ee(),ke=ce(ae);{var Q=Z=>{var me=Kb();S(Z,me)},K=Z=>{var me=Yb();S(Z,me)};L(ke,Z=>{a(c)?Z(Q):Z(K,!1)},!0)}S(q,ae)};L(te,q=>{a(f)?q(J):q(N,!1)},!0)}S(ee,le)};L(G,ee=>{a(g)?ee(ie):ee(O,!1)})}S(F,Y)}}})};L(D,U=>{o()&&U(W)})}S(e,k),St(),s()}async function Qb(){const e=await fetch(`${$t}/api/clients/kiosk/stt`);if(!e.ok)throw new Error(`Failed to fetch kiosk STT settings: ${e.statusText}`);return e.json()}async function e3(e){const t=await fetch(`${$t}/api/clients/kiosk/stt`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk STT settings: ${t.statusText}`);return t.json()}async function t3(){const e=await fetch(`${$t}/api/clients/kiosk/stt/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk STT settings: ${e.statusText}`);return e.json()}async function n3(){const e=await fetch(`${$t}/api/clients/kiosk/tts`);if(!e.ok)throw new Error(`Failed to fetch kiosk TTS settings: ${e.statusText}`);return e.json()}async function r3(e){const t=await fetch(`${$t}/api/clients/kiosk/tts`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk TTS settings: ${t.statusText}`);return t.json()}async function s3(){const e=await fetch(`${$t}/api/clients/kiosk/tts/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk TTS settings: ${e.statusText}`);return e.json()}async function a3(e="openai"){const t=await fetch(`${$t}/api/clients/kiosk/tts/voices?provider=${encodeURIComponent(e)}`);if(!t.ok)throw new Error(`Failed to fetch TTS voices: ${t.statusText}`);return t.json()}async function u3(){const e=await fetch(`${$t}/api/clients/kiosk/ui`);if(!e.ok)throw new Error(`Failed to fetch kiosk UI settings: ${e.statusText}`);return e.json()}async function o3(e){const t=await fetch(`${$t}/api/clients/kiosk/ui`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk UI settings: ${t.statusText}`);return t.json()}async function i3(){const e=await fetch(`${$t}/api/clients/kiosk/llm`);if(!e.ok)throw new Error(`Failed to fetch kiosk LLM settings: ${e.statusText}`);return e.json()}async function l3(e){const t=await fetch(`${$t}/api/clients/kiosk/llm`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to update kiosk LLM settings: ${t.statusText}`);return t.json()}async function c3(){const e=await fetch(`${$t}/api/clients/kiosk/llm/reset`,{method:"POST"});if(!e.ok)throw new Error(`Failed to reset kiosk LLM settings: ${e.statusText}`);return e.json()}async function d3(){const e=await fetch(`${$t}/api/clients/kiosk/presets`);if(!e.ok)throw new Error(`Failed to fetch kiosk presets: ${e.statusText}`);return e.json()}async function f3(e){const t=await fetch(`${$t}/api/clients/kiosk/presets/${e}/activate`,{method:"POST"});if(!t.ok)throw new Error(`Failed to activate kiosk preset: ${t.statusText}`);return t.json()}async function p3(e,t){const n=await fetch(`${$t}/api/clients/kiosk/presets/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update kiosk preset: ${n.statusText}`);return n.json()}const h3={eot_threshold:.7,eot_timeout_ms:5e3,eager_eot_threshold:null,keyterms:[],enabled:!0,provider:"openai",voice:"alloy",model:"tts-1",speed:1,response_format:"pcm",sample_rate:24e3,stream_chunk_bytes:4096,use_segmentation:!0,delimiters:[`
`,". ","? ","! ","* ",", ",": "],segmentation_logging_enabled:!1,first_phrase_min_chars:10,buffering_enabled:!1,startup_delay_enabled:!1,low_latency_audio:!0,initial_buffer_sec:0,max_ahead_sec:1.5,min_chunk_sec:.1,idle_return_delay_ms:1e4,slideshow_max_photos:30,llm_model:"openai/gpt-4o-mini",system_prompt:"You are a helpful voice assistant who replies succinctly.",temperature:.7,max_tokens:500,conversation_mode:!1,conversation_timeout_seconds:10};function v3(e){return JSON.parse(JSON.stringify(e))}function nf(){return v3(h3)}function m3(){const e=Gt(nf());let t=!1,n=!1;async function r(){if(n)return rt(e);n=!0;try{const[o,i,l,c]=await Promise.all([Qb(),n3(),u3(),i3()]),f={eot_threshold:o.eot_threshold,eot_timeout_ms:o.eot_timeout_ms,eager_eot_threshold:o.eager_eot_threshold??null,keyterms:o.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,response_format:i.response_format,sample_rate:i.sample_rate,stream_chunk_bytes:i.stream_chunk_bytes,use_segmentation:i.use_segmentation,delimiters:i.delimiters,segmentation_logging_enabled:i.segmentation_logging_enabled,first_phrase_min_chars:i.first_phrase_min_chars,buffering_enabled:i.buffering_enabled,startup_delay_enabled:i.startup_delay_enabled,low_latency_audio:i.low_latency_audio,initial_buffer_sec:i.initial_buffer_sec,max_ahead_sec:i.max_ahead_sec,min_chunk_sec:i.min_chunk_sec,idle_return_delay_ms:l.idle_return_delay_ms,slideshow_max_photos:l.slideshow_max_photos,llm_model:c.model,system_prompt:c.system_prompt,temperature:c.temperature,max_tokens:c.max_tokens,conversation_mode:c.conversation_mode,conversation_timeout_seconds:c.conversation_timeout_seconds};return e.set(f),t=!0,f}catch(o){return console.error("Failed to load kiosk settings:",o),rt(e)}finally{n=!1}}async function s(o){try{const i={},l={},c={},f={};o.eot_threshold!==void 0&&(i.eot_threshold=o.eot_threshold),o.eot_timeout_ms!==void 0&&(i.eot_timeout_ms=o.eot_timeout_ms),o.eager_eot_threshold!==void 0&&(i.eager_eot_threshold=o.eager_eot_threshold),o.keyterms!==void 0&&(i.keyterms=o.keyterms),o.enabled!==void 0&&(l.enabled=o.enabled),o.provider!==void 0&&(l.provider=o.provider),o.voice!==void 0&&(l.voice=o.voice),o.model!==void 0&&(l.model=o.model),o.speed!==void 0&&(l.speed=o.speed),o.response_format!==void 0&&(l.response_format=o.response_format),o.sample_rate!==void 0&&(l.sample_rate=o.sample_rate),o.stream_chunk_bytes!==void 0&&(l.stream_chunk_bytes=o.stream_chunk_bytes),o.use_segmentation!==void 0&&(l.use_segmentation=o.use_segmentation),o.delimiters!==void 0&&(l.delimiters=o.delimiters),o.first_phrase_min_chars!==void 0&&(l.first_phrase_min_chars=o.first_phrase_min_chars),o.segmentation_logging_enabled!==void 0&&(l.segmentation_logging_enabled=o.segmentation_logging_enabled),o.buffering_enabled!==void 0&&(l.buffering_enabled=o.buffering_enabled),o.startup_delay_enabled!==void 0&&(l.startup_delay_enabled=o.startup_delay_enabled),o.low_latency_audio!==void 0&&(l.low_latency_audio=o.low_latency_audio),o.initial_buffer_sec!==void 0&&(l.initial_buffer_sec=o.initial_buffer_sec),o.max_ahead_sec!==void 0&&(l.max_ahead_sec=o.max_ahead_sec),o.min_chunk_sec!==void 0&&(l.min_chunk_sec=o.min_chunk_sec),o.idle_return_delay_ms!==void 0&&(c.idle_return_delay_ms=o.idle_return_delay_ms),o.slideshow_max_photos!==void 0&&(c.slideshow_max_photos=o.slideshow_max_photos),o.llm_model!==void 0&&(f.model=o.llm_model),o.system_prompt!==void 0&&(f.system_prompt=o.system_prompt),o.temperature!==void 0&&(f.temperature=o.temperature),o.max_tokens!==void 0&&(f.max_tokens=o.max_tokens),o.conversation_mode!==void 0&&(f.conversation_mode=o.conversation_mode),o.conversation_timeout_seconds!==void 0&&(f.conversation_timeout_seconds=o.conversation_timeout_seconds);const d=[];return Object.keys(i).length>0&&d.push(e3(i)),Object.keys(l).length>0&&d.push(r3(l)),Object.keys(c).length>0&&d.push(o3(c)),Object.keys(f).length>0&&d.push(l3(f)),await Promise.all(d),await r()}catch(i){throw console.error("Failed to save kiosk settings:",i),i}}async function u(){try{const[o,i,l]=await Promise.all([t3(),s3(),c3()]),c=rt(e),f={eot_threshold:o.eot_threshold,eot_timeout_ms:o.eot_timeout_ms,eager_eot_threshold:o.eager_eot_threshold??null,keyterms:o.keyterms,enabled:i.enabled,provider:i.provider,voice:i.voice,model:i.model,speed:i.speed,response_format:i.response_format,sample_rate:i.sample_rate,stream_chunk_bytes:i.stream_chunk_bytes,use_segmentation:i.use_segmentation,delimiters:i.delimiters,segmentation_logging_enabled:i.segmentation_logging_enabled,first_phrase_min_chars:i.first_phrase_min_chars,buffering_enabled:i.buffering_enabled,startup_delay_enabled:i.startup_delay_enabled,low_latency_audio:i.low_latency_audio,initial_buffer_sec:i.initial_buffer_sec,max_ahead_sec:i.max_ahead_sec,min_chunk_sec:i.min_chunk_sec,idle_return_delay_ms:c.idle_return_delay_ms,slideshow_max_photos:c.slideshow_max_photos,llm_model:l.model,system_prompt:l.system_prompt,temperature:l.temperature,max_tokens:l.max_tokens,conversation_mode:l.conversation_mode,conversation_timeout_seconds:l.conversation_timeout_seconds};return e.set(f),f}catch(o){throw console.error("Failed to reset kiosk settings:",o),o}}return{subscribe:e.subscribe,load:r,save:s,reset:u,get isLoaded(){return t},get current(){return rt(e)}}}const iu=m3();var g3=M('<p class="status">Loading settingsâ¦</p>'),_3=M("<option> </option>"),b3=M("<option> </option>"),y3=M('<div class="presets-container svelte-10jke8k"><label class="setting-label" for="preset-select">Preset</label> <div class="preset-select-row svelte-10jke8k"><select id="preset-select" class="select-input svelte-10jke8k"></select> <button type="button" class="btn btn-ghost btn-small" title="Save current settings to the selected preset">ð¾ Save</button></div></div>'),x3=M('<div class="setting-range" style="margin-top: 0.75rem;"><div class="setting-range-header"><span class="setting-label" title="Confidence level for triggering early processing. Lower = starts processing sooner (more false starts). Higher = waits longer before speculating.">Eager EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="0.9" step="0.05"/> <div class="range-extents"><span>0.3 (eager)</span> <span>0.9 (conservative)</span></div></div>'),k3=M("<option> </option>"),w3=M('<div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-voice" title="Select the OpenAI voice for text-to-speech synthesis.">Voice</label> <select id="tts-voice" class="select-input svelte-10jke8k"></select></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-model" title="Select the OpenAI TTS model.">Model</label> <select id="tts-model" class="select-input svelte-10jke8k"><option>tts-1 (faster)</option><option>tts-1-hd (higher quality)</option></select></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-response-format" title="Audio format returned by the TTS service.">Response format</label> <select id="tts-response-format" class="select-input svelte-10jke8k"><option>pcm</option><option>mp3</option><option>opus</option><option>aac</option><option>flac</option><option>wav</option></select></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Speech speed multiplier. 1.0 is normal speed.">Speed</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="2.0" step="0.1"/> <div class="range-extents"><span>0.5x (slow)</span> <span>2x (fast)</span></div></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-sample-rate" title="Sample rate in Hz for TTS audio.">Sample rate (Hz)</label> <input id="tts-sample-rate" class="select-input svelte-10jke8k" type="number" min="8000" max="48000" step="1000"/></div></div> <div class="reasoning-field"><div class="setting-select svelte-10jke8k"><label class="setting-label" for="tts-stream-chunk-bytes" title="Chunk size (bytes) when streaming TTS audio from OpenAI. At 24kHz 16-bit PCM: 2048 bytes = ~43ms, 4096 bytes = ~85ms (recommended), 8192 bytes = ~170ms, 32768 bytes = ~683ms. Smaller = lower latency but more network overhead.">Stream chunk bytes</label> <input id="tts-stream-chunk-bytes" class="select-input svelte-10jke8k" type="number" min="512" max="65536" step="256"/></div></div> <label class="setting-boolean" title="Split text at delimiters to start audio sooner." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Enable text segmentation</span></label> <div style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="Minimum characters to accumulate before the first segmented phrase is emitted.">Minimum first phrase length</span> <span class="setting-hint">Set a floor so the first spoken chunk feels complete.</span></div> <input class="select-input svelte-10jke8k" type="number" min="0" max="500" step="1"/></div> <label title="Log when segmentation is waiting for a delimiter after the minimum is reached." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Log segmentation boundary decisions</span></label> <div style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="One delimiter per line. Use \\\\n for newline.">Delimiters</span> <span class="setting-hint">Whitespace matters; each line becomes a delimiter.</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="4" placeholder="\\\\n .  ?  ! "></textarea></div>',1),S3=M('<div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Minimum audio (seconds) to buffer before playback starts.">Initial Buffer</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.05" max="2.0" step="0.05"/> <div class="range-extents"><span>0.05s (fast start)</span> <span>2.0s (smooth)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum audio (seconds) to schedule ahead of current time.">Max Ahead</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.3" max="5.0" step="0.1"/> <div class="range-extents"><span>0.3s (tight)</span> <span>5.0s (buffered)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Minimum duration (seconds) for each audio chunk.">Min Chunk Duration</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.02" max="0.5" step="0.01"/> <div class="range-extents"><span>0.02s (responsive)</span> <span>0.5s (chunky)</span></div></div></div>',1),E3=M(`<div class="settings-stack" aria-live="polite"><div class="setting reasoning"><div class="setting-header"><span class="setting-label">Language Model</span> <span class="setting-hint">Configure the AI model and behavior.</span></div> <div class="reasoning-controls"><div class="model-presets-row svelte-10jke8k"><div class="setting-select model-select-compact svelte-10jke8k"><label class="setting-label" for="llm-model" title="Select the language model for generating responses.">Model</label> <select id="llm-model" class="select-input svelte-10jke8k"></select></div> <!></div> <div class="system-prompt-row svelte-10jke8k"><label class="setting-label" for="system-prompt" title="Instructions that define how the assistant behaves.">System Prompt</label> <textarea id="system-prompt" class="keyterms-input system-prompt svelte-10jke8k" rows="4" placeholder="You are a helpful voice assistant..."></textarea></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Controls randomness in responses. Lower = more focused, higher = more creative. Note: Some models don't support this parameter.">Temperature</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0" max="2" step="0.1"/> <div class="range-extents"><span>0 (focused)</span> <span>2 (creative)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum length of responses in tokens. Keep low for voice interactions.">Max Tokens</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="50" max="2000" step="50"/> <div class="range-extents"><span>50 (short)</span> <span>2000 (long)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Speech Recognition</span> <span class="setting-hint">Deepgram Flux end-of-turn detection settings.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Confidence level (0.5-0.9) required before the system considers you've finished speaking. Lower = faster response but may cut you off. Higher = waits longer to be sure you're done.">EOT Threshold</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="0.5" max="0.9" step="0.05"/> <div class="range-extents"><span>0.5 (fast)</span> <span>0.9 (reliable)</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum time (ms) to wait after speech before forcing end-of-turn, regardless of confidence. Shorter = faster response. Longer = allows for natural pauses.">EOT Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="500" max="10000" step="250"/> <div class="range-extents"><span>500ms</span> <span>10s</span></div></div></div> <div class="reasoning-field" style="grid-column: 1 / -1;"><div class="setting-header"><span class="setting-label" title="Words or phrases the speech recognition should pay extra attention to. Useful for device names, product terms, or commands specific to your home automation setup.">Keyterms</span> <span class="setting-hint">Words to boost recognition (one per line, up to 100).</span></div> <textarea class="keyterms-input svelte-10jke8k" rows="3" placeholder="lights thermostat turn on"></textarea></div></div></div> <div class="setting"><div class="setting-header"><span class="setting-label">Advanced</span> <span class="setting-hint">Optional fine-tuning options.</span></div> <label class="setting-boolean" title="When enabled, the system can speculatively start processing before you fully finish speaking. This reduces latency but may cause 'false starts' if you pause mid-sentence."><input type="checkbox"/> <span>Enable eager end-of-turn</span></label> <!></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Display</span> <span class="setting-hint">Kiosk screen behavior settings.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="When enabled, the microphone re-opens after the assistant speaks, allowing continuous conversation without needing the wake word." style="grid-column: 1 / -1;"><input type="checkbox"/> <span>Continuous conversation mode</span></label> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait on the transcription screen after going IDLE before returning to the clock screen.">Return to Clock</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1000" max="60000" step="1000"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="How long (seconds) to wait for speech before ending the conversation session and returning to the clock.">Conversation Timeout</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="1" max="60" step="1"/> <div class="range-extents"><span>1s</span> <span>60s</span></div></div></div> <div class="reasoning-field"><div class="setting-range"><div class="setting-range-header"><span class="setting-label" title="Maximum number of photos to sync for the slideshow. Lower values reduce memory usage on the Echo device. Changes apply on next sync.">Slideshow Photos</span> <span class="range-value"> </span></div> <input type="range" class="range-input" min="5" max="100" step="5"/> <div class="range-extents"><span>5 (low memory)</span> <span>100 (more variety)</span></div></div></div></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label">Text-to-Speech</span> <span class="setting-hint">Voice synthesis settings for assistant responses.</span></div> <div class="reasoning-controls"><label class="setting-boolean" title="Enable or disable audio playback of assistant responses."><input type="checkbox"/> <span>Enable TTS</span></label> <!></div></div> <div class="setting reasoning"><div class="setting-header"><span class="setting-label" title="Low latency mode optimizes for fastest time-to-first-audio. Enable all toggles for maximum speed on fast devices. Disable for smoother playback on slow devices/networks.">Low Latency Mode</span> <span class="setting-hint">Enable all toggles for fastest response. Disable for smoother
              playback.</span></div> <div class="reasoning-controls"><div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Skip audio buffering - plays immediately as chunks arrive. Best for fast devices/networks.">Disable Buffering</span> <span class="toggle-value"> </span></div></div> <div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Skip 60ms startup delay before first audio. Faster but may cause glitches on slow devices.">Skip Startup Delay</span> <span class="toggle-value"> </span></div></div> <div class="reasoning-field"><div class="setting-toggle"><label class="toggle-label"><input type="checkbox"/> <span class="toggle-slider"></span></label> <span class="setting-label" title="Use low-latency audio mode (interactive). Faster response but may cause stuttering on slow devices.">Low Latency Audio</span> <span class="toggle-value"> </span></div></div> <!></div></div></div>`),C3=M('<h2 id="kiosk-settings-title">Kiosk settings</h2> <p class="model-settings-subtitle">Configure the voice assistant kiosk.</p>',1),A3=M('<button slot="actions" type="button" class="btn btn-ghost btn-small">Reset to defaults</button>'),T3=M('<span class="status error"> </span>'),D3=M('<span class="status">Saving changesâ¦</span>'),M3=M('<span class="status">Pending changes; closing this modal will save.</span>'),F3=M('<span class="status">Changes save when you close this modal.</span>'),P3=M('<footer slot="footer" class="model-settings-footer"><!></footer>');function I3(e,t){wt(t,!1);const n=()=>yt(u,"$filtered",r),[r,s]=rr(),{filtered:u}=vr;let o=$([]),i=$(null),l=$(!1),c=re(t,"open",8,!1);const f=Jt();let d=$(nf()),g=$(!1),h=$(!1),v=$(!0),T=$(null),A=$(!1),b=!1;async function C(){_(v,!0);try{const[G,ie]=await Promise.all([iu.load(),d3(),vr.loadModels()]);_(d,{...G}),_(o,await a3("openai")),_(i,ie)}catch{_(T,"Failed to load settings")}finally{_(v,!1)}}async function w(G){if(!a(l)){_(l,!0);try{_(i,await f3(G));const ie=await iu.load();_(d,{...ie}),_(g,!1)}catch{_(T,"Failed to activate preset")}finally{_(l,!1)}}}async function y(){if(!(!a(i)||a(l))){_(l,!0);try{const G=a(i).active_index,ie=a(i).presets[G],O={name:ie.name,model:a(d).llm_model,system_prompt:a(d).system_prompt??"",temperature:a(d).temperature,max_tokens:a(d).max_tokens,eot_threshold:a(d).eot_threshold,eot_timeout_ms:a(d).eot_timeout_ms,keyterms:a(d).keyterms,tts_enabled:a(d).enabled,tts_voice:a(d).voice,tts_model:a(d).model,tts_sample_rate:a(d).sample_rate};_(i,await p3(G,O)),_(T,`Saved to "${ie.name}"`),setTimeout(()=>{a(T)?.startsWith("Saved")&&_(T,null)},2e3)}catch{_(T,"Failed to save preset")}finally{_(l,!1)}}}function E(){b||a(h)||(b=!0,(async()=>(await D()&&f("close"),b=!1))())}function k(){_(g,!0),_(T,null)}async function D(){if(!a(g))return!0;_(h,!0),_(T,null);try{const G=await iu.save(a(d));return _(d,{...G}),_(g,!1),!0}catch(G){const ie=G instanceof Error?G.message:"Failed to save settings.";return _(T,ie),!1}finally{_(h,!1)}}async function W(){_(h,!0);try{const G=await iu.reset();_(d,{...G}),_(g,!1),_(T,null)}catch{_(T,"Failed to reset settings")}finally{_(h,!1)}}function U(G,ie,O){return`${(G-ie)/(O-ie)*100}%`}ye(()=>(R(c()),a(A),a(g),a(h)),()=>{c()&&!a(A)?(_(A,!0),_(g,!1),_(h,!1),_(T,null),C()):!c()&&a(A)&&(_(A,!1),a(g)&&!a(h)&&D())}),Yt(),Ct();var F=Ee(),I=ce(F);{var Y=G=>{Pr(G,{get open(){return c()},labelledBy:"kiosk-settings-title",closeLabel:"Close kiosk settings",$$events:{close:()=>void E()},children:(ie,O)=>{var ee=Ee(),le=ce(ee);{var te=N=>{var q=g3();S(N,q)},J=N=>{var q=E3(),ae=m(q),ke=x(m(ae),2),Q=m(ke),K=m(Q),Z=x(m(K),2);Tt(Z,5,n,Ue=>Ue.id,(Ue,kt)=>{var Xt=_3(),Ht=m(Xt),Vt={};j(()=>{H(Ht,(a(kt),p(()=>a(kt).name??a(kt).id))),Vt!==(Vt=(a(kt),p(()=>a(kt).id)))&&(Xt.value=(Xt.__value=(a(kt),p(()=>a(kt).id)))??"")}),S(Ue,Xt)});var me;Rn(Z);var ne=x(K,2);{var xe=Ue=>{var kt=y3(),Xt=x(m(kt),2),Ht=m(Xt);Tt(Ht,5,()=>(a(i),p(()=>a(i).presets)),Ln,(Qt,bn,yn)=>{var Pn=b3(),Jn=m(Pn);Pn.value=Pn.__value=yn,j(()=>H(Jn,(a(bn),p(()=>a(bn).name)))),S(Qt,Pn)});var Vt;Rn(Ht);var _n=x(Ht,2);j(()=>{Ht.disabled=a(h)||a(l),Vt!==(Vt=(a(i),p(()=>a(i).active_index)))&&(Ht.value=(Ht.__value=(a(i),p(()=>a(i).active_index)))??"",Tn(Ht,(a(i),p(()=>a(i).active_index)))),_n.disabled=a(h)||a(l)}),z("change",Ht,Qt=>w(parseInt(Qt.target.value,10))),z("click",_n,y),S(Ue,kt)};L(ne,Ue=>{a(i)&&Ue(xe)})}var X=x(Q,2),Le=x(m(X),2);ls(Le,(Ue,kt)=>Oi?.(Ue),()=>a(d).system_prompt),Wn(()=>z("input",Le,Ue=>{_(d,{...a(d),system_prompt:Ue.target.value||null}),k()}));var Re=x(X,2),et=m(Re),Ge=m(et),Ae=x(m(Ge),2),Ke=m(Ae),ge=x(Ge,2),Pe=x(Re,2),ze=m(Pe),je=m(ze),Je=x(m(je),2),Dt=m(Je),de=x(je,2),B=x(ae,2),ue=x(m(B),2),ve=m(ue),Me=m(ve),Be=m(Me),Ne=x(m(Be),2),Ze=m(Ne),He=x(Be,2),Xe=x(ve,2),ot=m(Xe),Qe=m(ot),bt=x(m(Qe),2),lt=m(bt),Et=x(Qe,2),Zt=x(Xe,2),Wt=x(m(Zt),2),tn=x(B,2),se=x(m(tn),2),_e=m(se),be=x(se,2);{var Oe=Ue=>{var kt=x3(),Xt=m(kt),Ht=x(m(Xt),2),Vt=m(Ht),_n=x(Xt,2);j((Qt,bn)=>{H(Vt,Qt),Mt(_n,(a(d),p(()=>a(d).eager_eot_threshold??.5))),_n.disabled=a(h),hn(_n,`--slider-fill: ${bn??""}`)},[()=>(a(d),p(()=>a(d).eager_eot_threshold?.toFixed(2)??"â")),()=>(a(d),p(()=>U(a(d).eager_eot_threshold??.5,.3,.9)))]),z("input",_n,Qt=>{_(d,{...a(d),eager_eot_threshold:parseFloat(Qt.target.value)}),k()}),S(Ue,kt)};L(be,Ue=>{a(d),p(()=>a(d).eager_eot_threshold!==null)&&Ue(Oe)})}var Ie=x(tn,2),at=x(m(Ie),2),pt=m(at),$e=m(pt),We=x(pt,2),Ve=m(We),Ce=m(Ve),xt=x(m(Ce),2),it=m(xt),ht=x(Ce,2),Nt=x(We,2);let on;var Kt=m(Nt),fe=m(Kt),Fe=x(m(fe),2),nt=m(Fe),pe=x(fe,2),Te=x(Nt,2),mt=m(Te),ct=m(mt),we=x(m(ct),2),P=m(we),V=x(ct,2),he=x(Ie,2),qe=x(m(he),2),tt=m(qe),Se=m(tt),Ye=x(tt,2);{var gt=Ue=>{var kt=w3(),Xt=ce(kt),Ht=m(Xt),Vt=x(m(Ht),2);Tt(Vt,5,()=>a(o),Ln,(Bt,dn)=>{var Lr=k3(),ur=m(Lr),Xa={};j(()=>{H(ur,(a(dn),p(()=>a(dn).name))),Xa!==(Xa=(a(dn),p(()=>a(dn).id)))&&(Lr.value=(Lr.__value=(a(dn),p(()=>a(dn).id)))??"")}),S(Bt,Lr)});var _n;Rn(Vt);var Qt=x(Xt,2),bn=m(Qt),yn=x(m(bn),2),Pn=m(yn);Pn.value=Pn.__value="tts-1";var Jn=x(Pn);Jn.value=Jn.__value="tts-1-hd";var Ir;Rn(yn);var xn=x(Qt,2),en=m(xn),ln=x(m(en),2),Un=m(ln);Un.value=Un.__value="pcm";var ar=x(Un);ar.value=ar.__value="mp3";var kr=x(ar);kr.value=kr.__value="opus";var Xn=x(kr);Xn.value=Xn.__value="aac";var sn=x(Xn);sn.value=sn.__value="flac";var cn=x(sn);cn.value=cn.__value="wav";var Nr;Rn(ln);var kn=x(xn,2),Kr=m(kn),Yr=m(Kr),ea=x(m(Yr),2),Ku=m(ea),gs=x(Yr,2),Jr=x(kn,2),Yu=m(Jr),ta=x(m(Yu),2),Ja=x(Jr,2),sf=m(Ja),Ju=x(m(sf),2),Ri=x(Ja,2),Xu=m(Ri),Qu=x(Ri,2);let zi;var eo=x(m(Qu),2),to=x(Qu,2);let Bi;var no=m(to),Ui=x(to,2);let ji;var ro=x(m(Ui),2);j((Bt,dn,Lr,ur,Xa,af)=>{Vt.disabled=a(h),_n!==(_n=(a(d),p(()=>a(d).voice)))&&(Vt.value=(Vt.__value=(a(d),p(()=>a(d).voice)))??"",Tn(Vt,(a(d),p(()=>a(d).voice)))),yn.disabled=a(h),Ir!==(Ir=(a(d),p(()=>a(d).model)))&&(yn.value=(yn.__value=(a(d),p(()=>a(d).model)))??"",Tn(yn,(a(d),p(()=>a(d).model)))),ln.disabled=a(h),Nr!==(Nr=(a(d),p(()=>a(d).response_format)))&&(ln.value=(ln.__value=(a(d),p(()=>a(d).response_format)))??"",Tn(ln,(a(d),p(()=>a(d).response_format)))),H(Ku,`${Bt??""}x`),Mt(gs,(a(d),p(()=>a(d).speed))),gs.disabled=a(h),hn(gs,`--slider-fill: ${dn??""}`),Mt(ta,(a(d),p(()=>a(d).sample_rate))),ta.disabled=a(h),Mt(Ju,(a(d),p(()=>a(d).stream_chunk_bytes))),Ju.disabled=a(h),In(Xu,(a(d),p(()=>a(d).use_segmentation))),Xu.disabled=a(h),zi=Pt(Qu,1,"reasoning-field svelte-10jke8k",null,zi,Lr),Mt(eo,(a(d),p(()=>a(d).first_phrase_min_chars))),eo.disabled=(a(h),a(d),p(()=>a(h)||!a(d).use_segmentation)),Bi=Pt(to,1,"setting-boolean svelte-10jke8k",null,Bi,ur),In(no,(a(d),p(()=>a(d).segmentation_logging_enabled))),no.disabled=(a(h),a(d),p(()=>a(h)||!a(d).use_segmentation)),ji=Pt(Ui,1,"reasoning-field svelte-10jke8k",null,ji,Xa),ro.disabled=(a(h),a(d),p(()=>a(h)||!a(d).use_segmentation)),Mt(ro,af)},[()=>(a(d),p(()=>a(d).speed.toFixed(1))),()=>(a(d),p(()=>U(a(d).speed,.5,2))),()=>({"disabled-field":!a(d).use_segmentation}),()=>({"disabled-field":!a(d).use_segmentation}),()=>({"disabled-field":!a(d).use_segmentation}),()=>(a(d),p(()=>a(d).delimiters.map(Bt=>Bt===`
`?"\\n":Bt).join(`
`)))]),z("change",Vt,Bt=>{_(d,{...a(d),voice:Bt.target.value}),k()}),z("change",yn,Bt=>{_(d,{...a(d),model:Bt.target.value}),k()}),z("change",ln,Bt=>{_(d,{...a(d),response_format:Bt.target.value}),k()}),z("input",gs,Bt=>{_(d,{...a(d),speed:parseFloat(Bt.target.value)}),k()}),z("input",ta,Bt=>{const dn=parseInt(Bt.target.value,10);Number.isFinite(dn)&&(_(d,{...a(d),sample_rate:Math.max(8e3,Math.min(48e3,dn))}),k())}),z("input",Ju,Bt=>{const dn=parseInt(Bt.target.value,10);Number.isFinite(dn)&&(_(d,{...a(d),stream_chunk_bytes:Math.max(512,Math.min(65536,dn))}),k())}),z("change",Xu,Bt=>{_(d,{...a(d),use_segmentation:Bt.target.checked}),k()}),z("input",eo,Bt=>{const dn=parseInt(Bt.target.value,10);Number.isFinite(dn)&&(_(d,{...a(d),first_phrase_min_chars:Math.max(0,Math.min(500,dn))}),k())}),z("change",no,Bt=>{_(d,{...a(d),segmentation_logging_enabled:Bt.target.checked}),k()}),z("input",ro,Bt=>{const Lr=Bt.target.value.split(`
`).map(ur=>ur.replace(/\r/g,"")).map(ur=>ur==="\\n"?`
`:ur).filter(ur=>ur.trim().length>0);_(d,{...a(d),delimiters:Lr}),k()}),S(Ue,kt)};L(Ye,Ue=>{a(d),p(()=>a(d).enabled)&&Ue(gt)})}var Lt=x(he,2),Rt=x(m(Lt),2),At=m(Rt),Ot=m(At),qt=m(Ot),dt=m(qt),nn=x(qt,4),zt=m(nn),De=x(At,2),xr=m(De),Ys=m(xr),ms=m(Ys),Ga=x(Ys,4),Vu=m(Ga),Za=x(De,2),Js=m(Za),Xs=m(Js),Qs=m(Xs),Ka=x(Xs,4),Gu=m(Ka),Zu=x(Za,2);{var Ya=Ue=>{var kt=S3(),Xt=ce(kt),Ht=m(Xt),Vt=m(Ht),_n=x(m(Vt),2),Qt=m(_n),bn=x(Vt,2),yn=x(Xt,2),Pn=m(yn),Jn=m(Pn),Ir=x(m(Jn),2),xn=m(Ir),en=x(Jn,2),ln=x(yn,2),Un=m(ln),ar=m(Un),kr=x(m(ar),2),Xn=m(kr),sn=x(ar,2);j((cn,Nr,kn,Kr,Yr,ea)=>{H(Qt,`${cn??""}s`),Mt(bn,(a(d),p(()=>a(d).initial_buffer_sec))),bn.disabled=a(h),hn(bn,`--slider-fill: ${Nr??""}`),H(xn,`${kn??""}s`),Mt(en,(a(d),p(()=>a(d).max_ahead_sec))),en.disabled=a(h),hn(en,`--slider-fill: ${Kr??""}`),H(Xn,`${Yr??""}s`),Mt(sn,(a(d),p(()=>a(d).min_chunk_sec))),sn.disabled=a(h),hn(sn,`--slider-fill: ${ea??""}`)},[()=>(a(d),p(()=>a(d).initial_buffer_sec.toFixed(2))),()=>(a(d),p(()=>U(a(d).initial_buffer_sec,.05,2))),()=>(a(d),p(()=>a(d).max_ahead_sec.toFixed(1))),()=>(a(d),p(()=>U(a(d).max_ahead_sec,.3,5))),()=>(a(d),p(()=>a(d).min_chunk_sec.toFixed(2))),()=>(a(d),p(()=>U(a(d).min_chunk_sec,.02,.5)))]),z("input",bn,cn=>{_(d,{...a(d),initial_buffer_sec:parseFloat(cn.target.value)}),k()}),z("input",en,cn=>{_(d,{...a(d),max_ahead_sec:parseFloat(cn.target.value)}),k()}),z("input",sn,cn=>{_(d,{...a(d),min_chunk_sec:parseFloat(cn.target.value)}),k()}),S(Ue,kt)};L(Zu,Ue=>{a(d),p(()=>a(d).buffering_enabled)&&Ue(Ya)})}j((Ue,kt,Xt,Ht,Vt,_n,Qt,bn,yn,Pn,Jn,Ir,xn)=>{Z.disabled=a(h),me!==(me=(a(d),p(()=>a(d).llm_model)))&&(Z.value=(Z.__value=(a(d),p(()=>a(d).llm_model)))??"",Tn(Z,(a(d),p(()=>a(d).llm_model)))),Le.disabled=a(h),Mt(Le,(a(d),p(()=>a(d).system_prompt??""))),H(Ke,Ue),Mt(ge,(a(d),p(()=>a(d).temperature))),ge.disabled=a(h),hn(ge,`--slider-fill: ${kt??""}`),H(Dt,(a(d),p(()=>a(d).max_tokens))),Mt(de,(a(d),p(()=>a(d).max_tokens))),de.disabled=a(h),hn(de,`--slider-fill: ${Xt??""}`),H(Ze,Ht),Mt(He,(a(d),p(()=>a(d).eot_threshold))),He.disabled=a(h),hn(He,`--slider-fill: ${Vt??""}`),H(lt,`${a(d),p(()=>a(d).eot_timeout_ms)??""}ms`),Mt(Et,(a(d),p(()=>a(d).eot_timeout_ms))),Et.disabled=a(h),hn(Et,`--slider-fill: ${_n??""}`),Wt.disabled=a(h),Mt(Wt,Qt),In(_e,(a(d),p(()=>a(d).eager_eot_threshold!==null))),_e.disabled=a(h),In($e,(a(d),p(()=>a(d).conversation_mode))),$e.disabled=a(h),H(it,`${bn??""}s`),Mt(ht,(a(d),p(()=>a(d).idle_return_delay_ms))),ht.disabled=a(h),hn(ht,`--slider-fill: ${yn??""}`),on=Pt(Nt,1,"reasoning-field svelte-10jke8k",null,on,Pn),H(nt,`${Jn??""}s`),Mt(pe,(a(d),p(()=>a(d).conversation_timeout_seconds))),pe.disabled=(a(h),a(d),p(()=>a(h)||!a(d).conversation_mode)),hn(pe,`--slider-fill: ${Ir??""}`),H(P,(a(d),p(()=>a(d).slideshow_max_photos))),Mt(V,(a(d),p(()=>a(d).slideshow_max_photos))),V.disabled=a(h),hn(V,`--slider-fill: ${xn??""}`),In(Se,(a(d),p(()=>a(d).enabled))),Se.disabled=a(h),In(dt,(a(d),p(()=>!a(d).buffering_enabled))),dt.disabled=a(h),H(zt,(a(d),p(()=>a(d).buffering_enabled?"Off (buffered)":"On (instant)"))),In(ms,(a(d),p(()=>!a(d).startup_delay_enabled))),ms.disabled=a(h),H(Vu,(a(d),p(()=>a(d).startup_delay_enabled?"Off (60ms delay)":"On (instant)"))),In(Qs,(a(d),p(()=>a(d).low_latency_audio))),Qs.disabled=a(h),H(Gu,(a(d),p(()=>a(d).low_latency_audio?"On (interactive)":"Off (smooth)")))},[()=>(a(d),p(()=>a(d).temperature.toFixed(1))),()=>(a(d),p(()=>U(a(d).temperature,0,2))),()=>(a(d),p(()=>U(a(d).max_tokens,50,2e3))),()=>(a(d),p(()=>a(d).eot_threshold.toFixed(2))),()=>(a(d),p(()=>U(a(d).eot_threshold,.5,.9))),()=>(a(d),p(()=>U(a(d).eot_timeout_ms,500,1e4))),()=>(a(d),p(()=>a(d).keyterms.join(`
`))),()=>(a(d),p(()=>(a(d).idle_return_delay_ms/1e3).toFixed(0))),()=>(a(d),p(()=>U(a(d).idle_return_delay_ms,1e3,6e4))),()=>({"disabled-field":!a(d).conversation_mode}),()=>(a(d),p(()=>a(d).conversation_timeout_seconds.toFixed(0))),()=>(a(d),p(()=>U(a(d).conversation_timeout_seconds,1,60))),()=>(a(d),p(()=>U(a(d).slideshow_max_photos,5,100)))]),z("change",Z,Ue=>{_(d,{...a(d),llm_model:Ue.target.value}),k()}),z("input",ge,Ue=>{_(d,{...a(d),temperature:parseFloat(Ue.target.value)}),k()}),z("input",de,Ue=>{_(d,{...a(d),max_tokens:parseInt(Ue.target.value,10)}),k()}),z("input",He,Ue=>{_(d,{...a(d),eot_threshold:parseFloat(Ue.target.value)}),k()}),z("input",Et,Ue=>{_(d,{...a(d),eot_timeout_ms:parseInt(Ue.target.value,10)}),k()}),z("input",Wt,Ue=>{const Xt=Ue.target.value.split(`
`).map(Ht=>Ht.trim()).filter(Ht=>Ht.length>0).slice(0,100);_(d,{...a(d),keyterms:Xt}),k()}),z("change",_e,Ue=>{const kt=Ue.target.checked;_(d,{...a(d),eager_eot_threshold:kt?.5:null}),k()}),z("change",$e,Ue=>{_(d,{...a(d),conversation_mode:Ue.target.checked}),k()}),z("input",ht,Ue=>{_(d,{...a(d),idle_return_delay_ms:parseInt(Ue.target.value,10)}),k()}),z("input",pe,Ue=>{_(d,{...a(d),conversation_timeout_seconds:parseFloat(Ue.target.value)}),k()}),z("input",V,Ue=>{_(d,{...a(d),slideshow_max_photos:parseInt(Ue.target.value,10)}),k()}),z("change",Se,Ue=>{_(d,{...a(d),enabled:Ue.target.checked}),k()}),z("change",dt,Ue=>{const kt=Ue.target.checked;_(d,{...a(d),buffering_enabled:!kt,initial_buffer_sec:kt?0:a(d).initial_buffer_sec||.3}),k()}),z("change",ms,Ue=>{_(d,{...a(d),startup_delay_enabled:!Ue.target.checked}),k()}),z("change",Qs,Ue=>{_(d,{...a(d),low_latency_audio:Ue.target.checked}),k()}),S(N,q)};L(le,N=>{a(v)?N(te):N(J,!1)})}S(ie,ee)},$$slots:{default:!0,heading:(ie,O)=>{var ee=C3();S(ie,ee)},actions:(ie,O)=>{var ee=A3();j(()=>ee.disabled=a(h)||a(v)),z("click",ee,W),S(ie,ee)},footer:(ie,O)=>{var ee=P3(),le=m(ee);{var te=N=>{var q=T3(),ae=m(q);j(()=>H(ae,a(T))),S(N,q)},J=N=>{var q=Ee(),ae=ce(q);{var ke=K=>{var Z=D3();S(K,Z)},Q=K=>{var Z=Ee(),me=ce(Z);{var ne=X=>{var Le=M3();S(X,Le)},xe=X=>{var Le=F3();S(X,Le)};L(me,X=>{a(g)?X(ne):X(xe,!1)},!0)}S(K,Z)};L(ae,K=>{a(h)?K(ke):K(Q,!1)},!0)}S(N,q)};L(le,N=>{a(T)?N(te):N(J,!1)})}S(ie,ee)}}})};L(I,G=>{c()&&G(Y)})}S(e,F),St(),s()}const _u=["Google Calendar","Google Tasks","Gmail","Google Drive"],Ro={loading:!1,authorizing:!1,authorized:!1,userEmail:null,expiresAt:null,services:[..._u],error:null};function N3(e){return new Promise((t,n)=>{const r=o=>{const i=o.data;if(!i||typeof i!="object"||i.source!=="google-auth")return;u();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},s=window.setInterval(()=>{e.closed&&(u(),n(new Error("The authorization window was closed before completion.")))},500),u=()=>{window.removeEventListener("message",r),window.clearInterval(s)};window.addEventListener("message",r)})}function L3(){const e=Gt({...Ro});async function t(){e.update(s=>({...s,loading:!0,error:null}));try{const s=await ap();e.set({loading:!1,authorizing:!1,authorized:s.authorized,userEmail:s.user_email??null,expiresAt:s.expires_at??null,services:s.services&&s.services.length>0?s.services:[..._u],error:null})}catch(s){const u=s instanceof Error?s.message:"Failed to check Google authorization status.";e.set({...Ro,services:[..._u],loading:!1,error:u})}}function n(){e.set({...Ro,services:[..._u]})}async function r(){if(typeof window>"u")return e.update(u=>({...u,error:"Google authorization is only available in a browser environment."})),!1;if(rt(e).authorizing)return!1;e.update(u=>({...u,authorizing:!0,error:null}));try{const u=await up({}),o=window.open(u.auth_url,"google-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!o)throw new Error("Popup was blocked. Allow pop-ups and try again.");return o.focus(),await N3(o),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(u){const o=u instanceof Error?u.message:"Failed to start Google authorization.";return e.update(i=>({...i,authorizing:!1,error:o})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}const ui=["svelte","voice","kiosk","cli"],lu={svelte:"Main",voice:"Voice",kiosk:"Kiosk",cli:"CLI"},cu={loading:!1,refreshing:!1,saving:!1,dirty:!1,error:null,saveError:null,servers:[],updatedAt:null,pending:{},pendingChanges:{},clientPreferences:{svelte:null,voice:null,kiosk:null,cli:null},prefsLoaded:!1};function As(e,t){return{...e,servers:t.servers??[],updatedAt:t.updated_at??null,error:null,saveError:null}}function O3(){const e=Gt({...cu});async function t(){e.set({...cu,loading:!0});try{const[g,...h]=await Promise.all([co(),...ui.map(T=>sp(T))]),v={svelte:null,voice:null,kiosk:null,cli:null};ui.forEach((T,A)=>{const b=h[A];v[T]=b.enabled_servers.length>0?b.enabled_servers:null}),e.set({...cu,servers:g.servers,updatedAt:g.updated_at??null,clientPreferences:v,prefsLoaded:!0,loading:!1})}catch(g){const h=g instanceof Error?g.message:"Failed to load MCP servers.";e.set({...cu,loading:!1,error:h})}}function n(g,h){e.update(v=>{const T=v.servers.map(b=>b.id===g?{...b,enabled:h}:b),A={...v.pendingChanges,[g]:{...v.pendingChanges[g]??{},enabled:h}};return{...v,servers:T,dirty:!0,saveError:null,pendingChanges:A}})}function r(g,h,v){e.update(T=>{const A=T.servers.find(E=>E.id===g);if(!A)return T;const b=new Set(A.disabled_tools??[]);v?b.delete(h):b.add(h);const C=Array.from(b).sort(),w=T.servers.map(E=>E.id!==g?E:{...E,disabled_tools:C,tools:E.tools.map(k=>k.name===h?{...k,enabled:v}:k)}),y={...T.pendingChanges,[g]:{...T.pendingChanges[g]??{},disabled_tools:C}};return{...T,servers:w,dirty:!0,saveError:null,pendingChanges:y}})}async function s(){e.update(g=>({...g,refreshing:!0,error:null}));try{const g=await rp();e.update(h=>({...As(h,g),refreshing:!1}))}catch(g){const h=g instanceof Error?g.message:"Failed to refresh MCP servers.";e.update(v=>({...v,refreshing:!1,saveError:h}))}}function u(g){return rt(e).servers.find(v=>v.id===g)}function o(g){return!!rt(e).pending[g]}async function i(){const g=rt(e);if(!g.dirty)return!0;const h=Object.entries(g.pendingChanges);if(!h.length)return e.update(T=>({...T,dirty:!1})),!0;e.update(T=>({...T,saving:!0,saveError:null}));let v=!0;for(const[T,A]of h){e.update(b=>({...b,pending:{...b.pending,[T]:!0}}));try{const b=await np(T,A);e.update(C=>{const w={...C.pending};delete w[T];const y={...C.pendingChanges};delete y[T];const E=As(C,b),k=Object.keys(y).length>0;return{...E,pending:w,pendingChanges:y,dirty:k}})}catch(b){let C="Failed to update MCP server.";if(b instanceof Error)C=b.message;else if(typeof b=="object"&&b!==null){const w=b;C=String(w.detail||w.message||w.error||JSON.stringify(b))}else typeof b=="string"&&(C=b);C.includes("[object Object]")&&(C="Failed to save MCP server settings. Check server logs for details."),e.update(w=>{const y={...w.pending};return delete y[T],{...w,pending:y,saving:!1,saveError:C}}),v=!1;break}}return v?(e.update(T=>({...T,saving:!1,dirty:!1})),!0):(e.update(T=>({...T,saving:!1,dirty:!0})),!1)}async function l(g){e.update(h=>({...h,saving:!0,saveError:null}));try{const h=await ep(g),v=await co(),A=rt(e).clientPreferences.svelte??v.servers.map(b=>b.id);if(A.includes(h.id))e.update(b=>({...As(b,v),saving:!1}));else{const b=[...A,h.id];try{const C=await ll("svelte",b);e.update(w=>({...As(w,v),clientPreferences:{...w.clientPreferences,svelte:C.enabled_servers.length>0?C.enabled_servers:null},saving:!1}))}catch{e.update(C=>({...As(C,v),saving:!1}))}}return h}catch(h){const v=h instanceof Error?h.message:"Failed to connect to MCP server.";return e.update(T=>({...T,saving:!1,saveError:v})),null}}async function c(g){e.update(h=>({...h,saving:!0,saveError:null,pending:{...h.pending,[g]:!0}}));try{await tp(g);const h=await co();return e.update(v=>{const T={...v.pending};return delete T[g],{...As(v,h),saving:!1,pending:T}}),!0}catch(h){const v=h instanceof Error?h.message:"Failed to remove MCP server.";return e.update(T=>{const A={...T.pending};return delete A[g],{...T,saving:!1,saveError:v,pending:A}}),!1}}async function f(g,h,v){const T=rt(e),A=T.clientPreferences[g]??T.servers.map(C=>C.id);let b;v?b=A.includes(h)?A:[...A,h]:b=A.filter(C=>C!==h),e.update(C=>({...C,clientPreferences:{...C.clientPreferences,[g]:b},saving:!0,saveError:null}));try{const C=await ll(g,b);e.update(w=>({...w,clientPreferences:{...w.clientPreferences,[g]:C.enabled_servers.length>0?C.enabled_servers:null},saving:!1}))}catch(C){const w=C instanceof Error?C.message:"Failed to update preferences.";e.update(y=>({...y,clientPreferences:{...y.clientPreferences,[g]:A.length>0?A:null},saving:!1,saveError:w}))}}function d(g,h){const T=rt(e).clientPreferences[g];return T===null?!0:T.includes(h)}return{subscribe:e.subscribe,load:t,refresh:s,setServerEnabled:n,setToolEnabled:r,connectServer:l,removeServer:c,setClientServerEnabled:f,isServerEnabledForClient:d,getServer:u,isPending:o,flushPending:i}}const ac={loading:!1,saving:!1,refreshing:!1,configured:!1,email:null,error:null};function $3(){const e=Gt({...ac});async function t(){e.update(u=>({...u,loading:!0,error:null}));try{const u=await op();e.set({loading:!1,saving:!1,refreshing:!1,configured:u.configured,email:u.email,error:null})}catch(u){const o=u instanceof Error?u.message:"Failed to check Monarch status.";e.set({...ac,loading:!1,error:o})}}async function n(u){e.update(o=>({...o,saving:!0,error:null}));try{const o=await ip(u);return e.set({loading:!1,saving:!1,refreshing:!1,configured:o.configured,email:o.email,error:null}),!0}catch(o){const i=o instanceof Error?o.message:"Failed to save Monarch credentials.";return e.update(l=>({...l,saving:!1,error:i})),!1}}async function r(){e.update(u=>({...u,saving:!0,error:null}));try{const u=await lp();return e.set({loading:!1,saving:!1,refreshing:!1,configured:u.configured,email:u.email,error:null}),!0}catch(u){const o=u instanceof Error?u.message:"Failed to remove Monarch credentials.";return e.update(i=>({...i,saving:!1,error:o})),!1}}async function s(){e.update(u=>({...u,refreshing:!0,error:null}));try{return await new Promise(u=>setTimeout(u,2e3)),e.update(u=>({...u,refreshing:!1})),{success:!0,message:"Account data refreshed successfully"}}catch(u){const o=u instanceof Error?u.message:"Failed to refresh account data.";return e.update(i=>({...i,refreshing:!1,error:o})),{success:!1,message:o}}}return{subscribe:e.subscribe,load:t,save:n,remove:r,refresh:s}}const zo={loading:!1,authorizing:!1,authorized:!1,userEmail:null,error:null};function R3(e){return new Promise((t,n)=>{const r=o=>{const i=o.data;if(!i||typeof i!="object"||i.source!=="spotify-auth")return;u();const l=i.status,c=i.message;if(l==="success")t();else{const f=typeof c=="string"?c:"Authorization failed.";n(new Error(f))}},s=window.setInterval(()=>{e.closed&&(u(),n(new Error("The authorization window was closed before completion.")))},500),u=()=>{window.removeEventListener("message",r),window.clearInterval(s)};window.addEventListener("message",r)})}function z3(){const e=Gt({...zo});async function t(){e.update(s=>({...s,loading:!0,error:null}));try{const s=await cp();e.set({loading:!1,authorizing:!1,authorized:s.authorized,userEmail:s.user_email??null,error:null})}catch(s){const u=s instanceof Error?s.message:"Failed to check Spotify authorization status.";e.set({...zo,loading:!1,error:u})}}function n(){e.set({...zo})}async function r(){if(typeof window>"u")return e.update(u=>({...u,error:"Spotify authorization is only available in a browser environment."})),!1;if(rt(e).authorizing)return!1;e.update(u=>({...u,authorizing:!0,error:null}));try{const u=await dp({}),o=window.open(u.auth_url,"spotify-oauth","width=520,height=640,noopener=yes,noreferrer=yes");if(!o)throw new Error("Popup was blocked. Allow pop-ups and try again.");return o.focus(),await R3(o),await t(),e.update(i=>({...i,authorizing:!1})),!0}catch(u){const o=u instanceof Error?u.message:"Failed to start Spotify authorization.";return e.update(i=>({...i,authorizing:!1,error:o})),!1}}return{subscribe:e.subscribe,load:t,reset:n,authorize:r}}var B3=M('<p class="status">Checking Google authorization...</p>'),U3=M('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),j3=M('<p class="status muted"> </p>'),q3=M('<p class="status muted">Access will refresh automatically.</p>'),H3=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <!>',1),W3=M('<p class="status">Google services are not connected.</p>'),V3=M("<li> </li>"),G3=M('<p class="status">Checking Spotify authorization...</p>'),Z3=M('<p class="status error"> </p> <div class="google-auth-actions"><button type="button" class="btn btn-ghost btn-small">Try again</button></div>',1),K3=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p> <p class="status muted">Access will refresh automatically.</p>',1),Y3=M('<p class="status">Spotify is not connected.</p>'),J3=M('<button type="button" class="btn btn-primary btn-small auth-reconnect-btn">Reconnect</button>'),X3=M('<button type="button" class="btn btn-primary btn-small auth-reconnect-btn"> </button>'),Q3=M('<p class="status">Checking Monarch status...</p>'),ey=M('<p class="status success">Connected as <span class="google-auth-email"> </span>.</p>'),ty=za('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>'),ny=za('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>'),ry=M('<p class="status error"> </p>'),sy=M(`<div class="monarch-form"><label>Email <input type="email" class="input-control" placeholder="email@example.com"/></label> <label>Password <div class="password-input-wrapper"><input class="input-control" placeholder="Password"/> <button type="button" class="btn btn-ghost btn-icon btn-small"><!></button></div></label> <label>MFA Secret (Optional) <input type="text" class="input-control" placeholder="MFA Secret"/></label> <p class="status muted" style="margin-top: -0.5rem; margin-bottom: 1rem; font-size: 0.8em;">If you already use an app, you must <strong>reset MFA</strong> in Monarch
              Settings to see the secret key again. Enter the new key here AND in
              your app.</p> <!></div>`),ay=M('<p class="system-card-caption"> </p>'),uy=M('<p class="system-card-caption">Toggle integrations available to the assistant.</p>'),oy=M('<p class="status">Loading MCP servers...</p>'),iy=M('<p class="status error"> </p>'),ly=M('<p class="status">No MCP servers configured.</p>'),cy=M('<label class="toggle client-toggle"><input type="checkbox"/> <span> </span></label>'),dy=M('<li class="tool-row"><div class="tool-info"><span class="tool-name"> </span></div> <label class="toggle"><input type="checkbox"/> <span> </span></label></li>'),fy=M('<ul class="tool-list"></ul>'),py=M('<p class="status">Tool list unavailable.</p>'),hy=M('<p class="status warning"> </p>'),vy=M('<div class="tools-dropdown"><!> <!></div>'),my=M('<li class="server-row"><div class="server-row-header"><div class="server-heading"><h4> </h4> <div class="server-meta"><span> </span> <span aria-hidden="true">&bull;</span> <span class="server-url"> </span></div></div> <div class="server-toggles"><div class="client-toggles-group"></div> <label class="toggle running-toggle" title="Enable or disable this server globally"><input type="checkbox"/> <span> </span></label> <button type="button" class="btn btn-ghost btn-small btn-danger" title="Remove this server">Remove</button></div></div> <div class="server-row-body"><button type="button"><span class="tools-toggle__label"> </span> <svg class="tools-toggle__icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <!></div></li>'),gy=M('<ul class="server-list"></ul>'),_y=M('<p class="status error"> </p>'),by=M('<p class="status warning">Pending changes save when you close this modal.</p>'),yy=M('<div class="add-server-row"><input type="url" class="input-control" placeholder="http://192.168.1.110:9003/mcp"/> <button type="button" class="btn btn-primary btn-small"> </button></div> <!> <!> <!>',1),xy=M('<article class="system-card"><header class="system-card-header"><div><h3>Google services</h3> <p class="system-card-caption">Connect Calendar, Tasks, Gmail, and Drive with a single consent.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small auth-reconnect-btn"> </button></div></header> <div class="system-card-body google-auth-body"><!> <ul class="google-services-list"></ul> <p class="status muted"><!></p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Spotify</h3> <p class="system-card-caption">Connect Spotify for music control and playback.</p></div> <div class="system-card-actions"><button type="button" class="btn btn-primary btn-small auth-reconnect-btn"> </button></div></header> <div class="system-card-body google-auth-body"><!> <p class="status muted"><!></p></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Monarch Money</h3> <p class="system-card-caption">Connect your Monarch Money account.</p></div> <div class="system-card-actions"><!></div></header> <div class="system-card-body"><!></div></article> <article class="system-card"><header class="system-card-header"><div><h3>Server status</h3> <!></div> <div class="system-card-actions"><button type="button" class="btn btn-ghost btn-small"> </button></div></header> <div class="system-card-body"><!></div></article>',1),ky=M('<h2 id="mcp-settings-title">MCP servers</h2> <p class="model-settings-subtitle">Manage MCP server availability, tools, and client access.</p>',1),wy=M('<p class="status error">Resolve the errors above before closing.</p>'),Sy=M('<p class="status">Saving changes...</p>'),Ey=M('<p class="status">Pending changes; closing this modal will save.</p>'),Cy=M('<p class="status">Changes save when you close this modal.</p>'),Ay=M('<footer slot="footer" class="model-settings-footer system-settings-footer"><!></footer>');function Ty(e,t){wt(t,!1);const n=()=>yt(f,"$mcpServers",o),r=()=>yt(d,"$googleAuth",o),s=()=>yt(h,"$spotifyAuth",o),u=()=>yt(g,"$monarchAuth",o),[o,i]=rr();let l=re(t,"open",8,!1);const c=Jt(),f=O3(),d=L3(),g=$3(),h=z3();let v=$(!1),T=!1,A=$(new Set),b=$(""),C=$(""),w=$(""),y=$(!1),E=$(""),k=$(!1);async function D(){await Promise.all([f.load(),d.load(),g.load(),h.load()])}async function W(){if(T||n().saving||r().authorizing)return;T=!0;const Z=await f.flushPending(),me=rt(f);Z&&!me.saveError&&c("close"),T=!1}function U(){!a(b)||!a(C)||g.save({email:a(b),password:a(C),mfa_secret:a(w)||null})}function F(Z,me){n().saving||f.setServerEnabled(Z,me)}function I(Z,me,ne){n().saving||f.setClientServerEnabled(Z,me,ne)}function Y(Z,me,ne){n().saving||f.setToolEnabled(Z,me,ne)}async function G(){const Z=a(E).trim();!Z||a(k)||(_(k,!0),await f.connectServer(Z),_(k,!1),_(E,""))}async function ie(Z){n().saving||await f.removeServer(Z)}function O(){const Z=rt(f);Z.dirty||Z.saving||f.refresh()}function ee(){r().loading||r().authorizing||d.load()}async function le(){r().authorizing||await d.authorize()}function te(){s().loading||s().authorizing||h.load()}async function J(){s().authorizing||await h.authorize()}async function N(){if(u().saving)return;await g.remove()&&(_(C,""),_(w,""),_(y,!1))}function q(Z){if(!Z)return null;try{const me=new Date(Z);return Number.isNaN(me.getTime())?Z:new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"2-digit"}).format(me)}catch(me){return console.warn("Failed to format timestamp",me),Z}}function ae(Z){const me=new Set(a(A));me.has(Z)?me.delete(Z):me.add(Z),_(A,me)}ye(()=>(R(l()),a(v)),()=>{l()&&!a(v)?(_(v,!0),D()):!l()&&a(v)&&(_(v,!1),d.reset(),h.reset(),_(A,new Set),_(E,""))}),Yt(),Ct();var ke=Ee(),Q=ce(ke);{var K=Z=>{{let me=Ft(()=>(n(),r(),p(()=>n().saving||r().authorizing)));Pr(Z,{get open(){return l()},labelledBy:"mcp-settings-title",modalClass:"mcp-settings-modal",bodyClass:"system-settings-body",layerClass:"system-settings-layer",closeLabel:"Close MCP servers",get closeDisabled(){return a(me)},$$events:{close:()=>void W()},children:(ne,xe)=>{var X=xy(),Le=ce(X),Re=m(Le),et=x(m(Re),2),Ge=m(et),Ae=m(Ge),Ke=x(Re,2),ge=m(Ke);{var Pe=pe=>{var Te=B3();S(pe,Te)},ze=pe=>{var Te=Ee(),mt=ce(Te);{var ct=P=>{var V=U3(),he=ce(V),qe=m(he),tt=x(he,2),Se=m(tt);j(()=>{H(qe,(r(),p(()=>r().error))),Se.disabled=(r(),p(()=>r().loading||r().authorizing))}),z("click",Se,ee),S(P,V)},we=P=>{var V=Ee(),he=ce(V);{var qe=Se=>{var Ye=H3(),gt=ce(Ye),Lt=x(m(gt)),Rt=m(Lt),At=x(gt,2);{var Ot=dt=>{var nn=j3(),zt=m(nn);j(De=>H(zt,`Current token expires ${De??""}.`),[()=>(r(),p(()=>q(r().expiresAt)??"soon"))]),S(dt,nn)},qt=dt=>{var nn=q3();S(dt,nn)};L(At,dt=>{r(),p(()=>r().expiresAt)?dt(Ot):dt(qt,!1)})}j(()=>H(Rt,(r(),p(()=>r().userEmail)))),S(Se,Ye)},tt=Se=>{var Ye=W3();S(Se,Ye)};L(he,Se=>{r(),p(()=>r().authorized)?Se(qe):Se(tt,!1)},!0)}S(P,V)};L(mt,P=>{r(),p(()=>r().error)?P(ct):P(we,!1)},!0)}S(pe,Te)};L(ge,pe=>{r(),p(()=>r().loading)?pe(Pe):pe(ze,!1)})}var je=x(ge,2);Tt(je,5,()=>(r(),p(()=>r().services)),Ln,(pe,Te)=>{var mt=V3(),ct=m(mt);j(()=>H(ct,a(Te))),S(pe,mt)});var Je=x(je,2),Dt=m(Je);{var de=pe=>{var Te=un(`Click "Reconnect" to refresh Google authorization for these
            integrations.`);S(pe,Te)},B=pe=>{var Te=un('Click "Connect" to authorize these integrations for the assistant.');S(pe,Te)};L(Dt,pe=>{r(),p(()=>r().authorized)?pe(de):pe(B,!1)})}var ue=x(Le,2),ve=m(ue),Me=x(m(ve),2),Be=m(Me),Ne=m(Be),Ze=x(ve,2),He=m(Ze);{var Xe=pe=>{var Te=G3();S(pe,Te)},ot=pe=>{var Te=Ee(),mt=ce(Te);{var ct=P=>{var V=Z3(),he=ce(V),qe=m(he),tt=x(he,2),Se=m(tt);j(()=>{H(qe,(s(),p(()=>s().error))),Se.disabled=(s(),p(()=>s().loading||s().authorizing))}),z("click",Se,te),S(P,V)},we=P=>{var V=Ee(),he=ce(V);{var qe=Se=>{var Ye=K3(),gt=ce(Ye),Lt=x(m(gt)),Rt=m(Lt);j(()=>H(Rt,(s(),p(()=>s().userEmail)))),S(Se,Ye)},tt=Se=>{var Ye=Y3();S(Se,Ye)};L(he,Se=>{s(),p(()=>s().authorized)?Se(qe):Se(tt,!1)},!0)}S(P,V)};L(mt,P=>{s(),p(()=>s().error)?P(ct):P(we,!1)},!0)}S(pe,Te)};L(He,pe=>{s(),p(()=>s().loading)?pe(Xe):pe(ot,!1)})}var Qe=x(He,2),bt=m(Qe);{var lt=pe=>{var Te=un('Click "Reconnect" to refresh Spotify authorization.');S(pe,Te)},Et=pe=>{var Te=un('Click "Connect" to authorize music control and playback features.');S(pe,Te)};L(bt,pe=>{s(),p(()=>s().authorized)?pe(lt):pe(Et,!1)})}var Zt=x(ue,2),Wt=m(Zt),tn=x(m(Wt),2),se=m(tn);{var _e=pe=>{var Te=J3();j(()=>Te.disabled=(u(),p(()=>u().saving))),z("click",Te,()=>void N()),S(pe,Te)},be=pe=>{var Te=X3(),mt=m(Te);j(()=>{Te.disabled=(u(),a(b),a(C),p(()=>u().saving||!a(b)||!a(C))),H(mt,(u(),p(()=>u().saving?"Saving...":"Connect")))}),z("click",Te,U),S(pe,Te)};L(se,pe=>{u(),p(()=>u().configured)?pe(_e):pe(be,!1)})}var Oe=x(Wt,2),Ie=m(Oe);{var at=pe=>{var Te=Q3();S(pe,Te)},pt=pe=>{var Te=Ee(),mt=ce(Te);{var ct=P=>{var V=ey(),he=x(m(V)),qe=m(he);j(()=>H(qe,(u(),p(()=>u().email)))),S(P,V)},we=P=>{var V=sy(),he=m(V),qe=x(m(he)),tt=x(he,2),Se=x(m(tt)),Ye=m(Se),gt=x(Ye,2),Lt=m(gt);{var Rt=zt=>{var De=ty();S(zt,De)},At=zt=>{var De=ny();S(zt,De)};L(Lt,zt=>{a(y)?zt(Rt):zt(At,!1)})}var Ot=x(tt,2),qt=x(m(Ot)),dt=x(Ot,4);{var nn=zt=>{var De=ry(),xr=m(De);j(()=>H(xr,(u(),p(()=>u().error)))),S(zt,De)};L(dt,zt=>{u(),p(()=>u().error)&&zt(nn)})}j(()=>{oe(Ye,"type",a(y)?"text":"password"),oe(gt,"title",a(y)?"Hide password":"Show password")}),cr(qe,()=>a(b),zt=>_(b,zt)),cr(Ye,()=>a(C),zt=>_(C,zt)),z("click",gt,()=>_(y,!a(y))),cr(qt,()=>a(w),zt=>_(w,zt)),S(P,V)};L(mt,P=>{u(),p(()=>u().configured)?P(ct):P(we,!1)},!0)}S(pe,Te)};L(Ie,pe=>{u(),p(()=>u().loading)?pe(at):pe(pt,!1)})}var $e=x(Zt,2),We=m($e),Ve=m(We),Ce=x(m(Ve),2);{var xt=pe=>{var Te=ay(),mt=m(Te);j(ct=>H(mt,`Last updated ${ct??""}`),[()=>(n(),p(()=>q(n().updatedAt)??""))]),S(pe,Te)},it=pe=>{var Te=uy();S(pe,Te)};L(Ce,pe=>{n(),p(()=>n().updatedAt)?pe(xt):pe(it,!1)})}var ht=x(Ve,2),Nt=m(ht),on=m(Nt),Kt=x(We,2),fe=m(Kt);{var Fe=pe=>{var Te=oy();S(pe,Te)},nt=pe=>{var Te=Ee(),mt=ce(Te);{var ct=P=>{var V=iy(),he=m(V);j(()=>H(he,(n(),p(()=>n().error)))),S(P,V)},we=P=>{var V=yy(),he=ce(V),qe=m(he),tt=x(qe,2),Se=m(tt),Ye=x(he,2);{var gt=dt=>{var nn=ly();S(dt,nn)},Lt=dt=>{var nn=gy();Tt(nn,5,()=>(n(),p(()=>n().servers)),Ln,(zt,De)=>{var xr=my(),Ys=m(xr),ms=m(Ys),Ga=m(ms),Vu=m(Ga),Za=x(Ga,2),Js=m(Za);let Xs;var Qs=m(Js),Ka=x(Js,4),Gu=m(Ka),Zu=x(ms,2),Ya=m(Zu);Tt(Ya,5,()=>ui,Ln,(xn,en)=>{var ln=cy(),Un=m(ln),ar=x(Un,2),kr=m(ar);j(Xn=>{oe(ln,"title",`Enable for ${R(lu),a(en),p(()=>lu[a(en)])??""} client`),In(Un,Xn),Un.disabled=(a(De),n(),p(()=>!a(De).enabled||!a(De).connected||n().pending[a(De).id]||n().saving)),H(kr,(R(lu),a(en),p(()=>lu[a(en)])))},[()=>(n(),a(en),a(De),p(()=>n().clientPreferences[a(en)]===null||n().clientPreferences[a(en)]?.includes(a(De).id)))]),z("change",Un,Xn=>I(a(en),a(De).id,Xn.target.checked)),S(xn,ln)});var Ue=x(Ya,2),kt=m(Ue),Xt=x(kt,2),Ht=m(Xt),Vt=x(Ue,2),_n=x(Ys,2),Qt=m(_n);let bn;var yn=m(Qt),Pn=m(yn),Jn=x(Qt,2);{var Ir=xn=>{var en=vy(),ln=m(en);{var Un=sn=>{var cn=fy();Tt(cn,5,()=>(a(De),p(()=>a(De).tools)),Ln,(Nr,kn)=>{var Kr=dy(),Yr=m(Kr),ea=m(Yr),Ku=m(ea),gs=x(Yr,2),Jr=m(gs),Yu=x(Jr,2),ta=m(Yu);j(()=>{oe(Kr,"data-disabled",(a(kn),p(()=>!a(kn).enabled))),H(Ku,(a(kn),p(()=>a(kn).name))),In(Jr,(a(kn),p(()=>a(kn).enabled))),Jr.disabled=(a(De),n(),p(()=>!a(De).enabled||n().pending[a(De).id]||n().saving)),H(ta,(a(kn),p(()=>a(kn).enabled?"Enabled":"Disabled")))}),z("change",Jr,Ja=>Y(a(De).id,a(kn).name,Ja.target.checked)),S(Nr,Kr)}),S(sn,cn)},ar=sn=>{var cn=py();S(sn,cn)};L(ln,sn=>{a(De),p(()=>a(De).tools.length)?sn(Un):sn(ar,!1)})}var kr=x(ln,2);{var Xn=sn=>{var cn=hy(),Nr=m(cn);j(kn=>H(Nr,`Disabled tool ids: ${kn??""}`),[()=>(a(De),p(()=>a(De).disabled_tools.join(", ")))]),S(sn,cn)};L(kr,sn=>{a(De),p(()=>a(De).disabled_tools.length)&&sn(Xn)})}j(()=>oe(en,"id",`tools-${a(De),p(()=>a(De).id)??""}`)),S(xn,en)};L(Jn,xn=>{a(A),a(De),p(()=>a(A).has(a(De).id))&&xn(Ir)})}j((xn,en,ln)=>{oe(xr,"data-connected",(a(De),p(()=>a(De).connected))),oe(xr,"data-pending",(n(),a(De),p(()=>n().pending[a(De).id]?"true":"false"))),oe(xr,"data-dirty",(n(),a(De),p(()=>n().pendingChanges[a(De).id]?"true":"false"))),H(Vu,(a(De),p(()=>a(De).id))),Xs=Pt(Js,1,"",null,Xs,xn),H(Qs,(a(De),p(()=>a(De).connected?"Connected":"Offline"))),oe(Ka,"title",(a(De),p(()=>a(De).url))),H(Gu,(a(De),p(()=>a(De).url))),In(kt,(a(De),p(()=>a(De).enabled))),kt.disabled=(n(),a(De),p(()=>n().pending[a(De).id]||n().saving)),H(Ht,(a(De),p(()=>a(De).enabled?"Enabled":"Disabled"))),Vt.disabled=(n(),a(De),p(()=>n().pending[a(De).id]||n().saving)),bn=Pt(Qt,1,"tools-toggle",null,bn,en),oe(Qt,"aria-expanded",ln),oe(Qt,"aria-controls",`tools-${a(De),p(()=>a(De).id)??""}`),H(Pn,`${a(De),p(()=>a(De).tool_count)??""} tool${a(De),p(()=>a(De).tool_count===1?"":"s")??""} available`)},[()=>({connected:a(De).connected,offline:!a(De).connected}),()=>({open:a(A).has(a(De).id)}),()=>(a(A),a(De),p(()=>a(A).has(a(De).id)))]),z("change",kt,xn=>F(a(De).id,xn.target.checked)),z("click",Vt,()=>void ie(a(De).id)),z("click",Qt,()=>ae(a(De).id)),S(zt,xr)}),S(dt,nn)};L(Ye,dt=>{n(),p(()=>!n().servers.length)?dt(gt):dt(Lt,!1)})}var Rt=x(Ye,2);{var At=dt=>{var nn=_y(),zt=m(nn);j(()=>H(zt,(n(),p(()=>n().saveError)))),S(dt,nn)};L(Rt,dt=>{n(),p(()=>n().saveError)&&dt(At)})}var Ot=x(Rt,2);{var qt=dt=>{var nn=by();S(dt,nn)};L(Ot,dt=>{n(),p(()=>n().dirty)&&dt(qt)})}j(dt=>{qe.disabled=(a(k),n(),p(()=>a(k)||n().saving)),tt.disabled=dt,H(Se,a(k)?"Connecting...":"Connect")},[()=>(a(k),a(E),n(),p(()=>a(k)||!a(E).trim()||n().saving))]),cr(qe,()=>a(E),dt=>_(E,dt)),z("keydown",qe,dt=>{dt.key==="Enter"&&G()}),z("click",tt,()=>void G()),S(P,V)};L(mt,P=>{n(),p(()=>n().error)?P(ct):P(we,!1)},!0)}S(pe,Te)};L(fe,pe=>{n(),p(()=>n().loading)?pe(Fe):pe(nt,!1)})}j(()=>{Ge.disabled=(r(),p(()=>r().loading||r().authorizing)),H(Ae,(r(),p(()=>r().authorizing?"Authorizing...":r().authorized?"Reconnect":"Connect"))),Be.disabled=(s(),p(()=>s().loading||s().authorizing)),H(Ne,(s(),p(()=>s().authorizing?"Authorizing...":s().authorized?"Reconnect":"Connect"))),Nt.disabled=(n(),p(()=>n().refreshing||n().saving||n().dirty)),H(on,(n(),p(()=>n().refreshing?"Refreshing...":"Refresh")))}),z("click",Ge,()=>void le()),z("click",Be,()=>void J()),z("click",Nt,O),S(ne,X)},$$slots:{default:!0,heading:(ne,xe)=>{var X=ky();S(ne,X)},footer:(ne,xe)=>{var X=Ay(),Le=m(X);{var Re=Ge=>{var Ae=wy();S(Ge,Ae)},et=Ge=>{var Ae=Ee(),Ke=ce(Ae);{var ge=ze=>{var je=Sy();S(ze,je)},Pe=ze=>{var je=Ee(),Je=ce(je);{var Dt=B=>{var ue=Ey();S(B,ue)},de=B=>{var ue=Cy();S(B,ue)};L(Je,B=>{n(),p(()=>n().dirty)?B(Dt):B(de,!1)},!0)}S(ze,je)};L(Ke,ze=>{n(),p(()=>n().saving)?ze(ge):ze(Pe,!1)},!0)}S(Ge,Ae)};L(Le,Ge=>{n(),p(()=>n().saveError)?Ge(Re):Ge(et,!1)})}S(ne,X)}}})}};L(Q,Z=>{l()&&Z(K)})}S(e,ke),St(),i()}var Dy=M('<section><header class="svelte-10u46cr"><button type="button"><span class="title svelte-10u46cr"> </span> <span class="chevron svelte-10u46cr" aria-hidden="true"></span></button></header> <div class="content svelte-10u46cr"><!></div></section>');function oi(e,t){wt(t,!1);let n=re(t,"title",8),r=re(t,"startOpen",8,!1),s=re(t,"forceOpen",8,!1),u=$(r()),o=$(!1);const i=c(n());function l(){s()||_(u,!a(u))}function c(C){const w=C.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"section",y=Math.abs(Array.from(C).reduce((E,k)=>E*31+k.charCodeAt(0),7)).toString(36);return`filter-section-${w}-${y}`}ye(()=>(R(s()),a(u),a(o),R(r())),()=>{s()?(a(u)||_(u,!0),_(o,!0)):a(o)&&(_(u,r()),_(o,!1))}),Yt(),Ct();var f=Dy(),d=m(f),g=m(d);let h;var v=m(g),T=m(v),A=x(d,2),b=m(A);wn(b,t,"default",{}),j(C=>{Pt(f,1,`filter-section ${a(u)?"expanded":"collapsed"}`,"svelte-10u46cr"),h=Pt(g,1,"toggle svelte-10u46cr",null,h,C),oe(g,"aria-expanded",a(u)),oe(g,"aria-controls",i),oe(g,"aria-disabled",s()),H(T,n()),oe(A,"id",i),oe(A,"hidden",!a(u))},[()=>({locked:s()})]),z("click",g,l),S(e,f),St()}var My=M('<div class="range-slider svelte-1q5g18c"><div class="track svelte-1q5g18c"></div> <div class="range svelte-1q5g18c" aria-hidden="true"></div> <input class="thumb thumb-min svelte-1q5g18c" type="range"/> <input class="thumb thumb-max svelte-1q5g18c" type="range"/></div>');function Fy(e,t){wt(t,!1);const n=$(),r=$(),s=$(),u=$(),o=$(),i=$(),l=Jt();let c=re(t,"id",8),f=re(t,"min",8,0),d=re(t,"max",8,100),g=re(t,"step",8,1),h=re(t,"value",24,()=>({min:f(),max:d()})),v=re(t,"disabled",8,!1),T=re(t,"ariaLabelMin",8,"Minimum value"),A=re(t,"ariaLabelMax",8,"Maximum value");const b=6;function C(I,Y,G){return!Number.isFinite(I)||I<Y?Y:I>G?G:Number(I.toFixed(b))}function w(I,Y,G){const ie=G-Y;return!Number.isFinite(ie)||ie<=0?0:(I-Y)/ie*100}function y(I,Y){const G={min:I,max:Y};l("input",G),l("change",G)}function E(I){const Y=I.target,G=C(Number(Y.value),a(n),a(u));if(G>a(u)){y(a(u),a(u));return}y(G,a(u))}function k(I){const Y=I.target,G=C(Number(Y.value),a(s),a(r));if(G<a(s)){y(a(s),a(s));return}y(a(s),G)}ye(()=>R(f()),()=>{_(n,Number.isFinite(f())?f():0)}),ye(()=>(R(d()),a(n)),()=>{_(r,Number.isFinite(d())?d():a(n))}),ye(()=>(R(h()),a(n),a(r)),()=>{_(s,C(h()?.min??a(n),a(n),a(r)))}),ye(()=>(R(h()),a(r),a(n)),()=>{_(u,C(h()?.max??a(r),a(n),a(r)))}),ye(()=>(a(s),a(u)),()=>{a(s)>a(u)&&_(s,a(u))}),ye(()=>(a(s),a(n),a(r)),()=>{_(o,w(a(s),a(n),a(r)))}),ye(()=>(a(u),a(n),a(r)),()=>{_(i,w(a(u),a(n),a(r)))}),Yt(),Ct();var D=My(),W=x(m(D),2),U=x(W,2),F=x(U,2);j(()=>{oe(D,"data-disabled",v()),hn(W,`left: ${a(o)}%; right: ${100-a(i)}%;`),oe(U,"id",c()?`${c()}-min`:void 0),oe(U,"min",a(n)),oe(U,"max",a(u)),oe(U,"step",g()),Mt(U,a(s)),oe(U,"aria-label",T()),U.disabled=v(),oe(F,"id",c()?`${c()}-max`:void 0),oe(F,"min",a(s)),oe(F,"max",a(r)),oe(F,"step",g()),Mt(F,a(u)),oe(F,"aria-label",A()),F.disabled=v()}),z("input",U,E),z("input",F,k),S(e,D),St()}var Py=M('<p class="empty svelte-2m3fny"> </p>'),Iy=M('<button type="button"><span class="label svelte-2m3fny"> </span> <span class="indicator svelte-2m3fny" aria-hidden="true"></span></button>'),Ny=M('<div class="options svelte-2m3fny"><!></div>');function Ts(e,t){wt(t,!1);let n=re(t,"title",8),r=re(t,"options",24,()=>[]),s=re(t,"selected",24,()=>[]),u=re(t,"excluded",24,()=>[]),o=re(t,"emptyMessage",8,"No options available."),i=re(t,"variant",8,"default");const l=Jt();let c=$([]);function f(v){l("toggle",v)}function d(v){return v.trim().toLowerCase()}function g(v,T){if(v.length===0)return!1;const A=d(T);return A?v.some(b=>d(b)===A):!1}function h(v){return g(s(),v)?"include":g(u(),v)?"exclude":"neutral"}ye(()=>R(r()),()=>{_(c,r().map(v=>{const T=h(v);return{value:v,state:T,pressed:T==="include"?"true":T==="exclude"?"mixed":"false"}}))}),Yt(),Ct();{let v=Ft(()=>(R(s()),R(u()),p(()=>s().length+u().length>0)));oi(e,{get title(){return n()},get forceOpen(){return a(v)},children:(T,A)=>{var b=Ny(),C=m(b);{var w=E=>{var k=Py(),D=m(k);j(()=>H(D,o())),S(E,k)},y=E=>{var k=Ee(),D=ce(k);Tt(D,1,()=>a(c),({value:W,state:U,pressed:F})=>W,(W,U)=>{let F=()=>a(U).value,I=()=>a(U).state,Y=()=>a(U).pressed;var G=Iy();let ie;var O=m(G),ee=m(O);j(le=>{ie=Pt(G,1,"pill svelte-2m3fny",null,ie,le),oe(G,"aria-pressed",Y()),oe(G,"data-state",I()),H(ee,F())},[()=>({active:I()==="include",exclude:I()==="exclude"})]),z("click",G,()=>f(F())),S(W,G)}),S(E,k)};L(C,E=>{R(r()),p(()=>r().length===0)?E(w):E(y,!1)})}j(()=>oe(b,"data-variant",i())),S(T,b)},$$slots:{default:!0}})}St()}const $i=1e-9,Va=[4e3,16e3,32e3,64e3,128e3,256e3,1e6],Ia=Va.length,Sa=0;function Ly(e){return!Number.isFinite(e)||e<=0?"Any":e>=1e6?"1M":e>=1e3?`${Math.round(e/1e3)}K`:`${e}`}const uc=["Any",...Va.map(e=>Ly(e))],vs=[0,.1,.2,.5,1,5,10],as=vs.length,Ls=as,oc="$10+";function ga(e){if(e<=0)return"FREE";const t=Math.abs(e),n=t>=10||t>=1?0:t>=.1?1:t>=.01?2:3;return`$${e.toFixed(n).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")}`}const Bo=vs.map(e=>ga(e));function ha(e,t,n){return!Number.isFinite(e)||e<t?t:e>n?n:Math.round(e)}function rf(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<as;r+=1){const s=Math.abs(vs[r]-e);s<n&&(n=s,t=r)}return t}function Oy(e){let t=0,n=Number.POSITIVE_INFINITY;for(let r=0;r<Ia;r+=1){const s=Math.abs(Va[r]-e);s<n&&(n=s,t=r)}return t+1}function $y(e){if(e===null||e<=0)return 0;const t=vs.findIndex(n=>Math.abs(n-e)<=$i);return t>=0?t:rf(e)}function Ry(e){if(e===null)return Ls;const t=vs.findIndex(n=>Math.abs(n-e)<=$i);return t>=0?t:rf(e)}function zy(e){if(e===null||e<=0)return Sa;for(let t=0;t<Ia;t+=1)if(Math.abs(Va[t]-e)<=$i)return t+1;return Oy(e)}function By(e){if(e<=Sa)return null;const t=Math.min(Math.max(e-1,0),Ia-1);return Va[t]}function Uy(e){if(e<=0)return null;const t=Math.min(e,as-1);return vs[t]}function jy(e){if(e>=Ls)return null;const t=Math.min(Math.max(e,0),as-1);return vs[t]}function qy(e){if(!e)return 0;let t=0;e.search.trim()&&(t+=1);const n=r=>{t+=r.include.length+r.exclude.length};return n(e.inputModalities),n(e.outputModalities),n(e.series),n(e.providers),n(e.supportedParameters),n(e.moderation),e.minContext!==null&&(t+=1),e.minPromptPrice!==null&&(t+=1),e.maxPromptPrice!==null&&(t+=1),t}var Hy=M('<p class="hint svelte-1247vns">No context metadata available.</p>'),Wy=M('<p class="hint svelte-1247vns"> </p>'),Vy=M('<span class="svelte-1247vns"> </span>'),Gy=M('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Minimum tokens</span> <span class="slider-value svelte-1247vns"> </span></div> <input class="slider svelte-1247vns" type="range" aria-label="Minimum context tokens"/> <div class="slider-scale context-scale svelte-1247vns"></div></div>'),Zy=M('<p class="hint svelte-1247vns">No pricing metadata available.</p>'),Ky=M('<p class="hint svelte-1247vns"> </p>'),Yy=M('<span class="svelte-1247vns"> </span>'),Jy=M('<div class="slider-scale price-scale svelte-1247vns"></div>'),Xy=M('<div class="slider-group svelte-1247vns"><div class="slider-header svelte-1247vns"><span class="slider-label svelte-1247vns">Prompt price (per 1M tokens)</span> <span class="slider-value svelte-1247vns"> </span></div> <!> <!></div>'),Qy=M('<aside class="filters-panel svelte-1247vns" aria-label="Filter models"><header class="filters-header svelte-1247vns"><div><h3 class="svelte-1247vns">Filters</h3> <p> </p></div> <button type="button" class="btn btn-ghost btn-small">Clear all</button></header> <div class="filters-content svelte-1247vns"><!> <!> <!> <!> <!> <!> <!> <!></div></aside>');function e6(e,t){wt(t,!1);const n=()=>yt(i,"$facets",u),r=()=>yt(l,"$filters",u),s=()=>yt(w,"$activeFilters",u),[u,o]=rr(),{facets:i,filters:l,toggleInputModality:c,toggleOutputModality:f,toggleSeries:d,toggleProvider:g,toggleSupportedParameter:h,toggleModeration:v,setMinContext:T,setMinPromptPrice:A,setMaxPromptPrice:b,resetFilters:C,activeFilters:w}=vr,y="context-length-slider",E="prompt-price-slider";let k=$(),D=$(null),W=$(),U=$(0),F=$(""),I=$(null),Y=$(!1),G=$(0),ie=$([]),O=$(!1),ee=$({min:0,max:0}),le=$(""),te=$([]);function J(ge){if(a(Y)){T(null);return}const Pe=ha(ge,Sa,Ia);T(By(Pe))}function N(ge){if(a(O)){A(null),b(null);return}const Pe=ge.detail,ze=ha(Pe.min,0,as-1),je=ha(Pe.max,0,Ls);A(Uy(ze)),b(jy(je))}ye(()=>n(),()=>{_(D,n())}),ye(()=>r(),()=>{_(k,r())}),ye(()=>s(),()=>{_(W,s())}),ye(()=>a(k),()=>{_(U,qy(a(k)))}),ye(()=>a(U),()=>{_(F,a(U)>0?`${a(U)} active filter${a(U)===1?"":"s"}`:"All models shown.")}),ye(()=>(a(D),a(Y),a(k),uc),()=>{const ge=a(D)?.maxContext??null;_(I,ge),_(Y,ge===null),_(G,a(Y)?Sa:zy(a(k)?.minContext??null)),_(ie,a(Y)?[]:uc)}),ye(()=>a(D),()=>{const ge=a(D)?.maxPromptPrice??null;_(O,ge===null)}),ye(()=>(a(O),a(k),as),()=>{_(ee,(()=>{if(a(O))return{min:0,max:Ls};const ge=$y(a(k)?.minPromptPrice??null),Pe=Ry(a(k)?.maxPromptPrice??null),ze=ha(ge,0,as-1),je=ha(Pe,0,Ls);return ze>je?{min:je,max:je}:{min:ze,max:je}})())}),ye(()=>(a(k),oc),()=>{_(le,(()=>{const ge=a(k)?.minPromptPrice,Pe=a(k)?.maxPromptPrice,ze=ge===null?Bo[0]:ga(ge),je=Pe===null?oc:ga(Pe);return`${ze} â ${je}`})())}),ye(()=>(a(O),Bo),()=>{_(te,a(O)?[]:Bo)}),Yt(),Ct();var q=Qy(),ae=m(q),ke=m(ae),Q=x(m(ke),2);let K;var Z=m(Q),me=x(ke,2),ne=x(ae,2),xe=m(ne);{let ge=Ft(()=>(a(D),p(()=>a(D)?.inputModalities??[]))),Pe=Ft(()=>(a(k),p(()=>a(k)?.inputModalities?.include??[]))),ze=Ft(()=>(a(k),p(()=>a(k)?.inputModalities?.exclude??[])));Ts(xe,{title:"Input modalities",get options(){return a(ge)},get selected(){return a(Pe)},get excluded(){return a(ze)},emptyMessage:"No modality data available.",$$events:{toggle:je=>c(je.detail)}})}var X=x(xe,2);{let ge=Ft(()=>(a(D),p(()=>a(D)?.outputModalities??[]))),Pe=Ft(()=>(a(k),p(()=>a(k)?.outputModalities?.include??[]))),ze=Ft(()=>(a(k),p(()=>a(k)?.outputModalities?.exclude??[])));Ts(X,{title:"Output modalities",get options(){return a(ge)},get selected(){return a(Pe)},get excluded(){return a(ze)},emptyMessage:"No modality data available.",$$events:{toggle:je=>f(je.detail)}})}var Le=x(X,2);{let ge=Ft(()=>(a(k),p(()=>a(k)?.minContext!==null)));oi(Le,{title:"Context length",get forceOpen(){return a(ge)},children:(Pe,ze)=>{var je=Ee(),Je=ce(je);{var Dt=B=>{var ue=Ee(),ve=ce(ue);{var Me=Ne=>{var Ze=Hy();S(Ne,Ze)},Be=Ne=>{var Ze=Wy(),He=m(Ze);j(Xe=>H(He,`All models offer ${Xe??""} context.`),[()=>(R(eu),a(I),p(()=>eu(a(I))))]),S(Ne,Ze)};L(ve,Ne=>{a(D),p(()=>a(D)?.maxContext===null||a(D)?.maxContext===void 0)?Ne(Me):Ne(Be,!1)})}S(B,ue)},de=B=>{var ue=Gy(),ve=m(ue),Me=x(m(ve),2),Be=m(Me),Ne=x(ve,2);oe(Ne,"id",y),oe(Ne,"step",1);var Ze=x(Ne,2);Tt(Ze,7,()=>a(ie),(He,Xe)=>He+Xe,(He,Xe)=>{var ot=Vy(),Qe=m(ot);j(()=>H(Qe,a(Xe))),S(He,ot)}),j(He=>{H(Be,He),oe(Ne,"min",Sa),oe(Ne,"max",Ia),Mt(Ne,a(G))},[()=>(a(k),R(eu),p(()=>a(k)?.minContext===null?"Any":eu(a(k)?.minContext??0)))]),z("input",Ne,He=>J(Number(He.target.value))),S(B,ue)};L(Je,B=>{a(Y)?B(Dt):B(de,!1)})}S(Pe,je)},$$slots:{default:!0}})}var Re=x(Le,2);{let ge=Ft(()=>(a(k),p(()=>a(k)?.minPromptPrice!==null||a(k)?.maxPromptPrice!==null)));oi(Re,{title:"Prompt pricing",get forceOpen(){return a(ge)},children:(Pe,ze)=>{var je=Ee(),Je=ce(je);{var Dt=B=>{var ue=Ee(),ve=ce(ue);{var Me=Ne=>{var Ze=Zy();S(Ne,Ze)},Be=Ne=>{var Ze=Ky(),He=m(Ze);j(Xe=>H(He,`All models share ${Xe??""} pricing.`),[()=>(R(ga),a(D),p(()=>ga(a(D)?.maxPromptPrice??0)))]),S(Ne,Ze)};L(ve,Ne=>{a(D),p(()=>a(D)?.maxPromptPrice===null||a(D)?.maxPromptPrice===void 0)?Ne(Me):Ne(Be,!1)})}S(B,ue)},de=B=>{var ue=Xy(),ve=m(ue),Me=x(m(ve),2),Be=m(Me),Ne=x(ve,2);Fy(Ne,{id:E,min:0,get max(){return Ls},step:1,get value(){return a(ee)},ariaLabelMin:"Minimum prompt price",ariaLabelMax:"Maximum prompt price",get disabled(){return a(O)},$$events:{input:N,change:N}});var Ze=x(Ne,2);{var He=Xe=>{var ot=Jy();Tt(ot,7,()=>a(te),(Qe,bt)=>Qe+bt,(Qe,bt)=>{var lt=Yy(),Et=m(lt);j(()=>H(Et,a(bt))),S(Qe,lt)}),S(Xe,ot)};L(Ze,Xe=>{a(te),p(()=>a(te).length>0)&&Xe(He)})}j(()=>H(Be,a(le))),S(B,ue)};L(Je,B=>{a(O)?B(Dt):B(de,!1)})}S(Pe,je)},$$slots:{default:!0}})}var et=x(Re,2);{let ge=Ft(()=>(a(D),p(()=>a(D)?.series??[]))),Pe=Ft(()=>(a(k),p(()=>a(k)?.series?.include??[]))),ze=Ft(()=>(a(k),p(()=>a(k)?.series?.exclude??[])));Ts(et,{title:"Series",get options(){return a(ge)},get selected(){return a(Pe)},get excluded(){return a(ze)},emptyMessage:"Series information unavailable.",$$events:{toggle:je=>d(je.detail)}})}var Ge=x(et,2);{let ge=Ft(()=>(a(D),p(()=>a(D)?.supportedParameters??[]))),Pe=Ft(()=>(a(k),p(()=>a(k)?.supportedParameters?.include??[]))),ze=Ft(()=>(a(k),p(()=>a(k)?.supportedParameters?.exclude??[])));Ts(Ge,{title:"Supported parameters",get options(){return a(ge)},get selected(){return a(Pe)},get excluded(){return a(ze)},variant:"columns",emptyMessage:"No parameter metadata available.",$$events:{toggle:je=>h(je.detail)}})}var Ae=x(Ge,2);{let ge=Ft(()=>(a(D),p(()=>a(D)?.providers??[]))),Pe=Ft(()=>(a(k),p(()=>a(k)?.providers?.include??[]))),ze=Ft(()=>(a(k),p(()=>a(k)?.providers?.exclude??[])));Ts(Ae,{title:"Providers",get options(){return a(ge)},get selected(){return a(Pe)},get excluded(){return a(ze)},emptyMessage:"No provider data available.",$$events:{toggle:je=>g(je.detail)}})}var Ke=x(Ae,2);{let ge=Ft(()=>(a(D),p(()=>a(D)?.moderation??[]))),Pe=Ft(()=>(a(k),p(()=>a(k)?.moderation?.include??[]))),ze=Ft(()=>(a(k),p(()=>a(k)?.moderation?.exclude??[])));Ts(Ke,{title:"Moderation",get options(){return a(ge)},get selected(){return a(Pe)},get excluded(){return a(ze)},variant:"compact",emptyMessage:"No moderation metadata available.",$$events:{toggle:je=>v(je.detail)}})}j(ge=>{K=Pt(Q,1,"filters-status svelte-1247vns",null,K,ge),H(Z,a(F)),me.disabled=!a(W)},[()=>({muted:a(U)===0})]),z("click",me,C),S(e,q),St(),o()}var t6=M("<option> </option>"),n6=M('<div class="sort svelte-3bn1bu"><label for="sort-select" class="sort-label svelte-3bn1bu">Sort by</label> <select id="sort-select" class="select-control sort-select svelte-3bn1bu"></select></div>');function r6(e,t){wt(t,!1);let n=re(t,"selected",8),r=re(t,"onSelect",8);const s=[{label:"Newest",value:"newness"},{label:"Lowest price",value:"price"},{label:"Longest context",value:"context"}];function u(c){const f=c.target;r()(f.value)}Ct();var o=n6(),i=x(m(o),2);Tt(i,5,()=>s,Ln,(c,f)=>{var d=t6(),g=m(d),h={};j(()=>{H(g,(a(f),p(()=>a(f).label))),h!==(h=(a(f),p(()=>a(f).value)))&&(d.value=(d.__value=(a(f),p(()=>a(f).value)))??"")}),S(c,d)});var l;Rn(i),j(()=>{l!==(l=n())&&(i.value=(i.__value=n())??"",Tn(i,n()))}),z("change",i,u),S(e,o),St()}const s6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M400-240%20160-480l240-240%2056%2058-142%20142h486v80H314l142%20142-56%2058Z'/%3e%3c/svg%3e";var a6=M('<header class="explorer-header svelte-d2gcy1"><div class="title-group svelte-d2gcy1"><a class="btn btn-ghost btn-small chat-link svelte-d2gcy1" href="/chat" aria-label="Return to chat"><img alt="" aria-hidden="true" class="icon svelte-d2gcy1"/> <span class="label svelte-d2gcy1">Chat</span></a> <h2 id="model-explorer-title" class="svelte-d2gcy1">Model Explorer</h2></div> <div class="header-controls svelte-d2gcy1"><label class="search svelte-d2gcy1"><span class="visually-hidden svelte-d2gcy1">Search models</span> <input class="input-control svelte-d2gcy1" type="search" placeholder="Search by name, provider, description, or tags"/></label> <div class="meta-row svelte-d2gcy1"><p class="summary svelte-d2gcy1" aria-live="polite"> </p> <!></div></div></header>');function u6(e,t){wt(t,!1);let n=re(t,"resultCount",8,0),r=re(t,"searchValue",8,""),s=re(t,"onSearch",8),u=re(t,"sort",8),o=re(t,"onSort",8),i=re(t,"onClose",8);function l(y){const E=y.target;E&&s()(E.value)}Ct();var c=a6(),f=m(c),d=m(f),g=m(d),h=x(f,2),v=m(h),T=x(m(v),2),A=x(v,2),b=m(A),C=m(b),w=x(b,2);r6(w,{get selected(){return u()},get onSelect(){return o()}}),j(()=>{oe(g,"src",s6),Mt(T,r()),H(C,`${n()??""} result${n()===1?"":"s"}`)}),z("click",d,yi(function(...y){i()?.apply(this,y)})),z("input",T,l),S(e,c),St()}var o6=M('<div class="info-item svelte-b7ahyp"><dt class="svelte-b7ahyp"> </dt> <dd class="svelte-b7ahyp"> </dd></div>'),i6=M('<article class="model-card svelte-b7ahyp" role="button" tabindex="0"><header class="svelte-b7ahyp"><h4 class="svelte-b7ahyp"> </h4></header> <section class="info-section svelte-b7ahyp"><dl class="info-grid svelte-b7ahyp"></dl></section></article>');function l6(e,t){wt(t,!1);const n=$(),r=$(),s=$(),u=$(),o=$(),i=$(),l=$(),c=$(),f=$(),d=$(),g=$(),h=$(),v=$(),T=$(),A=$();let b=re(t,"model",8),C=re(t,"onSelect",8);const w=1e6;function y(N){return N&&N.split(/[\s_/-]+/).filter(Boolean).map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ")}function E(N){const q=new Set,ae=[];for(const ke of N){const Q=y(ke.trim());if(!Q)continue;const K=Q.toLowerCase();q.has(K)||(q.add(K),ae.push(Q))}return ae}function k(N){if(N===null)return"Unknown";const q=N/w,ae=q>=10?0:1;return`${q.toFixed(ae).replace(/\.0$/,"")}M tokens`}function D(N){return N.length?N.join(", "):null}function W(N,q){if(N===null)return null;const ae=jp(N);return ae==="FREE"?"FREE":`${ae} ${q}`}const U="/ 1M tokens";function F(N,q,ae,ke){const Q=W(ae,ke);return Q?{key:N,label:q,value:Q}:null}function I(N,q,ae){return ae?{key:N,label:q,value:ae}:null}function Y(){C()(b())}function G(N){(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),C()(b()))}ye(()=>R(b()),()=>{_(n,b().name??b().id)}),ye(()=>R(b()),()=>{_(r,ld(b()))}),ye(()=>R(b()),()=>{_(s,Up(b()))}),ye(()=>R(b()),()=>{_(u,xa(b()))}),ye(()=>a(u),()=>{_(o,k(a(u)))}),ye(()=>R(b()),()=>{_(i,wi(b()).map(N=>N.toLowerCase()))}),ye(()=>R(b()),()=>{_(l,Si(b()).map(N=>N.toLowerCase()))}),ye(()=>a(r),()=>{_(c,a(r)!==null)}),ye(()=>a(s),()=>{_(f,a(s)!==null)}),ye(()=>a(i),()=>{_(d,E(a(i)))}),ye(()=>a(l),()=>{_(g,E(a(l)))}),ye(()=>R(b()),()=>{_(h,(()=>{const N=b().provider;if(N&&typeof N=="object"){if(N.display_name)return N.display_name;if(N.slug)return N.slug}const q=b().id?.split("/")??[];return q.length>1?q[q.length-2]:null})())}),ye(()=>(a(o),a(h),a(d),a(g)),()=>{_(v,[I("context","Context",a(o)),I("provider","Provider",a(h)),I("input-modalities","Input",D(a(d))),I("output-modalities","Output",D(a(g)))].filter(N=>!!N))}),ye(()=>(a(c),a(r),a(f),a(s)),()=>{_(T,[a(c)?F("input-price","Input price",a(r),U):null,a(f)?F("output-price","Output price",a(s),U):null].filter(N=>!!N))}),ye(()=>(a(v),a(T)),()=>{_(A,[...a(v),...a(T)])}),Yt(),Ct();var ie=i6(),O=m(ie),ee=m(O),le=m(ee),te=x(O,2),J=m(te);Tt(J,5,()=>a(A),N=>N.key,(N,q)=>{var ae=o6(),ke=m(ae),Q=m(ke),K=x(ke,2),Z=m(K);j(()=>{H(Q,(a(q),p(()=>a(q).label))),H(Z,(a(q),p(()=>a(q).value)))}),S(N,ae)}),j(()=>{oe(ie,"aria-label",`Use model ${a(n)}`),H(le,a(n))}),z("click",ie,Y),z("keydown",ie,G),S(e,ie),St()}var c6=M('<button type="button"><span class="chip-label svelte-v6y1b4"><span class="chip-category svelte-v6y1b4"> </span> <span class="chip-separator" aria-hidden="true">Â·</span> <span class="chip-value svelte-v6y1b4"> </span></span> <span class="chip-remove svelte-v6y1b4" aria-hidden="true">Ã</span></button>'),d6=M('<section class="active-filters svelte-v6y1b4" aria-label="Active filters"><h3 class="title svelte-v6y1b4">Active filters</h3> <div class="chip-list svelte-v6y1b4"></div></section>');function f6(e,t){wt(t,!1);let n=re(t,"chips",24,()=>[]);const r=Jt();function s(l){r("clear",l)}Ct();var u=Ee(),o=ce(u);{var i=l=>{var c=d6(),f=x(m(c),2);Tt(f,5,n,d=>d.id,(d,g)=>{var h=c6();let v;var T=m(h),A=m(T),b=m(A),C=x(A,4),w=m(C);j(y=>{v=Pt(h,1,"chip svelte-v6y1b4",null,v,y),oe(h,"aria-label",(a(g),p(()=>`Remove ${a(g).state==="exclude"?"excluded":"included"} filter ${a(g).categoryLabel} ${a(g).valueLabel}`))),H(b,(a(g),p(()=>a(g).categoryLabel))),H(w,`${a(g),p(()=>a(g).state==="exclude"?"Not ":"")??""}${a(g),p(()=>a(g).valueLabel)??""}`)},[()=>({include:a(g).state==="include",exclude:a(g).state==="exclude"})]),z("click",h,()=>s(a(g))),S(d,h)}),S(l,c)};L(o,l=>{R(n()),p(()=>n().length>0)&&l(i)})}S(e,u),St()}var p6=M('<p class="empty svelte-6ipifh"><!></p>'),h6=M("<li><!></li>"),v6=M('<ul class="model-grid svelte-6ipifh"></ul>'),m6=M('<section class="results svelte-6ipifh" aria-live="polite"><!> <!></section>');function g6(e,t){wt(t,!1);let n=re(t,"models",24,()=>[]),r=re(t,"filtersActive",8,!1),s=re(t,"onSelect",8),u=re(t,"filterChips",24,()=>[]);const o=Jt();function i(h){o("clearFilter",h.detail)}Ct();var l=m6(),c=m(l);f6(c,{get chips(){return u()},$$events:{clear:i}});var f=x(c,2);{var d=h=>{var v=p6(),T=m(v);{var A=C=>{var w=un("No models match your current filters.");S(C,w)},b=C=>{var w=un("No models available.");S(C,w)};L(T,C=>{r()?C(A):C(b,!1)})}S(h,v)},g=h=>{var v=v6();Tt(v,5,n,T=>T.id,(T,A)=>{var b=h6(),C=m(b);l6(C,{get model(){return a(A)},get onSelect(){return s()}}),S(T,b)}),S(h,v)};L(f,h=>{R(n()),p(()=>n().length===0)?h(d):h(g,!1)})}S(e,l),St()}var _6=M('<span class="filters-toggle__status svelte-drtqmy">Active</span>'),b6=M('<div class="body-toolbar svelte-drtqmy"><button type="button" aria-controls="model-explorer-filters"><span class="filters-toggle__label">Filters</span> <!></button></div>'),y6=M('<div class="modal-backdrop svelte-drtqmy" role="presentation"></div> <div class="model-explorer svelte-drtqmy" role="dialog" aria-modal="true" aria-labelledby="model-explorer-title"><!> <div class="body svelte-drtqmy"><!> <div id="model-explorer-filters" class="filters-panel-container svelte-drtqmy"><!></div> <!></div></div>',1);function x6(e,t){wt(t,!1);const n=()=>yt(g,"$filtered",u),r=()=>yt(A,"$activeFilters",u),s=()=>yt(h,"$filters",u),[u,o]=rr(),i=$(),l=$(),c=$();let f=re(t,"open",12,!1);const d=Jt(),{filtered:g,filters:h,setSearch:v,setSort:T,activeFilters:A,setSelectionState:b}=vr,C={inputModalities:{label:"Input"},outputModalities:{label:"Output"},series:{label:"Series"},providers:{label:"Provider"},supportedParameters:{label:"Parameter"},moderation:{label:"Moderation"}},w=["inputModalities","outputModalities","series","providers","supportedParameters","moderation"],y="(max-width: 1024px)";let E=$(!1),k=$(!0),D=!1,W=$([]);const U="modal-open";let F=()=>{typeof document<"u"&&document.body.classList.remove(U)};Us(()=>F());function I(){f(!1),d("close")}function Y(Q){d("select",{id:Q.id}),I()}function G(Q){T(Q)}function ie(Q){v(Q)}function O(Q){const K=[];for(const Z of w){const me=Q[Z];if(!me)continue;const xe=C[Z]?.label??Z;for(const X of me.include)K.push(ee(Z,xe,X,"include"));for(const X of me.exclude)K.push(ee(Z,xe,X,"exclude"))}return K}function ee(Q,K,Z,me){const ne=Z.trim();return{id:`${Q}:${me}:${ne}`,category:Q,categoryLabel:K,value:ne,valueLabel:le(ne),state:me}}function le(Q){return Q.replace(/[_-]/g," ")||Q}function te(Q){_(E,Q),Q?D||_(k,!1):(_(k,!0),D=!1)}function J(){_(k,!a(k)),D=!0}function N(Q){const K=Q.detail;b(K.category,K.value,"neutral")}Ba(()=>{if(typeof window>"u")return;const Q=window.matchMedia(y);te(Q.matches);const K=Z=>{te(Z.matches)};return typeof Q.addEventListener=="function"?(Q.addEventListener("change",K),()=>Q.removeEventListener("change",K)):(Q.addListener(K),()=>Q.removeListener(K))}),ye(()=>R(f()),()=>{typeof document<"u"&&(f()?document.body.classList.add(U):document.body.classList.remove(U))}),ye(()=>n(),()=>{_(i,n())}),ye(()=>r(),()=>{_(l,r())}),ye(()=>s(),()=>{_(c,s())}),ye(()=>a(c),()=>{_(W,a(c)?O(a(c)):[])}),Yt(),Ct();var q=Ee(),ae=ce(q);{var ke=Q=>{var K=y6(),Z=ce(K),me=x(Z,2),ne=m(me);u6(ne,{get resultCount(){return a(i),p(()=>a(i).length)},get searchValue(){return s(),p(()=>s().search)},onSearch:ie,get sort(){return s(),p(()=>s().sort)},onSort:G,onClose:I});var xe=x(ne,2),X=m(xe);{var Le=Ae=>{var Ke=b6(),ge=m(Ke);let Pe;var ze=x(m(ge),2);{var je=Je=>{var Dt=_6();S(Je,Dt)};L(ze,Je=>{a(l)&&Je(je)})}j(Je=>{Pe=Pt(ge,1,"filters-toggle svelte-drtqmy",null,Pe,Je),oe(ge,"aria-expanded",a(k))},[()=>({open:a(k)})]),z("click",ge,J),S(Ae,Ke)};L(X,Ae=>{a(E)&&Ae(Le)})}var Re=x(X,2),et=m(Re);e6(et,{});var Ge=x(Re,2);g6(Ge,{get models(){return a(i)},get filtersActive(){return a(l)},get filterChips(){return a(W)},onSelect:Y,$$events:{clearFilter:N}}),j(()=>{oe(me,"data-compact",a(E)),oe(xe,"data-compact",a(E)),oe(Re,"data-compact",a(E)),oe(Re,"data-open",a(k))}),z("click",Z,I),S(Q,K)};L(ae,Q=>{f()&&Q(ke)})}S(e,q),St(),o()}var k6=M('<div class="chat-error svelte-1n46o8q" role="alert"><span class="svelte-1n46o8q"> </span> <button type="button" class="svelte-1n46o8q">Dismiss</button></div>'),w6=M('<div class="install-banner svelte-1n46o8q" role="alertdialog" aria-labelledby="install-title"><div class="install-content svelte-1n46o8q"><span id="install-title" class="svelte-1n46o8q">Install this app for a better experience</span> <div class="install-actions svelte-1n46o8q"><button class="install-btn install-btn-primary svelte-1n46o8q" type="button">Install</button> <button class="install-btn install-btn-dismiss svelte-1n46o8q" type="button">Not now</button></div></div></div>'),S6=M('<main class="chat-app svelte-1n46o8q"><!> <section class="chat-main svelte-1n46o8q"><!> <!></section> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></main>');function E6(e,t){wt(t,!1);const n=()=>yt(W,"$selectable",c),r=()=>yt(Ta,"$chatStore",c),s=()=>yt(U,"$activeFor",c),u=()=>yt(md,"$speechState",c),o=()=>yt(k,"$modelsLoading",c),i=()=>yt(D,"$modelsError",c),l=()=>yt(Fs,"$suggestionsStore",c),[c,f]=rr(),{sendMessage:d,cancelStream:g,clearConversation:h,deleteMessage:v,retryMessage:T,editMessage:A,clearError:b,setModel:C,toggleSaved:w,loadSession:y}=Ta,{loadModels:E,loading:k,error:D,selectable:W,activeFor:U}=vr;let F=$(""),I=$([]),Y=$(),G=$(!1),ie=$(!1),O=$(!1),ee=$(!1),le=$(!1),te=$(!1),J=$(!1),N=$(0),q=$(!1),ae=$(!1),ke=$(null),Q=$(null),K=$(null),Z=$([]),me=$(null);const ne=td;let xe=$(null),X=$(""),Le=$(""),Re=$(!1),et=null,Ge=$(!1),Ae=$(!1),Ke=$(!1),ge=$([]);async function Pe(){try{_(ge,await Sp())}catch(fe){console.error("Failed to load conversation list",fe)}}Ba(async()=>{if(typeof window<"u"){_(Ae,window.matchMedia("(pointer: coarse)").matches&&window.innerWidth<=768||window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: minimal-ui)").matches||"standalone"in navigator&&navigator.standalone===!0);const nt=pe=>{pe.preventDefault(),et=pe,_(Ge,!0)};window.addEventListener("beforeinstallprompt",nt),window.addEventListener("appinstalled",()=>{_(Ge,!1),et=null}),Us(()=>{window.removeEventListener("beforeinstallprompt",nt)})}await E(),await Fs.load(),Pe();const fe=await ir.loadDefault();if(fe){const nt=await ir.apply(fe.name);nt?.model&&C(nt.model),await Fs.load()}new URLSearchParams(window.location.search).get("mcp")==="1"&&(_(le,!0),window.history.replaceState({},"",window.location.pathname))});async function ze(){if(!a(Y))return;const fe=a(Y).getNewSuggestion();fe&&await Fs.add(fe.label,fe.text)}async function je(fe){await Fs.remove(fe.detail.index)}Us(()=>{typeof document<"u"&&document.body.classList.remove("modal-open")});function Je(fe){C(fe)}function Dt(){X1()}function de(fe){C(fe.detail.id)}function B(fe){_(F,fe)}function ue(fe){r().isStreaming||v(fe.detail.id)}function ve(fe){T(fe)}function Me(fe){if(!fe?.attachment)return;Ze();const Fe={...fe.attachment,metadata:fe.attachment.metadata?{...fe.attachment.metadata}:null},nt=a(I)??[],Te=nt.some(mt=>mt.id===Fe.id||mt.displayUrl===Fe.displayUrl||mt.deliveryUrl===Fe.deliveryUrl)?nt:[...nt,Fe];_(I,Te)}function Be(fe){const Fe=r().messages.find(nt=>nt.id===fe&&nt.role==="user");Fe&&(_(Re,!1),_(xe,fe),_(X,Fe.text),_(Le,Fe.text))}function Ne(){_(xe,null),_(X,""),_(Le,"")}function Ze(){a(Re)||Ne()}function He(){Ze()}function Xe(fe){if(!a(xe))return;const Fe=fe.trim();if(!Fe)return;const nt=a(xe);_(Re,!0),Ne(),A(nt,Fe).catch(Te=>{console.error("Failed to apply message edit",Te)}).finally(()=>{_(Re,!1)})}async function ot(fe){if(fe){_(ie,!0),_(ae,!0),_(ke,null),_(Q,null),_(K,fe);try{const Fe=await Y0(fe);_(Q,Fe?.data??null)}catch(Fe){const nt=Fe instanceof Error?Fe.message:"Failed to load details.";_(ke,nt)}finally{_(ae,!1)}}}function Qe(){_(ie,!1),_(K,null),_(Q,null),_(ke,null)}async function bt(fe){const Fe=fe.trim();if(Fe){_(F,Fe);try{await d({text:Fe,attachments:[]}),_(F,"")}catch(nt){console.error("Failed to send speech transcription",nt)}}}async function lt(){if(!et)return;await et.prompt();const{outcome:fe}=await et.userChoice;fe==="accepted"&&_(Ge,!1),et=null}function Et(){_(Ge,!1)}ye(()=>(a(G),a(ie),a(O),a(ee),a(le),a(te),a(J)),()=>{typeof document<"u"&&document.body.classList.toggle("modal-open",a(G)||a(ie)||a(O)||a(ee)||a(le)||a(te)||a(J))}),ye(()=>(n(),r()),()=>{_(Z,n()(r().selectedModel))}),ye(()=>(s(),r()),()=>{_(me,s()(r().selectedModel))}),ye(()=>(u(),a(N)),()=>{u().promptVersion!==a(N)&&(_(N,u().promptVersion),_(F,u().promptText))}),ye(()=>(u(),r(),yl),()=>{if(u().pendingSubmit&&!r().isStreaming){const fe=yl();fe&&bt(fe.text)}}),ye(()=>(r(),a(q),u(),_l),()=>{const fe=r().isStreaming;a(q)&&!fe&&u().conversationActive&&_l(),_(q,fe)}),ye(()=>(a(xe),bl),()=>{a(xe)&&bl()}),Yt(),Ct();var Zt=S6(),Wt=m(Zt);{let fe=Ft(()=>(r(),p(()=>r().messages.length>0)));y1(Wt,{get selectableModels(){return a(Z)},get selectedModel(){return r(),p(()=>r().selectedModel)},get modelsLoading(){return o()},get modelsError(){return i()},get hasMessages(){return a(fe)},get pwaMode(){return a(Ae)},get isSaved(){return r(),p(()=>r().isSaved)},get conversations(){return a(ge)},get controlsOpen(){return a(Ke)},set controlsOpen(Fe){_(Ke,Fe)},$$events:{openExplorer:()=>_(G,!0),clear:()=>{_(I,[]),_(F,""),h(),Pe()},modelChange:Fe=>Je(Fe.detail.id),openModelSettings:()=>_(O,!0),openSystemSettings:()=>_(ee,!0),openMcpServers:()=>_(le,!0),openKioskSettings:()=>_(te,!0),openCliSettings:()=>_(J,!0),toggleSaved:async()=>{await w(),Pe()},loadConversation:async Fe=>{await y(Fe.detail.sessionId),_(I,[]),_(F,"")},deleteConversation:async Fe=>{try{await Ap(Fe.detail.sessionId),Pe()}catch(nt){console.error("Failed to delete conversation",nt)}}},$$legacy:!0})}var tn=x(Wt,2),se=m(tn);{var _e=fe=>{Dr(X_(fe,{get suggestions(){return l(),p(()=>l().items)},get deleting(){return l(),p(()=>l().deleting)},get pwaMode(){return a(Ae)},$$events:{add:ze,delete:je,select:Fe=>B(Fe.detail.text)},$$legacy:!0}),Fe=>_(Y,Fe),()=>a(Y))};L(se,fe=>{r(),p(()=>!r().messages.length)&&fe(_e)})}var be=x(se,2);r_(be,{get messages(){return r(),p(()=>r().messages)},get disableDelete(){return r(),p(()=>r().isStreaming)},$$events:{openGenerationDetails:fe=>ot(fe.detail.id),deleteMessage:ue,retryMessage:fe=>ve(fe.detail.id),editMessage:fe=>Be(fe.detail.id),editAssistantAttachment:fe=>Me(fe.detail)}});var Oe=x(tn,2);{var Ie=fe=>{var Fe=k6(),nt=m(Fe),pe=m(nt),Te=x(nt,2);j(()=>H(pe,(r(),p(()=>r().error)))),z("click",Te,b),S(fe,Fe)};L(Oe,fe=>{r(),p(()=>r().error)&&fe(Ie)})}var at=x(Oe,2);{var pt=fe=>{Lh(fe,{get originalValue(){return a(Le)},get saving(){return a(Re)},get disabled(){return a(Re)},get value(){return a(X)},set value(Fe){_(X,Fe)},$$events:{cancel:He,submit:Fe=>Xe(Fe.detail.text)},$$legacy:!0})},$e=fe=>{kh(fe,{get presetAttachments(){return a(I)},get pwaMode(){return a(Ae)},get isStreaming(){return r(),p(()=>r().isStreaming)},get prompt(){return a(F)},set prompt(Fe){_(F,Fe)},$$events:{submit:Fe=>d(Fe.detail),cancel:g,startDictation:Dt,inputFocus:()=>_(Ke,!1)},$$legacy:!0})};L(at,fe=>{a(xe)?fe(pt):fe($e,!1)})}var We=x(at,2);Ph(We,{get open(){return a(ie)},get generationId(){return a(K)},get loading(){return a(ae)},get error(){return a(ke)},get data(){return a(Q)},get fields(){return ne},$$events:{close:Qe}});var Ve=x(We,2);G_(Ve,{get open(){return a(O)},get selectedModel(){return r(),p(()=>r().selectedModel)},get model(){return a(me)},$$events:{close:()=>_(O,!1)}});var Ce=x(Ve,2);Ib(Ce,{get open(){return a(ee)},$$events:{close:()=>_(ee,!1)}});var xt=x(Ce,2);Ty(xt,{get open(){return a(le)},$$events:{close:()=>_(le,!1)}});var it=x(xt,2);I3(it,{get open(){return a(te)},$$events:{close:()=>_(te,!1)}});var ht=x(it,2);Xb(ht,{get open(){return a(J)},$$events:{close:()=>_(J,!1)}});var Nt=x(ht,2);x6(Nt,{get open(){return a(G)},set open(fe){_(G,fe)},$$events:{select:de},$$legacy:!0});var on=x(Nt,2);{var Kt=fe=>{var Fe=w6(),nt=m(Fe),pe=x(m(nt),2),Te=m(pe),mt=x(Te,2);z("click",Te,lt),z("click",mt,Et),S(fe,Fe)};L(on,fe=>{a(Ge)&&fe(Kt)})}j(()=>oe(Zt,"data-drawer-open",a(Ke))),S(e,Zt),St(),f()}T0(E6,{target:document.getElementById("app")});"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{});export{rr as A,nd as B,$ as C,_ as D,oe as E,x as F,Pt as G,Rn as H,Tn as I,Mt as J,re as a,L as b,Jt as c,T6 as d,z as e,M as f,S as g,St as h,Ct as i,m as j,A6 as k,Ee as l,ce as m,R as n,Tt as o,wt as p,a as q,Ba as r,H as s,j as t,p as u,Us as v,ye as w,yt as x,Yt as y,Dr as z};
